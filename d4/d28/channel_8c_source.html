<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: channel.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">channel.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d4/d28/channel_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Asterisk -- An open source telephony toolkit.</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright (C) 1999 - 2006, Digium, Inc.</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * Mark Spencer &lt;markster@digium.com&gt;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * See http://www.asterisk.org for more information about</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * the Asterisk project. Please do not directly contact</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * any of the maintainers of this project for assistance;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * the project provides a web site, mailing lists and IRC</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * channels for your use.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * This program is free software, distributed under the terms of</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * the GNU General Public License Version 2. See the LICENSE file</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * at the top of the source tree.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">/*! \file</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * \brief Channel Management</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * \author Mark Spencer &lt;markster@digium.com&gt;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment">/*** MODULEINFO</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment">   &lt;support_level&gt;core&lt;/support_level&gt;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> ***/</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/db2/asterisk_8h.html">asterisk.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/d78/__private_8h.html">asterisk/_private.h</a>&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;sys/time.h&gt;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;signal.h&gt;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;math.h&gt;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/df2/paths_8h.html">asterisk/paths.h</a>&quot;</span>   <span class="comment">/* use ast_config_AST_SYSTEM_NAME */</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/de0/pbx_8h.html">asterisk/pbx.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html">asterisk/frame.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/d5d/mod__format_8h.html">asterisk/mod_format.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/d00/sched_8h.html">asterisk/sched.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d7b/channel_8h.html">asterisk/channel.h</a>&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/d07/musiconhold_8h.html">asterisk/musiconhold.h</a>&quot;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/dce/say_8h.html">asterisk/say.h</a>&quot;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/d4d/file_8h.html">asterisk/file.h</a>&quot;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/db0/cli_8h.html">asterisk/cli.h</a>&quot;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d39/translate_8h.html">asterisk/translate.h</a>&quot;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d45/manager_8h.html">asterisk/manager.h</a>&quot;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/de7/chanvars_8h.html">asterisk/chanvars.h</a>&quot;</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d90/linkedlists_8h.html">asterisk/linkedlists.h</a>&quot;</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/d0f/indications_8h.html">asterisk/indications.h</a>&quot;</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/da3/causes_8h.html">asterisk/causes.h</a>&quot;</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/d47/callerid_8h.html">asterisk/callerid.h</a>&quot;</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d60/utils_8h.html">asterisk/utils.h</a>&quot;</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d42/lock_8h.html">asterisk/lock.h</a>&quot;</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html">asterisk/app.h</a>&quot;</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/d86/transcap_8h.html">asterisk/transcap.h</a>&quot;</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/da2/devicestate_8h.html">asterisk/devicestate.h</a>&quot;</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/d7d/threadstorage_8h.html">asterisk/threadstorage.h</a>&quot;</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/d7d/slinfactory_8h.html">asterisk/slinfactory.h</a>&quot;</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/d79/audiohook_8h.html">asterisk/audiohook.h</a>&quot;</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d3c/framehook_8h.html">asterisk/framehook.h</a>&quot;</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d41/timing_8h.html">asterisk/timing.h</a>&quot;</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/d6c/autochan_8h.html">asterisk/autochan.h</a>&quot;</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/d0f/stringfields_8h.html">asterisk/stringfields.h</a>&quot;</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/dc3/global__datastores_8h.html">asterisk/global_datastores.h</a>&quot;</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/de4/channel__internal_8h.html">asterisk/channel_internal.h</a>&quot;</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/d47/features_8h.html">asterisk/features.h</a>&quot;</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/d56/bridge_8h.html">asterisk/bridge.h</a>&quot;</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/ddc/test_8h.html">asterisk/test.h</a>&quot;</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/d4a/stasis__channels_8h.html">asterisk/stasis_channels.h</a>&quot;</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d93/max__forwards_8h.html">asterisk/max_forwards.h</a>&quot;</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/d95/stream_8h.html">asterisk/stream.h</a>&quot;</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/d0d/message_8h.html">asterisk/message.h</a>&quot;</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">/*** DOCUMENTATION</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment"> ***/</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="preprocessor">#if defined(KEEP_TILL_CHANNEL_PARTY_NUMBER_INFO_NEEDED)</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="preprocessor">#if defined(HAVE_PRI)</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">#include &quot;libpri.h&quot;</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(HAVE_PRI) */</span><span class="preprocessor"></span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(KEEP_TILL_CHANNEL_PARTY_NUMBER_INFO_NEEDED) */</span><span class="preprocessor"></span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">/* uncomment if you have problems with &#39;monitoring&#39; synchronized files */</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor">#define MONITOR_CONSTANT_DELAY</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="preprocessor">#define MONITOR_DELAY   150 * 8     </span><span class="comment">/*!&lt; 150 ms of MONITORING DELAY */</span><span class="preprocessor"></span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a5cb129ce1d580dbb22ec9573dcb62f7f">   93</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a5cb129ce1d580dbb22ec9573dcb62f7f">chancount</a>;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ade9bc8493de7d579e2f06b55379fc673">   95</a></span>&#160;<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="../../d4/d28/channel_8c.html#a7457a2311fc74cc4a5b0aa0d2001835c">global_fin</a>, <a class="code" href="../../d4/d28/channel_8c.html#ade9bc8493de7d579e2f06b55379fc673">global_fout</a>;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ae578b94d61d4c2aed2c960c8ac288f2b">   97</a></span>&#160;<a class="code" href="../../dc/d7d/threadstorage_8h.html#ac268c0a8272ec11e73269392507fb1a6">AST_THREADSTORAGE</a>(<a class="code" href="../../d4/d28/channel_8c.html#ae578b94d61d4c2aed2c960c8ac288f2b">state2str_threadbuf</a>);</div><div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#afd4de5975fd2bcaa99390ba19d28f990">   98</a></span>&#160;<span class="preprocessor">#define STATE2STR_BUFSIZE   32</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">/*! Default amount of time to use when emulating a DTMF digit as a begin and end</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment"> *  100ms */</span></div><div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a4a1bcc0fd8b14e9bbff17b963969bcab">  102</a></span>&#160;<span class="preprocessor">#define AST_DEFAULT_EMULATE_DTMF_DURATION 100</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">/*! Default amount of time to use when emulating an MF digit as a begin and end</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment"> *  55ms */</span></div><div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aba4a2fe640be077614d89793846d9ef2">  106</a></span>&#160;<span class="preprocessor">#define DEFAULT_EMULATE_MF_DURATION 55</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#af42ae38a2ed095a74cd2a8c7f65a7749">  108</a></span>&#160;<span class="preprocessor">#define DEFAULT_AMA_FLAGS AST_AMA_DOCUMENTATION</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">/*! Minimum amount of time between the end of the last digit and the beginning</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment"> *  of a new one - 45ms */</span></div><div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a21882e640e01106e62bdab88849a17c5">  112</a></span>&#160;<span class="preprocessor">#define AST_MIN_DTMF_GAP 45</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">/*! \brief List of channel drivers */</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="keyword">struct </span><a class="code" href="../../dd/d6f/structchanlist.html">chanlist</a> {</div><div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="../../dd/d6f/structchanlist.html#aa8f6a3233b196d1a6b727edc83063a63">  116</a></span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d4/d85/structast__channel__tech.html">ast_channel_tech</a> *<a class="code" href="../../dd/d6f/structchanlist.html#aa8f6a3233b196d1a6b727edc83063a63">tech</a>;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a67508a613c8f337732e35d9367b43ae7">AST_LIST_ENTRY</a>(<a class="code" href="../../dd/d6f/structchanlist.html">chanlist</a>) <a class="code" href="../../dd/d6f/structchanlist.html#aa6880648b159c5b2441129417c94048d">list</a>;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;};</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">/*! \brief the list of registered channel types */</span></div><div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="../../d3/da8/structbackends.html#ace4e0066a5b24f84b90536e9906619f6">  121</a></span>&#160;<span class="keyword">static</span> <a class="code" href="../../df/d90/linkedlists_8h.html#a39918fd433ac42184b152c86016ef139">AST_RWLIST_HEAD_STATIC</a>(<a class="code" href="../../d3/da8/structbackends.html">backends</a>, <a class="code" href="../../dd/d6f/structchanlist.html">chanlist</a>);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">/*! \brief All active channels on the system */</span></div><div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#adbc20a2fd50bb1376a3c6094e96a31e3">  124</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *<a class="code" href="../../d4/d28/channel_8c.html#adbc20a2fd50bb1376a3c6094e96a31e3">channels</a>;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">/*! \brief map AST_CAUSE&#39;s to readable string representations</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment"> * \ref causes.h</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="../../db/ddc/structcauses__map.html">  130</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../db/ddc/structcauses__map.html">causes_map</a> {</div><div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="../../db/ddc/structcauses__map.html#aa4d0ccb9d0904892652f2f258c5ad225">  131</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../db/ddc/structcauses__map.html#aa4d0ccb9d0904892652f2f258c5ad225">cause</a>;</div><div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="../../db/ddc/structcauses__map.html#a8f8f80d37794cde9472343e4487ba3eb">  132</a></span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../db/ddc/structcauses__map.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>;</div><div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="../../db/ddc/structcauses__map.html#a710bce51374aba96ab04912897666c35">  133</a></span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../db/ddc/structcauses__map.html#a710bce51374aba96ab04912897666c35">desc</a>;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;};</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a72cb69dc8edd533347b2f851230e863d">  136</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../db/ddc/structcauses__map.html">causes_map</a> <a class="code" href="../../d4/d28/channel_8c.html#a72cb69dc8edd533347b2f851230e863d">causes</a>[] = {</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#a131d8780af378d0c4ef5075949902785">AST_CAUSE_UNALLOCATED</a>, <span class="stringliteral">&quot;UNALLOCATED&quot;</span>, <span class="stringliteral">&quot;Unallocated (unassigned) number&quot;</span> },</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#ac4b4141fb57b00f56083307b3e5fe9f8">AST_CAUSE_NO_ROUTE_TRANSIT_NET</a>, <span class="stringliteral">&quot;NO_ROUTE_TRANSIT_NET&quot;</span>, <span class="stringliteral">&quot;No route to specified transmit network&quot;</span> },</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#ace4ceec464072bb9e269b6a52e7a6631">AST_CAUSE_NO_ROUTE_DESTINATION</a>, <span class="stringliteral">&quot;NO_ROUTE_DESTINATION&quot;</span>, <span class="stringliteral">&quot;No route to destination&quot;</span> },</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#af4a2ab0a1d6178835389d50b2b2e3f80">AST_CAUSE_MISDIALLED_TRUNK_PREFIX</a>, <span class="stringliteral">&quot;MISDIALLED_TRUNK_PREFIX&quot;</span>, <span class="stringliteral">&quot;Misdialed trunk prefix&quot;</span> },</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#a8cfd0925ffb2f0902bc177d799e2622d">AST_CAUSE_CHANNEL_UNACCEPTABLE</a>, <span class="stringliteral">&quot;CHANNEL_UNACCEPTABLE&quot;</span>, <span class="stringliteral">&quot;Channel unacceptable&quot;</span> },</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#a289abb4f85a690f73b6ad6612f186adc">AST_CAUSE_CALL_AWARDED_DELIVERED</a>, <span class="stringliteral">&quot;CALL_AWARDED_DELIVERED&quot;</span>, <span class="stringliteral">&quot;Call awarded and being delivered in an established channel&quot;</span> },</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#a74216ee399855c096941fac24aed92cd">AST_CAUSE_PRE_EMPTED</a>, <span class="stringliteral">&quot;PRE_EMPTED&quot;</span>, <span class="stringliteral">&quot;Pre-empted&quot;</span> },</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#a0a1f47a998dce290a36a1871f6f3b8bd">AST_CAUSE_NUMBER_PORTED_NOT_HERE</a>, <span class="stringliteral">&quot;NUMBER_PORTED_NOT_HERE&quot;</span>, <span class="stringliteral">&quot;Number ported elsewhere&quot;</span> },</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>, <span class="stringliteral">&quot;NORMAL_CLEARING&quot;</span>, <span class="stringliteral">&quot;Normal Clearing&quot;</span> },</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#aff0e956cb3ef657557fa468a17416c0b">AST_CAUSE_USER_BUSY</a>, <span class="stringliteral">&quot;USER_BUSY&quot;</span>, <span class="stringliteral">&quot;User busy&quot;</span> },</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#a5310fd2a65b78fb6840b0e3e883a2470">AST_CAUSE_NO_USER_RESPONSE</a>, <span class="stringliteral">&quot;NO_USER_RESPONSE&quot;</span>, <span class="stringliteral">&quot;No user responding&quot;</span> },</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#af03fc9fe2f0ecc69330e014aff8d0f73">AST_CAUSE_NO_ANSWER</a>, <span class="stringliteral">&quot;NO_ANSWER&quot;</span>, <span class="stringliteral">&quot;User alerting, no answer&quot;</span> },</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#a9dee3650d0fcf0f2d7a0c218cbf35821">AST_CAUSE_SUBSCRIBER_ABSENT</a>, <span class="stringliteral">&quot;SUBSCRIBER_ABSENT&quot;</span>, <span class="stringliteral">&quot;Subscriber absent&quot;</span> },</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#a9900b24b261c275bb54631f16d4d38cc">AST_CAUSE_CALL_REJECTED</a>, <span class="stringliteral">&quot;CALL_REJECTED&quot;</span>, <span class="stringliteral">&quot;Call Rejected&quot;</span> },</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#a19c43722b8b1260faa56227e481479c6">AST_CAUSE_NUMBER_CHANGED</a>, <span class="stringliteral">&quot;NUMBER_CHANGED&quot;</span>, <span class="stringliteral">&quot;Number changed&quot;</span> },</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#a6028a36269ddc097d8fec02832c6c489">AST_CAUSE_REDIRECTED_TO_NEW_DESTINATION</a>, <span class="stringliteral">&quot;REDIRECTED_TO_NEW_DESTINATION&quot;</span>, <span class="stringliteral">&quot;Redirected to new destination&quot;</span> },</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#aa71419a0c598e31312477c5a644e7440">AST_CAUSE_ANSWERED_ELSEWHERE</a>, <span class="stringliteral">&quot;ANSWERED_ELSEWHERE&quot;</span>, <span class="stringliteral">&quot;Answered elsewhere&quot;</span> },</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#a51ccdf5c6aa26375323fd14cfef02618">AST_CAUSE_DESTINATION_OUT_OF_ORDER</a>, <span class="stringliteral">&quot;DESTINATION_OUT_OF_ORDER&quot;</span>, <span class="stringliteral">&quot;Destination out of order&quot;</span> },</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#a29549b982646ee60f116fc4f55c711e5">AST_CAUSE_INVALID_NUMBER_FORMAT</a>, <span class="stringliteral">&quot;INVALID_NUMBER_FORMAT&quot;</span>, <span class="stringliteral">&quot;Invalid number format&quot;</span> },</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#aa49742b6e084d7a25a0994beba1fa9ea">AST_CAUSE_FACILITY_REJECTED</a>, <span class="stringliteral">&quot;FACILITY_REJECTED&quot;</span>, <span class="stringliteral">&quot;Facility rejected&quot;</span> },</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#ac9e231ce7c9b95a3671a78a1549e913f">AST_CAUSE_RESPONSE_TO_STATUS_ENQUIRY</a>, <span class="stringliteral">&quot;RESPONSE_TO_STATUS_ENQUIRY&quot;</span>, <span class="stringliteral">&quot;Response to STATus ENQuiry&quot;</span> },</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#aadcc0ede679137ef3a3ed4472b974ee8">AST_CAUSE_NORMAL_UNSPECIFIED</a>, <span class="stringliteral">&quot;NORMAL_UNSPECIFIED&quot;</span>, <span class="stringliteral">&quot;Normal, unspecified&quot;</span> },</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#a84f3380611feeec35bb25319b26f92fd">AST_CAUSE_NORMAL_CIRCUIT_CONGESTION</a>, <span class="stringliteral">&quot;NORMAL_CIRCUIT_CONGESTION&quot;</span>, <span class="stringliteral">&quot;Circuit/channel congestion&quot;</span> },</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#a9e3ffd481d41079a4ed1700464c9a42a">AST_CAUSE_NETWORK_OUT_OF_ORDER</a>, <span class="stringliteral">&quot;NETWORK_OUT_OF_ORDER&quot;</span>, <span class="stringliteral">&quot;Network out of order&quot;</span> },</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#a554ad1e279785609a381c194f770f554">AST_CAUSE_NORMAL_TEMPORARY_FAILURE</a>, <span class="stringliteral">&quot;NORMAL_TEMPORARY_FAILURE&quot;</span>, <span class="stringliteral">&quot;Temporary failure&quot;</span> },</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#a02b3785262e0be6843e8e9d235d8d78d">AST_CAUSE_SWITCH_CONGESTION</a>, <span class="stringliteral">&quot;SWITCH_CONGESTION&quot;</span>, <span class="stringliteral">&quot;Switching equipment congestion&quot;</span> },</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#abcbed92e41a50dd87902bc7bf97c704b">AST_CAUSE_ACCESS_INFO_DISCARDED</a>, <span class="stringliteral">&quot;ACCESS_INFO_DISCARDED&quot;</span>, <span class="stringliteral">&quot;Access information discarded&quot;</span> },</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#a7f49d27e9e3876fb4ccf1d139d31db73">AST_CAUSE_REQUESTED_CHAN_UNAVAIL</a>, <span class="stringliteral">&quot;REQUESTED_CHAN_UNAVAIL&quot;</span>, <span class="stringliteral">&quot;Requested channel not available&quot;</span> },</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#a66e303e9085c143381179b613490fa58">AST_CAUSE_FACILITY_NOT_SUBSCRIBED</a>, <span class="stringliteral">&quot;FACILITY_NOT_SUBSCRIBED&quot;</span>, <span class="stringliteral">&quot;Facility not subscribed&quot;</span> },</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#a2f438eadf07706f40ddcf20f94bc2a4e">AST_CAUSE_OUTGOING_CALL_BARRED</a>, <span class="stringliteral">&quot;OUTGOING_CALL_BARRED&quot;</span>, <span class="stringliteral">&quot;Outgoing call barred&quot;</span> },</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#ab709d98c2b05c8927df81a1504e5715f">AST_CAUSE_INCOMING_CALL_BARRED</a>, <span class="stringliteral">&quot;INCOMING_CALL_BARRED&quot;</span>, <span class="stringliteral">&quot;Incoming call barred&quot;</span> },</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#a512cf0d8e1eb047ebf9daceb9930a228">AST_CAUSE_BEARERCAPABILITY_NOTAUTH</a>, <span class="stringliteral">&quot;BEARERCAPABILITY_NOTAUTH&quot;</span>, <span class="stringliteral">&quot;Bearer capability not authorized&quot;</span> },</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#a208e4fc34932b91fc9e90d9008329e87">AST_CAUSE_BEARERCAPABILITY_NOTAVAIL</a>, <span class="stringliteral">&quot;BEARERCAPABILITY_NOTAVAIL&quot;</span>, <span class="stringliteral">&quot;Bearer capability not available&quot;</span> },</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#a698ffe8a4d78a549b6ccb868ac1dbade">AST_CAUSE_BEARERCAPABILITY_NOTIMPL</a>, <span class="stringliteral">&quot;BEARERCAPABILITY_NOTIMPL&quot;</span>, <span class="stringliteral">&quot;Bearer capability not implemented&quot;</span> },</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#a33da602c4e2bb5f5060453878dbeb1f6">AST_CAUSE_CHAN_NOT_IMPLEMENTED</a>, <span class="stringliteral">&quot;CHAN_NOT_IMPLEMENTED&quot;</span>, <span class="stringliteral">&quot;Channel not implemented&quot;</span> },</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#ab4fe7bb5c29ba772e6a52aeeb9dc5548">AST_CAUSE_FACILITY_NOT_IMPLEMENTED</a>, <span class="stringliteral">&quot;FACILITY_NOT_IMPLEMENTED&quot;</span>, <span class="stringliteral">&quot;Facility not implemented&quot;</span> },</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#a9ede7aed1c7ce865ad98617c60c8da22">AST_CAUSE_INVALID_CALL_REFERENCE</a>, <span class="stringliteral">&quot;INVALID_CALL_REFERENCE&quot;</span>, <span class="stringliteral">&quot;Invalid call reference value&quot;</span> },</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#a4c378d6f7b9d40dee77d74fa7c5d91e4">AST_CAUSE_INCOMPATIBLE_DESTINATION</a>, <span class="stringliteral">&quot;INCOMPATIBLE_DESTINATION&quot;</span>, <span class="stringliteral">&quot;Incompatible destination&quot;</span> },</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#ae221e0d7fcd8907bd90e203e60553317">AST_CAUSE_INVALID_MSG_UNSPECIFIED</a>, <span class="stringliteral">&quot;INVALID_MSG_UNSPECIFIED&quot;</span>, <span class="stringliteral">&quot;Invalid message unspecified&quot;</span> },</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#ab7713547640d212063cb5af042b2370e">AST_CAUSE_MANDATORY_IE_MISSING</a>, <span class="stringliteral">&quot;MANDATORY_IE_MISSING&quot;</span>, <span class="stringliteral">&quot;Mandatory information element is missing&quot;</span> },</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#a5a243f60ca2571ed2d6e3f540b4a1453">AST_CAUSE_MESSAGE_TYPE_NONEXIST</a>, <span class="stringliteral">&quot;MESSAGE_TYPE_NONEXIST&quot;</span>, <span class="stringliteral">&quot;Message type nonexist.&quot;</span> },</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#a3ed29f9cca140067f36c9793aa1409f1">AST_CAUSE_WRONG_MESSAGE</a>, <span class="stringliteral">&quot;WRONG_MESSAGE&quot;</span>, <span class="stringliteral">&quot;Wrong message&quot;</span> },</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#af67b1917cb55d9e32dc837038ff9bc6e">AST_CAUSE_IE_NONEXIST</a>, <span class="stringliteral">&quot;IE_NONEXIST&quot;</span>, <span class="stringliteral">&quot;Info. element nonexist or not implemented&quot;</span> },</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#a108b5a1677d352e094dbc6b2b0cf53f4">AST_CAUSE_INVALID_IE_CONTENTS</a>, <span class="stringliteral">&quot;INVALID_IE_CONTENTS&quot;</span>, <span class="stringliteral">&quot;Invalid information element contents&quot;</span> },</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#a6f3f8a6a53b0b7d5646433b4fde44cc9">AST_CAUSE_WRONG_CALL_STATE</a>, <span class="stringliteral">&quot;WRONG_CALL_STATE&quot;</span>, <span class="stringliteral">&quot;Message not compatible with call state&quot;</span> },</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#abe4368acff74514c171c3bd705340529">AST_CAUSE_RECOVERY_ON_TIMER_EXPIRE</a>, <span class="stringliteral">&quot;RECOVERY_ON_TIMER_EXPIRE&quot;</span>, <span class="stringliteral">&quot;Recover on timer expiry&quot;</span> },</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#a5de204957046b5d124eded03c101c6ba">AST_CAUSE_MANDATORY_IE_LENGTH_ERROR</a>, <span class="stringliteral">&quot;MANDATORY_IE_LENGTH_ERROR&quot;</span>, <span class="stringliteral">&quot;Mandatory IE length error&quot;</span> },</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#a1514f9ae692d948e3351fa75d4be2bf3">AST_CAUSE_PROTOCOL_ERROR</a>, <span class="stringliteral">&quot;PROTOCOL_ERROR&quot;</span>, <span class="stringliteral">&quot;Protocol error, unspecified&quot;</span> },</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;   { <a class="code" href="../../d4/da3/causes_8h.html#a13666e22c99b4ccda92e6e1431368474">AST_CAUSE_INTERWORKING</a>, <span class="stringliteral">&quot;INTERWORKING&quot;</span>, <span class="stringliteral">&quot;Interworking, unspecified&quot;</span> },</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;};</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ae5039a62fbb5dc1ecb217f10940d19df">  188</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *<a class="code" href="../../d4/d28/channel_8c.html#ae5039a62fbb5dc1ecb217f10940d19df">ast_channeltype_list</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;{</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d6f/structchanlist.html">chanlist</a> *cl;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *prev = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d3/da8/structbackends.html">backends</a>);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d3/da8/structbackends.html">backends</a>, cl, <a class="code" href="../../dd/d6f/structchanlist.html#aa6880648b159c5b2441129417c94048d">list</a>) {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      <span class="keywordflow">if</span> (prev)  {</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;         <span class="keywordflow">if</span> ((prev-&gt;next = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(cl-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;type, cl-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;description, <span class="stringliteral">&quot;&quot;</span>)))</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            prev = prev-&gt;next;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;         var = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(cl-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;type, cl-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;description, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;         prev = <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      }</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;   }</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d3/da8/structbackends.html">backends</a>);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;}</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="preprocessor">#if defined(KEEP_TILL_CHANNEL_PARTY_NUMBER_INFO_NEEDED)</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *party_number_ton2str(<span class="keywordtype">int</span> ton)</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;{</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="preprocessor">#if defined(HAVE_PRI)</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;   <span class="keywordflow">switch</span> ((ton &gt;&gt; 4) &amp; 0x07) {</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;   <span class="keywordflow">case</span> PRI_TON_INTERNATIONAL:</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;International&quot;</span>;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;   <span class="keywordflow">case</span> PRI_TON_NATIONAL:</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;National&quot;</span>;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;   <span class="keywordflow">case</span> PRI_TON_NET_SPECIFIC:</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Network Specific&quot;</span>;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;   <span class="keywordflow">case</span> PRI_TON_SUBSCRIBER:</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Subscriber&quot;</span>;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;   <span class="keywordflow">case</span> PRI_TON_ABBREVIATED:</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Abbreviated&quot;</span>;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;   <span class="keywordflow">case</span> PRI_TON_RESERVED:</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Reserved&quot;</span>;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;   <span class="keywordflow">case</span> PRI_TON_UNKNOWN:</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;   }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(HAVE_PRI) */</span><span class="preprocessor"></span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;Unknown&quot;</span>;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;}</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(KEEP_TILL_CHANNEL_PARTY_NUMBER_INFO_NEEDED) */</span><span class="preprocessor"></span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="preprocessor">#if defined(KEEP_TILL_CHANNEL_PARTY_NUMBER_INFO_NEEDED)</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *party_number_plan2str(<span class="keywordtype">int</span> plan)</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;{</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="preprocessor">#if defined(HAVE_PRI)</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;   <span class="keywordflow">switch</span> (plan &amp; 0x0F) {</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;   <span class="keywordflow">case</span> PRI_NPI_UNKNOWN:</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;   <span class="keywordflow">case</span> PRI_NPI_E163_E164:</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Public (E.163/E.164)&quot;</span>;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;   <span class="keywordflow">case</span> PRI_NPI_X121:</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Data (X.121)&quot;</span>;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;   <span class="keywordflow">case</span> PRI_NPI_F69:</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Telex (F.69)&quot;</span>;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;   <span class="keywordflow">case</span> PRI_NPI_NATIONAL:</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;National Standard&quot;</span>;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;   <span class="keywordflow">case</span> PRI_NPI_PRIVATE:</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Private&quot;</span>;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;   <span class="keywordflow">case</span> PRI_NPI_RESERVED:</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Reserved&quot;</span>;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;   }</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(HAVE_PRI) */</span><span class="preprocessor"></span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;Unknown&quot;</span>;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;}</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(KEEP_TILL_CHANNEL_PARTY_NUMBER_INFO_NEEDED) */</span><span class="preprocessor"></span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">/*! \brief Show channel types - CLI command */</span></div><div class="line"><a name="l00261"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ada1321e35ae7c038a2018396a99abbed">  261</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d4/d28/channel_8c.html#ada1321e35ae7c038a2018396a99abbed">handle_cli_core_show_channeltypes</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;{</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="preprocessor">#define FORMAT  &quot;%-15.15s  %-40.40s %-13.13s %-13.13s %-13.13s %-13.13s\n&quot;</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d6f/structchanlist.html">chanlist</a> *cl;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;   <span class="keywordtype">int</span> count_chan = 0;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;core show channeltypes&quot;</span>;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;         <span class="stringliteral">&quot;Usage: core show channeltypes\n&quot;</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;         <span class="stringliteral">&quot;       Lists available channel types registered in your\n&quot;</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;         <span class="stringliteral">&quot;       Asterisk server.\n&quot;</span>;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;   }</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 3)</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../d4/d28/channel_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a>, <span class="stringliteral">&quot;Type&quot;</span>, <span class="stringliteral">&quot;Description&quot;</span>, <span class="stringliteral">&quot;Devicestate&quot;</span>, <span class="stringliteral">&quot;Presencestate&quot;</span>, <span class="stringliteral">&quot;Indications&quot;</span>, <span class="stringliteral">&quot;Transfer&quot;</span>);</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../d4/d28/channel_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a>, <span class="stringliteral">&quot;-------------&quot;</span>, <span class="stringliteral">&quot;-------------&quot;</span>, <span class="stringliteral">&quot;-------------&quot;</span>, <span class="stringliteral">&quot;-------------&quot;</span>, <span class="stringliteral">&quot;-------------&quot;</span>, <span class="stringliteral">&quot;-------------&quot;</span>);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d3/da8/structbackends.html">backends</a>);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d3/da8/structbackends.html">backends</a>, cl, <a class="code" href="../../dd/d6f/structchanlist.html#aa6880648b159c5b2441129417c94048d">list</a>) {</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../d4/d28/channel_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a>, cl-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;type, cl-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;description,</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;         (cl-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;devicestate) ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>,</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;         (cl-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;presencestate) ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>,</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;         (cl-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;indicate) ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>,</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;         (cl-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;transfer) ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      count_chan++;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;   }</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d3/da8/structbackends.html">backends</a>);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;----------\n%d channel drivers registered.\n&quot;</span>, count_chan);</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="preprocessor">#undef FORMAT</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;}</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div><div class="line"><a name="l00303"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8b42faf0887d5d592b2ac859e629e0a2">  303</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d4/d28/channel_8c.html#a8b42faf0887d5d592b2ac859e629e0a2">complete_channeltypes</a>(<span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;{</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d6f/structchanlist.html">chanlist</a> *cl;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;   <span class="keywordtype">int</span> wordlen;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> != 3) {</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;   }</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;   wordlen = strlen(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>);</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d3/da8/structbackends.html">backends</a>);</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d3/da8/structbackends.html">backends</a>, cl, <a class="code" href="../../dd/d6f/structchanlist.html#aa6880648b159c5b2441129417c94048d">list</a>) {</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      <span class="keywordflow">if</span> (!strncasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, cl-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;type, wordlen)) {</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a6f5f6c330757d980065d3f887c62237f">ast_cli_completion_add</a>(<a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(cl-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;type));</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      }</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;   }</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d3/da8/structbackends.html">backends</a>);</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;}</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment">/*! \brief Show details about a channel driver - CLI command */</span></div><div class="line"><a name="l00326"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a756671fc7041ac4e1bd415d4348aeae3">  326</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../d4/d28/channel_8c.html#a756671fc7041ac4e1bd415d4348aeae3">handle_cli_core_show_channeltype</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;{</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d6f/structchanlist.html">chanlist</a> *cl = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *codec_buf = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a>);</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;core show channeltype&quot;</span>;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;         <span class="stringliteral">&quot;Usage: core show channeltype &lt;name&gt;\n&quot;</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;         <span class="stringliteral">&quot;  Show details about the specified channel type, &lt;name&gt;.\n&quot;</span>;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a8b42faf0887d5d592b2ac859e629e0a2">complete_channeltypes</a>(a);</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;   }</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 4)</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d3/da8/structbackends.html">backends</a>);</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d3/da8/structbackends.html">backends</a>, cl, <a class="code" href="../../dd/d6f/structchanlist.html#aa6880648b159c5b2441129417c94048d">list</a>) {</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      <span class="keywordflow">if</span> (!strncasecmp(cl-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;type, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], strlen(cl-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;type)))</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;   }</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;   <span class="keywordflow">if</span> (!cl) {</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n%s is not a registered channel driver.\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3]);</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d3/da8/structbackends.html">backends</a>);</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;   }</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>,</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      <span class="stringliteral">&quot;-- Info about channel driver: %s --\n&quot;</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      <span class="stringliteral">&quot;  Device State: %s\n&quot;</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      <span class="stringliteral">&quot;Presence State: %s\n&quot;</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      <span class="stringliteral">&quot;    Indication: %s\n&quot;</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      <span class="stringliteral">&quot;     Transfer : %s\n&quot;</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      <span class="stringliteral">&quot;  Capabilities: %s\n&quot;</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      <span class="stringliteral">&quot;   Digit Begin: %s\n&quot;</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <span class="stringliteral">&quot;     Digit End: %s\n&quot;</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <span class="stringliteral">&quot;    Send HTML : %s\n&quot;</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      <span class="stringliteral">&quot; Image Support: %s\n&quot;</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      <span class="stringliteral">&quot;  Text Support: %s\n&quot;</span>,</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      cl-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;type,</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      (cl-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;devicestate) ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>,</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      (cl-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;presencestate) ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>,</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      (cl-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;indicate) ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>,</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      (cl-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;transfer) ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>,</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      <a class="code" href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a>(cl-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;capabilities, &amp;codec_buf),</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      (cl-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;send_digit_begin) ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>,</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      (cl-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;send_digit_end) ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>,</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      (cl-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;send_html) ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>,</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      (cl-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;send_image) ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>,</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      (cl-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;send_text) ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;   );</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d3/da8/structbackends.html">backends</a>);</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;}</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div><div class="line"><a name="l00390"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ad74ec6057ffa0240c8dde77284958fbe">  390</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> <a class="code" href="../../d4/d28/channel_8c.html#ad74ec6057ffa0240c8dde77284958fbe">cli_channel</a>[] = {</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../d4/d28/channel_8c.html#ada1321e35ae7c038a2018396a99abbed">handle_cli_core_show_channeltypes</a>, <span class="stringliteral">&quot;List available channel types&quot;</span>),</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../d4/d28/channel_8c.html#a756671fc7041ac4e1bd415d4348aeae3">handle_cli_core_show_channeltype</a>,  <span class="stringliteral">&quot;Give more details on that channel type&quot;</span>)</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;};</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00395"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a83c5bf4ddb3ed43a3c03e2f8e2962333">  395</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *<a class="code" href="../../d4/d28/channel_8c.html#a83c5bf4ddb3ed43a3c03e2f8e2962333">kill_read</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;{</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;   <span class="comment">/* Hangup channel. */</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;}</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div><div class="line"><a name="l00401"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8404d49d2a2f73d4f066a87063fcff9f">  401</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *<a class="code" href="../../d4/d28/channel_8c.html#a8404d49d2a2f73d4f066a87063fcff9f">kill_exception</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;{</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;   <span class="comment">/* Hangup channel. */</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;}</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a07cb08cdf297fa40c6eac0b2101f3764">  407</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a07cb08cdf297fa40c6eac0b2101f3764">kill_write</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="keyword">struct</span> <a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame)</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;{</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;   <span class="comment">/* Hangup channel. */</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;}</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ae4d600d2004c8f16bed8ca00bedd18dd">  413</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#ae4d600d2004c8f16bed8ca00bedd18dd">kill_fixup</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *oldchan, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *newchan)</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;{</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;   <span class="comment">/* No problem fixing up the channel. */</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;}</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div><div class="line"><a name="l00419"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aa0aa3114b7071c705751cdf91827a8b3">  419</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#aa0aa3114b7071c705751cdf91827a8b3">kill_hangup</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;{</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a929b8b2cb36308e5cf4e51ed880bfcba">ast_channel_tech_pvt_set</a>(chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;}</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment"> * \brief Kill the channel channel driver technology descriptor.</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment"> * \details</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment"> * The purpose of this channel technology is to encourage the</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment"> * channel to hangup as quickly as possible.</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment"> * \note Used by DTMF atxfer and zombie channels.</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00434"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a4af87c03f9816bb32758ff5b4b8d7d84">  434</a></span>&#160;<span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d4/d85/structast__channel__tech.html">ast_channel_tech</a> <a class="code" href="../../d4/d28/channel_8c.html#a4af87c03f9816bb32758ff5b4b8d7d84">ast_kill_tech</a> = {</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;   .<a class="code" href="../../d4/d85/structast__channel__tech.html#a8ff938fb2f815be425fd2859a21e6d61">type</a> = <span class="stringliteral">&quot;Kill&quot;</span>,</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;   .description = <span class="stringliteral">&quot;Kill channel (should not see this)&quot;</span>,</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;   .read = <a class="code" href="../../d4/d28/channel_8c.html#a83c5bf4ddb3ed43a3c03e2f8e2962333">kill_read</a>,</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;   .exception = <a class="code" href="../../d4/d28/channel_8c.html#a8404d49d2a2f73d4f066a87063fcff9f">kill_exception</a>,</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;   .write = <a class="code" href="../../d4/d28/channel_8c.html#a07cb08cdf297fa40c6eac0b2101f3764">kill_write</a>,</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;   .fixup = <a class="code" href="../../d4/d28/channel_8c.html#ae4d600d2004c8f16bed8ca00bedd18dd">kill_fixup</a>,</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;   .hangup = <a class="code" href="../../d4/d28/channel_8c.html#aa0aa3114b7071c705751cdf91827a8b3">kill_hangup</a>,</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;};</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment">/*! \brief Checks to see if a channel is needing hang up */</span></div><div class="line"><a name="l00445"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a9c63fff1d736568d1ee332dd7ea502bd">  445</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;{</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#adac99999f1e55833e7f903979d67b48b">ast_channel_softhangup_internal_flag</a>(chan))    <span class="comment">/* yes if soft hangup flag set */</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(*<a class="code" href="../../d5/d7b/channel_8h.html#ae616309e9eba6a1b009a0466bada50cc">ast_channel_whentohangup</a>(chan)))   <span class="comment">/* no if no hangup scheduled */</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(*<a class="code" href="../../d5/d7b/channel_8h.html#ae616309e9eba6a1b009a0466bada50cc">ast_channel_whentohangup</a>(chan), <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>()) &gt; 0)    <span class="comment">/* no if hangup time has not come yet. */</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(4, <span class="stringliteral">&quot;Hangup time has come: %&quot;</span> PRIi64 <span class="stringliteral">&quot;\n&quot;</span>, <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(*<a class="code" href="../../d5/d7b/channel_8h.html#ae616309e9eba6a1b009a0466bada50cc">ast_channel_whentohangup</a>(chan), <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>()));</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a>(<span class="stringliteral">&quot;HANGUP_TIME&quot;</span>, <span class="stringliteral">&quot;Channel: %s&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ab683c21c4a34450c4bfb8b672a7b4045">ast_channel_softhangup_internal_flag_add</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a90cd950abc1c22b0701a476bdd6cc246">AST_SOFTHANGUP_TIMEOUT</a>); <span class="comment">/* record event */</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;}</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;</div><div class="line"><a name="l00459"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a723ac44c92b9edb6c1a731e01edacb4a">  459</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a723ac44c92b9edb6c1a731e01edacb4a">ast_check_hangup_locked</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;{</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;   res = <a class="code" href="../../d4/d28/channel_8c.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(chan);</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;}</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div><div class="line"><a name="l00468"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a7c3d40097bb8c0da518564d38ab49506">  468</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a7c3d40097bb8c0da518564d38ab49506">ast_channel_softhangup_withcause_locked</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="keywordtype">int</span> causecode)</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;{</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;   <span class="keywordflow">if</span> (causecode &gt; 0) {</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Setting hangupcause of channel %s to %d (is %d now)\n&quot;</span>,</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), causecode, <a class="code" href="../../d5/d7b/channel_8h.html#aa04afa262d7e1b211ee32d17c949a275">ast_channel_hangupcause</a>(chan));</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ae6b4b7ba458e88fdbb2df9f39d935337">ast_channel_hangupcause_set</a>(chan, causecode);</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;   }</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#acd23f45d08b4bfadd20c9d82e8060e50">ast_softhangup_nolock</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2b3b711afc65059c4b51008c9fbc7aee">AST_SOFTHANGUP_EXPLICIT</a>);</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;}</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div><div class="line"><a name="l00484"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aa76c1a69c71dfa9bb4b40766043e673e">  484</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#aa76c1a69c71dfa9bb4b40766043e673e">ast_channel_softhangup_cb</a>(<span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *arg, <span class="keywordtype">int</span> <a class="code" href="../../dd/d6f/structchanlist.html#a899a76dc5f03f0d4ea3793c339e07ee9">flags</a>)</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;{</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a> = obj;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#aaaa09144f0468d0d5f98f1753a6de952">ast_softhangup</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4ac8ccf95208e43ea045531ab97697b58a">AST_SOFTHANGUP_SHUTDOWN</a>);</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;}</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;</div><div class="line"><a name="l00493"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a0af1a0f8665f21a658864a731eea78c0">  493</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a0af1a0f8665f21a658864a731eea78c0">ast_softhangup_all</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;{</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(channels, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47">OBJ_MULTIPLE</a>, <a class="code" href="../../d4/d28/channel_8c.html#aa76c1a69c71dfa9bb4b40766043e673e">ast_channel_softhangup_cb</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;}</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment">/*! \brief returns number of active/allocated channels */</span></div><div class="line"><a name="l00499"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a9704ae96ab849e9e5a20040c13d29705">  499</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a9704ae96ab849e9e5a20040c13d29705">ast_active_channels</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;{</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;   <span class="keywordflow">return</span> channels ? <a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(channels) : 0;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;}</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div><div class="line"><a name="l00504"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a7d555920d6a7169e88251888010bf4de">  504</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a7d555920d6a7169e88251888010bf4de">ast_undestroyed_channels</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;{</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;<a class="code" href="../../d4/d28/channel_8c.html#a5cb129ce1d580dbb22ec9573dcb62f7f">chancount</a>, 0);</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;}</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">/*! \brief Set when to hangup channel */</span></div><div class="line"><a name="l00510"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ac03c2ec5ac8e7a6ef9c5d92f91880927">  510</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#ac03c2ec5ac8e7a6ef9c5d92f91880927">ast_channel_setwhentohangup_tv</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="keyword">struct</span> timeval offset)</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;{</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(offset)) {</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ae7cc45ab2e1d083100bedc5c62a1977b">ast_channel_whentohangup_set</a>(chan, &amp;offset);</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      <span class="keyword">struct </span>timeval tv = <a class="code" href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a>(offset, <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>());</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ae7cc45ab2e1d083100bedc5c62a1977b">ast_channel_whentohangup_set</a>(chan, &amp;tv);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;   }</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3df7007b550647c63a1b211181b55814">ast_queue_frame</a>(chan, &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>);</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;   <span class="keywordflow">return</span>;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;}</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment">/*! \brief Compare a offset with when to hangup channel */</span></div><div class="line"><a name="l00523"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a742eebbd38e247bf75ecc419683fa784">  523</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a742eebbd38e247bf75ecc419683fa784">ast_channel_cmpwhentohangup_tv</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="keyword">struct</span> timeval offset)</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;{</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;   <span class="keyword">struct </span>timeval whentohangup;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(*<a class="code" href="../../d5/d7b/channel_8h.html#ae616309e9eba6a1b009a0466bada50cc">ast_channel_whentohangup</a>(chan)))</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(offset) ? 0 : -1;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(offset))</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;   whentohangup = <a class="code" href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a>(offset, <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>());</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(whentohangup, *<a class="code" href="../../d5/d7b/channel_8h.html#ae616309e9eba6a1b009a0466bada50cc">ast_channel_whentohangup</a>(chan));</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;}</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment">/*! \brief Register a new telephony channel in Asterisk */</span></div><div class="line"><a name="l00539"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ab5f3776fda943e52820ceeee5835c1b4">  539</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#ab5f3776fda943e52820ceeee5835c1b4">ast_channel_register</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/d85/structast__channel__tech.html">ast_channel_tech</a> *<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>)</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;{</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d6f/structchanlist.html">chanlist</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d3/da8/structbackends.html">backends</a>);</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d3/da8/structbackends.html">backends</a>, chan, <a class="code" href="../../dd/d6f/structchanlist.html#aa6880648b159c5b2441129417c94048d">list</a>) {</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(tech-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#a8ff938fb2f815be425fd2859a21e6d61">type</a>, chan-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;type)) {</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Already have a handler for type &#39;%s&#39;\n&quot;</span>, tech-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#a8ff938fb2f815be425fd2859a21e6d61">type</a>);</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d3/da8/structbackends.html">backends</a>);</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      }</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;   }</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;   <span class="keywordflow">if</span> (!(chan = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*chan)))) {</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d3/da8/structbackends.html">backends</a>);</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;   }</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;   chan-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a> = <a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aacc5f6b7c25e361d11d40137fd55a8e8">AST_RWLIST_INSERT_HEAD</a>(&amp;<a class="code" href="../../d3/da8/structbackends.html">backends</a>, chan, <a class="code" href="../../dd/d6f/structchanlist.html#aa6880648b159c5b2441129417c94048d">list</a>);</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Registered handler for &#39;%s&#39; (%s)\n&quot;</span>, chan-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;type, chan-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;description);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;Registered channel type &#39;%s&#39; (%s)\n&quot;</span>, chan-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;type, chan-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;description);</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d3/da8/structbackends.html">backends</a>);</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;}</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment">/*! \brief Unregister channel driver */</span></div><div class="line"><a name="l00570"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a53b708b7fc71dcbcd33acae0ad4d7ef8">  570</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a53b708b7fc71dcbcd33acae0ad4d7ef8">ast_channel_unregister</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/d85/structast__channel__tech.html">ast_channel_tech</a> *<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>)</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;{</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d6f/structchanlist.html">chanlist</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Unregistering channel type &#39;%s&#39;\n&quot;</span>, tech-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#a8ff938fb2f815be425fd2859a21e6d61">type</a>);</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d3/da8/structbackends.html">backends</a>);</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../d3/da8/structbackends.html">backends</a>, chan, <a class="code" href="../../dd/d6f/structchanlist.html#aa6880648b159c5b2441129417c94048d">list</a>) {</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      <span class="keywordflow">if</span> (chan-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a> == tech) {</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a>(<a class="code" href="../../dd/d6f/structchanlist.html#aa6880648b159c5b2441129417c94048d">list</a>);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(chan);</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;Unregistered channel type &#39;%s&#39;\n&quot;</span>, tech-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#a8ff938fb2f815be425fd2859a21e6d61">type</a>);</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      }</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;   }</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d3/da8/structbackends.html">backends</a>);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;}</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="comment">/*! \brief Get handle to channel driver based on name */</span></div><div class="line"><a name="l00592"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a6fc05c8a1a68f5cd18017fc125ca2acd">  592</a></span>&#160;<span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d4/d85/structast__channel__tech.html">ast_channel_tech</a> *<a class="code" href="../../d4/d28/channel_8c.html#a6fc05c8a1a68f5cd18017fc125ca2acd">ast_get_channel_tech</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>)</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;{</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d6f/structchanlist.html">chanlist</a> *chanls;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d4/d85/structast__channel__tech.html">ast_channel_tech</a> *ret = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d3/da8/structbackends.html">backends</a>);</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d3/da8/structbackends.html">backends</a>, chanls, <a class="code" href="../../dd/d6f/structchanlist.html#aa6880648b159c5b2441129417c94048d">list</a>) {</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(name, chanls-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;type)) {</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;         ret = chanls-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      }</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;   }</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d3/da8/structbackends.html">backends</a>);</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;}</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment">/*! \brief Gives the string form of a given hangup cause */</span></div><div class="line"><a name="l00612"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a6ea5858ffa106c4991e43bed491293d9">  612</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d4/d28/channel_8c.html#a6ea5858ffa106c4991e43bed491293d9">ast_cause2str</a>(<span class="keywordtype">int</span> cause)</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;{</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(causes); x++) {</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      <span class="keywordflow">if</span> (causes[x].cause == cause)</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;         <span class="keywordflow">return</span> causes[x].<a class="code" href="../../db/ddc/structcauses__map.html#a710bce51374aba96ab04912897666c35">desc</a>;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;   }</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;Unknown&quot;</span>;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;}</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="comment">/*! \brief Convert a symbolic hangup cause to number */</span></div><div class="line"><a name="l00625"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ad92341a4a7c70ec0d99fc410dab9b07a">  625</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#ad92341a4a7c70ec0d99fc410dab9b07a">ast_str2cause</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>)</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;{</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(causes); x++)</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;      <span class="keywordflow">if</span> (!strncasecmp(causes[x].name, name, strlen(causes[x].name)))</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;         <span class="keywordflow">return</span> causes[x].cause;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;}</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="comment">/*! \brief Gives the string form of a given channel state.</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment"> * \note This function is not reentrant.</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment"> * \param state</span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00642"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a5dd820022b230cab3e008926e1496b59">  642</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d4/d28/channel_8c.html#a5dd820022b230cab3e008926e1496b59">ast_state2str</a>(<span class="keyword">enum</span> <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a> <a class="code" href="../../d4/d88/structstate.html">state</a>)</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;{</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;   <span class="keywordflow">switch</span> (state) {</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a>:</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Down&quot;</span>;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84">AST_STATE_RESERVED</a>:</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Rsrvd&quot;</span>;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a9d7b264ddca4b05135add5d9d48e6271">AST_STATE_OFFHOOK</a>:</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;OffHook&quot;</span>;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa70881e902c6c29f27ffba80bb43554f">AST_STATE_DIALING</a>:</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Dialing&quot;</span>;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433">AST_STATE_RING</a>:</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Ring&quot;</span>;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa">AST_STATE_RINGING</a>:</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Ringing&quot;</span>;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>:</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Up&quot;</span>;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa00d313d1a4f4502932f1c10bd619591">AST_STATE_BUSY</a>:</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Busy&quot;</span>;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a4e5d21d1ab20653e36109919d6ea72e1">AST_STATE_DIALING_OFFHOOK</a>:</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Dialing Offhook&quot;</span>;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a70a2b40aa2ec0f6f0e7378df7a0810db">AST_STATE_PRERING</a>:</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Pre-ring&quot;</span>;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a08db21d22ff20b8c694ab486c9330603">AST_STATE_MUTE</a>:</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Mute&quot;</span>;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;      <span class="keywordflow">if</span> (!(buf = <a class="code" href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a>(&amp;<a class="code" href="../../d4/d28/channel_8c.html#ae578b94d61d4c2aed2c960c8ac288f2b">state2str_threadbuf</a>, <a class="code" href="../../d4/d28/channel_8c.html#afd4de5975fd2bcaa99390ba19d28f990">STATE2STR_BUFSIZE</a>)))</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;         <span class="keywordflow">return</span> <span class="stringliteral">&quot;Unknown&quot;</span>;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      snprintf(buf, <a class="code" href="../../d4/d28/channel_8c.html#afd4de5975fd2bcaa99390ba19d28f990">STATE2STR_BUFSIZE</a>, <span class="stringliteral">&quot;Unknown (%u)&quot;</span>, state);</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;   }</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;}</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="comment">/*! \brief Gives the string form of a given transfer capability */</span></div><div class="line"><a name="l00678"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a465c2ce577a0166ceca7e0880339184c">  678</a></span>&#160;<span class="keywordtype">char</span> *<a class="code" href="../../d4/d28/channel_8c.html#a465c2ce577a0166ceca7e0880339184c">ast_transfercapability2str</a>(<span class="keywordtype">int</span> transfercapability)</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;{</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;   <span class="keywordflow">switch</span> (transfercapability) {</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d7/d86/transcap_8h.html#ac93f64d6735cd701ca6f439121ca49c6">AST_TRANS_CAP_SPEECH</a>:</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;SPEECH&quot;</span>;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d7/d86/transcap_8h.html#a70df930118839f3fc035fc9f15dfa621">AST_TRANS_CAP_DIGITAL</a>:</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;DIGITAL&quot;</span>;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d7/d86/transcap_8h.html#a4d6401921d25c164619e2ebe8fd8a47a">AST_TRANS_CAP_RESTRICTED_DIGITAL</a>:</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;RESTRICTED_DIGITAL&quot;</span>;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d7/d86/transcap_8h.html#ae4b5e973bbe6b7bc710345ca183e6bda">AST_TRANS_CAP_3_1K_AUDIO</a>:</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;3K1AUDIO&quot;</span>;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d7/d86/transcap_8h.html#a9c47e33087516f67f183da4540ee60a3">AST_TRANS_CAP_DIGITAL_W_TONES</a>:</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;DIGITAL_W_TONES&quot;</span>;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d7/d86/transcap_8h.html#aebd89c1e90b2497984dd29b4608aaa87">AST_TRANS_CAP_VIDEO</a>:</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;VIDEO&quot;</span>;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;UNKNOWN&quot;</span>;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;   }</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;}</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="comment">/*! \brief Channel technology used to extract a channel from a running application. The</span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="comment"> * channel created with this technology will be immediately hung up - most external</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="comment"> * applications won&#39;t ever want to see this.</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00702"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#abb8e171cc4703cbc7f4fbc7b18b626a1">  702</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d4/d85/structast__channel__tech.html">ast_channel_tech</a> <a class="code" href="../../d4/d28/channel_8c.html#abb8e171cc4703cbc7f4fbc7b18b626a1">surrogate_tech</a> = {</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;   .<a class="code" href="../../d4/d85/structast__channel__tech.html#a8ff938fb2f815be425fd2859a21e6d61">type</a> = <span class="stringliteral">&quot;Surrogate&quot;</span>,</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;   .description = <span class="stringliteral">&quot;Surrogate channel used to pull channel from an application&quot;</span>,</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;   .properties = <a class="code" href="../../d5/d7b/channel_8h.html#aa62371d642974c67a0c0efa77d54fcbda1cec91607109bb73e86c4fa1c2ae9344">AST_CHAN_TP_INTERNAL</a>,</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;};</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;</div><div class="line"><a name="l00708"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a5b39e7d66ab86608026ed4c88e864da3">  708</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d4/d85/structast__channel__tech.html">ast_channel_tech</a> <a class="code" href="../../d4/d28/channel_8c.html#a5b39e7d66ab86608026ed4c88e864da3">null_tech</a> = {</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;   .<a class="code" href="../../d4/d85/structast__channel__tech.html#a8ff938fb2f815be425fd2859a21e6d61">type</a> = <span class="stringliteral">&quot;NULL&quot;</span>,</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;   .description = <span class="stringliteral">&quot;Null channel (should not see this)&quot;</span>,</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;};</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#ad08e17bd1de822faef09173930f295b1">ast_channel_destructor</a>(<span class="keywordtype">void</span> *obj);</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#afff08c156c66142b562578cf64722575">ast_dummy_channel_destructor</a>(<span class="keywordtype">void</span> *obj);</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#ac754e486b4049b91252697533275ac89">ast_channel_by_uniqueid_cb</a>(<span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *arg, <span class="keywordtype">void</span> *data, <span class="keywordtype">int</span> <a class="code" href="../../dd/d6f/structchanlist.html#a899a76dc5f03f0d4ea3793c339e07ee9">flags</a>);</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;</div><div class="line"><a name="l00717"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a34868a75370184c282bea3a780a5b020">  717</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a34868a75370184c282bea3a780a5b020">does_id_conflict</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *uniqueid)</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;{</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *conflict;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;   <span class="keywordtype">size_t</span> length = 0;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(uniqueid)) {</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;   }</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;   conflict = <a class="code" href="../../d4/d28/channel_8c.html#a23323032f4b0fbab003874dd2c74d1e4">ast_channel_callback</a>(<a class="code" href="../../d4/d28/channel_8c.html#ac754e486b4049b91252697533275ac89">ast_channel_by_uniqueid_cb</a>, (<span class="keywordtype">char</span> *) uniqueid, &amp;length, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a>);</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;   <span class="keywordflow">if</span> (conflict) {</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Channel Unique ID &#39;%s&#39; already in use by channel %s(%p)\n&quot;</span>,</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;         uniqueid, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(conflict), conflict);</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(conflict);</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;   }</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;}</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="comment">/*! \brief Create a new channel structure */</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *__attribute__((<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>(printf, 15, 0)))</div><div class="line"><a name="l00739"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a0a4128eb4aaa22a9efdae8b22649f792">  739</a></span>&#160;<a class="code" href="../../d4/d28/channel_8c.html#a0a4128eb4aaa22a9efdae8b22649f792">__ast_channel_alloc_ap</a>(<span class="keywordtype">int</span> needqueue, <span class="keywordtype">int</span> <a class="code" href="../../d4/d88/structstate.html">state</a>, const <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a>, const <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ade5a89f9bee15a492c760ec1765a292d">cid_name</a>,</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;             const <span class="keywordtype">char</span> *acctcode, const <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, const <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, const struct <a class="code" href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a> *assignedids,</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;             const struct <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *requestor, enum <a class="code" href="../../d5/d7b/channel_8h.html#a784b9642d6e2862b04b7f970b337549f">ama_flags</a> amaflag, struct <a class="code" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *endpoint,</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;             const <span class="keywordtype">char</span> *<a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, <span class="keywordtype">int</span> line,</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;             const <span class="keywordtype">char</span> *function, const <span class="keywordtype">char</span> *name_fmt, va_list ap)</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;{</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/de6/structvarshead.html">varshead</a> *headp;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a> = <span class="stringliteral">&quot;&quot;</span>, *tech2 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *nativeformats;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/de8/structast__sched__context.html">ast_sched_context</a> *schedctx;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/def/structast__timer.html">ast_timer</a> *<a class="code" href="../../d5/dff/chan__iax2_8c.html#a9aed6490b63794e6c9c00af4533f255f">timer</a>;</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;   <span class="keyword">struct </span>timeval now;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d4/d85/structast__channel__tech.html">ast_channel_tech</a> *channel_tech;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;   <span class="comment">/* If shutting down, don&#39;t allocate any new channels */</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/db2/asterisk_8h.html#a6b112b17aed018d85c397e7591948793">ast_shutting_down</a>()) {</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Channel allocation failed: Refusing due to active shutdown\n&quot;</span>);</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;   }</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;   tmp = <a class="code" href="../../d5/de4/channel__internal_8h.html#a21c921632695fd815a3aebf27e44ea6a">__ast_channel_internal_alloc</a>(<a class="code" href="../../d4/d28/channel_8c.html#ad08e17bd1de822faef09173930f295b1">ast_channel_destructor</a>, assignedids, requestor,</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;      <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, line, <span class="keyword">function</span>);</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;   <span class="keywordflow">if</span> (!tmp) {</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      <span class="comment">/* Channel structure allocation failure. */</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;   }</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf195fcf1686408b5e52ad76996653cea">ast_channel_stage_snapshot</a>(tmp);</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment">    * Init file descriptors to unopened state so</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="comment">    * the destructor can know not to close them.</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a7343470869d125280cc142d7d47d86a2">ast_channel_timingfd_set</a>(tmp, -1);</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ae527c750e43093165b2dcfd75e7bb6c4">ast_channel_internal_alertpipe_clear</a>(tmp);</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a3fd653bf72b897400f2e3f5c0ad480da">ast_channel_internal_fd_clear_all</a>(tmp);</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;   nativeformats = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;   <span class="keywordflow">if</span> (!nativeformats) {</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;<span class="comment">       * Aborting the channel creation.  We do not need to complete staging</span></div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="comment">       * the channel snapshot because the channel has not been finalized or</span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="comment">       * linked into the channels container yet.  Nobody else knows about</span></div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="comment">       * this channel nor will anybody ever know about it.</span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(tmp);</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;   }</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;   <a class="code" href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a>(nativeformats, <a class="code" href="../../db/d1c/format__cache_8h.html#a7c28268f53182d9b82ddd6a4e7c91fa2">ast_format_none</a>, 0);</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a3c9c29fb2bc2b715fee335c1ffa50449">ast_channel_nativeformats_set</a>(tmp, nativeformats);</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(nativeformats, -1);</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aa2df58e77751b741b6891afe210b5b8c">ast_channel_set_rawwriteformat</a>(tmp, <a class="code" href="../../db/d1c/format__cache_8h.html#a7c28268f53182d9b82ddd6a4e7c91fa2">ast_format_none</a>);</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a921a2d48faa9ed99a59d33e7aefa7888">ast_channel_set_rawreadformat</a>(tmp, <a class="code" href="../../db/d1c/format__cache_8h.html#a7c28268f53182d9b82ddd6a4e7c91fa2">ast_format_none</a>);</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#afac6d7d115c1edfe3ad8a8c7fa5d59d1">ast_channel_set_writeformat</a>(tmp, <a class="code" href="../../db/d1c/format__cache_8h.html#a7c28268f53182d9b82ddd6a4e7c91fa2">ast_format_none</a>);</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ab3786cbbff7a03241fc75dafa0c8a1c1">ast_channel_set_readformat</a>(tmp, <a class="code" href="../../db/d1c/format__cache_8h.html#a7c28268f53182d9b82ddd6a4e7c91fa2">ast_format_none</a>);</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;   <span class="keywordflow">if</span> (!(schedctx = <a class="code" href="../../d7/d00/sched_8h.html#a5baecc149aeabdbef9b3ed6780c1c4a6">ast_sched_context_create</a>())) {</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Channel allocation failed: Unable to create schedule context\n&quot;</span>);</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      <span class="comment">/* See earlier channel creation abort comment above. */</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(tmp);</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;   }</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aef6f152b358661987022a1d97d9eff39">ast_channel_sched_set</a>(tmp, schedctx);</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a68c37ab24b0213bf4489d9fb30fd1517">ast_party_dialed_init</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a63732831df3e7a0999b0900ec85c626a">ast_channel_dialed</a>(tmp));</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#afdaf014aa17389de35cba4df16860b0d">ast_party_caller_init</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(tmp));</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#abf514b9d96a1821a33fec8c64ee4e26f">ast_party_connected_line_init</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(tmp));</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#abf514b9d96a1821a33fec8c64ee4e26f">ast_party_connected_line_init</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad3ec5f6d1ca18a54981a446176c9af1d">ast_channel_connected_indicated</a>(tmp));</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a1a5760823cd16fd0343e489efd9c8f89">ast_party_redirecting_init</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(tmp));</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ade5a89f9bee15a492c760ec1765a292d">cid_name</a>) {</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(tmp)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = 1;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(tmp)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ade5a89f9bee15a492c760ec1765a292d">cid_name</a>);</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(tmp)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>.str) {</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;         <span class="comment">/* See earlier channel creation abort comment above. */</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(tmp);</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      }</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;   }</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a>) {</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(tmp)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = 1;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(tmp)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a>);</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(tmp)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.str) {</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;         <span class="comment">/* See earlier channel creation abort comment above. */</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(tmp);</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      }</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;   }</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;   <span class="keywordflow">if</span> ((timer = <a class="code" href="../../db/d41/timing_8h.html#aacc341f127efc0dc0d62f6415694174a">ast_timer_open</a>())) {</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a907e3b6538d521f90e402efe3c522b6d">ast_channel_timer_set</a>(tmp, timer);</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;      <span class="keywordflow">if</span> (strcmp(<a class="code" href="../../db/d41/timing_8h.html#a9e065bbee0a56922d61b4b74fce18b57">ast_timer_get_name</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1e930e0e331c7e82a1bf297addfc5a34">ast_channel_timer</a>(tmp)), <span class="stringliteral">&quot;timerfd&quot;</span>)) {</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;         needqueue = 0;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      }</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7343470869d125280cc142d7d47d86a2">ast_channel_timingfd_set</a>(tmp, <a class="code" href="../../db/d41/timing_8h.html#aa3aa7580d76e1d3f7927b3f34764dec2">ast_timer_fd</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1e930e0e331c7e82a1bf297addfc5a34">ast_channel_timer</a>(tmp)));</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;   }</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;   <span class="keywordflow">if</span> (needqueue &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#aef2286af98791d3c4495df23c3bfb9d6">ast_channel_internal_alertpipe_init</a>(tmp)) {</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      <span class="comment">/* See earlier channel creation abort comment above. */</span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(tmp);</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;   }</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;   <span class="keywordflow">if</span> (!(topology = <a class="code" href="../../d8/d95/stream_8h.html#ad225f95d1de536ba61f43150cfe3bd06">ast_stream_topology_alloc</a>())) {</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(tmp);</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;   }</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;   <a class="code" href="../../d5/de4/channel__internal_8h.html#a1714d1f18af28b90a1021f52b781150a">ast_channel_internal_set_stream_topology</a>(tmp, topology);</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;   <span class="comment">/* Always watch the alertpipe */</span></div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#aca37ca2f3d55a223d26617329ed48a3e">ast_channel_set_fd</a>(tmp, <a class="code" href="../../d5/d7b/channel_8h.html#a84fb9b8eb7be6f162fec6779e250c27b">AST_ALERT_FD</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a30f1b71b332a19f98f8d14a736699a03">ast_channel_internal_alert_readfd</a>(tmp));</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;   <span class="comment">/* And timing pipe */</span></div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#aca37ca2f3d55a223d26617329ed48a3e">ast_channel_set_fd</a>(tmp, <a class="code" href="../../d5/d7b/channel_8h.html#aa2c87e87fcb0c34e45f4596448dea70e">AST_TIMING_FD</a>, <a class="code" href="../../d5/d7b/channel_8h.html#aa1a82c77c44469cd524ebb00357f673b">ast_channel_timingfd</a>(tmp));</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;   <span class="comment">/* Initial state */</span></div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#acc7e03f08c0df9fe5f5ff801db51224d">ast_channel_state_set</a>(tmp, <a class="code" href="../../d4/d88/structstate.html">state</a>);</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a481a937b729c7b65d4c3508b1e8c86a8">ast_channel_hold_state_set</a>(tmp, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e">AST_CONTROL_UNHOLD</a>);</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a66789713c3657752cc9f502c4cf1d2ea">ast_channel_streamid_set</a>(tmp, -1);</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a58ac5000cfdf1493ae0e8ca02a04faf7">ast_channel_vstreamid_set</a>(tmp, -1);</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a91ac88815c2b2561dd8fe646163c67d5">ast_channel_fin_set</a>(tmp, <a class="code" href="../../d4/d28/channel_8c.html#a7457a2311fc74cc4a5b0aa0d2001835c">global_fin</a>);</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ad6d58614c0340ae49d165977b965c9f3">ast_channel_fout_set</a>(tmp, <a class="code" href="../../d4/d28/channel_8c.html#ade9bc8493de7d579e2f06b55379fc673">global_fout</a>);</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;   now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aa7ace5b23c1d6c753dec9477efcb09b7">ast_channel_creationtime_set</a>(tmp, &amp;now);</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;   <a class="code" href="../../d5/de4/channel__internal_8h.html#acbc10a9cd9cb3e54ddb954c2572e6444">ast_channel_internal_setup_topics</a>(tmp);</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(name_fmt)) {</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;      <span class="keywordtype">char</span> *slash, *slash2;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;      <span class="comment">/* Almost every channel is calling this function, and setting the name via the ast_string_field_build() call.</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="comment">       * And they all use slightly different formats for their name string.</span></div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;<span class="comment">       * This means, to set the name here, we have to accept variable args, and call the string_field_build from here.</span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;<span class="comment">       * This means, that the stringfields must have a routine that takes the va_lists directly, and</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;<span class="comment">       * uses them to build the string, instead of forming the va_lists internally from the vararg ... list.</span></div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;<span class="comment">       * This new function was written so this can be accomplished.</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;      ast_channel_name_build_va(tmp, name_fmt, ap);</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;      <a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(tmp));</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;      <span class="keywordflow">if</span> ((slash = strchr(<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>, <span class="charliteral">&#39;/&#39;</span>))) {</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;         <span class="keywordflow">if</span> ((slash2 = strchr(slash + 1, <span class="charliteral">&#39;/&#39;</span>))) {</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;            tech2 = slash + 1;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;            *slash2 = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;         }</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;         *slash = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;      }</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="comment">       * Start the string with &#39;-&#39; so it becomes an empty string</span></div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="comment">       * in the destructor.</span></div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a2a098f55377d125e8346655f5a50612d">ast_channel_name_set</a>(tmp, <span class="stringliteral">&quot;-**Unknown**&quot;</span>);</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;   }</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;   <span class="keywordflow">if</span> (amaflag != <a class="code" href="../../d5/d7b/channel_8h.html#a784b9642d6e2862b04b7f970b337549faa817f7fe5e8e40d403b349a6510d69df">AST_AMA_NONE</a>) {</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ac264c5bfc7884724c7d289662dd6e8ad">ast_channel_amaflags_set</a>(tmp, amaflag);</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ac264c5bfc7884724c7d289662dd6e8ad">ast_channel_amaflags_set</a>(tmp, <a class="code" href="../../d4/d28/channel_8c.html#af42ae38a2ed095a74cd2a8c7f65a7749">DEFAULT_AMA_FLAGS</a>);</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;   }</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(acctcode)) {</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;      ast_channel_accountcode_set(tmp, acctcode);</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;   }</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;   ast_channel_language_set(tmp, <a class="code" href="../../d7/d5b/options_8h.html#afe3489254f2f498c33e974ae8ead8bb3">ast_defaultlanguage</a>);</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aca211972dac7b8f3f08a283bfe0aa8bf">ast_channel_context_set</a>(tmp, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, <span class="stringliteral">&quot;default&quot;</span>));</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a>(tmp, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, <span class="stringliteral">&quot;s&quot;</span>));</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ae56cab679c0cda6436b930bc74297895">ast_channel_priority_set</a>(tmp, 1);</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;   headp = <a class="code" href="../../d5/d7b/channel_8h.html#add6255866ea1651a90cf70d963c4920a">ast_channel_varshead</a>(tmp);</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a>(headp);</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#aabba812de5650c13f20fee47dffbed8b">ast_pbx_hangup_handler_init</a>(tmp);</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aae56765bab2eed7bd11d8dca29b2975c">ast_channel_datastores</a>(tmp));</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a6ca2ac36e55b1064c66d2a0c90d3c4e0">ast_channel_autochans</a>(tmp));</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;   channel_tech = <a class="code" href="../../d4/d28/channel_8c.html#a6fc05c8a1a68f5cd18017fc125ca2acd">ast_get_channel_tech</a>(<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>);</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;   <span class="keywordflow">if</span> (!channel_tech &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(tech2)) {</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;      channel_tech = <a class="code" href="../../d4/d28/channel_8c.html#a6fc05c8a1a68f5cd18017fc125ca2acd">ast_get_channel_tech</a>(tech2);</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;   }</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;   <span class="keywordflow">if</span> (channel_tech) {</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af0566a4937a5bb1323825e4ef89c0e5a">ast_channel_tech_set</a>(tmp, channel_tech);</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af0566a4937a5bb1323825e4ef89c0e5a">ast_channel_tech_set</a>(tmp, &amp;null_tech);</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;   }</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;   <span class="comment">/* You might scream &quot;locking inversion&quot; at seeing this but it is actually perfectly fine.</span></div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="comment">    * Since the channel was just created nothing can know about it yet or even acquire it.</span></div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(tmp);</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(channels);</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;   <span class="keywordflow">if</span> (assignedids &amp;&amp; (<a class="code" href="../../d4/d28/channel_8c.html#a34868a75370184c282bea3a780a5b020">does_id_conflict</a>(assignedids-&gt;uniqueid) || <a class="code" href="../../d4/d28/channel_8c.html#a34868a75370184c282bea3a780a5b020">does_id_conflict</a>(assignedids-&gt;uniqueid2))) {</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;      <a class="code" href="../../d5/de4/channel__internal_8h.html#ae6d131fd5ccddf3f7f2fb18366096c83">ast_channel_internal_errno_set</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a65123e0ee89c498bdade937bdfb66edea2ff910f90238d015ce4b2f43247f7bed">AST_CHANNEL_ERROR_ID_EXISTS</a>);</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(channels);</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(tmp);</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;      <span class="comment">/* See earlier channel creation abort comment above. */</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(tmp);</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;   }</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;   <span class="comment">/* Finalize and link into the channels container. */</span></div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;   <a class="code" href="../../d5/de4/channel__internal_8h.html#ae3be812c17deaa771d50ef45d8788c3b">ast_channel_internal_finalize</a>(tmp);</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;<a class="code" href="../../d4/d28/channel_8c.html#a5cb129ce1d580dbb22ec9573dcb62f7f">chancount</a>, +1);</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a7ce8563daf84a18540a86504d165b444">ao2_link_flags</a>(channels, tmp, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a>);</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(channels);</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;   <span class="keywordflow">if</span> (endpoint) {</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      <a class="code" href="../../d4/d61/endpoints_8h.html#a906684cda6f8960885faf9564809cfe4">ast_endpoint_add_channel</a>(endpoint, tmp);</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;   }</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;<span class="comment">    * And now, since the channel structure is built, and has its name, let</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;<span class="comment">    * the world know of its existance</span></div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga920b9d3e484257c7e593452a8e36d8d4">ast_channel_stage_snapshot_done</a>(tmp);</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Channel %p &#39;%s&#39; allocated\n&quot;</span>, tmp, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(tmp));</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;}</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;</div><div class="line"><a name="l00960"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aa4bcf718312eafc1e452aae97ef278a2">  960</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d4/d28/channel_8c.html#aa4bcf718312eafc1e452aae97ef278a2">__ast_channel_alloc</a>(<span class="keywordtype">int</span> needqueue, <span class="keywordtype">int</span> <a class="code" href="../../d4/d88/structstate.html">state</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a>,</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;               <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ade5a89f9bee15a492c760ec1765a292d">cid_name</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *acctcode,</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;               <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a> *assignedids,</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;               <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *requestor, <span class="keyword">enum</span> <a class="code" href="../../d5/d7b/channel_8h.html#a784b9642d6e2862b04b7f970b337549f">ama_flags</a> amaflag,</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;               <span class="keyword">struct</span> <a class="code" href="../../d4/df2/structast__endpoint.html">ast_endpoint</a> *endpoint,</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;               <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, <span class="keywordtype">int</span> line, <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">function</span>,</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;               <span class="keyword">const</span> <span class="keywordtype">char</span> *name_fmt, ...)</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;{</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;   va_list ap;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;   va_start(ap, name_fmt);</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;   result = <a class="code" href="../../d4/d28/channel_8c.html#a0a4128eb4aaa22a9efdae8b22649f792">__ast_channel_alloc_ap</a>(needqueue, state, cid_num, cid_name, acctcode, exten, context,</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;               assignedids, requestor, amaflag, endpoint, file, line, <span class="keyword">function</span>, name_fmt, ap);</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;   va_end(ap);</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;}</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;<span class="comment">/* only do the minimum amount of work needed here to make a channel</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;<span class="comment"> * structure that can be used to expand channel vars */</span></div><div class="line"><a name="l00981"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aeb3a7f0b3a2ac940aefeacc2a3843d0c">  981</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d4/d28/channel_8c.html#aeb3a7f0b3a2ac940aefeacc2a3843d0c">__ast_dummy_channel_alloc</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, <span class="keywordtype">int</span> line, <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keyword">function</span>)</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;{</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/de6/structvarshead.html">varshead</a> *headp;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;   tmp = <a class="code" href="../../d5/de4/channel__internal_8h.html#a21c921632695fd815a3aebf27e44ea6a">__ast_channel_internal_alloc</a>(<a class="code" href="../../d4/d28/channel_8c.html#afff08c156c66142b562578cf64722575">ast_dummy_channel_destructor</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;      file, line, <span class="keyword">function</span>);</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;   <span class="keywordflow">if</span> (!tmp) {</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;      <span class="comment">/* Dummy channel structure allocation failure. */</span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;   }</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#aabba812de5650c13f20fee47dffbed8b">ast_pbx_hangup_handler_init</a>(tmp);</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aae56765bab2eed7bd11d8dca29b2975c">ast_channel_datastores</a>(tmp));</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;<span class="comment">    * Init file descriptors to unopened state just in case</span></div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;<span class="comment">    * autoservice is called on the channel or something tries to</span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;<span class="comment">    * read a frame from it.</span></div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a7343470869d125280cc142d7d47d86a2">ast_channel_timingfd_set</a>(tmp, -1);</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ae527c750e43093165b2dcfd75e7bb6c4">ast_channel_internal_alertpipe_clear</a>(tmp);</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a3fd653bf72b897400f2e3f5c0ad480da">ast_channel_internal_fd_clear_all</a>(tmp);</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a481a937b729c7b65d4c3508b1e8c86a8">ast_channel_hold_state_set</a>(tmp, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e">AST_CONTROL_UNHOLD</a>);</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;   <a class="code" href="../../d5/de4/channel__internal_8h.html#acbc10a9cd9cb3e54ddb954c2572e6444">ast_channel_internal_setup_topics</a>(tmp);</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;   headp = <a class="code" href="../../d5/d7b/channel_8h.html#add6255866ea1651a90cf70d963c4920a">ast_channel_varshead</a>(tmp);</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a>(headp);</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;}</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;</div><div class="line"><a name="l01015"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ae5b763a23d35fc0b721adc3df8724712"> 1015</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#ae5b763a23d35fc0b721adc3df8724712">__ast_queue_frame</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="keyword">struct</span> <a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *fin, <span class="keywordtype">int</span> head, <span class="keyword">struct</span> <a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *after)</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;{</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f;</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *cur;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> new_frames = 0;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> new_voice_frames = 0;</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> queued_frames = 0;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> queued_voice_frames = 0;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;   <a class="code" href="../../d1/d8f/reqresp__parser_8h.html#a7e4aa55331b8292eff94249de72b807d">AST_LIST_HEAD_NOLOCK</a>(,<a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a>) <a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;<span class="comment">    * Check the last frame on the queue if we are queuing the new</span></div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="comment">    * frames after it.</span></div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;   cur = <a class="code" href="../../df/d90/linkedlists_8h.html#a1e37109bb72d95999821eb45f28c261c">AST_LIST_LAST</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad89ab3133d87a496f63da917148d02be">ast_channel_readq</a>(chan));</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;   <span class="keywordflow">if</span> (cur &amp;&amp; cur-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a> &amp;&amp; !head &amp;&amp; (!after || after == cur)) {</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;      <span class="keywordflow">switch</span> (cur-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>) {</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390acb9fefa4f5e5e4b3f7f12c3483b33ee6">AST_CONTROL_END_OF_Q</a>:</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;         <span class="keywordflow">if</span> (fin-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a></div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;            &amp;&amp; fin-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba">AST_CONTROL_HANGUP</a>) {</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;<span class="comment">             * Destroy the end-of-Q marker frame so we can queue the hangup</span></div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;<span class="comment">             * frame in its place.</span></div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#aa36e72b77f1b80881cd0a9fcca66ce19">AST_LIST_REMOVE</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad89ab3133d87a496f63da917148d02be">ast_channel_readq</a>(chan), cur, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;            <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(cur);</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;<span class="comment">             * This has degenerated to a normal queue append anyway.  Since</span></div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;<span class="comment">             * we just destroyed the last frame in the queue we must make</span></div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;<span class="comment">             * sure that &quot;after&quot; is NULL or bad things will happen.</span></div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;            after = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;         }</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;         <span class="comment">/* Fall through */</span></div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba">AST_CONTROL_HANGUP</a>:</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;         <span class="comment">/* Don&#39;t queue anything. */</span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;      }</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;   }</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;   <span class="comment">/* Build copies of all the new frames and count them */</span></div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>);</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;   <span class="keywordflow">for</span> (cur = fin; cur; cur = <a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(cur, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>)) {</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;      <span class="keywordflow">if</span> (!(f = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a417ee8a61074ec7570971202908e2c4f">ast_frdup</a>(cur))) {</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>)) {</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;            <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(<a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>));</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;         }</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      }</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>, f, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;      new_frames++;</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;      <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>) {</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;         new_voice_frames++;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;      }</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;   }</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;   <span class="comment">/* Count how many frames exist on the queue */</span></div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad89ab3133d87a496f63da917148d02be">ast_channel_readq</a>(chan), cur, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>) {</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;      queued_frames++;</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;      <span class="keywordflow">if</span> (cur-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>) {</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;         queued_voice_frames++;</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;      }</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;   }</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;   <span class="keywordflow">if</span> ((queued_frames + new_frames &gt; 128 || queued_voice_frames + new_voice_frames &gt; 96)) {</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;      <span class="keywordtype">int</span> count = 0;</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Exceptionally long %squeue length queuing to %s\n&quot;</span>, queued_frames + new_frames &gt; 128 ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;voice &quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad89ab3133d87a496f63da917148d02be">ast_channel_readq</a>(chan), cur, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>) {</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;         <span class="comment">/* Save the most recent frame */</span></div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(cur, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>)) {</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cur-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a> || cur-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30">AST_FRAME_VIDEO</a> || cur-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a29ff71f9d5c7927906ebd437fe372056">AST_FRAME_NULL</a>) {</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;            <span class="keywordflow">if</span> (++count &gt; 64) {</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;            }</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a>(<a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;            <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(cur);</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;            <span class="comment">/* Read from the alert pipe for each flushed frame. */</span></div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#ab9dd406367e3638a37019b1f7f9bbff8">ast_channel_internal_alert_read</a>(chan);</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;         }</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;      }</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;   }</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;   <span class="keywordflow">if</span> (after) {</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a22f1ded7491469f1fa336a7d25fac468">AST_LIST_INSERT_LIST_AFTER</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad89ab3133d87a496f63da917148d02be">ast_channel_readq</a>(chan), &amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>, after, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;      <span class="keywordflow">if</span> (head) {</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#ad66405f1d0b9e1fb484643d9a36e94ed">AST_LIST_APPEND_LIST</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>, <a class="code" href="../../d5/d7b/channel_8h.html#ad89ab3133d87a496f63da917148d02be">ast_channel_readq</a>(chan), <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad89ab3133d87a496f63da917148d02be">ast_channel_readq</a>(chan));</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;      }</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#ad66405f1d0b9e1fb484643d9a36e94ed">AST_LIST_APPEND_LIST</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad89ab3133d87a496f63da917148d02be">ast_channel_readq</a>(chan), &amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;   }</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#afe93416b5623248a31ade16d0f65c91c">ast_channel_alert_writable</a>(chan)) {</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;      <span class="comment">/* Write to the alert pipe for each added frame */</span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;      <span class="keywordflow">while</span> (new_frames--) {</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#aaca68f142e039bcb3c69cc7524b958a8">ast_channel_alert_write</a>(chan)) {</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to write to alert pipe on %s (qlen = %u): %s!\n&quot;</span>,</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), queued_frames, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;         }</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;      }</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#aa1a82c77c44469cd524ebb00357f673b">ast_channel_timingfd</a>(chan) &gt; -1) {</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;      <a class="code" href="../../db/d41/timing_8h.html#a5d6bdd95ef88176d055961ce353fcfdf">ast_timer_enable_continuous</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1e930e0e331c7e82a1bf297addfc5a34">ast_channel_timer</a>(chan));</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ab5b2bec9425dd0cfc789d96ef229cb3a">AST_FLAG_BLOCKING</a>)) {</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;      pthread_kill(<a class="code" href="../../d5/d7b/channel_8h.html#a77fb68157dff2a7004641cb8c3bc7e3c">ast_channel_blocker</a>(chan), SIGURG);</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;   }</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;}</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;</div><div class="line"><a name="l01139"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3df7007b550647c63a1b211181b55814"> 1139</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a3df7007b550647c63a1b211181b55814">ast_queue_frame</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="keyword">struct</span> <a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *fin)</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;{</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#ae5b763a23d35fc0b721adc3df8724712">__ast_queue_frame</a>(chan, fin, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;}</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;</div><div class="line"><a name="l01144"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8b8c37c2fb7bb32b302635f257982271"> 1144</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a8b8c37c2fb7bb32b302635f257982271">ast_queue_frame_head</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="keyword">struct</span> <a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *fin)</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;{</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#ae5b763a23d35fc0b721adc3df8724712">__ast_queue_frame</a>(chan, fin, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;}</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;<span class="comment">/*! \brief Queue a hangup frame for channel */</span></div><div class="line"><a name="l01150"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a30bcf0418189567bc84ff32034f79f28"> 1150</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a30bcf0418189567bc84ff32034f79f28">ast_queue_hangup</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;{</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> f = { <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>, .subclass.integer = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba">AST_CONTROL_HANGUP</a> };</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;   <span class="comment">/* Yeah, let&#39;s not change a lock-critical value without locking */</span></div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ab683c21c4a34450c4bfb8b672a7b4045">ast_channel_softhangup_internal_flag_add</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2e185ce313026e13ed90ae3a319c9cb7">AST_SOFTHANGUP_DEV</a>);</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf03b8daa7784a26648db90614add6caa">ast_channel_publish_blob</a>(chan, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gab7e251e9a467cda68d93a47184fe0727">ast_channel_hangup_request_type</a>(), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;   res = <a class="code" href="../../d4/d28/channel_8c.html#a3df7007b550647c63a1b211181b55814">ast_queue_frame</a>(chan, &amp;f);</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;}</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;<span class="comment">/*! \brief Queue a hangup frame for channel */</span></div><div class="line"><a name="l01166"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a91e78b15da3244307ffd749fa85f4db7"> 1166</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a91e78b15da3244307ffd749fa85f4db7">ast_queue_hangup_with_cause</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="keywordtype">int</span> cause)</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;{</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, blob, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> f = { <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>, .subclass.integer = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba">AST_CONTROL_HANGUP</a> };</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;   <span class="keywordflow">if</span> (cause &gt;= 0) {</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;      f.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#a5ad776be1fb768f3399aafcd1b58b3a2">uint32</a> = cause;</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;   }</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;   <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Queuing hangup with cause: %d !!!\n&quot;</span>, cause);</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;   <span class="comment">/* Yeah, let&#39;s not change a lock-critical value without locking */</span></div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ab683c21c4a34450c4bfb8b672a7b4045">ast_channel_softhangup_internal_flag_add</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2e185ce313026e13ed90ae3a319c9cb7">AST_SOFTHANGUP_DEV</a>);</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;   <span class="keywordflow">if</span> (cause &lt; 0) {</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;      f.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#a5ad776be1fb768f3399aafcd1b58b3a2">uint32</a> = <a class="code" href="../../d5/d7b/channel_8h.html#aa04afa262d7e1b211ee32d17c949a275">ast_channel_hangupcause</a>(chan);</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;   }</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;   blob = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: i}&quot;</span>,</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;              <span class="stringliteral">&quot;cause&quot;</span>, cause);</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf03b8daa7784a26648db90614add6caa">ast_channel_publish_blob</a>(chan, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gab7e251e9a467cda68d93a47184fe0727">ast_channel_hangup_request_type</a>(), blob);</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;   res = <a class="code" href="../../d4/d28/channel_8c.html#a3df7007b550647c63a1b211181b55814">ast_queue_frame</a>(chan, &amp;f);</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;}</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;</div><div class="line"><a name="l01191"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ab2e0a6897707b1102ad453ea0963999f"> 1191</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#ab2e0a6897707b1102ad453ea0963999f">ast_queue_hold</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#abc34958c9b03014779727e5ca61b93e5">musicclass</a>)</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;{</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> f = { <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>, .subclass.integer = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5">AST_CONTROL_HOLD</a> };</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *blob = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(musicclass)) {</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      f.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a> = (<span class="keywordtype">void</span> *) musicclass;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;      f.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> = strlen(musicclass) + 1;</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;      blob = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: s}&quot;</span>,</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;                 <span class="stringliteral">&quot;musicclass&quot;</span>, musicclass);</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;   }</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf03b8daa7784a26648db90614add6caa">ast_channel_publish_blob</a>(chan, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga624c4bd0bf97a8a1a9e335cb26996f97">ast_channel_hold_type</a>(), blob);</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;   res = <a class="code" href="../../d4/d28/channel_8c.html#a3df7007b550647c63a1b211181b55814">ast_queue_frame</a>(chan, &amp;f);</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;   <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(blob);</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;}</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;</div><div class="line"><a name="l01216"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aada21a9f55151c285a1537613ff9197a"> 1216</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#aada21a9f55151c285a1537613ff9197a">ast_queue_unhold</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;{</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> f = { <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>, .subclass.integer = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e">AST_CONTROL_UNHOLD</a> };</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf03b8daa7784a26648db90614add6caa">ast_channel_publish_blob</a>(chan, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gacdff76704ce4ee5c18b5656592886c78">ast_channel_unhold_type</a>(), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;   res = <a class="code" href="../../d4/d28/channel_8c.html#a3df7007b550647c63a1b211181b55814">ast_queue_frame</a>(chan, &amp;f);</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;}</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;<span class="comment">/*! \brief Queue a control frame */</span></div><div class="line"><a name="l01231"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a60f9d2b0ab8b7a839902313321163b28"> 1231</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="keyword">enum</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390">ast_control_frame_type</a> control)</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;{</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> f = { <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>, .subclass.integer = control };</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a3df7007b550647c63a1b211181b55814">ast_queue_frame</a>(chan, &amp;f);</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;}</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;<span class="comment">/*! \brief Queue a control frame with payload */</span></div><div class="line"><a name="l01238"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a7e5e15c22564fd66351d332ad10658b5"> 1238</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a7e5e15c22564fd66351d332ad10658b5">ast_queue_control_data</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="keyword">enum</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390">ast_control_frame_type</a> control,</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">void</span> *<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>, <span class="keywordtype">size_t</span> <a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>)</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;{</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> f = { <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>, .subclass.integer = control, .data.ptr = (<span class="keywordtype">void</span> *) data, .datalen = datalen };</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a3df7007b550647c63a1b211181b55814">ast_queue_frame</a>(chan, &amp;f);</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;}</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;<span class="comment">/*! \brief Queue an ANSWER control frame with topology */</span></div><div class="line"><a name="l01246"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ad91f43b38ac42d7099b89a5b5268e41a"> 1246</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#ad91f43b38ac42d7099b89a5b5268e41a">ast_queue_answer</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology)</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;{</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> f = {</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;      <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>,</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;      .subclass.integer = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe">AST_CONTROL_ANSWER</a>,</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;      .subclass.topology = (<span class="keyword">struct </span><a class="code" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *)topology,</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;   };</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a3df7007b550647c63a1b211181b55814">ast_queue_frame</a>(chan, &amp;f);</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;}</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;<span class="comment">/*! \brief Set defer DTMF flag on channel */</span></div><div class="line"><a name="l01257"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aeaeb784665c384163aefb975ddf8bbe8"> 1257</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#aeaeb784665c384163aefb975ddf8bbe8">ast_channel_defer_dtmf</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;{</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;   <span class="keywordtype">int</span> pre = 0;</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;   <span class="keywordflow">if</span> (chan) {</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;      pre = <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ab05edf1bf82b02f5987de92a6960a9bd">AST_FLAG_DEFER_DTMF</a>);</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ab05edf1bf82b02f5987de92a6960a9bd">AST_FLAG_DEFER_DTMF</a>);</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;   }</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;   <span class="keywordflow">return</span> pre;</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;}</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;<span class="comment">/*! \brief Unset defer DTMF flag on channel */</span></div><div class="line"><a name="l01271"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a6e558e6f257935744c3c7f9cd79b169a"> 1271</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a6e558e6f257935744c3c7f9cd79b169a">ast_channel_undefer_dtmf</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;{</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;   <span class="keywordflow">if</span> (chan) {</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a1d9fcff85d7adbe0bd54f88eb927998c">ast_channel_clear_flag</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ab05edf1bf82b02f5987de92a6960a9bd">AST_FLAG_DEFER_DTMF</a>);</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;   }</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;}</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;</div><div class="line"><a name="l01278"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a23323032f4b0fbab003874dd2c74d1e4"> 1278</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d4/d28/channel_8c.html#a23323032f4b0fbab003874dd2c74d1e4">ast_channel_callback</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#ad57135cf854d84f871a6269dbd881131">ao2_callback_data_fn</a> *cb_fn, <span class="keywordtype">void</span> *arg,</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;      <span class="keywordtype">void</span> *<a class="code" href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>, <span class="keywordtype">int</span> ao2_flags)</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;{</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a63fd831fe48aed32d3ef992ad8e45293">ao2_callback_data</a>(channels, ao2_flags, cb_fn, arg, data);</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;}</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;</div><div class="line"><a name="l01284"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ad8f2b1a2388ba06a23641a9f6fc34573"> 1284</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#ad8f2b1a2388ba06a23641a9f6fc34573">ast_channel_by_name_cb</a>(<span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *arg, <span class="keywordtype">void</span> *<a class="code" href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>, <span class="keywordtype">int</span> <a class="code" href="../../dd/d6f/structchanlist.html#a899a76dc5f03f0d4ea3793c339e07ee9">flags</a>)</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;{</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a> = obj;</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> = arg;</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;   <span class="keywordtype">size_t</span> name_len = *(<span class="keywordtype">size_t</span> *) data;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;   <span class="keywordtype">int</span> ret = <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a>;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(name)) {</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;BUG! Must supply a channel name or partial name to match!\n&quot;</span>);</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df">CMP_STOP</a>;</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;   }</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;   <span class="keywordflow">if</span> ((!name_len &amp;&amp; strcasecmp(<a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), name))</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;      || (name_len &amp;&amp; strncasecmp(<a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), name, name_len))) {</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;      ret = 0; <span class="comment">/* name match failed, keep looking */</span></div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;   }</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;}</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;</div><div class="line"><a name="l01306"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a30be1777fb18ec4f193e957e3b21d941"> 1306</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a30be1777fb18ec4f193e957e3b21d941">ast_channel_by_exten_cb</a>(<span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *arg, <span class="keywordtype">void</span> *<a class="code" href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>, <span class="keywordtype">int</span> <a class="code" href="../../dd/d6f/structchanlist.html#a899a76dc5f03f0d4ea3793c339e07ee9">flags</a>)</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;{</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a> = obj;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a> = arg;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a> = <a class="code" href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>;</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;   <span class="keywordtype">int</span> ret = <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a>;</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(exten) || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(context)) {</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;BUG! Must have a context and extension to match!\n&quot;</span>);</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df">CMP_STOP</a>;</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;   }</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;   <span class="keywordflow">if</span> (strcasecmp(<a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(chan), context) &amp;&amp; strcasecmp(<a class="code" href="../../d5/d7b/channel_8h.html#adf593d68a333075c1fcae8a73b68c069">ast_channel_macrocontext</a>(chan), context)) {</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;      ret = 0; <span class="comment">/* Context match failed, continue */</span></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(<a class="code" href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a>(chan), exten) &amp;&amp; strcasecmp(<a class="code" href="../../d5/d7b/channel_8h.html#ac967e3cfb7640aa743eb1c4811d46be0">ast_channel_macroexten</a>(chan), exten)) {</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;      ret = 0; <span class="comment">/* Extension match failed, continue */</span></div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;   }</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;}</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;</div><div class="line"><a name="l01329"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ac754e486b4049b91252697533275ac89"> 1329</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#ac754e486b4049b91252697533275ac89">ast_channel_by_uniqueid_cb</a>(<span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *arg, <span class="keywordtype">void</span> *<a class="code" href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>, <span class="keywordtype">int</span> <a class="code" href="../../dd/d6f/structchanlist.html#a899a76dc5f03f0d4ea3793c339e07ee9">flags</a>)</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;{</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a> = obj;</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../df/d3c/structast__channel.html#a1245ce5e07d09b4eccf64f29f6d83664">uniqueid</a> = arg;</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;   <span class="keywordtype">size_t</span> id_len = *(<span class="keywordtype">size_t</span> *) data;</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;   <span class="keywordtype">int</span> ret = <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a>;</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(uniqueid)) {</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;BUG! Must supply a uniqueid or partial uniqueid to match!\n&quot;</span>);</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df">CMP_STOP</a>;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;   }</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;   <span class="keywordflow">if</span> ((!id_len &amp;&amp; strcasecmp(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(chan), uniqueid))</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;      || (id_len &amp;&amp; strncasecmp(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(chan), uniqueid, id_len))) {</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;      ret = 0; <span class="comment">/* uniqueid match failed, keep looking */</span></div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;   }</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;}</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;</div><div class="line"><a name="l01351"></a><span class="lineno"><a class="line" href="../../d9/d97/structast__channel__iterator.html"> 1351</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d9/d97/structast__channel__iterator.html">ast_channel_iterator</a> {</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;   <span class="comment">/* storage for non-dynamically allocated iterator */</span></div><div class="line"><a name="l01353"></a><span class="lineno"><a class="line" href="../../d9/d97/structast__channel__iterator.html#a4e19899740b00333d77ffdda2a33e8ce"> 1353</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> simple_iterator;</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;   <span class="comment">/* pointer to the actual iterator (simple_iterator or a dynamically</span></div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;<span class="comment">    * allocated iterator)</span></div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01357"></a><span class="lineno"><a class="line" href="../../d9/d97/structast__channel__iterator.html#abeae476b40b8f8431464a8d5854f38f6"> 1357</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> *<a class="code" href="../../d9/d97/structast__channel__iterator.html#abeae476b40b8f8431464a8d5854f38f6">active_iterator</a>;</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;};</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;</div><div class="line"><a name="l01360"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a256993c64e12e420aa141c07363db3ef"> 1360</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d9/d97/structast__channel__iterator.html">ast_channel_iterator</a> *<a class="code" href="../../d4/d28/channel_8c.html#a256993c64e12e420aa141c07363db3ef">ast_channel_iterator_destroy</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/d97/structast__channel__iterator.html">ast_channel_iterator</a> *i)</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;{</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(i-&gt;<a class="code" href="../../d9/d97/structast__channel__iterator.html#abeae476b40b8f8431464a8d5854f38f6">active_iterator</a>);</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(i);</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;}</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;</div><div class="line"><a name="l01368"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ad40fc1b99391aa22b9f46444bee27bd4"> 1368</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d9/d97/structast__channel__iterator.html">ast_channel_iterator</a> *<a class="code" href="../../d4/d28/channel_8c.html#ad40fc1b99391aa22b9f46444bee27bd4">ast_channel_iterator_by_exten_new</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>)</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;{</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structast__channel__iterator.html">ast_channel_iterator</a> *i;</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;   <span class="keywordtype">char</span> *l_exten = (<span class="keywordtype">char</span> *) exten;</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;   <span class="keywordtype">char</span> *l_context = (<span class="keywordtype">char</span> *) context;</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;   <span class="keywordflow">if</span> (!(i = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*i)))) {</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;   }</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;   i-&gt;<a class="code" href="../../d9/d97/structast__channel__iterator.html#abeae476b40b8f8431464a8d5854f38f6">active_iterator</a> = (<span class="keywordtype">void</span> *) <a class="code" href="../../d4/d28/channel_8c.html#a23323032f4b0fbab003874dd2c74d1e4">ast_channel_callback</a>(<a class="code" href="../../d4/d28/channel_8c.html#a30be1777fb18ec4f193e957e3b21d941">ast_channel_by_exten_cb</a>,</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;      l_context, l_exten, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47">OBJ_MULTIPLE</a>);</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;   <span class="keywordflow">if</span> (!i-&gt;<a class="code" href="../../d9/d97/structast__channel__iterator.html#abeae476b40b8f8431464a8d5854f38f6">active_iterator</a>) {</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(i);</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;   }</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;   <span class="keywordflow">return</span> i;</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;}</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;</div><div class="line"><a name="l01388"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a129d99e9bb9aafd0f073df357975cb66"> 1388</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d9/d97/structast__channel__iterator.html">ast_channel_iterator</a> *<a class="code" href="../../d4/d28/channel_8c.html#a129d99e9bb9aafd0f073df357975cb66">ast_channel_iterator_by_name_new</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="keywordtype">size_t</span> name_len)</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;{</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structast__channel__iterator.html">ast_channel_iterator</a> *i;</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;   <span class="keywordtype">char</span> *l_name = (<span class="keywordtype">char</span> *) name;</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;   <span class="keywordflow">if</span> (!(i = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*i)))) {</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;   }</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;   i-&gt;<a class="code" href="../../d9/d97/structast__channel__iterator.html#abeae476b40b8f8431464a8d5854f38f6">active_iterator</a> = (<span class="keywordtype">void</span> *) <a class="code" href="../../d4/d28/channel_8c.html#a23323032f4b0fbab003874dd2c74d1e4">ast_channel_callback</a>(<a class="code" href="../../d4/d28/channel_8c.html#ad8f2b1a2388ba06a23641a9f6fc34573">ast_channel_by_name_cb</a>,</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;      l_name, &amp;name_len,</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47">OBJ_MULTIPLE</a> | (name_len == 0 <span class="comment">/* match the whole word, so optimize */</span> ? <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a> : 0));</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;   <span class="keywordflow">if</span> (!i-&gt;<a class="code" href="../../d9/d97/structast__channel__iterator.html#abeae476b40b8f8431464a8d5854f38f6">active_iterator</a>) {</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(i);</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;   }</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;   <span class="keywordflow">return</span> i;</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;}</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;</div><div class="line"><a name="l01408"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aae1445ed63630123081206e3de5b7b1a"> 1408</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d9/d97/structast__channel__iterator.html">ast_channel_iterator</a> *<a class="code" href="../../d4/d28/channel_8c.html#aae1445ed63630123081206e3de5b7b1a">ast_channel_iterator_all_new</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;{</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structast__channel__iterator.html">ast_channel_iterator</a> *i;</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;   <span class="keywordflow">if</span> (!(i = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*i)))) {</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;   }</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;   i-&gt;<a class="code" href="../../d9/d97/structast__channel__iterator.html#a4e19899740b00333d77ffdda2a33e8ce">simple_iterator</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(channels, 0);</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;   i-&gt;<a class="code" href="../../d9/d97/structast__channel__iterator.html#abeae476b40b8f8431464a8d5854f38f6">active_iterator</a> = &amp;i-&gt;<a class="code" href="../../d9/d97/structast__channel__iterator.html#a4e19899740b00333d77ffdda2a33e8ce">simple_iterator</a>;</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;   <span class="keywordflow">return</span> i;</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;}</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;</div><div class="line"><a name="l01422"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ab0eadbfdcbdad2c0e8927900ec9b98d5"> 1422</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d4/d28/channel_8c.html#ab0eadbfdcbdad2c0e8927900ec9b98d5">ast_channel_iterator_next</a>(<span class="keyword">struct</span> <a class="code" href="../../d9/d97/structast__channel__iterator.html">ast_channel_iterator</a> *i)</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;{</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(i-&gt;<a class="code" href="../../d9/d97/structast__channel__iterator.html#abeae476b40b8f8431464a8d5854f38f6">active_iterator</a>);</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;}</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;<span class="comment">/* Legacy function, not currently used for lookups, but we need a cmp_fn */</span></div><div class="line"><a name="l01428"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aed8efcc0048d18a845e16c02c7e21ae6"> 1428</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#aed8efcc0048d18a845e16c02c7e21ae6">ast_channel_cmp_cb</a>(<span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *arg, <span class="keywordtype">int</span> <a class="code" href="../../dd/d6f/structchanlist.html#a899a76dc5f03f0d4ea3793c339e07ee9">flags</a>)</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;{</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;   <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;BUG! Should never be called!\n&quot;</span>);</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df">CMP_STOP</a>;</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;}</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;</div><div class="line"><a name="l01434"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a71d89dbc5107b1f851dcbf1686a0d9d9"> 1434</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d4/d28/channel_8c.html#a71d89dbc5107b1f851dcbf1686a0d9d9">ast_channel_get_by_name_prefix</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="keywordtype">size_t</span> name_len)</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;{</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>;</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;   <span class="keywordtype">char</span> *l_name = (<span class="keywordtype">char</span> *) name;</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;   chan = <a class="code" href="../../d4/d28/channel_8c.html#a23323032f4b0fbab003874dd2c74d1e4">ast_channel_callback</a>(<a class="code" href="../../d4/d28/channel_8c.html#ad8f2b1a2388ba06a23641a9f6fc34573">ast_channel_by_name_cb</a>, l_name, &amp;name_len,</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;      (name_len == 0) <span class="comment">/* optimize if it is a complete name match */</span> ? <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a> : 0);</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;   <span class="keywordflow">if</span> (chan) {</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>;</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;   }</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(l_name)) {</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;      <span class="comment">/* We didn&#39;t have a name to search for so quit. */</span></div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;   }</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;   <span class="comment">/* Now try a search for uniqueid. */</span></div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a23323032f4b0fbab003874dd2c74d1e4">ast_channel_callback</a>(<a class="code" href="../../d4/d28/channel_8c.html#ac754e486b4049b91252697533275ac89">ast_channel_by_uniqueid_cb</a>, l_name, &amp;name_len, 0);</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;}</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;</div><div class="line"><a name="l01454"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ac7e42045272530c8678418993e75fd56"> 1454</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d4/d28/channel_8c.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>)</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;{</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a71d89dbc5107b1f851dcbf1686a0d9d9">ast_channel_get_by_name_prefix</a>(name, 0);</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;}</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;</div><div class="line"><a name="l01459"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#af37d463736669d2f0b5de3d1d668abf2"> 1459</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d4/d28/channel_8c.html#af37d463736669d2f0b5de3d1d668abf2">ast_channel_get_by_exten</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>)</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;{</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;   <span class="keywordtype">char</span> *l_exten = (<span class="keywordtype">char</span> *) exten;</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;   <span class="keywordtype">char</span> *l_context = (<span class="keywordtype">char</span> *) context;</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a23323032f4b0fbab003874dd2c74d1e4">ast_channel_callback</a>(<a class="code" href="../../d4/d28/channel_8c.html#a30be1777fb18ec4f193e957e3b21d941">ast_channel_by_exten_cb</a>, l_context, l_exten, 0);</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;}</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;</div><div class="line"><a name="l01467"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#af040cd3070189adb70454717407a4315"> 1467</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#af040cd3070189adb70454717407a4315">ast_is_deferrable_frame</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame)</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;{</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;   <span class="comment">/* Do not add a default entry in this switch statement.  Each new</span></div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;<span class="comment">    * frame type should be addressed directly as to whether it should</span></div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;<span class="comment">    * be queued up or not.</span></div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;   <span class="keywordflow">switch</span> (frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a>) {</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af36653b08c00f5d824ed6046e9233ef9">AST_FRAME_BRIDGE_ACTION</a>:</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa28206b97fb0795e1fa681248fd0d97f">AST_FRAME_BRIDGE_ACTION_SYNC</a>:</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>:</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078">AST_FRAME_TEXT</a>:</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ada620aba450c2a60eb096001f2361741">AST_FRAME_TEXT_DATA</a>:</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a6c9398ee8989239124295d096a87bf32">AST_FRAME_IMAGE</a>:</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a3d91bab33583f560197e21532a02a895">AST_FRAME_HTML</a>:</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a>:</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be">AST_FRAME_DTMF_BEGIN</a>:</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>:</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30">AST_FRAME_VIDEO</a>:</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a29ff71f9d5c7927906ebd437fe372056">AST_FRAME_NULL</a>:</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a7f7e5bdc9f8a8ef45c4d078f96b52624">AST_FRAME_IAX</a>:</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a8089c2a7198a1063db9e6c3f904482a4">AST_FRAME_CNG</a>:</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ad99b86353343f422bda01163898b2eea">AST_FRAME_MODEM</a>:</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ac2b2b163b29fde967531b8bf92966c97">AST_FRAME_RTCP</a>:</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;   }</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;}</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;<span class="comment">/*! \brief Wait, look for hangups and condition arg */</span></div><div class="line"><a name="l01498"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a7b12ac20312638de5f8381b633b412f2"> 1498</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a7b12ac20312638de5f8381b633b412f2">safe_sleep_conditional</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="keywordtype">int</span> timeout_ms, <span class="keywordtype">int</span> (*<a class="code" href="../../df/d44/app__meetme_8c.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>)(<span class="keywordtype">void</span>*), <span class="keywordtype">void</span> *<a class="code" href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> generate_silence)</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;{</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f;</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/da1/structast__silence__generator.html">ast_silence_generator</a> *silgen = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;   <span class="keyword">struct </span>timeval start;</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;   <span class="keywordtype">int</span> ms;</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;   <a class="code" href="../../d1/d8f/reqresp__parser_8h.html#a7e4aa55331b8292eff94249de72b807d">AST_LIST_HEAD_NOLOCK</a>(, <a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a>) deferred_frames;</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a>(&amp;deferred_frames);</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;   <span class="comment">/* If no other generator is present, start silencegen while waiting */</span></div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;   <span class="keywordflow">if</span> (generate_silence &amp;&amp; <a class="code" href="../../d7/d5b/options_8h.html#afe8795c4ec744506a9300700fc0813dc">ast_opt_transmit_silence</a> &amp;&amp; !<a class="code" href="../../d5/d7b/channel_8h.html#afb86bdd7fa42b7bf8ac2fbfab01f67ef">ast_channel_generatordata</a>(chan)) {</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;      silgen = <a class="code" href="../../d4/d28/channel_8c.html#a2a2e0ff24c57491a877cac39cb670024">ast_channel_start_silence_generator</a>(chan);</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;   }</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;   start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;   <span class="keywordflow">while</span> ((ms = <a class="code" href="../../de/df7/time_8h.html#a904a6933b710e14c7fa2029a0f0cc91a">ast_remaining_ms</a>(start, timeout_ms))) {</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *dup_f = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d44/app__meetme_8c.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a> &amp;&amp; ((*<a class="code" href="../../df/d44/app__meetme_8c.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>)(data) == 0)) {</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;      }</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;      ms = <a class="code" href="../../d4/d28/channel_8c.html#aed7cba5dd8c6d31600f50d4b3f68d9ca">ast_waitfor</a>(chan, ms);</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;      <span class="keywordflow">if</span> (ms &lt; 0) {</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;         res = -1;</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;      }</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;      <span class="keywordflow">if</span> (ms &gt; 0) {</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;         f = <a class="code" href="../../d4/d28/channel_8c.html#a7ef6737309dc9e8b6c4a7cb4800638b1">ast_read</a>(chan);</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;         <span class="keywordflow">if</span> (!f) {</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;            res = -1;</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;         }</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d28/channel_8c.html#af040cd3070189adb70454717407a4315">ast_is_deferrable_frame</a>(f)) {</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;            <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;         }</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;         <span class="keywordflow">if</span> ((dup_f = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a314496ce1d74ed7fdb9c5319c5e2e953">ast_frisolate</a>(f))) {</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;            <span class="keywordflow">if</span> (dup_f != f) {</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;               <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;            }</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a>(&amp;deferred_frames, dup_f, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;         }</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;      }</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;   }</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;   <span class="comment">/* stop silgen if present */</span></div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;   <span class="keywordflow">if</span> (silgen) {</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a6643cbe766a051d2d06750ab5b3e933d">ast_channel_stop_silence_generator</a>(chan, silgen);</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;   }</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;   <span class="comment">/* We need to free all the deferred frames, but we only need to</span></div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;<span class="comment">    * queue the deferred frames if there was no error and no</span></div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;<span class="comment">    * hangup was received</span></div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;   <span class="keywordflow">while</span> ((f = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;deferred_frames, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>))) {</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;      <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;         <a class="code" href="../../d4/d28/channel_8c.html#a8b8c37c2fb7bb32b302635f257982271">ast_queue_frame_head</a>(chan, f);</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;      }</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;      <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;   }</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;}</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;</div><div class="line"><a name="l01568"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ac59e7b9936ede40b0af01a4b67408052"> 1568</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#ac59e7b9936ede40b0af01a4b67408052">ast_safe_sleep_conditional</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">int</span> timeout_ms, <span class="keywordtype">int</span> (*<a class="code" href="../../df/d44/app__meetme_8c.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>)(<span class="keywordtype">void</span>*), <span class="keywordtype">void</span> *<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>)</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;{</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a7b12ac20312638de5f8381b633b412f2">safe_sleep_conditional</a>(chan, timeout_ms, <a class="code" href="../../df/d44/app__meetme_8c.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>, data, 1);</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;}</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;<span class="comment">/*! \brief Wait, look for hangups */</span></div><div class="line"><a name="l01574"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#af10e3bd01602095e1908d3926afc3b76"> 1574</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#af10e3bd01602095e1908d3926afc3b76">ast_safe_sleep</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">int</span> ms)</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;{</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a7b12ac20312638de5f8381b633b412f2">safe_sleep_conditional</a>(chan, ms, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 1);</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;}</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;</div><div class="line"><a name="l01579"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ae57d3e85bdfbbc16a265919f7854bfe8"> 1579</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#ae57d3e85bdfbbc16a265919f7854bfe8">ast_safe_sleep_without_silence</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">int</span> ms)</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;{</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a7b12ac20312638de5f8381b633b412f2">safe_sleep_conditional</a>(chan, ms, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;}</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;</div><div class="line"><a name="l01584"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a015abb5b26bfba6ca64f10fd9e0468ba"> 1584</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d4/d28/channel_8c.html#a015abb5b26bfba6ca64f10fd9e0468ba">ast_channel_release</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;{</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;   <span class="comment">/* Safe, even if already unlinked. */</span></div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a>(channels, chan);</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;}</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;</div><div class="line"><a name="l01591"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a0fe98273fc14eb880f4cfdc71cdec1b7"> 1591</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a0fe98273fc14eb880f4cfdc71cdec1b7">ast_party_name_init</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d6f/structast__party__name.html">ast_party_name</a> *init)</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;{</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;   init-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;   init-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#a1fb9f03e5de01bf0a8f221e627fa9a7b">char_set</a> = <a class="code" href="../../d5/d7b/channel_8h.html#aa36854cfee90c77c4124e94273e42dffae83dea89fd3ea1272aca35be3e9767e9">AST_PARTY_CHAR_SET_ISO8859_1</a>;</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;   init-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = <a class="code" href="../../de/d47/callerid_8h.html#af01ad9e215f9e9941b68f1ff1559d409">AST_PRES_ALLOWED_USER_NUMBER_NOT_SCREENED</a>;</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;   init-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = 0;</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;}</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;</div><div class="line"><a name="l01599"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#afa107fa2b9ac80bf88c67a9deab70d42"> 1599</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#afa107fa2b9ac80bf88c67a9deab70d42">ast_party_name_copy</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d6f/structast__party__name.html">ast_party_name</a> *dest, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d8/d6f/structast__party__name.html">ast_party_name</a> *src)</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;{</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;   <span class="keywordflow">if</span> (dest == src) {</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;      <span class="comment">/* Don&#39;t copy to self */</span></div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;   }</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(dest-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;   dest-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(src-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;   dest-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#a1fb9f03e5de01bf0a8f221e627fa9a7b">char_set</a> = src-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#a1fb9f03e5de01bf0a8f221e627fa9a7b">char_set</a>;</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;   dest-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = src-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#a3df9119032baa1743f2db71344bd7cac">presentation</a>;</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;   dest-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = src-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>;</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;}</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;</div><div class="line"><a name="l01613"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a918cf4d5af55e140f5c38bf93347116b"> 1613</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a918cf4d5af55e140f5c38bf93347116b">ast_party_name_set_init</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d6f/structast__party__name.html">ast_party_name</a> *init, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d8/d6f/structast__party__name.html">ast_party_name</a> *guide)</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;{</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;   init-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;   init-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#a1fb9f03e5de01bf0a8f221e627fa9a7b">char_set</a> = guide-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#a1fb9f03e5de01bf0a8f221e627fa9a7b">char_set</a>;</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;   init-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = guide-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#a3df9119032baa1743f2db71344bd7cac">presentation</a>;</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;   init-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = guide-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>;</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;}</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;</div><div class="line"><a name="l01621"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aa024215ca494ac1d1a4987c2e3809fd8"> 1621</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#aa024215ca494ac1d1a4987c2e3809fd8">ast_party_name_set</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d6f/structast__party__name.html">ast_party_name</a> *dest, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d8/d6f/structast__party__name.html">ast_party_name</a> *src)</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;{</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;   <span class="keywordflow">if</span> (dest == src) {</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;      <span class="comment">/* Don&#39;t set to self */</span></div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;   }</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;   <span class="keywordflow">if</span> (src-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> &amp;&amp; src-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> != dest-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(dest-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;      dest-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(src-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;   }</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;   dest-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#a1fb9f03e5de01bf0a8f221e627fa9a7b">char_set</a> = src-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#a1fb9f03e5de01bf0a8f221e627fa9a7b">char_set</a>;</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;   dest-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = src-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#a3df9119032baa1743f2db71344bd7cac">presentation</a>;</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;   dest-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = src-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>;</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;}</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;</div><div class="line"><a name="l01638"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a857e0317fcefc59c7a21c1f08ea7be73"> 1638</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a857e0317fcefc59c7a21c1f08ea7be73">ast_party_name_free</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d6f/structast__party__name.html">ast_party_name</a> *doomed)</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;{</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(doomed-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;   doomed-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;}</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;</div><div class="line"><a name="l01644"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a27c4f1a52c8a53bc9e7122dc04e81344"> 1644</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a27c4f1a52c8a53bc9e7122dc04e81344">ast_party_number_init</a>(<span class="keyword">struct</span> <a class="code" href="../../d6/dbb/structast__party__number.html">ast_party_number</a> *init)</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;{</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;   init-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;   init-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a> = 0;<span class="comment">/* Unknown */</span></div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;   init-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = <a class="code" href="../../de/d47/callerid_8h.html#af01ad9e215f9e9941b68f1ff1559d409">AST_PRES_ALLOWED_USER_NUMBER_NOT_SCREENED</a>;</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;   init-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = 0;</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;}</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;</div><div class="line"><a name="l01652"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3aae98f83e7365f6c692f3706579ead1"> 1652</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a3aae98f83e7365f6c692f3706579ead1">ast_party_number_copy</a>(<span class="keyword">struct</span> <a class="code" href="../../d6/dbb/structast__party__number.html">ast_party_number</a> *dest, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d6/dbb/structast__party__number.html">ast_party_number</a> *src)</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;{</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;   <span class="keywordflow">if</span> (dest == src) {</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;      <span class="comment">/* Don&#39;t copy to self */</span></div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;   }</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(dest-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;   dest-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(src-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;   dest-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a> = src-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a>;</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;   dest-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = src-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">presentation</a>;</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;   dest-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = src-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>;</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;}</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;</div><div class="line"><a name="l01666"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#abb288b8b026537180b25447a967064d1"> 1666</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#abb288b8b026537180b25447a967064d1">ast_party_number_set_init</a>(<span class="keyword">struct</span> <a class="code" href="../../d6/dbb/structast__party__number.html">ast_party_number</a> *init, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d6/dbb/structast__party__number.html">ast_party_number</a> *guide)</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;{</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;   init-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;   init-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a> = guide-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a>;</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;   init-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = guide-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">presentation</a>;</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;   init-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = guide-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>;</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;}</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;</div><div class="line"><a name="l01674"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3fb18bea319dde30a703d63f6c9c36a8"> 1674</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a3fb18bea319dde30a703d63f6c9c36a8">ast_party_number_set</a>(<span class="keyword">struct</span> <a class="code" href="../../d6/dbb/structast__party__number.html">ast_party_number</a> *dest, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d6/dbb/structast__party__number.html">ast_party_number</a> *src)</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;{</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;   <span class="keywordflow">if</span> (dest == src) {</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;      <span class="comment">/* Don&#39;t set to self */</span></div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;   }</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;   <span class="keywordflow">if</span> (src-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> &amp;&amp; src-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> != dest-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(dest-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;      dest-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(src-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;   }</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;   dest-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a> = src-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a>;</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;   dest-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = src-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">presentation</a>;</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;   dest-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = src-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>;</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;}</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;</div><div class="line"><a name="l01691"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#abc7ac58271a860c92fee033afb031e8d"> 1691</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#abc7ac58271a860c92fee033afb031e8d">ast_party_number_free</a>(<span class="keyword">struct</span> <a class="code" href="../../d6/dbb/structast__party__number.html">ast_party_number</a> *doomed)</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;{</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(doomed-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;   doomed-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;}</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;</div><div class="line"><a name="l01697"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a40230121458bf94386b685b2e3270880"> 1697</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a40230121458bf94386b685b2e3270880">ast_party_subaddress_init</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d41/structast__party__subaddress.html">ast_party_subaddress</a> *init)</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;{</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;   init-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;   init-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#ac765329451135abec74c45e1897abf26">type</a> = 0;</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;   init-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#a141590e40aa10259d3c0bc722725e7ad">odd_even_indicator</a> = 0;</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;   init-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = 0;</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;}</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;</div><div class="line"><a name="l01705"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a005ef840127571c2018c6383c5fe18ac"> 1705</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a005ef840127571c2018c6383c5fe18ac">ast_party_subaddress_copy</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d41/structast__party__subaddress.html">ast_party_subaddress</a> *dest, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d7/d41/structast__party__subaddress.html">ast_party_subaddress</a> *src)</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;{</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;   <span class="keywordflow">if</span> (dest == src) {</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;      <span class="comment">/* Don&#39;t copy to self */</span></div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;   }</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(dest-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;   dest-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(src-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;   dest-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#ac765329451135abec74c45e1897abf26">type</a> = src-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#ac765329451135abec74c45e1897abf26">type</a>;</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;   dest-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#a141590e40aa10259d3c0bc722725e7ad">odd_even_indicator</a> = src-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#a141590e40aa10259d3c0bc722725e7ad">odd_even_indicator</a>;</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;   dest-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = src-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>;</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;}</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;</div><div class="line"><a name="l01719"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a377ded8d56517db5d4b991a44ae88843"> 1719</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a377ded8d56517db5d4b991a44ae88843">ast_party_subaddress_set_init</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d41/structast__party__subaddress.html">ast_party_subaddress</a> *init, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d7/d41/structast__party__subaddress.html">ast_party_subaddress</a> *guide)</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;{</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;   init-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;   init-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#ac765329451135abec74c45e1897abf26">type</a> = guide-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#ac765329451135abec74c45e1897abf26">type</a>;</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;   init-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#a141590e40aa10259d3c0bc722725e7ad">odd_even_indicator</a> = guide-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#a141590e40aa10259d3c0bc722725e7ad">odd_even_indicator</a>;</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;   init-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = guide-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>;</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;}</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;</div><div class="line"><a name="l01727"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a55feca0a002a792f1cc680e79b3d2739"> 1727</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a55feca0a002a792f1cc680e79b3d2739">ast_party_subaddress_set</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d41/structast__party__subaddress.html">ast_party_subaddress</a> *dest, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d7/d41/structast__party__subaddress.html">ast_party_subaddress</a> *src)</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;{</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;   <span class="keywordflow">if</span> (dest == src) {</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;      <span class="comment">/* Don&#39;t set to self */</span></div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;   }</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;   <span class="keywordflow">if</span> (src-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> &amp;&amp; src-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> != dest-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(dest-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;      dest-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(src-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;   }</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;   dest-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#ac765329451135abec74c45e1897abf26">type</a> = src-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#ac765329451135abec74c45e1897abf26">type</a>;</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;   dest-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#a141590e40aa10259d3c0bc722725e7ad">odd_even_indicator</a> = src-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#a141590e40aa10259d3c0bc722725e7ad">odd_even_indicator</a>;</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;   dest-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = src-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>;</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;}</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;</div><div class="line"><a name="l01744"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#adaa84a3e1b57ef0c912b57699fc0ddc9"> 1744</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#adaa84a3e1b57ef0c912b57699fc0ddc9">ast_party_subaddress_free</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d41/structast__party__subaddress.html">ast_party_subaddress</a> *doomed)</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;{</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(doomed-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;   doomed-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;}</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;</div><div class="line"><a name="l01750"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aa095ba128741aac1e9306e4956be8707"> 1750</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#aa095ba128741aac1e9306e4956be8707">ast_set_party_id_all</a>(<span class="keyword">struct</span> <a class="code" href="../../df/dcf/structast__set__party__id.html">ast_set_party_id</a> *update_id)</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;{</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;   update_id-&gt;<a class="code" href="../../df/dcf/structast__set__party__id.html#abbd32f02dc419af56bdf709336f6c33e">name</a> = 1;</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;   update_id-&gt;<a class="code" href="../../df/dcf/structast__set__party__id.html#aa6787fc6eb732987040b1f378489db54">number</a> = 1;</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;   update_id-&gt;<a class="code" href="../../df/dcf/structast__set__party__id.html#a220f288903c39eb8673e61c90a842c33">subaddress</a> = 1;</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;}</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;</div><div class="line"><a name="l01757"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a2126ac3bbc1a14f6ed5ccdfcbb851776"> 1757</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a2126ac3bbc1a14f6ed5ccdfcbb851776">ast_party_id_init</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *init)</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;{</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a0fe98273fc14eb880f4cfdc71cdec1b7">ast_party_name_init</a>(&amp;init-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>);</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a27c4f1a52c8a53bc9e7122dc04e81344">ast_party_number_init</a>(&amp;init-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>);</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a40230121458bf94386b685b2e3270880">ast_party_subaddress_init</a>(&amp;init-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>);</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;   init-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;}</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;</div><div class="line"><a name="l01765"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#abbf5c9830dd3533f3a6d5d35f941effb"> 1765</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#abbf5c9830dd3533f3a6d5d35f941effb">ast_party_id_copy</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *dest, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *src)</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;{</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;   <span class="keywordflow">if</span> (dest == src) {</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;      <span class="comment">/* Don&#39;t copy to self */</span></div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;   }</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#afa107fa2b9ac80bf88c67a9deab70d42">ast_party_name_copy</a>(&amp;dest-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>, &amp;src-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>);</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3aae98f83e7365f6c692f3706579ead1">ast_party_number_copy</a>(&amp;dest-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>, &amp;src-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>);</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a005ef840127571c2018c6383c5fe18ac">ast_party_subaddress_copy</a>(&amp;dest-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>, &amp;src-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>);</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(dest-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>);</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;   dest-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(src-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>);</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;}</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;</div><div class="line"><a name="l01780"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a856b99dd45a814e8eca602541936c484"> 1780</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a856b99dd45a814e8eca602541936c484">ast_party_id_set_init</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *init, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *guide)</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;{</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a918cf4d5af55e140f5c38bf93347116b">ast_party_name_set_init</a>(&amp;init-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>, &amp;guide-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>);</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#abb288b8b026537180b25447a967064d1">ast_party_number_set_init</a>(&amp;init-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>, &amp;guide-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>);</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a377ded8d56517db5d4b991a44ae88843">ast_party_subaddress_set_init</a>(&amp;init-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>, &amp;guide-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>);</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;   init-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;}</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;</div><div class="line"><a name="l01788"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a59a1c2f9f692d5b3dbb213ae454f7718"> 1788</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a59a1c2f9f692d5b3dbb213ae454f7718">ast_party_id_set</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *dest, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *src, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/dcf/structast__set__party__id.html">ast_set_party_id</a> *<a class="code" href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a>)</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;{</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;   <span class="keywordflow">if</span> (dest == src) {</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;      <span class="comment">/* Don&#39;t set to self */</span></div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;   }</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;   <span class="keywordflow">if</span> (!update || update-&gt;<a class="code" href="../../df/dcf/structast__set__party__id.html#abbd32f02dc419af56bdf709336f6c33e">name</a>) {</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#aa024215ca494ac1d1a4987c2e3809fd8">ast_party_name_set</a>(&amp;dest-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>, &amp;src-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>);</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;   }</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;   <span class="keywordflow">if</span> (!update || update-&gt;<a class="code" href="../../df/dcf/structast__set__party__id.html#aa6787fc6eb732987040b1f378489db54">number</a>) {</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a3fb18bea319dde30a703d63f6c9c36a8">ast_party_number_set</a>(&amp;dest-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>, &amp;src-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>);</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;   }</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;   <span class="keywordflow">if</span> (!update || update-&gt;<a class="code" href="../../df/dcf/structast__set__party__id.html#a220f288903c39eb8673e61c90a842c33">subaddress</a>) {</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a55feca0a002a792f1cc680e79b3d2739">ast_party_subaddress_set</a>(&amp;dest-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>, &amp;src-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>);</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;   }</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;   <span class="keywordflow">if</span> (src-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a> &amp;&amp; src-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a> != dest-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>) {</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(dest-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>);</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;      dest-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(src-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>);</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;   }</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;}</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;</div><div class="line"><a name="l01811"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a5399dc7357197254794b990b263a2b7b"> 1811</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a5399dc7357197254794b990b263a2b7b">ast_party_id_free</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *doomed)</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;{</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a857e0317fcefc59c7a21c1f08ea7be73">ast_party_name_free</a>(&amp;doomed-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>);</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#abc7ac58271a860c92fee033afb031e8d">ast_party_number_free</a>(&amp;doomed-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>);</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#adaa84a3e1b57ef0c912b57699fc0ddc9">ast_party_subaddress_free</a>(&amp;doomed-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>);</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(doomed-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>);</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;   doomed-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;}</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;</div><div class="line"><a name="l01821"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a39aac47fef1240391fd97e055522fd83"> 1821</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a39aac47fef1240391fd97e055522fd83">ast_party_id_presentation</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *<span class="keywordtype">id</span>)</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;{</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;   <span class="keywordtype">int</span> number_priority;</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;   <span class="keywordtype">int</span> number_value;</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;   <span class="keywordtype">int</span> number_screening;</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;   <span class="keywordtype">int</span> name_priority;</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;   <span class="keywordtype">int</span> name_value;</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;   <span class="comment">/* Determine name presentation priority. */</span></div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;   <span class="keywordflow">if</span> (!id-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>) {</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;      name_value = <a class="code" href="../../de/d47/callerid_8h.html#a2981008d349635cf996bb8629d15a926">AST_PRES_UNAVAILABLE</a>;</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;      name_priority = 3;</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;      name_value = <span class="keywordtype">id</span>-&gt;name.presentation &amp; <a class="code" href="../../de/d47/callerid_8h.html#aec2d69e281c81503bc532e107ca26f66">AST_PRES_RESTRICTION</a>;</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;      <span class="keywordflow">switch</span> (name_value) {</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d47/callerid_8h.html#a405736564654ff0e5a98d4be4c57b16c">AST_PRES_RESTRICTED</a>:</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;         name_priority = 0;</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d47/callerid_8h.html#a4b8463f8be514e1134291b2a9ddaeb35">AST_PRES_ALLOWED</a>:</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;         name_priority = 1;</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d47/callerid_8h.html#a2981008d349635cf996bb8629d15a926">AST_PRES_UNAVAILABLE</a>:</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;         name_priority = 2;</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;         name_value = <a class="code" href="../../de/d47/callerid_8h.html#a2981008d349635cf996bb8629d15a926">AST_PRES_UNAVAILABLE</a>;</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;         name_priority = 3;</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;      }</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;   }</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;   <span class="comment">/* Determine number presentation priority. */</span></div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;   <span class="keywordflow">if</span> (!id-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>) {</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;      number_screening = <a class="code" href="../../de/d47/callerid_8h.html#a24813a6a337abb76e92c7f226f68c3cd">AST_PRES_USER_NUMBER_UNSCREENED</a>;</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;      number_value = <a class="code" href="../../de/d47/callerid_8h.html#a2981008d349635cf996bb8629d15a926">AST_PRES_UNAVAILABLE</a>;</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;      number_priority = 3;</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;      number_screening = <span class="keywordtype">id</span>-&gt;number.presentation &amp; <a class="code" href="../../de/d47/callerid_8h.html#aa2dfb2ae7af41bd00f62156828f885d4">AST_PRES_NUMBER_TYPE</a>;</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;      number_value = <span class="keywordtype">id</span>-&gt;number.presentation &amp; <a class="code" href="../../de/d47/callerid_8h.html#aec2d69e281c81503bc532e107ca26f66">AST_PRES_RESTRICTION</a>;</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;      <span class="keywordflow">switch</span> (number_value) {</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d47/callerid_8h.html#a405736564654ff0e5a98d4be4c57b16c">AST_PRES_RESTRICTED</a>:</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;         number_priority = 0;</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d47/callerid_8h.html#a4b8463f8be514e1134291b2a9ddaeb35">AST_PRES_ALLOWED</a>:</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;         number_priority = 1;</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../de/d47/callerid_8h.html#a2981008d349635cf996bb8629d15a926">AST_PRES_UNAVAILABLE</a>:</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;         number_priority = 2;</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;         number_screening = <a class="code" href="../../de/d47/callerid_8h.html#a24813a6a337abb76e92c7f226f68c3cd">AST_PRES_USER_NUMBER_UNSCREENED</a>;</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;         number_value = <a class="code" href="../../de/d47/callerid_8h.html#a2981008d349635cf996bb8629d15a926">AST_PRES_UNAVAILABLE</a>;</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;         number_priority = 3;</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;      }</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;   }</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;   <span class="comment">/* Select the wining presentation value. */</span></div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;   <span class="keywordflow">if</span> (name_priority &lt; number_priority) {</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;      number_value = name_value;</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;   }</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;   <span class="keywordflow">if</span> (number_value == <a class="code" href="../../de/d47/callerid_8h.html#a2981008d349635cf996bb8629d15a926">AST_PRES_UNAVAILABLE</a>) {</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../de/d47/callerid_8h.html#a69574f5c1e9be59b1d2eb727d4209bce">AST_PRES_NUMBER_NOT_AVAILABLE</a>;</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;   }</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;   <span class="keywordflow">return</span> number_value | number_screening;</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;}</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;</div><div class="line"><a name="l01889"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ab1f348349b5df2d0b662fb9eed5afcce"> 1889</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#ab1f348349b5df2d0b662fb9eed5afcce">ast_party_id_invalidate</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *<span class="keywordtype">id</span>)</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;{</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;   <span class="keywordtype">id</span>-&gt;name.valid = 0;</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;   <span class="keywordtype">id</span>-&gt;number.valid = 0;</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;   <span class="keywordtype">id</span>-&gt;subaddress.valid = 0;</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;}</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;</div><div class="line"><a name="l01896"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ab1c04d237cea67fefadaacc3f79497fa"> 1896</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#ab1c04d237cea67fefadaacc3f79497fa">ast_party_id_reset</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *<span class="keywordtype">id</span>)</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;{</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a5399dc7357197254794b990b263a2b7b">ast_party_id_free</a>(<span class="keywordtype">id</span>);</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a2126ac3bbc1a14f6ed5ccdfcbb851776">ast_party_id_init</a>(<span class="keywordtype">id</span>);</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;}</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;</div><div class="line"><a name="l01902"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ab7e42c3c758e44260f91a5dd6e017fdc"> 1902</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> <a class="code" href="../../d4/d28/channel_8c.html#ab7e42c3c758e44260f91a5dd6e017fdc">ast_party_id_merge</a>(struct <a class="code" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *base, <span class="keyword">struct </span><a class="code" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *overlay)</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;{</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> merged;</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;   merged = *base;</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;   <span class="keywordflow">if</span> (overlay-&gt;name.valid) {</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;      merged.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a> = overlay-&gt;name;</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;   }</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;   <span class="keywordflow">if</span> (overlay-&gt;number.valid) {</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;      merged.number = overlay-&gt;number;</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;   }</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;   <span class="keywordflow">if</span> (overlay-&gt;subaddress.valid) {</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;      merged.subaddress = overlay-&gt;subaddress;</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;   }</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;   <span class="comment">/* Note the actual structure is returned and not a pointer to it! */</span></div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;   <span class="keywordflow">return</span> merged;</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;}</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;</div><div class="line"><a name="l01920"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a71a13fe57a67ccea63da4e31b9d18794"> 1920</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a71a13fe57a67ccea63da4e31b9d18794">ast_party_id_merge_copy</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *dest, <span class="keyword">struct</span> <a class="code" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *base, <span class="keyword">struct</span> <a class="code" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *overlay)</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;{</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> merged;</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;   merged = <a class="code" href="../../d4/d28/channel_8c.html#ab7e42c3c758e44260f91a5dd6e017fdc">ast_party_id_merge</a>(base, overlay);</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#abbf5c9830dd3533f3a6d5d35f941effb">ast_party_id_copy</a>(dest, &amp;merged);</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;}</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;</div><div class="line"><a name="l01928"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a68c37ab24b0213bf4489d9fb30fd1517"> 1928</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a68c37ab24b0213bf4489d9fb30fd1517">ast_party_dialed_init</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/dd1/structast__party__dialed.html">ast_party_dialed</a> *init)</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;{</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;   init-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#a436a3700bd4ae24751d7fad4538466aa">number</a>.<a class="code" href="../../d1/dd1/structast__party__dialed.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;   init-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#a436a3700bd4ae24751d7fad4538466aa">number</a>.<a class="code" href="../../d1/dd1/structast__party__dialed.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a> = 0;<span class="comment">/* Unknown */</span></div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a40230121458bf94386b685b2e3270880">ast_party_subaddress_init</a>(&amp;init-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>);</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;   init-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#af1107092b9e5d7570605297a465ec766">transit_network_select</a> = 0;</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;}</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;</div><div class="line"><a name="l01936"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a957dc9b91c22dc15b2a41adb46f1d177"> 1936</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a957dc9b91c22dc15b2a41adb46f1d177">ast_party_dialed_copy</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/dd1/structast__party__dialed.html">ast_party_dialed</a> *dest, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d1/dd1/structast__party__dialed.html">ast_party_dialed</a> *src)</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;{</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;   <span class="keywordflow">if</span> (dest == src) {</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;      <span class="comment">/* Don&#39;t copy to self */</span></div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;   }</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(dest-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#a436a3700bd4ae24751d7fad4538466aa">number</a>.<a class="code" href="../../d1/dd1/structast__party__dialed.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;   dest-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#a436a3700bd4ae24751d7fad4538466aa">number</a>.<a class="code" href="../../d1/dd1/structast__party__dialed.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(src-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#a436a3700bd4ae24751d7fad4538466aa">number</a>.<a class="code" href="../../d1/dd1/structast__party__dialed.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;   dest-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#a436a3700bd4ae24751d7fad4538466aa">number</a>.<a class="code" href="../../d1/dd1/structast__party__dialed.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a> = src-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#a436a3700bd4ae24751d7fad4538466aa">number</a>.<a class="code" href="../../d1/dd1/structast__party__dialed.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a>;</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a005ef840127571c2018c6383c5fe18ac">ast_party_subaddress_copy</a>(&amp;dest-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>, &amp;src-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>);</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;   dest-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#af1107092b9e5d7570605297a465ec766">transit_network_select</a> = src-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#af1107092b9e5d7570605297a465ec766">transit_network_select</a>;</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;}</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;</div><div class="line"><a name="l01950"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a1514566e424a97422871903379c1a304"> 1950</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a1514566e424a97422871903379c1a304">ast_party_dialed_set_init</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/dd1/structast__party__dialed.html">ast_party_dialed</a> *init, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d1/dd1/structast__party__dialed.html">ast_party_dialed</a> *guide)</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;{</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;   init-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#a436a3700bd4ae24751d7fad4538466aa">number</a>.<a class="code" href="../../d1/dd1/structast__party__dialed.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;   init-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#a436a3700bd4ae24751d7fad4538466aa">number</a>.<a class="code" href="../../d1/dd1/structast__party__dialed.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a> = guide-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#a436a3700bd4ae24751d7fad4538466aa">number</a>.<a class="code" href="../../d1/dd1/structast__party__dialed.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a>;</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a377ded8d56517db5d4b991a44ae88843">ast_party_subaddress_set_init</a>(&amp;init-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>, &amp;guide-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>);</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;   init-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#af1107092b9e5d7570605297a465ec766">transit_network_select</a> = guide-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#af1107092b9e5d7570605297a465ec766">transit_network_select</a>;</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;}</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;</div><div class="line"><a name="l01958"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aa0e2e9dce49bf7ff2a3a497ecd0487cd"> 1958</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#aa0e2e9dce49bf7ff2a3a497ecd0487cd">ast_party_dialed_set</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/dd1/structast__party__dialed.html">ast_party_dialed</a> *dest, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d1/dd1/structast__party__dialed.html">ast_party_dialed</a> *src)</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;{</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;   <span class="keywordflow">if</span> (src-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#a436a3700bd4ae24751d7fad4538466aa">number</a>.<a class="code" href="../../d1/dd1/structast__party__dialed.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> &amp;&amp; src-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#a436a3700bd4ae24751d7fad4538466aa">number</a>.<a class="code" href="../../d1/dd1/structast__party__dialed.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> != dest-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#a436a3700bd4ae24751d7fad4538466aa">number</a>.<a class="code" href="../../d1/dd1/structast__party__dialed.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(dest-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#a436a3700bd4ae24751d7fad4538466aa">number</a>.<a class="code" href="../../d1/dd1/structast__party__dialed.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;      dest-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#a436a3700bd4ae24751d7fad4538466aa">number</a>.<a class="code" href="../../d1/dd1/structast__party__dialed.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(src-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#a436a3700bd4ae24751d7fad4538466aa">number</a>.<a class="code" href="../../d1/dd1/structast__party__dialed.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;   }</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;   dest-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#a436a3700bd4ae24751d7fad4538466aa">number</a>.<a class="code" href="../../d1/dd1/structast__party__dialed.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a> = src-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#a436a3700bd4ae24751d7fad4538466aa">number</a>.<a class="code" href="../../d1/dd1/structast__party__dialed.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a>;</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a55feca0a002a792f1cc680e79b3d2739">ast_party_subaddress_set</a>(&amp;dest-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>, &amp;src-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>);</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;   dest-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#af1107092b9e5d7570605297a465ec766">transit_network_select</a> = src-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#af1107092b9e5d7570605297a465ec766">transit_network_select</a>;</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;}</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;</div><div class="line"><a name="l01971"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a86593f04dfd477de657ae185d74a8e52"> 1971</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a86593f04dfd477de657ae185d74a8e52">ast_party_dialed_free</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/dd1/structast__party__dialed.html">ast_party_dialed</a> *doomed)</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;{</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(doomed-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#a436a3700bd4ae24751d7fad4538466aa">number</a>.<a class="code" href="../../d1/dd1/structast__party__dialed.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;   doomed-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#a436a3700bd4ae24751d7fad4538466aa">number</a>.<a class="code" href="../../d1/dd1/structast__party__dialed.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#adaa84a3e1b57ef0c912b57699fc0ddc9">ast_party_subaddress_free</a>(&amp;doomed-&gt;<a class="code" href="../../d1/dd1/structast__party__dialed.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>);</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;}</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;</div><div class="line"><a name="l01978"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#afdaf014aa17389de35cba4df16860b0d"> 1978</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#afdaf014aa17389de35cba4df16860b0d">ast_party_caller_init</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d77/structast__party__caller.html">ast_party_caller</a> *init)</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;{</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a2126ac3bbc1a14f6ed5ccdfcbb851776">ast_party_id_init</a>(&amp;init-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>);</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a2126ac3bbc1a14f6ed5ccdfcbb851776">ast_party_id_init</a>(&amp;init-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#aeeb8c05290fd113bd0d1a3129898fd49">ani</a>);</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a2126ac3bbc1a14f6ed5ccdfcbb851776">ast_party_id_init</a>(&amp;init-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>);</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;   init-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#ad3bdbbc7177d5ac309bc72f9fc3c4bee">ani2</a> = 0;</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;}</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;</div><div class="line"><a name="l01986"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a6a3c72ab1f5f7853b391f2c53fa292bd"> 1986</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a6a3c72ab1f5f7853b391f2c53fa292bd">ast_party_caller_copy</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d77/structast__party__caller.html">ast_party_caller</a> *dest, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/d77/structast__party__caller.html">ast_party_caller</a> *src)</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;{</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;   <span class="keywordflow">if</span> (dest == src) {</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;      <span class="comment">/* Don&#39;t copy to self */</span></div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;   }</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#abbf5c9830dd3533f3a6d5d35f941effb">ast_party_id_copy</a>(&amp;dest-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>, &amp;src-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>);</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#abbf5c9830dd3533f3a6d5d35f941effb">ast_party_id_copy</a>(&amp;dest-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#aeeb8c05290fd113bd0d1a3129898fd49">ani</a>, &amp;src-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#aeeb8c05290fd113bd0d1a3129898fd49">ani</a>);</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#abbf5c9830dd3533f3a6d5d35f941effb">ast_party_id_copy</a>(&amp;dest-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>, &amp;src-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>);</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;   dest-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#ad3bdbbc7177d5ac309bc72f9fc3c4bee">ani2</a> = src-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#ad3bdbbc7177d5ac309bc72f9fc3c4bee">ani2</a>;</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;}</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;</div><div class="line"><a name="l01999"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a84a85d871e634a86b2421ac9354b50c6"> 1999</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a84a85d871e634a86b2421ac9354b50c6">ast_party_caller_set_init</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d77/structast__party__caller.html">ast_party_caller</a> *init, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/d77/structast__party__caller.html">ast_party_caller</a> *guide)</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;{</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a856b99dd45a814e8eca602541936c484">ast_party_id_set_init</a>(&amp;init-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>, &amp;guide-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>);</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a856b99dd45a814e8eca602541936c484">ast_party_id_set_init</a>(&amp;init-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#aeeb8c05290fd113bd0d1a3129898fd49">ani</a>, &amp;guide-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#aeeb8c05290fd113bd0d1a3129898fd49">ani</a>);</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a856b99dd45a814e8eca602541936c484">ast_party_id_set_init</a>(&amp;init-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>, &amp;guide-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>);</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;   init-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#ad3bdbbc7177d5ac309bc72f9fc3c4bee">ani2</a> = guide-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#ad3bdbbc7177d5ac309bc72f9fc3c4bee">ani2</a>;</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;}</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;</div><div class="line"><a name="l02007"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a7a410e1008c361f6ea2bd89b41c4be5c"> 2007</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a7a410e1008c361f6ea2bd89b41c4be5c">ast_party_caller_set</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d77/structast__party__caller.html">ast_party_caller</a> *dest, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/d77/structast__party__caller.html">ast_party_caller</a> *src, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d7/d91/structast__set__party__caller.html">ast_set_party_caller</a> *<a class="code" href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a>)</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;{</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a59a1c2f9f692d5b3dbb213ae454f7718">ast_party_id_set</a>(&amp;dest-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>, &amp;src-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>, update ? &amp;update-&gt;<a class="code" href="../../d7/d91/structast__set__party__caller.html#aa7845dae2adff27b0da13c58b16ca805">id</a> : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a59a1c2f9f692d5b3dbb213ae454f7718">ast_party_id_set</a>(&amp;dest-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#aeeb8c05290fd113bd0d1a3129898fd49">ani</a>, &amp;src-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#aeeb8c05290fd113bd0d1a3129898fd49">ani</a>, update ? &amp;update-&gt;<a class="code" href="../../d7/d91/structast__set__party__caller.html#a273deff24b36cce96822975f2326ad7d">ani</a> : NULL);</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a59a1c2f9f692d5b3dbb213ae454f7718">ast_party_id_set</a>(&amp;dest-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>, &amp;src-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>, update ? &amp;update-&gt;<a class="code" href="../../d7/d91/structast__set__party__caller.html#a1ad0a1732e669f57e5b6e609affdd1db">priv</a> : NULL);</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;   dest-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#ad3bdbbc7177d5ac309bc72f9fc3c4bee">ani2</a> = src-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#ad3bdbbc7177d5ac309bc72f9fc3c4bee">ani2</a>;</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;}</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;</div><div class="line"><a name="l02015"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a940e8f4562c127096b0f4ba7d25387bd"> 2015</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a940e8f4562c127096b0f4ba7d25387bd">ast_party_caller_free</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d77/structast__party__caller.html">ast_party_caller</a> *doomed)</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;{</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a5399dc7357197254794b990b263a2b7b">ast_party_id_free</a>(&amp;doomed-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>);</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a5399dc7357197254794b990b263a2b7b">ast_party_id_free</a>(&amp;doomed-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#aeeb8c05290fd113bd0d1a3129898fd49">ani</a>);</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a5399dc7357197254794b990b263a2b7b">ast_party_id_free</a>(&amp;doomed-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>);</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;}</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;</div><div class="line"><a name="l02022"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#abf514b9d96a1821a33fec8c64ee4e26f"> 2022</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#abf514b9d96a1821a33fec8c64ee4e26f">ast_party_connected_line_init</a>(<span class="keyword">struct</span> <a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> *init)</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;{</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a2126ac3bbc1a14f6ed5ccdfcbb851776">ast_party_id_init</a>(&amp;init-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>);</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a2126ac3bbc1a14f6ed5ccdfcbb851776">ast_party_id_init</a>(&amp;init-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#aeeb8c05290fd113bd0d1a3129898fd49">ani</a>);</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a2126ac3bbc1a14f6ed5ccdfcbb851776">ast_party_id_init</a>(&amp;init-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>);</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;   init-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#ad3bdbbc7177d5ac309bc72f9fc3c4bee">ani2</a> = 0;</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;   init-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a07a87b2e6ed927503e2f95f119c9fc23">source</a> = <a class="code" href="../../de/d47/callerid_8h.html#a5cdbc47cd18e7f41d450e9caea186b1ba0906ea9abc50f46868edd0a1bdc66940">AST_CONNECTED_LINE_UPDATE_SOURCE_UNKNOWN</a>;</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;}</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;</div><div class="line"><a name="l02031"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a5d3c15fe1dffda82e6dc03ca7b26526a"> 2031</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a5d3c15fe1dffda82e6dc03ca7b26526a">ast_party_connected_line_copy</a>(<span class="keyword">struct</span> <a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> *dest, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> *src)</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;{</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;   <span class="keywordflow">if</span> (dest == src) {</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;      <span class="comment">/* Don&#39;t copy to self */</span></div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;   }</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#abbf5c9830dd3533f3a6d5d35f941effb">ast_party_id_copy</a>(&amp;dest-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>, &amp;src-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>);</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#abbf5c9830dd3533f3a6d5d35f941effb">ast_party_id_copy</a>(&amp;dest-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#aeeb8c05290fd113bd0d1a3129898fd49">ani</a>, &amp;src-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#aeeb8c05290fd113bd0d1a3129898fd49">ani</a>);</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#abbf5c9830dd3533f3a6d5d35f941effb">ast_party_id_copy</a>(&amp;dest-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>, &amp;src-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>);</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;   dest-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#ad3bdbbc7177d5ac309bc72f9fc3c4bee">ani2</a> = src-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#ad3bdbbc7177d5ac309bc72f9fc3c4bee">ani2</a>;</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;   dest-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a07a87b2e6ed927503e2f95f119c9fc23">source</a> = src-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a07a87b2e6ed927503e2f95f119c9fc23">source</a>;</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;}</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;</div><div class="line"><a name="l02045"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ade95e66d7c53181894de1d3569aee2b8"> 2045</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#ade95e66d7c53181894de1d3569aee2b8">ast_party_connected_line_set_init</a>(<span class="keyword">struct</span> <a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> *init, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> *guide)</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;{</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a856b99dd45a814e8eca602541936c484">ast_party_id_set_init</a>(&amp;init-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>, &amp;guide-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>);</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a856b99dd45a814e8eca602541936c484">ast_party_id_set_init</a>(&amp;init-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#aeeb8c05290fd113bd0d1a3129898fd49">ani</a>, &amp;guide-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#aeeb8c05290fd113bd0d1a3129898fd49">ani</a>);</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a856b99dd45a814e8eca602541936c484">ast_party_id_set_init</a>(&amp;init-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>, &amp;guide-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>);</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;   init-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#ad3bdbbc7177d5ac309bc72f9fc3c4bee">ani2</a> = guide-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#ad3bdbbc7177d5ac309bc72f9fc3c4bee">ani2</a>;</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;   init-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a07a87b2e6ed927503e2f95f119c9fc23">source</a> = guide-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a07a87b2e6ed927503e2f95f119c9fc23">source</a>;</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;}</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;</div><div class="line"><a name="l02054"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a65d86fdffdd9c52b17b79b069cd0c6cb"> 2054</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a65d86fdffdd9c52b17b79b069cd0c6cb">ast_party_connected_line_set</a>(<span class="keyword">struct</span> <a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> *dest, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> *src, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/dc9/structast__set__party__connected__line.html">ast_set_party_connected_line</a> *<a class="code" href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a>)</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;{</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a59a1c2f9f692d5b3dbb213ae454f7718">ast_party_id_set</a>(&amp;dest-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>, &amp;src-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>, update ? &amp;update-&gt;<a class="code" href="../../d4/dc9/structast__set__party__connected__line.html#aa7845dae2adff27b0da13c58b16ca805">id</a> : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a59a1c2f9f692d5b3dbb213ae454f7718">ast_party_id_set</a>(&amp;dest-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#aeeb8c05290fd113bd0d1a3129898fd49">ani</a>, &amp;src-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#aeeb8c05290fd113bd0d1a3129898fd49">ani</a>, update ? &amp;update-&gt;<a class="code" href="../../d4/dc9/structast__set__party__connected__line.html#a273deff24b36cce96822975f2326ad7d">ani</a> : NULL);</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a59a1c2f9f692d5b3dbb213ae454f7718">ast_party_id_set</a>(&amp;dest-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>, &amp;src-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>, update ? &amp;update-&gt;<a class="code" href="../../d4/dc9/structast__set__party__connected__line.html#a1ad0a1732e669f57e5b6e609affdd1db">priv</a> : NULL);</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;   dest-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#ad3bdbbc7177d5ac309bc72f9fc3c4bee">ani2</a> = src-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#ad3bdbbc7177d5ac309bc72f9fc3c4bee">ani2</a>;</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;   dest-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a07a87b2e6ed927503e2f95f119c9fc23">source</a> = src-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a07a87b2e6ed927503e2f95f119c9fc23">source</a>;</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;}</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;</div><div class="line"><a name="l02063"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a7e0d09c05bb1927d56134b33ed784dfd"> 2063</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a7e0d09c05bb1927d56134b33ed784dfd">ast_party_connected_line_collect_caller</a>(<span class="keyword">struct</span> <a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a5023e29d4234076952bfecfff178b566">connected</a>, <span class="keyword">struct</span> <a class="code" href="../../d4/d77/structast__party__caller.html">ast_party_caller</a> *caller)</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;{</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;   connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a> = caller-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>;</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;   connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#aeeb8c05290fd113bd0d1a3129898fd49">ani</a> = caller-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#aeeb8c05290fd113bd0d1a3129898fd49">ani</a>;</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;   connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a> = caller-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>;</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;   connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#ad3bdbbc7177d5ac309bc72f9fc3c4bee">ani2</a> = caller-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#ad3bdbbc7177d5ac309bc72f9fc3c4bee">ani2</a>;</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;   connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a07a87b2e6ed927503e2f95f119c9fc23">source</a> = <a class="code" href="../../de/d47/callerid_8h.html#a5cdbc47cd18e7f41d450e9caea186b1ba0906ea9abc50f46868edd0a1bdc66940">AST_CONNECTED_LINE_UPDATE_SOURCE_UNKNOWN</a>;</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;}</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;</div><div class="line"><a name="l02072"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a40fc421536e02d30fecaa51a255b4144"> 2072</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a40fc421536e02d30fecaa51a255b4144">ast_party_connected_line_free</a>(<span class="keyword">struct</span> <a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> *doomed)</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;{</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a5399dc7357197254794b990b263a2b7b">ast_party_id_free</a>(&amp;doomed-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>);</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a5399dc7357197254794b990b263a2b7b">ast_party_id_free</a>(&amp;doomed-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#aeeb8c05290fd113bd0d1a3129898fd49">ani</a>);</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a5399dc7357197254794b990b263a2b7b">ast_party_id_free</a>(&amp;doomed-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>);</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;}</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;</div><div class="line"><a name="l02079"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a81c6495eb2b18bfd179ca7282f77e66e"> 2079</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a81c6495eb2b18bfd179ca7282f77e66e">ast_party_redirecting_reason_init</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/dee/structast__party__redirecting__reason.html">ast_party_redirecting_reason</a> *init)</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;{</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;   init-&gt;<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;   init-&gt;<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#a45a5b7c00a796a23f01673cef1dbe0a9">code</a> = <a class="code" href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169a1cf63751ca0805657b57f0ca36069f41">AST_REDIRECTING_REASON_UNKNOWN</a>;</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;}</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;</div><div class="line"><a name="l02085"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a0b705ba9b5df5720c20172876a67a2ad"> 2085</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a0b705ba9b5df5720c20172876a67a2ad">ast_party_redirecting_reason_copy</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/dee/structast__party__redirecting__reason.html">ast_party_redirecting_reason</a> *dest, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d1/dee/structast__party__redirecting__reason.html">ast_party_redirecting_reason</a> *src)</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;{</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;   <span class="keywordflow">if</span> (dest == src) {</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;   }</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(dest-&gt;<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;   dest-&gt;<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(src-&gt;<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;   dest-&gt;<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#a45a5b7c00a796a23f01673cef1dbe0a9">code</a> = src-&gt;<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#a45a5b7c00a796a23f01673cef1dbe0a9">code</a>;</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;}</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;</div><div class="line"><a name="l02096"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a7842ee71c0bc94136702ae1517a6ba2c"> 2096</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a7842ee71c0bc94136702ae1517a6ba2c">ast_party_redirecting_reason_set_init</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/dee/structast__party__redirecting__reason.html">ast_party_redirecting_reason</a> *init, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d1/dee/structast__party__redirecting__reason.html">ast_party_redirecting_reason</a> *guide)</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;{</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;   init-&gt;<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;   init-&gt;<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#a45a5b7c00a796a23f01673cef1dbe0a9">code</a> = guide-&gt;<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#a45a5b7c00a796a23f01673cef1dbe0a9">code</a>;</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;}</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;</div><div class="line"><a name="l02102"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a6c7bcf106faf8924034c45a1164be05f"> 2102</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a6c7bcf106faf8924034c45a1164be05f">ast_party_redirecting_reason_set</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/dee/structast__party__redirecting__reason.html">ast_party_redirecting_reason</a> *dest, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d1/dee/structast__party__redirecting__reason.html">ast_party_redirecting_reason</a> *src)</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;{</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;   <span class="keywordflow">if</span> (dest == src) {</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;   }</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;   <span class="keywordflow">if</span> (src-&gt;<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> &amp;&amp; src-&gt;<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> != dest-&gt;<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(dest-&gt;<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;      dest-&gt;<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(src-&gt;<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;   }</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;   dest-&gt;<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#a45a5b7c00a796a23f01673cef1dbe0a9">code</a> = src-&gt;<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#a45a5b7c00a796a23f01673cef1dbe0a9">code</a>;</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;}</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;</div><div class="line"><a name="l02116"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#afc48c9639130c291aa835543e0ae1398"> 2116</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#afc48c9639130c291aa835543e0ae1398">ast_party_redirecting_reason_free</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/dee/structast__party__redirecting__reason.html">ast_party_redirecting_reason</a> *doomed)</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;{</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(doomed-&gt;<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;}</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;</div><div class="line"><a name="l02122"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a1a5760823cd16fd0343e489efd9c8f89"> 2122</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a1a5760823cd16fd0343e489efd9c8f89">ast_party_redirecting_init</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d44/structast__party__redirecting.html">ast_party_redirecting</a> *init)</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;{</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a2126ac3bbc1a14f6ed5ccdfcbb851776">ast_party_id_init</a>(&amp;init-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>);</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a2126ac3bbc1a14f6ed5ccdfcbb851776">ast_party_id_init</a>(&amp;init-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>);</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a2126ac3bbc1a14f6ed5ccdfcbb851776">ast_party_id_init</a>(&amp;init-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>);</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a2126ac3bbc1a14f6ed5ccdfcbb851776">ast_party_id_init</a>(&amp;init-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>);</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a2126ac3bbc1a14f6ed5ccdfcbb851776">ast_party_id_init</a>(&amp;init-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>);</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a2126ac3bbc1a14f6ed5ccdfcbb851776">ast_party_id_init</a>(&amp;init-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>);</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a81c6495eb2b18bfd179ca7282f77e66e">ast_party_redirecting_reason_init</a>(&amp;init-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#aa961ad9bce0cf7679c5d938519ff1885">reason</a>);</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a81c6495eb2b18bfd179ca7282f77e66e">ast_party_redirecting_reason_init</a>(&amp;init-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#aa17ec85399145e14c9f08d81a2261231">orig_reason</a>);</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;   init-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a> = 0;</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;}</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;</div><div class="line"><a name="l02135"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#af6f0b2102f29f86914e10a7787f0d536"> 2135</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#af6f0b2102f29f86914e10a7787f0d536">ast_party_redirecting_copy</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d44/structast__party__redirecting.html">ast_party_redirecting</a> *dest, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/d44/structast__party__redirecting.html">ast_party_redirecting</a> *src)</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;{</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;   <span class="keywordflow">if</span> (dest == src) {</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;      <span class="comment">/* Don&#39;t copy to self */</span></div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;   }</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#abbf5c9830dd3533f3a6d5d35f941effb">ast_party_id_copy</a>(&amp;dest-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>, &amp;src-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>);</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#abbf5c9830dd3533f3a6d5d35f941effb">ast_party_id_copy</a>(&amp;dest-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>, &amp;src-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>);</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#abbf5c9830dd3533f3a6d5d35f941effb">ast_party_id_copy</a>(&amp;dest-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>, &amp;src-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>);</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#abbf5c9830dd3533f3a6d5d35f941effb">ast_party_id_copy</a>(&amp;dest-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>, &amp;src-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>);</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#abbf5c9830dd3533f3a6d5d35f941effb">ast_party_id_copy</a>(&amp;dest-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>, &amp;src-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>);</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#abbf5c9830dd3533f3a6d5d35f941effb">ast_party_id_copy</a>(&amp;dest-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>, &amp;src-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>);</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a0b705ba9b5df5720c20172876a67a2ad">ast_party_redirecting_reason_copy</a>(&amp;dest-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#aa961ad9bce0cf7679c5d938519ff1885">reason</a>, &amp;src-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#aa961ad9bce0cf7679c5d938519ff1885">reason</a>);</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a0b705ba9b5df5720c20172876a67a2ad">ast_party_redirecting_reason_copy</a>(&amp;dest-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#aa17ec85399145e14c9f08d81a2261231">orig_reason</a>, &amp;src-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#aa17ec85399145e14c9f08d81a2261231">orig_reason</a>);</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;   dest-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a> = src-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a>;</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;}</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;</div><div class="line"><a name="l02153"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8ec95c9df838fdfbb514995efb96bf82"> 2153</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a8ec95c9df838fdfbb514995efb96bf82">ast_party_redirecting_set_init</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d44/structast__party__redirecting.html">ast_party_redirecting</a> *init, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/d44/structast__party__redirecting.html">ast_party_redirecting</a> *guide)</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;{</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a856b99dd45a814e8eca602541936c484">ast_party_id_set_init</a>(&amp;init-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>, &amp;guide-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>);</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a856b99dd45a814e8eca602541936c484">ast_party_id_set_init</a>(&amp;init-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>, &amp;guide-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>);</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a856b99dd45a814e8eca602541936c484">ast_party_id_set_init</a>(&amp;init-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>, &amp;guide-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>);</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a856b99dd45a814e8eca602541936c484">ast_party_id_set_init</a>(&amp;init-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>, &amp;guide-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>);</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a856b99dd45a814e8eca602541936c484">ast_party_id_set_init</a>(&amp;init-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>, &amp;guide-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>);</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a856b99dd45a814e8eca602541936c484">ast_party_id_set_init</a>(&amp;init-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>, &amp;guide-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>);</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a7842ee71c0bc94136702ae1517a6ba2c">ast_party_redirecting_reason_set_init</a>(&amp;init-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#aa961ad9bce0cf7679c5d938519ff1885">reason</a>, &amp;guide-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#aa961ad9bce0cf7679c5d938519ff1885">reason</a>);</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a7842ee71c0bc94136702ae1517a6ba2c">ast_party_redirecting_reason_set_init</a>(&amp;init-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#aa17ec85399145e14c9f08d81a2261231">orig_reason</a>, &amp;guide-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#aa17ec85399145e14c9f08d81a2261231">orig_reason</a>);</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;   init-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a> = guide-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a>;</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;}</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;</div><div class="line"><a name="l02166"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a4a3691a88a747dd6ceec6cc17628402f"> 2166</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a4a3691a88a747dd6ceec6cc17628402f">ast_party_redirecting_set</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d44/structast__party__redirecting.html">ast_party_redirecting</a> *dest, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/d44/structast__party__redirecting.html">ast_party_redirecting</a> *src, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../de/df8/structast__set__party__redirecting.html">ast_set_party_redirecting</a> *<a class="code" href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a>)</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;{</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a59a1c2f9f692d5b3dbb213ae454f7718">ast_party_id_set</a>(&amp;dest-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>, &amp;src-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>, update ? &amp;update-&gt;<a class="code" href="../../de/df8/structast__set__party__redirecting.html#aa15d132882ae125c346da6ab687a8d59">orig</a> : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a59a1c2f9f692d5b3dbb213ae454f7718">ast_party_id_set</a>(&amp;dest-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>, &amp;src-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>, update ? &amp;update-&gt;<a class="code" href="../../de/df8/structast__set__party__redirecting.html#a45899db729b8fd0b9193505a58b3baa8">from</a> : NULL);</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a59a1c2f9f692d5b3dbb213ae454f7718">ast_party_id_set</a>(&amp;dest-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>, &amp;src-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>, update ? &amp;update-&gt;<a class="code" href="../../de/df8/structast__set__party__redirecting.html#afe0af5d5745eaa2d86a2d34f6f36d53e">to</a> : NULL);</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a59a1c2f9f692d5b3dbb213ae454f7718">ast_party_id_set</a>(&amp;dest-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>, &amp;src-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>, update ? &amp;update-&gt;<a class="code" href="../../de/df8/structast__set__party__redirecting.html#a54ed2019cbce2f838acaba40717b787b">priv_orig</a> : NULL);</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a59a1c2f9f692d5b3dbb213ae454f7718">ast_party_id_set</a>(&amp;dest-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>, &amp;src-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>, update ? &amp;update-&gt;<a class="code" href="../../de/df8/structast__set__party__redirecting.html#a68de1269d7d668b5fc16c5247f65f9ac">priv_from</a> : NULL);</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a59a1c2f9f692d5b3dbb213ae454f7718">ast_party_id_set</a>(&amp;dest-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>, &amp;src-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>, update ? &amp;update-&gt;<a class="code" href="../../de/df8/structast__set__party__redirecting.html#a08184154ded9cea4d8c2b6667c69596e">priv_to</a> : NULL);</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a6c7bcf106faf8924034c45a1164be05f">ast_party_redirecting_reason_set</a>(&amp;dest-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#aa961ad9bce0cf7679c5d938519ff1885">reason</a>, &amp;src-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#aa961ad9bce0cf7679c5d938519ff1885">reason</a>);</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a6c7bcf106faf8924034c45a1164be05f">ast_party_redirecting_reason_set</a>(&amp;dest-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#aa17ec85399145e14c9f08d81a2261231">orig_reason</a>, &amp;src-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#aa17ec85399145e14c9f08d81a2261231">orig_reason</a>);</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;   dest-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a> = src-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a>;</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;}</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;</div><div class="line"><a name="l02179"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ac8bce0bf79829c59a7671c4eff83a31f"> 2179</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#ac8bce0bf79829c59a7671c4eff83a31f">ast_party_redirecting_free</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d44/structast__party__redirecting.html">ast_party_redirecting</a> *doomed)</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;{</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a5399dc7357197254794b990b263a2b7b">ast_party_id_free</a>(&amp;doomed-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>);</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a5399dc7357197254794b990b263a2b7b">ast_party_id_free</a>(&amp;doomed-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>);</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a5399dc7357197254794b990b263a2b7b">ast_party_id_free</a>(&amp;doomed-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>);</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a5399dc7357197254794b990b263a2b7b">ast_party_id_free</a>(&amp;doomed-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>);</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a5399dc7357197254794b990b263a2b7b">ast_party_id_free</a>(&amp;doomed-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>);</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a5399dc7357197254794b990b263a2b7b">ast_party_id_free</a>(&amp;doomed-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>);</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#afc48c9639130c291aa835543e0ae1398">ast_party_redirecting_reason_free</a>(&amp;doomed-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#aa961ad9bce0cf7679c5d938519ff1885">reason</a>);</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#afc48c9639130c291aa835543e0ae1398">ast_party_redirecting_reason_free</a>(&amp;doomed-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#aa17ec85399145e14c9f08d81a2261231">orig_reason</a>);</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;}</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;<span class="comment">/*! \brief Free a channel structure */</span></div><div class="line"><a name="l02192"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ad08e17bd1de822faef09173930f295b1"> 2192</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#ad08e17bd1de822faef09173930f295b1">ast_channel_destructor</a>(<span class="keywordtype">void</span> *obj)</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;{</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan = obj;</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d7d/structast__var__t.html">ast_var_t</a> *vardata;</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f;</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/de6/structvarshead.html">varshead</a> *headp;</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *datastore;</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;   <span class="keywordtype">char</span> device_name[<a class="code" href="../../d5/d7b/channel_8h.html#ab57c278099ea5f8d7cedbb41eba58b56">AST_CHANNEL_NAME</a>];</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6db44a7e26f0bc42801fc7225817c6a1">ast_callid</a> callid;</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Channel %p &#39;%s&#39; destroying\n&quot;</span>, chan, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;   <span class="comment">/* Stop monitoring */</span></div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)) {</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#abc0b62e2d888c1814c531d5e2c456e49">stop</a>(chan, 0);</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;   }</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;   <span class="comment">/* If there is native format music-on-hold state, free it */</span></div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a218345ed34c8f51672b579aac2d1df5f">ast_channel_music_state</a>(chan)) {</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a2bfbbbb8be5c8a13ec5a054bbc9f25b1">ast_moh_cleanup</a>(chan);</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;   }</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a4d655002901faaf06a9a891f17dcff83">ast_pbx_hangup_handler_destroy</a>(chan);</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;   <span class="comment">/* Things that may possibly raise Stasis messages shouldn&#39;t occur after this point */</span></div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a67415c9cab64152013f660deee6acef6">AST_FLAG_DEAD</a>);</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/de4/channel__internal_8h.html#a37e976e7736157fa23417a6648584186">ast_channel_internal_is_finalized</a>(chan)) {</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;      <span class="comment">/* A channel snapshot should not be in the process of being staged now. */</span></div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(!<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a337e8daae5bac4e9e0601410e1e8577f">AST_FLAG_SNAPSHOT_STAGE</a>));</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga83e4b9493ba37c5052e722fad015503b">ast_channel_publish_final_snapshot</a>(chan);</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;   }</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;   <span class="comment">/* Get rid of each of the data stores on the channel */</span></div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;   <span class="keywordflow">while</span> ((datastore = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aae56765bab2eed7bd11d8dca29b2975c">ast_channel_datastores</a>(chan), <a class="code" href="../../d3/d96/structentry.html">entry</a>)))</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;      <span class="comment">/* Free the data store */</span></div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;      <a class="code" href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14">ast_datastore_free</a>(datastore);</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;   <span class="comment">/* While the channel is locked, take the reference to its callid while we tear down the call. */</span></div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;   callid = <a class="code" href="../../d5/d7b/channel_8h.html#a6c2c406bdebd477029e61774cc300abd">ast_channel_callid</a>(chan);</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a26f2d5034ef36d4d140781529f1f6f6b">ast_channel_callid_cleanup</a>(chan);</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;   <span class="comment">/* Lock and unlock the channel just to be sure nobody has it locked still</span></div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;<span class="comment">      due to a reference that was stored in a datastore. (i.e. app_chanspy) */</span></div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(chan)) {</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#acc9016dd0252e330dccb25552afd3b43">ast_log_callid</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, callid, <span class="stringliteral">&quot;Channel &#39;%s&#39; may not have been hung up properly\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(chan));</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;   }</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#acd3470664b6a002c9a379a69ddad4cb2">ast_channel_sched</a>(chan)) {</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;      <a class="code" href="../../d7/d00/sched_8h.html#a862f869d056628b38e09042f21b54413">ast_sched_context_destroy</a>(<a class="code" href="../../d5/d7b/channel_8h.html#acd3470664b6a002c9a379a69ddad4cb2">ast_channel_sched</a>(chan));</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;   }</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/de4/channel__internal_8h.html#a37e976e7736157fa23417a6648584186">ast_channel_internal_is_finalized</a>(chan)) {</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;      <span class="keywordtype">char</span> *dashptr;</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(device_name, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), <span class="keyword">sizeof</span>(device_name));</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;      <span class="keywordflow">if</span> ((dashptr = strrchr(device_name, <span class="charliteral">&#39;-&#39;</span>))) {</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;         *dashptr = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;      }</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;      device_name[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;   }</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;   <span class="comment">/* Free translators */</span></div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a6b4548259e61f691c654aed0025e5502">ast_channel_readtrans</a>(chan))</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;      <a class="code" href="../../db/d39/translate_8h.html#a8f767bf5c2095f182e7cbaa73e391207">ast_translator_free_path</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a6b4548259e61f691c654aed0025e5502">ast_channel_readtrans</a>(chan));</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#ab5c41a2130385cadf78c64cacea7e3f9">ast_channel_writetrans</a>(chan))</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;      <a class="code" href="../../db/d39/translate_8h.html#a8f767bf5c2095f182e7cbaa73e391207">ast_translator_free_path</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ab5c41a2130385cadf78c64cacea7e3f9">ast_channel_writetrans</a>(chan));</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a488b7d6f7488bedc53be45d4ef4471c9">ast_channel_pbx</a>(chan))</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#acc9016dd0252e330dccb25552afd3b43">ast_log_callid</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, callid, <span class="stringliteral">&quot;PBX may not have been terminated properly on &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;   <span class="comment">/* Free formats */</span></div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a280e1c50d97a83e4e3053dc1fb9597eb">ast_channel_set_oldwriteformat</a>(chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a921a2d48faa9ed99a59d33e7aefa7888">ast_channel_set_rawreadformat</a>(chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aa2df58e77751b741b6891afe210b5b8c">ast_channel_set_rawwriteformat</a>(chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ab3786cbbff7a03241fc75dafa0c8a1c1">ast_channel_set_readformat</a>(chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#afac6d7d115c1edfe3ad8a8c7fa5d59d1">ast_channel_set_writeformat</a>(chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a86593f04dfd477de657ae185d74a8e52">ast_party_dialed_free</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a63732831df3e7a0999b0900ec85c626a">ast_channel_dialed</a>(chan));</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a940e8f4562c127096b0f4ba7d25387bd">ast_party_caller_free</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan));</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a40fc421536e02d30fecaa51a255b4144">ast_party_connected_line_free</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(chan));</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a40fc421536e02d30fecaa51a255b4144">ast_party_connected_line_free</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad3ec5f6d1ca18a54981a446176c9af1d">ast_channel_connected_indicated</a>(chan));</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#ac8bce0bf79829c59a7671c4eff83a31f">ast_party_redirecting_free</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(chan));</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;   <span class="comment">/* Close pipes if appropriate */</span></div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a420613770272535a0234c2bc370514b7">ast_channel_internal_alertpipe_close</a>(chan);</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a1e930e0e331c7e82a1bf297addfc5a34">ast_channel_timer</a>(chan)) {</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;      <a class="code" href="../../db/d41/timing_8h.html#a2a5968baf9962dedeeda855fd5ed9c75">ast_timer_close</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1e930e0e331c7e82a1bf297addfc5a34">ast_channel_timer</a>(chan));</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a907e3b6538d521f90e402efe3c522b6d">ast_channel_timer_set</a>(chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;   }</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;   <span class="keywordflow">while</span> ((f = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad89ab3133d87a496f63da917148d02be">ast_channel_readq</a>(chan), <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>)))</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;      <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;   <span class="comment">/* loop over the variables list, freeing all data and deleting list items */</span></div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;   <span class="comment">/* no need to lock the list, as the channel is already locked */</span></div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;   headp = <a class="code" href="../../d5/d7b/channel_8h.html#add6255866ea1651a90cf70d963c4920a">ast_channel_varshead</a>(chan);</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;   <span class="keywordflow">while</span> ((vardata = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(headp, entries)))</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;      <a class="code" href="../../d9/de7/chanvars_8h.html#ae19fa022349aa0481f982ccced85d7ba">ast_var_delete</a>(vardata);</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#add0f96b4b815205f528f5248ccb3d515">ast_app_group_discard</a>(chan);</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;   <span class="comment">/* Destroy the jitterbuffer */</span></div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;   <a class="code" href="../../dc/d14/abstract__jb_8h.html#aa94fd3c228854f8ac519da8218d5c032">ast_jb_destroy</a>(chan);</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#aba3f5f98138ce51792c44388a8d3ddcc">ast_channel_cdr</a>(chan)) {</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;      <a class="code" href="../../dc/d07/cdr_8h.html#a28b931d52c71271afd601186db95fec2">ast_cdr_free</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aba3f5f98138ce51792c44388a8d3ddcc">ast_channel_cdr</a>(chan));</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ac7fb938d952d8a97cbfcc0897d6656e1">ast_channel_cdr_set</a>(chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;   }</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a673d53e20b8ac75477469442f51314e1">ast_channel_zone</a>(chan)) {</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ad9a1e9a11b74fd9adb280df1a6bc251f">ast_channel_zone_set</a>(chan, <a class="code" href="../../d2/d0f/indications_8h.html#ae4e735983064b7fe22ffc0fc046d700e">ast_tone_zone_unref</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a673d53e20b8ac75477469442f51314e1">ast_channel_zone</a>(chan)));</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;   }</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;   <a class="code" href="../../d5/de4/channel__internal_8h.html#a83ba19e491ec5789d402d44ce4cc7d91">ast_channel_internal_cleanup</a>(chan);</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;   <span class="keywordflow">if</span> (device_name[0]) {</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;<span class="comment">       * We have a device name to notify of a new state.</span></div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;<span class="comment">       *</span></div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;<span class="comment">       * Queue an unknown state, because, while we know that this particular</span></div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;<span class="comment">       * instance is dead, we don&#39;t know the state of all other possible</span></div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;<span class="comment">       * instances.</span></div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;      <a class="code" href="../../da/da2/devicestate_8h.html#acb74555f2a796e00cd26bd866c52e7b6">ast_devstate_changed_literal</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a>, (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a29df923fcf5fe2c681eaa2114f1c41a6">AST_FLAG_DISABLE_DEVSTATE_CACHE</a>) ? <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a4dbd4bd0c7bf0b9d8c3c2c800d39cfc1">AST_DEVSTATE_NOT_CACHABLE</a> : <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a>), device_name);</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;   }</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a3c9c29fb2bc2b715fee335c1ffa50449">ast_channel_nativeformats_set</a>(chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aac93557ad0a1e7bcf861c208e1d8fdc4">ast_channel_named_callgroups_set</a>(chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a0d78cf79bf535beab2c8928f68632c2e">ast_channel_named_pickupgroups_set</a>(chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;<a class="code" href="../../d4/d28/channel_8c.html#a5cb129ce1d580dbb22ec9573dcb62f7f">chancount</a>, -1);</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;}</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;<span class="comment">/*! \brief Free a dummy channel structure */</span></div><div class="line"><a name="l02338"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#afff08c156c66142b562578cf64722575"> 2338</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#afff08c156c66142b562578cf64722575">ast_dummy_channel_destructor</a>(<span class="keywordtype">void</span> *obj)</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;{</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan = obj;</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *datastore;</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d7d/structast__var__t.html">ast_var_t</a> *vardata;</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/de6/structvarshead.html">varshead</a> *headp;</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a4d655002901faaf06a9a891f17dcff83">ast_pbx_hangup_handler_destroy</a>(chan);</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;   <span class="comment">/* Get rid of each of the data stores on the channel */</span></div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;   <span class="keywordflow">while</span> ((datastore = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aae56765bab2eed7bd11d8dca29b2975c">ast_channel_datastores</a>(chan), <a class="code" href="../../d3/d96/structentry.html">entry</a>))) {</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;      <span class="comment">/* Free the data store */</span></div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;      <a class="code" href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14">ast_datastore_free</a>(datastore);</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;   }</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a86593f04dfd477de657ae185d74a8e52">ast_party_dialed_free</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a63732831df3e7a0999b0900ec85c626a">ast_channel_dialed</a>(chan));</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a940e8f4562c127096b0f4ba7d25387bd">ast_party_caller_free</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan));</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a40fc421536e02d30fecaa51a255b4144">ast_party_connected_line_free</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(chan));</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a40fc421536e02d30fecaa51a255b4144">ast_party_connected_line_free</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad3ec5f6d1ca18a54981a446176c9af1d">ast_channel_connected_indicated</a>(chan));</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#ac8bce0bf79829c59a7671c4eff83a31f">ast_party_redirecting_free</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(chan));</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;   <span class="comment">/* loop over the variables list, freeing all data and deleting list items */</span></div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;   <span class="comment">/* no need to lock the list, as the channel is already locked */</span></div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;   headp = <a class="code" href="../../d5/d7b/channel_8h.html#add6255866ea1651a90cf70d963c4920a">ast_channel_varshead</a>(chan);</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;   <span class="keywordflow">while</span> ((vardata = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(headp, entries)))</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;      <a class="code" href="../../d9/de7/chanvars_8h.html#ae19fa022349aa0481f982ccced85d7ba">ast_var_delete</a>(vardata);</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#aba3f5f98138ce51792c44388a8d3ddcc">ast_channel_cdr</a>(chan)) {</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;      <a class="code" href="../../dc/d07/cdr_8h.html#a28b931d52c71271afd601186db95fec2">ast_cdr_free</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aba3f5f98138ce51792c44388a8d3ddcc">ast_channel_cdr</a>(chan));</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ac7fb938d952d8a97cbfcc0897d6656e1">ast_channel_cdr_set</a>(chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;   }</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;   <a class="code" href="../../d5/de4/channel__internal_8h.html#a83ba19e491ec5789d402d44ce4cc7d91">ast_channel_internal_cleanup</a>(chan);</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;}</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;</div><div class="line"><a name="l02373"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a6ce892974f59537bda03a71319b452e2"> 2373</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a6ce892974f59537bda03a71319b452e2">ast_channel_datastore_inherit</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *from, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *to)</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;{</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *datastore = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *datastore2;</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aae56765bab2eed7bd11d8dca29b2975c">ast_channel_datastores</a>(from), datastore, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;      <span class="keywordflow">if</span> (datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a79d869daa2e63a92b3e5f542446031bb">inheritance</a> &gt; 0) {</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;         datastore2 = <a class="code" href="../../d9/db6/datastore_8h.html#a666afb07fd77d50782cc10f83e029159">ast_datastore_alloc</a>(datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a03ea21247b5d39b165343431b44131f1">info</a>, datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a2daadcdbac635c83b7bfc6375b4c9be4">uid</a>);</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;         <span class="keywordflow">if</span> (datastore2) {</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;            datastore2-&gt;data = datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a03ea21247b5d39b165343431b44131f1">info</a>-&gt;<a class="code" href="../../d9/dfb/structast__datastore__info.html#aaa9f35a5b8f54b82195bd7766ac984a8">duplicate</a> ? datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a03ea21247b5d39b165343431b44131f1">info</a>-&gt;<a class="code" href="../../d9/dfb/structast__datastore__info.html#aaa9f35a5b8f54b82195bd7766ac984a8">duplicate</a>(datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>) : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;            datastore2-&gt;inheritance = datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a79d869daa2e63a92b3e5f542446031bb">inheritance</a> == <a class="code" href="../../d5/d7b/channel_8h.html#a3a32e3014998d0066281c4dd8e278ae9">DATASTORE_INHERIT_FOREVER</a> ? <a class="code" href="../../d5/d7b/channel_8h.html#a3a32e3014998d0066281c4dd8e278ae9">DATASTORE_INHERIT_FOREVER</a> : datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a79d869daa2e63a92b3e5f542446031bb">inheritance</a> - 1;</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aae56765bab2eed7bd11d8dca29b2975c">ast_channel_datastores</a>(to), datastore2, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;         }</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;      }</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;   }</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;}</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;</div><div class="line"><a name="l02390"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a1ed3e98d33d5587948a0e2ef67a81f52"> 2390</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a1ed3e98d33d5587948a0e2ef67a81f52">ast_channel_datastore_add</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *datastore)</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;{</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aae56765bab2eed7bd11d8dca29b2975c">ast_channel_datastores</a>(chan), datastore, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;}</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;</div><div class="line"><a name="l02399"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a1ff1c62b6d50823da93a920575c9c0c9"> 2399</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a1ff1c62b6d50823da93a920575c9c0c9">ast_channel_datastore_remove</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *datastore)</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;{</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../df/d90/linkedlists_8h.html#aa36e72b77f1b80881cd0a9fcca66ce19">AST_LIST_REMOVE</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aae56765bab2eed7bd11d8dca29b2975c">ast_channel_datastores</a>(chan), datastore, <a class="code" href="../../d3/d96/structentry.html">entry</a>) ? 0 : -1;</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;}</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;</div><div class="line"><a name="l02404"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aad1e09cd7c79237d05cffb45d6cdfd7c"> 2404</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *<a class="code" href="../../d4/d28/channel_8c.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a> *<a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d4/d5d/structast__datastore.html#a2daadcdbac635c83b7bfc6375b4c9be4">uid</a>)</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;{</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *datastore = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;   <span class="keywordflow">if</span> (info == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aae56765bab2eed7bd11d8dca29b2975c">ast_channel_datastores</a>(chan), datastore, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;      <span class="keywordflow">if</span> (datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a03ea21247b5d39b165343431b44131f1">info</a> != info) {</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;      }</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;      <span class="keywordflow">if</span> (uid == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;         <span class="comment">/* matched by type only */</span></div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;      }</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;      <span class="keywordflow">if</span> ((datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a2daadcdbac635c83b7bfc6375b4c9be4">uid</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) &amp;&amp; !strcasecmp(uid, datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a2daadcdbac635c83b7bfc6375b4c9be4">uid</a>)) {</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;         <span class="comment">/* Matched by type AND uid */</span></div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;      }</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;   }</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;   <span class="keywordflow">return</span> datastore;</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;}</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;<span class="comment">/*! Set the file descriptor on the channel */</span></div><div class="line"><a name="l02431"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aca37ca2f3d55a223d26617329ed48a3e"> 2431</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#aca37ca2f3d55a223d26617329ed48a3e">ast_channel_set_fd</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">int</span> which, <span class="keywordtype">int</span> fd)</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;{</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a915f6bcc0c9f9a9c214fcb8a400c3063">ast_channel_internal_fd_set</a>(chan, which, fd);</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;   <span class="keywordflow">return</span>;</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;}</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;</div><div class="line"><a name="l02437"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a21c057f81ff8b02eb1120410ae86e657"> 2437</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a21c057f81ff8b02eb1120410ae86e657">ast_channel_clear_softhangup</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">int</span> <a class="code" href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>)</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;{</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a292f100fd06d3d05129b9c879f6c6e91">ast_channel_softhangup_internal_flag_clear</a>(chan, flag);</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#adac99999f1e55833e7f903979d67b48b">ast_channel_softhangup_internal_flag</a>(chan)) {</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *fr;</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;      <span class="comment">/* If we have completely cleared the softhangup flag,</span></div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;<span class="comment">       * then we need to fully abort the hangup process.  This requires</span></div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;<span class="comment">       * pulling the END_OF_Q frame out of the channel frame queue if it</span></div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;<span class="comment">       * still happens to be there. */</span></div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;      fr = <a class="code" href="../../df/d90/linkedlists_8h.html#a1e37109bb72d95999821eb45f28c261c">AST_LIST_LAST</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad89ab3133d87a496f63da917148d02be">ast_channel_readq</a>(chan));</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;      <span class="keywordflow">if</span> (fr &amp;&amp; fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a> &amp;&amp;</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;            fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390acb9fefa4f5e5e4b3f7f12c3483b33ee6">AST_CONTROL_END_OF_Q</a>) {</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#aa36e72b77f1b80881cd0a9fcca66ce19">AST_LIST_REMOVE</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad89ab3133d87a496f63da917148d02be">ast_channel_readq</a>(chan), fr, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;         <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(fr);</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;      }</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;   }</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;}</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;<span class="comment">/*! \brief Softly hangup a channel, don&#39;t lock */</span></div><div class="line"><a name="l02463"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#acd23f45d08b4bfadd20c9d82e8060e50"> 2463</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#acd23f45d08b4bfadd20c9d82e8060e50">ast_softhangup_nolock</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">int</span> cause)</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;{</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Soft-Hanging (%#04x) up channel &#39;%s&#39;\n&quot;</span>, (<span class="keywordtype">unsigned</span>)cause, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;   <span class="comment">/* Inform channel driver that we need to be hung up, if it cares */</span></div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ab683c21c4a34450c4bfb8b672a7b4045">ast_channel_softhangup_internal_flag_add</a>(chan, cause);</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3df7007b550647c63a1b211181b55814">ast_queue_frame</a>(chan, &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>);</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;   <span class="comment">/* Interrupt any poll call or such */</span></div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ab5b2bec9425dd0cfc789d96ef229cb3a">AST_FLAG_BLOCKING</a>))</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;      pthread_kill(<a class="code" href="../../d5/d7b/channel_8h.html#a77fb68157dff2a7004641cb8c3bc7e3c">ast_channel_blocker</a>(chan), SIGURG);</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;}</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;<span class="comment">/*! \brief Softly hangup a channel, lock */</span></div><div class="line"><a name="l02476"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aaaa09144f0468d0d5f98f1753a6de952"> 2476</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#aaaa09144f0468d0d5f98f1753a6de952">ast_softhangup</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">int</span> cause)</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;{</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, blob, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;   res = <a class="code" href="../../d4/d28/channel_8c.html#acd23f45d08b4bfadd20c9d82e8060e50">ast_softhangup_nolock</a>(chan, cause);</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;   blob = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: i, s: b}&quot;</span>,</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;              <span class="stringliteral">&quot;cause&quot;</span>, cause,</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;              <span class="stringliteral">&quot;soft&quot;</span>, 1);</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf03b8daa7784a26648db90614add6caa">ast_channel_publish_blob</a>(chan, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gab7e251e9a467cda68d93a47184fe0727">ast_channel_hangup_request_type</a>(), blob);</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;}</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;</div><div class="line"><a name="l02492"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ac9d4d03c20c48d15d9e91a85c5e35d67"> 2492</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#ac9d4d03c20c48d15d9e91a85c5e35d67">free_translation</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *clonechan)</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;{</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#ab5c41a2130385cadf78c64cacea7e3f9">ast_channel_writetrans</a>(clonechan)) {</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;      <a class="code" href="../../db/d39/translate_8h.html#a8f767bf5c2095f182e7cbaa73e391207">ast_translator_free_path</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ab5c41a2130385cadf78c64cacea7e3f9">ast_channel_writetrans</a>(clonechan));</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;   }</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a6b4548259e61f691c654aed0025e5502">ast_channel_readtrans</a>(clonechan)) {</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;      <a class="code" href="../../db/d39/translate_8h.html#a8f767bf5c2095f182e7cbaa73e391207">ast_translator_free_path</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a6b4548259e61f691c654aed0025e5502">ast_channel_readtrans</a>(clonechan));</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;   }</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a6634543669b0cd08b6699a8d56fbd2f0">ast_channel_writetrans_set</a>(clonechan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a9424ffc5c566def29ef0b1d1937e9054">ast_channel_readtrans_set</a>(clonechan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;}</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;</div><div class="line"><a name="l02504"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aa9a1d01546e0fc0047e56ba589790b6f"> 2504</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#aa9a1d01546e0fc0047e56ba589790b6f">ast_set_hangupsource</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *source, <span class="keywordtype">int</span> force)</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;{</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, bridge, <a class="code" href="../../d4/d28/channel_8c.html#af9e27ecd92ff5aa897c9e058dfbd6510">ast_channel_bridge_peer</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a>);</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;   <span class="keywordflow">if</span> (force || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a5dd07a6bd1ef3c199e15b8312ab41109">ast_channel_hangupsource</a>(chan))) {</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;      ast_channel_hangupsource_set(chan, source);</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;   }</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;   <span class="keywordflow">if</span> (bridge) {</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(bridge);</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;      <span class="keywordflow">if</span> (force || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a5dd07a6bd1ef3c199e15b8312ab41109">ast_channel_hangupsource</a>(bridge))) {</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;         ast_channel_hangupsource_set(bridge, source);</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;      }</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(bridge);</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;   }</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;}</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;</div><div class="line"><a name="l02523"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#affc167c91eb29d524a3dda826715a695"> 2523</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#affc167c91eb29d524a3dda826715a695">ast_channel_has_audio_frame_or_monitor</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;{</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;      || !<a class="code" href="../../d0/d79/audiohook_8h.html#a46613f6e1524089bf8c4b2a7880f716d">ast_audiohook_write_list_empty</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan))</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;      || !<a class="code" href="../../db/d3c/framehook_8h.html#aaf78d3daa82363bca63031668de97260">ast_framehook_list_contains_no_active</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aff1f86598b895f0346b701570e266ba2">ast_channel_framehooks</a>(chan));</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;}</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;</div><div class="line"><a name="l02530"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a40263dbf8fc7b0a72bb50541b306d6d6"> 2530</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a40263dbf8fc7b0a72bb50541b306d6d6">ast_channel_has_hook_requiring_audio</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;{</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;      || !<a class="code" href="../../d0/d79/audiohook_8h.html#a46613f6e1524089bf8c4b2a7880f716d">ast_audiohook_write_list_empty</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan))</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;      || !<a class="code" href="../../db/d3c/framehook_8h.html#a311b1ae4fd0c1c11f2bb14814183c08b">ast_framehook_list_contains_no_active_of_type</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aff1f86598b895f0346b701570e266ba2">ast_channel_framehooks</a>(chan), <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>);</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;}</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;</div><div class="line"><a name="l02537"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aadab345df706e0ae1c1efec1f4809de3"> 2537</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#aadab345df706e0ae1c1efec1f4809de3">destroy_hooks</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;{</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan)) {</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;      <a class="code" href="../../d0/d79/audiohook_8h.html#a5da9cb8531c18cbae0c703a57acbf0f3">ast_audiohook_detach_list</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan));</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a8dec5f0bd378a1c23bbd9dba03b213fb">ast_channel_audiohooks_set</a>(chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;   }</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;   <a class="code" href="../../db/d3c/framehook_8h.html#aa0b8b734a826e26f1fe65630b0a6bcbe">ast_framehook_list_destroy</a>(chan);</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;}</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;<span class="comment">/*! \brief Hangup a channel */</span></div><div class="line"><a name="l02548"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a29557c4823f5e9c02519a01daf6a289c"> 2548</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;{</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;   <span class="comment">/* Be NULL safe for RAII_VAR() usage. */</span></div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;   }</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;</div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Channel %p &#39;%s&#39; hanging up.  Refs: %d\n&quot;</span>, chan, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan),</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(chan, 0));</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a>(chan);</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;</div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;   <span class="keywordflow">while</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a96d7e5eca937b7e71f27acc4360c3ee1">ast_channel_masq</a>(chan) || <a class="code" href="../../d5/d7b/channel_8h.html#a954acd75e9468e701f656d60c8f374b0">ast_channel_masqr</a>(chan))  {</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a7b1d6c8183a6f6f42a98239da3d1c7ca">CHANNEL_DEADLOCK_AVOIDANCE</a>(chan);</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;   }</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;   <span class="comment">/* Mark as a zombie so a masquerade cannot be setup on this channel. */</span></div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a26796fa52cc5857446eec8d16a4b718d">AST_FLAG_ZOMBIE</a>);</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;<span class="comment">    * XXX if running the hangup handlers here causes problems</span></div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;<span class="comment">    * because the handlers take too long to execute, we could move</span></div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;<span class="comment">    * the meat of this function into another thread.  A thread</span></div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;<span class="comment">    * where channels go to die.</span></div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;<span class="comment">    * If this is done, ast_autoservice_chan_hangup_peer() will no</span></div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;<span class="comment">    * longer be needed.</span></div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#adc4d340f4e9d60ef5fbfd93a0e6f9c33">ast_pbx_hangup_handler_run</a>(chan);</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a>(channels, chan);</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#aadab345df706e0ae1c1efec1f4809de3">destroy_hooks</a>(chan);</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#ac9d4d03c20c48d15d9e91a85c5e35d67">free_translation</a>(chan);</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;   <span class="comment">/* Close audio stream */</span></div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a043ef90a065fe177af7b21a6045b6506">ast_channel_stream</a>(chan)) {</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;      <a class="code" href="../../d2/d4d/file_8h.html#ab53bd2c3c55d509790c7f7620aac6373">ast_closestream</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a043ef90a065fe177af7b21a6045b6506">ast_channel_stream</a>(chan));</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a1460c260bdadfa226b95598a7d9d44a7">ast_channel_stream_set</a>(chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;   }</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;   <span class="comment">/* Close video stream */</span></div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a8b8f9e299537c8eee7cb67de52f44c8d">ast_channel_vstream</a>(chan)) {</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;      <a class="code" href="../../d2/d4d/file_8h.html#ab53bd2c3c55d509790c7f7620aac6373">ast_closestream</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a8b8f9e299537c8eee7cb67de52f44c8d">ast_channel_vstream</a>(chan));</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#afafaea2cd08a0d993f5d667f4cfefd9e">ast_channel_vstream_set</a>(chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;   }</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#acd3470664b6a002c9a379a69ddad4cb2">ast_channel_sched</a>(chan)) {</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;      <a class="code" href="../../d7/d00/sched_8h.html#a862f869d056628b38e09042f21b54413">ast_sched_context_destroy</a>(<a class="code" href="../../d5/d7b/channel_8h.html#acd3470664b6a002c9a379a69ddad4cb2">ast_channel_sched</a>(chan));</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aef6f152b358661987022a1d97d9eff39">ast_channel_sched_set</a>(chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;   }</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#afb86bdd7fa42b7bf8ac2fbfab01f67ef">ast_channel_generatordata</a>(chan)) { <span class="comment">/* Clear any tone stuff remaining */</span></div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a6fa8e680c963b66575d1950c19493b40">ast_channel_generator</a>(chan) &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#a6fa8e680c963b66575d1950c19493b40">ast_channel_generator</a>(chan)-&gt;release) {</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a6fa8e680c963b66575d1950c19493b40">ast_channel_generator</a>(chan)-&gt;<a class="code" href="../../de/d2a/structast__generator.html#aa96806155cfb0c00eb81eb748a4088a3">release</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#afb86bdd7fa42b7bf8ac2fbfab01f67ef">ast_channel_generatordata</a>(chan));</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;      }</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;   }</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a6858fa4ed2eb8036713a0dacd04b7da9">ast_channel_generatordata_set</a>(chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a2bd2be6e172c846d7162a753be148eb9">ast_channel_generator_set</a>(chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ab5b2bec9425dd0cfc789d96ef229cb3a">AST_FLAG_BLOCKING</a>)) {</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Hard hangup called by thread LWP %d on %s, while blocked by thread LWP %d in procedure %s!  Expect a failure\n&quot;</span>,</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a78ce13d749925cbdaa7625e8dbdcbf7f">ast_get_tid</a>(), <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a1372ab0cb362b409af61330d2edf2cb5">ast_channel_blocker_tid</a>(chan),</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a4870c8e338e4026d3b32509da7aeec34">ast_channel_blockproc</a>(chan));</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;   }</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#aae28b3b590d6f2c84e472625c81ae2bb">hangup</a>) {</div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#acfe4f6b08d60eb03a38be717e6291a46">hangup</a>(chan);</div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;   }</div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;</div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;   <a class="code" href="../../de/dc8/ccss_8h.html#a4ddce85b8dc1ffed466880d7f2a92a2a">ast_cc_offer</a>(chan);</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;</div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;}</div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;<span class="comment"> * \brief Set channel answered time if not already set.</span></div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;<span class="comment"> * \since 13.11.0</span></div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;<span class="comment"> * \param chan Channel to set answered time.</span></div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;<span class="comment"> * \return Nothing</span></div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02637"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#adba01eb648735ee5fc46ab1437e2f35b"> 2637</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#adba01eb648735ee5fc46ab1437e2f35b">set_channel_answer_time</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;{</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a0a4982173c52a4b65b581ce52070a414">ast_channel_answertime</a>(chan))) {</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;      <span class="keyword">struct </span>timeval answertime;</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;      answertime = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a450d6ccafe271f50f62d67e1f764b01c">ast_channel_answertime_set</a>(chan, &amp;answertime);</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;   }</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;}</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;</div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;</div><div class="line"><a name="l02648"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a2da3b985de9a2d15f794d499bf94a184"> 2648</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a2da3b985de9a2d15f794d499bf94a184">ast_raw_answer_with_stream_topology</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology)</div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;{</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ac7388257651bb6a92d3208512fab0ba6">SCOPE_TRACE</a>(1, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;   <span class="comment">/* You can&#39;t answer an outbound call */</span></div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a36fa77a64746637c77c6b18a7999d0a2">AST_FLAG_OUTGOING</a>)) {</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;   }</div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;</div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;   <span class="comment">/* Stop if we&#39;re a zombie or need a soft hangup */</span></div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a26796fa52cc5857446eec8d16a4b718d">AST_FLAG_ZOMBIE</a>) || <a class="code" href="../../d4/d28/channel_8c.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(chan)) {</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;   }</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;</div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;<span class="comment">    * Mark when incoming channel answered so we can know how</span></div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;<span class="comment">    * long the channel has been up.</span></div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#adba01eb648735ee5fc46ab1437e2f35b">set_channel_answer_time</a>(chan);</div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;   <span class="keywordflow">switch</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(chan)) {</div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa">AST_STATE_RINGING</a>:</div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433">AST_STATE_RING</a>:</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;answer_with_stream_topology) {</div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;         res = <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#a6d8399b6669345e9338e93ed292faa5b">answer_with_stream_topology</a>(chan, topology);</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a>) {</div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;         res = <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#a0f437c620ae3347d3b5ff82ffc19d37a">answer</a>(chan);</div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;      }</div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a6b869988b7ee213be11a0e45ee3ba09f">ast_setstate</a>(chan, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>);</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>:</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;   }</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(chan, -1);</div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;</div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;}</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;</div><div class="line"><a name="l02699"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#af558043411edede3b5fda44a08da589f"> 2699</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#af558043411edede3b5fda44a08da589f">ast_raw_answer</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;{</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a2da3b985de9a2d15f794d499bf94a184">ast_raw_answer_with_stream_topology</a>(chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;}</div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;</div><div class="line"><a name="l02704"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a25f0f3d4471989438adf2cad14f76233"> 2704</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a25f0f3d4471989438adf2cad14f76233">__ast_answer</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> delay)</div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;{</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a> old_state;</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ac7388257651bb6a92d3208512fab0ba6">SCOPE_TRACE</a>(1, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;</div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;   old_state = <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(chan);</div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;   <span class="keywordflow">if</span> ((res = <a class="code" href="../../d4/d28/channel_8c.html#af558043411edede3b5fda44a08da589f">ast_raw_answer</a>(chan))) {</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;      <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;   }</div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;</div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;   <span class="keywordflow">switch</span> (old_state) {</div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa">AST_STATE_RINGING</a>:</div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433">AST_STATE_RING</a>:</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;      <span class="comment">/* wait for media to start flowing, but don&#39;t wait any longer</span></div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;<span class="comment">       * than &#39;delay&#39; or 500 milliseconds, whichever is longer</span></div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;      <span class="keywordflow">do</span> {</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;         <a class="code" href="../../d1/d8f/reqresp__parser_8h.html#a7e4aa55331b8292eff94249de72b807d">AST_LIST_HEAD_NOLOCK</a>(, <a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a>) <a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>;</div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *cur;</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *new_frame;</div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;         <span class="keywordtype">int</span> timeout_ms = <a class="code" href="../../d5/d60/utils_8h.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a>(delay, 500);</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a> = 0;</div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;         <span class="keyword">struct </span>timeval start;</div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>);</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;         start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;         <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;            <span class="keywordtype">int</span> ms = <a class="code" href="../../de/df7/time_8h.html#a904a6933b710e14c7fa2029a0f0cc91a">ast_remaining_ms</a>(start, timeout_ms);</div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;            ms = <a class="code" href="../../d4/d28/channel_8c.html#aed7cba5dd8c6d31600f50d4b3f68d9ca">ast_waitfor</a>(chan, ms);</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;            <span class="keywordflow">if</span> (ms &lt; 0) {</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Error condition occurred when polling channel %s for a voice frame: %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;               res = -1;</div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;            }</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;            <span class="keywordflow">if</span> (ms == 0) {</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Didn&#39;t receive a media frame from %s within %u ms of answering. Continuing anyway\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), <a class="code" href="../../d5/d60/utils_8h.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a>(delay, 500));</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;            }</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;            cur = <a class="code" href="../../d4/d28/channel_8c.html#a7ef6737309dc9e8b6c4a7cb4800638b1">ast_read</a>(chan);</div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;            <span class="keywordflow">if</span> (!cur || ((cur-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>) &amp;&amp;</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;                    (cur-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba">AST_CONTROL_HANGUP</a>))) {</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;               <span class="keywordflow">if</span> (cur) {</div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;                  <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(cur);</div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;               }</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;               res = -1;</div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Hangup of channel %s detected in answer routine\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;            }</div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;            <span class="keywordflow">if</span> ((new_frame = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a314496ce1d74ed7fdb9c5319c5e2e953">ast_frisolate</a>(cur)) != cur) {</div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;               <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(cur);</div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;            }</div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>, new_frame, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;</div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;            <span class="comment">/* if a specific delay period was requested, continue</span></div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;<span class="comment">             * until that delay has passed. don&#39;t stop just because</span></div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;<span class="comment">             * incoming media has arrived.</span></div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;            <span class="keywordflow">if</span> (delay) {</div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;               <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;            }</div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;</div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;            <span class="keywordflow">switch</span> (new_frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a>) {</div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;               <span class="comment">/* all of these frametypes qualify as &#39;media&#39; */</span></div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>:</div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30">AST_FRAME_VIDEO</a>:</div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078">AST_FRAME_TEXT</a>:</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ada620aba450c2a60eb096001f2361741">AST_FRAME_TEXT_DATA</a>:</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be">AST_FRAME_DTMF_BEGIN</a>:</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a>:</div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a6c9398ee8989239124295d096a87bf32">AST_FRAME_IMAGE</a>:</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a3d91bab33583f560197e21532a02a895">AST_FRAME_HTML</a>:</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ad99b86353343f422bda01163898b2eea">AST_FRAME_MODEM</a>:</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ac2b2b163b29fde967531b8bf92966c97">AST_FRAME_RTCP</a>:</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;               done = 1;</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>:</div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a7f7e5bdc9f8a8ef45c4d078f96b52624">AST_FRAME_IAX</a>:</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af36653b08c00f5d824ed6046e9233ef9">AST_FRAME_BRIDGE_ACTION</a>:</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa28206b97fb0795e1fa681248fd0d97f">AST_FRAME_BRIDGE_ACTION_SYNC</a>:</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a29ff71f9d5c7927906ebd437fe372056">AST_FRAME_NULL</a>:</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a8089c2a7198a1063db9e6c3f904482a4">AST_FRAME_CNG</a>:</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;            }</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;            <span class="keywordflow">if</span> (done) {</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;            }</div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;         }</div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;</div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;         <span class="keywordflow">while</span> ((cur = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;<a class="code" href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a>, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>))) {</div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;            <span class="keywordflow">if</span> (res == 0) {</div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;               <a class="code" href="../../d4/d28/channel_8c.html#a8b8c37c2fb7bb32b302635f257982271">ast_queue_frame_head</a>(chan, cur);</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;            }</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;            <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(cur);</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;         }</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;      } <span class="keywordflow">while</span> (0);</div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;   }</div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;</div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;}</div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;</div><div class="line"><a name="l02814"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aec583a3e25358ee552a4f3df53914cd0"> 2814</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#aec583a3e25358ee552a4f3df53914cd0">ast_answer</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;{</div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ac7388257651bb6a92d3208512fab0ba6">SCOPE_TRACE</a>(1, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a25f0f3d4471989438adf2cad14f76233">__ast_answer</a>(chan, 0);</div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;}</div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;</div><div class="line"><a name="l02820"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a18bf8971a91555e64544ba63880c0bbb"> 2820</a></span>&#160;<span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a18bf8971a91555e64544ba63880c0bbb">ast_auto_answer</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;{</div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(chan) == <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>) {</div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;      <span class="comment">/* Already answered */</span></div><div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;   }</div><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#aec583a3e25358ee552a4f3df53914cd0">ast_answer</a>(chan);</div><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;}</div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;</div><div class="line"><a name="l02829"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aa216353e87c4c8cc931a4017f990c5e7"> 2829</a></span>&#160;int64_t <a class="code" href="../../d4/d28/channel_8c.html#aa216353e87c4c8cc931a4017f990c5e7">ast_channel_get_duration_ms</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;{</div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != chan);</div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;</div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a8873859a4dbc3d0d053d696667e49012">ast_channel_creationtime</a>(chan))) {</div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;   }</div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), <a class="code" href="../../d5/d7b/channel_8h.html#a8873859a4dbc3d0d053d696667e49012">ast_channel_creationtime</a>(chan));</div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;}</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;</div><div class="line"><a name="l02839"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#addfef2a83e18a52fc90d60fc6183be80"> 2839</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#addfef2a83e18a52fc90d60fc6183be80">ast_channel_get_duration</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;{</div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;   <span class="keywordflow">return</span> (<a class="code" href="../../d4/d28/channel_8c.html#aa216353e87c4c8cc931a4017f990c5e7">ast_channel_get_duration_ms</a>(chan) / 1000);</div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;}</div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;</div><div class="line"><a name="l02844"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a436cc7c95daa0d292aeb73b9e88d99e4"> 2844</a></span>&#160;int64_t <a class="code" href="../../d4/d28/channel_8c.html#a436cc7c95daa0d292aeb73b9e88d99e4">ast_channel_get_up_time_ms</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;{</div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> != chan);</div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;</div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a0a4982173c52a4b65b581ce52070a414">ast_channel_answertime</a>(chan))) {</div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;   }</div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), <a class="code" href="../../d5/d7b/channel_8h.html#a0a4982173c52a4b65b581ce52070a414">ast_channel_answertime</a>(chan));</div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;}</div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;</div><div class="line"><a name="l02854"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#abf858a4aac3ad8e1f87236611fce8db6"> 2854</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#abf858a4aac3ad8e1f87236611fce8db6">ast_channel_get_up_time</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;{</div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;   <span class="keywordflow">return</span> (<a class="code" href="../../d4/d28/channel_8c.html#a436cc7c95daa0d292aeb73b9e88d99e4">ast_channel_get_up_time_ms</a>(chan) / 1000);</div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;}</div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;<span class="comment"> * \brief Determine whether or not we have to trigger dtmf emulating using 50 fps timer events</span></div><div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;<span class="comment"> * especially when no voice frames are received during dtmf processing (direct media or muted</span></div><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;<span class="comment"> * sender case using SIP INFO)</span></div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02864"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ae166e74521547a7d8390b8b154b236be"> 2864</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#ae166e74521547a7d8390b8b154b236be">should_trigger_dtmf_emulating</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;{</div><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ab05edf1bf82b02f5987de92a6960a9bd">AST_FLAG_DEFER_DTMF</a> | <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a7aeded1dc9df91dee01bb7af719880c1">AST_FLAG_EMULATE_DTMF</a>)) {</div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;      <span class="comment">/* We&#39;re in the middle of emulating a digit, or DTMF has been</span></div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;<span class="comment">       * explicitly deferred. Trigger dtmf with periodic 50 pfs timer events, then. */</span></div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;   }</div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;</div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(*<a class="code" href="../../d5/d7b/channel_8h.html#a70d5efd26b6272df04b33acc2a810ca7">ast_channel_dtmf_tv</a>(chan)) &amp;&amp;</div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;         <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), *<a class="code" href="../../d5/d7b/channel_8h.html#a70d5efd26b6272df04b33acc2a810ca7">ast_channel_dtmf_tv</a>(chan)) &lt; 2*<a class="code" href="../../d4/d28/channel_8c.html#a21882e640e01106e62bdab88849a17c5">AST_MIN_DTMF_GAP</a>) {</div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;<span class="comment">       * We&#39;re not in the middle of a digit, but it hasn&#39;t been long enough</span></div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;<span class="comment">       * since the last digit, so we&#39;ll have to trigger DTMF furtheron.</span></div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;<span class="comment">       * Using 2 times AST_MIN_DTMF_GAP to trigger readq reading for possible</span></div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;<span class="comment">       * buffered next dtmf event</span></div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;   }</div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;</div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;}</div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;</div><div class="line"><a name="l02886"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a6e65df0ab5f6ce5e0c7292e91ec86254"> 2886</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a6e65df0ab5f6ce5e0c7292e91ec86254">deactivate_generator_nolock</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;{</div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#afb86bdd7fa42b7bf8ac2fbfab01f67ef">ast_channel_generatordata</a>(chan)) {</div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../de/d2a/structast__generator.html">ast_generator</a> *<a class="code" href="../../df/dde/app__fax_8c.html#a36aeb2eb01afb248bad64a309d743636">generator</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a6fa8e680c963b66575d1950c19493b40">ast_channel_generator</a>(chan);</div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;</div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;      <span class="keywordflow">if</span> (generator &amp;&amp; generator-&gt;<a class="code" href="../../de/d2a/structast__generator.html#aa96806155cfb0c00eb81eb748a4088a3">release</a>) {</div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;         generator-&gt;<a class="code" href="../../de/d2a/structast__generator.html#aa96806155cfb0c00eb81eb748a4088a3">release</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#afb86bdd7fa42b7bf8ac2fbfab01f67ef">ast_channel_generatordata</a>(chan));</div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;      }</div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a6858fa4ed2eb8036713a0dacd04b7da9">ast_channel_generatordata_set</a>(chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a2bd2be6e172c846d7162a753be148eb9">ast_channel_generator_set</a>(chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#aca37ca2f3d55a223d26617329ed48a3e">ast_channel_set_fd</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a34c26382160debe3411987ec0df1f927">AST_GENERATOR_FD</a>, -1);</div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a9deec175d13a40a6a5fdb527b13c6878">AST_FLAG_WRITE_INT</a>);</div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#abb39926813ff8874f8e453ca04307e53">ast_settimeout</a>(chan, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;   }</div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;}</div><div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;</div><div class="line"><a name="l02902"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a7160355005776732fba88cc020f4a45b"> 2902</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a7160355005776732fba88cc020f4a45b">ast_deactivate_generator</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;{</div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a6e65df0ab5f6ce5e0c7292e91ec86254">deactivate_generator_nolock</a>(chan);</div><div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d28/channel_8c.html#ae166e74521547a7d8390b8b154b236be">should_trigger_dtmf_emulating</a>(chan)) {</div><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;      <span class="comment">/* if in the middle of dtmf emulation keep 50 tick per sec timer on rolling */</span></div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;      <a class="code" href="../../db/d41/timing_8h.html#a4dae39fb5fb680a48a05d7567053eb03">ast_timer_set_rate</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1e930e0e331c7e82a1bf297addfc5a34">ast_channel_timer</a>(chan), 50);</div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;   }</div><div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;}</div><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;</div><div class="line"><a name="l02913"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a11d5324d900ad89c46441038649b3dd9"> 2913</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a11d5324d900ad89c46441038649b3dd9">generator_write_format_change</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;{</div><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d2a/structast__generator.html">ast_generator</a> *<a class="code" href="../../df/dde/app__fax_8c.html#a36aeb2eb01afb248bad64a309d743636">generator</a>;</div><div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;</div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;   generator = <a class="code" href="../../d5/d7b/channel_8h.html#a6fa8e680c963b66575d1950c19493b40">ast_channel_generator</a>(chan);</div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;   <span class="keywordflow">if</span> (generator &amp;&amp; generator-&gt;<a class="code" href="../../de/d2a/structast__generator.html#aff59cfcef45fdeaffbe4ab20e2089ffd">write_format_change</a>) {</div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;      generator-&gt;<a class="code" href="../../de/d2a/structast__generator.html#aff59cfcef45fdeaffbe4ab20e2089ffd">write_format_change</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#afb86bdd7fa42b7bf8ac2fbfab01f67ef">ast_channel_generatordata</a>(chan));</div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;   }</div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;}</div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;</div><div class="line"><a name="l02925"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a99698cbdfd9c1a86f36e0a226076e69f"> 2925</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a99698cbdfd9c1a86f36e0a226076e69f">generator_force</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *data)</div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;{</div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;   <span class="comment">/* Called if generator doesn&#39;t have data */</span></div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;   <span class="keywordtype">void</span> *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;   int (*<a class="code" href="../../de/d2a/structast__generator.html#a3022be24de5fabbccff620c25841f738">generate</a>)(<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="keywordtype">void</span> *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>, <span class="keywordtype">int</span> datalen, <span class="keywordtype">int</span> samples) = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan = (<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *)data;</div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;   tmp = <a class="code" href="../../d5/d7b/channel_8h.html#afb86bdd7fa42b7bf8ac2fbfab01f67ef">ast_channel_generatordata</a>(chan);</div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a6858fa4ed2eb8036713a0dacd04b7da9">ast_channel_generatordata_set</a>(chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a6fa8e680c963b66575d1950c19493b40">ast_channel_generator</a>(chan))</div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;      generate = <a class="code" href="../../d5/d7b/channel_8h.html#a6fa8e680c963b66575d1950c19493b40">ast_channel_generator</a>(chan)-&gt;<a class="code" href="../../de/d2a/structast__generator.html#a3022be24de5fabbccff620c25841f738">generate</a>;</div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;</div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;   <span class="keywordflow">if</span> (!tmp || !generate) {</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;   }</div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;</div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;   res = generate(chan, tmp, 0, <a class="code" href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a>(chan)) / 50);</div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;</div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a6fa8e680c963b66575d1950c19493b40">ast_channel_generator</a>(chan) &amp;&amp; generate == <a class="code" href="../../d5/d7b/channel_8h.html#a6fa8e680c963b66575d1950c19493b40">ast_channel_generator</a>(chan)-&gt;generate) {</div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a6858fa4ed2eb8036713a0dacd04b7da9">ast_channel_generatordata_set</a>(chan, tmp);</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;   }</div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;</div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Auto-deactivating generator\n&quot;</span>);</div><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a7160355005776732fba88cc020f4a45b">ast_deactivate_generator</a>(chan);</div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;   }</div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;</div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;}</div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;</div><div class="line"><a name="l02960"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a12a58dda74a19f383f6b77cf7fa88b54"> 2960</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a12a58dda74a19f383f6b77cf7fa88b54">ast_activate_generator</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../de/d2a/structast__generator.html">ast_generator</a> *<a class="code" href="../../de/d26/app__externalivr_8c.html#abe143f1bae4445e9b3798e1dec3bda60">gen</a>, <span class="keywordtype">void</span> *params)</div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;{</div><div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;   <span class="keywordtype">void</span> *<a class="code" href="../../df/d3c/structast__channel.html#abe7876f86e249ea3db5fbacd2231389c">generatordata</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;</div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#afb86bdd7fa42b7bf8ac2fbfab01f67ef">ast_channel_generatordata</a>(chan)) {</div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../de/d2a/structast__generator.html">ast_generator</a> *generator_old = <a class="code" href="../../d5/d7b/channel_8h.html#a6fa8e680c963b66575d1950c19493b40">ast_channel_generator</a>(chan);</div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;</div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;      <span class="keywordflow">if</span> (generator_old &amp;&amp; generator_old-&gt;<a class="code" href="../../de/d2a/structast__generator.html#aa96806155cfb0c00eb81eb748a4088a3">release</a>) {</div><div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;         generator_old-&gt;<a class="code" href="../../de/d2a/structast__generator.html#aa96806155cfb0c00eb81eb748a4088a3">release</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#afb86bdd7fa42b7bf8ac2fbfab01f67ef">ast_channel_generatordata</a>(chan));</div><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;      }</div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;   }</div><div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;   <span class="keywordflow">if</span> (gen-&gt;<a class="code" href="../../de/d2a/structast__generator.html#a77c293dc8108e06e2a81a1fdafc8fd97">alloc</a> &amp;&amp; !(generatordata = gen-&gt;<a class="code" href="../../de/d2a/structast__generator.html#a77c293dc8108e06e2a81a1fdafc8fd97">alloc</a>(chan, params))) {</div><div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;      res = -1;</div><div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;   }</div><div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a6858fa4ed2eb8036713a0dacd04b7da9">ast_channel_generatordata_set</a>(chan, generatordata);</div><div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;   <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#abb39926813ff8874f8e453ca04307e53">ast_settimeout</a>(chan, 50, <a class="code" href="../../d4/d28/channel_8c.html#a99698cbdfd9c1a86f36e0a226076e69f">generator_force</a>, chan);</div><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a2bd2be6e172c846d7162a753be148eb9">ast_channel_generator_set</a>(chan, gen);</div><div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;   }</div><div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;</div><div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a2458f1412e300412e53d86fe94e19002">ast_prod</a>(chan);</div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;</div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;}</div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;<span class="comment">/*! \brief Wait for x amount of time on a file descriptor to have input.  */</span></div><div class="line"><a name="l02989"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a56819f90869d77808fd52f4d2693a75c"> 2989</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a56819f90869d77808fd52f4d2693a75c">ast_waitfor_n_fd</a>(<span class="keywordtype">int</span> *fds, <span class="keywordtype">int</span> n, <span class="keywordtype">int</span> *ms, <span class="keywordtype">int</span> *exception)</div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;{</div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;   <span class="keywordtype">int</span> winner = -1;</div><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a2e63eaa5b4d94f214edf99838ef7e7e4">ast_waitfor_nandfds</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, fds, n, exception, &amp;winner, ms);</div><div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;   <span class="keywordflow">return</span> winner;</div><div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;}</div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;<span class="comment">/*! \brief Wait for x amount of time on a file descriptor to have input.  */</span></div><div class="line"><a name="l02997"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a2e63eaa5b4d94f214edf99838ef7e7e4"> 2997</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d4/d28/channel_8c.html#a2e63eaa5b4d94f214edf99838ef7e7e4">ast_waitfor_nandfds</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> **<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>, <span class="keywordtype">int</span> n, <span class="keywordtype">int</span> *fds, <span class="keywordtype">int</span> nfds,</div><div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;               <span class="keywordtype">int</span> *exception, <span class="keywordtype">int</span> *outfd, <span class="keywordtype">int</span> *ms)</div><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;{</div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;   <span class="keyword">struct </span>timeval start = { 0 , 0 };</div><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;   <span class="keyword">struct </span>pollfd *pfds = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;   <span class="keywordtype">long</span> rms;</div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;   <span class="keywordtype">int</span> x, y, <a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>;</div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;   <span class="keywordtype">int</span> sz = nfds;</div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;   <span class="keyword">struct </span>timeval now = { 0, 0 };</div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;   <span class="keyword">struct </span>timeval whentohangup = { 0, 0 }, diff;</div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *winner = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;   <span class="keyword">struct </span>fdmap {</div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>;</div><div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;      <span class="keywordtype">int</span> fdno;</div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;   } *fdmap = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;</div><div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;   <span class="keywordflow">if</span> (outfd) {</div><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;      *outfd = -99999;</div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;   }</div><div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;   <span class="keywordflow">if</span> (exception) {</div><div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;      *exception = 0;</div><div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;   }</div><div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;</div><div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; n; x++) {</div><div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(c[x]);</div><div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(*<a class="code" href="../../d5/d7b/channel_8h.html#ae616309e9eba6a1b009a0466bada50cc">ast_channel_whentohangup</a>(c[x]))) {</div><div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(whentohangup))</div><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;            now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;         diff = <a class="code" href="../../de/df7/time_8h.html#aa13b651c18bc6004cab21ac041d44dd8">ast_tvsub</a>(*<a class="code" href="../../d5/d7b/channel_8h.html#ae616309e9eba6a1b009a0466bada50cc">ast_channel_whentohangup</a>(c[x]), now);</div><div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;         <span class="keywordflow">if</span> (diff.tv_sec &lt; 0 || <a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(diff)) {</div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;            <a class="code" href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a>(<span class="stringliteral">&quot;HANGUP_TIME&quot;</span>, <span class="stringliteral">&quot;Channel: %s&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(c[x]));</div><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;            <span class="comment">/* Should already be hungup */</span></div><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#ab683c21c4a34450c4bfb8b672a7b4045">ast_channel_softhangup_internal_flag_add</a>(c[x], <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a90cd950abc1c22b0701a476bdd6cc246">AST_SOFTHANGUP_TIMEOUT</a>);</div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(c[x]);</div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;            <span class="keywordflow">return</span> c[x];</div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;         }</div><div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(whentohangup) || <a class="code" href="../../de/df7/time_8h.html#a6daa33e2052acd094bb63e78aba29733">ast_tvcmp</a>(diff, whentohangup) &lt; 0)</div><div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;            whentohangup = diff;</div><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;      }</div><div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;      sz += <a class="code" href="../../d5/d7b/channel_8h.html#acd38e0ed015ff8ee77f3eef0f425a85f">ast_channel_fd_count</a>(c[x]);</div><div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(c[x]);</div><div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;   }</div><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;</div><div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;   <span class="keywordflow">if</span> (!sz) {</div><div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;   }</div><div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;</div><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;   pfds = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(<span class="keyword">sizeof</span>(*pfds) * sz);</div><div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;   fdmap = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(<span class="keyword">sizeof</span>(*fdmap) * sz);</div><div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;</div><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;   <span class="comment">/* Wait full interval */</span></div><div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;   rms = *ms;</div><div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;   <span class="comment">/* INT_MAX, not LONG_MAX, because it matters on 64-bit */</span></div><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(whentohangup) &amp;&amp; whentohangup.tv_sec &lt; INT_MAX / 1000) {</div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;      rms = whentohangup.tv_sec * 1000 + whentohangup.tv_usec / 1000;              <span class="comment">/* timeout in milliseconds */</span></div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;      <span class="keywordflow">if</span> (*ms &gt;= 0 &amp;&amp; *ms &lt; rms) {                                                 <span class="comment">/* original *ms still smaller */</span></div><div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;         rms =  *ms;</div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;      }</div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(whentohangup) &amp;&amp; rms &lt; 0) {</div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;      <span class="comment">/* Tiny corner case... call would need to last &gt;24 days */</span></div><div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;      rms = INT_MAX;</div><div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;   }</div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;<span class="comment">    * Build the pollfd array, putting the channels&#39; fds first,</span></div><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;<span class="comment">    * followed by individual fds. Order is important because</span></div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;<span class="comment">    * individual fd&#39;s must have priority over channel fds.</span></div><div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;   max = 0;</div><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; n; x++) {</div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(c[x]);</div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;      <span class="keywordflow">for</span> (y = 0; y &lt; <a class="code" href="../../d5/d7b/channel_8h.html#acd38e0ed015ff8ee77f3eef0f425a85f">ast_channel_fd_count</a>(c[x]); y++) {</div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;         fdmap[<a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>].fdno = y;  <span class="comment">/* fd y is linked to this pfds */</span></div><div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;         fdmap[<a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>].chan = x;  <span class="comment">/* channel x is linked to this pfds */</span></div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;         max += <a class="code" href="../../d5/d7b/channel_8h.html#ad375082fcf73a6a755d611a64cac2659">ast_add_fd</a>(&amp;pfds[max], <a class="code" href="../../d5/d7b/channel_8h.html#a8e5cf0a066beee895cfd9048e4abdbb3">ast_channel_fd</a>(c[x], y));</div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;      }</div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a3a5d847510a477edda3d0bc1459709f4">CHECK_BLOCKING</a>(c[x]);</div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(c[x]);</div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;   }</div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;   <span class="comment">/* Add the individual fds */</span></div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; nfds; x++) {</div><div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;      fdmap[<a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>].chan = -1;</div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;      max += <a class="code" href="../../d5/d7b/channel_8h.html#ad375082fcf73a6a755d611a64cac2659">ast_add_fd</a>(&amp;pfds[max], fds[x]);</div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;   }</div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;</div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;   <span class="keywordflow">if</span> (*ms &gt; 0) {</div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;      start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;   }</div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;</div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;   <span class="keywordflow">if</span> (<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>) == 4) { <span class="comment">/* XXX fix timeout &gt; 600000 on linux x86-32 */</span></div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;      <span class="keywordflow">do</span> {</div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;         <span class="keywordtype">int</span> kbrms = rms;</div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;         <span class="keywordflow">if</span> (kbrms &gt; 600000) {</div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;            kbrms = 600000;</div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;         }</div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;         res = <a class="code" href="../../d4/dfb/poll-compat_8h.html#a5a0c58fa8311e94cd0ed34382aa822f9">ast_poll</a>(pfds, max, kbrms);</div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;         <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;            rms -= kbrms;</div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;         }</div><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;      } <span class="keywordflow">while</span> (!res &amp;&amp; (rms &gt; 0));</div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;      res = <a class="code" href="../../d4/dfb/poll-compat_8h.html#a5a0c58fa8311e94cd0ed34382aa822f9">ast_poll</a>(pfds, max, rms);</div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;   }</div><div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; n; x++) {</div><div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(c[x]);</div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(c[x]), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ab5b2bec9425dd0cfc789d96ef229cb3a">AST_FLAG_BLOCKING</a>);</div><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(c[x]);</div><div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;   }</div><div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0) { <span class="comment">/* Simulate a timeout if we were interrupted */</span></div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> != EINTR) {</div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;         *ms = -1;</div><div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;      }</div><div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;   }</div><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(whentohangup)) {   <span class="comment">/* if we have a timeout, check who expired */</span></div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;      now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;      <span class="keywordflow">for</span> (x = 0; x &lt; n; x++) {</div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(*<a class="code" href="../../d5/d7b/channel_8h.html#ae616309e9eba6a1b009a0466bada50cc">ast_channel_whentohangup</a>(c[x])) &amp;&amp; <a class="code" href="../../de/df7/time_8h.html#a6daa33e2052acd094bb63e78aba29733">ast_tvcmp</a>(*<a class="code" href="../../d5/d7b/channel_8h.html#ae616309e9eba6a1b009a0466bada50cc">ast_channel_whentohangup</a>(c[x]), now) &lt;= 0) {</div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;            <a class="code" href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a>(<span class="stringliteral">&quot;HANGUP_TIME&quot;</span>, <span class="stringliteral">&quot;Channel: %s&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(c[x]));</div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#ab683c21c4a34450c4bfb8b672a7b4045">ast_channel_softhangup_internal_flag_add</a>(c[x], <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a90cd950abc1c22b0701a476bdd6cc246">AST_SOFTHANGUP_TIMEOUT</a>);</div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;            <span class="keywordflow">if</span> (winner == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;               winner = c[x];</div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;            }</div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;         }</div><div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;      }</div><div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;   }</div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;   <span class="keywordflow">if</span> (res == 0) { <span class="comment">/* no fd ready, reset timeout and done */</span></div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;      *ms = 0; <span class="comment">/* XXX use 0 since we may not have an exact timeout. */</span></div><div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;      <span class="keywordflow">return</span> winner;</div><div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;   }</div><div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;<span class="comment">    * Then check if any channel or fd has a pending event.</span></div><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;<span class="comment">    * Remember to check channels first and fds last, as they</span></div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;<span class="comment">    * must have priority on setting &#39;winner&#39;</span></div><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>; x++) {</div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;      res = pfds[x].revents;</div><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;      <span class="keywordflow">if</span> (res == 0) {</div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;      }</div><div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;      <span class="keywordflow">if</span> (fdmap[x].chan &gt;= 0) {  <span class="comment">/* this is a channel */</span></div><div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;         winner = c[fdmap[x].chan]; <span class="comment">/* override previous winners */</span></div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(winner);</div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;         <span class="keywordflow">if</span> (res &amp; POLLPRI) {</div><div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;            <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(winner), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a75202bcfa58fce5d40e2daddc73b8d11">AST_FLAG_EXCEPTION</a>);</div><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;            <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(winner), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a75202bcfa58fce5d40e2daddc73b8d11">AST_FLAG_EXCEPTION</a>);</div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;         }</div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#aa2048158d099227002ac76f41865c5b5">ast_channel_fdno_set</a>(winner, fdmap[x].fdno);</div><div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(winner);</div><div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;      } <span class="keywordflow">else</span> {       <span class="comment">/* this is an fd */</span></div><div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;         <span class="keywordflow">if</span> (outfd) {</div><div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;            *outfd = pfds[x].fd;</div><div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;         }</div><div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;         <span class="keywordflow">if</span> (exception) {</div><div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;            *exception = (res &amp; POLLPRI) ? -1 : 0;</div><div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;         }</div><div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;         winner = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;      }</div><div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;   }</div><div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;   <span class="keywordflow">if</span> (*ms &gt; 0) {</div><div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;      *ms -= <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), start);</div><div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;      <span class="keywordflow">if</span> (*ms &lt; 0) {</div><div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;         *ms = 0;</div><div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;      }</div><div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;   }</div><div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;   <span class="keywordflow">return</span> winner;</div><div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;}</div><div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;</div><div class="line"><a name="l03166"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ac7ca5a25b9aad3ecedef29c3725ef112"> 3166</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d4/d28/channel_8c.html#ac7ca5a25b9aad3ecedef29c3725ef112">ast_waitfor_n</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> **<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>, <span class="keywordtype">int</span> n, <span class="keywordtype">int</span> *ms)</div><div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;{</div><div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a2e63eaa5b4d94f214edf99838ef7e7e4">ast_waitfor_nandfds</a>(c, n, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, ms);</div><div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;}</div><div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;</div><div class="line"><a name="l03171"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aed7cba5dd8c6d31600f50d4b3f68d9ca"> 3171</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#aed7cba5dd8c6d31600f50d4b3f68d9ca">ast_waitfor</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>, <span class="keywordtype">int</span> ms)</div><div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;{</div><div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;   <span class="keywordflow">if</span> (ms &lt; 0) {</div><div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;      <span class="keywordflow">do</span> {</div><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;         ms = 100000;</div><div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;         <a class="code" href="../../d4/d28/channel_8c.html#a2e63eaa5b4d94f214edf99838ef7e7e4">ast_waitfor_nandfds</a>(&amp;c, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;ms);</div><div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;      } <span class="keywordflow">while</span> (!ms);</div><div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a2e63eaa5b4d94f214edf99838ef7e7e4">ast_waitfor_nandfds</a>(&amp;c, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;ms);</div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;   }</div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;   <span class="keywordflow">return</span> ms;</div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;}</div><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;</div><div class="line"><a name="l03184"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a050bec9a4abc1a599b6573a6091b080c"> 3184</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a050bec9a4abc1a599b6573a6091b080c">ast_waitfordigit</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>, <span class="keywordtype">int</span> ms)</div><div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;{</div><div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a9b4476ddb41746948476b2ac7a9875a4">ast_waitfordigit_full</a>(c, ms, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, -1, -1);</div><div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;}</div><div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;</div><div class="line"><a name="l03189"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#abb39926813ff8874f8e453ca04307e53"> 3189</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#abb39926813ff8874f8e453ca04307e53">ast_settimeout</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> rate, <span class="keywordtype">int</span> (*func)(<span class="keyword">const</span> <span class="keywordtype">void</span> *<a class="code" href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>), <span class="keywordtype">void</span> *data)</div><div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;{</div><div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a6644e72f9f643891538eca452ed2993a">ast_settimeout_full</a>(c, rate, func, data, 0);</div><div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;}</div><div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;</div><div class="line"><a name="l03194"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a6644e72f9f643891538eca452ed2993a"> 3194</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a6644e72f9f643891538eca452ed2993a">ast_settimeout_full</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *c, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> rate, <span class="keywordtype">int</span> (*func)(<span class="keyword">const</span> <span class="keywordtype">void</span> *<a class="code" href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>), <span class="keywordtype">void</span> *data, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> is_ao2_obj)</div><div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;{</div><div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> real_rate = rate, max_rate;</div><div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;</div><div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(c);</div><div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;</div><div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#aa1a82c77c44469cd524ebb00357f673b">ast_channel_timingfd</a>(c) == -1) {</div><div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(c);</div><div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;   }</div><div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;</div><div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;   <span class="keywordflow">if</span> (!func) {</div><div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;      rate = 0;</div><div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;      data = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;   }</div><div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;</div><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;   <span class="keywordflow">if</span> (rate &amp;&amp; rate &gt; (max_rate = <a class="code" href="../../db/d41/timing_8h.html#a1d143d561876cec8843bce227c06fed2">ast_timer_get_max_rate</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1e930e0e331c7e82a1bf297addfc5a34">ast_channel_timer</a>(c)))) {</div><div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;      real_rate = max_rate;</div><div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;   }</div><div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;</div><div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Scheduling timer at (%u requested / %u actual) timer ticks per second\n&quot;</span>, rate, real_rate);</div><div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;</div><div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;   res = <a class="code" href="../../db/d41/timing_8h.html#a4dae39fb5fb680a48a05d7567053eb03">ast_timer_set_rate</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1e930e0e331c7e82a1bf297addfc5a34">ast_channel_timer</a>(c), real_rate);</div><div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;</div><div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#aafb009a6e137076234f66440eb48ac5e">ast_channel_timingdata</a>(c) &amp;&amp; <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(c), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5af2e72cd75713b921e156f19bb0c22371">AST_FLAG_TIMINGDATA_IS_AO2_OBJ</a>)) {</div><div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aafb009a6e137076234f66440eb48ac5e">ast_channel_timingdata</a>(c), -1);</div><div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;   }</div><div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;</div><div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#acc673ff60b558a8b69392c29a6478c72">ast_channel_timingfunc_set</a>(c, func);</div><div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a5cf408e716fdcb9c5e303c2998a3237b">ast_channel_timingdata_set</a>(c, data);</div><div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;</div><div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;   <span class="keywordflow">if</span> (data &amp;&amp; is_ao2_obj) {</div><div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(data, 1);</div><div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(c), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5af2e72cd75713b921e156f19bb0c22371">AST_FLAG_TIMINGDATA_IS_AO2_OBJ</a>);</div><div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(c), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5af2e72cd75713b921e156f19bb0c22371">AST_FLAG_TIMINGDATA_IS_AO2_OBJ</a>);</div><div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;   }</div><div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;</div><div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;   <span class="keywordflow">if</span> (func == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; rate == 0 &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#a3e3e7e66e65ad9cdba2299e36b13e173">ast_channel_fdno</a>(c) == <a class="code" href="../../d5/d7b/channel_8h.html#aa2c87e87fcb0c34e45f4596448dea70e">AST_TIMING_FD</a>) {</div><div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;      <span class="comment">/* Clearing the timing func and setting the rate to 0</span></div><div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;<span class="comment">       * means that we don&#39;t want to be reading from the timingfd</span></div><div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;<span class="comment">       * any more. Setting c-&gt;fdno to -1 means we won&#39;t have any</span></div><div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;<span class="comment">       * errant reads from the timingfd, meaning we won&#39;t potentially</span></div><div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;<span class="comment">       * miss any important frames.</span></div><div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aa2048158d099227002ac76f41865c5b5">ast_channel_fdno_set</a>(c, -1);</div><div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;   }</div><div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;</div><div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(c);</div><div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;</div><div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;}</div><div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;</div><div class="line"><a name="l03248"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a9b4476ddb41746948476b2ac7a9875a4"> 3248</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a9b4476ddb41746948476b2ac7a9875a4">ast_waitfordigit_full</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *c, <span class="keywordtype">int</span> timeout_ms, <span class="keyword">const</span> <span class="keywordtype">char</span> *breakon, <span class="keywordtype">int</span> audiofd, <span class="keywordtype">int</span> cmdfd)</div><div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;{</div><div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;   <span class="keyword">struct </span>timeval start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;   <span class="keywordtype">int</span> ms;</div><div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;</div><div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;   <span class="comment">/* Stop if we&#39;re a zombie or need a soft hangup */</span></div><div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(c), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a26796fa52cc5857446eec8d16a4b718d">AST_FLAG_ZOMBIE</a>) || <a class="code" href="../../d4/d28/channel_8c.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(c))</div><div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;</div><div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;   <span class="comment">/* Only look for the end of DTMF, don&#39;t bother with the beginning and don&#39;t emulate things */</span></div><div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#aa9d8ea64f1c03ccc844f630bb59b9466">ast_channel_set_flag</a>(c, <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a668ac945c84f50becaca2a6134e64058">AST_FLAG_END_DTMF_ONLY</a>);</div><div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;</div><div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;   <span class="comment">/* Wait for a digit, no more than timeout_ms milliseconds total.</span></div><div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;<span class="comment">    * Or, wait indefinitely if timeout_ms is &lt;0.</span></div><div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;   <span class="keywordflow">while</span> ((ms = <a class="code" href="../../de/df7/time_8h.html#a904a6933b710e14c7fa2029a0f0cc91a">ast_remaining_ms</a>(start, timeout_ms))) {</div><div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *rchan;</div><div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;      <span class="keywordtype">int</span> outfd = -1;</div><div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;</div><div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;      <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = 0;</div><div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;      <span class="comment">/* While ast_waitfor_nandfds tries to help by reducing the timeout by how much was waited,</span></div><div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;<span class="comment">       * it is unhelpful if it waited less than a millisecond.</span></div><div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;      rchan = <a class="code" href="../../d4/d28/channel_8c.html#a2e63eaa5b4d94f214edf99838ef7e7e4">ast_waitfor_nandfds</a>(&amp;c, 1, &amp;cmdfd, (cmdfd &gt; -1) ? 1 : 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;outfd, &amp;ms);</div><div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;</div><div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;      <span class="keywordflow">if</span> (!rchan &amp;&amp; outfd &lt; 0 &amp;&amp; ms) {</div><div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> == 0 || <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> == EINTR)</div><div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Wait failed (%s)\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;         <a class="code" href="../../d4/d28/channel_8c.html#a1d9fcff85d7adbe0bd54f88eb927998c">ast_channel_clear_flag</a>(c, <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a668ac945c84f50becaca2a6134e64058">AST_FLAG_END_DTMF_ONLY</a>);</div><div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (outfd &gt; -1) {</div><div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;         <span class="comment">/* The FD we were watching has something waiting */</span></div><div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;The FD we were waiting for has something waiting. Waitfordigit returning numeric 1\n&quot;</span>);</div><div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;         <a class="code" href="../../d4/d28/channel_8c.html#a1d9fcff85d7adbe0bd54f88eb927998c">ast_channel_clear_flag</a>(c, <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a668ac945c84f50becaca2a6134e64058">AST_FLAG_END_DTMF_ONLY</a>);</div><div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;         <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rchan) {</div><div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;         <span class="keywordtype">int</span> res;</div><div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f = <a class="code" href="../../d4/d28/channel_8c.html#a7ef6737309dc9e8b6c4a7cb4800638b1">ast_read</a>(c);</div><div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;</div><div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;         <span class="keywordflow">if</span> (!f) {</div><div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;            <a class="code" href="../../d4/d28/channel_8c.html#a1d9fcff85d7adbe0bd54f88eb927998c">ast_channel_clear_flag</a>(c, <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a668ac945c84f50becaca2a6134e64058">AST_FLAG_END_DTMF_ONLY</a>);</div><div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;</div><div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;         }</div><div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;</div><div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;         <span class="keywordflow">switch</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a>) {</div><div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be">AST_FRAME_DTMF_BEGIN</a>:</div><div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a>:</div><div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;            res = f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>;</div><div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;            <span class="keywordflow">if</span> (!breakon || strchr(breakon, res)) {</div><div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;               <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;               <a class="code" href="../../d4/d28/channel_8c.html#a1d9fcff85d7adbe0bd54f88eb927998c">ast_channel_clear_flag</a>(c, <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a668ac945c84f50becaca2a6134e64058">AST_FLAG_END_DTMF_ONLY</a>);</div><div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;               <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;            }</div><div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>:</div><div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;            <span class="keywordflow">switch</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>) {</div><div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba">AST_CONTROL_HANGUP</a>:</div><div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;               <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;               <a class="code" href="../../d4/d28/channel_8c.html#a1d9fcff85d7adbe0bd54f88eb927998c">ast_channel_clear_flag</a>(c, <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a668ac945c84f50becaca2a6134e64058">AST_FLAG_END_DTMF_ONLY</a>);</div><div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;               <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa95eb913e6cbbac8a34e69905245fdf4">AST_CONTROL_STREAM_STOP</a>:</div><div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a32e9dbe9416e847668084be16d4698c9">AST_CONTROL_STREAM_SUSPEND</a>:</div><div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a32b72bba20e26bcd2d5a299c5d939bce">AST_CONTROL_STREAM_RESTART</a>:</div><div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a4e1f998aacd5c878a02040883b846bd7">AST_CONTROL_STREAM_REVERSE</a>:</div><div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae8e6b1d91a861c33a3de923b24f54dec">AST_CONTROL_STREAM_FORWARD</a>:</div><div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;               <span class="comment">/* Fall-through and treat as if it were a DTMF signal. Items</span></div><div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;<span class="comment">                * that perform stream control will handle this. */</span></div><div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;               res = f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>;</div><div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;               <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;               <a class="code" href="../../d4/d28/channel_8c.html#a1d9fcff85d7adbe0bd54f88eb927998c">ast_channel_clear_flag</a>(c, <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a668ac945c84f50becaca2a6134e64058">AST_FLAG_END_DTMF_ONLY</a>);</div><div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;               <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af9665e40f4c9ef6fcfc3e179c6986c41">AST_CONTROL_PVT_CAUSE_CODE</a>:</div><div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a>:</div><div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe">AST_CONTROL_ANSWER</a>:</div><div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a>:</div><div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af334ccaa958af9b049d6bfcaa41549b8">AST_CONTROL_SRCCHANGE</a>:</div><div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac976c01c12ae70e36b99b16dbfa3dda7">AST_CONTROL_CONNECTED_LINE</a>:</div><div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a5344deefcbdcca938001314e81ea195a">AST_CONTROL_REDIRECTING</a>:</div><div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390afa94175de1fafa29c027294f1e5a2aee">AST_CONTROL_UPDATE_RTP_PEER</a>:</div><div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5">AST_CONTROL_HOLD</a>:</div><div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e">AST_CONTROL_UNHOLD</a>:</div><div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae8f2cd460fdc81e0a774434fa002e4bf">AST_CONTROL_FLASH</a>:</div><div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;            <span class="keywordflow">case</span> -1:</div><div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;               <span class="comment">/* Unimportant */</span></div><div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;            <span class="keywordflow">default</span>:</div><div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unexpected control subclass &#39;%d&#39;\n&quot;</span>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>);</div><div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;            }</div><div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>:</div><div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;            <span class="comment">/* Write audio if appropriate */</span></div><div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;            <span class="keywordflow">if</span> (audiofd &gt; -1) {</div><div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;               <span class="keywordflow">if</span> (write(audiofd, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>) &lt; 0) {</div><div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;                  <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;write() failed: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;               }</div><div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;            }</div><div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;         <span class="keywordflow">default</span>:</div><div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;            <span class="comment">/* Ignore */</span></div><div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;         }</div><div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;         <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;      }</div><div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;   }</div><div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;</div><div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a1d9fcff85d7adbe0bd54f88eb927998c">ast_channel_clear_flag</a>(c, <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a668ac945c84f50becaca2a6134e64058">AST_FLAG_END_DTMF_ONLY</a>);</div><div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;</div><div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;   <span class="keywordflow">return</span> 0; <span class="comment">/* Time is up */</span></div><div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;}</div><div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;</div><div class="line"><a name="l03361"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a4553faa9cf1e184164ebb526693585f0"> 3361</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="../../d4/d28/channel_8c.html#a4553faa9cf1e184164ebb526693585f0">DtmfDirection</a> {</div><div class="line"><a name="l03362"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a4553faa9cf1e184164ebb526693585f0ad36d00efd146b7944de99a52d3fb0c75"> 3362</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a4553faa9cf1e184164ebb526693585f0ad36d00efd146b7944de99a52d3fb0c75">DTMF_RECEIVED</a>,</div><div class="line"><a name="l03363"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a4553faa9cf1e184164ebb526693585f0a2b89309e770c7ce1d88fec73d1fef526"> 3363</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a4553faa9cf1e184164ebb526693585f0a2b89309e770c7ce1d88fec73d1fef526">DTMF_SENT</a></div><div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;};</div><div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;</div><div class="line"><a name="l03366"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#af539c9dd9e24b90fd050dcf8931199c3"> 3366</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d4/d28/channel_8c.html#af539c9dd9e24b90fd050dcf8931199c3">dtmf_direction_to_string</a>(<span class="keyword">enum</span> <a class="code" href="../../d4/d28/channel_8c.html#a4553faa9cf1e184164ebb526693585f0">DtmfDirection</a> <a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a>)</div><div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;{</div><div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;   <span class="keywordflow">switch</span> (direction) {</div><div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a4553faa9cf1e184164ebb526693585f0ad36d00efd146b7944de99a52d3fb0c75">DTMF_RECEIVED</a>:</div><div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Received&quot;</span>;</div><div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a4553faa9cf1e184164ebb526693585f0a2b89309e770c7ce1d88fec73d1fef526">DTMF_SENT</a>:</div><div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Sent&quot;</span>;</div><div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;   }</div><div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;</div><div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;?&quot;</span>;</div><div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;}</div><div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;</div><div class="line"><a name="l03378"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a1f333b8dc2771604a8cdb3f42c6b3643"> 3378</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a1f333b8dc2771604a8cdb3f42c6b3643">send_dtmf_begin_event</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan,</div><div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d4/d28/channel_8c.html#a4553faa9cf1e184164ebb526693585f0">DtmfDirection</a> <a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>)</div><div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;{</div><div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, blob, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;   <span class="keywordtype">char</span> digit_str[] = { <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>, <span class="charliteral">&#39;\0&#39;</span> };</div><div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;</div><div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;   blob = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{ s: s, s: s }&quot;</span>,</div><div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;      <span class="stringliteral">&quot;digit&quot;</span>, digit_str,</div><div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;      <span class="stringliteral">&quot;direction&quot;</span>, <a class="code" href="../../d4/d28/channel_8c.html#af539c9dd9e24b90fd050dcf8931199c3">dtmf_direction_to_string</a>(direction));</div><div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;   <span class="keywordflow">if</span> (!blob) {</div><div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;   }</div><div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;</div><div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf03b8daa7784a26648db90614add6caa">ast_channel_publish_blob</a>(chan, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga9de7fcf34407ccef0f56764ecfa1f7a4">ast_channel_dtmf_begin_type</a>(), blob);</div><div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;}</div><div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;</div><div class="line"><a name="l03394"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aab3dd86fc48e9fb02b9a00732a5ce88d"> 3394</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#aab3dd86fc48e9fb02b9a00732a5ce88d">send_dtmf_end_event</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan,</div><div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d4/d28/channel_8c.html#a4553faa9cf1e184164ebb526693585f0">DtmfDirection</a> <a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>, <span class="keywordtype">long</span> duration_ms)</div><div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;{</div><div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, blob, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;   <span class="keywordtype">char</span> digit_str[] = { <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>, <span class="charliteral">&#39;\0&#39;</span> };</div><div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;</div><div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;   blob = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{ s: s, s: s, s: I }&quot;</span>,</div><div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;      <span class="stringliteral">&quot;digit&quot;</span>, digit_str,</div><div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;      <span class="stringliteral">&quot;direction&quot;</span>, <a class="code" href="../../d4/d28/channel_8c.html#af539c9dd9e24b90fd050dcf8931199c3">dtmf_direction_to_string</a>(direction),</div><div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;      <span class="stringliteral">&quot;duration_ms&quot;</span>, (<a class="code" href="../../d4/d05/json_8h.html#ae2cc29409ec389e8feaf38ec3a585d83">ast_json_int_t</a>)duration_ms);</div><div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;   <span class="keywordflow">if</span> (!blob) {</div><div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;   }</div><div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;</div><div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf03b8daa7784a26648db90614add6caa">ast_channel_publish_blob</a>(chan, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaa247523a680e6e57a3478b7f992ab3a5">ast_channel_dtmf_end_type</a>(), blob);</div><div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;}</div><div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;</div><div class="line"><a name="l03411"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aaabd7223505285d5f470bcd30400cb47"> 3411</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#aaabd7223505285d5f470bcd30400cb47">send_flash_event</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;{</div><div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf03b8daa7784a26648db90614add6caa">ast_channel_publish_blob</a>(chan, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga55a45e7abb3232774a1e2d1aceaf3491">ast_channel_flash_type</a>(), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;}</div><div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;</div><div class="line"><a name="l03416"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a34c65699645170a1168e9177ad8aebd4"> 3416</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a34c65699645170a1168e9177ad8aebd4">ast_read_generator_actions</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f)</div><div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;{</div><div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d2a/structast__generator.html">ast_generator</a> *<a class="code" href="../../df/dde/app__fax_8c.html#a36aeb2eb01afb248bad64a309d743636">generator</a>;</div><div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;   <span class="keywordtype">void</span> *gendata;</div><div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;   <span class="keywordtype">int</span> samples;</div><div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;</div><div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;   generator = <a class="code" href="../../d5/d7b/channel_8h.html#a6fa8e680c963b66575d1950c19493b40">ast_channel_generator</a>(chan);</div><div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;   <span class="keywordflow">if</span> (!generator</div><div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;      || !generator-&gt;<a class="code" href="../../de/d2a/structast__generator.html#a3022be24de5fabbccff620c25841f738">generate</a></div><div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;      || f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> != <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a></div><div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;      || !<a class="code" href="../../d5/d7b/channel_8h.html#afb86bdd7fa42b7bf8ac2fbfab01f67ef">ast_channel_generatordata</a>(chan)</div><div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;      || <a class="code" href="../../d5/d7b/channel_8h.html#ab23fb6dcd2315d22d59b5101b8ca5417">ast_channel_timingfunc</a>(chan)) {</div><div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;   }</div><div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;</div><div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;<span class="comment">    * We must generate frames in phase locked mode since</span></div><div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;<span class="comment">    * we have no internal timer available.</span></div><div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a>(chan)) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a>) {</div><div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;      <span class="keywordtype">float</span> factor;</div><div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;      factor = ((float) <a class="code" href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a>(chan))) / ((float) <a class="code" href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>));</div><div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;      samples = (int) (((<span class="keywordtype">float</span>) f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>) * factor);</div><div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;      samples = f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>;</div><div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;   }</div><div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;</div><div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;   gendata = <a class="code" href="../../d5/d7b/channel_8h.html#afb86bdd7fa42b7bf8ac2fbfab01f67ef">ast_channel_generatordata</a>(chan);</div><div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a6858fa4ed2eb8036713a0dacd04b7da9">ast_channel_generatordata_set</a>(chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);     <span class="comment">/* reset, to let writes go through */</span></div><div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;</div><div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;<span class="comment">    * This unlock is here based on two assumptions that hold true at</span></div><div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;<span class="comment">    * this point in the code. 1) this function is only called from</span></div><div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;<span class="comment">    * within __ast_read() and 2) all generators call ast_write() in</span></div><div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;<span class="comment">    * their generate callback.</span></div><div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;<span class="comment">    * The reason this is added is so that when ast_write is called,</span></div><div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;<span class="comment">    * the lock that occurs there will not recursively lock the</span></div><div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;<span class="comment">    * channel.  Doing this will allow deadlock avoidance to work in</span></div><div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;<span class="comment">    * deeper functions.</span></div><div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;   res = generator-&gt;<a class="code" href="../../de/d2a/structast__generator.html#a3022be24de5fabbccff620c25841f738">generate</a>(chan, gendata, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>, samples);</div><div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;   <span class="keywordflow">if</span> (generator == <a class="code" href="../../d5/d7b/channel_8h.html#a6fa8e680c963b66575d1950c19493b40">ast_channel_generator</a>(chan)) {</div><div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a6858fa4ed2eb8036713a0dacd04b7da9">ast_channel_generatordata_set</a>(chan, gendata);</div><div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;      <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Auto-deactivating generator\n&quot;</span>);</div><div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;         <a class="code" href="../../d4/d28/channel_8c.html#a7160355005776732fba88cc020f4a45b">ast_deactivate_generator</a>(chan);</div><div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;      }</div><div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;   }</div><div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;}</div><div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;</div><div class="line"><a name="l03470"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a4efcbb7271ae141197a4ec6fa0c834c2"> 3470</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a4efcbb7271ae141197a4ec6fa0c834c2">queue_dtmf_readq</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f)</div><div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;{</div><div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *fr = <a class="code" href="../../d5/d7b/channel_8h.html#a33ca8f4f979f8a920a1832d509f24a1a">ast_channel_dtmff</a>(chan);</div><div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;   <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Came out of the chan driv\n&quot;</span>);</div><div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;</div><div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;   fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a>;</div><div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;   fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> = f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>;</div><div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;   fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a> = f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a>;</div><div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;</div><div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;   <span class="comment">/* The only time this function will be called is for a frame that just came</span></div><div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;<span class="comment">    * out of the channel driver.  So, we want to stick it on the tail of the</span></div><div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;<span class="comment">    * readq. */</span></div><div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;</div><div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3df7007b550647c63a1b211181b55814">ast_queue_frame</a>(chan, fr);</div><div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;}</div><div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;<span class="comment"> * \brief Determine whether or not we should ignore DTMF in the readq</span></div><div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03489"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a673ed25d2c254caadf6b68f1c64c84f5"> 3489</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a673ed25d2c254caadf6b68f1c64c84f5">should_skip_dtmf</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;{</div><div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ab05edf1bf82b02f5987de92a6960a9bd">AST_FLAG_DEFER_DTMF</a> | <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a7aeded1dc9df91dee01bb7af719880c1">AST_FLAG_EMULATE_DTMF</a>)) {</div><div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;      <span class="comment">/* We&#39;re in the middle of emulating a digit, or DTMF has been</span></div><div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;<span class="comment">       * explicitly deferred.  Skip this digit, then. */</span></div><div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;   }</div><div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;</div><div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(*<a class="code" href="../../d5/d7b/channel_8h.html#a70d5efd26b6272df04b33acc2a810ca7">ast_channel_dtmf_tv</a>(chan)) &amp;&amp;</div><div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;         <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), *<a class="code" href="../../d5/d7b/channel_8h.html#a70d5efd26b6272df04b33acc2a810ca7">ast_channel_dtmf_tv</a>(chan)) &lt; <a class="code" href="../../d4/d28/channel_8c.html#a21882e640e01106e62bdab88849a17c5">AST_MIN_DTMF_GAP</a>) {</div><div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;      <span class="comment">/* We&#39;re not in the middle of a digit, but it hasn&#39;t been long enough</span></div><div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;<span class="comment">       * since the last digit, so we&#39;ll have to skip DTMF for now. */</span></div><div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;   }</div><div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;</div><div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;}</div><div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;<span class="comment"> * \brief calculates the number of samples to jump forward with in a monitor stream.</span></div><div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;<span class="comment"> * \note When using ast_seekstream() with the read and write streams of a monitor,</span></div><div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;<span class="comment"> * the number of samples to seek forward must be of the same sample rate as the stream</span></div><div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;<span class="comment"> * or else the jump will not be calculated correctly.</span></div><div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;<span class="comment"> * \retval number of samples to seek forward after rate conversion.</span></div><div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03516"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a2679f53f358ce4d56596c511afab764b"> 3516</a></span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a2679f53f358ce4d56596c511afab764b">calc_monitor_jump</a>(<span class="keywordtype">int</span> <a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>, <span class="keywordtype">int</span> sample_rate, <span class="keywordtype">int</span> seek_rate)</div><div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;{</div><div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;   <span class="keywordtype">int</span> diff = sample_rate - seek_rate;</div><div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;</div><div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;   <span class="keywordflow">if</span> (diff &gt; 0) {</div><div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;      samples = samples / (float) (sample_rate / seek_rate);</div><div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (diff &lt; 0) {</div><div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;      samples = samples * (float) (seek_rate / sample_rate);</div><div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;   }</div><div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;</div><div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>;</div><div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;}</div><div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;</div><div class="line"><a name="l03529"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a9fadaf671cfcb56c14d2253510a6afb3"> 3529</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *<a class="code" href="../../d4/d28/channel_8c.html#a9fadaf671cfcb56c14d2253510a6afb3">__ast_read</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">int</span> dropaudio, <span class="keywordtype">int</span> dropnondefault)</div><div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;{</div><div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;   <span class="comment">/* the return value */</span></div><div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;   <span class="keywordtype">int</span> prestate;</div><div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;   <span class="keywordtype">int</span> cause = 0;</div><div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *default_stream = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;</div><div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;   <span class="comment">/* this function is very long so make sure there is only one return</span></div><div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;<span class="comment">    * point at the end (there are only two exceptions to this).</span></div><div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;</div><div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;   <span class="comment">/* Stop if we&#39;re a zombie or need a soft hangup */</span></div><div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a26796fa52cc5857446eec8d16a4b718d">AST_FLAG_ZOMBIE</a>) || <a class="code" href="../../d4/d28/channel_8c.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(chan)) {</div><div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a6fa8e680c963b66575d1950c19493b40">ast_channel_generator</a>(chan))</div><div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;         <a class="code" href="../../d4/d28/channel_8c.html#a7160355005776732fba88cc020f4a45b">ast_deactivate_generator</a>(chan);</div><div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;</div><div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;<span class="comment">       * It is possible for chan-&gt;_softhangup to be set and there</span></div><div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;<span class="comment">       * still be control frames that need to be read.  Instead of</span></div><div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;<span class="comment">       * just going to &#39;done&#39; in the case of ast_check_hangup(), we</span></div><div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;<span class="comment">       * need to queue the end-of-Q frame so that it can mark the end</span></div><div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;<span class="comment">       * of the read queue.  If there are frames to be read,</span></div><div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;<span class="comment">       * ast_queue_control() will be called repeatedly, but will only</span></div><div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;<span class="comment">       * queue the first end-of-Q frame.</span></div><div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#adac99999f1e55833e7f903979d67b48b">ast_channel_softhangup_internal_flag</a>(chan)) {</div><div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;GOT HERE\n&quot;</span>);</div><div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;         <a class="code" href="../../d4/d28/channel_8c.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a>(chan, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390acb9fefa4f5e5e4b3f7f12c3483b33ee6">AST_CONTROL_END_OF_Q</a>);</div><div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;         <span class="keywordflow">goto</span> <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>;</div><div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;      }</div><div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;<span class="preprocessor">#ifdef AST_DEVMODE</span></div><div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;<span class="comment">       * The ast_waitfor() code records which of the channel&#39;s file</span></div><div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;<span class="comment">       * descriptors reported that data is available.  In theory,</span></div><div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;<span class="comment">       * ast_read() should only be called after ast_waitfor() reports</span></div><div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;<span class="comment">       * that a channel has data available for reading.  However,</span></div><div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;<span class="comment">       * there still may be some edge cases throughout the code where</span></div><div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;<span class="comment">       * ast_read() is called improperly.  This can potentially cause</span></div><div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;<span class="comment">       * problems, so if this is a developer build, make a lot of</span></div><div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;<span class="comment">       * noise if this happens so that it can be addressed.</span></div><div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;<span class="comment">       *</span></div><div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;<span class="comment">       * One of the potential problems is blocking on a dead channel.</span></div><div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a3e3e7e66e65ad9cdba2299e36b13e173">ast_channel_fdno</a>(chan) == -1) {</div><div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>,</div><div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;            <span class="stringliteral">&quot;ast_read() on chan &#39;%s&#39; called with no recorded file descriptor.\n&quot;</span>,</div><div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;      }</div><div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;   }</div><div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;</div><div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;   prestate = <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(chan);</div><div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;</div><div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#aa1a82c77c44469cd524ebb00357f673b">ast_channel_timingfd</a>(chan) &gt; -1 &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#a3e3e7e66e65ad9cdba2299e36b13e173">ast_channel_fdno</a>(chan) == <a class="code" href="../../d5/d7b/channel_8h.html#aa2c87e87fcb0c34e45f4596448dea70e">AST_TIMING_FD</a>) {</div><div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;      <span class="keyword">enum</span> <a class="code" href="../../db/d41/timing_8h.html#aa21078cc57057eeda614cb7780bdc60a">ast_timer_event</a> res;</div><div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;      <span class="keywordtype">int</span> trigger_dtmf_emulating = <a class="code" href="../../d4/d28/channel_8c.html#ae166e74521547a7d8390b8b154b236be">should_trigger_dtmf_emulating</a>(chan);</div><div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;</div><div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a75202bcfa58fce5d40e2daddc73b8d11">AST_FLAG_EXCEPTION</a>);</div><div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;</div><div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;      res = <a class="code" href="../../db/d41/timing_8h.html#a5b0e054f083f10b9f0b2ac7701dddbed">ast_timer_get_event</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1e930e0e331c7e82a1bf297addfc5a34">ast_channel_timer</a>(chan));</div><div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;</div><div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;      <span class="keywordflow">switch</span> (res) {</div><div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../db/d41/timing_8h.html#aa21078cc57057eeda614cb7780bdc60aa6338cdd939adbc65d20e3412bf11fc3c">AST_TIMING_EVENT_EXPIRED</a>:</div><div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../db/d41/timing_8h.html#a338edb7e927b891ef4aba288d9c07e56">ast_timer_ack</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1e930e0e331c7e82a1bf297addfc5a34">ast_channel_timer</a>(chan), 1) &lt; 0) {</div><div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to acknoweldge timer in ast_read\n&quot;</span>);</div><div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>;</div><div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;         }</div><div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;</div><div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#ab23fb6dcd2315d22d59b5101b8ca5417">ast_channel_timingfunc</a>(chan)) {</div><div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;            <span class="comment">/* save a copy of func/data before unlocking the channel */</span></div><div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a0def826adf4c20a4d185426b25ca15b6">ast_timing_func_t</a> func = <a class="code" href="../../d5/d7b/channel_8h.html#ab23fb6dcd2315d22d59b5101b8ca5417">ast_channel_timingfunc</a>(chan);</div><div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;            <span class="keywordtype">void</span> *data = <a class="code" href="../../d5/d7b/channel_8h.html#aafb009a6e137076234f66440eb48ac5e">ast_channel_timingdata</a>(chan);</div><div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;            <span class="keywordtype">int</span> got_ref = 0;</div><div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;            <span class="keywordflow">if</span> (data &amp;&amp; <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5af2e72cd75713b921e156f19bb0c22371">AST_FLAG_TIMINGDATA_IS_AO2_OBJ</a>)) {</div><div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;               <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(data, 1);</div><div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;               got_ref = 1;</div><div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;            }</div><div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#aa2048158d099227002ac76f41865c5b5">ast_channel_fdno_set</a>(chan, -1);</div><div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;            func(data);</div><div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;            <span class="keywordflow">if</span> (got_ref) {</div><div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;               <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(data, -1);</div><div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;            }</div><div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;</div><div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;            <span class="keywordflow">if</span> (trigger_dtmf_emulating) {</div><div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;               <span class="comment">/*</span></div><div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;<span class="comment">                * Since we&#39;re breaking out of this switch block and not</span></div><div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;<span class="comment">                * returning, we need to re-lock the channel.</span></div><div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;<span class="comment">                */</span></div><div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;               <span class="comment">/* generate null frame to trigger dtmf emulating */</span></div><div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;               f = &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;            }</div><div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (trigger_dtmf_emulating) {</div><div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;            <span class="comment">/* generate null frame to trigger dtmf emualating */</span></div><div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;            f = &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;            <a class="code" href="../../db/d41/timing_8h.html#a4dae39fb5fb680a48a05d7567053eb03">ast_timer_set_rate</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1e930e0e331c7e82a1bf297addfc5a34">ast_channel_timer</a>(chan), 0);</div><div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;            <span class="comment">/* generate very last null frame to trigger dtmf emulating */</span></div><div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;            f = &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;         }</div><div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;</div><div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;         <span class="comment">/* cannot &#39;goto done&#39; because the channel is already unlocked */</span></div><div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;         <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;</div><div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../db/d41/timing_8h.html#aa21078cc57057eeda614cb7780bdc60aa2f1a45286f54b8f415b28dc072b931e6">AST_TIMING_EVENT_CONTINUOUS</a>:</div><div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad89ab3133d87a496f63da917148d02be">ast_channel_readq</a>(chan)) ||</div><div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;            !<a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(<a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad89ab3133d87a496f63da917148d02be">ast_channel_readq</a>(chan)), <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>)) {</div><div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;            <a class="code" href="../../db/d41/timing_8h.html#a8cbf7ad0aadeb93e300c809c8babef27">ast_timer_disable_continuous</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1e930e0e331c7e82a1bf297addfc5a34">ast_channel_timer</a>(chan));</div><div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;         }</div><div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;      }</div><div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;</div><div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#ae985d192912f7b94747225672c57dc5d">ast_channel_fd_isset</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a34c26382160debe3411987ec0df1f927">AST_GENERATOR_FD</a>) &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#a3e3e7e66e65ad9cdba2299e36b13e173">ast_channel_fdno</a>(chan) == <a class="code" href="../../d5/d7b/channel_8h.html#a34c26382160debe3411987ec0df1f927">AST_GENERATOR_FD</a>) {</div><div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;      <span class="comment">/* if the AST_GENERATOR_FD is set, call the generator with args</span></div><div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;<span class="comment">       * set to -1 so it can do whatever it needs to.</span></div><div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;      <span class="keywordtype">void</span> *tmp = <a class="code" href="../../d5/d7b/channel_8h.html#afb86bdd7fa42b7bf8ac2fbfab01f67ef">ast_channel_generatordata</a>(chan);</div><div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a6858fa4ed2eb8036713a0dacd04b7da9">ast_channel_generatordata_set</a>(chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);     <span class="comment">/* reset to let ast_write get through */</span></div><div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a6fa8e680c963b66575d1950c19493b40">ast_channel_generator</a>(chan)-&gt;<a class="code" href="../../de/d2a/structast__generator.html#a3022be24de5fabbccff620c25841f738">generate</a>(chan, tmp, -1, -1);</div><div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a6858fa4ed2eb8036713a0dacd04b7da9">ast_channel_generatordata_set</a>(chan, tmp);</div><div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;      f = &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aa2048158d099227002ac76f41865c5b5">ast_channel_fdno_set</a>(chan, -1);</div><div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>;</div><div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#ae985d192912f7b94747225672c57dc5d">ast_channel_fd_isset</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#ad5ad19825a9563cf7d6fefb9bf4f5ffb">AST_JITTERBUFFER_FD</a>) &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#a3e3e7e66e65ad9cdba2299e36b13e173">ast_channel_fdno</a>(chan) == <a class="code" href="../../d5/d7b/channel_8h.html#ad5ad19825a9563cf7d6fefb9bf4f5ffb">AST_JITTERBUFFER_FD</a>) {</div><div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a75202bcfa58fce5d40e2daddc73b8d11">AST_FLAG_EXCEPTION</a>);</div><div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;   }</div><div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;</div><div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;   <span class="comment">/* Read and ignore anything on the alertpipe, but read only</span></div><div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;<span class="comment">      one sizeof(blah) per frame that we send from it */</span></div><div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#ab9dd406367e3638a37019b1f7f9bbff8">ast_channel_internal_alert_read</a>(chan) == <a class="code" href="../../dc/d4d/alertpipe_8h.html#a8b0f1871693fb6fffd5f0a7b8d9e6ed3a35e526325a03e771cb524619341f7642">AST_ALERT_READ_FATAL</a>) {</div><div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;      f = &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>;</div><div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;   }</div><div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;</div><div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;   <span class="comment">/* Check for pending read queue */</span></div><div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad89ab3133d87a496f63da917148d02be">ast_channel_readq</a>(chan))) {</div><div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;      <span class="keywordtype">int</span> skipped_dtmf_frame = 0;</div><div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;      <span class="keywordtype">int</span> skip_dtmf = <a class="code" href="../../d4/d28/channel_8c.html#a673ed25d2c254caadf6b68f1c64c84f5">should_skip_dtmf</a>(chan);</div><div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;</div><div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad89ab3133d87a496f63da917148d02be">ast_channel_readq</a>(chan), f, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>) {</div><div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;         <span class="comment">/* We have to be picky about which frame we pull off of the readq because</span></div><div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;<span class="comment">          * there are cases where we want to leave DTMF frames on the queue until</span></div><div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;<span class="comment">          * some later time. */</span></div><div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;</div><div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;         <span class="keywordflow">if</span> ( (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be">AST_FRAME_DTMF_BEGIN</a> || f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a>) &amp;&amp; skip_dtmf) {</div><div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;            skipped_dtmf_frame = 1;</div><div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;         }</div><div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;</div><div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a>(<a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;      }</div><div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;</div><div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;      <span class="keywordflow">if</span> (!f) {</div><div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;         <span class="comment">/* There were no acceptable frames on the readq. */</span></div><div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;         f = &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;         <span class="keywordflow">if</span> (!skipped_dtmf_frame) {</div><div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;<span class="comment">             * Do not trigger alert pipe if only buffered dtmf begin or end frames</span></div><div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;<span class="comment">             * are left in the readq.</span></div><div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#aaca68f142e039bcb3c69cc7524b958a8">ast_channel_alert_write</a>(chan);</div><div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;<span class="comment">             * Safely disable continous timer events if only buffered dtmf begin or end</span></div><div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;<span class="comment">             * frames are left in the readq.</span></div><div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;            <a class="code" href="../../db/d41/timing_8h.html#a8cbf7ad0aadeb93e300c809c8babef27">ast_timer_disable_continuous</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1e930e0e331c7e82a1bf297addfc5a34">ast_channel_timer</a>(chan));</div><div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;         }</div><div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;      }</div><div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;</div><div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;      <span class="comment">/* Interpret hangup and end-of-Q frames to return NULL */</span></div><div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;      <span class="comment">/* XXX why not the same for frames from the channel ? */</span></div><div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;      <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>) {</div><div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;         <span class="keywordflow">switch</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>) {</div><div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba">AST_CONTROL_HANGUP</a>:</div><div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#ab683c21c4a34450c4bfb8b672a7b4045">ast_channel_softhangup_internal_flag_add</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2e185ce313026e13ed90ae3a319c9cb7">AST_SOFTHANGUP_DEV</a>);</div><div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;            cause = f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#a5ad776be1fb768f3399aafcd1b58b3a2">uint32</a>;</div><div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;            <span class="comment">/* Fall through */</span></div><div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390acb9fefa4f5e5e4b3f7f12c3483b33ee6">AST_CONTROL_END_OF_Q</a>:</div><div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;            <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;            f = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;         <span class="keywordflow">default</span>:</div><div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;         }</div><div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a> || f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30">AST_FRAME_VIDEO</a>) {</div><div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan) &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;read_stream) {</div><div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;            stream = <a class="code" href="../../d8/d95/stream_8h.html#aa4a9c0de95417c5db8eda8544cd1631d">ast_stream_topology_get_stream</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ae35174b33cb8d9b4c1424448b21e50d2">ast_channel_get_stream_topology</a>(chan), f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a>);</div><div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;            default_stream = <a class="code" href="../../d5/d7b/channel_8h.html#acf35101c44db296b56c86c9ed4e8e54b">ast_channel_get_default_stream</a>(chan, <a class="code" href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>));</div><div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;            <span class="comment">/* Since this channel driver does not support multistream determine the default stream this frame</span></div><div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;<span class="comment">             * originated from and update the frame to include it.</span></div><div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;            stream = default_stream = <a class="code" href="../../d5/d7b/channel_8h.html#acf35101c44db296b56c86c9ed4e8e54b">ast_channel_get_default_stream</a>(chan, <a class="code" href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>));</div><div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;            <span class="comment">/* In order to allow media to be passed up the underlying media type has to have a format negotiated on</span></div><div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;<span class="comment">             * the channel itself. In cases where this hasn&#39;t happened the channel driver is incorrectly passing up</span></div><div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;<span class="comment">             * a frame for a format that has not been negotiated. If this occurs just drop the frame as we have no</span></div><div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;<span class="comment">             * stream that it came from.</span></div><div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;            <span class="keywordflow">if</span> (!stream) {</div><div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;               <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;               f = &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;               f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a> = <a class="code" href="../../d8/d95/stream_8h.html#a35dd19cc6a6f0310d45e181398095463">ast_stream_get_position</a>(stream);</div><div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;            }</div><div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;         }</div><div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;      }</div><div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a75202bcfa58fce5d40e2daddc73b8d11">AST_FLAG_EXCEPTION</a>)) {</div><div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;exception)</div><div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;            f = <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#aee12d234ffbeab489b533f0974e6f23e">exception</a>(chan);</div><div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;         <span class="keywordflow">else</span> {</div><div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Exception flag set on &#39;%s&#39;, but no exception handler\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;            f = &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;         }</div><div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;         <span class="comment">/* Clear the exception flag */</span></div><div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a75202bcfa58fce5d40e2daddc73b8d11">AST_FLAG_EXCEPTION</a>);</div><div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan) &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;read_stream) {</div><div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;         f = <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#acc23c0bbf303a26450afb09ab0939577">read_stream</a>(chan);</div><div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;</div><div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;         <span class="comment">/* This channel driver supports multistream so the stream_num on the frame is valid, the only</span></div><div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;<span class="comment">          * thing different is that we need to find the default stream so we know whether to invoke the</span></div><div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;<span class="comment">          * default stream logic or not (such as transcoding).</span></div><div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;         <span class="keywordflow">if</span> (f &amp;&amp; (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a> || f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30">AST_FRAME_VIDEO</a>)) {</div><div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;            stream = <a class="code" href="../../d8/d95/stream_8h.html#aa4a9c0de95417c5db8eda8544cd1631d">ast_stream_topology_get_stream</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ae35174b33cb8d9b4c1424448b21e50d2">ast_channel_get_stream_topology</a>(chan), f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a>);</div><div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;            default_stream = <a class="code" href="../../d5/d7b/channel_8h.html#acf35101c44db296b56c86c9ed4e8e54b">ast_channel_get_default_stream</a>(chan, <a class="code" href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>));</div><div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;         }</div><div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan) &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;read) {</div><div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;         f = <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#aa37c9a8963e5e72cddde51a44a0fde38">read</a>(chan);</div><div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;</div><div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;         <span class="comment">/* Since this channel driver does not support multistream determine the default stream this frame</span></div><div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;<span class="comment">          * originated from and update the frame to include it.</span></div><div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;         <span class="keywordflow">if</span> (f &amp;&amp; (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a> || f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30">AST_FRAME_VIDEO</a>)) {</div><div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;            stream = default_stream = <a class="code" href="../../d5/d7b/channel_8h.html#acf35101c44db296b56c86c9ed4e8e54b">ast_channel_get_default_stream</a>(chan, <a class="code" href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>));</div><div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;            <span class="keywordflow">if</span> (!stream) {</div><div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;               <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;               f = &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;               f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a> = <a class="code" href="../../d8/d95/stream_8h.html#a35dd19cc6a6f0310d45e181398095463">ast_stream_get_position</a>(stream);</div><div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;            }</div><div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;         }</div><div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;      }</div><div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No read routine on channel %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;   }</div><div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;</div><div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;   <span class="keywordflow">if</span> (stream == default_stream) {</div><div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;      <span class="comment">/* Perform the framehook read event here. After the frame enters the framehook list</span></div><div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;<span class="comment">       * there is no telling what will happen, &lt;insert mad scientist laugh here&gt;!!! */</span></div><div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;      f = <a class="code" href="../../db/d3c/framehook_8h.html#af5ad720b09a5d67104fabb76ffd46769">ast_framehook_list_read_event</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aff1f86598b895f0346b701570e266ba2">ast_channel_framehooks</a>(chan), f);</div><div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;   }</div><div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;</div><div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;<span class="comment">    * Reset the recorded file descriptor that triggered this read so that we can</span></div><div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;<span class="comment">    * easily detect when ast_read() is called without properly using ast_waitfor().</span></div><div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aa2048158d099227002ac76f41865c5b5">ast_channel_fdno_set</a>(chan, -1);</div><div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;</div><div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;   <span class="keywordflow">if</span> (f) {</div><div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *readq_tail = <a class="code" href="../../df/d90/linkedlists_8h.html#a1e37109bb72d95999821eb45f28c261c">AST_LIST_LAST</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad89ab3133d87a496f63da917148d02be">ast_channel_readq</a>(chan));</div><div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d6/d4b/structast__control__read__action__payload.html">ast_control_read_action_payload</a> *read_action_payload;</div><div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> connected;</div><div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;      <span class="keywordtype">int</span> hooked = 0;</div><div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;</div><div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;</div><div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;      <span class="comment">/* if the channel driver returned more than one frame, stuff the excess</span></div><div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;<span class="comment">         into the readq for the next ast_read call</span></div><div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;<span class="comment">      */</span></div><div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(f, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>)) {</div><div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;         <a class="code" href="../../d4/d28/channel_8c.html#a3df7007b550647c63a1b211181b55814">ast_queue_frame</a>(chan, <a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(f, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>));</div><div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;         <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(<a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(f, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>));</div><div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(f, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>) = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;      }</div><div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;</div><div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;      <span class="keywordflow">if</span> (dropnondefault &amp;&amp; stream != default_stream) {</div><div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;         <span class="comment">/* If the frame originates from a non-default stream and the caller can not handle other streams</span></div><div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;<span class="comment">          * absorb the frame and replace it with a null one instead.</span></div><div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;         <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;         f = &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;      }</div><div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;</div><div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;      <span class="keywordflow">switch</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a>) {</div><div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>:</div><div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;         <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe">AST_CONTROL_ANSWER</a>) {</div><div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;            <span class="keywordflow">if</span> (prestate == <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a> &amp;&amp; <a class="code" href="../../d4/d28/channel_8c.html#aa0a52e573af67cb0f29095177128d186">ast_channel_is_bridged</a>(chan)) {</div><div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Dropping duplicate answer!\n&quot;</span>);</div><div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;               <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;               f = &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;               <span class="comment">/*</span></div><div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;<span class="comment">                * Mark when outgoing channel answered so we can know how</span></div><div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;<span class="comment">                * long the channel has been up.</span></div><div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;<span class="comment">                */</span></div><div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;               <a class="code" href="../../d4/d28/channel_8c.html#adba01eb648735ee5fc46ab1437e2f35b">set_channel_answer_time</a>(chan);</div><div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;</div><div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;               <a class="code" href="../../d4/d28/channel_8c.html#a6b869988b7ee213be11a0e45ee3ba09f">ast_setstate</a>(chan, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>);</div><div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;            }</div><div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a7c6096b70aeb9e6b2b4f9ee5cfccbf7a">AST_CONTROL_READ_ACTION</a>) {</div><div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;            read_action_payload = f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>;</div><div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;            <span class="keywordflow">switch</span> (read_action_payload-&gt;<a class="code" href="../../d6/d4b/structast__control__read__action__payload.html#ade8a15adbed15f8060da2d7004133948">action</a>) {</div><div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a2457835b26aa09c41c6ecf633f95f775a363c133e333ad8893b2f722a40fac35f">AST_FRAME_READ_ACTION_CONNECTED_LINE_MACRO</a>:</div><div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;               <a class="code" href="../../d4/d28/channel_8c.html#abf514b9d96a1821a33fec8c64ee4e26f">ast_party_connected_line_init</a>(&amp;connected);</div><div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;               <a class="code" href="../../d4/d28/channel_8c.html#a5d3c15fe1dffda82e6dc03ca7b26526a">ast_party_connected_line_copy</a>(&amp;connected, <a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(chan));</div><div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../d4/d28/channel_8c.html#a93d3e245d714d1ab18c5fb2ecb5cbf0e">ast_connected_line_parse_data</a>(read_action_payload-&gt;<a class="code" href="../../d6/d4b/structast__control__read__action__payload.html#ad2d69e61752c24ad7723c9a89add4a7c">payload</a>,</div><div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;                  read_action_payload-&gt;<a class="code" href="../../d6/d4b/structast__control__read__action__payload.html#a21fb327bb05e95f14a13ff193882f32b">payload_size</a>, &amp;connected)) {</div><div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;                  <a class="code" href="../../d4/d28/channel_8c.html#a40fc421536e02d30fecaa51a255b4144">ast_party_connected_line_free</a>(&amp;connected);</div><div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;               }</div><div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../d4/d28/channel_8c.html#aafebfefd067ebab73fd66e7c008a8353">ast_channel_connected_line_sub</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, chan, &amp;connected, 0) &amp;&amp;</div><div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;                  <a class="code" href="../../d4/d28/channel_8c.html#a6757eb73bc4592a9e935d6a66380d565">ast_channel_connected_line_macro</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, chan, &amp;connected, 1, 0)) {</div><div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;                  <a class="code" href="../../d4/d28/channel_8c.html#acea4077a84f9d8ffac3c41bf660e3219">ast_indicate_data</a>(chan, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac976c01c12ae70e36b99b16dbfa3dda7">AST_CONTROL_CONNECTED_LINE</a>,</div><div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;                     read_action_payload-&gt;<a class="code" href="../../d6/d4b/structast__control__read__action__payload.html#ad2d69e61752c24ad7723c9a89add4a7c">payload</a>,</div><div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;                     read_action_payload-&gt;<a class="code" href="../../d6/d4b/structast__control__read__action__payload.html#a21fb327bb05e95f14a13ff193882f32b">payload_size</a>);</div><div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;               }</div><div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;               <a class="code" href="../../d4/d28/channel_8c.html#a40fc421536e02d30fecaa51a255b4144">ast_party_connected_line_free</a>(&amp;connected);</div><div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a2457835b26aa09c41c6ecf633f95f775a4b2dcef6c6da53104278190e521d7b1c">AST_FRAME_READ_ACTION_SEND_TEXT</a>:</div><div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;               <a class="code" href="../../d4/d28/channel_8c.html#a83631e0dc02a50802cf857caa3fdc1d7">ast_sendtext</a>(chan, (<span class="keyword">const</span> <span class="keywordtype">char</span> *)read_action_payload-&gt;<a class="code" href="../../d6/d4b/structast__control__read__action__payload.html#ad2d69e61752c24ad7723c9a89add4a7c">payload</a>);</div><div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a2457835b26aa09c41c6ecf633f95f775a9e8b2eb87931f7565311b556a32e6993">AST_FRAME_READ_ACTION_SEND_TEXT_DATA</a>:</div><div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;               <a class="code" href="../../d4/d28/channel_8c.html#a43edfff9df1530b0ae33259e346a32ad">ast_sendtext_data</a>(chan, (<span class="keyword">struct</span> <a class="code" href="../../d9/d44/structast__msg__data.html">ast_msg_data</a> *)read_action_payload-&gt;<a class="code" href="../../d6/d4b/structast__control__read__action__payload.html#ad2d69e61752c24ad7723c9a89add4a7c">payload</a>);</div><div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;            }</div><div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;            <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;            f = &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a44656a284fb1f50d225d2634ede69171">AST_CONTROL_STREAM_TOPOLOGY_REQUEST_CHANGE</a> &amp;&amp; dropnondefault) {</div><div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;            <span class="comment">/* The caller of this function is incapable of handling streams so we don&#39;t accept the change request</span></div><div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;<span class="comment">             * and stick to the streams currently on the channel.</span></div><div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;            <a class="code" href="../../d4/d28/channel_8c.html#a57c9b9b79de9d0c22e404169fc836e9f">ast_channel_stream_topology_changed</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#ae35174b33cb8d9b4c1424448b21e50d2">ast_channel_get_stream_topology</a>(chan));</div><div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;            <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;            f = &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac4227fb216ecb8388d24e9d4776ad400">AST_CONTROL_STREAM_TOPOLOGY_CHANGED</a> &amp;&amp; dropnondefault) {</div><div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;            <span class="comment">/* The caller of this function is incapable of handling streams so we absorb the notification that the</span></div><div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;<span class="comment">             * stream topology has changed.</span></div><div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;            <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;            f = &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae8f2cd460fdc81e0a774434fa002e4bf">AST_CONTROL_FLASH</a>) {</div><div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;            <a class="code" href="../../d4/d28/channel_8c.html#aaabd7223505285d5f470bcd30400cb47">send_flash_event</a>(chan);</div><div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;         }</div><div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a>:</div><div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;         <a class="code" href="../../d4/d28/channel_8c.html#aab3dd86fc48e9fb02b9a00732a5ce88d">send_dtmf_end_event</a>(chan, <a class="code" href="../../d4/d28/channel_8c.html#a4553faa9cf1e184164ebb526693585f0ad36d00efd146b7944de99a52d3fb0c75">DTMF_RECEIVED</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a>);</div><div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#af360dd5e7b67cff6cb747d1aa2ac3db8">LOG_DTMF</a>, <span class="stringliteral">&quot;DTMF end &#39;%c&#39; received on %s, duration %ld ms\n&quot;</span>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a>);</div><div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;         <span class="comment">/* Queue it up if DTMF is deferred, or if DTMF emulation is forced. */</span></div><div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ab05edf1bf82b02f5987de92a6960a9bd">AST_FLAG_DEFER_DTMF</a>) || <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a7aeded1dc9df91dee01bb7af719880c1">AST_FLAG_EMULATE_DTMF</a>)) {</div><div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;            <a class="code" href="../../d4/d28/channel_8c.html#a4efcbb7271ae141197a4ec6fa0c834c2">queue_dtmf_readq</a>(chan, f);</div><div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;            <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;            f = &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a919680ef9fe22e78b9b1e718d3b9a745">AST_FLAG_IN_DTMF</a> | <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a668ac945c84f50becaca2a6134e64058">AST_FLAG_END_DTMF_ONLY</a>)) {</div><div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(*<a class="code" href="../../d5/d7b/channel_8h.html#a70d5efd26b6272df04b33acc2a810ca7">ast_channel_dtmf_tv</a>(chan)) &amp;&amp;</div><div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;                <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), *<a class="code" href="../../d5/d7b/channel_8h.html#a70d5efd26b6272df04b33acc2a810ca7">ast_channel_dtmf_tv</a>(chan)) &lt; <a class="code" href="../../d4/d28/channel_8c.html#a21882e640e01106e62bdab88849a17c5">AST_MIN_DTMF_GAP</a>) {</div><div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;               <span class="comment">/* If it hasn&#39;t been long enough, defer this digit */</span></div><div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;               <a class="code" href="../../d4/d28/channel_8c.html#a4efcbb7271ae141197a4ec6fa0c834c2">queue_dtmf_readq</a>(chan, f);</div><div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;               <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;               f = &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;               <span class="comment">/* There was no begin, turn this into a begin and send the end later */</span></div><div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;               <span class="keyword">struct </span>timeval tv = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;               f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be">AST_FRAME_DTMF_BEGIN</a>;</div><div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;               <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a7aeded1dc9df91dee01bb7af719880c1">AST_FLAG_EMULATE_DTMF</a>);</div><div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#ab53a405a4ee95970b9d8d54749782482">ast_channel_dtmf_digit_to_emulate_set</a>(chan, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>);</div><div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a37dd62f9ca2a7d263997319902554bf0">ast_channel_dtmf_tv_set</a>(chan, &amp;tv);</div><div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;               <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a>) {</div><div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;                  <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a> &gt; <a class="code" href="../../d6/dd6/group__main__options.html#gac4f0ffd69871cc47ad3dc030127b8719">option_dtmfminduration</a>)</div><div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;                     <a class="code" href="../../d5/d7b/channel_8h.html#ac1a262ebb6e17bf3f885a8c194db37c9">ast_channel_emulate_dtmf_duration_set</a>(chan, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a>);</div><div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;                  <span class="keywordflow">else</span></div><div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;                     <a class="code" href="../../d5/d7b/channel_8h.html#ac1a262ebb6e17bf3f885a8c194db37c9">ast_channel_emulate_dtmf_duration_set</a>(chan, <a class="code" href="../../d6/dd6/group__main__options.html#gac4f0ffd69871cc47ad3dc030127b8719">option_dtmfminduration</a>);</div><div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;               } <span class="keywordflow">else</span></div><div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;                  <a class="code" href="../../d5/d7b/channel_8h.html#ac1a262ebb6e17bf3f885a8c194db37c9">ast_channel_emulate_dtmf_duration_set</a>(chan, <a class="code" href="../../d4/d28/channel_8c.html#a4a1bcc0fd8b14e9bbff17b963969bcab">AST_DEFAULT_EMULATE_DTMF_DURATION</a>);</div><div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#af360dd5e7b67cff6cb747d1aa2ac3db8">LOG_DTMF</a>, <span class="stringliteral">&quot;DTMF begin emulation of &#39;%c&#39; with duration %u queued on %s\n&quot;</span>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>, <a class="code" href="../../d5/d7b/channel_8h.html#ad35b4f533481ec376df7be1073addf46">ast_channel_emulate_dtmf_duration</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;</div><div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;               <span class="comment">/*</span></div><div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;<span class="comment">                * Start generating 50 fps timer events (null frames) for dtmf emulating</span></div><div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;<span class="comment">                * independently from any existing incoming voice frames.</span></div><div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;<span class="comment">                * If channel generator is already activated in regular mode use these</span></div><div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;<span class="comment">                * timer events to generate null frames.</span></div><div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;<span class="comment">                */</span></div><div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;               <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#a6fa8e680c963b66575d1950c19493b40">ast_channel_generator</a>(chan)) {</div><div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;                  <a class="code" href="../../db/d41/timing_8h.html#a4dae39fb5fb680a48a05d7567053eb03">ast_timer_set_rate</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1e930e0e331c7e82a1bf297addfc5a34">ast_channel_timer</a>(chan), 50);</div><div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;               }</div><div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;            }</div><div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan)) {</div><div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;               <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *old_frame = f;<span class="comment"></span></div><div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;<span class="comment">               /*!</span></div><div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;<span class="comment">                * \todo XXX It is possible to write a digit to the audiohook twice</span></div><div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;<span class="comment">                * if the digit was originally read while the channel was in autoservice. */</span></div><div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;               f = <a class="code" href="../../d0/d79/audiohook_8h.html#a6351c89eb98b1832e85fa9c0fca7383f">ast_audiohook_write_list</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan), <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65">AST_AUDIOHOOK_DIRECTION_READ</a>, f);</div><div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;               <span class="keywordflow">if</span> (old_frame != f)</div><div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;                  <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(old_frame);</div><div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;            }</div><div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;            <span class="keyword">struct </span>timeval now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a919680ef9fe22e78b9b1e718d3b9a745">AST_FLAG_IN_DTMF</a>)) {</div><div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#af360dd5e7b67cff6cb747d1aa2ac3db8">LOG_DTMF</a>, <span class="stringliteral">&quot;DTMF end accepted with begin &#39;%c&#39; on %s\n&quot;</span>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;               <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a919680ef9fe22e78b9b1e718d3b9a745">AST_FLAG_IN_DTMF</a>);</div><div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;               <span class="keywordflow">if</span> (!f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a>)</div><div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;                  f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a> = <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(now, *<a class="code" href="../../d5/d7b/channel_8h.html#a70d5efd26b6272df04b33acc2a810ca7">ast_channel_dtmf_tv</a>(chan));</div><div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;</div><div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;               <span class="comment">/* detect tones that were received on</span></div><div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;<span class="comment">                * the wire with durations shorter than</span></div><div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;<span class="comment">                * option_dtmfminduration and set f-&gt;len</span></div><div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;<span class="comment">                * to the actual duration of the DTMF</span></div><div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;<span class="comment">                * frames on the wire.  This will cause</span></div><div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;<span class="comment">                * dtmf emulation to be triggered later</span></div><div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;<span class="comment">                * on.</span></div><div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;<span class="comment">                */</span></div><div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(now, *<a class="code" href="../../d5/d7b/channel_8h.html#a70d5efd26b6272df04b33acc2a810ca7">ast_channel_dtmf_tv</a>(chan)) &lt; <a class="code" href="../../d6/dd6/group__main__options.html#gac4f0ffd69871cc47ad3dc030127b8719">option_dtmfminduration</a>) {</div><div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;                  f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a> = <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(now, *<a class="code" href="../../d5/d7b/channel_8h.html#a70d5efd26b6272df04b33acc2a810ca7">ast_channel_dtmf_tv</a>(chan));</div><div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;                  <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#af360dd5e7b67cff6cb747d1aa2ac3db8">LOG_DTMF</a>, <span class="stringliteral">&quot;DTMF end &#39;%c&#39; detected to have actual duration %ld on the wire, emulation will be triggered on %s\n&quot;</span>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;               }</div><div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a>) {</div><div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#af360dd5e7b67cff6cb747d1aa2ac3db8">LOG_DTMF</a>, <span class="stringliteral">&quot;DTMF end accepted without begin &#39;%c&#39; on %s\n&quot;</span>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;               f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a> = <a class="code" href="../../d6/dd6/group__main__options.html#gac4f0ffd69871cc47ad3dc030127b8719">option_dtmfminduration</a>;</div><div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;            }</div><div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;            <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a> &lt; <a class="code" href="../../d6/dd6/group__main__options.html#gac4f0ffd69871cc47ad3dc030127b8719">option_dtmfminduration</a> &amp;&amp; !<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a668ac945c84f50becaca2a6134e64058">AST_FLAG_END_DTMF_ONLY</a>)) {</div><div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#af360dd5e7b67cff6cb747d1aa2ac3db8">LOG_DTMF</a>, <span class="stringliteral">&quot;DTMF end &#39;%c&#39; has duration %ld but want minimum %u, emulating on %s\n&quot;</span>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a>, <a class="code" href="../../d6/dd6/group__main__options.html#gac4f0ffd69871cc47ad3dc030127b8719">option_dtmfminduration</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;               <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a7aeded1dc9df91dee01bb7af719880c1">AST_FLAG_EMULATE_DTMF</a>);</div><div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#ab53a405a4ee95970b9d8d54749782482">ast_channel_dtmf_digit_to_emulate_set</a>(chan, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>);</div><div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#ac1a262ebb6e17bf3f885a8c194db37c9">ast_channel_emulate_dtmf_duration_set</a>(chan, <a class="code" href="../../d6/dd6/group__main__options.html#gac4f0ffd69871cc47ad3dc030127b8719">option_dtmfminduration</a> - f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a>);</div><div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;               <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;               f = &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;</div><div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;               <span class="comment">/* Start generating 50 fps timer events (null frames) for dtmf emulating</span></div><div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;<span class="comment">                * independently from any existing incoming voice frames.</span></div><div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;<span class="comment">                * If channel generator is already activated in regular mode use these</span></div><div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;<span class="comment">                * timer events to generate null frames.</span></div><div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;<span class="comment">                */</span></div><div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;               <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#a6fa8e680c963b66575d1950c19493b40">ast_channel_generator</a>(chan)) {</div><div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;                  <a class="code" href="../../db/d41/timing_8h.html#a4dae39fb5fb680a48a05d7567053eb03">ast_timer_set_rate</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1e930e0e331c7e82a1bf297addfc5a34">ast_channel_timer</a>(chan), 50);</div><div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;               }</div><div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#af360dd5e7b67cff6cb747d1aa2ac3db8">LOG_DTMF</a>, <span class="stringliteral">&quot;DTMF end passthrough &#39;%c&#39; on %s\n&quot;</span>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;               <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a> &lt; <a class="code" href="../../d6/dd6/group__main__options.html#gac4f0ffd69871cc47ad3dc030127b8719">option_dtmfminduration</a>) {</div><div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;                  f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a> = <a class="code" href="../../d6/dd6/group__main__options.html#gac4f0ffd69871cc47ad3dc030127b8719">option_dtmfminduration</a>;</div><div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;               }</div><div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a37dd62f9ca2a7d263997319902554bf0">ast_channel_dtmf_tv_set</a>(chan, &amp;now);</div><div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;</div><div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;               <span class="comment">/* Start generating 50 fps timer events (null frames) for dtmf emulating</span></div><div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;<span class="comment">                * independently from any existing incoming voice frames.</span></div><div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;<span class="comment">                * If channel generator is already activated in regular mode use these</span></div><div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;<span class="comment">                * timer events to generate null frames.</span></div><div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;<span class="comment">                */</span></div><div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;               <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#a6fa8e680c963b66575d1950c19493b40">ast_channel_generator</a>(chan)) {</div><div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;                  <a class="code" href="../../db/d41/timing_8h.html#a4dae39fb5fb680a48a05d7567053eb03">ast_timer_set_rate</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1e930e0e331c7e82a1bf297addfc5a34">ast_channel_timer</a>(chan), 50);</div><div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;               }</div><div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;            }</div><div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan)) {</div><div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;               <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *old_frame = f;</div><div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;               f = <a class="code" href="../../d0/d79/audiohook_8h.html#a6351c89eb98b1832e85fa9c0fca7383f">ast_audiohook_write_list</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan), <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65">AST_AUDIOHOOK_DIRECTION_READ</a>, f);</div><div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;               <span class="keywordflow">if</span> (old_frame != f)</div><div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;                  <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(old_frame);</div><div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;            }</div><div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;         }</div><div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be">AST_FRAME_DTMF_BEGIN</a>:</div><div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;         <a class="code" href="../../d4/d28/channel_8c.html#a1f333b8dc2771604a8cdb3f42c6b3643">send_dtmf_begin_event</a>(chan, <a class="code" href="../../d4/d28/channel_8c.html#a4553faa9cf1e184164ebb526693585f0ad36d00efd146b7944de99a52d3fb0c75">DTMF_RECEIVED</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>);</div><div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#af360dd5e7b67cff6cb747d1aa2ac3db8">LOG_DTMF</a>, <span class="stringliteral">&quot;DTMF begin &#39;%c&#39; received on %s\n&quot;</span>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ab05edf1bf82b02f5987de92a6960a9bd">AST_FLAG_DEFER_DTMF</a> | <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a668ac945c84f50becaca2a6134e64058">AST_FLAG_END_DTMF_ONLY</a> | <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a7aeded1dc9df91dee01bb7af719880c1">AST_FLAG_EMULATE_DTMF</a>) ||</div><div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;             (!<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(*<a class="code" href="../../d5/d7b/channel_8h.html#a70d5efd26b6272df04b33acc2a810ca7">ast_channel_dtmf_tv</a>(chan)) &amp;&amp;</div><div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;               <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), *<a class="code" href="../../d5/d7b/channel_8h.html#a70d5efd26b6272df04b33acc2a810ca7">ast_channel_dtmf_tv</a>(chan)) &lt; <a class="code" href="../../d4/d28/channel_8c.html#a21882e640e01106e62bdab88849a17c5">AST_MIN_DTMF_GAP</a>) ) {</div><div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#af360dd5e7b67cff6cb747d1aa2ac3db8">LOG_DTMF</a>, <span class="stringliteral">&quot;DTMF begin ignored &#39;%c&#39; on %s\n&quot;</span>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;            <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;            f = &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;            <span class="keyword">struct </span>timeval now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;            <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a919680ef9fe22e78b9b1e718d3b9a745">AST_FLAG_IN_DTMF</a>);</div><div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a37dd62f9ca2a7d263997319902554bf0">ast_channel_dtmf_tv_set</a>(chan, &amp;now);</div><div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#af360dd5e7b67cff6cb747d1aa2ac3db8">LOG_DTMF</a>, <span class="stringliteral">&quot;DTMF begin passthrough &#39;%c&#39; on %s\n&quot;</span>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;         }</div><div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a29ff71f9d5c7927906ebd437fe372056">AST_FRAME_NULL</a>:</div><div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;         <span class="comment">/* The EMULATE_DTMF flag must be cleared here as opposed to when the duration</span></div><div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;<span class="comment">          * is reached , because we want to make sure we pass at least one</span></div><div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;<span class="comment">          * voice frame through before starting the next digit, to ensure a gap</span></div><div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;<span class="comment">          * between DTMF digits. */</span></div><div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a7aeded1dc9df91dee01bb7af719880c1">AST_FLAG_EMULATE_DTMF</a>)) {</div><div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;            <span class="keyword">struct </span>timeval now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#ad35b4f533481ec376df7be1073addf46">ast_channel_emulate_dtmf_duration</a>(chan)) {</div><div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;               <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a7aeded1dc9df91dee01bb7af719880c1">AST_FLAG_EMULATE_DTMF</a>);</div><div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#ab53a405a4ee95970b9d8d54749782482">ast_channel_dtmf_digit_to_emulate_set</a>(chan, 0);</div><div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(now, *<a class="code" href="../../d5/d7b/channel_8h.html#a70d5efd26b6272df04b33acc2a810ca7">ast_channel_dtmf_tv</a>(chan)) &gt;= <a class="code" href="../../d5/d7b/channel_8h.html#ad35b4f533481ec376df7be1073addf46">ast_channel_emulate_dtmf_duration</a>(chan)) {</div><div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#ac1a262ebb6e17bf3f885a8c194db37c9">ast_channel_emulate_dtmf_duration_set</a>(chan, 0);</div><div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;               <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;               f = <a class="code" href="../../d5/d7b/channel_8h.html#a33ca8f4f979f8a920a1832d509f24a1a">ast_channel_dtmff</a>(chan);</div><div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;               f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a>;</div><div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;               f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a705c75fc3efd10c77342754f49044eb6">ast_channel_dtmf_digit_to_emulate</a>(chan);</div><div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;               f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a> = <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(now, *<a class="code" href="../../d5/d7b/channel_8h.html#a70d5efd26b6272df04b33acc2a810ca7">ast_channel_dtmf_tv</a>(chan));</div><div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a37dd62f9ca2a7d263997319902554bf0">ast_channel_dtmf_tv_set</a>(chan, &amp;now);</div><div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;               <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a7aeded1dc9df91dee01bb7af719880c1">AST_FLAG_EMULATE_DTMF</a>);</div><div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#ab53a405a4ee95970b9d8d54749782482">ast_channel_dtmf_digit_to_emulate_set</a>(chan, 0);</div><div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#af360dd5e7b67cff6cb747d1aa2ac3db8">LOG_DTMF</a>, <span class="stringliteral">&quot;DTMF end emulation of &#39;%c&#39; queued on %s\n&quot;</span>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan)) {</div><div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;                  <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *old_frame = f;</div><div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;                  f = <a class="code" href="../../d0/d79/audiohook_8h.html#a6351c89eb98b1832e85fa9c0fca7383f">ast_audiohook_write_list</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan), <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65">AST_AUDIOHOOK_DIRECTION_READ</a>, f);</div><div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;                  <span class="keywordflow">if</span> (old_frame != f) {</div><div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;                     <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(old_frame);</div><div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;                  }</div><div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;               }</div><div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;</div><div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;               <span class="comment">/* Start generating 50 fps timer events (null frames) for dtmf emulating</span></div><div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;<span class="comment">                * independently from any existing incoming voice frames.</span></div><div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;<span class="comment">                * If channel generator is already activated in regular mode use these</span></div><div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;<span class="comment">                * timer events to generate null frames.</span></div><div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;<span class="comment">                */</span></div><div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;               <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#a6fa8e680c963b66575d1950c19493b40">ast_channel_generator</a>(chan)) {</div><div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;                  <a class="code" href="../../db/d41/timing_8h.html#a4dae39fb5fb680a48a05d7567053eb03">ast_timer_set_rate</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1e930e0e331c7e82a1bf297addfc5a34">ast_channel_timer</a>(chan), 50);</div><div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;               }</div><div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;            }</div><div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;         }</div><div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>:</div><div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;         <span class="comment">/* If media was received from a non-default stream don&#39;t perform any actions, let it just go through */</span></div><div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;         <span class="keywordflow">if</span> (stream != default_stream) {</div><div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;         }</div><div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;</div><div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;         <span class="comment">/* The EMULATE_DTMF flag must be cleared here as opposed to when the duration</span></div><div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;<span class="comment">          * is reached , because we want to make sure we pass at least one</span></div><div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;<span class="comment">          * voice frame through before starting the next digit, to ensure a gap</span></div><div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;<span class="comment">          * between DTMF digits. */</span></div><div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a7aeded1dc9df91dee01bb7af719880c1">AST_FLAG_EMULATE_DTMF</a>) &amp;&amp; !<a class="code" href="../../d5/d7b/channel_8h.html#ad35b4f533481ec376df7be1073addf46">ast_channel_emulate_dtmf_duration</a>(chan)) {</div><div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;!!! t5a\n&quot;</span>);</div><div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;            <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a7aeded1dc9df91dee01bb7af719880c1">AST_FLAG_EMULATE_DTMF</a>);</div><div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#ab53a405a4ee95970b9d8d54749782482">ast_channel_dtmf_digit_to_emulate_set</a>(chan, 0);</div><div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;         }</div><div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;</div><div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;         <span class="keywordflow">if</span> (dropaudio || <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a919680ef9fe22e78b9b1e718d3b9a745">AST_FLAG_IN_DTMF</a>)) {</div><div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;             <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;!!! t5b\n&quot;</span>);</div><div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;            <span class="keywordflow">if</span> (dropaudio)</div><div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;               <a class="code" href="../../d4/d28/channel_8c.html#a34c65699645170a1168e9177ad8aebd4">ast_read_generator_actions</a>(chan, f);</div><div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;            <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;            f = &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;         }</div><div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;</div><div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a7aeded1dc9df91dee01bb7af719880c1">AST_FLAG_EMULATE_DTMF</a>) &amp;&amp; !<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a919680ef9fe22e78b9b1e718d3b9a745">AST_FLAG_IN_DTMF</a>)) {</div><div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;            <span class="keyword">struct </span>timeval now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;             <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;!!! t5c\n&quot;</span>);</div><div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(now, *<a class="code" href="../../d5/d7b/channel_8h.html#a70d5efd26b6272df04b33acc2a810ca7">ast_channel_dtmf_tv</a>(chan)) &gt;= <a class="code" href="../../d5/d7b/channel_8h.html#ad35b4f533481ec376df7be1073addf46">ast_channel_emulate_dtmf_duration</a>(chan)) {</div><div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#ac1a262ebb6e17bf3f885a8c194db37c9">ast_channel_emulate_dtmf_duration_set</a>(chan, 0);</div><div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;               <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;               f = <a class="code" href="../../d5/d7b/channel_8h.html#a33ca8f4f979f8a920a1832d509f24a1a">ast_channel_dtmff</a>(chan);</div><div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;               f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a>;</div><div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;               f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a705c75fc3efd10c77342754f49044eb6">ast_channel_dtmf_digit_to_emulate</a>(chan);</div><div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;               f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a> = <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(now, *<a class="code" href="../../d5/d7b/channel_8h.html#a70d5efd26b6272df04b33acc2a810ca7">ast_channel_dtmf_tv</a>(chan));</div><div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a37dd62f9ca2a7d263997319902554bf0">ast_channel_dtmf_tv_set</a>(chan, &amp;now);</div><div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan)) {</div><div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;                  <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *old_frame = f;</div><div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;                  f = <a class="code" href="../../d0/d79/audiohook_8h.html#a6351c89eb98b1832e85fa9c0fca7383f">ast_audiohook_write_list</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan), <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65">AST_AUDIOHOOK_DIRECTION_READ</a>, f);</div><div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;                  <span class="keywordflow">if</span> (old_frame != f)</div><div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;                     <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(old_frame);</div><div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;               }</div><div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#af360dd5e7b67cff6cb747d1aa2ac3db8">LOG_DTMF</a>, <span class="stringliteral">&quot;DTMF end emulation of &#39;%c&#39; queued on %s\n&quot;</span>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;               <span class="comment">/* Drop voice frames while we&#39;re still in the middle of the digit */</span></div><div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;               <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;               f = &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;            }</div><div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;         }</div><div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;         <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> != <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>) {</div><div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;             <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;!!! t5d\n&quot;</span>);</div><div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;         }</div><div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, <a class="code" href="../../d5/d7b/channel_8h.html#aa6ceb6b9067d793c4d00c566ae585f0b">ast_channel_rawreadformat</a>(chan)) != <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a></div><div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;            &amp;&amp; <a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, <a class="code" href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a>(chan)) != <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a>) {</div><div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;            <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *core_format;</div><div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;</div><div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;<span class="comment">             * Note: This frame may not be one of the current native</span></div><div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;<span class="comment">             * formats.  We may have gotten it out of the read queue from</span></div><div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;<span class="comment">             * a previous multi-frame translation, from a framehook</span></div><div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;<span class="comment">             * injected frame, or the device we&#39;re talking to isn&#39;t</span></div><div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;<span class="comment">             * respecting negotiated formats.  Regardless we will accept</span></div><div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;<span class="comment">             * all frames.</span></div><div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;<span class="comment">             *</span></div><div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;<span class="comment">             * Update the read translation path to handle the new format</span></div><div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;<span class="comment">             * that just came in.  If the core wants slinear we need to</span></div><div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;<span class="comment">             * setup a new translation path because the core is usually</span></div><div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;<span class="comment">             * doing something with the audio itself and may not handle</span></div><div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;<span class="comment">             * any other format.  e.g., Softmix bridge, holding bridge</span></div><div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;<span class="comment">             * announcer channel, recording, AMD...  Otherwise, we&#39;ll</span></div><div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;<span class="comment">             * setup to pass the frame as is to the core.  In this case</span></div><div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;<span class="comment">             * the core doesn&#39;t care.  The channel is likely in</span></div><div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;<span class="comment">             * autoservice, safesleep, or the channel is in a bridge.</span></div><div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;<span class="comment">             * Let the bridge technology deal with format compatibility</span></div><div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;<span class="comment">             * between the channels in the bridge.</span></div><div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;<span class="comment">             *</span></div><div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;<span class="comment">             * Beware of the transcode_via_slin and genericplc options as</span></div><div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;<span class="comment">             * they force any transcoding to go through slin on a bridge.</span></div><div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;<span class="comment">             * Unfortunately transcode_via_slin is enabled by default and</span></div><div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;<span class="comment">             * genericplc is enabled in the codecs.conf.sample file.</span></div><div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;<span class="comment">             *</span></div><div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;<span class="comment">             * XXX Only updating translation to slinear frames has some</span></div><div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;<span class="comment">             * corner cases if slinear is one of the native formats and</span></div><div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;<span class="comment">             * there are different sample rates involved.  We might wind</span></div><div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;<span class="comment">             * up with conflicting translation paths between channels</span></div><div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;<span class="comment">             * where the read translation path on this channel reduces</span></div><div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;<span class="comment">             * the sample rate followed by a write translation path on</span></div><div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;<span class="comment">             * the peer channel that increases the sample rate.</span></div><div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;            core_format = <a class="code" href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a>(chan);</div><div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../db/d1c/format__cache_8h.html#a309515067d94f11b99659093c5beefee">ast_format_cache_is_slinear</a>(core_format)) {</div><div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;               core_format = f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>;</div><div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;            }</div><div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;             <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;!!! t5f\n&quot;</span>);</div><div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d4/d28/channel_8c.html#a2161934659b4d81f8e225d107d5e91e8">ast_set_read_format_path</a>(chan, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, core_format)) {</div><div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;               <span class="comment">/* Drop frame.  We couldn&#39;t make it compatible with the core. */</span></div><div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;               <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;               f = &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;            }</div><div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;         }</div><div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;<span class="comment">          * Send frame to audiohooks if present, if frametype is linear, to preserve</span></div><div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;<span class="comment">          * functional compatibility with previous behavior. If not linear, hold off</span></div><div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;<span class="comment">          * until transcoding is done where we are more likely to have a linear frame</span></div><div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan) &amp;&amp; <a class="code" href="../../db/d1c/format__cache_8h.html#a309515067d94f11b99659093c5beefee">ast_format_cache_is_slinear</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>)) {</div><div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;            <span class="comment">/* Place hooked after declaration */</span></div><div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;            <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *old_frame = f;</div><div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;            hooked = 1;</div><div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;             <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;!!! t5h\n&quot;</span>);</div><div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;            f = <a class="code" href="../../d0/d79/audiohook_8h.html#a6351c89eb98b1832e85fa9c0fca7383f">ast_audiohook_write_list</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan), <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65">AST_AUDIOHOOK_DIRECTION_READ</a>, f);</div><div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;            <span class="keywordflow">if</span> (old_frame != f) {</div><div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;               <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(old_frame);</div><div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;            }</div><div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;         }</div><div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;</div><div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan) &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;read_stream) {</div><div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;            <span class="comment">/* XXX what does this do ? */</span></div><div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;<span class="preprocessor">#ifndef MONITOR_CONSTANT_DELAY</span></div><div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;            <span class="keywordtype">int</span> jump = <a class="code" href="../../d5/d7b/channel_8h.html#ae37612e98aa9daaa86ab62ab4f91938f">ast_channel_outsmpl</a>(chan) - <a class="code" href="../../d5/d7b/channel_8h.html#a711f973f0ab1756bb2d1af2bd06f67a7">ast_channel_insmpl</a>(chan) - 4 * f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>;</div><div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;            <span class="keywordflow">if</span> (jump &gt;= 0) {</div><div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;               jump = <a class="code" href="../../d4/d28/channel_8c.html#a2679f53f358ce4d56596c511afab764b">calc_monitor_jump</a>((<a class="code" href="../../d5/d7b/channel_8h.html#ae37612e98aa9daaa86ab62ab4f91938f">ast_channel_outsmpl</a>(chan) - <a class="code" href="../../d5/d7b/channel_8h.html#a711f973f0ab1756bb2d1af2bd06f67a7">ast_channel_insmpl</a>(chan)),</div><div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;                  <a class="code" href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>),</div><div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;                  <a class="code" href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a>(<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;read_stream-&gt;fmt-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a5407a229a5e1a319d75fb29542c83eae">format</a>));</div><div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../d2/d4d/file_8h.html#a36f6bba05952162d5d1ee7fb9819bd07">ast_seekstream</a>(<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;read_stream, jump, <a class="code" href="../../d2/d4d/file_8h.html#abd4aebd901cf2e2251920acfbe22fa22">SEEK_FORCECUR</a>) == -1) {</div><div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;                  <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to perform seek in monitoring read stream, synchronization between the files may be broken\n&quot;</span>);</div><div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;               }</div><div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a2730f9c6fc0d433ab49f62faa8f87909">ast_channel_insmpl_set</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a711f973f0ab1756bb2d1af2bd06f67a7">ast_channel_insmpl</a>(chan) + (<a class="code" href="../../d5/d7b/channel_8h.html#ae37612e98aa9daaa86ab62ab4f91938f">ast_channel_outsmpl</a>(chan) - <a class="code" href="../../d5/d7b/channel_8h.html#a711f973f0ab1756bb2d1af2bd06f67a7">ast_channel_insmpl</a>(chan)) + f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>);</div><div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a2730f9c6fc0d433ab49f62faa8f87909">ast_channel_insmpl_set</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a711f973f0ab1756bb2d1af2bd06f67a7">ast_channel_insmpl</a>(chan) + f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>);</div><div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;            }</div><div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;            <span class="keywordtype">int</span> jump = <a class="code" href="../../d4/d28/channel_8c.html#a2679f53f358ce4d56596c511afab764b">calc_monitor_jump</a>((<a class="code" href="../../d5/d7b/channel_8h.html#ae37612e98aa9daaa86ab62ab4f91938f">ast_channel_outsmpl</a>(chan) - <a class="code" href="../../d5/d7b/channel_8h.html#a711f973f0ab1756bb2d1af2bd06f67a7">ast_channel_insmpl</a>(chan)),</div><div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;               <a class="code" href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>),</div><div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;               <a class="code" href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a>(<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;read_stream-&gt;fmt-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a5407a229a5e1a319d75fb29542c83eae">format</a>));</div><div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;            <span class="keywordflow">if</span> (jump - MONITOR_DELAY &gt;= 0) {</div><div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../d2/d4d/file_8h.html#a36f6bba05952162d5d1ee7fb9819bd07">ast_seekstream</a>(<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;read_stream, jump - f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>, <a class="code" href="../../d2/d4d/file_8h.html#abd4aebd901cf2e2251920acfbe22fa22">SEEK_FORCECUR</a>) == -1) {</div><div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;                  <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to perform seek in monitoring read stream, synchronization between the files may be broken\n&quot;</span>);</div><div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;               }</div><div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a711f973f0ab1756bb2d1af2bd06f67a7">ast_channel_insmpl</a>(chan) += <a class="code" href="../../d5/d7b/channel_8h.html#ae37612e98aa9daaa86ab62ab4f91938f">ast_channel_outsmpl</a>(chan) - <a class="code" href="../../d5/d7b/channel_8h.html#a711f973f0ab1756bb2d1af2bd06f67a7">ast_channel_insmpl</a>(chan);</div><div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a711f973f0ab1756bb2d1af2bd06f67a7">ast_channel_insmpl</a>(chan) += f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>;</div><div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;            }</div><div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../d4/d88/structstate.html">state</a> == <a class="code" href="../../d5/d7b/channel_8h.html#a9b57685a45dd0700625ea8ba83a868dface918b901d180f5ea85f8a941fc8cbdb">AST_MONITOR_RUNNING</a>) {</div><div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../d2/d4d/file_8h.html#a3608386b919ef0949d2858cdeb02d12e">ast_writestream</a>(<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;read_stream, f) &lt; 0)</div><div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;                  <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to write data to channel monitor read stream\n&quot;</span>);</div><div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;            }</div><div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;             <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;!!! t5jj\n&quot;</span>);</div><div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;         }</div><div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;</div><div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a6b4548259e61f691c654aed0025e5502">ast_channel_readtrans</a>(chan)</div><div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;            &amp;&amp; <a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, <a class="code" href="../../d5/d7b/channel_8h.html#aa6ceb6b9067d793c4d00c566ae585f0b">ast_channel_rawreadformat</a>(chan)) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a>) {</div><div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;            f = <a class="code" href="../../db/d39/translate_8h.html#ab09d3ccb95d1f828d2871530226f9456">ast_translate</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a6b4548259e61f691c654aed0025e5502">ast_channel_readtrans</a>(chan), f, 1);</div><div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;            <span class="keywordflow">if</span> (!f) {</div><div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;               f = &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;            }</div><div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;         }</div><div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;</div><div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;         <span class="comment">/* Second chance at hooking a linear frame, also the last chance */</span></div><div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan) &amp;&amp; !hooked) {</div><div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;            <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *old_frame = f;</div><div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;            f = <a class="code" href="../../d0/d79/audiohook_8h.html#a6351c89eb98b1832e85fa9c0fca7383f">ast_audiohook_write_list</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan), <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65">AST_AUDIOHOOK_DIRECTION_READ</a>, f);</div><div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;            <span class="keywordflow">if</span> (old_frame != f) {</div><div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;               <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(old_frame);</div><div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;            }</div><div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;         }</div><div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;</div><div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;<span class="comment">          * It is possible for the translation process on the channel to have</span></div><div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;<span class="comment">          * produced multiple frames from the single input frame we passed it; if</span></div><div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;<span class="comment">          * this happens, queue the additional frames *before* the frames we may</span></div><div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;<span class="comment">          * have queued earlier. if the readq was empty, put them at the head of</span></div><div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;<span class="comment">          * the queue, and if it was not, put them just after the frame that was</span></div><div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;<span class="comment">          * at the end of the queue.</span></div><div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(f, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>)) {</div><div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;            <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *cur, *multi_frame = <a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(f, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;             <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;!!! t5k\n&quot;</span>);</div><div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;            <span class="comment">/* Mark these frames as being re-queued */</span></div><div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;            <span class="keywordflow">for</span> (cur = multi_frame; cur; cur = <a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(cur, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>)) {</div><div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;               <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(cur, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac6bea760bc75e449a80b8cc28bf9a2feaf48b0f9659597810ecc30d7ce73fa5e8">AST_FRFLAG_REQUEUED</a>);</div><div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;            }</div><div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;</div><div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;            <span class="keywordflow">if</span> (!readq_tail) {</div><div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;               <a class="code" href="../../d4/d28/channel_8c.html#a8b8c37c2fb7bb32b302635f257982271">ast_queue_frame_head</a>(chan, multi_frame);</div><div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;               <a class="code" href="../../d4/d28/channel_8c.html#ae5b763a23d35fc0b721adc3df8724712">__ast_queue_frame</a>(chan, multi_frame, 0, readq_tail);</div><div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;            }</div><div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;            <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(multi_frame);</div><div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(f, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>) = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;         }</div><div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;</div><div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;<span class="comment">          * Run generator sitting on the line if timing device not available</span></div><div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;<span class="comment">          * and synchronous generation of outgoing frames is necessary</span></div><div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;         <a class="code" href="../../d4/d28/channel_8c.html#a34c65699645170a1168e9177ad8aebd4">ast_read_generator_actions</a>(chan, f);</div><div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ac2b2b163b29fde967531b8bf92966c97">AST_FRAME_RTCP</a>:</div><div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;         <span class="comment">/* Incoming RTCP feedback needs to get to the translator for</span></div><div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;<span class="comment">          * outgoing media, which means we treat it as an ast_write */</span></div><div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#ab5c41a2130385cadf78c64cacea7e3f9">ast_channel_writetrans</a>(chan)) {</div><div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;            <a class="code" href="../../db/d39/translate_8h.html#ab09d3ccb95d1f828d2871530226f9456">ast_translate</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ab5c41a2130385cadf78c64cacea7e3f9">ast_channel_writetrans</a>(chan), f, 0);</div><div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;         }</div><div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;         <span class="comment">/* Just pass it on! */</span></div><div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;      }</div><div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;      <span class="comment">/* Make sure we always return NULL in the future */</span></div><div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#adac99999f1e55833e7f903979d67b48b">ast_channel_softhangup_internal_flag</a>(chan)) {</div><div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ab683c21c4a34450c4bfb8b672a7b4045">ast_channel_softhangup_internal_flag_add</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2e185ce313026e13ed90ae3a319c9cb7">AST_SOFTHANGUP_DEV</a>);</div><div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;      }</div><div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;      <span class="keywordflow">if</span> (cause)</div><div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ae6b4b7ba458e88fdbb2df9f39d935337">ast_channel_hangupcause_set</a>(chan, cause);</div><div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a6fa8e680c963b66575d1950c19493b40">ast_channel_generator</a>(chan))</div><div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;         <a class="code" href="../../d4/d28/channel_8c.html#a7160355005776732fba88cc020f4a45b">ast_deactivate_generator</a>(chan);</div><div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;      <span class="comment">/* We no longer End the CDR here */</span></div><div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;   }</div><div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;</div><div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;   <span class="comment">/* High bit prints debugging */</span></div><div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a24ce7f9c0758a05023ecc65301461300">ast_channel_fin</a>(chan) &amp; <a class="code" href="../../d5/d7b/channel_8h.html#a2011c630205057fb4b67eb06145e4a7f">DEBUGCHAN_FLAG</a>)</div><div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;      <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a35641692b96e9e81da06d8d36e677cb8">ast_frame_dump</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), f, <span class="stringliteral">&quot;&lt;&lt;&quot;</span>);</div><div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a91ac88815c2b2561dd8fe646163c67d5">ast_channel_fin_set</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#ae02cd8717fa5e5be15080386639ebb2c">FRAMECOUNT_INC</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a24ce7f9c0758a05023ecc65301461300">ast_channel_fin</a>(chan)));</div><div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;</div><div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;<a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>:</div><div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a218345ed34c8f51672b579aac2d1df5f">ast_channel_music_state</a>(chan) &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#a6fa8e680c963b66575d1950c19493b40">ast_channel_generator</a>(chan) &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#a6fa8e680c963b66575d1950c19493b40">ast_channel_generator</a>(chan)-&gt;<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a> &amp;&amp; f &amp;&amp; f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a>) {</div><div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a6fa8e680c963b66575d1950c19493b40">ast_channel_generator</a>(chan)-&gt;<a class="code" href="../../de/d2a/structast__generator.html#a1e3850d814c3f9856a35e8eb782c5ba4">digit</a>(chan, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>);</div><div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;   }</div><div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;</div><div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan) &amp;&amp; <a class="code" href="../../d0/d79/audiohook_8h.html#a46613f6e1524089bf8c4b2a7880f716d">ast_audiohook_write_list_empty</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan))) {</div><div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;      <span class="comment">/* The list gets recreated if audiohooks are added again later */</span></div><div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;      <a class="code" href="../../d0/d79/audiohook_8h.html#a5da9cb8531c18cbae0c703a57acbf0f3">ast_audiohook_detach_list</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan));</div><div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a8dec5f0bd378a1c23bbd9dba03b213fb">ast_channel_audiohooks_set</a>(chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;   }</div><div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;   <span class="keywordflow">return</span> f;</div><div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;}</div><div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;</div><div class="line"><a name="l04302"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a7ef6737309dc9e8b6c4a7cb4800638b1"> 4302</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *<a class="code" href="../../d4/d28/channel_8c.html#a7ef6737309dc9e8b6c4a7cb4800638b1">ast_read</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;{</div><div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a9fadaf671cfcb56c14d2253510a6afb3">__ast_read</a>(chan, 0, 1);</div><div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;}</div><div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;</div><div class="line"><a name="l04307"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a483a9d187ae7c3036225586009b04e8a"> 4307</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *<a class="code" href="../../d4/d28/channel_8c.html#a483a9d187ae7c3036225586009b04e8a">ast_read_stream</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;{</div><div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a9fadaf671cfcb56c14d2253510a6afb3">__ast_read</a>(chan, 0, 0);</div><div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;}</div><div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;</div><div class="line"><a name="l04312"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a1950f7fe77c02d233de02d299bab8c15"> 4312</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *<a class="code" href="../../d4/d28/channel_8c.html#a1950f7fe77c02d233de02d299bab8c15">ast_read_noaudio</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;{</div><div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a9fadaf671cfcb56c14d2253510a6afb3">__ast_read</a>(chan, 1, 1);</div><div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;}</div><div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;</div><div class="line"><a name="l04317"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ab400aad1c2ca55d35effa1e633030407"> 4317</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *<a class="code" href="../../d4/d28/channel_8c.html#ab400aad1c2ca55d35effa1e633030407">ast_read_stream_noaudio</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;{</div><div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a9fadaf671cfcb56c14d2253510a6afb3">__ast_read</a>(chan, 1, 0);</div><div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;}</div><div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;</div><div class="line"><a name="l04322"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aef2af15a597c948e97628da6c5c84f28"> 4322</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">int</span> condition)</div><div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;{</div><div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#acea4077a84f9d8ffac3c41bf660e3219">ast_indicate_data</a>(chan, condition, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div><div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;}</div><div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;</div><div class="line"><a name="l04327"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ad06e1b83ea6a33e096035c7ac0be5a20"> 4327</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/dd1/compiler_8h.html#ad1d7bd3ef291aecd510650e37670e001">attribute_const</a> <a class="code" href="../../d4/d28/channel_8c.html#ad06e1b83ea6a33e096035c7ac0be5a20">is_visible_indication</a>(<span class="keyword">enum</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390">ast_control_frame_type</a> condition)</div><div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;{</div><div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;   <span class="comment">/* Don&#39;t include a default case here so that we get compiler warnings</span></div><div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;<span class="comment">    * when a new type is added. */</span></div><div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;</div><div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;   <span class="keywordflow">switch</span> (condition) {</div><div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a1a461c5e737ed6ed7c8cb0f78557a6fd">AST_CONTROL_PROGRESS</a>:</div><div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a50b7fe33bba67b74dd7b746539e81000">AST_CONTROL_PROCEEDING</a>:</div><div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a417bc8ac5817cc1525a3b530abfc1528">AST_CONTROL_VIDUPDATE</a>:</div><div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a>:</div><div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af334ccaa958af9b049d6bfcaa41549b8">AST_CONTROL_SRCCHANGE</a>:</div><div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aacb7ddf1a95fa544fdecada68213f3c7">AST_CONTROL_RADIO_KEY</a>:</div><div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a34ac3ccebc219c59daa7eb0275fcd54d">AST_CONTROL_RADIO_UNKEY</a>:</div><div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac4106406e269667ff84ee49e0a634f94">AST_CONTROL_OPTION</a>:</div><div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a195b2c39c09113953814aa800dd06e7f">AST_CONTROL_WINK</a>:</div><div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae8f2cd460fdc81e0a774434fa002e4bf">AST_CONTROL_FLASH</a>:</div><div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a28cd8e9f9005e25624f993d6edd46755">AST_CONTROL_OFFHOOK</a>:</div><div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a5a24176e8066b727463907da4903bb8e">AST_CONTROL_TAKEOFFHOOK</a>:</div><div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe">AST_CONTROL_ANSWER</a>:</div><div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba">AST_CONTROL_HANGUP</a>:</div><div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac976c01c12ae70e36b99b16dbfa3dda7">AST_CONTROL_CONNECTED_LINE</a>:</div><div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a5344deefcbdcca938001314e81ea195a">AST_CONTROL_REDIRECTING</a>:</div><div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae177c145d03ff05a54e1d0547a239005">AST_CONTROL_TRANSFER</a>:</div><div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a7334c9d27a6d70fe7c85b60b864788fc">AST_CONTROL_T38_PARAMETERS</a>:</div><div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af4cf96fe3cc13c2a1b4d539fcb1adaed">_XXX_AST_CONTROL_T38</a>:</div><div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9855dee70443fe646113126fdf38e25a">AST_CONTROL_CC</a>:</div><div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a7c6096b70aeb9e6b2b4f9ee5cfccbf7a">AST_CONTROL_READ_ACTION</a>:</div><div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af10845d12981bce4e141a5b0ed431494">AST_CONTROL_AOC</a>:</div><div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390acb9fefa4f5e5e4b3f7f12c3483b33ee6">AST_CONTROL_END_OF_Q</a>:</div><div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a6265e05e606bb17be5cd81a309cf98a2">AST_CONTROL_MCID</a>:</div><div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390afa94175de1fafa29c027294f1e5a2aee">AST_CONTROL_UPDATE_RTP_PEER</a>:</div><div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af9665e40f4c9ef6fcfc3e179c6986c41">AST_CONTROL_PVT_CAUSE_CODE</a>:</div><div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af699fa9e173afdd4c1fea90ee892330e">AST_CONTROL_MASQUERADE_NOTIFY</a>:</div><div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a44656a284fb1f50d225d2634ede69171">AST_CONTROL_STREAM_TOPOLOGY_REQUEST_CHANGE</a>:</div><div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac4227fb216ecb8388d24e9d4776ad400">AST_CONTROL_STREAM_TOPOLOGY_CHANGED</a>:</div><div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a248688621fd1a4822c9b36d05b761e4a">AST_CONTROL_STREAM_TOPOLOGY_SOURCE_CHANGED</a>:</div><div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa95eb913e6cbbac8a34e69905245fdf4">AST_CONTROL_STREAM_STOP</a>:</div><div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a32e9dbe9416e847668084be16d4698c9">AST_CONTROL_STREAM_SUSPEND</a>:</div><div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a4e1f998aacd5c878a02040883b846bd7">AST_CONTROL_STREAM_REVERSE</a>:</div><div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae8e6b1d91a861c33a3de923b24f54dec">AST_CONTROL_STREAM_FORWARD</a>:</div><div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a32b72bba20e26bcd2d5a299c5d939bce">AST_CONTROL_STREAM_RESTART</a>:</div><div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a192282f4ac45366cf94839e59e4659c2">AST_CONTROL_RECORD_CANCEL</a>:</div><div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a84c4783c63eaa92e3ae2230e7f506401">AST_CONTROL_RECORD_STOP</a>:</div><div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aef1bbb9ea8c75f2833076b583f99cdec">AST_CONTROL_RECORD_SUSPEND</a>:</div><div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9ed4c9cba00cfa3b18500f56d6210523">AST_CONTROL_RECORD_MUTE</a>:</div><div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;</div><div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af3bdb353330f1908e9558180b5bb9e16">AST_CONTROL_INCOMPLETE</a>:</div><div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a850bb06a1702741c93a3fd67cc9637ab">AST_CONTROL_CONGESTION</a>:</div><div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875">AST_CONTROL_BUSY</a>:</div><div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a>:</div><div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a00675bfb8c64b2be86297fe4cba51fa2">AST_CONTROL_RING</a>:</div><div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5">AST_CONTROL_HOLD</a>:</div><div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;      <span class="comment">/* You can hear these */</span></div><div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;</div><div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e">AST_CONTROL_UNHOLD</a>:</div><div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;      <span class="comment">/* This is a special case.  You stop hearing this. */</span></div><div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;   }</div><div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;</div><div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;}</div><div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;</div><div class="line"><a name="l04391"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aace0c1f41b57a6599775d0f704234eaf"> 4391</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#aace0c1f41b57a6599775d0f704234eaf">ast_channel_hangupcause_hash_set</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d9/d2d/structast__control__pvt__cause__code.html">ast_control_pvt_cause_code</a> *cause_code, <span class="keywordtype">int</span> <a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>)</div><div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;{</div><div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;   <span class="keywordtype">char</span> causevar[256];</div><div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;</div><div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#aac7951cc0db90f1b1f7841b9d8f87c5b">ast_channel_dialed_causes_add</a>(chan, cause_code, datalen)) {</div><div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to store hangup cause for %s on %s\n&quot;</span>, cause_code-&gt;<a class="code" href="../../d9/d2d/structast__control__pvt__cause__code.html#a933d9bf113023b81a5bc4820f617c068">chan_name</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;   }</div><div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;</div><div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;   <span class="keywordflow">if</span> (cause_code-&gt;<a class="code" href="../../d9/d2d/structast__control__pvt__cause__code.html#a47bc493181dff2372ba0b070e7400cd8">emulate_sip_cause</a>) {</div><div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;      snprintf(causevar, <span class="keyword">sizeof</span>(causevar), <span class="stringliteral">&quot;HASH(SIP_CAUSE,%s)&quot;</span>, cause_code-&gt;<a class="code" href="../../d9/d2d/structast__control__pvt__cause__code.html#a933d9bf113023b81a5bc4820f617c068">chan_name</a>);</div><div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#ae70e64cdf669396c88ea8eda900b0b3b">ast_func_write</a>(chan, causevar, cause_code-&gt;<a class="code" href="../../d9/d2d/structast__control__pvt__cause__code.html#a9f49ca84424b69a07af7d0d8c84e612f">code</a>);</div><div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;   }</div><div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;}</div><div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;</div><div class="line"><a name="l04405"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#acd7d6e4cf3615bf47af84d2e3e47c302"> 4405</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="../../d5/d7b/channel_8h.html#a784b9642d6e2862b04b7f970b337549f">ama_flags</a> <a class="code" href="../../d4/d28/channel_8c.html#acd7d6e4cf3615bf47af84d2e3e47c302">ast_channel_string2amaflag</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>)</div><div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;{</div><div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(flag, <span class="stringliteral">&quot;default&quot;</span>))</div><div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#af42ae38a2ed095a74cd2a8c7f65a7749">DEFAULT_AMA_FLAGS</a>;</div><div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(flag, <span class="stringliteral">&quot;omit&quot;</span>))</div><div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d7b/channel_8h.html#a784b9642d6e2862b04b7f970b337549fa57ba8ad197fc6c0839e2984226bb84a8">AST_AMA_OMIT</a>;</div><div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(flag, <span class="stringliteral">&quot;billing&quot;</span>))</div><div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d7b/channel_8h.html#a784b9642d6e2862b04b7f970b337549faa8cfb82b7d2c279f848fc8197b9c3d82">AST_AMA_BILLING</a>;</div><div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(flag, <span class="stringliteral">&quot;documentation&quot;</span>))</div><div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d7b/channel_8h.html#a784b9642d6e2862b04b7f970b337549fa57aa76a632aa16d12a92e43b81c32a68">AST_AMA_DOCUMENTATION</a>;</div><div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d7b/channel_8h.html#a784b9642d6e2862b04b7f970b337549faa817f7fe5e8e40d403b349a6510d69df">AST_AMA_NONE</a>;</div><div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;}</div><div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;</div><div class="line"><a name="l04418"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a69e15b8ba1fce7a1b72e8bae1acaee37"> 4418</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d4/d28/channel_8c.html#a69e15b8ba1fce7a1b72e8bae1acaee37">ast_channel_amaflags2string</a>(<span class="keyword">enum</span> <a class="code" href="../../d5/d7b/channel_8h.html#a784b9642d6e2862b04b7f970b337549f">ama_flags</a> <a class="code" href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>)</div><div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;{</div><div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;   <span class="keywordflow">switch</span> (flag) {</div><div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/d7b/channel_8h.html#a784b9642d6e2862b04b7f970b337549fa57ba8ad197fc6c0839e2984226bb84a8">AST_AMA_OMIT</a>:</div><div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;OMIT&quot;</span>;</div><div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/d7b/channel_8h.html#a784b9642d6e2862b04b7f970b337549faa8cfb82b7d2c279f848fc8197b9c3d82">AST_AMA_BILLING</a>:</div><div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;BILLING&quot;</span>;</div><div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/d7b/channel_8h.html#a784b9642d6e2862b04b7f970b337549fa57aa76a632aa16d12a92e43b81c32a68">AST_AMA_DOCUMENTATION</a>:</div><div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;DOCUMENTATION&quot;</span>;</div><div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Unknown&quot;</span>;</div><div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;   }</div><div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;}</div><div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;<span class="comment"></span></div><div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160;<span class="comment"> * \brief Preprocess connected line update.</span></div><div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;<span class="comment"> * \since 12.0.0</span></div><div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;<span class="comment"> * \param chan channel to change the indication</span></div><div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;<span class="comment"> * \param data pointer to payload data</span></div><div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;<span class="comment"> * \param datalen size of payload data</span></div><div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160;<span class="comment"> * \note This function assumes chan is locked.</span></div><div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;<span class="comment"> * \retval 0 keep going.</span></div><div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;<span class="comment"> * \retval -1 quit now.</span></div><div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04446"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a0fe52ba970cf712f168cdf79e7609606"> 4446</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a0fe52ba970cf712f168cdf79e7609606">indicate_connected_line</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">void</span> *<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>, <span class="keywordtype">size_t</span> <a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>)</div><div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;{</div><div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> *chan_connected = <a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(chan);</div><div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> *chan_indicated = <a class="code" href="../../d5/d7b/channel_8h.html#ad3ec5f6d1ca18a54981a446176c9af1d">ast_channel_connected_indicated</a>(chan);</div><div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> connected;</div><div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> current[1024];</div><div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> proposed[1024];</div><div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;   <span class="keywordtype">int</span> current_size;</div><div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;   <span class="keywordtype">int</span> proposed_size;</div><div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;</div><div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#ade95e66d7c53181894de1d3569aee2b8">ast_party_connected_line_set_init</a>(&amp;connected, chan_connected);</div><div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;   res = <a class="code" href="../../d4/d28/channel_8c.html#a93d3e245d714d1ab18c5fb2ecb5cbf0e">ast_connected_line_parse_data</a>(data, datalen, &amp;connected);</div><div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;   <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a388b1ab04ed52109917914ac73662d0a">ast_channel_set_connected_line</a>(chan, &amp;connected, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;   }</div><div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a40fc421536e02d30fecaa51a255b4144">ast_party_connected_line_free</a>(&amp;connected);</div><div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;   }</div><div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;</div><div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;   current_size = <a class="code" href="../../d4/d28/channel_8c.html#ab380c81e4514ab48ca8402f7950a354a">ast_connected_line_build_data</a>(current, <span class="keyword">sizeof</span>(current),</div><div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;      chan_indicated, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;   proposed_size = <a class="code" href="../../d4/d28/channel_8c.html#ab380c81e4514ab48ca8402f7950a354a">ast_connected_line_build_data</a>(proposed, <span class="keyword">sizeof</span>(proposed),</div><div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;      chan_connected, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;   <span class="keywordflow">if</span> (current_size == -1 || proposed_size == -1) {</div><div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;   }</div><div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;</div><div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;   <span class="keywordflow">if</span> (current_size == proposed_size &amp;&amp; !memcmp(current, proposed, current_size)) {</div><div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;%s: Dropping redundant connected line update \&quot;%s\&quot; &lt;%s&gt;.\n&quot;</span>,</div><div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan),</div><div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(chan_connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>, chan_connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(chan_connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>, chan_connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;   }</div><div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;</div><div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a5d3c15fe1dffda82e6dc03ca7b26526a">ast_party_connected_line_copy</a>(chan_indicated, chan_connected);</div><div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;}</div><div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;<span class="comment"></span></div><div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160;<span class="comment"> * \brief Preprocess redirecting update.</span></div><div class="line"><a name="l04490"></a><span class="lineno"> 4490</span>&#160;<span class="comment"> * \since 12.0.0</span></div><div class="line"><a name="l04491"></a><span class="lineno"> 4491</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;<span class="comment"> * \param chan channel to change the indication</span></div><div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160;<span class="comment"> * \param data pointer to payload data</span></div><div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160;<span class="comment"> * \param datalen size of payload data</span></div><div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160;<span class="comment"> * \note This function assumes chan is locked.</span></div><div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;<span class="comment"> * \retval 0 keep going.</span></div><div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;<span class="comment"> * \retval -1 quit now.</span></div><div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l04501"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a32f8597d013d4be037be3ad71f08d3c1"> 4501</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a32f8597d013d4be037be3ad71f08d3c1">indicate_redirecting</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">void</span> *data, <span class="keywordtype">size_t</span> datalen)</div><div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;{</div><div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d44/structast__party__redirecting.html">ast_party_redirecting</a> redirecting;</div><div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;</div><div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8ec95c9df838fdfbb514995efb96bf82">ast_party_redirecting_set_init</a>(&amp;redirecting, <a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(chan));</div><div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;   res = <a class="code" href="../../d4/d28/channel_8c.html#ac16b3b36606ee9db374e8d9f2b7dea88">ast_redirecting_parse_data</a>(data, datalen, &amp;redirecting);</div><div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160;   <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a1cb98e78f1231d96dad09ddaeaf0981d">ast_channel_set_redirecting</a>(chan, &amp;redirecting, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160;   }</div><div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#ac8bce0bf79829c59a7671c4eff83a31f">ast_party_redirecting_free</a>(&amp;redirecting);</div><div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160;   <span class="keywordflow">return</span> res ? -1 : 0;</div><div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160;}</div><div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160;</div><div class="line"><a name="l04515"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ac238a36ed985c6476418329fcdbb7475"> 4515</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#ac238a36ed985c6476418329fcdbb7475">indicate_data_internal</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">int</span> _condition, <span class="keyword">const</span> <span class="keywordtype">void</span> *data, <span class="keywordtype">size_t</span> datalen)</div><div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;{</div><div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160;   <span class="comment">/* By using an enum, we&#39;ll get compiler warnings for values not handled</span></div><div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;<span class="comment">    * in switch statements. */</span></div><div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390">ast_control_frame_type</a> condition = _condition;</div><div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dab/structast__tone__zone__sound.html">ast_tone_zone_sound</a> *ts = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d5/def/structast__control__t38__parameters.html">ast_control_t38_parameters</a> *t38_parameters;</div><div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;</div><div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160;   <span class="keywordflow">switch</span> (condition) {</div><div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac976c01c12ae70e36b99b16dbfa3dda7">AST_CONTROL_CONNECTED_LINE</a>:</div><div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d4/d28/channel_8c.html#a0fe52ba970cf712f168cdf79e7609606">indicate_connected_line</a>(chan, data, datalen)) {</div><div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;         res = 0;</div><div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160;         <span class="keywordflow">return</span> res;</div><div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160;      }</div><div class="line"><a name="l04530"></a><span class="lineno"> 4530</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l04531"></a><span class="lineno"> 4531</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a5344deefcbdcca938001314e81ea195a">AST_CONTROL_REDIRECTING</a>:</div><div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d4/d28/channel_8c.html#a32f8597d013d4be037be3ad71f08d3c1">indicate_redirecting</a>(chan, data, datalen)) {</div><div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160;         res = 0;</div><div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160;         <span class="keywordflow">return</span> res;</div><div class="line"><a name="l04535"></a><span class="lineno"> 4535</span>&#160;      }</div><div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5">AST_CONTROL_HOLD</a>:</div><div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e">AST_CONTROL_UNHOLD</a>:</div><div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a481a937b729c7b65d4c3508b1e8c86a8">ast_channel_hold_state_set</a>(chan, _condition);</div><div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a7334c9d27a6d70fe7c85b60b864788fc">AST_CONTROL_T38_PARAMETERS</a>:</div><div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160;      t38_parameters = data;</div><div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;      <span class="keywordflow">switch</span> (t38_parameters-&gt;<a class="code" href="../../d5/def/structast__control__t38__parameters.html#adb36822366e10ce64ca8337c512732a6">request_response</a>) {</div><div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4bafdb1ca68d683c64301c4cf07463a9975">AST_T38_REQUEST_NEGOTIATE</a>:</div><div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4bad501e0d5fe272eaba466507a686a2df5">AST_T38_NEGOTIATED</a>:</div><div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a9adf7d6f53f03e6497ab36b6e3130910">ast_channel_set_is_t38_active_nolock</a>(chan, 1);</div><div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4bab75e46d3212a2a886143d874c78a1e3c">AST_T38_REQUEST_TERMINATE</a>:</div><div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4ba9df578b4287c86673d7f40f9abcdc86f">AST_T38_TERMINATED</a>:</div><div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4baa02b30f25621f20396d06f5ac8aa7a2e">AST_T38_REFUSED</a>:</div><div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a9adf7d6f53f03e6497ab36b6e3130910">ast_channel_set_is_t38_active_nolock</a>(chan, 0);</div><div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160;      }</div><div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;   }</div><div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;</div><div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d28/channel_8c.html#ad06e1b83ea6a33e096035c7ac0be5a20">is_visible_indication</a>(condition)) {</div><div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;      <span class="comment">/* A new visible indication is requested. */</span></div><div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a164fc108bc4b6a69ebef6acee330f8c8">ast_channel_visible_indication_set</a>(chan, _condition);</div><div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (condition == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e">AST_CONTROL_UNHOLD</a> || _condition &lt; 0) {</div><div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;      <span class="comment">/* Visible indication is cleared/stopped. */</span></div><div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a164fc108bc4b6a69ebef6acee330f8c8">ast_channel_visible_indication_set</a>(chan, 0);</div><div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160;   }</div><div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160;</div><div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a6613d45a04e74534bf7e318b2c71e077">indicate</a>) {</div><div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;      <span class="comment">/* See if the channel driver can handle this condition. */</span></div><div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160;      res = <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#aace25b48cb97266e6482721f5772af24">indicate</a>(chan, _condition, data, datalen);</div><div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160;      res = -1;</div><div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160;   }</div><div class="line"><a name="l04575"></a><span class="lineno"> 4575</span>&#160;</div><div class="line"><a name="l04576"></a><span class="lineno"> 4576</span>&#160;   <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l04577"></a><span class="lineno"> 4577</span>&#160;      <span class="comment">/* The channel driver successfully handled this indication */</span></div><div class="line"><a name="l04578"></a><span class="lineno"> 4578</span>&#160;      res = 0;</div><div class="line"><a name="l04579"></a><span class="lineno"> 4579</span>&#160;      <span class="keywordflow">return</span> res;</div><div class="line"><a name="l04580"></a><span class="lineno"> 4580</span>&#160;   }</div><div class="line"><a name="l04581"></a><span class="lineno"> 4581</span>&#160;</div><div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160;   <span class="comment">/* The channel driver does not support this indication, let&#39;s fake</span></div><div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;<span class="comment">    * it by doing our own tone generation if applicable. */</span></div><div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;<span class="comment"></span></div><div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;<span class="comment">   /*!\note If we compare the enumeration type, which does not have any</span></div><div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160;<span class="comment">    * negative constants, the compiler may optimize this code away.</span></div><div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160;<span class="comment">    * Therefore, we must perform an integer comparison here. */</span></div><div class="line"><a name="l04588"></a><span class="lineno"> 4588</span>&#160;   <span class="keywordflow">if</span> (_condition &lt; 0) {</div><div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;      <span class="comment">/* Stop any tones that are playing */</span></div><div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;      <a class="code" href="../../d2/d0f/indications_8h.html#a9d5be069b7060d326a213f5d60b8dc77">ast_playtones_stop</a>(chan);</div><div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160;      res = 0;</div><div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;      <span class="keywordflow">return</span> res;</div><div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;   }</div><div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;</div><div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;   <span class="comment">/* Handle conditions that we have tones for. */</span></div><div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160;   <span class="keywordflow">switch</span> (condition) {</div><div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af4cf96fe3cc13c2a1b4d539fcb1adaed">_XXX_AST_CONTROL_T38</a>:</div><div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160;      <span class="comment">/* deprecated T.38 control frame */</span></div><div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;      res = -1;</div><div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;      <span class="keywordflow">return</span> res;</div><div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a7334c9d27a6d70fe7c85b60b864788fc">AST_CONTROL_T38_PARAMETERS</a>:</div><div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160;      <span class="comment">/* there is no way to provide &#39;default&#39; behavior for these</span></div><div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160;<span class="comment">       * control frames, so we need to return failure, but there</span></div><div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;<span class="comment">       * is also no value in the log message below being emitted</span></div><div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160;<span class="comment">       * since failure to handle these frames is not an &#39;error&#39;</span></div><div class="line"><a name="l04606"></a><span class="lineno"> 4606</span>&#160;<span class="comment">       * so just return right now. in addition, we want to return</span></div><div class="line"><a name="l04607"></a><span class="lineno"> 4607</span>&#160;<span class="comment">       * whatever value the channel driver returned, in case it</span></div><div class="line"><a name="l04608"></a><span class="lineno"> 4608</span>&#160;<span class="comment">       * has some meaning.*/</span></div><div class="line"><a name="l04609"></a><span class="lineno"> 4609</span>&#160;      <span class="keywordflow">return</span> res;</div><div class="line"><a name="l04610"></a><span class="lineno"> 4610</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a>:</div><div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160;      ts = <a class="code" href="../../d2/d0f/indications_8h.html#a516be2823557000dcd4be685a44d1d09">ast_get_indication_tone</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a673d53e20b8ac75477469442f51314e1">ast_channel_zone</a>(chan), <span class="stringliteral">&quot;ring&quot;</span>);</div><div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160;      <span class="comment">/* It is common practice for channel drivers to return -1 if trying</span></div><div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160;<span class="comment">       * to indicate ringing on a channel which is up. The idea is to let the</span></div><div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160;<span class="comment">       * core generate the ringing inband. However, we don&#39;t want the</span></div><div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160;<span class="comment">       * warning message about not being able to handle the specific indication</span></div><div class="line"><a name="l04616"></a><span class="lineno"> 4616</span>&#160;<span class="comment">       * to print nor do we want ast_indicate_data to return an &quot;error&quot; for this</span></div><div class="line"><a name="l04617"></a><span class="lineno"> 4617</span>&#160;<span class="comment">       * condition</span></div><div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l04619"></a><span class="lineno"> 4619</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(chan) == <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>) {</div><div class="line"><a name="l04620"></a><span class="lineno"> 4620</span>&#160;         res = 0;</div><div class="line"><a name="l04621"></a><span class="lineno"> 4621</span>&#160;      }</div><div class="line"><a name="l04622"></a><span class="lineno"> 4622</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l04623"></a><span class="lineno"> 4623</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875">AST_CONTROL_BUSY</a>:</div><div class="line"><a name="l04624"></a><span class="lineno"> 4624</span>&#160;      ts = <a class="code" href="../../d2/d0f/indications_8h.html#a516be2823557000dcd4be685a44d1d09">ast_get_indication_tone</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a673d53e20b8ac75477469442f51314e1">ast_channel_zone</a>(chan), <span class="stringliteral">&quot;busy&quot;</span>);</div><div class="line"><a name="l04625"></a><span class="lineno"> 4625</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l04626"></a><span class="lineno"> 4626</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af3bdb353330f1908e9558180b5bb9e16">AST_CONTROL_INCOMPLETE</a>:</div><div class="line"><a name="l04627"></a><span class="lineno"> 4627</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a850bb06a1702741c93a3fd67cc9637ab">AST_CONTROL_CONGESTION</a>:</div><div class="line"><a name="l04628"></a><span class="lineno"> 4628</span>&#160;      ts = <a class="code" href="../../d2/d0f/indications_8h.html#a516be2823557000dcd4be685a44d1d09">ast_get_indication_tone</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a673d53e20b8ac75477469442f51314e1">ast_channel_zone</a>(chan), <span class="stringliteral">&quot;congestion&quot;</span>);</div><div class="line"><a name="l04629"></a><span class="lineno"> 4629</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l04630"></a><span class="lineno"> 4630</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af9665e40f4c9ef6fcfc3e179c6986c41">AST_CONTROL_PVT_CAUSE_CODE</a>:</div><div class="line"><a name="l04631"></a><span class="lineno"> 4631</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#aace0c1f41b57a6599775d0f704234eaf">ast_channel_hangupcause_hash_set</a>(chan, data, datalen);</div><div class="line"><a name="l04632"></a><span class="lineno"> 4632</span>&#160;      res = 0;</div><div class="line"><a name="l04633"></a><span class="lineno"> 4633</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l04634"></a><span class="lineno"> 4634</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a1a461c5e737ed6ed7c8cb0f78557a6fd">AST_CONTROL_PROGRESS</a>:</div><div class="line"><a name="l04635"></a><span class="lineno"> 4635</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a50b7fe33bba67b74dd7b746539e81000">AST_CONTROL_PROCEEDING</a>:</div><div class="line"><a name="l04636"></a><span class="lineno"> 4636</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a417bc8ac5817cc1525a3b530abfc1528">AST_CONTROL_VIDUPDATE</a>:</div><div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a>:</div><div class="line"><a name="l04638"></a><span class="lineno"> 4638</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af334ccaa958af9b049d6bfcaa41549b8">AST_CONTROL_SRCCHANGE</a>:</div><div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aacb7ddf1a95fa544fdecada68213f3c7">AST_CONTROL_RADIO_KEY</a>:</div><div class="line"><a name="l04640"></a><span class="lineno"> 4640</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a34ac3ccebc219c59daa7eb0275fcd54d">AST_CONTROL_RADIO_UNKEY</a>:</div><div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac4106406e269667ff84ee49e0a634f94">AST_CONTROL_OPTION</a>:</div><div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a195b2c39c09113953814aa800dd06e7f">AST_CONTROL_WINK</a>:</div><div class="line"><a name="l04643"></a><span class="lineno"> 4643</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae8f2cd460fdc81e0a774434fa002e4bf">AST_CONTROL_FLASH</a>:</div><div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a28cd8e9f9005e25624f993d6edd46755">AST_CONTROL_OFFHOOK</a>:</div><div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a5a24176e8066b727463907da4903bb8e">AST_CONTROL_TAKEOFFHOOK</a>:</div><div class="line"><a name="l04646"></a><span class="lineno"> 4646</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe">AST_CONTROL_ANSWER</a>:</div><div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba">AST_CONTROL_HANGUP</a>:</div><div class="line"><a name="l04648"></a><span class="lineno"> 4648</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a00675bfb8c64b2be86297fe4cba51fa2">AST_CONTROL_RING</a>:</div><div class="line"><a name="l04649"></a><span class="lineno"> 4649</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5">AST_CONTROL_HOLD</a>:</div><div class="line"><a name="l04650"></a><span class="lineno"> 4650</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e">AST_CONTROL_UNHOLD</a>:</div><div class="line"><a name="l04651"></a><span class="lineno"> 4651</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae177c145d03ff05a54e1d0547a239005">AST_CONTROL_TRANSFER</a>:</div><div class="line"><a name="l04652"></a><span class="lineno"> 4652</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac976c01c12ae70e36b99b16dbfa3dda7">AST_CONTROL_CONNECTED_LINE</a>:</div><div class="line"><a name="l04653"></a><span class="lineno"> 4653</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a5344deefcbdcca938001314e81ea195a">AST_CONTROL_REDIRECTING</a>:</div><div class="line"><a name="l04654"></a><span class="lineno"> 4654</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9855dee70443fe646113126fdf38e25a">AST_CONTROL_CC</a>:</div><div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a7c6096b70aeb9e6b2b4f9ee5cfccbf7a">AST_CONTROL_READ_ACTION</a>:</div><div class="line"><a name="l04656"></a><span class="lineno"> 4656</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af10845d12981bce4e141a5b0ed431494">AST_CONTROL_AOC</a>:</div><div class="line"><a name="l04657"></a><span class="lineno"> 4657</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390acb9fefa4f5e5e4b3f7f12c3483b33ee6">AST_CONTROL_END_OF_Q</a>:</div><div class="line"><a name="l04658"></a><span class="lineno"> 4658</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a6265e05e606bb17be5cd81a309cf98a2">AST_CONTROL_MCID</a>:</div><div class="line"><a name="l04659"></a><span class="lineno"> 4659</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af699fa9e173afdd4c1fea90ee892330e">AST_CONTROL_MASQUERADE_NOTIFY</a>:</div><div class="line"><a name="l04660"></a><span class="lineno"> 4660</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390afa94175de1fafa29c027294f1e5a2aee">AST_CONTROL_UPDATE_RTP_PEER</a>:</div><div class="line"><a name="l04661"></a><span class="lineno"> 4661</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a44656a284fb1f50d225d2634ede69171">AST_CONTROL_STREAM_TOPOLOGY_REQUEST_CHANGE</a>:</div><div class="line"><a name="l04662"></a><span class="lineno"> 4662</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac4227fb216ecb8388d24e9d4776ad400">AST_CONTROL_STREAM_TOPOLOGY_CHANGED</a>:</div><div class="line"><a name="l04663"></a><span class="lineno"> 4663</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a248688621fd1a4822c9b36d05b761e4a">AST_CONTROL_STREAM_TOPOLOGY_SOURCE_CHANGED</a>:</div><div class="line"><a name="l04664"></a><span class="lineno"> 4664</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa95eb913e6cbbac8a34e69905245fdf4">AST_CONTROL_STREAM_STOP</a>:</div><div class="line"><a name="l04665"></a><span class="lineno"> 4665</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a32e9dbe9416e847668084be16d4698c9">AST_CONTROL_STREAM_SUSPEND</a>:</div><div class="line"><a name="l04666"></a><span class="lineno"> 4666</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a4e1f998aacd5c878a02040883b846bd7">AST_CONTROL_STREAM_REVERSE</a>:</div><div class="line"><a name="l04667"></a><span class="lineno"> 4667</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae8e6b1d91a861c33a3de923b24f54dec">AST_CONTROL_STREAM_FORWARD</a>:</div><div class="line"><a name="l04668"></a><span class="lineno"> 4668</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a32b72bba20e26bcd2d5a299c5d939bce">AST_CONTROL_STREAM_RESTART</a>:</div><div class="line"><a name="l04669"></a><span class="lineno"> 4669</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a192282f4ac45366cf94839e59e4659c2">AST_CONTROL_RECORD_CANCEL</a>:</div><div class="line"><a name="l04670"></a><span class="lineno"> 4670</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a84c4783c63eaa92e3ae2230e7f506401">AST_CONTROL_RECORD_STOP</a>:</div><div class="line"><a name="l04671"></a><span class="lineno"> 4671</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aef1bbb9ea8c75f2833076b583f99cdec">AST_CONTROL_RECORD_SUSPEND</a>:</div><div class="line"><a name="l04672"></a><span class="lineno"> 4672</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9ed4c9cba00cfa3b18500f56d6210523">AST_CONTROL_RECORD_MUTE</a>:</div><div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160;      <span class="comment">/* Nothing left to do for these. */</span></div><div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160;      res = 0;</div><div class="line"><a name="l04675"></a><span class="lineno"> 4675</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l04676"></a><span class="lineno"> 4676</span>&#160;   }</div><div class="line"><a name="l04677"></a><span class="lineno"> 4677</span>&#160;</div><div class="line"><a name="l04678"></a><span class="lineno"> 4678</span>&#160;   <span class="keywordflow">if</span> (ts) {</div><div class="line"><a name="l04679"></a><span class="lineno"> 4679</span>&#160;      <span class="comment">/* We have a tone to play, yay. */</span></div><div class="line"><a name="l04680"></a><span class="lineno"> 4680</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Driver for channel &#39;%s&#39; does not support indication %u, emulating it\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), condition);</div><div class="line"><a name="l04681"></a><span class="lineno"> 4681</span>&#160;      res = <a class="code" href="../../d2/d0f/indications_8h.html#a544e8a1dd4a986b00754103dda6a7d3b">ast_playtones_start</a>(chan, 0, ts-&gt;<a class="code" href="../../d5/dab/structast__tone__zone__sound.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>, 1);</div><div class="line"><a name="l04682"></a><span class="lineno"> 4682</span>&#160;      <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l04683"></a><span class="lineno"> 4683</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a>(<span class="stringliteral">&quot;RINGING_INBAND&quot;</span>,</div><div class="line"><a name="l04684"></a><span class="lineno"> 4684</span>&#160;               <span class="stringliteral">&quot;Channel: %s\r\n&quot;</span>,</div><div class="line"><a name="l04685"></a><span class="lineno"> 4685</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l04686"></a><span class="lineno"> 4686</span>&#160;      }</div><div class="line"><a name="l04687"></a><span class="lineno"> 4687</span>&#160;      ts = <a class="code" href="../../d2/d0f/indications_8h.html#a8b52ace68f21c0ac24414f038471647d">ast_tone_zone_sound_unref</a>(ts);</div><div class="line"><a name="l04688"></a><span class="lineno"> 4688</span>&#160;   }</div><div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160;</div><div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l04691"></a><span class="lineno"> 4691</span>&#160;      <span class="comment">/* not handled */</span></div><div class="line"><a name="l04692"></a><span class="lineno"> 4692</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to handle indication %u for &#39;%s&#39;\n&quot;</span>, condition, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l04693"></a><span class="lineno"> 4693</span>&#160;   }</div><div class="line"><a name="l04694"></a><span class="lineno"> 4694</span>&#160;</div><div class="line"><a name="l04695"></a><span class="lineno"> 4695</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l04696"></a><span class="lineno"> 4696</span>&#160;}</div><div class="line"><a name="l04697"></a><span class="lineno"> 4697</span>&#160;</div><div class="line"><a name="l04698"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#acea4077a84f9d8ffac3c41bf660e3219"> 4698</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#acea4077a84f9d8ffac3c41bf660e3219">ast_indicate_data</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">int</span> _condition, <span class="keyword">const</span> <span class="keywordtype">void</span> *data, <span class="keywordtype">size_t</span> datalen)</div><div class="line"><a name="l04699"></a><span class="lineno"> 4699</span>&#160;{</div><div class="line"><a name="l04700"></a><span class="lineno"> 4700</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l04701"></a><span class="lineno"> 4701</span>&#160;   <span class="comment">/* this frame is used by framehooks. if it is set, we must free it at the end of this function */</span></div><div class="line"><a name="l04702"></a><span class="lineno"> 4702</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *awesome_frame = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04703"></a><span class="lineno"> 4703</span>&#160;</div><div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l04705"></a><span class="lineno"> 4705</span>&#160;</div><div class="line"><a name="l04706"></a><span class="lineno"> 4706</span>&#160;   <span class="comment">/* Don&#39;t bother if the channel is about to go away, anyway. */</span></div><div class="line"><a name="l04707"></a><span class="lineno"> 4707</span>&#160;   <span class="keywordflow">if</span> ((<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a26796fa52cc5857446eec8d16a4b718d">AST_FLAG_ZOMBIE</a>)</div><div class="line"><a name="l04708"></a><span class="lineno"> 4708</span>&#160;         || (<a class="code" href="../../d4/d28/channel_8c.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(chan) &amp;&amp; !<a class="code" href="../../d4/d28/channel_8c.html#abfe7d902da46e372034cda92b5c13c4f">ast_channel_is_leaving_bridge</a>(chan)))</div><div class="line"><a name="l04709"></a><span class="lineno"> 4709</span>&#160;      &amp;&amp; _condition != <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af699fa9e173afdd4c1fea90ee892330e">AST_CONTROL_MASQUERADE_NOTIFY</a>) {</div><div class="line"><a name="l04710"></a><span class="lineno"> 4710</span>&#160;      res = -1;</div><div class="line"><a name="l04711"></a><span class="lineno"> 4711</span>&#160;      <span class="keywordflow">goto</span> indicate_cleanup;</div><div class="line"><a name="l04712"></a><span class="lineno"> 4712</span>&#160;   }</div><div class="line"><a name="l04713"></a><span class="lineno"> 4713</span>&#160;</div><div class="line"><a name="l04714"></a><span class="lineno"> 4714</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../db/d3c/framehook_8h.html#abb1dd86caa0f1e14ffca8579a7b18d07">ast_framehook_list_is_empty</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aff1f86598b895f0346b701570e266ba2">ast_channel_framehooks</a>(chan))) {</div><div class="line"><a name="l04715"></a><span class="lineno"> 4715</span>&#160;      <span class="comment">/* Do framehooks now, do it, go, go now */</span></div><div class="line"><a name="l04716"></a><span class="lineno"> 4716</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> frame = {</div><div class="line"><a name="l04717"></a><span class="lineno"> 4717</span>&#160;         .<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>,</div><div class="line"><a name="l04718"></a><span class="lineno"> 4718</span>&#160;         .subclass.integer = _condition,</div><div class="line"><a name="l04719"></a><span class="lineno"> 4719</span>&#160;         .data.ptr = (<span class="keywordtype">void</span> *) data, <span class="comment">/* this cast from const is only okay because we do the ast_frdup below */</span></div><div class="line"><a name="l04720"></a><span class="lineno"> 4720</span>&#160;         .datalen = datalen</div><div class="line"><a name="l04721"></a><span class="lineno"> 4721</span>&#160;      };</div><div class="line"><a name="l04722"></a><span class="lineno"> 4722</span>&#160;</div><div class="line"><a name="l04723"></a><span class="lineno"> 4723</span>&#160;      <span class="comment">/* we have now committed to freeing this frame */</span></div><div class="line"><a name="l04724"></a><span class="lineno"> 4724</span>&#160;      awesome_frame = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a417ee8a61074ec7570971202908e2c4f">ast_frdup</a>(&amp;frame);</div><div class="line"><a name="l04725"></a><span class="lineno"> 4725</span>&#160;</div><div class="line"><a name="l04726"></a><span class="lineno"> 4726</span>&#160;      <span class="comment">/* who knows what we will get back! the anticipation is killing me. */</span></div><div class="line"><a name="l04727"></a><span class="lineno"> 4727</span>&#160;      awesome_frame = <a class="code" href="../../db/d3c/framehook_8h.html#abff6e8c56467d7e9465b453b42630f20">ast_framehook_list_write_event</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aff1f86598b895f0346b701570e266ba2">ast_channel_framehooks</a>(chan),</div><div class="line"><a name="l04728"></a><span class="lineno"> 4728</span>&#160;         awesome_frame);</div><div class="line"><a name="l04729"></a><span class="lineno"> 4729</span>&#160;      <span class="keywordflow">if</span> (!awesome_frame</div><div class="line"><a name="l04730"></a><span class="lineno"> 4730</span>&#160;         || awesome_frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> != <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>) {</div><div class="line"><a name="l04731"></a><span class="lineno"> 4731</span>&#160;         res = 0;</div><div class="line"><a name="l04732"></a><span class="lineno"> 4732</span>&#160;         <span class="keywordflow">goto</span> indicate_cleanup;</div><div class="line"><a name="l04733"></a><span class="lineno"> 4733</span>&#160;      }</div><div class="line"><a name="l04734"></a><span class="lineno"> 4734</span>&#160;</div><div class="line"><a name="l04735"></a><span class="lineno"> 4735</span>&#160;      _condition = awesome_frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>;</div><div class="line"><a name="l04736"></a><span class="lineno"> 4736</span>&#160;      data = awesome_frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>;</div><div class="line"><a name="l04737"></a><span class="lineno"> 4737</span>&#160;      datalen = awesome_frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>;</div><div class="line"><a name="l04738"></a><span class="lineno"> 4738</span>&#160;   }</div><div class="line"><a name="l04739"></a><span class="lineno"> 4739</span>&#160;</div><div class="line"><a name="l04740"></a><span class="lineno"> 4740</span>&#160;   res = <a class="code" href="../../d4/d28/channel_8c.html#ac238a36ed985c6476418329fcdbb7475">indicate_data_internal</a>(chan, _condition, data, datalen);</div><div class="line"><a name="l04741"></a><span class="lineno"> 4741</span>&#160;</div><div class="line"><a name="l04742"></a><span class="lineno"> 4742</span>&#160;indicate_cleanup:</div><div class="line"><a name="l04743"></a><span class="lineno"> 4743</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l04744"></a><span class="lineno"> 4744</span>&#160;   <span class="keywordflow">if</span> (awesome_frame) {</div><div class="line"><a name="l04745"></a><span class="lineno"> 4745</span>&#160;      <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(awesome_frame);</div><div class="line"><a name="l04746"></a><span class="lineno"> 4746</span>&#160;   }</div><div class="line"><a name="l04747"></a><span class="lineno"> 4747</span>&#160;</div><div class="line"><a name="l04748"></a><span class="lineno"> 4748</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l04749"></a><span class="lineno"> 4749</span>&#160;}</div><div class="line"><a name="l04750"></a><span class="lineno"> 4750</span>&#160;</div><div class="line"><a name="l04751"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a5d6470615a8701722e9d3c6c6fca01d0"> 4751</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a5d6470615a8701722e9d3c6c6fca01d0">ast_recvchar</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">int</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>)</div><div class="line"><a name="l04752"></a><span class="lineno"> 4752</span>&#160;{</div><div class="line"><a name="l04753"></a><span class="lineno"> 4753</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l04754"></a><span class="lineno"> 4754</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a> = <a class="code" href="../../d4/d28/channel_8c.html#abb507e6b148bf773fb546ac5c931f264">ast_recvtext</a>(chan, timeout);</div><div class="line"><a name="l04755"></a><span class="lineno"> 4755</span>&#160;   <span class="keywordflow">if</span> (buf == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l04756"></a><span class="lineno"> 4756</span>&#160;      <span class="keywordflow">return</span> -1;  <span class="comment">/* error or timeout */</span></div><div class="line"><a name="l04757"></a><span class="lineno"> 4757</span>&#160;   c = *(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)buf;</div><div class="line"><a name="l04758"></a><span class="lineno"> 4758</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(buf);</div><div class="line"><a name="l04759"></a><span class="lineno"> 4759</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l04760"></a><span class="lineno"> 4760</span>&#160;}</div><div class="line"><a name="l04761"></a><span class="lineno"> 4761</span>&#160;</div><div class="line"><a name="l04762"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#abb507e6b148bf773fb546ac5c931f264"> 4762</a></span>&#160;<span class="keywordtype">char</span> *<a class="code" href="../../d4/d28/channel_8c.html#abb507e6b148bf773fb546ac5c931f264">ast_recvtext</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">int</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>)</div><div class="line"><a name="l04763"></a><span class="lineno"> 4763</span>&#160;{</div><div class="line"><a name="l04764"></a><span class="lineno"> 4764</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l04765"></a><span class="lineno"> 4765</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04766"></a><span class="lineno"> 4766</span>&#160;   <span class="keyword">struct </span>timeval start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l04767"></a><span class="lineno"> 4767</span>&#160;   <span class="keywordtype">int</span> ms;</div><div class="line"><a name="l04768"></a><span class="lineno"> 4768</span>&#160;</div><div class="line"><a name="l04769"></a><span class="lineno"> 4769</span>&#160;   <span class="keywordflow">while</span> ((ms = <a class="code" href="../../de/df7/time_8h.html#a904a6933b710e14c7fa2029a0f0cc91a">ast_remaining_ms</a>(start, timeout))) {</div><div class="line"><a name="l04770"></a><span class="lineno"> 4770</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f;</div><div class="line"><a name="l04771"></a><span class="lineno"> 4771</span>&#160;</div><div class="line"><a name="l04772"></a><span class="lineno"> 4772</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d4/d28/channel_8c.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(chan)) {</div><div class="line"><a name="l04773"></a><span class="lineno"> 4773</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04774"></a><span class="lineno"> 4774</span>&#160;      }</div><div class="line"><a name="l04775"></a><span class="lineno"> 4775</span>&#160;      res = <a class="code" href="../../d4/d28/channel_8c.html#aed7cba5dd8c6d31600f50d4b3f68d9ca">ast_waitfor</a>(chan, ms);</div><div class="line"><a name="l04776"></a><span class="lineno"> 4776</span>&#160;      <span class="keywordflow">if</span> (res &lt;= 0)  {<span class="comment">/* timeout or error */</span></div><div class="line"><a name="l04777"></a><span class="lineno"> 4777</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04778"></a><span class="lineno"> 4778</span>&#160;      }</div><div class="line"><a name="l04779"></a><span class="lineno"> 4779</span>&#160;      f = <a class="code" href="../../d4/d28/channel_8c.html#a7ef6737309dc9e8b6c4a7cb4800638b1">ast_read</a>(chan);</div><div class="line"><a name="l04780"></a><span class="lineno"> 4780</span>&#160;      <span class="keywordflow">if</span> (f == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l04781"></a><span class="lineno"> 4781</span>&#160;         <span class="keywordflow">break</span>; <span class="comment">/* no frame */</span></div><div class="line"><a name="l04782"></a><span class="lineno"> 4782</span>&#160;      }</div><div class="line"><a name="l04783"></a><span class="lineno"> 4783</span>&#160;      <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a> &amp;&amp; f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba">AST_CONTROL_HANGUP</a>) {</div><div class="line"><a name="l04784"></a><span class="lineno"> 4784</span>&#160;         <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l04785"></a><span class="lineno"> 4785</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04786"></a><span class="lineno"> 4786</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078">AST_FRAME_TEXT</a>) {    <span class="comment">/* what we want */</span></div><div class="line"><a name="l04787"></a><span class="lineno"> 4787</span>&#160;         buf = <a class="code" href="../../d8/d8a/astmm_8h.html#aa1202a8277cd3013d22535bf5bfe85fc">ast_strndup</a>((<span class="keywordtype">char</span> *) f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>);  <span class="comment">/* dup and break */</span></div><div class="line"><a name="l04788"></a><span class="lineno"> 4788</span>&#160;         <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l04789"></a><span class="lineno"> 4789</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04790"></a><span class="lineno"> 4790</span>&#160;      }</div><div class="line"><a name="l04791"></a><span class="lineno"> 4791</span>&#160;      <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l04792"></a><span class="lineno"> 4792</span>&#160;   }</div><div class="line"><a name="l04793"></a><span class="lineno"> 4793</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l04794"></a><span class="lineno"> 4794</span>&#160;}</div><div class="line"><a name="l04795"></a><span class="lineno"> 4795</span>&#160;</div><div class="line"><a name="l04796"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a43edfff9df1530b0ae33259e346a32ad"> 4796</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a43edfff9df1530b0ae33259e346a32ad">ast_sendtext_data</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d9/d44/structast__msg__data.html">ast_msg_data</a> *msg)</div><div class="line"><a name="l04797"></a><span class="lineno"> 4797</span>&#160;{</div><div class="line"><a name="l04798"></a><span class="lineno"> 4798</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l04799"></a><span class="lineno"> 4799</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *body = <a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga4edd2c0456a7d3f1658e48e2150c9665">ast_msg_data_get_attribute</a>(msg, <a class="code" href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a0f0f211998e9727566ad340464c66070">AST_MSG_DATA_ATTR_BODY</a>);</div><div class="line"><a name="l04800"></a><span class="lineno"> 4800</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *content_type = <a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga4edd2c0456a7d3f1658e48e2150c9665">ast_msg_data_get_attribute</a>(msg, <a class="code" href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22ad68ccac32a7d354861a476fe99a88f2c">AST_MSG_DATA_ATTR_CONTENT_TYPE</a>);</div><div class="line"><a name="l04801"></a><span class="lineno"> 4801</span>&#160;</div><div class="line"><a name="l04802"></a><span class="lineno"> 4802</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l04803"></a><span class="lineno"> 4803</span>&#160;   <span class="comment">/* Stop if we&#39;re a zombie or need a soft hangup */</span></div><div class="line"><a name="l04804"></a><span class="lineno"> 4804</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a26796fa52cc5857446eec8d16a4b718d">AST_FLAG_ZOMBIE</a>) || <a class="code" href="../../d4/d28/channel_8c.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(chan)) {</div><div class="line"><a name="l04805"></a><span class="lineno"> 4805</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l04806"></a><span class="lineno"> 4806</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04807"></a><span class="lineno"> 4807</span>&#160;   }</div><div class="line"><a name="l04808"></a><span class="lineno"> 4808</span>&#160;</div><div class="line"><a name="l04809"></a><span class="lineno"> 4809</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a3a5d847510a477edda3d0bc1459709f4">CHECK_BLOCKING</a>(chan);</div><div class="line"><a name="l04810"></a><span class="lineno"> 4810</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;write_text</div><div class="line"><a name="l04811"></a><span class="lineno"> 4811</span>&#160;      &amp;&amp; (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(content_type) || <a class="code" href="../../d6/d90/strings_8h.html#ac51fa66c90ce950b248c9ff3e8c4e453">ast_begins_with</a>(content_type, <span class="stringliteral">&quot;text/&quot;</span>))</div><div class="line"><a name="l04812"></a><span class="lineno"> 4812</span>&#160;      &amp;&amp; (<a class="code" href="../../d0/d3c/format__cap_8h.html#a9b2d6490b222d436f5f6a8296d36c13f">ast_format_cap_has_type</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a>(chan), <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212acdcfb16791fa00269621e51c42f5a4c3">AST_MEDIA_TYPE_TEXT</a>))) {</div><div class="line"><a name="l04813"></a><span class="lineno"> 4813</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> f;</div><div class="line"><a name="l04814"></a><span class="lineno"> 4814</span>&#160;      <span class="comment">/* T.140 payload does not include the null byte terminator */</span></div><div class="line"><a name="l04815"></a><span class="lineno"> 4815</span>&#160;      <span class="keywordtype">size_t</span> body_len = strlen(body);</div><div class="line"><a name="l04816"></a><span class="lineno"> 4816</span>&#160;</div><div class="line"><a name="l04817"></a><span class="lineno"> 4817</span>&#160;      <span class="comment">/* Process as T.140 text (moved here from ast_sendtext() */</span></div><div class="line"><a name="l04818"></a><span class="lineno"> 4818</span>&#160;      memset(&amp;f, 0, <span class="keyword">sizeof</span>(f));</div><div class="line"><a name="l04819"></a><span class="lineno"> 4819</span>&#160;      f.<a class="code" href="../../d0/d99/structast__frame.html#af51e37c9331049b1e3d250a7c8bc3c26">src</a> = <span class="stringliteral">&quot;DIALPLAN&quot;</span>;</div><div class="line"><a name="l04820"></a><span class="lineno"> 4820</span>&#160;      f.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a> = <a class="code" href="../../db/d1c/format__cache_8h.html#adbb2a7346ad99c0a41cd6c43548835ba">ast_format_t140</a>;</div><div class="line"><a name="l04821"></a><span class="lineno"> 4821</span>&#160;      f.<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078">AST_FRAME_TEXT</a>;</div><div class="line"><a name="l04822"></a><span class="lineno"> 4822</span>&#160;      f.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> = body_len;</div><div class="line"><a name="l04823"></a><span class="lineno"> 4823</span>&#160;      f.<a class="code" href="../../d0/d99/structast__frame.html#aed16590d48f41d89f31e0cf347f5cd99">mallocd</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a700f5f786d7e5a985387e5ce40c47a6a">AST_MALLOCD_DATA</a>;</div><div class="line"><a name="l04824"></a><span class="lineno"> 4824</span>&#160;      f.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(body);</div><div class="line"><a name="l04825"></a><span class="lineno"> 4825</span>&#160;      <span class="keywordflow">if</span> (f.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>) {</div><div class="line"><a name="l04826"></a><span class="lineno"> 4826</span>&#160;         res = <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#a5ffa977dd3498d03795b1f9da7288311">write_text</a>(chan, &amp;f);</div><div class="line"><a name="l04827"></a><span class="lineno"> 4827</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04828"></a><span class="lineno"> 4828</span>&#160;         res = -1;</div><div class="line"><a name="l04829"></a><span class="lineno"> 4829</span>&#160;      }</div><div class="line"><a name="l04830"></a><span class="lineno"> 4830</span>&#160;      <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(&amp;f);</div><div class="line"><a name="l04831"></a><span class="lineno"> 4831</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;properties &amp; <a class="code" href="../../d5/d7b/channel_8h.html#aa62371d642974c67a0c0efa77d54fcbda23a252d7e5f2a10c8fef224843728264">AST_CHAN_TP_SEND_TEXT_DATA</a>)</div><div class="line"><a name="l04832"></a><span class="lineno"> 4832</span>&#160;      &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;send_text_data) {</div><div class="line"><a name="l04833"></a><span class="lineno"> 4833</span>&#160;      <span class="comment">/* Send enhanced message to a channel driver that supports it */</span></div><div class="line"><a name="l04834"></a><span class="lineno"> 4834</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Sending TEXT_DATA from &#39;%s&#39; to %s:%s %s\n&quot;</span>,</div><div class="line"><a name="l04835"></a><span class="lineno"> 4835</span>&#160;         <a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga4edd2c0456a7d3f1658e48e2150c9665">ast_msg_data_get_attribute</a>(msg, <a class="code" href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a7e8412f5b805e70e50a66150bad4d292">AST_MSG_DATA_ATTR_FROM</a>),</div><div class="line"><a name="l04836"></a><span class="lineno"> 4836</span>&#160;         <a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga4edd2c0456a7d3f1658e48e2150c9665">ast_msg_data_get_attribute</a>(msg, <a class="code" href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a34d60938c22ee31e3eafa756c016020d">AST_MSG_DATA_ATTR_TO</a>),</div><div class="line"><a name="l04837"></a><span class="lineno"> 4837</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), body);</div><div class="line"><a name="l04838"></a><span class="lineno"> 4838</span>&#160;      res = <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#a421cacf4fd4453284268a895c09d579a">send_text_data</a>(chan, msg);</div><div class="line"><a name="l04839"></a><span class="lineno"> 4839</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d1/d6d/chan__unistim_8c.html#a31a1d6096182df0a096b7315145cc291">send_text</a></div><div class="line"><a name="l04840"></a><span class="lineno"> 4840</span>&#160;      &amp;&amp; (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(content_type) || <a class="code" href="../../d6/d90/strings_8h.html#ac51fa66c90ce950b248c9ff3e8c4e453">ast_begins_with</a>(content_type, <span class="stringliteral">&quot;text/&quot;</span>))) {</div><div class="line"><a name="l04841"></a><span class="lineno"> 4841</span>&#160;      <span class="comment">/* Send the body of an enhanced message to a channel driver that supports only a char str */</span></div><div class="line"><a name="l04842"></a><span class="lineno"> 4842</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Sending TEXT to %s: %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), body);</div><div class="line"><a name="l04843"></a><span class="lineno"> 4843</span>&#160;      res = <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#ac91397d55cb2705d87acf0518d7f10f4">send_text</a>(chan, body);</div><div class="line"><a name="l04844"></a><span class="lineno"> 4844</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04845"></a><span class="lineno"> 4845</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Channel technology does not support sending content type &#39;%s&#39; on channel &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l04846"></a><span class="lineno"> 4846</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(content_type, <span class="stringliteral">&quot;text/plain&quot;</span>), <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l04847"></a><span class="lineno"> 4847</span>&#160;      res = -1;</div><div class="line"><a name="l04848"></a><span class="lineno"> 4848</span>&#160;   }</div><div class="line"><a name="l04849"></a><span class="lineno"> 4849</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ab5b2bec9425dd0cfc789d96ef229cb3a">AST_FLAG_BLOCKING</a>);</div><div class="line"><a name="l04850"></a><span class="lineno"> 4850</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l04851"></a><span class="lineno"> 4851</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l04852"></a><span class="lineno"> 4852</span>&#160;}</div><div class="line"><a name="l04853"></a><span class="lineno"> 4853</span>&#160;</div><div class="line"><a name="l04854"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a83631e0dc02a50802cf857caa3fdc1d7"> 4854</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a83631e0dc02a50802cf857caa3fdc1d7">ast_sendtext</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a>)</div><div class="line"><a name="l04855"></a><span class="lineno"> 4855</span>&#160;{</div><div class="line"><a name="l04856"></a><span class="lineno"> 4856</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d44/structast__msg__data.html">ast_msg_data</a> *msg;</div><div class="line"><a name="l04857"></a><span class="lineno"> 4857</span>&#160;   <span class="keywordtype">int</span> rc;</div><div class="line"><a name="l04858"></a><span class="lineno"> 4858</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d04/structast__msg__data__attribute.html">ast_msg_data_attribute</a> attrs[] =</div><div class="line"><a name="l04859"></a><span class="lineno"> 4859</span>&#160;   {</div><div class="line"><a name="l04860"></a><span class="lineno"> 4860</span>&#160;      {</div><div class="line"><a name="l04861"></a><span class="lineno"> 4861</span>&#160;         .<a class="code" href="../../d7/d04/structast__msg__data__attribute.html#a7274332d005eb44504af2efd26ed54dc">type</a> = <a class="code" href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a0f0f211998e9727566ad340464c66070">AST_MSG_DATA_ATTR_BODY</a>,</div><div class="line"><a name="l04862"></a><span class="lineno"> 4862</span>&#160;         .value = (<span class="keywordtype">char</span> *)text,</div><div class="line"><a name="l04863"></a><span class="lineno"> 4863</span>&#160;      }</div><div class="line"><a name="l04864"></a><span class="lineno"> 4864</span>&#160;   };</div><div class="line"><a name="l04865"></a><span class="lineno"> 4865</span>&#160;</div><div class="line"><a name="l04866"></a><span class="lineno"> 4866</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(text)) {</div><div class="line"><a name="l04867"></a><span class="lineno"> 4867</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04868"></a><span class="lineno"> 4868</span>&#160;   }</div><div class="line"><a name="l04869"></a><span class="lineno"> 4869</span>&#160;</div><div class="line"><a name="l04870"></a><span class="lineno"> 4870</span>&#160;   msg = <a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga0f7d3a1a337b48830c3531ed90594b3a">ast_msg_data_alloc</a>(<a class="code" href="../../d8/d0e/group__ast__msg__data.html#gga8e03c05d9a579130cae1af412fb6c580a711186ed6f4afa0cccc12908e40c511d">AST_MSG_DATA_SOURCE_TYPE_UNKNOWN</a>, attrs, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(attrs));</div><div class="line"><a name="l04871"></a><span class="lineno"> 4871</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l04872"></a><span class="lineno"> 4872</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04873"></a><span class="lineno"> 4873</span>&#160;   }</div><div class="line"><a name="l04874"></a><span class="lineno"> 4874</span>&#160;   rc = <a class="code" href="../../d4/d28/channel_8c.html#a43edfff9df1530b0ae33259e346a32ad">ast_sendtext_data</a>(chan, msg);</div><div class="line"><a name="l04875"></a><span class="lineno"> 4875</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(msg);</div><div class="line"><a name="l04876"></a><span class="lineno"> 4876</span>&#160;</div><div class="line"><a name="l04877"></a><span class="lineno"> 4877</span>&#160;   <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l04878"></a><span class="lineno"> 4878</span>&#160;}</div><div class="line"><a name="l04879"></a><span class="lineno"> 4879</span>&#160;</div><div class="line"><a name="l04880"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a03c5d60f7e6977f549939972c1503271"> 4880</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a03c5d60f7e6977f549939972c1503271">ast_senddigit_mf_begin</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">char</span> <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>)</div><div class="line"><a name="l04881"></a><span class="lineno"> 4881</span>&#160;{</div><div class="line"><a name="l04882"></a><span class="lineno"> 4882</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> <a class="code" href="../../d5/d3b/dsp_8c.html#a91a715aad7eb8bd2f4cd29197fc6b24a">mf_tones</a>[] = {</div><div class="line"><a name="l04883"></a><span class="lineno"> 4883</span>&#160;      <span class="stringliteral">&quot;1300+1500&quot;</span>, <span class="comment">/* 0 */</span></div><div class="line"><a name="l04884"></a><span class="lineno"> 4884</span>&#160;      <span class="stringliteral">&quot;700+900&quot;</span>,   <span class="comment">/* 1 */</span></div><div class="line"><a name="l04885"></a><span class="lineno"> 4885</span>&#160;      <span class="stringliteral">&quot;700+1100&quot;</span>,  <span class="comment">/* 2 */</span></div><div class="line"><a name="l04886"></a><span class="lineno"> 4886</span>&#160;      <span class="stringliteral">&quot;900+1100&quot;</span>,  <span class="comment">/* 3 */</span></div><div class="line"><a name="l04887"></a><span class="lineno"> 4887</span>&#160;      <span class="stringliteral">&quot;700+1300&quot;</span>,  <span class="comment">/* 4 */</span></div><div class="line"><a name="l04888"></a><span class="lineno"> 4888</span>&#160;      <span class="stringliteral">&quot;900+1300&quot;</span>,  <span class="comment">/* 5 */</span></div><div class="line"><a name="l04889"></a><span class="lineno"> 4889</span>&#160;      <span class="stringliteral">&quot;1100+1300&quot;</span>, <span class="comment">/* 6 */</span></div><div class="line"><a name="l04890"></a><span class="lineno"> 4890</span>&#160;      <span class="stringliteral">&quot;700+1500&quot;</span>,  <span class="comment">/* 7 */</span></div><div class="line"><a name="l04891"></a><span class="lineno"> 4891</span>&#160;      <span class="stringliteral">&quot;900+1500&quot;</span>,  <span class="comment">/* 8 */</span></div><div class="line"><a name="l04892"></a><span class="lineno"> 4892</span>&#160;      <span class="stringliteral">&quot;1100+1500&quot;</span>, <span class="comment">/* 9 */</span></div><div class="line"><a name="l04893"></a><span class="lineno"> 4893</span>&#160;      <span class="stringliteral">&quot;1100+1700&quot;</span>, <span class="comment">/* * (KP) */</span></div><div class="line"><a name="l04894"></a><span class="lineno"> 4894</span>&#160;      <span class="stringliteral">&quot;1500+1700&quot;</span>, <span class="comment">/* # (ST) */</span></div><div class="line"><a name="l04895"></a><span class="lineno"> 4895</span>&#160;      <span class="stringliteral">&quot;900+1700&quot;</span>,  <span class="comment">/* A (STP) */</span></div><div class="line"><a name="l04896"></a><span class="lineno"> 4896</span>&#160;      <span class="stringliteral">&quot;1300+1700&quot;</span>, <span class="comment">/* B (ST2P) */</span></div><div class="line"><a name="l04897"></a><span class="lineno"> 4897</span>&#160;      <span class="stringliteral">&quot;700+1700&quot;</span>   <span class="comment">/* C (ST3P) */</span></div><div class="line"><a name="l04898"></a><span class="lineno"> 4898</span>&#160;   };</div><div class="line"><a name="l04899"></a><span class="lineno"> 4899</span>&#160;</div><div class="line"><a name="l04900"></a><span class="lineno"> 4900</span>&#160;   <span class="keywordflow">if</span> (digit &gt;= <span class="charliteral">&#39;0&#39;</span> &amp;&amp; digit &lt;=<span class="charliteral">&#39;9&#39;</span>) {</div><div class="line"><a name="l04901"></a><span class="lineno"> 4901</span>&#160;      <a class="code" href="../../d2/d0f/indications_8h.html#a544e8a1dd4a986b00754103dda6a7d3b">ast_playtones_start</a>(chan, 0, mf_tones[digit-<span class="charliteral">&#39;0&#39;</span>], 0);</div><div class="line"><a name="l04902"></a><span class="lineno"> 4902</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (digit == <span class="charliteral">&#39;*&#39;</span>) {</div><div class="line"><a name="l04903"></a><span class="lineno"> 4903</span>&#160;      <a class="code" href="../../d2/d0f/indications_8h.html#a544e8a1dd4a986b00754103dda6a7d3b">ast_playtones_start</a>(chan, 0, mf_tones[10], 0);</div><div class="line"><a name="l04904"></a><span class="lineno"> 4904</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (digit == <span class="charliteral">&#39;#&#39;</span>) {</div><div class="line"><a name="l04905"></a><span class="lineno"> 4905</span>&#160;      <a class="code" href="../../d2/d0f/indications_8h.html#a544e8a1dd4a986b00754103dda6a7d3b">ast_playtones_start</a>(chan, 0, mf_tones[11], 0);</div><div class="line"><a name="l04906"></a><span class="lineno"> 4906</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (digit == <span class="charliteral">&#39;A&#39;</span>) {</div><div class="line"><a name="l04907"></a><span class="lineno"> 4907</span>&#160;      <a class="code" href="../../d2/d0f/indications_8h.html#a544e8a1dd4a986b00754103dda6a7d3b">ast_playtones_start</a>(chan, 0, mf_tones[12], 0);</div><div class="line"><a name="l04908"></a><span class="lineno"> 4908</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (digit == <span class="charliteral">&#39;B&#39;</span>) {</div><div class="line"><a name="l04909"></a><span class="lineno"> 4909</span>&#160;      <a class="code" href="../../d2/d0f/indications_8h.html#a544e8a1dd4a986b00754103dda6a7d3b">ast_playtones_start</a>(chan, 0, mf_tones[13], 0);</div><div class="line"><a name="l04910"></a><span class="lineno"> 4910</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (digit == <span class="charliteral">&#39;C&#39;</span>) {</div><div class="line"><a name="l04911"></a><span class="lineno"> 4911</span>&#160;      <a class="code" href="../../d2/d0f/indications_8h.html#a544e8a1dd4a986b00754103dda6a7d3b">ast_playtones_start</a>(chan, 0, mf_tones[14], 0);</div><div class="line"><a name="l04912"></a><span class="lineno"> 4912</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04913"></a><span class="lineno"> 4913</span>&#160;      <span class="comment">/* not handled */</span></div><div class="line"><a name="l04914"></a><span class="lineno"> 4914</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to generate MF tone &#39;%c&#39; for &#39;%s&#39;\n&quot;</span>, digit, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l04915"></a><span class="lineno"> 4915</span>&#160;   }</div><div class="line"><a name="l04916"></a><span class="lineno"> 4916</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04917"></a><span class="lineno"> 4917</span>&#160;}</div><div class="line"><a name="l04918"></a><span class="lineno"> 4918</span>&#160;</div><div class="line"><a name="l04919"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a38f90349e730b6556cfe8b99b134d574"> 4919</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a38f90349e730b6556cfe8b99b134d574">ast_senddigit_begin</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">char</span> <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>)</div><div class="line"><a name="l04920"></a><span class="lineno"> 4920</span>&#160;{</div><div class="line"><a name="l04921"></a><span class="lineno"> 4921</span>&#160;   <span class="comment">/* Device does not support DTMF tones, lets fake</span></div><div class="line"><a name="l04922"></a><span class="lineno"> 4922</span>&#160;<span class="comment">    * it by doing our own generation. */</span></div><div class="line"><a name="l04923"></a><span class="lineno"> 4923</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> dtmf_tones[] = {</div><div class="line"><a name="l04924"></a><span class="lineno"> 4924</span>&#160;      <span class="stringliteral">&quot;941+1336&quot;</span>, <span class="comment">/* 0 */</span></div><div class="line"><a name="l04925"></a><span class="lineno"> 4925</span>&#160;      <span class="stringliteral">&quot;697+1209&quot;</span>, <span class="comment">/* 1 */</span></div><div class="line"><a name="l04926"></a><span class="lineno"> 4926</span>&#160;      <span class="stringliteral">&quot;697+1336&quot;</span>, <span class="comment">/* 2 */</span></div><div class="line"><a name="l04927"></a><span class="lineno"> 4927</span>&#160;      <span class="stringliteral">&quot;697+1477&quot;</span>, <span class="comment">/* 3 */</span></div><div class="line"><a name="l04928"></a><span class="lineno"> 4928</span>&#160;      <span class="stringliteral">&quot;770+1209&quot;</span>, <span class="comment">/* 4 */</span></div><div class="line"><a name="l04929"></a><span class="lineno"> 4929</span>&#160;      <span class="stringliteral">&quot;770+1336&quot;</span>, <span class="comment">/* 5 */</span></div><div class="line"><a name="l04930"></a><span class="lineno"> 4930</span>&#160;      <span class="stringliteral">&quot;770+1477&quot;</span>, <span class="comment">/* 6 */</span></div><div class="line"><a name="l04931"></a><span class="lineno"> 4931</span>&#160;      <span class="stringliteral">&quot;852+1209&quot;</span>, <span class="comment">/* 7 */</span></div><div class="line"><a name="l04932"></a><span class="lineno"> 4932</span>&#160;      <span class="stringliteral">&quot;852+1336&quot;</span>, <span class="comment">/* 8 */</span></div><div class="line"><a name="l04933"></a><span class="lineno"> 4933</span>&#160;      <span class="stringliteral">&quot;852+1477&quot;</span>, <span class="comment">/* 9 */</span></div><div class="line"><a name="l04934"></a><span class="lineno"> 4934</span>&#160;      <span class="stringliteral">&quot;697+1633&quot;</span>, <span class="comment">/* A */</span></div><div class="line"><a name="l04935"></a><span class="lineno"> 4935</span>&#160;      <span class="stringliteral">&quot;770+1633&quot;</span>, <span class="comment">/* B */</span></div><div class="line"><a name="l04936"></a><span class="lineno"> 4936</span>&#160;      <span class="stringliteral">&quot;852+1633&quot;</span>, <span class="comment">/* C */</span></div><div class="line"><a name="l04937"></a><span class="lineno"> 4937</span>&#160;      <span class="stringliteral">&quot;941+1633&quot;</span>, <span class="comment">/* D */</span></div><div class="line"><a name="l04938"></a><span class="lineno"> 4938</span>&#160;      <span class="stringliteral">&quot;941+1209&quot;</span>, <span class="comment">/* * */</span></div><div class="line"><a name="l04939"></a><span class="lineno"> 4939</span>&#160;      <span class="stringliteral">&quot;941+1477&quot;</span>  <span class="comment">/* # */</span></div><div class="line"><a name="l04940"></a><span class="lineno"> 4940</span>&#160;   };</div><div class="line"><a name="l04941"></a><span class="lineno"> 4941</span>&#160;</div><div class="line"><a name="l04942"></a><span class="lineno"> 4942</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;send_digit_begin)</div><div class="line"><a name="l04943"></a><span class="lineno"> 4943</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04944"></a><span class="lineno"> 4944</span>&#160;</div><div class="line"><a name="l04945"></a><span class="lineno"> 4945</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l04946"></a><span class="lineno"> 4946</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a2f3ba4ef24824995a3b11fd54aada35e">ast_channel_sending_dtmf_digit_set</a>(chan, digit);</div><div class="line"><a name="l04947"></a><span class="lineno"> 4947</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a792260bb54b287fbde2336c162973ecf">ast_channel_sending_dtmf_tv_set</a>(chan, <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>());</div><div class="line"><a name="l04948"></a><span class="lineno"> 4948</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l04949"></a><span class="lineno"> 4949</span>&#160;</div><div class="line"><a name="l04950"></a><span class="lineno"> 4950</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;send_digit_begin(chan, digit))</div><div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04952"></a><span class="lineno"> 4952</span>&#160;</div><div class="line"><a name="l04953"></a><span class="lineno"> 4953</span>&#160;   <span class="keywordflow">if</span> (digit &gt;= <span class="charliteral">&#39;0&#39;</span> &amp;&amp; digit &lt;=<span class="charliteral">&#39;9&#39;</span>)</div><div class="line"><a name="l04954"></a><span class="lineno"> 4954</span>&#160;      <a class="code" href="../../d2/d0f/indications_8h.html#a544e8a1dd4a986b00754103dda6a7d3b">ast_playtones_start</a>(chan, 0, dtmf_tones[digit-<span class="charliteral">&#39;0&#39;</span>], 0);</div><div class="line"><a name="l04955"></a><span class="lineno"> 4955</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (digit &gt;= <span class="charliteral">&#39;A&#39;</span> &amp;&amp; digit &lt;= <span class="charliteral">&#39;D&#39;</span>)</div><div class="line"><a name="l04956"></a><span class="lineno"> 4956</span>&#160;      <a class="code" href="../../d2/d0f/indications_8h.html#a544e8a1dd4a986b00754103dda6a7d3b">ast_playtones_start</a>(chan, 0, dtmf_tones[digit-<span class="charliteral">&#39;A&#39;</span>+10], 0);</div><div class="line"><a name="l04957"></a><span class="lineno"> 4957</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (digit == <span class="charliteral">&#39;*&#39;</span>)</div><div class="line"><a name="l04958"></a><span class="lineno"> 4958</span>&#160;      <a class="code" href="../../d2/d0f/indications_8h.html#a544e8a1dd4a986b00754103dda6a7d3b">ast_playtones_start</a>(chan, 0, dtmf_tones[14], 0);</div><div class="line"><a name="l04959"></a><span class="lineno"> 4959</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (digit == <span class="charliteral">&#39;#&#39;</span>)</div><div class="line"><a name="l04960"></a><span class="lineno"> 4960</span>&#160;      <a class="code" href="../../d2/d0f/indications_8h.html#a544e8a1dd4a986b00754103dda6a7d3b">ast_playtones_start</a>(chan, 0, dtmf_tones[15], 0);</div><div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160;   <span class="keywordflow">else</span> {</div><div class="line"><a name="l04962"></a><span class="lineno"> 4962</span>&#160;      <span class="comment">/* not handled */</span></div><div class="line"><a name="l04963"></a><span class="lineno"> 4963</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Unable to generate DTMF tone &#39;%c&#39; for &#39;%s&#39;\n&quot;</span>, digit, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l04964"></a><span class="lineno"> 4964</span>&#160;   }</div><div class="line"><a name="l04965"></a><span class="lineno"> 4965</span>&#160;</div><div class="line"><a name="l04966"></a><span class="lineno"> 4966</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04967"></a><span class="lineno"> 4967</span>&#160;}</div><div class="line"><a name="l04968"></a><span class="lineno"> 4968</span>&#160;</div><div class="line"><a name="l04969"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ab45db8cf33a706a5831d553d5199c143"> 4969</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#ab45db8cf33a706a5831d553d5199c143">ast_senddigit_end</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">char</span> <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> duration)</div><div class="line"><a name="l04970"></a><span class="lineno"> 4970</span>&#160;{</div><div class="line"><a name="l04971"></a><span class="lineno"> 4971</span>&#160;   <span class="keywordtype">int</span> res = -1;</div><div class="line"><a name="l04972"></a><span class="lineno"> 4972</span>&#160;</div><div class="line"><a name="l04973"></a><span class="lineno"> 4973</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;send_digit_end)</div><div class="line"><a name="l04974"></a><span class="lineno"> 4974</span>&#160;      res = <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#a2560a7b7c510a4438bb215de6613cab3">send_digit_end</a>(chan, digit, duration);</div><div class="line"><a name="l04975"></a><span class="lineno"> 4975</span>&#160;</div><div class="line"><a name="l04976"></a><span class="lineno"> 4976</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l04977"></a><span class="lineno"> 4977</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#adfb1957995e60f6711ae15b8b77a0ba6">ast_channel_sending_dtmf_digit</a>(chan) == digit) {</div><div class="line"><a name="l04978"></a><span class="lineno"> 4978</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a2f3ba4ef24824995a3b11fd54aada35e">ast_channel_sending_dtmf_digit_set</a>(chan, 0);</div><div class="line"><a name="l04979"></a><span class="lineno"> 4979</span>&#160;   }</div><div class="line"><a name="l04980"></a><span class="lineno"> 4980</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l04981"></a><span class="lineno"> 4981</span>&#160;</div><div class="line"><a name="l04982"></a><span class="lineno"> 4982</span>&#160;   <span class="keywordflow">if</span> (res &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#a6fa8e680c963b66575d1950c19493b40">ast_channel_generator</a>(chan))</div><div class="line"><a name="l04983"></a><span class="lineno"> 4983</span>&#160;      <a class="code" href="../../d2/d0f/indications_8h.html#a9d5be069b7060d326a213f5d60b8dc77">ast_playtones_stop</a>(chan);</div><div class="line"><a name="l04984"></a><span class="lineno"> 4984</span>&#160;</div><div class="line"><a name="l04985"></a><span class="lineno"> 4985</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04986"></a><span class="lineno"> 4986</span>&#160;}</div><div class="line"><a name="l04987"></a><span class="lineno"> 4987</span>&#160;</div><div class="line"><a name="l04988"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a7f947d997e2f6c1a995d2e093240cbc9"> 4988</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a7f947d997e2f6c1a995d2e093240cbc9">ast_senddigit_mf_end</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l04989"></a><span class="lineno"> 4989</span>&#160;{</div><div class="line"><a name="l04990"></a><span class="lineno"> 4990</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a6fa8e680c963b66575d1950c19493b40">ast_channel_generator</a>(chan)) {</div><div class="line"><a name="l04991"></a><span class="lineno"> 4991</span>&#160;      <a class="code" href="../../d2/d0f/indications_8h.html#a9d5be069b7060d326a213f5d60b8dc77">ast_playtones_stop</a>(chan);</div><div class="line"><a name="l04992"></a><span class="lineno"> 4992</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04993"></a><span class="lineno"> 4993</span>&#160;   }</div><div class="line"><a name="l04994"></a><span class="lineno"> 4994</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04995"></a><span class="lineno"> 4995</span>&#160;}</div><div class="line"><a name="l04996"></a><span class="lineno"> 4996</span>&#160;</div><div class="line"><a name="l04997"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ac48cc3fb7a20c85c97950b685e756ef7"> 4997</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#ac48cc3fb7a20c85c97950b685e756ef7">ast_senddigit_mf</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">char</span> <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> duration,</div><div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> durationkp, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> durationst, <span class="keywordtype">int</span> is_external)</div><div class="line"><a name="l04999"></a><span class="lineno"> 4999</span>&#160;{</div><div class="line"><a name="l05000"></a><span class="lineno"> 5000</span>&#160;   <span class="keywordflow">if</span> (duration &lt; <a class="code" href="../../d4/d28/channel_8c.html#aba4a2fe640be077614d89793846d9ef2">DEFAULT_EMULATE_MF_DURATION</a>) {</div><div class="line"><a name="l05001"></a><span class="lineno"> 5001</span>&#160;      duration = <a class="code" href="../../d4/d28/channel_8c.html#aba4a2fe640be077614d89793846d9ef2">DEFAULT_EMULATE_MF_DURATION</a>;</div><div class="line"><a name="l05002"></a><span class="lineno"> 5002</span>&#160;   }</div><div class="line"><a name="l05003"></a><span class="lineno"> 5003</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;send_digit_begin) {</div><div class="line"><a name="l05004"></a><span class="lineno"> 5004</span>&#160;      <span class="keywordflow">if</span> (digit == <span class="charliteral">&#39;*&#39;</span>) {</div><div class="line"><a name="l05005"></a><span class="lineno"> 5005</span>&#160;         duration = durationkp;</div><div class="line"><a name="l05006"></a><span class="lineno"> 5006</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (digit == <span class="charliteral">&#39;#&#39;</span> || digit == <span class="charliteral">&#39;A&#39;</span> || digit == <span class="charliteral">&#39;B&#39;</span> || digit == <span class="charliteral">&#39;C&#39;</span>) {</div><div class="line"><a name="l05007"></a><span class="lineno"> 5007</span>&#160;         duration = durationst;</div><div class="line"><a name="l05008"></a><span class="lineno"> 5008</span>&#160;      }</div><div class="line"><a name="l05009"></a><span class="lineno"> 5009</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a03c5d60f7e6977f549939972c1503271">ast_senddigit_mf_begin</a>(chan, digit);</div><div class="line"><a name="l05010"></a><span class="lineno"> 5010</span>&#160;      <span class="keywordflow">if</span> (is_external) {</div><div class="line"><a name="l05011"></a><span class="lineno"> 5011</span>&#160;         usleep(duration * 1000);</div><div class="line"><a name="l05012"></a><span class="lineno"> 5012</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05013"></a><span class="lineno"> 5013</span>&#160;         <a class="code" href="../../d4/d28/channel_8c.html#af10e3bd01602095e1908d3926afc3b76">ast_safe_sleep</a>(chan, duration);</div><div class="line"><a name="l05014"></a><span class="lineno"> 5014</span>&#160;      }</div><div class="line"><a name="l05015"></a><span class="lineno"> 5015</span>&#160;   }</div><div class="line"><a name="l05016"></a><span class="lineno"> 5016</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a7f947d997e2f6c1a995d2e093240cbc9">ast_senddigit_mf_end</a>(chan);</div><div class="line"><a name="l05017"></a><span class="lineno"> 5017</span>&#160;}</div><div class="line"><a name="l05018"></a><span class="lineno"> 5018</span>&#160;</div><div class="line"><a name="l05019"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a48a8b376caf908979e96af8641591c92"> 5019</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a48a8b376caf908979e96af8641591c92">ast_senddigit</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">char</span> <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> duration)</div><div class="line"><a name="l05020"></a><span class="lineno"> 5020</span>&#160;{</div><div class="line"><a name="l05021"></a><span class="lineno"> 5021</span>&#160;   <span class="keywordflow">if</span> (duration &lt; <a class="code" href="../../d4/d28/channel_8c.html#a4a1bcc0fd8b14e9bbff17b963969bcab">AST_DEFAULT_EMULATE_DTMF_DURATION</a>) {</div><div class="line"><a name="l05022"></a><span class="lineno"> 5022</span>&#160;      duration = <a class="code" href="../../d4/d28/channel_8c.html#a4a1bcc0fd8b14e9bbff17b963969bcab">AST_DEFAULT_EMULATE_DTMF_DURATION</a>;</div><div class="line"><a name="l05023"></a><span class="lineno"> 5023</span>&#160;   }</div><div class="line"><a name="l05024"></a><span class="lineno"> 5024</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;send_digit_begin) {</div><div class="line"><a name="l05025"></a><span class="lineno"> 5025</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a38f90349e730b6556cfe8b99b134d574">ast_senddigit_begin</a>(chan, digit);</div><div class="line"><a name="l05026"></a><span class="lineno"> 5026</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#af10e3bd01602095e1908d3926afc3b76">ast_safe_sleep</a>(chan, duration);</div><div class="line"><a name="l05027"></a><span class="lineno"> 5027</span>&#160;   }</div><div class="line"><a name="l05028"></a><span class="lineno"> 5028</span>&#160;</div><div class="line"><a name="l05029"></a><span class="lineno"> 5029</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#ab45db8cf33a706a5831d553d5199c143">ast_senddigit_end</a>(chan, digit, duration);</div><div class="line"><a name="l05030"></a><span class="lineno"> 5030</span>&#160;}</div><div class="line"><a name="l05031"></a><span class="lineno"> 5031</span>&#160;</div><div class="line"><a name="l05032"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a82a0d60133ec689b693bcbe296914c75"> 5032</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a82a0d60133ec689b693bcbe296914c75">ast_senddigit_external</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">char</span> <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> duration)</div><div class="line"><a name="l05033"></a><span class="lineno"> 5033</span>&#160;{</div><div class="line"><a name="l05034"></a><span class="lineno"> 5034</span>&#160;   <span class="keywordflow">if</span> (duration &lt; <a class="code" href="../../d4/d28/channel_8c.html#a4a1bcc0fd8b14e9bbff17b963969bcab">AST_DEFAULT_EMULATE_DTMF_DURATION</a>) {</div><div class="line"><a name="l05035"></a><span class="lineno"> 5035</span>&#160;      duration = <a class="code" href="../../d4/d28/channel_8c.html#a4a1bcc0fd8b14e9bbff17b963969bcab">AST_DEFAULT_EMULATE_DTMF_DURATION</a>;</div><div class="line"><a name="l05036"></a><span class="lineno"> 5036</span>&#160;   }</div><div class="line"><a name="l05037"></a><span class="lineno"> 5037</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;send_digit_begin) {</div><div class="line"><a name="l05038"></a><span class="lineno"> 5038</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a38f90349e730b6556cfe8b99b134d574">ast_senddigit_begin</a>(chan, digit);</div><div class="line"><a name="l05039"></a><span class="lineno"> 5039</span>&#160;      usleep(duration * 1000);</div><div class="line"><a name="l05040"></a><span class="lineno"> 5040</span>&#160;   }</div><div class="line"><a name="l05041"></a><span class="lineno"> 5041</span>&#160;</div><div class="line"><a name="l05042"></a><span class="lineno"> 5042</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#ab45db8cf33a706a5831d553d5199c143">ast_senddigit_end</a>(chan, digit, duration);</div><div class="line"><a name="l05043"></a><span class="lineno"> 5043</span>&#160;}</div><div class="line"><a name="l05044"></a><span class="lineno"> 5044</span>&#160;</div><div class="line"><a name="l05045"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a2458f1412e300412e53d86fe94e19002"> 5045</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a2458f1412e300412e53d86fe94e19002">ast_prod</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l05046"></a><span class="lineno"> 5046</span>&#160;{</div><div class="line"><a name="l05047"></a><span class="lineno"> 5047</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> a = { <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a> };</div><div class="line"><a name="l05048"></a><span class="lineno"> 5048</span>&#160;   <span class="keywordtype">char</span> nothing[128];</div><div class="line"><a name="l05049"></a><span class="lineno"> 5049</span>&#160;</div><div class="line"><a name="l05050"></a><span class="lineno"> 5050</span>&#160;   <span class="comment">/* Send an empty audio frame to get things moving */</span></div><div class="line"><a name="l05051"></a><span class="lineno"> 5051</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(chan) != <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>) {</div><div class="line"><a name="l05052"></a><span class="lineno"> 5052</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Prodding channel &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l05053"></a><span class="lineno"> 5053</span>&#160;      a.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a> = <a class="code" href="../../d5/d7b/channel_8h.html#ad27c52cda6e6435a121900661ad5bdce">ast_channel_rawwriteformat</a>(chan);</div><div class="line"><a name="l05054"></a><span class="lineno"> 5054</span>&#160;      a.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a> = nothing + <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a>;</div><div class="line"><a name="l05055"></a><span class="lineno"> 5055</span>&#160;      a.<a class="code" href="../../d0/d99/structast__frame.html#af51e37c9331049b1e3d250a7c8bc3c26">src</a> = <span class="stringliteral">&quot;ast_prod&quot;</span>; <span class="comment">/* this better match check in ast_write */</span></div><div class="line"><a name="l05056"></a><span class="lineno"> 5056</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d4/d28/channel_8c.html#a1b4c335490f5170c1f9e2c7c6781003f">ast_write</a>(chan, &amp;a))</div><div class="line"><a name="l05057"></a><span class="lineno"> 5057</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Prodding channel &#39;%s&#39; failed\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l05058"></a><span class="lineno"> 5058</span>&#160;   }</div><div class="line"><a name="l05059"></a><span class="lineno"> 5059</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05060"></a><span class="lineno"> 5060</span>&#160;}</div><div class="line"><a name="l05061"></a><span class="lineno"> 5061</span>&#160;</div><div class="line"><a name="l05062"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aaacf12a6a5826c53e7e55b17d1afc3da"> 5062</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#aaacf12a6a5826c53e7e55b17d1afc3da">ast_write_video</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *fr)</div><div class="line"><a name="l05063"></a><span class="lineno"> 5063</span>&#160;{</div><div class="line"><a name="l05064"></a><span class="lineno"> 5064</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l05065"></a><span class="lineno"> 5065</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;write_video)</div><div class="line"><a name="l05066"></a><span class="lineno"> 5066</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05067"></a><span class="lineno"> 5067</span>&#160;   res = <a class="code" href="../../d4/d28/channel_8c.html#a1b4c335490f5170c1f9e2c7c6781003f">ast_write</a>(chan, fr);</div><div class="line"><a name="l05068"></a><span class="lineno"> 5068</span>&#160;   <span class="keywordflow">if</span> (!res)</div><div class="line"><a name="l05069"></a><span class="lineno"> 5069</span>&#160;      res = 1;</div><div class="line"><a name="l05070"></a><span class="lineno"> 5070</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l05071"></a><span class="lineno"> 5071</span>&#160;}</div><div class="line"><a name="l05072"></a><span class="lineno"> 5072</span>&#160;</div><div class="line"><a name="l05073"></a><span class="lineno"><a class="line" href="../../d0/d8a/structplc__ds.html"> 5073</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d0/d8a/structplc__ds.html">plc_ds</a> {</div><div class="line"><a name="l05074"></a><span class="lineno"> 5074</span>&#160;   <span class="comment">/* A buffer in which to store SLIN PLC</span></div><div class="line"><a name="l05075"></a><span class="lineno"> 5075</span>&#160;<span class="comment">    * samples generated by the generic PLC</span></div><div class="line"><a name="l05076"></a><span class="lineno"> 5076</span>&#160;<span class="comment">    * functionality in plc.c</span></div><div class="line"><a name="l05077"></a><span class="lineno"> 5077</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l05078"></a><span class="lineno"><a class="line" href="../../d0/d8a/structplc__ds.html#a0aefc000efd9c98b13b7b5855d2d60c5"> 5078</a></span>&#160;   <a class="code" href="../../da/d4e/db_8h.html#aa343fa3b3d06292b959ffdd4c4703b06">int16_t</a> *<a class="code" href="../../d0/d8a/structplc__ds.html#a0aefc000efd9c98b13b7b5855d2d60c5">samples_buf</a>;</div><div class="line"><a name="l05079"></a><span class="lineno"> 5079</span>&#160;   <span class="comment">/* The current number of samples in the</span></div><div class="line"><a name="l05080"></a><span class="lineno"> 5080</span>&#160;<span class="comment">    * samples_buf</span></div><div class="line"><a name="l05081"></a><span class="lineno"> 5081</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l05082"></a><span class="lineno"><a class="line" href="../../d0/d8a/structplc__ds.html#a697044b41fae96bc51a76ff759ad08d4"> 5082</a></span>&#160;   <span class="keywordtype">size_t</span> <a class="code" href="../../d0/d8a/structplc__ds.html#a697044b41fae96bc51a76ff759ad08d4">num_samples</a>;</div><div class="line"><a name="l05083"></a><span class="lineno"><a class="line" href="../../d0/d8a/structplc__ds.html#ae15ed5326596f5f0aab67e52b23640a0"> 5083</a></span>&#160;   <a class="code" href="../../d8/dc7/structplc__state__t.html">plc_state_t</a> <a class="code" href="../../d0/d8a/structplc__ds.html#ae15ed5326596f5f0aab67e52b23640a0">plc_state</a>;</div><div class="line"><a name="l05084"></a><span class="lineno"> 5084</span>&#160;};</div><div class="line"><a name="l05085"></a><span class="lineno"> 5085</span>&#160;</div><div class="line"><a name="l05086"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a739f3fa9beceb4dbb98043e3c1acda46"> 5086</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a739f3fa9beceb4dbb98043e3c1acda46">plc_ds_destroy</a>(<span class="keywordtype">void</span> *data)</div><div class="line"><a name="l05087"></a><span class="lineno"> 5087</span>&#160;{</div><div class="line"><a name="l05088"></a><span class="lineno"> 5088</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d8a/structplc__ds.html">plc_ds</a> *plc = data;</div><div class="line"><a name="l05089"></a><span class="lineno"> 5089</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(plc-&gt;<a class="code" href="../../d0/d8a/structplc__ds.html#a0aefc000efd9c98b13b7b5855d2d60c5">samples_buf</a>);</div><div class="line"><a name="l05090"></a><span class="lineno"> 5090</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(plc);</div><div class="line"><a name="l05091"></a><span class="lineno"> 5091</span>&#160;}</div><div class="line"><a name="l05092"></a><span class="lineno"> 5092</span>&#160;</div><div class="line"><a name="l05093"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a4344f019a1681df88557f238c81ad5cc"> 5093</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a> <a class="code" href="../../d4/d28/channel_8c.html#a4344f019a1681df88557f238c81ad5cc">plc_ds_info</a> = {</div><div class="line"><a name="l05094"></a><span class="lineno"> 5094</span>&#160;   .<a class="code" href="../../d9/dfb/structast__datastore__info.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a> = <span class="stringliteral">&quot;plc&quot;</span>,</div><div class="line"><a name="l05095"></a><span class="lineno"> 5095</span>&#160;   .destroy = <a class="code" href="../../d4/d28/channel_8c.html#a739f3fa9beceb4dbb98043e3c1acda46">plc_ds_destroy</a>,</div><div class="line"><a name="l05096"></a><span class="lineno"> 5096</span>&#160;};</div><div class="line"><a name="l05097"></a><span class="lineno"> 5097</span>&#160;</div><div class="line"><a name="l05098"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a99e5311ec38b1b7a01530176130bd995"> 5098</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a99e5311ec38b1b7a01530176130bd995">adjust_frame_for_plc</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame, <span class="keyword">struct</span> <a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *datastore)</div><div class="line"><a name="l05099"></a><span class="lineno"> 5099</span>&#160;{</div><div class="line"><a name="l05100"></a><span class="lineno"> 5100</span>&#160;   <span class="keywordtype">int</span> num_new_samples = frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>;</div><div class="line"><a name="l05101"></a><span class="lineno"> 5101</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d8a/structplc__ds.html">plc_ds</a> *plc = datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l05102"></a><span class="lineno"> 5102</span>&#160;</div><div class="line"><a name="l05103"></a><span class="lineno"> 5103</span>&#160;   <span class="comment">/* As a general note, let me explain the somewhat odd calculations used when taking</span></div><div class="line"><a name="l05104"></a><span class="lineno"> 5104</span>&#160;<span class="comment">    * the frame offset into account here. According to documentation in frame.h, the frame&#39;s</span></div><div class="line"><a name="l05105"></a><span class="lineno"> 5105</span>&#160;<span class="comment">    * offset field indicates the number of bytes that the audio is offset. The plc-&gt;samples_buf</span></div><div class="line"><a name="l05106"></a><span class="lineno"> 5106</span>&#160;<span class="comment">    * is not an array of bytes, but rather an array of 16-bit integers since it holds SLIN</span></div><div class="line"><a name="l05107"></a><span class="lineno"> 5107</span>&#160;<span class="comment">    * samples. So I had two choices to make here with the offset.</span></div><div class="line"><a name="l05108"></a><span class="lineno"> 5108</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l05109"></a><span class="lineno"> 5109</span>&#160;<span class="comment">    * 1. Make the offset AST_FRIENDLY_OFFSET bytes. The main downside for this is that</span></div><div class="line"><a name="l05110"></a><span class="lineno"> 5110</span>&#160;<span class="comment">    *    I can&#39;t just add AST_FRIENDLY_OFFSET to the plc-&gt;samples_buf and have the pointer</span></div><div class="line"><a name="l05111"></a><span class="lineno"> 5111</span>&#160;<span class="comment">    *    arithmetic come out right. I would have to do some odd casting or division for this to</span></div><div class="line"><a name="l05112"></a><span class="lineno"> 5112</span>&#160;<span class="comment">    *    work as I wanted.</span></div><div class="line"><a name="l05113"></a><span class="lineno"> 5113</span>&#160;<span class="comment">    * 2. Make the offset AST_FRIENDLY_OFFSET * 2 bytes. This allows the pointer arithmetic</span></div><div class="line"><a name="l05114"></a><span class="lineno"> 5114</span>&#160;<span class="comment">    *    to work out better with the plc-&gt;samples_buf. The downside here is that the buffer&#39;s</span></div><div class="line"><a name="l05115"></a><span class="lineno"> 5115</span>&#160;<span class="comment">    *    allocation contains an extra 64 bytes of unused space.</span></div><div class="line"><a name="l05116"></a><span class="lineno"> 5116</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l05117"></a><span class="lineno"> 5117</span>&#160;<span class="comment">    * I decided to go with option 2. This is why in the calloc statement and the statement that</span></div><div class="line"><a name="l05118"></a><span class="lineno"> 5118</span>&#160;<span class="comment">    * sets the frame&#39;s offset, AST_FRIENDLY_OFFSET is multiplied by 2.</span></div><div class="line"><a name="l05119"></a><span class="lineno"> 5119</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l05120"></a><span class="lineno"> 5120</span>&#160;</div><div class="line"><a name="l05121"></a><span class="lineno"> 5121</span>&#160;   <span class="comment">/* If this audio frame has no samples to fill in, ignore it */</span></div><div class="line"><a name="l05122"></a><span class="lineno"> 5122</span>&#160;   <span class="keywordflow">if</span> (!num_new_samples) {</div><div class="line"><a name="l05123"></a><span class="lineno"> 5123</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l05124"></a><span class="lineno"> 5124</span>&#160;   }</div><div class="line"><a name="l05125"></a><span class="lineno"> 5125</span>&#160;</div><div class="line"><a name="l05126"></a><span class="lineno"> 5126</span>&#160;   <span class="comment">/* First, we need to be sure that our buffer is large enough to accomodate</span></div><div class="line"><a name="l05127"></a><span class="lineno"> 5127</span>&#160;<span class="comment">    * the samples we need to fill in. This will likely only occur on the first</span></div><div class="line"><a name="l05128"></a><span class="lineno"> 5128</span>&#160;<span class="comment">    * frame we write.</span></div><div class="line"><a name="l05129"></a><span class="lineno"> 5129</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l05130"></a><span class="lineno"> 5130</span>&#160;   <span class="keywordflow">if</span> (plc-&gt;<a class="code" href="../../d0/d8a/structplc__ds.html#a697044b41fae96bc51a76ff759ad08d4">num_samples</a> &lt; num_new_samples) {</div><div class="line"><a name="l05131"></a><span class="lineno"> 5131</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(plc-&gt;<a class="code" href="../../d0/d8a/structplc__ds.html#a0aefc000efd9c98b13b7b5855d2d60c5">samples_buf</a>);</div><div class="line"><a name="l05132"></a><span class="lineno"> 5132</span>&#160;      plc-&gt;<a class="code" href="../../d0/d8a/structplc__ds.html#a0aefc000efd9c98b13b7b5855d2d60c5">samples_buf</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, (num_new_samples * <span class="keyword">sizeof</span>(*plc-&gt;<a class="code" href="../../d0/d8a/structplc__ds.html#a0aefc000efd9c98b13b7b5855d2d60c5">samples_buf</a>)) + (<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a> * 2));</div><div class="line"><a name="l05133"></a><span class="lineno"> 5133</span>&#160;      <span class="keywordflow">if</span> (!plc-&gt;<a class="code" href="../../d0/d8a/structplc__ds.html#a0aefc000efd9c98b13b7b5855d2d60c5">samples_buf</a>) {</div><div class="line"><a name="l05134"></a><span class="lineno"> 5134</span>&#160;         <a class="code" href="../../d4/d28/channel_8c.html#a1ff1c62b6d50823da93a920575c9c0c9">ast_channel_datastore_remove</a>(chan, datastore);</div><div class="line"><a name="l05135"></a><span class="lineno"> 5135</span>&#160;         <a class="code" href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14">ast_datastore_free</a>(datastore);</div><div class="line"><a name="l05136"></a><span class="lineno"> 5136</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l05137"></a><span class="lineno"> 5137</span>&#160;      }</div><div class="line"><a name="l05138"></a><span class="lineno"> 5138</span>&#160;      plc-&gt;<a class="code" href="../../d0/d8a/structplc__ds.html#a697044b41fae96bc51a76ff759ad08d4">num_samples</a> = num_new_samples;</div><div class="line"><a name="l05139"></a><span class="lineno"> 5139</span>&#160;   }</div><div class="line"><a name="l05140"></a><span class="lineno"> 5140</span>&#160;</div><div class="line"><a name="l05141"></a><span class="lineno"> 5141</span>&#160;   <span class="keywordflow">if</span> (frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> == 0) {</div><div class="line"><a name="l05142"></a><span class="lineno"> 5142</span>&#160;      <a class="code" href="../../d2/d66/plc_8h.html#a1d67d861ec6d5a43808697001e51425e">plc_fillin</a>(&amp;plc-&gt;<a class="code" href="../../d0/d8a/structplc__ds.html#ae15ed5326596f5f0aab67e52b23640a0">plc_state</a>, plc-&gt;<a class="code" href="../../d0/d8a/structplc__ds.html#a0aefc000efd9c98b13b7b5855d2d60c5">samples_buf</a> + <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a>, frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>);</div><div class="line"><a name="l05143"></a><span class="lineno"> 5143</span>&#160;      frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a> = plc-&gt;<a class="code" href="../../d0/d8a/structplc__ds.html#a0aefc000efd9c98b13b7b5855d2d60c5">samples_buf</a> + <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a>;</div><div class="line"><a name="l05144"></a><span class="lineno"> 5144</span>&#160;      frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> = num_new_samples * 2;</div><div class="line"><a name="l05145"></a><span class="lineno"> 5145</span>&#160;      frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aed7ea92f45bd273dde380a45ddced592">offset</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a> * 2;</div><div class="line"><a name="l05146"></a><span class="lineno"> 5146</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05147"></a><span class="lineno"> 5147</span>&#160;      <a class="code" href="../../d2/d66/plc_8h.html#af99c26d697c92e41dd6a83ada318ee4a">plc_rx</a>(&amp;plc-&gt;<a class="code" href="../../d0/d8a/structplc__ds.html#ae15ed5326596f5f0aab67e52b23640a0">plc_state</a>, frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>);</div><div class="line"><a name="l05148"></a><span class="lineno"> 5148</span>&#160;   }</div><div class="line"><a name="l05149"></a><span class="lineno"> 5149</span>&#160;}</div><div class="line"><a name="l05150"></a><span class="lineno"> 5150</span>&#160;</div><div class="line"><a name="l05151"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ad5963dfda0d2c9bcff0b32ed8fc1bd0a"> 5151</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#ad5963dfda0d2c9bcff0b32ed8fc1bd0a">apply_plc</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame)</div><div class="line"><a name="l05152"></a><span class="lineno"> 5152</span>&#160;{</div><div class="line"><a name="l05153"></a><span class="lineno"> 5153</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *datastore;</div><div class="line"><a name="l05154"></a><span class="lineno"> 5154</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d8a/structplc__ds.html">plc_ds</a> *plc;</div><div class="line"><a name="l05155"></a><span class="lineno"> 5155</span>&#160;</div><div class="line"><a name="l05156"></a><span class="lineno"> 5156</span>&#160;   datastore = <a class="code" href="../../d4/d28/channel_8c.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a>(chan, &amp;plc_ds_info, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05157"></a><span class="lineno"> 5157</span>&#160;   <span class="keywordflow">if</span> (datastore) {</div><div class="line"><a name="l05158"></a><span class="lineno"> 5158</span>&#160;      plc = datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l05159"></a><span class="lineno"> 5159</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a99e5311ec38b1b7a01530176130bd995">adjust_frame_for_plc</a>(chan, frame, datastore);</div><div class="line"><a name="l05160"></a><span class="lineno"> 5160</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l05161"></a><span class="lineno"> 5161</span>&#160;   }</div><div class="line"><a name="l05162"></a><span class="lineno"> 5162</span>&#160;</div><div class="line"><a name="l05163"></a><span class="lineno"> 5163</span>&#160;   datastore = <a class="code" href="../../d9/db6/datastore_8h.html#a666afb07fd77d50782cc10f83e029159">ast_datastore_alloc</a>(&amp;plc_ds_info, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05164"></a><span class="lineno"> 5164</span>&#160;   <span class="keywordflow">if</span> (!datastore) {</div><div class="line"><a name="l05165"></a><span class="lineno"> 5165</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l05166"></a><span class="lineno"> 5166</span>&#160;   }</div><div class="line"><a name="l05167"></a><span class="lineno"> 5167</span>&#160;   plc = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*plc));</div><div class="line"><a name="l05168"></a><span class="lineno"> 5168</span>&#160;   <span class="keywordflow">if</span> (!plc) {</div><div class="line"><a name="l05169"></a><span class="lineno"> 5169</span>&#160;      <a class="code" href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14">ast_datastore_free</a>(datastore);</div><div class="line"><a name="l05170"></a><span class="lineno"> 5170</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l05171"></a><span class="lineno"> 5171</span>&#160;   }</div><div class="line"><a name="l05172"></a><span class="lineno"> 5172</span>&#160;   datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a> = plc;</div><div class="line"><a name="l05173"></a><span class="lineno"> 5173</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a1ed3e98d33d5587948a0e2ef67a81f52">ast_channel_datastore_add</a>(chan, datastore);</div><div class="line"><a name="l05174"></a><span class="lineno"> 5174</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a99e5311ec38b1b7a01530176130bd995">adjust_frame_for_plc</a>(chan, frame, datastore);</div><div class="line"><a name="l05175"></a><span class="lineno"> 5175</span>&#160;}</div><div class="line"><a name="l05176"></a><span class="lineno"> 5176</span>&#160;</div><div class="line"><a name="l05177"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#acb7ada7c7705b3a88262b38d825b476b"> 5177</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#acb7ada7c7705b3a88262b38d825b476b">tech_write</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream,</div><div class="line"><a name="l05178"></a><span class="lineno"> 5178</span>&#160;         <span class="keyword">struct</span> <a class="code" href="../../d4/d17/structast__stream.html">ast_stream</a> *default_stream, <span class="keyword">struct</span> <a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame)</div><div class="line"><a name="l05179"></a><span class="lineno"> 5179</span>&#160;{</div><div class="line"><a name="l05180"></a><span class="lineno"> 5180</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../db/d9b/format__ogg__vorbis_8c.html#aa07752a32d3d4fa9eac743a1d7daf16f">write_stream</a>) {</div><div class="line"><a name="l05181"></a><span class="lineno"> 5181</span>&#160;      <span class="keywordflow">return</span> stream ? <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#afa7782a9f08ff818e7ba3d3fe730f028">write_stream</a>(</div><div class="line"><a name="l05182"></a><span class="lineno"> 5182</span>&#160;         chan, <a class="code" href="../../d8/d95/stream_8h.html#a35dd19cc6a6f0310d45e181398095463">ast_stream_get_position</a>(stream), frame) : 0;</div><div class="line"><a name="l05183"></a><span class="lineno"> 5183</span>&#160;   }</div><div class="line"><a name="l05184"></a><span class="lineno"> 5184</span>&#160;</div><div class="line"><a name="l05185"></a><span class="lineno"> 5185</span>&#160;   <span class="keywordflow">return</span> ((stream == default_stream) &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;write) ?</div><div class="line"><a name="l05186"></a><span class="lineno"> 5186</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#a00128f99123ef7844d506e8939bb1786">write</a>(chan, frame) : 0;</div><div class="line"><a name="l05187"></a><span class="lineno"> 5187</span>&#160;}</div><div class="line"><a name="l05188"></a><span class="lineno"> 5188</span>&#160;</div><div class="line"><a name="l05189"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a1b4c335490f5170c1f9e2c7c6781003f"> 5189</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a1b4c335490f5170c1f9e2c7c6781003f">ast_write</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *fr)</div><div class="line"><a name="l05190"></a><span class="lineno"> 5190</span>&#160;{</div><div class="line"><a name="l05191"></a><span class="lineno"> 5191</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a662ceda1ee4acd7a6f24331ab20836ee">ast_write_stream</a>(chan, -1, fr);</div><div class="line"><a name="l05192"></a><span class="lineno"> 5192</span>&#160;}</div><div class="line"><a name="l05193"></a><span class="lineno"> 5193</span>&#160;</div><div class="line"><a name="l05194"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a662ceda1ee4acd7a6f24331ab20836ee"> 5194</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a662ceda1ee4acd7a6f24331ab20836ee">ast_write_stream</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">int</span> stream_num, <span class="keyword">struct</span> <a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *fr)</div><div class="line"><a name="l05195"></a><span class="lineno"> 5195</span>&#160;{</div><div class="line"><a name="l05196"></a><span class="lineno"> 5196</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *default_stream = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05197"></a><span class="lineno"> 5197</span>&#160;   <span class="keywordtype">int</span> res = -1;</div><div class="line"><a name="l05198"></a><span class="lineno"> 5198</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05199"></a><span class="lineno"> 5199</span>&#160;   <span class="keywordtype">int</span> count = 0;</div><div class="line"><a name="l05200"></a><span class="lineno"> 5200</span>&#160;   <span class="keywordtype">int</span> hooked = 0;</div><div class="line"><a name="l05201"></a><span class="lineno"> 5201</span>&#160;</div><div class="line"><a name="l05202"></a><span class="lineno"> 5202</span>&#160;   <span class="comment">/*Deadlock avoidance*/</span></div><div class="line"><a name="l05203"></a><span class="lineno"> 5203</span>&#160;   <span class="keywordflow">while</span>(<a class="code" href="../../d5/d7b/channel_8h.html#a7dc0d696d897c864c6f41a3a1795c82e">ast_channel_trylock</a>(chan)) {</div><div class="line"><a name="l05204"></a><span class="lineno"> 5204</span>&#160;      <span class="comment">/*cannot goto done since the channel is not locked*/</span></div><div class="line"><a name="l05205"></a><span class="lineno"> 5205</span>&#160;      <span class="keywordflow">if</span>(count++ &gt; 10) {</div><div class="line"><a name="l05206"></a><span class="lineno"> 5206</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Deadlock avoided for write to channel &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l05207"></a><span class="lineno"> 5207</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05208"></a><span class="lineno"> 5208</span>&#160;      }</div><div class="line"><a name="l05209"></a><span class="lineno"> 5209</span>&#160;      usleep(1);</div><div class="line"><a name="l05210"></a><span class="lineno"> 5210</span>&#160;   }</div><div class="line"><a name="l05211"></a><span class="lineno"> 5211</span>&#160;</div><div class="line"><a name="l05212"></a><span class="lineno"> 5212</span>&#160;   <span class="comment">/* Stop if we&#39;re a zombie or need a soft hangup */</span></div><div class="line"><a name="l05213"></a><span class="lineno"> 5213</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a26796fa52cc5857446eec8d16a4b718d">AST_FLAG_ZOMBIE</a>) || <a class="code" href="../../d4/d28/channel_8c.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(chan)) {</div><div class="line"><a name="l05214"></a><span class="lineno"> 5214</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>;</div><div class="line"><a name="l05215"></a><span class="lineno"> 5215</span>&#160;   }</div><div class="line"><a name="l05216"></a><span class="lineno"> 5216</span>&#160;</div><div class="line"><a name="l05217"></a><span class="lineno"> 5217</span>&#160;   <span class="keywordflow">if</span> (stream_num &gt;= 0) {</div><div class="line"><a name="l05218"></a><span class="lineno"> 5218</span>&#160;      <span class="comment">/* If we were told to write to an explicit stream then allow this frame through, no matter</span></div><div class="line"><a name="l05219"></a><span class="lineno"> 5219</span>&#160;<span class="comment">       * if the type is expected or not (a framehook could change)</span></div><div class="line"><a name="l05220"></a><span class="lineno"> 5220</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l05221"></a><span class="lineno"> 5221</span>&#160;      <span class="keywordflow">if</span> (stream_num &gt;= <a class="code" href="../../d8/d95/stream_8h.html#a5eb43440630db819220df97b01f48922">ast_stream_topology_get_count</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ae35174b33cb8d9b4c1424448b21e50d2">ast_channel_get_stream_topology</a>(chan))) {</div><div class="line"><a name="l05222"></a><span class="lineno"> 5222</span>&#160;         <span class="keywordflow">goto</span> <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>;</div><div class="line"><a name="l05223"></a><span class="lineno"> 5223</span>&#160;      }</div><div class="line"><a name="l05224"></a><span class="lineno"> 5224</span>&#160;      stream = <a class="code" href="../../d8/d95/stream_8h.html#aa4a9c0de95417c5db8eda8544cd1631d">ast_stream_topology_get_stream</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ae35174b33cb8d9b4c1424448b21e50d2">ast_channel_get_stream_topology</a>(chan), stream_num);</div><div class="line"><a name="l05225"></a><span class="lineno"> 5225</span>&#160;      default_stream = <a class="code" href="../../d5/d7b/channel_8h.html#acf35101c44db296b56c86c9ed4e8e54b">ast_channel_get_default_stream</a>(chan, <a class="code" href="../../d8/d95/stream_8h.html#a86319542b92fb0dc6b2ed337d83cf8ce">ast_stream_get_type</a>(stream));</div><div class="line"><a name="l05226"></a><span class="lineno"> 5226</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a> || fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30">AST_FRAME_VIDEO</a> || fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ad99b86353343f422bda01163898b2eea">AST_FRAME_MODEM</a>) {</div><div class="line"><a name="l05227"></a><span class="lineno"> 5227</span>&#160;      <span class="comment">/* If we haven&#39;t been told of a stream then we need to figure out which once we need */</span></div><div class="line"><a name="l05228"></a><span class="lineno"> 5228</span>&#160;      <span class="keyword">enum</span> <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212">ast_media_type</a> <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a> = <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a>;</div><div class="line"><a name="l05229"></a><span class="lineno"> 5229</span>&#160;</div><div class="line"><a name="l05230"></a><span class="lineno"> 5230</span>&#160;      <span class="comment">/* Some frame types have a fixed media type */</span></div><div class="line"><a name="l05231"></a><span class="lineno"> 5231</span>&#160;      <span class="keywordflow">if</span> (fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a> || fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30">AST_FRAME_VIDEO</a>) {</div><div class="line"><a name="l05232"></a><span class="lineno"> 5232</span>&#160;         type = <a class="code" href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a>(fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>);</div><div class="line"><a name="l05233"></a><span class="lineno"> 5233</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ad99b86353343f422bda01163898b2eea">AST_FRAME_MODEM</a>) {</div><div class="line"><a name="l05234"></a><span class="lineno"> 5234</span>&#160;         type = <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212acab76c9fe8b00719aa5276d92922f2ca">AST_MEDIA_TYPE_IMAGE</a>;</div><div class="line"><a name="l05235"></a><span class="lineno"> 5235</span>&#160;      }</div><div class="line"><a name="l05236"></a><span class="lineno"> 5236</span>&#160;</div><div class="line"><a name="l05237"></a><span class="lineno"> 5237</span>&#160;      <span class="comment">/* No stream was specified, so use the default one */</span></div><div class="line"><a name="l05238"></a><span class="lineno"> 5238</span>&#160;      stream = default_stream = <a class="code" href="../../d5/d7b/channel_8h.html#acf35101c44db296b56c86c9ed4e8e54b">ast_channel_get_default_stream</a>(chan, type);</div><div class="line"><a name="l05239"></a><span class="lineno"> 5239</span>&#160;   }</div><div class="line"><a name="l05240"></a><span class="lineno"> 5240</span>&#160;</div><div class="line"><a name="l05241"></a><span class="lineno"> 5241</span>&#160;   <span class="comment">/* Perform the framehook write event here. After the frame enters the framehook list</span></div><div class="line"><a name="l05242"></a><span class="lineno"> 5242</span>&#160;<span class="comment">    * there is no telling what will happen, how awesome is that!!! */</span></div><div class="line"><a name="l05243"></a><span class="lineno"> 5243</span>&#160;   <span class="keywordflow">if</span> ((stream == default_stream) &amp;&amp; !(fr = <a class="code" href="../../db/d3c/framehook_8h.html#abff6e8c56467d7e9465b453b42630f20">ast_framehook_list_write_event</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aff1f86598b895f0346b701570e266ba2">ast_channel_framehooks</a>(chan), fr))) {</div><div class="line"><a name="l05244"></a><span class="lineno"> 5244</span>&#160;      res = 0;</div><div class="line"><a name="l05245"></a><span class="lineno"> 5245</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>;</div><div class="line"><a name="l05246"></a><span class="lineno"> 5246</span>&#160;   }</div><div class="line"><a name="l05247"></a><span class="lineno"> 5247</span>&#160;</div><div class="line"><a name="l05248"></a><span class="lineno"> 5248</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#afb86bdd7fa42b7bf8ac2fbfab01f67ef">ast_channel_generatordata</a>(chan) &amp;&amp; (fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> != <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ac2b2b163b29fde967531b8bf92966c97">AST_FRAME_RTCP</a>) &amp;&amp; (!fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#af51e37c9331049b1e3d250a7c8bc3c26">src</a> || strcasecmp(fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#af51e37c9331049b1e3d250a7c8bc3c26">src</a>, <span class="stringliteral">&quot;ast_prod&quot;</span>))) {</div><div class="line"><a name="l05249"></a><span class="lineno"> 5249</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a9deec175d13a40a6a5fdb527b13c6878">AST_FLAG_WRITE_INT</a>)) {</div><div class="line"><a name="l05250"></a><span class="lineno"> 5250</span>&#160;            <a class="code" href="../../d4/d28/channel_8c.html#a7160355005776732fba88cc020f4a45b">ast_deactivate_generator</a>(chan);</div><div class="line"><a name="l05251"></a><span class="lineno"> 5251</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05252"></a><span class="lineno"> 5252</span>&#160;         <span class="keywordflow">if</span> (fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a>) {</div><div class="line"><a name="l05253"></a><span class="lineno"> 5253</span>&#160;            <span class="comment">/* There is a generator running while we&#39;re in the middle of a digit.</span></div><div class="line"><a name="l05254"></a><span class="lineno"> 5254</span>&#160;<span class="comment">             * It&#39;s probably inband DTMF, so go ahead and pass it so it can</span></div><div class="line"><a name="l05255"></a><span class="lineno"> 5255</span>&#160;<span class="comment">             * stop the generator */</span></div><div class="line"><a name="l05256"></a><span class="lineno"> 5256</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l05257"></a><span class="lineno"> 5257</span>&#160;            res = <a class="code" href="../../d4/d28/channel_8c.html#ab45db8cf33a706a5831d553d5199c143">ast_senddigit_end</a>(chan, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a>);</div><div class="line"><a name="l05258"></a><span class="lineno"> 5258</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l05259"></a><span class="lineno"> 5259</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a></div><div class="line"><a name="l05260"></a><span class="lineno"> 5260</span>&#160;            &amp;&amp; fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e">AST_CONTROL_UNHOLD</a>) {</div><div class="line"><a name="l05261"></a><span class="lineno"> 5261</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l05262"></a><span class="lineno"> 5262</span>&#160;<span class="comment">             * This is a side case where Echo is basically being called</span></div><div class="line"><a name="l05263"></a><span class="lineno"> 5263</span>&#160;<span class="comment">             * and the person put themselves on hold and took themselves</span></div><div class="line"><a name="l05264"></a><span class="lineno"> 5264</span>&#160;<span class="comment">             * off hold.</span></div><div class="line"><a name="l05265"></a><span class="lineno"> 5265</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l05266"></a><span class="lineno"> 5266</span>&#160;            <a class="code" href="../../d4/d28/channel_8c.html#ac238a36ed985c6476418329fcdbb7475">indicate_data_internal</a>(chan, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>,</div><div class="line"><a name="l05267"></a><span class="lineno"> 5267</span>&#160;               fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>);</div><div class="line"><a name="l05268"></a><span class="lineno"> 5268</span>&#160;         }</div><div class="line"><a name="l05269"></a><span class="lineno"> 5269</span>&#160;         res = 0; <span class="comment">/* XXX explain, why 0 ? */</span></div><div class="line"><a name="l05270"></a><span class="lineno"> 5270</span>&#160;         <span class="keywordflow">goto</span> <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>;</div><div class="line"><a name="l05271"></a><span class="lineno"> 5271</span>&#160;      }</div><div class="line"><a name="l05272"></a><span class="lineno"> 5272</span>&#160;   }</div><div class="line"><a name="l05273"></a><span class="lineno"> 5273</span>&#160;   <span class="comment">/* High bit prints debugging */</span></div><div class="line"><a name="l05274"></a><span class="lineno"> 5274</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a9bcf283b2c7f3a62e77ed10e02efc23a">ast_channel_fout</a>(chan) &amp; <a class="code" href="../../d5/d7b/channel_8h.html#a2011c630205057fb4b67eb06145e4a7f">DEBUGCHAN_FLAG</a>)</div><div class="line"><a name="l05275"></a><span class="lineno"> 5275</span>&#160;      <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a35641692b96e9e81da06d8d36e677cb8">ast_frame_dump</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), fr, <span class="stringliteral">&quot;&gt;&gt;&quot;</span>);</div><div class="line"><a name="l05276"></a><span class="lineno"> 5276</span>&#160;   <span class="keywordflow">switch</span> (fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a>) {</div><div class="line"><a name="l05277"></a><span class="lineno"> 5277</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>:</div><div class="line"><a name="l05278"></a><span class="lineno"> 5278</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#ac238a36ed985c6476418329fcdbb7475">indicate_data_internal</a>(chan, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>);</div><div class="line"><a name="l05279"></a><span class="lineno"> 5279</span>&#160;      res = 0;</div><div class="line"><a name="l05280"></a><span class="lineno"> 5280</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05281"></a><span class="lineno"> 5281</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be">AST_FRAME_DTMF_BEGIN</a>:</div><div class="line"><a name="l05282"></a><span class="lineno"> 5282</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan)) {</div><div class="line"><a name="l05283"></a><span class="lineno"> 5283</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *old_frame = fr;</div><div class="line"><a name="l05284"></a><span class="lineno"> 5284</span>&#160;         fr = <a class="code" href="../../d0/d79/audiohook_8h.html#a6351c89eb98b1832e85fa9c0fca7383f">ast_audiohook_write_list</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan), <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a8254a5b3fc181d3fe3f2af892010b586">AST_AUDIOHOOK_DIRECTION_WRITE</a>, fr);</div><div class="line"><a name="l05285"></a><span class="lineno"> 5285</span>&#160;         <span class="keywordflow">if</span> (old_frame != fr)</div><div class="line"><a name="l05286"></a><span class="lineno"> 5286</span>&#160;            f = fr;</div><div class="line"><a name="l05287"></a><span class="lineno"> 5287</span>&#160;      }</div><div class="line"><a name="l05288"></a><span class="lineno"> 5288</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a1f333b8dc2771604a8cdb3f42c6b3643">send_dtmf_begin_event</a>(chan, <a class="code" href="../../d4/d28/channel_8c.html#a4553faa9cf1e184164ebb526693585f0a2b89309e770c7ce1d88fec73d1fef526">DTMF_SENT</a>, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>);</div><div class="line"><a name="l05289"></a><span class="lineno"> 5289</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l05290"></a><span class="lineno"> 5290</span>&#160;      res = <a class="code" href="../../d4/d28/channel_8c.html#a38f90349e730b6556cfe8b99b134d574">ast_senddigit_begin</a>(chan, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>);</div><div class="line"><a name="l05291"></a><span class="lineno"> 5291</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l05292"></a><span class="lineno"> 5292</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05293"></a><span class="lineno"> 5293</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a>:</div><div class="line"><a name="l05294"></a><span class="lineno"> 5294</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan)) {</div><div class="line"><a name="l05295"></a><span class="lineno"> 5295</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *new_frame = fr;</div><div class="line"><a name="l05296"></a><span class="lineno"> 5296</span>&#160;</div><div class="line"><a name="l05297"></a><span class="lineno"> 5297</span>&#160;         new_frame = <a class="code" href="../../d0/d79/audiohook_8h.html#a6351c89eb98b1832e85fa9c0fca7383f">ast_audiohook_write_list</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan), <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a8254a5b3fc181d3fe3f2af892010b586">AST_AUDIOHOOK_DIRECTION_WRITE</a>, fr);</div><div class="line"><a name="l05298"></a><span class="lineno"> 5298</span>&#160;         <span class="keywordflow">if</span> (new_frame != fr) {</div><div class="line"><a name="l05299"></a><span class="lineno"> 5299</span>&#160;            <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(new_frame);</div><div class="line"><a name="l05300"></a><span class="lineno"> 5300</span>&#160;         }</div><div class="line"><a name="l05301"></a><span class="lineno"> 5301</span>&#160;      }</div><div class="line"><a name="l05302"></a><span class="lineno"> 5302</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#aab3dd86fc48e9fb02b9a00732a5ce88d">send_dtmf_end_event</a>(chan, <a class="code" href="../../d4/d28/channel_8c.html#a4553faa9cf1e184164ebb526693585f0a2b89309e770c7ce1d88fec73d1fef526">DTMF_SENT</a>, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a>);</div><div class="line"><a name="l05303"></a><span class="lineno"> 5303</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l05304"></a><span class="lineno"> 5304</span>&#160;      res = <a class="code" href="../../d4/d28/channel_8c.html#ab45db8cf33a706a5831d553d5199c143">ast_senddigit_end</a>(chan, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a>);</div><div class="line"><a name="l05305"></a><span class="lineno"> 5305</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l05306"></a><span class="lineno"> 5306</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05307"></a><span class="lineno"> 5307</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078">AST_FRAME_TEXT</a>:</div><div class="line"><a name="l05308"></a><span class="lineno"> 5308</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a3a5d847510a477edda3d0bc1459709f4">CHECK_BLOCKING</a>(chan);</div><div class="line"><a name="l05309"></a><span class="lineno"> 5309</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, <a class="code" href="../../db/d1c/format__cache_8h.html#adbb2a7346ad99c0a41cd6c43548835ba">ast_format_t140</a>) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a>) {</div><div class="line"><a name="l05310"></a><span class="lineno"> 5310</span>&#160;         res = (<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#a5ffa977dd3498d03795b1f9da7288311">write_text</a> == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) ? 0 :</div><div class="line"><a name="l05311"></a><span class="lineno"> 5311</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#a5ffa977dd3498d03795b1f9da7288311">write_text</a>(chan, fr);</div><div class="line"><a name="l05312"></a><span class="lineno"> 5312</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05313"></a><span class="lineno"> 5313</span>&#160;         res = (<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#ac91397d55cb2705d87acf0518d7f10f4">send_text</a> == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) ? 0 :</div><div class="line"><a name="l05314"></a><span class="lineno"> 5314</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#ac91397d55cb2705d87acf0518d7f10f4">send_text</a>(chan, (<span class="keywordtype">char</span> *) fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>);</div><div class="line"><a name="l05315"></a><span class="lineno"> 5315</span>&#160;      }</div><div class="line"><a name="l05316"></a><span class="lineno"> 5316</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ab5b2bec9425dd0cfc789d96ef229cb3a">AST_FLAG_BLOCKING</a>);</div><div class="line"><a name="l05317"></a><span class="lineno"> 5317</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05318"></a><span class="lineno"> 5318</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a3d91bab33583f560197e21532a02a895">AST_FRAME_HTML</a>:</div><div class="line"><a name="l05319"></a><span class="lineno"> 5319</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a3a5d847510a477edda3d0bc1459709f4">CHECK_BLOCKING</a>(chan);</div><div class="line"><a name="l05320"></a><span class="lineno"> 5320</span>&#160;      res = (<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#a82adcb6335ced70bf32beb1290079878">send_html</a> == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) ? 0 :</div><div class="line"><a name="l05321"></a><span class="lineno"> 5321</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#a82adcb6335ced70bf32beb1290079878">send_html</a>(chan, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>, (<span class="keywordtype">char</span> *) fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>);</div><div class="line"><a name="l05322"></a><span class="lineno"> 5322</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ab5b2bec9425dd0cfc789d96ef229cb3a">AST_FLAG_BLOCKING</a>);</div><div class="line"><a name="l05323"></a><span class="lineno"> 5323</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05324"></a><span class="lineno"> 5324</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30">AST_FRAME_VIDEO</a>:</div><div class="line"><a name="l05325"></a><span class="lineno"> 5325</span>&#160;      <span class="comment">/* XXX Handle translation of video codecs one day XXX */</span></div><div class="line"><a name="l05326"></a><span class="lineno"> 5326</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a3a5d847510a477edda3d0bc1459709f4">CHECK_BLOCKING</a>(chan);</div><div class="line"><a name="l05327"></a><span class="lineno"> 5327</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../db/d9b/format__ogg__vorbis_8c.html#aa07752a32d3d4fa9eac743a1d7daf16f">write_stream</a>) {</div><div class="line"><a name="l05328"></a><span class="lineno"> 5328</span>&#160;         <span class="keywordflow">if</span> (stream) {</div><div class="line"><a name="l05329"></a><span class="lineno"> 5329</span>&#160;            res = <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#afa7782a9f08ff818e7ba3d3fe730f028">write_stream</a>(chan, <a class="code" href="../../d8/d95/stream_8h.html#a35dd19cc6a6f0310d45e181398095463">ast_stream_get_position</a>(stream), fr);</div><div class="line"><a name="l05330"></a><span class="lineno"> 5330</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05331"></a><span class="lineno"> 5331</span>&#160;            res = 0;</div><div class="line"><a name="l05332"></a><span class="lineno"> 5332</span>&#160;         }</div><div class="line"><a name="l05333"></a><span class="lineno"> 5333</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((stream == default_stream) &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;write_video) {</div><div class="line"><a name="l05334"></a><span class="lineno"> 5334</span>&#160;         res = <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#a1d28421a1284e27e17a1177523c88472">write_video</a>(chan, fr);</div><div class="line"><a name="l05335"></a><span class="lineno"> 5335</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05336"></a><span class="lineno"> 5336</span>&#160;         res = 0;</div><div class="line"><a name="l05337"></a><span class="lineno"> 5337</span>&#160;      }</div><div class="line"><a name="l05338"></a><span class="lineno"> 5338</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ab5b2bec9425dd0cfc789d96ef229cb3a">AST_FLAG_BLOCKING</a>);</div><div class="line"><a name="l05339"></a><span class="lineno"> 5339</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05340"></a><span class="lineno"> 5340</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ad99b86353343f422bda01163898b2eea">AST_FRAME_MODEM</a>:</div><div class="line"><a name="l05341"></a><span class="lineno"> 5341</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a3a5d847510a477edda3d0bc1459709f4">CHECK_BLOCKING</a>(chan);</div><div class="line"><a name="l05342"></a><span class="lineno"> 5342</span>&#160;      res = <a class="code" href="../../d4/d28/channel_8c.html#acb7ada7c7705b3a88262b38d825b476b">tech_write</a>(chan, stream, default_stream, fr);</div><div class="line"><a name="l05343"></a><span class="lineno"> 5343</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ab5b2bec9425dd0cfc789d96ef229cb3a">AST_FLAG_BLOCKING</a>);</div><div class="line"><a name="l05344"></a><span class="lineno"> 5344</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05345"></a><span class="lineno"> 5345</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>:</div><div class="line"><a name="l05346"></a><span class="lineno"> 5346</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5b/options_8h.html#aec9ad52a51bdb17fb149b63bfb9244bf">ast_opt_generic_plc</a> &amp;&amp; <a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a>) {</div><div class="line"><a name="l05347"></a><span class="lineno"> 5347</span>&#160;         <a class="code" href="../../d4/d28/channel_8c.html#ad5963dfda0d2c9bcff0b32ed8fc1bd0a">apply_plc</a>(chan, fr);</div><div class="line"><a name="l05348"></a><span class="lineno"> 5348</span>&#160;      }</div><div class="line"><a name="l05349"></a><span class="lineno"> 5349</span>&#160;</div><div class="line"><a name="l05350"></a><span class="lineno"> 5350</span>&#160;      f = fr;</div><div class="line"><a name="l05351"></a><span class="lineno"> 5351</span>&#160;</div><div class="line"><a name="l05352"></a><span class="lineno"> 5352</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l05353"></a><span class="lineno"> 5353</span>&#160;<span class="comment">       * Send frame to audiohooks if present, if frametype is linear (else, later as per</span></div><div class="line"><a name="l05354"></a><span class="lineno"> 5354</span>&#160;<span class="comment">       * previous behavior)</span></div><div class="line"><a name="l05355"></a><span class="lineno"> 5355</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l05356"></a><span class="lineno"> 5356</span>&#160;      <span class="keywordflow">if</span> ((stream == default_stream) &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan)) {</div><div class="line"><a name="l05357"></a><span class="lineno"> 5357</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../db/d1c/format__cache_8h.html#a309515067d94f11b99659093c5beefee">ast_format_cache_is_slinear</a>(fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>)) {</div><div class="line"><a name="l05358"></a><span class="lineno"> 5358</span>&#160;            hooked = 1;</div><div class="line"><a name="l05359"></a><span class="lineno"> 5359</span>&#160;            f = <a class="code" href="../../d0/d79/audiohook_8h.html#a6351c89eb98b1832e85fa9c0fca7383f">ast_audiohook_write_list</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan), <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a8254a5b3fc181d3fe3f2af892010b586">AST_AUDIOHOOK_DIRECTION_WRITE</a>, fr);</div><div class="line"><a name="l05360"></a><span class="lineno"> 5360</span>&#160;         }</div><div class="line"><a name="l05361"></a><span class="lineno"> 5361</span>&#160;      }</div><div class="line"><a name="l05362"></a><span class="lineno"> 5362</span>&#160;</div><div class="line"><a name="l05363"></a><span class="lineno"> 5363</span>&#160;      <span class="comment">/* If the frame is in the raw write format, then it&#39;s easy... just use the frame - otherwise we will have to translate */</span></div><div class="line"><a name="l05364"></a><span class="lineno"> 5364</span>&#160;      <span class="keywordflow">if</span> ((stream == default_stream) &amp;&amp; <a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, <a class="code" href="../../d5/d7b/channel_8h.html#ad27c52cda6e6435a121900661ad5bdce">ast_channel_rawwriteformat</a>(chan)) != <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a>) {</div><div class="line"><a name="l05365"></a><span class="lineno"> 5365</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a>(chan), fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>) != <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a>) {</div><div class="line"><a name="l05366"></a><span class="lineno"> 5366</span>&#160;            <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *codec_buf = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a>);</div><div class="line"><a name="l05367"></a><span class="lineno"> 5367</span>&#160;</div><div class="line"><a name="l05368"></a><span class="lineno"> 5368</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l05369"></a><span class="lineno"> 5369</span>&#160;<span class="comment">             * We are not setup to write this frame.  Things may have changed</span></div><div class="line"><a name="l05370"></a><span class="lineno"> 5370</span>&#160;<span class="comment">             * on the peer side of the world and we try to adjust the format to</span></div><div class="line"><a name="l05371"></a><span class="lineno"> 5371</span>&#160;<span class="comment">             * make it compatible again.  However, bad things can happen if we</span></div><div class="line"><a name="l05372"></a><span class="lineno"> 5372</span>&#160;<span class="comment">             * cannot setup a new translation path.  Problems range from no</span></div><div class="line"><a name="l05373"></a><span class="lineno"> 5373</span>&#160;<span class="comment">             * audio, one-way audio, to garbled audio.  The best we can do is</span></div><div class="line"><a name="l05374"></a><span class="lineno"> 5374</span>&#160;<span class="comment">             * request the call to hangup since we could not make it compatible.</span></div><div class="line"><a name="l05375"></a><span class="lineno"> 5375</span>&#160;<span class="comment">             *</span></div><div class="line"><a name="l05376"></a><span class="lineno"> 5376</span>&#160;<span class="comment">             * Being continuously spammed by this message likely indicates a</span></div><div class="line"><a name="l05377"></a><span class="lineno"> 5377</span>&#160;<span class="comment">             * problem with the peer because it cannot make up its mind about</span></div><div class="line"><a name="l05378"></a><span class="lineno"> 5378</span>&#160;<span class="comment">             * which format to use.</span></div><div class="line"><a name="l05379"></a><span class="lineno"> 5379</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l05380"></a><span class="lineno"> 5380</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Channel %s changing write format from %s to %s, native formats %s\n&quot;</span>,</div><div class="line"><a name="l05381"></a><span class="lineno"> 5381</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan),</div><div class="line"><a name="l05382"></a><span class="lineno"> 5382</span>&#160;               <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a>(chan)),</div><div class="line"><a name="l05383"></a><span class="lineno"> 5383</span>&#160;               <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>),</div><div class="line"><a name="l05384"></a><span class="lineno"> 5384</span>&#160;               <a class="code" href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a>(chan), &amp;codec_buf));</div><div class="line"><a name="l05385"></a><span class="lineno"> 5385</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d4/d28/channel_8c.html#abbdfb98077180544657b2d16c5d25f74">ast_set_write_format</a>(chan, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>)) {</div><div class="line"><a name="l05386"></a><span class="lineno"> 5386</span>&#160;               <span class="comment">/* Could not handle the new write format.  Induce a hangup. */</span></div><div class="line"><a name="l05387"></a><span class="lineno"> 5387</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l05388"></a><span class="lineno"> 5388</span>&#160;            }</div><div class="line"><a name="l05389"></a><span class="lineno"> 5389</span>&#160;         }</div><div class="line"><a name="l05390"></a><span class="lineno"> 5390</span>&#160;</div><div class="line"><a name="l05391"></a><span class="lineno"> 5391</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#ab5c41a2130385cadf78c64cacea7e3f9">ast_channel_writetrans</a>(chan)) {</div><div class="line"><a name="l05392"></a><span class="lineno"> 5392</span>&#160;            <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *trans_frame = <a class="code" href="../../db/d39/translate_8h.html#ab09d3ccb95d1f828d2871530226f9456">ast_translate</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ab5c41a2130385cadf78c64cacea7e3f9">ast_channel_writetrans</a>(chan), f, 0);</div><div class="line"><a name="l05393"></a><span class="lineno"> 5393</span>&#160;            <span class="keywordflow">if</span> (trans_frame != f &amp;&amp; f != fr) {</div><div class="line"><a name="l05394"></a><span class="lineno"> 5394</span>&#160;               <span class="comment">/*</span></div><div class="line"><a name="l05395"></a><span class="lineno"> 5395</span>&#160;<span class="comment">                * If translate gives us a new frame and so did the audio</span></div><div class="line"><a name="l05396"></a><span class="lineno"> 5396</span>&#160;<span class="comment">                * hook then we need to free the one from the audio hook.</span></div><div class="line"><a name="l05397"></a><span class="lineno"> 5397</span>&#160;<span class="comment">                */</span></div><div class="line"><a name="l05398"></a><span class="lineno"> 5398</span>&#160;               <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l05399"></a><span class="lineno"> 5399</span>&#160;            }</div><div class="line"><a name="l05400"></a><span class="lineno"> 5400</span>&#160;            f = trans_frame;</div><div class="line"><a name="l05401"></a><span class="lineno"> 5401</span>&#160;         }</div><div class="line"><a name="l05402"></a><span class="lineno"> 5402</span>&#160;      }</div><div class="line"><a name="l05403"></a><span class="lineno"> 5403</span>&#160;</div><div class="line"><a name="l05404"></a><span class="lineno"> 5404</span>&#160;      <span class="keywordflow">if</span> (!f) {</div><div class="line"><a name="l05405"></a><span class="lineno"> 5405</span>&#160;         res = 0;</div><div class="line"><a name="l05406"></a><span class="lineno"> 5406</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l05407"></a><span class="lineno"> 5407</span>&#160;      }</div><div class="line"><a name="l05408"></a><span class="lineno"> 5408</span>&#160;</div><div class="line"><a name="l05409"></a><span class="lineno"> 5409</span>&#160;      <span class="keywordflow">if</span> ((stream == default_stream) &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan) &amp;&amp; !hooked) {</div><div class="line"><a name="l05410"></a><span class="lineno"> 5410</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *prev = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *new_frame, *cur, *dup;</div><div class="line"><a name="l05411"></a><span class="lineno"> 5411</span>&#160;         <span class="keywordtype">int</span> freeoldlist = 0;</div><div class="line"><a name="l05412"></a><span class="lineno"> 5412</span>&#160;</div><div class="line"><a name="l05413"></a><span class="lineno"> 5413</span>&#160;         <span class="keywordflow">if</span> (f != fr) {</div><div class="line"><a name="l05414"></a><span class="lineno"> 5414</span>&#160;            freeoldlist = 1;</div><div class="line"><a name="l05415"></a><span class="lineno"> 5415</span>&#160;         }</div><div class="line"><a name="l05416"></a><span class="lineno"> 5416</span>&#160;</div><div class="line"><a name="l05417"></a><span class="lineno"> 5417</span>&#160;         <span class="comment">/* Since ast_audiohook_write may return a new frame, and the cur frame is</span></div><div class="line"><a name="l05418"></a><span class="lineno"> 5418</span>&#160;<span class="comment">          * an item in a list of frames, create a new list adding each cur frame back to it</span></div><div class="line"><a name="l05419"></a><span class="lineno"> 5419</span>&#160;<span class="comment">          * regardless if the cur frame changes or not. */</span></div><div class="line"><a name="l05420"></a><span class="lineno"> 5420</span>&#160;         <span class="keywordflow">for</span> (cur = f; cur; cur = <a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(cur, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>)) {</div><div class="line"><a name="l05421"></a><span class="lineno"> 5421</span>&#160;            new_frame = <a class="code" href="../../d0/d79/audiohook_8h.html#a6351c89eb98b1832e85fa9c0fca7383f">ast_audiohook_write_list</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan), <a class="code" href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a8254a5b3fc181d3fe3f2af892010b586">AST_AUDIOHOOK_DIRECTION_WRITE</a>, cur);</div><div class="line"><a name="l05422"></a><span class="lineno"> 5422</span>&#160;</div><div class="line"><a name="l05423"></a><span class="lineno"> 5423</span>&#160;            <span class="comment">/* if this frame is different than cur, preserve the end of the list,</span></div><div class="line"><a name="l05424"></a><span class="lineno"> 5424</span>&#160;<span class="comment">             * free the old frames, and set cur to be the new frame */</span></div><div class="line"><a name="l05425"></a><span class="lineno"> 5425</span>&#160;            <span class="keywordflow">if</span> (new_frame != cur) {</div><div class="line"><a name="l05426"></a><span class="lineno"> 5426</span>&#160;</div><div class="line"><a name="l05427"></a><span class="lineno"> 5427</span>&#160;               <span class="comment">/* doing an ast_frisolate here seems silly, but we are not guaranteed the new_frame</span></div><div class="line"><a name="l05428"></a><span class="lineno"> 5428</span>&#160;<span class="comment">                * isn&#39;t part of local storage, meaning if ast_audiohook_write is called multiple</span></div><div class="line"><a name="l05429"></a><span class="lineno"> 5429</span>&#160;<span class="comment">                * times it may override the previous frame we got from it unless we dup it */</span></div><div class="line"><a name="l05430"></a><span class="lineno"> 5430</span>&#160;               <span class="keywordflow">if</span> ((dup = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a314496ce1d74ed7fdb9c5319c5e2e953">ast_frisolate</a>(new_frame))) {</div><div class="line"><a name="l05431"></a><span class="lineno"> 5431</span>&#160;                  <a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(dup, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>) = <a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(cur, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l05432"></a><span class="lineno"> 5432</span>&#160;                  <span class="keywordflow">if</span> (freeoldlist) {</div><div class="line"><a name="l05433"></a><span class="lineno"> 5433</span>&#160;                     <a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(cur, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>) = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05434"></a><span class="lineno"> 5434</span>&#160;                     <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(cur);</div><div class="line"><a name="l05435"></a><span class="lineno"> 5435</span>&#160;                  }</div><div class="line"><a name="l05436"></a><span class="lineno"> 5436</span>&#160;                  <span class="keywordflow">if</span> (new_frame != dup) {</div><div class="line"><a name="l05437"></a><span class="lineno"> 5437</span>&#160;                     <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(new_frame);</div><div class="line"><a name="l05438"></a><span class="lineno"> 5438</span>&#160;                  }</div><div class="line"><a name="l05439"></a><span class="lineno"> 5439</span>&#160;                  cur = dup;</div><div class="line"><a name="l05440"></a><span class="lineno"> 5440</span>&#160;               }</div><div class="line"><a name="l05441"></a><span class="lineno"> 5441</span>&#160;            }</div><div class="line"><a name="l05442"></a><span class="lineno"> 5442</span>&#160;</div><div class="line"><a name="l05443"></a><span class="lineno"> 5443</span>&#160;            <span class="comment">/* now, regardless if cur is new or not, add it to the new list,</span></div><div class="line"><a name="l05444"></a><span class="lineno"> 5444</span>&#160;<span class="comment">             * if the new list has not started, cur will become the first item. */</span></div><div class="line"><a name="l05445"></a><span class="lineno"> 5445</span>&#160;            <span class="keywordflow">if</span> (prev) {</div><div class="line"><a name="l05446"></a><span class="lineno"> 5446</span>&#160;               <a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(prev, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>) = cur;</div><div class="line"><a name="l05447"></a><span class="lineno"> 5447</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05448"></a><span class="lineno"> 5448</span>&#160;               f = cur; <span class="comment">/* set f to be the beginning of our new list */</span></div><div class="line"><a name="l05449"></a><span class="lineno"> 5449</span>&#160;            }</div><div class="line"><a name="l05450"></a><span class="lineno"> 5450</span>&#160;            prev = cur;</div><div class="line"><a name="l05451"></a><span class="lineno"> 5451</span>&#160;         }</div><div class="line"><a name="l05452"></a><span class="lineno"> 5452</span>&#160;      }</div><div class="line"><a name="l05453"></a><span class="lineno"> 5453</span>&#160;</div><div class="line"><a name="l05454"></a><span class="lineno"> 5454</span>&#160;      <span class="comment">/* If Monitor is running on this channel, then we have to write frames out there too */</span></div><div class="line"><a name="l05455"></a><span class="lineno"> 5455</span>&#160;      <span class="comment">/* the translator on chan-&gt;writetrans may have returned multiple frames</span></div><div class="line"><a name="l05456"></a><span class="lineno"> 5456</span>&#160;<span class="comment">         from the single frame we passed in; if so, feed each one of them to the</span></div><div class="line"><a name="l05457"></a><span class="lineno"> 5457</span>&#160;<span class="comment">         monitor */</span></div><div class="line"><a name="l05458"></a><span class="lineno"> 5458</span>&#160;      <span class="keywordflow">if</span> ((stream == default_stream) &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan) &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../db/d9b/format__ogg__vorbis_8c.html#aa07752a32d3d4fa9eac743a1d7daf16f">write_stream</a>) {</div><div class="line"><a name="l05459"></a><span class="lineno"> 5459</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *cur;</div><div class="line"><a name="l05460"></a><span class="lineno"> 5460</span>&#160;</div><div class="line"><a name="l05461"></a><span class="lineno"> 5461</span>&#160;         <span class="keywordflow">for</span> (cur = f; cur; cur = <a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(cur, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>)) {</div><div class="line"><a name="l05462"></a><span class="lineno"> 5462</span>&#160;         <span class="comment">/* XXX must explain this code */</span></div><div class="line"><a name="l05463"></a><span class="lineno"> 5463</span>&#160;<span class="preprocessor">#ifndef MONITOR_CONSTANT_DELAY</span></div><div class="line"><a name="l05464"></a><span class="lineno"> 5464</span>&#160;            <span class="keywordtype">int</span> jump = <a class="code" href="../../d5/d7b/channel_8h.html#a711f973f0ab1756bb2d1af2bd06f67a7">ast_channel_insmpl</a>(chan) - <a class="code" href="../../d5/d7b/channel_8h.html#ae37612e98aa9daaa86ab62ab4f91938f">ast_channel_outsmpl</a>(chan) - 4 * cur-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>;</div><div class="line"><a name="l05465"></a><span class="lineno"> 5465</span>&#160;            <span class="keywordflow">if</span> (jump &gt;= 0) {</div><div class="line"><a name="l05466"></a><span class="lineno"> 5466</span>&#160;               jump = <a class="code" href="../../d4/d28/channel_8c.html#a2679f53f358ce4d56596c511afab764b">calc_monitor_jump</a>((<a class="code" href="../../d5/d7b/channel_8h.html#a711f973f0ab1756bb2d1af2bd06f67a7">ast_channel_insmpl</a>(chan) - <a class="code" href="../../d5/d7b/channel_8h.html#ae37612e98aa9daaa86ab62ab4f91938f">ast_channel_outsmpl</a>(chan)),</div><div class="line"><a name="l05467"></a><span class="lineno"> 5467</span>&#160;                                        <a class="code" href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>),</div><div class="line"><a name="l05468"></a><span class="lineno"> 5468</span>&#160;                                        <a class="code" href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a>(<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../db/d9b/format__ogg__vorbis_8c.html#aa07752a32d3d4fa9eac743a1d7daf16f">write_stream</a>-&gt;fmt-&gt;format));</div><div class="line"><a name="l05469"></a><span class="lineno"> 5469</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../d2/d4d/file_8h.html#a36f6bba05952162d5d1ee7fb9819bd07">ast_seekstream</a>(<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../db/d9b/format__ogg__vorbis_8c.html#aa07752a32d3d4fa9eac743a1d7daf16f">write_stream</a>, jump, <a class="code" href="../../d2/d4d/file_8h.html#abd4aebd901cf2e2251920acfbe22fa22">SEEK_FORCECUR</a>) == -1) {</div><div class="line"><a name="l05470"></a><span class="lineno"> 5470</span>&#160;                  <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to perform seek in monitoring write stream, synchronization between the files may be broken\n&quot;</span>);</div><div class="line"><a name="l05471"></a><span class="lineno"> 5471</span>&#160;               }</div><div class="line"><a name="l05472"></a><span class="lineno"> 5472</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a9d32bd3ed0bec428aeae54ad80dfd45e">ast_channel_outsmpl_set</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#ae37612e98aa9daaa86ab62ab4f91938f">ast_channel_outsmpl</a>(chan) + (<a class="code" href="../../d5/d7b/channel_8h.html#a711f973f0ab1756bb2d1af2bd06f67a7">ast_channel_insmpl</a>(chan) - <a class="code" href="../../d5/d7b/channel_8h.html#ae37612e98aa9daaa86ab62ab4f91938f">ast_channel_outsmpl</a>(chan)) + cur-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>);</div><div class="line"><a name="l05473"></a><span class="lineno"> 5473</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05474"></a><span class="lineno"> 5474</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a9d32bd3ed0bec428aeae54ad80dfd45e">ast_channel_outsmpl_set</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#ae37612e98aa9daaa86ab62ab4f91938f">ast_channel_outsmpl</a>(chan) + cur-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>);</div><div class="line"><a name="l05475"></a><span class="lineno"> 5475</span>&#160;            }</div><div class="line"><a name="l05476"></a><span class="lineno"> 5476</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l05477"></a><span class="lineno"> 5477</span>&#160;            <span class="keywordtype">int</span> jump = <a class="code" href="../../d4/d28/channel_8c.html#a2679f53f358ce4d56596c511afab764b">calc_monitor_jump</a>((<a class="code" href="../../d5/d7b/channel_8h.html#a711f973f0ab1756bb2d1af2bd06f67a7">ast_channel_insmpl</a>(chan) - <a class="code" href="../../d5/d7b/channel_8h.html#ae37612e98aa9daaa86ab62ab4f91938f">ast_channel_outsmpl</a>(chan)),</div><div class="line"><a name="l05478"></a><span class="lineno"> 5478</span>&#160;                                         <a class="code" href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>),</div><div class="line"><a name="l05479"></a><span class="lineno"> 5479</span>&#160;                                         <a class="code" href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a>(<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../db/d9b/format__ogg__vorbis_8c.html#aa07752a32d3d4fa9eac743a1d7daf16f">write_stream</a>-&gt;fmt-&gt;format));</div><div class="line"><a name="l05480"></a><span class="lineno"> 5480</span>&#160;            <span class="keywordflow">if</span> (jump - MONITOR_DELAY &gt;= 0) {</div><div class="line"><a name="l05481"></a><span class="lineno"> 5481</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../d2/d4d/file_8h.html#a36f6bba05952162d5d1ee7fb9819bd07">ast_seekstream</a>(<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../db/d9b/format__ogg__vorbis_8c.html#aa07752a32d3d4fa9eac743a1d7daf16f">write_stream</a>, jump - cur-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>, <a class="code" href="../../d2/d4d/file_8h.html#abd4aebd901cf2e2251920acfbe22fa22">SEEK_FORCECUR</a>) == -1) {</div><div class="line"><a name="l05482"></a><span class="lineno"> 5482</span>&#160;                  <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to perform seek in monitoring write stream, synchronization between the files may be broken\n&quot;</span>);</div><div class="line"><a name="l05483"></a><span class="lineno"> 5483</span>&#160;               }</div><div class="line"><a name="l05484"></a><span class="lineno"> 5484</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a9d32bd3ed0bec428aeae54ad80dfd45e">ast_channel_outsmpl_set</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#ae37612e98aa9daaa86ab62ab4f91938f">ast_channel_outsmpl</a>(chan) + <a class="code" href="../../d5/d7b/channel_8h.html#a711f973f0ab1756bb2d1af2bd06f67a7">ast_channel_insmpl</a>(chan) - <a class="code" href="../../d5/d7b/channel_8h.html#ae37612e98aa9daaa86ab62ab4f91938f">ast_channel_outsmpl</a>(chan));</div><div class="line"><a name="l05485"></a><span class="lineno"> 5485</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05486"></a><span class="lineno"> 5486</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a9d32bd3ed0bec428aeae54ad80dfd45e">ast_channel_outsmpl_set</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#ae37612e98aa9daaa86ab62ab4f91938f">ast_channel_outsmpl</a>(chan) + cur-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>);</div><div class="line"><a name="l05487"></a><span class="lineno"> 5487</span>&#160;            }</div><div class="line"><a name="l05488"></a><span class="lineno"> 5488</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l05489"></a><span class="lineno"> 5489</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../d4/d88/structstate.html">state</a> == <a class="code" href="../../d5/d7b/channel_8h.html#a9b57685a45dd0700625ea8ba83a868dface918b901d180f5ea85f8a941fc8cbdb">AST_MONITOR_RUNNING</a>) {</div><div class="line"><a name="l05490"></a><span class="lineno"> 5490</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../d2/d4d/file_8h.html#a3608386b919ef0949d2858cdeb02d12e">ast_writestream</a>(<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../db/d9b/format__ogg__vorbis_8c.html#aa07752a32d3d4fa9eac743a1d7daf16f">write_stream</a>, cur) &lt; 0)</div><div class="line"><a name="l05491"></a><span class="lineno"> 5491</span>&#160;                  <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to write data to channel monitor write stream\n&quot;</span>);</div><div class="line"><a name="l05492"></a><span class="lineno"> 5492</span>&#160;            }</div><div class="line"><a name="l05493"></a><span class="lineno"> 5493</span>&#160;         }</div><div class="line"><a name="l05494"></a><span class="lineno"> 5494</span>&#160;      }</div><div class="line"><a name="l05495"></a><span class="lineno"> 5495</span>&#160;</div><div class="line"><a name="l05496"></a><span class="lineno"> 5496</span>&#160;      <span class="comment">/* the translator on chan-&gt;writetrans may have returned multiple frames</span></div><div class="line"><a name="l05497"></a><span class="lineno"> 5497</span>&#160;<span class="comment">         from the single frame we passed in; if so, feed each one of them to the</span></div><div class="line"><a name="l05498"></a><span class="lineno"> 5498</span>&#160;<span class="comment">         channel, freeing each one after it has been written */</span></div><div class="line"><a name="l05499"></a><span class="lineno"> 5499</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a3a5d847510a477edda3d0bc1459709f4">CHECK_BLOCKING</a>(chan);</div><div class="line"><a name="l05500"></a><span class="lineno"> 5500</span>&#160;      <span class="keywordflow">if</span> ((f != fr) &amp;&amp; <a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(f, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>)) {</div><div class="line"><a name="l05501"></a><span class="lineno"> 5501</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *cur, *<a class="code" href="../../dd/d6f/structchanlist.html#a65027657e37836ff7a5b1013cbbc7895">next</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05502"></a><span class="lineno"> 5502</span>&#160;         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> skip = 0;</div><div class="line"><a name="l05503"></a><span class="lineno"> 5503</span>&#160;</div><div class="line"><a name="l05504"></a><span class="lineno"> 5504</span>&#160;         cur = f;</div><div class="line"><a name="l05505"></a><span class="lineno"> 5505</span>&#160;         <span class="keywordflow">while</span> (cur) {</div><div class="line"><a name="l05506"></a><span class="lineno"> 5506</span>&#160;            next = <a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(cur, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l05507"></a><span class="lineno"> 5507</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(cur, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>) = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05508"></a><span class="lineno"> 5508</span>&#160;            <span class="keywordflow">if</span> (!skip) {</div><div class="line"><a name="l05509"></a><span class="lineno"> 5509</span>&#160;               res = <a class="code" href="../../d4/d28/channel_8c.html#acb7ada7c7705b3a88262b38d825b476b">tech_write</a>(chan, stream, default_stream, cur);</div><div class="line"><a name="l05510"></a><span class="lineno"> 5510</span>&#160;               <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l05511"></a><span class="lineno"> 5511</span>&#160;                  <a class="code" href="../../d5/d7b/channel_8h.html#ab683c21c4a34450c4bfb8b672a7b4045">ast_channel_softhangup_internal_flag_add</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2e185ce313026e13ed90ae3a319c9cb7">AST_SOFTHANGUP_DEV</a>);</div><div class="line"><a name="l05512"></a><span class="lineno"> 5512</span>&#160;                  skip = 1;</div><div class="line"><a name="l05513"></a><span class="lineno"> 5513</span>&#160;               } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (next) {</div><div class="line"><a name="l05514"></a><span class="lineno"> 5514</span>&#160;                  <span class="comment">/* don&#39;t do this for the last frame in the list,</span></div><div class="line"><a name="l05515"></a><span class="lineno"> 5515</span>&#160;<span class="comment">                     as the code outside the loop will do it once</span></div><div class="line"><a name="l05516"></a><span class="lineno"> 5516</span>&#160;<span class="comment">                  */</span></div><div class="line"><a name="l05517"></a><span class="lineno"> 5517</span>&#160;                  <a class="code" href="../../d5/d7b/channel_8h.html#ad6d58614c0340ae49d165977b965c9f3">ast_channel_fout_set</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#ae02cd8717fa5e5be15080386639ebb2c">FRAMECOUNT_INC</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a9bcf283b2c7f3a62e77ed10e02efc23a">ast_channel_fout</a>(chan)));</div><div class="line"><a name="l05518"></a><span class="lineno"> 5518</span>&#160;               }</div><div class="line"><a name="l05519"></a><span class="lineno"> 5519</span>&#160;            }</div><div class="line"><a name="l05520"></a><span class="lineno"> 5520</span>&#160;            <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(cur);</div><div class="line"><a name="l05521"></a><span class="lineno"> 5521</span>&#160;            cur = <a class="code" href="../../dd/d6f/structchanlist.html#a65027657e37836ff7a5b1013cbbc7895">next</a>;</div><div class="line"><a name="l05522"></a><span class="lineno"> 5522</span>&#160;         }</div><div class="line"><a name="l05523"></a><span class="lineno"> 5523</span>&#160;</div><div class="line"><a name="l05524"></a><span class="lineno"> 5524</span>&#160;         <span class="comment">/* reset f so the code below doesn&#39;t attempt to free it */</span></div><div class="line"><a name="l05525"></a><span class="lineno"> 5525</span>&#160;         f = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05526"></a><span class="lineno"> 5526</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05527"></a><span class="lineno"> 5527</span>&#160;         res = <a class="code" href="../../d4/d28/channel_8c.html#acb7ada7c7705b3a88262b38d825b476b">tech_write</a>(chan, stream, default_stream, f);</div><div class="line"><a name="l05528"></a><span class="lineno"> 5528</span>&#160;      }</div><div class="line"><a name="l05529"></a><span class="lineno"> 5529</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ab5b2bec9425dd0cfc789d96ef229cb3a">AST_FLAG_BLOCKING</a>);</div><div class="line"><a name="l05530"></a><span class="lineno"> 5530</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05531"></a><span class="lineno"> 5531</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a29ff71f9d5c7927906ebd437fe372056">AST_FRAME_NULL</a>:</div><div class="line"><a name="l05532"></a><span class="lineno"> 5532</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a7f7e5bdc9f8a8ef45c4d078f96b52624">AST_FRAME_IAX</a>:</div><div class="line"><a name="l05533"></a><span class="lineno"> 5533</span>&#160;      <span class="comment">/* Ignore these */</span></div><div class="line"><a name="l05534"></a><span class="lineno"> 5534</span>&#160;      res = 0;</div><div class="line"><a name="l05535"></a><span class="lineno"> 5535</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05536"></a><span class="lineno"> 5536</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ac2b2b163b29fde967531b8bf92966c97">AST_FRAME_RTCP</a>:</div><div class="line"><a name="l05537"></a><span class="lineno"> 5537</span>&#160;      <span class="comment">/* RTCP information is on a per-stream basis and only available on multistream capable channels */</span></div><div class="line"><a name="l05538"></a><span class="lineno"> 5538</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a3a5d847510a477edda3d0bc1459709f4">CHECK_BLOCKING</a>(chan);</div><div class="line"><a name="l05539"></a><span class="lineno"> 5539</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../db/d9b/format__ogg__vorbis_8c.html#aa07752a32d3d4fa9eac743a1d7daf16f">write_stream</a> &amp;&amp; stream) {</div><div class="line"><a name="l05540"></a><span class="lineno"> 5540</span>&#160;         res = <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#afa7782a9f08ff818e7ba3d3fe730f028">write_stream</a>(chan, <a class="code" href="../../d8/d95/stream_8h.html#a35dd19cc6a6f0310d45e181398095463">ast_stream_get_position</a>(stream), fr);</div><div class="line"><a name="l05541"></a><span class="lineno"> 5541</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05542"></a><span class="lineno"> 5542</span>&#160;         res = 0;</div><div class="line"><a name="l05543"></a><span class="lineno"> 5543</span>&#160;      }</div><div class="line"><a name="l05544"></a><span class="lineno"> 5544</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ab5b2bec9425dd0cfc789d96ef229cb3a">AST_FLAG_BLOCKING</a>);</div><div class="line"><a name="l05545"></a><span class="lineno"> 5545</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05546"></a><span class="lineno"> 5546</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l05547"></a><span class="lineno"> 5547</span>&#160;      <span class="comment">/* At this point, fr is the incoming frame and f is NULL.  Channels do</span></div><div class="line"><a name="l05548"></a><span class="lineno"> 5548</span>&#160;<span class="comment">       * not expect to get NULL as a frame pointer and will segfault.  Hence,</span></div><div class="line"><a name="l05549"></a><span class="lineno"> 5549</span>&#160;<span class="comment">       * we output the original frame passed in. */</span></div><div class="line"><a name="l05550"></a><span class="lineno"> 5550</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a3a5d847510a477edda3d0bc1459709f4">CHECK_BLOCKING</a>(chan);</div><div class="line"><a name="l05551"></a><span class="lineno"> 5551</span>&#160;      res = <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#a00128f99123ef7844d506e8939bb1786">write</a>(chan, fr);</div><div class="line"><a name="l05552"></a><span class="lineno"> 5552</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ab5b2bec9425dd0cfc789d96ef229cb3a">AST_FLAG_BLOCKING</a>);</div><div class="line"><a name="l05553"></a><span class="lineno"> 5553</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05554"></a><span class="lineno"> 5554</span>&#160;   }</div><div class="line"><a name="l05555"></a><span class="lineno"> 5555</span>&#160;</div><div class="line"><a name="l05556"></a><span class="lineno"> 5556</span>&#160;   <span class="keywordflow">if</span> (f &amp;&amp; f != fr)</div><div class="line"><a name="l05557"></a><span class="lineno"> 5557</span>&#160;      <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l05558"></a><span class="lineno"> 5558</span>&#160;</div><div class="line"><a name="l05559"></a><span class="lineno"> 5559</span>&#160;   <span class="comment">/* Consider a write failure to force a soft hangup */</span></div><div class="line"><a name="l05560"></a><span class="lineno"> 5560</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l05561"></a><span class="lineno"> 5561</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ab683c21c4a34450c4bfb8b672a7b4045">ast_channel_softhangup_internal_flag_add</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2e185ce313026e13ed90ae3a319c9cb7">AST_SOFTHANGUP_DEV</a>);</div><div class="line"><a name="l05562"></a><span class="lineno"> 5562</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05563"></a><span class="lineno"> 5563</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ad6d58614c0340ae49d165977b965c9f3">ast_channel_fout_set</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#ae02cd8717fa5e5be15080386639ebb2c">FRAMECOUNT_INC</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a9bcf283b2c7f3a62e77ed10e02efc23a">ast_channel_fout</a>(chan)));</div><div class="line"><a name="l05564"></a><span class="lineno"> 5564</span>&#160;   }</div><div class="line"><a name="l05565"></a><span class="lineno"> 5565</span>&#160;<a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>:</div><div class="line"><a name="l05566"></a><span class="lineno"> 5566</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan) &amp;&amp; <a class="code" href="../../d0/d79/audiohook_8h.html#a46613f6e1524089bf8c4b2a7880f716d">ast_audiohook_write_list_empty</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan))) {</div><div class="line"><a name="l05567"></a><span class="lineno"> 5567</span>&#160;      <span class="comment">/* The list gets recreated if audiohooks are added again later */</span></div><div class="line"><a name="l05568"></a><span class="lineno"> 5568</span>&#160;      <a class="code" href="../../d0/d79/audiohook_8h.html#a5da9cb8531c18cbae0c703a57acbf0f3">ast_audiohook_detach_list</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan));</div><div class="line"><a name="l05569"></a><span class="lineno"> 5569</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a8dec5f0bd378a1c23bbd9dba03b213fb">ast_channel_audiohooks_set</a>(chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05570"></a><span class="lineno"> 5570</span>&#160;   }</div><div class="line"><a name="l05571"></a><span class="lineno"> 5571</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l05572"></a><span class="lineno"> 5572</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l05573"></a><span class="lineno"> 5573</span>&#160;}</div><div class="line"><a name="l05574"></a><span class="lineno"> 5574</span>&#160;</div><div class="line"><a name="l05575"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a2161934659b4d81f8e225d107d5e91e8"> 5575</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a2161934659b4d81f8e225d107d5e91e8">ast_set_read_format_path</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *raw_format, <span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *core_format)</div><div class="line"><a name="l05576"></a><span class="lineno"> 5576</span>&#160;{</div><div class="line"><a name="l05577"></a><span class="lineno"> 5577</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *trans_old;</div><div class="line"><a name="l05578"></a><span class="lineno"> 5578</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *trans_new;</div><div class="line"><a name="l05579"></a><span class="lineno"> 5579</span>&#160;</div><div class="line"><a name="l05580"></a><span class="lineno"> 5580</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aa6ceb6b9067d793c4d00c566ae585f0b">ast_channel_rawreadformat</a>(chan), raw_format) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a></div><div class="line"><a name="l05581"></a><span class="lineno"> 5581</span>&#160;      &amp;&amp; <a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a>(chan), core_format) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a>) {</div><div class="line"><a name="l05582"></a><span class="lineno"> 5582</span>&#160;      <span class="comment">/* Nothing to setup */</span></div><div class="line"><a name="l05583"></a><span class="lineno"> 5583</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05584"></a><span class="lineno"> 5584</span>&#160;   }</div><div class="line"><a name="l05585"></a><span class="lineno"> 5585</span>&#160;</div><div class="line"><a name="l05586"></a><span class="lineno"> 5586</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Channel %s setting read format path: %s -&gt; %s\n&quot;</span>,</div><div class="line"><a name="l05587"></a><span class="lineno"> 5587</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan),</div><div class="line"><a name="l05588"></a><span class="lineno"> 5588</span>&#160;      <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(raw_format),</div><div class="line"><a name="l05589"></a><span class="lineno"> 5589</span>&#160;      <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(core_format));</div><div class="line"><a name="l05590"></a><span class="lineno"> 5590</span>&#160;</div><div class="line"><a name="l05591"></a><span class="lineno"> 5591</span>&#160;   <span class="comment">/* Setup new translation path. */</span></div><div class="line"><a name="l05592"></a><span class="lineno"> 5592</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(raw_format, core_format) != <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a>) {</div><div class="line"><a name="l05593"></a><span class="lineno"> 5593</span>&#160;      trans_new = <a class="code" href="../../db/d39/translate_8h.html#a08790d6e05056f38fe9194134332cfef">ast_translator_build_path</a>(core_format, raw_format);</div><div class="line"><a name="l05594"></a><span class="lineno"> 5594</span>&#160;      <span class="keywordflow">if</span> (!trans_new) {</div><div class="line"><a name="l05595"></a><span class="lineno"> 5595</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05596"></a><span class="lineno"> 5596</span>&#160;      }</div><div class="line"><a name="l05597"></a><span class="lineno"> 5597</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05598"></a><span class="lineno"> 5598</span>&#160;      <span class="comment">/* No translation needed. */</span></div><div class="line"><a name="l05599"></a><span class="lineno"> 5599</span>&#160;      trans_new = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05600"></a><span class="lineno"> 5600</span>&#160;   }</div><div class="line"><a name="l05601"></a><span class="lineno"> 5601</span>&#160;   trans_old = <a class="code" href="../../d5/d7b/channel_8h.html#a6b4548259e61f691c654aed0025e5502">ast_channel_readtrans</a>(chan);</div><div class="line"><a name="l05602"></a><span class="lineno"> 5602</span>&#160;   <span class="keywordflow">if</span> (trans_old) {</div><div class="line"><a name="l05603"></a><span class="lineno"> 5603</span>&#160;      <a class="code" href="../../db/d39/translate_8h.html#a8f767bf5c2095f182e7cbaa73e391207">ast_translator_free_path</a>(trans_old);</div><div class="line"><a name="l05604"></a><span class="lineno"> 5604</span>&#160;   }</div><div class="line"><a name="l05605"></a><span class="lineno"> 5605</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a9424ffc5c566def29ef0b1d1937e9054">ast_channel_readtrans_set</a>(chan, trans_new);</div><div class="line"><a name="l05606"></a><span class="lineno"> 5606</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a921a2d48faa9ed99a59d33e7aefa7888">ast_channel_set_rawreadformat</a>(chan, raw_format);</div><div class="line"><a name="l05607"></a><span class="lineno"> 5607</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ab3786cbbff7a03241fc75dafa0c8a1c1">ast_channel_set_readformat</a>(chan, core_format);</div><div class="line"><a name="l05608"></a><span class="lineno"> 5608</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05609"></a><span class="lineno"> 5609</span>&#160;}</div><div class="line"><a name="l05610"></a><span class="lineno"> 5610</span>&#160;</div><div class="line"><a name="l05611"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ad50d5b0a589b3fb8464c97d40548c102"> 5611</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#ad50d5b0a589b3fb8464c97d40548c102">ast_set_write_format_path</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *core_format, <span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *raw_format)</div><div class="line"><a name="l05612"></a><span class="lineno"> 5612</span>&#160;{</div><div class="line"><a name="l05613"></a><span class="lineno"> 5613</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *trans_old;</div><div class="line"><a name="l05614"></a><span class="lineno"> 5614</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *trans_new;</div><div class="line"><a name="l05615"></a><span class="lineno"> 5615</span>&#160;</div><div class="line"><a name="l05616"></a><span class="lineno"> 5616</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad27c52cda6e6435a121900661ad5bdce">ast_channel_rawwriteformat</a>(chan), raw_format) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a></div><div class="line"><a name="l05617"></a><span class="lineno"> 5617</span>&#160;      &amp;&amp; <a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a>(chan), core_format) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a>) {</div><div class="line"><a name="l05618"></a><span class="lineno"> 5618</span>&#160;      <span class="comment">/* Nothing to setup */</span></div><div class="line"><a name="l05619"></a><span class="lineno"> 5619</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05620"></a><span class="lineno"> 5620</span>&#160;   }</div><div class="line"><a name="l05621"></a><span class="lineno"> 5621</span>&#160;</div><div class="line"><a name="l05622"></a><span class="lineno"> 5622</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Channel %s setting write format path: %s -&gt; %s\n&quot;</span>,</div><div class="line"><a name="l05623"></a><span class="lineno"> 5623</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan),</div><div class="line"><a name="l05624"></a><span class="lineno"> 5624</span>&#160;      <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(core_format),</div><div class="line"><a name="l05625"></a><span class="lineno"> 5625</span>&#160;      <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(raw_format));</div><div class="line"><a name="l05626"></a><span class="lineno"> 5626</span>&#160;</div><div class="line"><a name="l05627"></a><span class="lineno"> 5627</span>&#160;   <span class="comment">/* Setup new translation path. */</span></div><div class="line"><a name="l05628"></a><span class="lineno"> 5628</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(raw_format, core_format) != <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a>) {</div><div class="line"><a name="l05629"></a><span class="lineno"> 5629</span>&#160;      trans_new = <a class="code" href="../../db/d39/translate_8h.html#a08790d6e05056f38fe9194134332cfef">ast_translator_build_path</a>(raw_format, core_format);</div><div class="line"><a name="l05630"></a><span class="lineno"> 5630</span>&#160;      <span class="keywordflow">if</span> (!trans_new) {</div><div class="line"><a name="l05631"></a><span class="lineno"> 5631</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05632"></a><span class="lineno"> 5632</span>&#160;      }</div><div class="line"><a name="l05633"></a><span class="lineno"> 5633</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05634"></a><span class="lineno"> 5634</span>&#160;      <span class="comment">/* No translation needed. */</span></div><div class="line"><a name="l05635"></a><span class="lineno"> 5635</span>&#160;      trans_new = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05636"></a><span class="lineno"> 5636</span>&#160;   }</div><div class="line"><a name="l05637"></a><span class="lineno"> 5637</span>&#160;   trans_old = <a class="code" href="../../d5/d7b/channel_8h.html#ab5c41a2130385cadf78c64cacea7e3f9">ast_channel_writetrans</a>(chan);</div><div class="line"><a name="l05638"></a><span class="lineno"> 5638</span>&#160;   <span class="keywordflow">if</span> (trans_old) {</div><div class="line"><a name="l05639"></a><span class="lineno"> 5639</span>&#160;      <a class="code" href="../../db/d39/translate_8h.html#a8f767bf5c2095f182e7cbaa73e391207">ast_translator_free_path</a>(trans_old);</div><div class="line"><a name="l05640"></a><span class="lineno"> 5640</span>&#160;   }</div><div class="line"><a name="l05641"></a><span class="lineno"> 5641</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a6634543669b0cd08b6699a8d56fbd2f0">ast_channel_writetrans_set</a>(chan, trans_new);</div><div class="line"><a name="l05642"></a><span class="lineno"> 5642</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aa2df58e77751b741b6891afe210b5b8c">ast_channel_set_rawwriteformat</a>(chan, raw_format);</div><div class="line"><a name="l05643"></a><span class="lineno"> 5643</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#afac6d7d115c1edfe3ad8a8c7fa5d59d1">ast_channel_set_writeformat</a>(chan, core_format);</div><div class="line"><a name="l05644"></a><span class="lineno"> 5644</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05645"></a><span class="lineno"> 5645</span>&#160;}</div><div class="line"><a name="l05646"></a><span class="lineno"> 5646</span>&#160;</div><div class="line"><a name="l05647"></a><span class="lineno"><a class="line" href="../../d0/d0f/structset__format__access.html"> 5647</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d0/d0f/structset__format__access.html">set_format_access</a> {</div><div class="line"><a name="l05648"></a><span class="lineno"><a class="line" href="../../d0/d0f/structset__format__access.html#ae495ce4d65a6f5391715f97994829da1"> 5648</a></span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d0f/structset__format__access.html#ae495ce4d65a6f5391715f97994829da1">direction</a>;</div><div class="line"><a name="l05649"></a><span class="lineno"><a class="line" href="../../d0/d0f/structset__format__access.html#a376b4a90ab7c0055d9529a665936ce94"> 5649</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *(*get_trans)(<span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l05650"></a><span class="lineno"><a class="line" href="../../d0/d0f/structset__format__access.html#a479c848d7753855587c70c628b2774b6"> 5650</a></span>&#160;   void (*set_trans)(<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="keyword">struct </span><a class="code" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>);</div><div class="line"><a name="l05651"></a><span class="lineno"><a class="line" href="../../d0/d0f/structset__format__access.html#a38ddc8fcab687302219f13d5587c5801"> 5651</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *(*get_format)(<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l05652"></a><span class="lineno"><a class="line" href="../../d0/d0f/structset__format__access.html#add68d9488e9ecb2a49cc308c26658b32"> 5652</a></span>&#160;   void (*<a class="code" href="../../d4/d28/channel_8c.html#a18bb2370e871662cae50dd848da8ca2b">set_format</a>)(<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>);</div><div class="line"><a name="l05653"></a><span class="lineno"><a class="line" href="../../d0/d0f/structset__format__access.html#a730ad8a560a949aed53fcb661abeaabf"> 5653</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *(*get_rawformat)(<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l05654"></a><span class="lineno"><a class="line" href="../../d0/d0f/structset__format__access.html#a601e38d4371b671a64eaf12766760223"> 5654</a></span>&#160;   void (*set_rawformat)(<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>);</div><div class="line"><a name="l05655"></a><span class="lineno"><a class="line" href="../../d0/d0f/structset__format__access.html#aa7d4a9c07bac6b02adae2c3867804af4"> 5655</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d0/d0f/structset__format__access.html#aa7d4a9c07bac6b02adae2c3867804af4">setoption</a>;</div><div class="line"><a name="l05656"></a><span class="lineno"> 5656</span>&#160;};</div><div class="line"><a name="l05657"></a><span class="lineno"> 5657</span>&#160;</div><div class="line"><a name="l05658"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aeee785b39fca76b9e7b3155105de76cb"> 5658</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d0/d0f/structset__format__access.html">set_format_access</a> <a class="code" href="../../d4/d28/channel_8c.html#aeee785b39fca76b9e7b3155105de76cb">set_format_access_read</a> = {</div><div class="line"><a name="l05659"></a><span class="lineno"> 5659</span>&#160;   .<a class="code" href="../../d0/d0f/structset__format__access.html#ae495ce4d65a6f5391715f97994829da1">direction</a> = <span class="stringliteral">&quot;read&quot;</span>,</div><div class="line"><a name="l05660"></a><span class="lineno"> 5660</span>&#160;   .get_trans = <a class="code" href="../../d5/d7b/channel_8h.html#a6b4548259e61f691c654aed0025e5502">ast_channel_readtrans</a>,</div><div class="line"><a name="l05661"></a><span class="lineno"> 5661</span>&#160;   .set_trans = <a class="code" href="../../d5/d7b/channel_8h.html#a9424ffc5c566def29ef0b1d1937e9054">ast_channel_readtrans_set</a>,</div><div class="line"><a name="l05662"></a><span class="lineno"> 5662</span>&#160;   .get_format = <a class="code" href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a>,</div><div class="line"><a name="l05663"></a><span class="lineno"> 5663</span>&#160;   .set_format = <a class="code" href="../../d5/d7b/channel_8h.html#ab3786cbbff7a03241fc75dafa0c8a1c1">ast_channel_set_readformat</a>,</div><div class="line"><a name="l05664"></a><span class="lineno"> 5664</span>&#160;   .get_rawformat = <a class="code" href="../../d5/d7b/channel_8h.html#aa6ceb6b9067d793c4d00c566ae585f0b">ast_channel_rawreadformat</a>,</div><div class="line"><a name="l05665"></a><span class="lineno"> 5665</span>&#160;   .set_rawformat = <a class="code" href="../../d5/d7b/channel_8h.html#a921a2d48faa9ed99a59d33e7aefa7888">ast_channel_set_rawreadformat</a>,</div><div class="line"><a name="l05666"></a><span class="lineno"> 5666</span>&#160;   .setoption = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ad3d549ef92bf608f8f2f7afccaa536fb">AST_OPTION_FORMAT_READ</a>,</div><div class="line"><a name="l05667"></a><span class="lineno"> 5667</span>&#160;};</div><div class="line"><a name="l05668"></a><span class="lineno"> 5668</span>&#160;</div><div class="line"><a name="l05669"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a9746280ef520b85bc81bb0b668ee9a8c"> 5669</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d0/d0f/structset__format__access.html">set_format_access</a> <a class="code" href="../../d4/d28/channel_8c.html#a9746280ef520b85bc81bb0b668ee9a8c">set_format_access_write</a> = {</div><div class="line"><a name="l05670"></a><span class="lineno"> 5670</span>&#160;   .<a class="code" href="../../d0/d0f/structset__format__access.html#ae495ce4d65a6f5391715f97994829da1">direction</a> = <span class="stringliteral">&quot;write&quot;</span>,</div><div class="line"><a name="l05671"></a><span class="lineno"> 5671</span>&#160;   .get_trans = <a class="code" href="../../d5/d7b/channel_8h.html#ab5c41a2130385cadf78c64cacea7e3f9">ast_channel_writetrans</a>,</div><div class="line"><a name="l05672"></a><span class="lineno"> 5672</span>&#160;   .set_trans = <a class="code" href="../../d5/d7b/channel_8h.html#a6634543669b0cd08b6699a8d56fbd2f0">ast_channel_writetrans_set</a>,</div><div class="line"><a name="l05673"></a><span class="lineno"> 5673</span>&#160;   .get_format = <a class="code" href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a>,</div><div class="line"><a name="l05674"></a><span class="lineno"> 5674</span>&#160;   .set_format = <a class="code" href="../../d5/d7b/channel_8h.html#afac6d7d115c1edfe3ad8a8c7fa5d59d1">ast_channel_set_writeformat</a>,</div><div class="line"><a name="l05675"></a><span class="lineno"> 5675</span>&#160;   .get_rawformat = <a class="code" href="../../d5/d7b/channel_8h.html#ad27c52cda6e6435a121900661ad5bdce">ast_channel_rawwriteformat</a>,</div><div class="line"><a name="l05676"></a><span class="lineno"> 5676</span>&#160;   .set_rawformat = <a class="code" href="../../d5/d7b/channel_8h.html#aa2df58e77751b741b6891afe210b5b8c">ast_channel_set_rawwriteformat</a>,</div><div class="line"><a name="l05677"></a><span class="lineno"> 5677</span>&#160;   .setoption = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a54e6485c076a37a2ecf781ddebc662ff">AST_OPTION_FORMAT_WRITE</a>,</div><div class="line"><a name="l05678"></a><span class="lineno"> 5678</span>&#160;};</div><div class="line"><a name="l05679"></a><span class="lineno"> 5679</span>&#160;</div><div class="line"><a name="l05680"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a18bb2370e871662cae50dd848da8ca2b"> 5680</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a18bb2370e871662cae50dd848da8ca2b">set_format</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap_set, <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a>, <span class="keywordtype">int</span> interleaved_stereo)</div><div class="line"><a name="l05681"></a><span class="lineno"> 5681</span>&#160;{</div><div class="line"><a name="l05682"></a><span class="lineno"> 5682</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *trans_pvt;</div><div class="line"><a name="l05683"></a><span class="lineno"> 5683</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap_native;</div><div class="line"><a name="l05684"></a><span class="lineno"> 5684</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d0/d0f/structset__format__access.html">set_format_access</a> *access;</div><div class="line"><a name="l05685"></a><span class="lineno"> 5685</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *rawformat;</div><div class="line"><a name="l05686"></a><span class="lineno"> 5686</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>;</div><div class="line"><a name="l05687"></a><span class="lineno"> 5687</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *, best_set_fmt, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l05688"></a><span class="lineno"> 5688</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *, best_native_fmt, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l05689"></a><span class="lineno"> 5689</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l05690"></a><span class="lineno"> 5690</span>&#160;</div><div class="line"><a name="l05691"></a><span class="lineno"> 5691</span>&#160;   <span class="keywordflow">if</span> (!direction) {</div><div class="line"><a name="l05692"></a><span class="lineno"> 5692</span>&#160;      <span class="comment">/* reading */</span></div><div class="line"><a name="l05693"></a><span class="lineno"> 5693</span>&#160;      access = &amp;<a class="code" href="../../d4/d28/channel_8c.html#aeee785b39fca76b9e7b3155105de76cb">set_format_access_read</a>;</div><div class="line"><a name="l05694"></a><span class="lineno"> 5694</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05695"></a><span class="lineno"> 5695</span>&#160;      <span class="comment">/* writing */</span></div><div class="line"><a name="l05696"></a><span class="lineno"> 5696</span>&#160;      access = &amp;<a class="code" href="../../d4/d28/channel_8c.html#a9746280ef520b85bc81bb0b668ee9a8c">set_format_access_write</a>;</div><div class="line"><a name="l05697"></a><span class="lineno"> 5697</span>&#160;   }</div><div class="line"><a name="l05698"></a><span class="lineno"> 5698</span>&#160;</div><div class="line"><a name="l05699"></a><span class="lineno"> 5699</span>&#160;   best_set_fmt = <a class="code" href="../../d0/d3c/format__cap_8h.html#aa9da4b15be2b49c8f511a579c4c44b63">ast_format_cap_get_best_by_type</a>(cap_set, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>);</div><div class="line"><a name="l05700"></a><span class="lineno"> 5700</span>&#160;   <span class="keywordflow">if</span> (!best_set_fmt) {</div><div class="line"><a name="l05701"></a><span class="lineno"> 5701</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l05702"></a><span class="lineno"> 5702</span>&#160;<span class="comment">       * Not setting any audio formats?</span></div><div class="line"><a name="l05703"></a><span class="lineno"> 5703</span>&#160;<span class="comment">       * Assume a call without any sounds (video, text)</span></div><div class="line"><a name="l05704"></a><span class="lineno"> 5704</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l05705"></a><span class="lineno"> 5705</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05706"></a><span class="lineno"> 5706</span>&#160;   }</div><div class="line"><a name="l05707"></a><span class="lineno"> 5707</span>&#160;</div><div class="line"><a name="l05708"></a><span class="lineno"> 5708</span>&#160;   <span class="comment">/* See if the underlying channel driver is capable of performing transcoding for us */</span></div><div class="line"><a name="l05709"></a><span class="lineno"> 5709</span>&#160;   res = <a class="code" href="../../d4/d28/channel_8c.html#a51d19fd5d03e845c18b7826c9f74a3ae">ast_channel_setoption</a>(chan, access-&gt;<a class="code" href="../../d0/d0f/structset__format__access.html#aa7d4a9c07bac6b02adae2c3867804af4">setoption</a>,</div><div class="line"><a name="l05710"></a><span class="lineno"> 5710</span>&#160;      &amp;best_set_fmt, <span class="keyword">sizeof</span>(best_set_fmt), 0);</div><div class="line"><a name="l05711"></a><span class="lineno"> 5711</span>&#160;   <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l05712"></a><span class="lineno"> 5712</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Channel driver natively set channel %s to %s format %s\n&quot;</span>,</div><div class="line"><a name="l05713"></a><span class="lineno"> 5713</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), access-&gt;<a class="code" href="../../d0/d0f/structset__format__access.html#ae495ce4d65a6f5391715f97994829da1">direction</a>, <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(best_set_fmt));</div><div class="line"><a name="l05714"></a><span class="lineno"> 5714</span>&#160;</div><div class="line"><a name="l05715"></a><span class="lineno"> 5715</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l05716"></a><span class="lineno"> 5716</span>&#160;      cap_native = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l05717"></a><span class="lineno"> 5717</span>&#160;      <span class="keywordflow">if</span> (!cap_native</div><div class="line"><a name="l05718"></a><span class="lineno"> 5718</span>&#160;         || <a class="code" href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a>(cap_native, best_set_fmt, 0)) {</div><div class="line"><a name="l05719"></a><span class="lineno"> 5719</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l05720"></a><span class="lineno"> 5720</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cap_native);</div><div class="line"><a name="l05721"></a><span class="lineno"> 5721</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05722"></a><span class="lineno"> 5722</span>&#160;      }</div><div class="line"><a name="l05723"></a><span class="lineno"> 5723</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a3c9c29fb2bc2b715fee335c1ffa50449">ast_channel_nativeformats_set</a>(chan, cap_native);</div><div class="line"><a name="l05724"></a><span class="lineno"> 5724</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cap_native);</div><div class="line"><a name="l05725"></a><span class="lineno"> 5725</span>&#160;      access-&gt;<a class="code" href="../../d0/d0f/structset__format__access.html#add68d9488e9ecb2a49cc308c26658b32">set_format</a>(chan, best_set_fmt);</div><div class="line"><a name="l05726"></a><span class="lineno"> 5726</span>&#160;      access-&gt;<a class="code" href="../../d0/d0f/structset__format__access.html#a601e38d4371b671a64eaf12766760223">set_rawformat</a>(chan, best_set_fmt);</div><div class="line"><a name="l05727"></a><span class="lineno"> 5727</span>&#160;</div><div class="line"><a name="l05728"></a><span class="lineno"> 5728</span>&#160;      trans_pvt = access-&gt;<a class="code" href="../../d0/d0f/structset__format__access.html#a376b4a90ab7c0055d9529a665936ce94">get_trans</a>(chan);</div><div class="line"><a name="l05729"></a><span class="lineno"> 5729</span>&#160;      <span class="keywordflow">if</span> (trans_pvt) {</div><div class="line"><a name="l05730"></a><span class="lineno"> 5730</span>&#160;         <a class="code" href="../../db/d39/translate_8h.html#a8f767bf5c2095f182e7cbaa73e391207">ast_translator_free_path</a>(trans_pvt);</div><div class="line"><a name="l05731"></a><span class="lineno"> 5731</span>&#160;         access-&gt;<a class="code" href="../../d0/d0f/structset__format__access.html#a479c848d7753855587c70c628b2774b6">set_trans</a>(chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05732"></a><span class="lineno"> 5732</span>&#160;      }</div><div class="line"><a name="l05733"></a><span class="lineno"> 5733</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l05734"></a><span class="lineno"> 5734</span>&#160;</div><div class="line"><a name="l05735"></a><span class="lineno"> 5735</span>&#160;      <span class="comment">/* If there is a generator on the channel, it needs to know about this</span></div><div class="line"><a name="l05736"></a><span class="lineno"> 5736</span>&#160;<span class="comment">       * change if it is the write format. */</span></div><div class="line"><a name="l05737"></a><span class="lineno"> 5737</span>&#160;      <span class="keywordflow">if</span> (direction &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#afb86bdd7fa42b7bf8ac2fbfab01f67ef">ast_channel_generatordata</a>(chan)) {</div><div class="line"><a name="l05738"></a><span class="lineno"> 5738</span>&#160;         <a class="code" href="../../d4/d28/channel_8c.html#a11d5324d900ad89c46441038649b3dd9">generator_write_format_change</a>(chan);</div><div class="line"><a name="l05739"></a><span class="lineno"> 5739</span>&#160;      }</div><div class="line"><a name="l05740"></a><span class="lineno"> 5740</span>&#160;</div><div class="line"><a name="l05741"></a><span class="lineno"> 5741</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05742"></a><span class="lineno"> 5742</span>&#160;   }</div><div class="line"><a name="l05743"></a><span class="lineno"> 5743</span>&#160;</div><div class="line"><a name="l05744"></a><span class="lineno"> 5744</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l05745"></a><span class="lineno"> 5745</span>&#160;</div><div class="line"><a name="l05746"></a><span class="lineno"> 5746</span>&#160;   format = access-&gt;<a class="code" href="../../d0/d0f/structset__format__access.html#a38ddc8fcab687302219f13d5587c5801">get_format</a>(chan);</div><div class="line"><a name="l05747"></a><span class="lineno"> 5747</span>&#160;   rawformat = access-&gt;<a class="code" href="../../d0/d0f/structset__format__access.html#a730ad8a560a949aed53fcb661abeaabf">get_rawformat</a>(chan);</div><div class="line"><a name="l05748"></a><span class="lineno"> 5748</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(format != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05749"></a><span class="lineno"> 5749</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(rawformat != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05750"></a><span class="lineno"> 5750</span>&#160;</div><div class="line"><a name="l05751"></a><span class="lineno"> 5751</span>&#160;   cap_native = <a class="code" href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a>(chan);</div><div class="line"><a name="l05752"></a><span class="lineno"> 5752</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d3c/format__cap_8h.html#a09809d02373dbc26b136f52cc98f7513">ast_format_cap_empty</a>(cap_native)) {</div><div class="line"><a name="l05753"></a><span class="lineno"> 5753</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l05754"></a><span class="lineno"> 5754</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to set format because channel %s supports no formats\n&quot;</span>,</div><div class="line"><a name="l05755"></a><span class="lineno"> 5755</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l05756"></a><span class="lineno"> 5756</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05757"></a><span class="lineno"> 5757</span>&#160;   }</div><div class="line"><a name="l05758"></a><span class="lineno"> 5758</span>&#160;</div><div class="line"><a name="l05759"></a><span class="lineno"> 5759</span>&#160;   <span class="comment">/* Find a translation path from the native format to one of the desired formats */</span></div><div class="line"><a name="l05760"></a><span class="lineno"> 5760</span>&#160;   <span class="keywordflow">if</span> (!direction) {</div><div class="line"><a name="l05761"></a><span class="lineno"> 5761</span>&#160;      <span class="comment">/* reading */</span></div><div class="line"><a name="l05762"></a><span class="lineno"> 5762</span>&#160;      res = <a class="code" href="../../db/d39/translate_8h.html#a67f43da0468e888ba70f0d001499e3e7">ast_translator_best_choice</a>(cap_set, cap_native, &amp;best_set_fmt, &amp;best_native_fmt);</div><div class="line"><a name="l05763"></a><span class="lineno"> 5763</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05764"></a><span class="lineno"> 5764</span>&#160;      <span class="comment">/* writing */</span></div><div class="line"><a name="l05765"></a><span class="lineno"> 5765</span>&#160;      res = <a class="code" href="../../db/d39/translate_8h.html#a67f43da0468e888ba70f0d001499e3e7">ast_translator_best_choice</a>(cap_native, cap_set, &amp;best_native_fmt, &amp;best_set_fmt);</div><div class="line"><a name="l05766"></a><span class="lineno"> 5766</span>&#160;   }</div><div class="line"><a name="l05767"></a><span class="lineno"> 5767</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l05768"></a><span class="lineno"> 5768</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *codec_native = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a>);</div><div class="line"><a name="l05769"></a><span class="lineno"> 5769</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *codec_set = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a>);</div><div class="line"><a name="l05770"></a><span class="lineno"> 5770</span>&#160;</div><div class="line"><a name="l05771"></a><span class="lineno"> 5771</span>&#160;      <a class="code" href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a>(cap_native, &amp;codec_native);</div><div class="line"><a name="l05772"></a><span class="lineno"> 5772</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l05773"></a><span class="lineno"> 5773</span>&#160;      <a class="code" href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a>(cap_set, &amp;codec_set);</div><div class="line"><a name="l05774"></a><span class="lineno"> 5774</span>&#160;</div><div class="line"><a name="l05775"></a><span class="lineno"> 5775</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to find a codec translation path: %s -&gt; %s\n&quot;</span>,</div><div class="line"><a name="l05776"></a><span class="lineno"> 5776</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(direction ? codec_set : codec_native),</div><div class="line"><a name="l05777"></a><span class="lineno"> 5777</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(direction ? codec_native : codec_set));</div><div class="line"><a name="l05778"></a><span class="lineno"> 5778</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05779"></a><span class="lineno"> 5779</span>&#160;   }</div><div class="line"><a name="l05780"></a><span class="lineno"> 5780</span>&#160;</div><div class="line"><a name="l05781"></a><span class="lineno"> 5781</span>&#160;   <span class="comment">/* Now we have a good choice for both. */</span></div><div class="line"><a name="l05782"></a><span class="lineno"> 5782</span>&#160;   trans_pvt = access-&gt;<a class="code" href="../../d0/d0f/structset__format__access.html#a376b4a90ab7c0055d9529a665936ce94">get_trans</a>(chan);</div><div class="line"><a name="l05783"></a><span class="lineno"> 5783</span>&#160;   <span class="keywordflow">if</span> ((<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(rawformat, best_native_fmt) != <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a>) &amp;&amp;</div><div class="line"><a name="l05784"></a><span class="lineno"> 5784</span>&#160;      (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(format, best_set_fmt) != <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a>) &amp;&amp;</div><div class="line"><a name="l05785"></a><span class="lineno"> 5785</span>&#160;      ((<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(rawformat, format) != <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a>) || access-&gt;<a class="code" href="../../d0/d0f/structset__format__access.html#a376b4a90ab7c0055d9529a665936ce94">get_trans</a>(chan))) {</div><div class="line"><a name="l05786"></a><span class="lineno"> 5786</span>&#160;      <span class="comment">/* the channel is already in these formats, so nothing to do, unless the interleaved format is not set correctly */</span></div><div class="line"><a name="l05787"></a><span class="lineno"> 5787</span>&#160;      <span class="keywordflow">if</span> (trans_pvt != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l05788"></a><span class="lineno"> 5788</span>&#160;         <span class="keywordflow">if</span> (trans_pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a86b8aa56638c94a9119b2dab1f006d45">interleaved_stereo</a> == interleaved_stereo) {</div><div class="line"><a name="l05789"></a><span class="lineno"> 5789</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l05790"></a><span class="lineno"> 5790</span>&#160;            <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05791"></a><span class="lineno"> 5791</span>&#160;         }</div><div class="line"><a name="l05792"></a><span class="lineno"> 5792</span>&#160;      }</div><div class="line"><a name="l05793"></a><span class="lineno"> 5793</span>&#160;   }</div><div class="line"><a name="l05794"></a><span class="lineno"> 5794</span>&#160;</div><div class="line"><a name="l05795"></a><span class="lineno"> 5795</span>&#160;   <span class="comment">/* Free any translation we have right now */</span></div><div class="line"><a name="l05796"></a><span class="lineno"> 5796</span>&#160;   <span class="keywordflow">if</span> (trans_pvt) {</div><div class="line"><a name="l05797"></a><span class="lineno"> 5797</span>&#160;      <a class="code" href="../../db/d39/translate_8h.html#a8f767bf5c2095f182e7cbaa73e391207">ast_translator_free_path</a>(trans_pvt);</div><div class="line"><a name="l05798"></a><span class="lineno"> 5798</span>&#160;      access-&gt;<a class="code" href="../../d0/d0f/structset__format__access.html#a479c848d7753855587c70c628b2774b6">set_trans</a>(chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05799"></a><span class="lineno"> 5799</span>&#160;   }</div><div class="line"><a name="l05800"></a><span class="lineno"> 5800</span>&#160;</div><div class="line"><a name="l05801"></a><span class="lineno"> 5801</span>&#160;   <span class="comment">/* Build a translation path from the raw format to the desired format */</span></div><div class="line"><a name="l05802"></a><span class="lineno"> 5802</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(best_set_fmt, best_native_fmt) != <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a>) {</div><div class="line"><a name="l05803"></a><span class="lineno"> 5803</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l05804"></a><span class="lineno"> 5804</span>&#160;<span class="comment">       * If we were able to swap the native format to the format that</span></div><div class="line"><a name="l05805"></a><span class="lineno"> 5805</span>&#160;<span class="comment">       * has been requested, then there is no need to try to build</span></div><div class="line"><a name="l05806"></a><span class="lineno"> 5806</span>&#160;<span class="comment">       * a translation path.</span></div><div class="line"><a name="l05807"></a><span class="lineno"> 5807</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l05808"></a><span class="lineno"> 5808</span>&#160;      res = 0;</div><div class="line"><a name="l05809"></a><span class="lineno"> 5809</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05810"></a><span class="lineno"> 5810</span>&#160;      <span class="keywordflow">if</span> (!direction) {</div><div class="line"><a name="l05811"></a><span class="lineno"> 5811</span>&#160;         <span class="comment">/* reading */</span></div><div class="line"><a name="l05812"></a><span class="lineno"> 5812</span>&#160;         trans_pvt = <a class="code" href="../../db/d39/translate_8h.html#a08790d6e05056f38fe9194134332cfef">ast_translator_build_path</a>(best_set_fmt, best_native_fmt);</div><div class="line"><a name="l05813"></a><span class="lineno"> 5813</span>&#160;         <span class="keywordflow">if</span> (trans_pvt) {</div><div class="line"><a name="l05814"></a><span class="lineno"> 5814</span>&#160;            trans_pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a86b8aa56638c94a9119b2dab1f006d45">interleaved_stereo</a> = 0;</div><div class="line"><a name="l05815"></a><span class="lineno"> 5815</span>&#160;         }</div><div class="line"><a name="l05816"></a><span class="lineno"> 5816</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05817"></a><span class="lineno"> 5817</span>&#160;         <span class="comment">/* writing */</span></div><div class="line"><a name="l05818"></a><span class="lineno"> 5818</span>&#160;         trans_pvt = <a class="code" href="../../db/d39/translate_8h.html#a08790d6e05056f38fe9194134332cfef">ast_translator_build_path</a>(best_native_fmt, best_set_fmt);</div><div class="line"><a name="l05819"></a><span class="lineno"> 5819</span>&#160;         <span class="keywordflow">if</span> (trans_pvt) {</div><div class="line"><a name="l05820"></a><span class="lineno"> 5820</span>&#160;            trans_pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a86b8aa56638c94a9119b2dab1f006d45">interleaved_stereo</a> = interleaved_stereo;</div><div class="line"><a name="l05821"></a><span class="lineno"> 5821</span>&#160;         }</div><div class="line"><a name="l05822"></a><span class="lineno"> 5822</span>&#160;      }</div><div class="line"><a name="l05823"></a><span class="lineno"> 5823</span>&#160;      access-&gt;<a class="code" href="../../d0/d0f/structset__format__access.html#a479c848d7753855587c70c628b2774b6">set_trans</a>(chan, trans_pvt);</div><div class="line"><a name="l05824"></a><span class="lineno"> 5824</span>&#160;      res = trans_pvt ? 0 : -1;</div><div class="line"><a name="l05825"></a><span class="lineno"> 5825</span>&#160;   }</div><div class="line"><a name="l05826"></a><span class="lineno"> 5826</span>&#160;</div><div class="line"><a name="l05827"></a><span class="lineno"> 5827</span>&#160;   <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l05828"></a><span class="lineno"> 5828</span>&#160;      access-&gt;<a class="code" href="../../d0/d0f/structset__format__access.html#add68d9488e9ecb2a49cc308c26658b32">set_format</a>(chan, best_set_fmt);</div><div class="line"><a name="l05829"></a><span class="lineno"> 5829</span>&#160;      access-&gt;<a class="code" href="../../d0/d0f/structset__format__access.html#a601e38d4371b671a64eaf12766760223">set_rawformat</a>(chan, best_native_fmt);</div><div class="line"><a name="l05830"></a><span class="lineno"> 5830</span>&#160;</div><div class="line"><a name="l05831"></a><span class="lineno"> 5831</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Channel %s setting %s format path: %s -&gt; %s\n&quot;</span>,</div><div class="line"><a name="l05832"></a><span class="lineno"> 5832</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan),</div><div class="line"><a name="l05833"></a><span class="lineno"> 5833</span>&#160;         access-&gt;<a class="code" href="../../d0/d0f/structset__format__access.html#ae495ce4d65a6f5391715f97994829da1">direction</a>,</div><div class="line"><a name="l05834"></a><span class="lineno"> 5834</span>&#160;         <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(direction ? best_set_fmt : best_native_fmt),</div><div class="line"><a name="l05835"></a><span class="lineno"> 5835</span>&#160;         <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(direction ? best_native_fmt : best_set_fmt));</div><div class="line"><a name="l05836"></a><span class="lineno"> 5836</span>&#160;   }</div><div class="line"><a name="l05837"></a><span class="lineno"> 5837</span>&#160;</div><div class="line"><a name="l05838"></a><span class="lineno"> 5838</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l05839"></a><span class="lineno"> 5839</span>&#160;</div><div class="line"><a name="l05840"></a><span class="lineno"> 5840</span>&#160;   <span class="comment">/* If there is a generator on the channel, it needs to know about this</span></div><div class="line"><a name="l05841"></a><span class="lineno"> 5841</span>&#160;<span class="comment">    * change if it is the write format. */</span></div><div class="line"><a name="l05842"></a><span class="lineno"> 5842</span>&#160;   <span class="keywordflow">if</span> (direction &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#afb86bdd7fa42b7bf8ac2fbfab01f67ef">ast_channel_generatordata</a>(chan)) {</div><div class="line"><a name="l05843"></a><span class="lineno"> 5843</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a11d5324d900ad89c46441038649b3dd9">generator_write_format_change</a>(chan);</div><div class="line"><a name="l05844"></a><span class="lineno"> 5844</span>&#160;   }</div><div class="line"><a name="l05845"></a><span class="lineno"> 5845</span>&#160;</div><div class="line"><a name="l05846"></a><span class="lineno"> 5846</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l05847"></a><span class="lineno"> 5847</span>&#160;}</div><div class="line"><a name="l05848"></a><span class="lineno"> 5848</span>&#160;</div><div class="line"><a name="l05849"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a9107a83365cbf327cc0d12cb0dbd28d8"> 5849</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a9107a83365cbf327cc0d12cb0dbd28d8">ast_set_read_format</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>)</div><div class="line"><a name="l05850"></a><span class="lineno"> 5850</span>&#160;{</div><div class="line"><a name="l05851"></a><span class="lineno"> 5851</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l05852"></a><span class="lineno"> 5852</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l05853"></a><span class="lineno"> 5853</span>&#160;</div><div class="line"><a name="l05854"></a><span class="lineno"> 5854</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(format != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05855"></a><span class="lineno"> 5855</span>&#160;</div><div class="line"><a name="l05856"></a><span class="lineno"> 5856</span>&#160;   <span class="keywordflow">if</span> (!cap) {</div><div class="line"><a name="l05857"></a><span class="lineno"> 5857</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05858"></a><span class="lineno"> 5858</span>&#160;   }</div><div class="line"><a name="l05859"></a><span class="lineno"> 5859</span>&#160;   <a class="code" href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a>(cap, format, 0);</div><div class="line"><a name="l05860"></a><span class="lineno"> 5860</span>&#160;</div><div class="line"><a name="l05861"></a><span class="lineno"> 5861</span>&#160;   res = <a class="code" href="../../d4/d28/channel_8c.html#a18bb2370e871662cae50dd848da8ca2b">set_format</a>(chan, cap, 0, 0);</div><div class="line"><a name="l05862"></a><span class="lineno"> 5862</span>&#160;</div><div class="line"><a name="l05863"></a><span class="lineno"> 5863</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cap);</div><div class="line"><a name="l05864"></a><span class="lineno"> 5864</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l05865"></a><span class="lineno"> 5865</span>&#160;}</div><div class="line"><a name="l05866"></a><span class="lineno"> 5866</span>&#160;</div><div class="line"><a name="l05867"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a455d5a7a2207ea5dd10ec7306fcdadb4"> 5867</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a455d5a7a2207ea5dd10ec7306fcdadb4">ast_set_read_format_from_cap</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap)</div><div class="line"><a name="l05868"></a><span class="lineno"> 5868</span>&#160;{</div><div class="line"><a name="l05869"></a><span class="lineno"> 5869</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a18bb2370e871662cae50dd848da8ca2b">set_format</a>(chan, cap, 0, 0);</div><div class="line"><a name="l05870"></a><span class="lineno"> 5870</span>&#160;}</div><div class="line"><a name="l05871"></a><span class="lineno"> 5871</span>&#160;</div><div class="line"><a name="l05872"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a78bf5d424a74b12893b177fbaf07ec90"> 5872</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a78bf5d424a74b12893b177fbaf07ec90">ast_set_write_format_interleaved_stereo</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>)</div><div class="line"><a name="l05873"></a><span class="lineno"> 5873</span>&#160;{</div><div class="line"><a name="l05874"></a><span class="lineno"> 5874</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l05875"></a><span class="lineno"> 5875</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l05876"></a><span class="lineno"> 5876</span>&#160;</div><div class="line"><a name="l05877"></a><span class="lineno"> 5877</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(format != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05878"></a><span class="lineno"> 5878</span>&#160;</div><div class="line"><a name="l05879"></a><span class="lineno"> 5879</span>&#160;   <span class="keywordflow">if</span> (!cap) {</div><div class="line"><a name="l05880"></a><span class="lineno"> 5880</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05881"></a><span class="lineno"> 5881</span>&#160;   }</div><div class="line"><a name="l05882"></a><span class="lineno"> 5882</span>&#160;   <a class="code" href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a>(cap, format, 0);</div><div class="line"><a name="l05883"></a><span class="lineno"> 5883</span>&#160;</div><div class="line"><a name="l05884"></a><span class="lineno"> 5884</span>&#160;   res = <a class="code" href="../../d4/d28/channel_8c.html#a18bb2370e871662cae50dd848da8ca2b">set_format</a>(chan, cap, 1, 1);</div><div class="line"><a name="l05885"></a><span class="lineno"> 5885</span>&#160;</div><div class="line"><a name="l05886"></a><span class="lineno"> 5886</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cap);</div><div class="line"><a name="l05887"></a><span class="lineno"> 5887</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l05888"></a><span class="lineno"> 5888</span>&#160;}</div><div class="line"><a name="l05889"></a><span class="lineno"> 5889</span>&#160;</div><div class="line"><a name="l05890"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#abbdfb98077180544657b2d16c5d25f74"> 5890</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#abbdfb98077180544657b2d16c5d25f74">ast_set_write_format</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>)</div><div class="line"><a name="l05891"></a><span class="lineno"> 5891</span>&#160;{</div><div class="line"><a name="l05892"></a><span class="lineno"> 5892</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l05893"></a><span class="lineno"> 5893</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l05894"></a><span class="lineno"> 5894</span>&#160;</div><div class="line"><a name="l05895"></a><span class="lineno"> 5895</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(format != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05896"></a><span class="lineno"> 5896</span>&#160;</div><div class="line"><a name="l05897"></a><span class="lineno"> 5897</span>&#160;   <span class="keywordflow">if</span> (!cap) {</div><div class="line"><a name="l05898"></a><span class="lineno"> 5898</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05899"></a><span class="lineno"> 5899</span>&#160;   }</div><div class="line"><a name="l05900"></a><span class="lineno"> 5900</span>&#160;   <a class="code" href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a>(cap, format, 0);</div><div class="line"><a name="l05901"></a><span class="lineno"> 5901</span>&#160;</div><div class="line"><a name="l05902"></a><span class="lineno"> 5902</span>&#160;   res = <a class="code" href="../../d4/d28/channel_8c.html#a18bb2370e871662cae50dd848da8ca2b">set_format</a>(chan, cap, 1, 0);</div><div class="line"><a name="l05903"></a><span class="lineno"> 5903</span>&#160;</div><div class="line"><a name="l05904"></a><span class="lineno"> 5904</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cap);</div><div class="line"><a name="l05905"></a><span class="lineno"> 5905</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l05906"></a><span class="lineno"> 5906</span>&#160;}</div><div class="line"><a name="l05907"></a><span class="lineno"> 5907</span>&#160;</div><div class="line"><a name="l05908"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a5998887722302a1008c0a705cbeb5eaf"> 5908</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a5998887722302a1008c0a705cbeb5eaf">ast_set_write_format_from_cap</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap)</div><div class="line"><a name="l05909"></a><span class="lineno"> 5909</span>&#160;{</div><div class="line"><a name="l05910"></a><span class="lineno"> 5910</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a18bb2370e871662cae50dd848da8ca2b">set_format</a>(chan, cap, 1, 0);</div><div class="line"><a name="l05911"></a><span class="lineno"> 5911</span>&#160;}</div><div class="line"><a name="l05912"></a><span class="lineno"> 5912</span>&#160;</div><div class="line"><a name="l05913"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a25ec12c3abdc7ad6d7971f4ad3737d94"> 5913</a></span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d4/d28/channel_8c.html#a25ec12c3abdc7ad6d7971f4ad3737d94">ast_channel_reason2str</a>(<span class="keywordtype">int</span> reason)</div><div class="line"><a name="l05914"></a><span class="lineno"> 5914</span>&#160;{</div><div class="line"><a name="l05915"></a><span class="lineno"> 5915</span>&#160;   <span class="keywordflow">switch</span> (reason) <span class="comment">/* the following appear to be the only ones actually returned by request_and_dial */</span></div><div class="line"><a name="l05916"></a><span class="lineno"> 5916</span>&#160;   {</div><div class="line"><a name="l05917"></a><span class="lineno"> 5917</span>&#160;   <span class="keywordflow">case</span> 0:</div><div class="line"><a name="l05918"></a><span class="lineno"> 5918</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Call Failure (not BUSY, and not NO_ANSWER, maybe Circuit busy or down?)&quot;</span>;</div><div class="line"><a name="l05919"></a><span class="lineno"> 5919</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba">AST_CONTROL_HANGUP</a>:</div><div class="line"><a name="l05920"></a><span class="lineno"> 5920</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Hangup&quot;</span>;</div><div class="line"><a name="l05921"></a><span class="lineno"> 5921</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a00675bfb8c64b2be86297fe4cba51fa2">AST_CONTROL_RING</a>:</div><div class="line"><a name="l05922"></a><span class="lineno"> 5922</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Local Ring&quot;</span>;</div><div class="line"><a name="l05923"></a><span class="lineno"> 5923</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a>:</div><div class="line"><a name="l05924"></a><span class="lineno"> 5924</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Remote end Ringing&quot;</span>;</div><div class="line"><a name="l05925"></a><span class="lineno"> 5925</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe">AST_CONTROL_ANSWER</a>:</div><div class="line"><a name="l05926"></a><span class="lineno"> 5926</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Remote end has Answered&quot;</span>;</div><div class="line"><a name="l05927"></a><span class="lineno"> 5927</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875">AST_CONTROL_BUSY</a>:</div><div class="line"><a name="l05928"></a><span class="lineno"> 5928</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Remote end is Busy&quot;</span>;</div><div class="line"><a name="l05929"></a><span class="lineno"> 5929</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a850bb06a1702741c93a3fd67cc9637ab">AST_CONTROL_CONGESTION</a>:</div><div class="line"><a name="l05930"></a><span class="lineno"> 5930</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Congestion (circuits busy)&quot;</span>;</div><div class="line"><a name="l05931"></a><span class="lineno"> 5931</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l05932"></a><span class="lineno"> 5932</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;Unknown Reason!!&quot;</span>;</div><div class="line"><a name="l05933"></a><span class="lineno"> 5933</span>&#160;   }</div><div class="line"><a name="l05934"></a><span class="lineno"> 5934</span>&#160;}</div><div class="line"><a name="l05935"></a><span class="lineno"> 5935</span>&#160;</div><div class="line"><a name="l05936"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a1d6e6458df4bfcb132a6934bafdb7fcc"> 5936</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a1d6e6458df4bfcb132a6934bafdb7fcc">handle_cause</a>(<span class="keywordtype">int</span> cause, <span class="keywordtype">int</span> *outstate)</div><div class="line"><a name="l05937"></a><span class="lineno"> 5937</span>&#160;{</div><div class="line"><a name="l05938"></a><span class="lineno"> 5938</span>&#160;   <span class="keywordflow">if</span> (outstate) {</div><div class="line"><a name="l05939"></a><span class="lineno"> 5939</span>&#160;      <span class="comment">/* compute error and return */</span></div><div class="line"><a name="l05940"></a><span class="lineno"> 5940</span>&#160;      <span class="keywordflow">if</span> (cause == <a class="code" href="../../d4/da3/causes_8h.html#ae009c193522491f7de7ea28b23f20868">AST_CAUSE_BUSY</a>)</div><div class="line"><a name="l05941"></a><span class="lineno"> 5941</span>&#160;         *outstate = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875">AST_CONTROL_BUSY</a>;</div><div class="line"><a name="l05942"></a><span class="lineno"> 5942</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cause == <a class="code" href="../../d4/da3/causes_8h.html#a0a35518d7b448a53da368cf57f354fba">AST_CAUSE_CONGESTION</a>)</div><div class="line"><a name="l05943"></a><span class="lineno"> 5943</span>&#160;         *outstate = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a850bb06a1702741c93a3fd67cc9637ab">AST_CONTROL_CONGESTION</a>;</div><div class="line"><a name="l05944"></a><span class="lineno"> 5944</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l05945"></a><span class="lineno"> 5945</span>&#160;         *outstate = 0;</div><div class="line"><a name="l05946"></a><span class="lineno"> 5946</span>&#160;   }</div><div class="line"><a name="l05947"></a><span class="lineno"> 5947</span>&#160;}</div><div class="line"><a name="l05948"></a><span class="lineno"> 5948</span>&#160;<span class="comment"></span></div><div class="line"><a name="l05949"></a><span class="lineno"> 5949</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l05950"></a><span class="lineno"> 5950</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l05951"></a><span class="lineno"> 5951</span>&#160;<span class="comment"> * \brief Helper function to inherit info from parent channel.</span></div><div class="line"><a name="l05952"></a><span class="lineno"> 5952</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05953"></a><span class="lineno"> 5953</span>&#160;<span class="comment"> * \param new_chan Channel inheriting information.</span></div><div class="line"><a name="l05954"></a><span class="lineno"> 5954</span>&#160;<span class="comment"> * \param parent Channel new_chan inherits information.</span></div><div class="line"><a name="l05955"></a><span class="lineno"> 5955</span>&#160;<span class="comment"> * \param orig Channel being replaced by the call forward channel.</span></div><div class="line"><a name="l05956"></a><span class="lineno"> 5956</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05957"></a><span class="lineno"> 5957</span>&#160;<span class="comment"> * \return Nothing</span></div><div class="line"><a name="l05958"></a><span class="lineno"> 5958</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05959"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a99a7ed1b6a0711bbc0810d15505620f3"> 5959</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a99a7ed1b6a0711bbc0810d15505620f3">call_forward_inherit</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *new_chan, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *parent, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *orig)</div><div class="line"><a name="l05960"></a><span class="lineno"> 5960</span>&#160;{</div><div class="line"><a name="l05961"></a><span class="lineno"> 5961</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(parent), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a26796fa52cc5857446eec8d16a4b718d">AST_FLAG_ZOMBIE</a>) &amp;&amp; !<a class="code" href="../../d4/d28/channel_8c.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(parent)) {</div><div class="line"><a name="l05962"></a><span class="lineno"> 5962</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../df/d44/structast__party__redirecting.html">ast_party_redirecting</a> redirecting;</div><div class="line"><a name="l05963"></a><span class="lineno"> 5963</span>&#160;</div><div class="line"><a name="l05964"></a><span class="lineno"> 5964</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l05965"></a><span class="lineno"> 5965</span>&#160;<span class="comment">       * The parent is not a ZOMBIE or hungup so update it with the</span></div><div class="line"><a name="l05966"></a><span class="lineno"> 5966</span>&#160;<span class="comment">       * original channel&#39;s redirecting information.</span></div><div class="line"><a name="l05967"></a><span class="lineno"> 5967</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l05968"></a><span class="lineno"> 5968</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a1a5760823cd16fd0343e489efd9c8f89">ast_party_redirecting_init</a>(&amp;redirecting);</div><div class="line"><a name="l05969"></a><span class="lineno"> 5969</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(orig);</div><div class="line"><a name="l05970"></a><span class="lineno"> 5970</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#af6f0b2102f29f86914e10a7787f0d536">ast_party_redirecting_copy</a>(&amp;redirecting, <a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(orig));</div><div class="line"><a name="l05971"></a><span class="lineno"> 5971</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(orig);</div><div class="line"><a name="l05972"></a><span class="lineno"> 5972</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d4/d28/channel_8c.html#a88fe9ad417e869049cb359030f06cab4">ast_channel_redirecting_sub</a>(orig, parent, &amp;redirecting, 0) &amp;&amp;</div><div class="line"><a name="l05973"></a><span class="lineno"> 5973</span>&#160;         <a class="code" href="../../d4/d28/channel_8c.html#a7176c4ba1352462039ef63412f425b00">ast_channel_redirecting_macro</a>(orig, parent, &amp;redirecting, 1, 0)) {</div><div class="line"><a name="l05974"></a><span class="lineno"> 5974</span>&#160;         <a class="code" href="../../d4/d28/channel_8c.html#ab025bba87d1757aa28e1a837596b1ead">ast_channel_update_redirecting</a>(parent, &amp;redirecting, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05975"></a><span class="lineno"> 5975</span>&#160;      }</div><div class="line"><a name="l05976"></a><span class="lineno"> 5976</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#ac8bce0bf79829c59a7671c4eff83a31f">ast_party_redirecting_free</a>(&amp;redirecting);</div><div class="line"><a name="l05977"></a><span class="lineno"> 5977</span>&#160;   }</div><div class="line"><a name="l05978"></a><span class="lineno"> 5978</span>&#160;</div><div class="line"><a name="l05979"></a><span class="lineno"> 5979</span>&#160;   <span class="comment">/* Safely inherit variables and datastores from the parent channel. */</span></div><div class="line"><a name="l05980"></a><span class="lineno"> 5980</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a695e5b4fcf983db6451b583fbd647424">ast_channel_lock_both</a>(parent, new_chan);</div><div class="line"><a name="l05981"></a><span class="lineno"> 5981</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a892b6550a4f90b70ad92198c9d05cedc">ast_channel_inherit_variables</a>(parent, new_chan);</div><div class="line"><a name="l05982"></a><span class="lineno"> 5982</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a6ce892974f59537bda03a71319b452e2">ast_channel_datastore_inherit</a>(parent, new_chan);</div><div class="line"><a name="l05983"></a><span class="lineno"> 5983</span>&#160;   <a class="code" href="../../d3/d93/max__forwards_8h.html#a63b977e0cb5f350171fed9dffd4fabe5">ast_max_forwards_decrement</a>(new_chan);</div><div class="line"><a name="l05984"></a><span class="lineno"> 5984</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(new_chan);</div><div class="line"><a name="l05985"></a><span class="lineno"> 5985</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(parent);</div><div class="line"><a name="l05986"></a><span class="lineno"> 5986</span>&#160;}</div><div class="line"><a name="l05987"></a><span class="lineno"> 5987</span>&#160;</div><div class="line"><a name="l05988"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a0dd78a3af30f7a1bfe9a89e3f806dd8c"> 5988</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d4/d28/channel_8c.html#a0dd78a3af30f7a1bfe9a89e3f806dd8c">ast_call_forward</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../df/d3c/structast__channel.html#aff76880df6a5121f2eb36109c79c28a2">caller</a>, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *orig, <span class="keywordtype">int</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>, <span class="keyword">struct</span> <a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap, <span class="keyword">struct</span> <a class="code" href="../../d9/dc0/structoutgoing__helper.html">outgoing_helper</a> *oh, <span class="keywordtype">int</span> *outstate)</div><div class="line"><a name="l05989"></a><span class="lineno"> 5989</span>&#160;{</div><div class="line"><a name="l05990"></a><span class="lineno"> 5990</span>&#160;   <span class="keywordtype">char</span> tmpchan[256];</div><div class="line"><a name="l05991"></a><span class="lineno"> 5991</span>&#160;   <span class="keywordtype">char</span> forwarder[<a class="code" href="../../d5/d7b/channel_8h.html#ab57c278099ea5f8d7cedbb41eba58b56">AST_CHANNEL_NAME</a>];</div><div class="line"><a name="l05992"></a><span class="lineno"> 5992</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *new_chan = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05993"></a><span class="lineno"> 5993</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>, *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l05994"></a><span class="lineno"> 5994</span>&#160;   <span class="keywordtype">int</span> cause = 0;</div><div class="line"><a name="l05995"></a><span class="lineno"> 5995</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l05996"></a><span class="lineno"> 5996</span>&#160;</div><div class="line"><a name="l05997"></a><span class="lineno"> 5997</span>&#160;   <span class="comment">/* gather data and request the new forward channel */</span></div><div class="line"><a name="l05998"></a><span class="lineno"> 5998</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(tmpchan, <a class="code" href="../../d5/d7b/channel_8h.html#af2f955678d93e76be4776d66154b5fdc">ast_channel_call_forward</a>(orig), <span class="keyword">sizeof</span>(tmpchan));</div><div class="line"><a name="l05999"></a><span class="lineno"> 5999</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(forwarder, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(orig), <span class="keyword">sizeof</span>(forwarder));</div><div class="line"><a name="l06000"></a><span class="lineno"> 6000</span>&#160;   <span class="keywordflow">if</span> ((data = strchr(tmpchan, <span class="charliteral">&#39;/&#39;</span>))) {</div><div class="line"><a name="l06001"></a><span class="lineno"> 6001</span>&#160;      *data++ = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l06002"></a><span class="lineno"> 6002</span>&#160;      type = tmpchan;</div><div class="line"><a name="l06003"></a><span class="lineno"> 6003</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06004"></a><span class="lineno"> 6004</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *forward_context;</div><div class="line"><a name="l06005"></a><span class="lineno"> 6005</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(orig);</div><div class="line"><a name="l06006"></a><span class="lineno"> 6006</span>&#160;      forward_context = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(orig, <span class="stringliteral">&quot;FORWARD_CONTEXT&quot;</span>);</div><div class="line"><a name="l06007"></a><span class="lineno"> 6007</span>&#160;      snprintf(tmpchan, <span class="keyword">sizeof</span>(tmpchan), <span class="stringliteral">&quot;%s@%s&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#af2f955678d93e76be4776d66154b5fdc">ast_channel_call_forward</a>(orig), <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(forward_context, <a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(orig)));</div><div class="line"><a name="l06008"></a><span class="lineno"> 6008</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(orig);</div><div class="line"><a name="l06009"></a><span class="lineno"> 6009</span>&#160;      data = tmpchan;</div><div class="line"><a name="l06010"></a><span class="lineno"> 6010</span>&#160;      type = <span class="stringliteral">&quot;Local&quot;</span>;</div><div class="line"><a name="l06011"></a><span class="lineno"> 6011</span>&#160;   }</div><div class="line"><a name="l06012"></a><span class="lineno"> 6012</span>&#160;   <span class="keywordflow">if</span> (!(new_chan = <a class="code" href="../../d4/d28/channel_8c.html#a39fc055500e09810d0afd0bff87407c5">ast_request</a>(type, cap, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, orig, data, &amp;cause))) {</div><div class="line"><a name="l06013"></a><span class="lineno"> 6013</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Unable to create channel for call forward to &#39;%s/%s&#39; (cause = %d)\n&quot;</span>, type, data, cause);</div><div class="line"><a name="l06014"></a><span class="lineno"> 6014</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a1d6e6458df4bfcb132a6934bafdb7fcc">handle_cause</a>(cause, outstate);</div><div class="line"><a name="l06015"></a><span class="lineno"> 6015</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(orig);</div><div class="line"><a name="l06016"></a><span class="lineno"> 6016</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06017"></a><span class="lineno"> 6017</span>&#160;   }</div><div class="line"><a name="l06018"></a><span class="lineno"> 6018</span>&#160;</div><div class="line"><a name="l06019"></a><span class="lineno"> 6019</span>&#160;   <span class="comment">/* Copy/inherit important information into new channel */</span></div><div class="line"><a name="l06020"></a><span class="lineno"> 6020</span>&#160;   <span class="keywordflow">if</span> (oh) {</div><div class="line"><a name="l06021"></a><span class="lineno"> 6021</span>&#160;      <span class="keywordflow">if</span> (oh-&gt;<a class="code" href="../../d9/dc0/structoutgoing__helper.html#a134fe67053d035e763d6cf99916c1bf8">vars</a>) {</div><div class="line"><a name="l06022"></a><span class="lineno"> 6022</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(new_chan);</div><div class="line"><a name="l06023"></a><span class="lineno"> 6023</span>&#160;         <a class="code" href="../../d4/d28/channel_8c.html#a5b14bfe21364dd8f73d45f15cf313524">ast_set_variables</a>(new_chan, oh-&gt;<a class="code" href="../../d9/dc0/structoutgoing__helper.html#a134fe67053d035e763d6cf99916c1bf8">vars</a>);</div><div class="line"><a name="l06024"></a><span class="lineno"> 6024</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(new_chan);</div><div class="line"><a name="l06025"></a><span class="lineno"> 6025</span>&#160;      }</div><div class="line"><a name="l06026"></a><span class="lineno"> 6026</span>&#160;      <span class="keywordflow">if</span> (oh-&gt;<a class="code" href="../../d9/dc0/structoutgoing__helper.html#aa4cddc3382d2056a04f09429ea360703">parent_channel</a>) {</div><div class="line"><a name="l06027"></a><span class="lineno"> 6027</span>&#160;         <a class="code" href="../../d4/d28/channel_8c.html#a99a7ed1b6a0711bbc0810d15505620f3">call_forward_inherit</a>(new_chan, oh-&gt;<a class="code" href="../../d9/dc0/structoutgoing__helper.html#aa4cddc3382d2056a04f09429ea360703">parent_channel</a>, orig);</div><div class="line"><a name="l06028"></a><span class="lineno"> 6028</span>&#160;      }</div><div class="line"><a name="l06029"></a><span class="lineno"> 6029</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(oh-&gt;<a class="code" href="../../d9/dc0/structoutgoing__helper.html#a54735dbbeb30eacadc7e823d15cf03c6">account</a>)) {</div><div class="line"><a name="l06030"></a><span class="lineno"> 6030</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(new_chan);</div><div class="line"><a name="l06031"></a><span class="lineno"> 6031</span>&#160;         <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf195fcf1686408b5e52ad76996653cea">ast_channel_stage_snapshot</a>(new_chan);</div><div class="line"><a name="l06032"></a><span class="lineno"> 6032</span>&#160;         ast_channel_accountcode_set(new_chan, oh-&gt;<a class="code" href="../../d9/dc0/structoutgoing__helper.html#a54735dbbeb30eacadc7e823d15cf03c6">account</a>);</div><div class="line"><a name="l06033"></a><span class="lineno"> 6033</span>&#160;         ast_channel_peeraccount_set(new_chan, oh-&gt;<a class="code" href="../../d9/dc0/structoutgoing__helper.html#a54735dbbeb30eacadc7e823d15cf03c6">account</a>);</div><div class="line"><a name="l06034"></a><span class="lineno"> 6034</span>&#160;         <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga920b9d3e484257c7e593452a8e36d8d4">ast_channel_stage_snapshot_done</a>(new_chan);</div><div class="line"><a name="l06035"></a><span class="lineno"> 6035</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(new_chan);</div><div class="line"><a name="l06036"></a><span class="lineno"> 6036</span>&#160;      }</div><div class="line"><a name="l06037"></a><span class="lineno"> 6037</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (caller) { <span class="comment">/* no outgoing helper so use caller if available */</span></div><div class="line"><a name="l06038"></a><span class="lineno"> 6038</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a99a7ed1b6a0711bbc0810d15505620f3">call_forward_inherit</a>(new_chan, caller, orig);</div><div class="line"><a name="l06039"></a><span class="lineno"> 6039</span>&#160;   }</div><div class="line"><a name="l06040"></a><span class="lineno"> 6040</span>&#160;</div><div class="line"><a name="l06041"></a><span class="lineno"> 6041</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a695e5b4fcf983db6451b583fbd647424">ast_channel_lock_both</a>(orig, new_chan);</div><div class="line"><a name="l06042"></a><span class="lineno"> 6042</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#aa9d8ea64f1c03ccc844f630bb59b9466">ast_channel_set_flag</a>(new_chan, <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ae9c1c04502304018b62d1e5383ccacb3">AST_FLAG_ORIGINATED</a>);</div><div class="line"><a name="l06043"></a><span class="lineno"> 6043</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(new_chan, <span class="stringliteral">&quot;FORWARDERNAME&quot;</span>, forwarder);</div><div class="line"><a name="l06044"></a><span class="lineno"> 6044</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a5d3c15fe1dffda82e6dc03ca7b26526a">ast_party_connected_line_copy</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(new_chan), <a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(orig));</div><div class="line"><a name="l06045"></a><span class="lineno"> 6045</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#af6f0b2102f29f86914e10a7787f0d536">ast_party_redirecting_copy</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(new_chan), <a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(orig));</div><div class="line"><a name="l06046"></a><span class="lineno"> 6046</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a6f3f42365ac84d888b55e35e1309f067">ast_channel_req_accountcodes</a>(new_chan, orig, <a class="code" href="../../d5/d7b/channel_8h.html#a31a465197a7766c3d0bb9f65f0a4418fac3861dd1a26771778606b7aacdfb4048">AST_CHANNEL_REQUESTOR_REPLACEMENT</a>);</div><div class="line"><a name="l06047"></a><span class="lineno"> 6047</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(new_chan);</div><div class="line"><a name="l06048"></a><span class="lineno"> 6048</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(orig);</div><div class="line"><a name="l06049"></a><span class="lineno"> 6049</span>&#160;</div><div class="line"><a name="l06050"></a><span class="lineno"> 6050</span>&#160;   <span class="comment">/* call new channel */</span></div><div class="line"><a name="l06051"></a><span class="lineno"> 6051</span>&#160;   res = <a class="code" href="../../d4/d28/channel_8c.html#a1b732eb4ed203140b1a3aae9e7dec2c1">ast_call</a>(new_chan, data, 0);</div><div class="line"><a name="l06052"></a><span class="lineno"> 6052</span>&#160;   <span class="keywordflow">if</span> (timeout) {</div><div class="line"><a name="l06053"></a><span class="lineno"> 6053</span>&#160;      *timeout = res;</div><div class="line"><a name="l06054"></a><span class="lineno"> 6054</span>&#160;   }</div><div class="line"><a name="l06055"></a><span class="lineno"> 6055</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l06056"></a><span class="lineno"> 6056</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Unable to call forward to channel %s/%s\n&quot;</span>, type, (<span class="keywordtype">char</span> *)data);</div><div class="line"><a name="l06057"></a><span class="lineno"> 6057</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(orig);</div><div class="line"><a name="l06058"></a><span class="lineno"> 6058</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(new_chan);</div><div class="line"><a name="l06059"></a><span class="lineno"> 6059</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06060"></a><span class="lineno"> 6060</span>&#160;   }</div><div class="line"><a name="l06061"></a><span class="lineno"> 6061</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(orig);</div><div class="line"><a name="l06062"></a><span class="lineno"> 6062</span>&#160;</div><div class="line"><a name="l06063"></a><span class="lineno"> 6063</span>&#160;   <span class="keywordflow">return</span> new_chan;</div><div class="line"><a name="l06064"></a><span class="lineno"> 6064</span>&#160;}</div><div class="line"><a name="l06065"></a><span class="lineno"> 6065</span>&#160;</div><div class="line"><a name="l06066"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a6f075826bf02742269bf7484e4ef481d"> 6066</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d4/d28/channel_8c.html#a6f075826bf02742269bf7484e4ef481d">__ast_request_and_dial</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <span class="keyword">struct</span> <a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a> *assignedids, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *requestor, <span class="keyword">const</span> <span class="keywordtype">char</span> *addr, <span class="keywordtype">int</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>, <span class="keywordtype">int</span> *outstate, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ade5a89f9bee15a492c760ec1765a292d">cid_name</a>, <span class="keyword">struct</span> <a class="code" href="../../d9/dc0/structoutgoing__helper.html">outgoing_helper</a> *oh)</div><div class="line"><a name="l06067"></a><span class="lineno"> 6067</span>&#160;{</div><div class="line"><a name="l06068"></a><span class="lineno"> 6068</span>&#160;   <span class="keywordtype">int</span> dummy_outstate;</div><div class="line"><a name="l06069"></a><span class="lineno"> 6069</span>&#160;   <span class="keywordtype">int</span> cause = 0;</div><div class="line"><a name="l06070"></a><span class="lineno"> 6070</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>;</div><div class="line"><a name="l06071"></a><span class="lineno"> 6071</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l06072"></a><span class="lineno"> 6072</span>&#160;   <span class="keywordtype">int</span> last_subclass = 0;</div><div class="line"><a name="l06073"></a><span class="lineno"> 6073</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> connected;</div><div class="line"><a name="l06074"></a><span class="lineno"> 6074</span>&#160;</div><div class="line"><a name="l06075"></a><span class="lineno"> 6075</span>&#160;   <span class="keywordflow">if</span> (outstate)</div><div class="line"><a name="l06076"></a><span class="lineno"> 6076</span>&#160;      *outstate = 0;</div><div class="line"><a name="l06077"></a><span class="lineno"> 6077</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l06078"></a><span class="lineno"> 6078</span>&#160;      outstate = &amp;dummy_outstate;   <span class="comment">/* make outstate always a valid pointer */</span></div><div class="line"><a name="l06079"></a><span class="lineno"> 6079</span>&#160;</div><div class="line"><a name="l06080"></a><span class="lineno"> 6080</span>&#160;   chan = <a class="code" href="../../d4/d28/channel_8c.html#a39fc055500e09810d0afd0bff87407c5">ast_request</a>(type, cap, assignedids, requestor, addr, &amp;cause);</div><div class="line"><a name="l06081"></a><span class="lineno"> 6081</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l06082"></a><span class="lineno"> 6082</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Unable to request channel %s/%s\n&quot;</span>, type, addr);</div><div class="line"><a name="l06083"></a><span class="lineno"> 6083</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a1d6e6458df4bfcb132a6934bafdb7fcc">handle_cause</a>(cause, outstate);</div><div class="line"><a name="l06084"></a><span class="lineno"> 6084</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06085"></a><span class="lineno"> 6085</span>&#160;   }</div><div class="line"><a name="l06086"></a><span class="lineno"> 6086</span>&#160;</div><div class="line"><a name="l06087"></a><span class="lineno"> 6087</span>&#160;   <span class="keywordflow">if</span> (oh) {</div><div class="line"><a name="l06088"></a><span class="lineno"> 6088</span>&#160;      <span class="keywordflow">if</span> (oh-&gt;<a class="code" href="../../d9/dc0/structoutgoing__helper.html#a134fe67053d035e763d6cf99916c1bf8">vars</a>) {</div><div class="line"><a name="l06089"></a><span class="lineno"> 6089</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l06090"></a><span class="lineno"> 6090</span>&#160;         <a class="code" href="../../d4/d28/channel_8c.html#a5b14bfe21364dd8f73d45f15cf313524">ast_set_variables</a>(chan, oh-&gt;<a class="code" href="../../d9/dc0/structoutgoing__helper.html#a134fe67053d035e763d6cf99916c1bf8">vars</a>);</div><div class="line"><a name="l06091"></a><span class="lineno"> 6091</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l06092"></a><span class="lineno"> 6092</span>&#160;      }</div><div class="line"><a name="l06093"></a><span class="lineno"> 6093</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(oh-&gt;<a class="code" href="../../d9/dc0/structoutgoing__helper.html#a1032774a59971af0f3555668407e7ec7">cid_num</a>) &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(oh-&gt;<a class="code" href="../../d9/dc0/structoutgoing__helper.html#a556b8c8508e4a08eb0b212664622306c">cid_name</a>)) {</div><div class="line"><a name="l06094"></a><span class="lineno"> 6094</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l06095"></a><span class="lineno"> 6095</span>&#160;<span class="comment">          * Use the oh values instead of the function parameters for the</span></div><div class="line"><a name="l06096"></a><span class="lineno"> 6096</span>&#160;<span class="comment">          * outgoing CallerID.</span></div><div class="line"><a name="l06097"></a><span class="lineno"> 6097</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l06098"></a><span class="lineno"> 6098</span>&#160;         cid_num = oh-&gt;<a class="code" href="../../d9/dc0/structoutgoing__helper.html#a1032774a59971af0f3555668407e7ec7">cid_num</a>;</div><div class="line"><a name="l06099"></a><span class="lineno"> 6099</span>&#160;         cid_name = oh-&gt;<a class="code" href="../../d9/dc0/structoutgoing__helper.html#a556b8c8508e4a08eb0b212664622306c">cid_name</a>;</div><div class="line"><a name="l06100"></a><span class="lineno"> 6100</span>&#160;      }</div><div class="line"><a name="l06101"></a><span class="lineno"> 6101</span>&#160;      <span class="keywordflow">if</span> (oh-&gt;<a class="code" href="../../d9/dc0/structoutgoing__helper.html#aa4cddc3382d2056a04f09429ea360703">parent_channel</a>) {</div><div class="line"><a name="l06102"></a><span class="lineno"> 6102</span>&#160;         <span class="comment">/* Safely inherit variables and datastores from the parent channel. */</span></div><div class="line"><a name="l06103"></a><span class="lineno"> 6103</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a695e5b4fcf983db6451b583fbd647424">ast_channel_lock_both</a>(oh-&gt;<a class="code" href="../../d9/dc0/structoutgoing__helper.html#aa4cddc3382d2056a04f09429ea360703">parent_channel</a>, chan);</div><div class="line"><a name="l06104"></a><span class="lineno"> 6104</span>&#160;         <a class="code" href="../../d4/d28/channel_8c.html#a892b6550a4f90b70ad92198c9d05cedc">ast_channel_inherit_variables</a>(oh-&gt;<a class="code" href="../../d9/dc0/structoutgoing__helper.html#aa4cddc3382d2056a04f09429ea360703">parent_channel</a>, chan);</div><div class="line"><a name="l06105"></a><span class="lineno"> 6105</span>&#160;         <a class="code" href="../../d4/d28/channel_8c.html#a6ce892974f59537bda03a71319b452e2">ast_channel_datastore_inherit</a>(oh-&gt;<a class="code" href="../../d9/dc0/structoutgoing__helper.html#aa4cddc3382d2056a04f09429ea360703">parent_channel</a>, chan);</div><div class="line"><a name="l06106"></a><span class="lineno"> 6106</span>&#160;         <a class="code" href="../../d3/d93/max__forwards_8h.html#a63b977e0cb5f350171fed9dffd4fabe5">ast_max_forwards_decrement</a>(chan);</div><div class="line"><a name="l06107"></a><span class="lineno"> 6107</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(oh-&gt;<a class="code" href="../../d9/dc0/structoutgoing__helper.html#aa4cddc3382d2056a04f09429ea360703">parent_channel</a>);</div><div class="line"><a name="l06108"></a><span class="lineno"> 6108</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l06109"></a><span class="lineno"> 6109</span>&#160;      }</div><div class="line"><a name="l06110"></a><span class="lineno"> 6110</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(oh-&gt;<a class="code" href="../../d9/dc0/structoutgoing__helper.html#a54735dbbeb30eacadc7e823d15cf03c6">account</a>)) {</div><div class="line"><a name="l06111"></a><span class="lineno"> 6111</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l06112"></a><span class="lineno"> 6112</span>&#160;         <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf195fcf1686408b5e52ad76996653cea">ast_channel_stage_snapshot</a>(chan);</div><div class="line"><a name="l06113"></a><span class="lineno"> 6113</span>&#160;         ast_channel_accountcode_set(chan, oh-&gt;<a class="code" href="../../d9/dc0/structoutgoing__helper.html#a54735dbbeb30eacadc7e823d15cf03c6">account</a>);</div><div class="line"><a name="l06114"></a><span class="lineno"> 6114</span>&#160;         ast_channel_peeraccount_set(chan, oh-&gt;<a class="code" href="../../d9/dc0/structoutgoing__helper.html#a54735dbbeb30eacadc7e823d15cf03c6">account</a>);</div><div class="line"><a name="l06115"></a><span class="lineno"> 6115</span>&#160;         <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga920b9d3e484257c7e593452a8e36d8d4">ast_channel_stage_snapshot_done</a>(chan);</div><div class="line"><a name="l06116"></a><span class="lineno"> 6116</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l06117"></a><span class="lineno"> 6117</span>&#160;      }</div><div class="line"><a name="l06118"></a><span class="lineno"> 6118</span>&#160;   }</div><div class="line"><a name="l06119"></a><span class="lineno"> 6119</span>&#160;</div><div class="line"><a name="l06120"></a><span class="lineno"> 6120</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l06121"></a><span class="lineno"> 6121</span>&#160;<span class="comment">    * I seems strange to set the CallerID on an outgoing call leg</span></div><div class="line"><a name="l06122"></a><span class="lineno"> 6122</span>&#160;<span class="comment">    * to whom we are calling, but this function&#39;s callers are doing</span></div><div class="line"><a name="l06123"></a><span class="lineno"> 6123</span>&#160;<span class="comment">    * various Originate methods.  This call leg goes to the local</span></div><div class="line"><a name="l06124"></a><span class="lineno"> 6124</span>&#160;<span class="comment">    * user.  Once the local user answers, the dialplan needs to be</span></div><div class="line"><a name="l06125"></a><span class="lineno"> 6125</span>&#160;<span class="comment">    * able to access the CallerID from the CALLERID function as if</span></div><div class="line"><a name="l06126"></a><span class="lineno"> 6126</span>&#160;<span class="comment">    * the local user had placed this call.</span></div><div class="line"><a name="l06127"></a><span class="lineno"> 6127</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l06128"></a><span class="lineno"> 6128</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a88d833a56ea7de33e230281c5c12b75d">ast_set_callerid</a>(chan, cid_num, cid_name, cid_num);</div><div class="line"><a name="l06129"></a><span class="lineno"> 6129</span>&#160;</div><div class="line"><a name="l06130"></a><span class="lineno"> 6130</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l06131"></a><span class="lineno"> 6131</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ae9c1c04502304018b62d1e5383ccacb3">AST_FLAG_ORIGINATED</a>);</div><div class="line"><a name="l06132"></a><span class="lineno"> 6132</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l06133"></a><span class="lineno"> 6133</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#ade95e66d7c53181894de1d3569aee2b8">ast_party_connected_line_set_init</a>(&amp;connected, <a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(chan));</div><div class="line"><a name="l06134"></a><span class="lineno"> 6134</span>&#160;   <span class="keywordflow">if</span> (cid_num) {</div><div class="line"><a name="l06135"></a><span class="lineno"> 6135</span>&#160;      connected.<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = 1;</div><div class="line"><a name="l06136"></a><span class="lineno"> 6136</span>&#160;      connected.<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = (<span class="keywordtype">char</span> *) cid_num;</div><div class="line"><a name="l06137"></a><span class="lineno"> 6137</span>&#160;      connected.<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = <a class="code" href="../../de/d47/callerid_8h.html#af01ad9e215f9e9941b68f1ff1559d409">AST_PRES_ALLOWED_USER_NUMBER_NOT_SCREENED</a>;</div><div class="line"><a name="l06138"></a><span class="lineno"> 6138</span>&#160;   }</div><div class="line"><a name="l06139"></a><span class="lineno"> 6139</span>&#160;   <span class="keywordflow">if</span> (cid_name) {</div><div class="line"><a name="l06140"></a><span class="lineno"> 6140</span>&#160;      connected.<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = 1;</div><div class="line"><a name="l06141"></a><span class="lineno"> 6141</span>&#160;      connected.<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = (<span class="keywordtype">char</span> *) cid_name;</div><div class="line"><a name="l06142"></a><span class="lineno"> 6142</span>&#160;      connected.<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = <a class="code" href="../../de/d47/callerid_8h.html#af01ad9e215f9e9941b68f1ff1559d409">AST_PRES_ALLOWED_USER_NUMBER_NOT_SCREENED</a>;</div><div class="line"><a name="l06143"></a><span class="lineno"> 6143</span>&#160;   }</div><div class="line"><a name="l06144"></a><span class="lineno"> 6144</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a388b1ab04ed52109917914ac73662d0a">ast_channel_set_connected_line</a>(chan, &amp;connected, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l06145"></a><span class="lineno"> 6145</span>&#160;   <span class="keywordflow">if</span> (requestor) {</div><div class="line"><a name="l06146"></a><span class="lineno"> 6146</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a695e5b4fcf983db6451b583fbd647424">ast_channel_lock_both</a>(chan, (<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *) requestor);</div><div class="line"><a name="l06147"></a><span class="lineno"> 6147</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a6f3f42365ac84d888b55e35e1309f067">ast_channel_req_accountcodes</a>(chan, requestor, <a class="code" href="../../d5/d7b/channel_8h.html#a31a465197a7766c3d0bb9f65f0a4418fa0e613bbe5c524be8c225eff98782e3a8">AST_CHANNEL_REQUESTOR_BRIDGE_PEER</a>);</div><div class="line"><a name="l06148"></a><span class="lineno"> 6148</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l06149"></a><span class="lineno"> 6149</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>((<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *) requestor);</div><div class="line"><a name="l06150"></a><span class="lineno"> 6150</span>&#160;   }</div><div class="line"><a name="l06151"></a><span class="lineno"> 6151</span>&#160;</div><div class="line"><a name="l06152"></a><span class="lineno"> 6152</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d28/channel_8c.html#a1b732eb4ed203140b1a3aae9e7dec2c1">ast_call</a>(chan, addr, 0)) {   <span class="comment">/* ast_call failed... */</span></div><div class="line"><a name="l06153"></a><span class="lineno"> 6153</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Unable to call channel %s/%s\n&quot;</span>, type, addr);</div><div class="line"><a name="l06154"></a><span class="lineno"> 6154</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06155"></a><span class="lineno"> 6155</span>&#160;      <span class="keyword">struct </span>timeval start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l06156"></a><span class="lineno"> 6156</span>&#160;      res = 1; <span class="comment">/* mark success in case chan-&gt;_state is already AST_STATE_UP */</span></div><div class="line"><a name="l06157"></a><span class="lineno"> 6157</span>&#160;      <span class="keywordflow">while</span> (timeout &amp;&amp; <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(chan) != <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>) {</div><div class="line"><a name="l06158"></a><span class="lineno"> 6158</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f;</div><div class="line"><a name="l06159"></a><span class="lineno"> 6159</span>&#160;         <span class="keywordtype">int</span> ms = <a class="code" href="../../de/df7/time_8h.html#a904a6933b710e14c7fa2029a0f0cc91a">ast_remaining_ms</a>(start, timeout);</div><div class="line"><a name="l06160"></a><span class="lineno"> 6160</span>&#160;</div><div class="line"><a name="l06161"></a><span class="lineno"> 6161</span>&#160;         res = <a class="code" href="../../d4/d28/channel_8c.html#aed7cba5dd8c6d31600f50d4b3f68d9ca">ast_waitfor</a>(chan, ms);</div><div class="line"><a name="l06162"></a><span class="lineno"> 6162</span>&#160;         <span class="keywordflow">if</span> (res == 0) { <span class="comment">/* timeout, treat it like ringing */</span></div><div class="line"><a name="l06163"></a><span class="lineno"> 6163</span>&#160;            *outstate = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a>;</div><div class="line"><a name="l06164"></a><span class="lineno"> 6164</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l06165"></a><span class="lineno"> 6165</span>&#160;         }</div><div class="line"><a name="l06166"></a><span class="lineno"> 6166</span>&#160;         <span class="keywordflow">if</span> (res &lt; 0) <span class="comment">/* error or done */</span></div><div class="line"><a name="l06167"></a><span class="lineno"> 6167</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l06168"></a><span class="lineno"> 6168</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/d7b/channel_8h.html#af2f955678d93e76be4776d66154b5fdc">ast_channel_call_forward</a>(chan))) {</div><div class="line"><a name="l06169"></a><span class="lineno"> 6169</span>&#160;            <span class="keywordflow">if</span> (!(chan = <a class="code" href="../../d4/d28/channel_8c.html#a0dd78a3af30f7a1bfe9a89e3f806dd8c">ast_call_forward</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, cap, oh, outstate))) {</div><div class="line"><a name="l06170"></a><span class="lineno"> 6170</span>&#160;               <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06171"></a><span class="lineno"> 6171</span>&#160;            }</div><div class="line"><a name="l06172"></a><span class="lineno"> 6172</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l06173"></a><span class="lineno"> 6173</span>&#160;         }</div><div class="line"><a name="l06174"></a><span class="lineno"> 6174</span>&#160;</div><div class="line"><a name="l06175"></a><span class="lineno"> 6175</span>&#160;         f = <a class="code" href="../../d4/d28/channel_8c.html#a7ef6737309dc9e8b6c4a7cb4800638b1">ast_read</a>(chan);</div><div class="line"><a name="l06176"></a><span class="lineno"> 6176</span>&#160;         <span class="keywordflow">if</span> (!f) {</div><div class="line"><a name="l06177"></a><span class="lineno"> 6177</span>&#160;            *outstate = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba">AST_CONTROL_HANGUP</a>;</div><div class="line"><a name="l06178"></a><span class="lineno"> 6178</span>&#160;            res = 0;</div><div class="line"><a name="l06179"></a><span class="lineno"> 6179</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l06180"></a><span class="lineno"> 6180</span>&#160;         }</div><div class="line"><a name="l06181"></a><span class="lineno"> 6181</span>&#160;         <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>) {</div><div class="line"><a name="l06182"></a><span class="lineno"> 6182</span>&#160;            <span class="keywordflow">switch</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>) {</div><div class="line"><a name="l06183"></a><span class="lineno"> 6183</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a>:  <span class="comment">/* record but keep going */</span></div><div class="line"><a name="l06184"></a><span class="lineno"> 6184</span>&#160;               *outstate = f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>;</div><div class="line"><a name="l06185"></a><span class="lineno"> 6185</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l06186"></a><span class="lineno"> 6186</span>&#160;</div><div class="line"><a name="l06187"></a><span class="lineno"> 6187</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875">AST_CONTROL_BUSY</a>:</div><div class="line"><a name="l06188"></a><span class="lineno"> 6188</span>&#160;               *outstate = f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>;</div><div class="line"><a name="l06189"></a><span class="lineno"> 6189</span>&#160;               timeout = 0;</div><div class="line"><a name="l06190"></a><span class="lineno"> 6190</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l06191"></a><span class="lineno"> 6191</span>&#160;</div><div class="line"><a name="l06192"></a><span class="lineno"> 6192</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af3bdb353330f1908e9558180b5bb9e16">AST_CONTROL_INCOMPLETE</a>:</div><div class="line"><a name="l06193"></a><span class="lineno"> 6193</span>&#160;               *outstate = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a850bb06a1702741c93a3fd67cc9637ab">AST_CONTROL_CONGESTION</a>;</div><div class="line"><a name="l06194"></a><span class="lineno"> 6194</span>&#160;               timeout = 0;</div><div class="line"><a name="l06195"></a><span class="lineno"> 6195</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l06196"></a><span class="lineno"> 6196</span>&#160;</div><div class="line"><a name="l06197"></a><span class="lineno"> 6197</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a850bb06a1702741c93a3fd67cc9637ab">AST_CONTROL_CONGESTION</a>:</div><div class="line"><a name="l06198"></a><span class="lineno"> 6198</span>&#160;               *outstate = f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>;</div><div class="line"><a name="l06199"></a><span class="lineno"> 6199</span>&#160;               timeout = 0;</div><div class="line"><a name="l06200"></a><span class="lineno"> 6200</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l06201"></a><span class="lineno"> 6201</span>&#160;</div><div class="line"><a name="l06202"></a><span class="lineno"> 6202</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe">AST_CONTROL_ANSWER</a>:</div><div class="line"><a name="l06203"></a><span class="lineno"> 6203</span>&#160;               *outstate = f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>;</div><div class="line"><a name="l06204"></a><span class="lineno"> 6204</span>&#160;               timeout = 0;      <span class="comment">/* trick to force exit from the while() */</span></div><div class="line"><a name="l06205"></a><span class="lineno"> 6205</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l06206"></a><span class="lineno"> 6206</span>&#160;</div><div class="line"><a name="l06207"></a><span class="lineno"> 6207</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af9665e40f4c9ef6fcfc3e179c6986c41">AST_CONTROL_PVT_CAUSE_CODE</a>:</div><div class="line"><a name="l06208"></a><span class="lineno"> 6208</span>&#160;               <a class="code" href="../../d4/d28/channel_8c.html#aace0c1f41b57a6599775d0f704234eaf">ast_channel_hangupcause_hash_set</a>(chan, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>);</div><div class="line"><a name="l06209"></a><span class="lineno"> 6209</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l06210"></a><span class="lineno"> 6210</span>&#160;</div><div class="line"><a name="l06211"></a><span class="lineno"> 6211</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a1a461c5e737ed6ed7c8cb0f78557a6fd">AST_CONTROL_PROGRESS</a>:</div><div class="line"><a name="l06212"></a><span class="lineno"> 6212</span>&#160;               <span class="keywordflow">if</span> (oh &amp;&amp; oh-&gt;<a class="code" href="../../d9/dc0/structoutgoing__helper.html#a4b69ca27319212bb6fade39a869c83d1">connect_on_early_media</a>) {</div><div class="line"><a name="l06213"></a><span class="lineno"> 6213</span>&#160;                  *outstate = f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>;</div><div class="line"><a name="l06214"></a><span class="lineno"> 6214</span>&#160;                  timeout = 0;      <span class="comment">/* trick to force exit from the while() */</span></div><div class="line"><a name="l06215"></a><span class="lineno"> 6215</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l06216"></a><span class="lineno"> 6216</span>&#160;               }</div><div class="line"><a name="l06217"></a><span class="lineno"> 6217</span>&#160;               <span class="comment">/* Fallthrough */</span></div><div class="line"><a name="l06218"></a><span class="lineno"> 6218</span>&#160;            <span class="comment">/* Ignore these */</span></div><div class="line"><a name="l06219"></a><span class="lineno"> 6219</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a50b7fe33bba67b74dd7b746539e81000">AST_CONTROL_PROCEEDING</a>:</div><div class="line"><a name="l06220"></a><span class="lineno"> 6220</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5">AST_CONTROL_HOLD</a>:</div><div class="line"><a name="l06221"></a><span class="lineno"> 6221</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e">AST_CONTROL_UNHOLD</a>:</div><div class="line"><a name="l06222"></a><span class="lineno"> 6222</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a417bc8ac5817cc1525a3b530abfc1528">AST_CONTROL_VIDUPDATE</a>:</div><div class="line"><a name="l06223"></a><span class="lineno"> 6223</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a>:</div><div class="line"><a name="l06224"></a><span class="lineno"> 6224</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af334ccaa958af9b049d6bfcaa41549b8">AST_CONTROL_SRCCHANGE</a>:</div><div class="line"><a name="l06225"></a><span class="lineno"> 6225</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac976c01c12ae70e36b99b16dbfa3dda7">AST_CONTROL_CONNECTED_LINE</a>:</div><div class="line"><a name="l06226"></a><span class="lineno"> 6226</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a5344deefcbdcca938001314e81ea195a">AST_CONTROL_REDIRECTING</a>:</div><div class="line"><a name="l06227"></a><span class="lineno"> 6227</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9855dee70443fe646113126fdf38e25a">AST_CONTROL_CC</a>:</div><div class="line"><a name="l06228"></a><span class="lineno"> 6228</span>&#160;            <span class="keywordflow">case</span> -1:       <span class="comment">/* Ignore -- just stopping indications */</span></div><div class="line"><a name="l06229"></a><span class="lineno"> 6229</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l06230"></a><span class="lineno"> 6230</span>&#160;</div><div class="line"><a name="l06231"></a><span class="lineno"> 6231</span>&#160;            <span class="keywordflow">default</span>:</div><div class="line"><a name="l06232"></a><span class="lineno"> 6232</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Don&#39;t know what to do with control frame %d\n&quot;</span>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>);</div><div class="line"><a name="l06233"></a><span class="lineno"> 6233</span>&#160;            }</div><div class="line"><a name="l06234"></a><span class="lineno"> 6234</span>&#160;            last_subclass = f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>;</div><div class="line"><a name="l06235"></a><span class="lineno"> 6235</span>&#160;         }</div><div class="line"><a name="l06236"></a><span class="lineno"> 6236</span>&#160;         <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l06237"></a><span class="lineno"> 6237</span>&#160;      }</div><div class="line"><a name="l06238"></a><span class="lineno"> 6238</span>&#160;   }</div><div class="line"><a name="l06239"></a><span class="lineno"> 6239</span>&#160;</div><div class="line"><a name="l06240"></a><span class="lineno"> 6240</span>&#160;   <span class="comment">/* Final fixups */</span></div><div class="line"><a name="l06241"></a><span class="lineno"> 6241</span>&#160;   <span class="keywordflow">if</span> (oh) {</div><div class="line"><a name="l06242"></a><span class="lineno"> 6242</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(oh-&gt;<a class="code" href="../../d9/dc0/structoutgoing__helper.html#a94f090d1fb5c71712726fcdf025b9ace">context</a>))</div><div class="line"><a name="l06243"></a><span class="lineno"> 6243</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#aca211972dac7b8f3f08a283bfe0aa8bf">ast_channel_context_set</a>(chan, oh-&gt;<a class="code" href="../../d9/dc0/structoutgoing__helper.html#a94f090d1fb5c71712726fcdf025b9ace">context</a>);</div><div class="line"><a name="l06244"></a><span class="lineno"> 6244</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(oh-&gt;<a class="code" href="../../d9/dc0/structoutgoing__helper.html#a762fadb5a38f004f5f4adf71176448e9">exten</a>))</div><div class="line"><a name="l06245"></a><span class="lineno"> 6245</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a>(chan, oh-&gt;<a class="code" href="../../d9/dc0/structoutgoing__helper.html#a762fadb5a38f004f5f4adf71176448e9">exten</a>);</div><div class="line"><a name="l06246"></a><span class="lineno"> 6246</span>&#160;      <span class="keywordflow">if</span> (oh-&gt;<a class="code" href="../../d9/dc0/structoutgoing__helper.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a>)</div><div class="line"><a name="l06247"></a><span class="lineno"> 6247</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ae56cab679c0cda6436b930bc74297895">ast_channel_priority_set</a>(chan, oh-&gt;<a class="code" href="../../d9/dc0/structoutgoing__helper.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a>);</div><div class="line"><a name="l06248"></a><span class="lineno"> 6248</span>&#160;   }</div><div class="line"><a name="l06249"></a><span class="lineno"> 6249</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(chan) == <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>)</div><div class="line"><a name="l06250"></a><span class="lineno"> 6250</span>&#160;      *outstate = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe">AST_CONTROL_ANSWER</a>;</div><div class="line"><a name="l06251"></a><span class="lineno"> 6251</span>&#160;</div><div class="line"><a name="l06252"></a><span class="lineno"> 6252</span>&#160;   <span class="keywordflow">if</span> (res &lt;= 0) {</div><div class="line"><a name="l06253"></a><span class="lineno"> 6253</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l06254"></a><span class="lineno"> 6254</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a> == last_subclass) {</div><div class="line"><a name="l06255"></a><span class="lineno"> 6255</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ae6b4b7ba458e88fdbb2df9f39d935337">ast_channel_hangupcause_set</a>(chan, <a class="code" href="../../d4/da3/causes_8h.html#af03fc9fe2f0ecc69330e014aff8d0f73">AST_CAUSE_NO_ANSWER</a>);</div><div class="line"><a name="l06256"></a><span class="lineno"> 6256</span>&#160;      }</div><div class="line"><a name="l06257"></a><span class="lineno"> 6257</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l06258"></a><span class="lineno"> 6258</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(chan);</div><div class="line"><a name="l06259"></a><span class="lineno"> 6259</span>&#160;      chan = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06260"></a><span class="lineno"> 6260</span>&#160;   }</div><div class="line"><a name="l06261"></a><span class="lineno"> 6261</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>;</div><div class="line"><a name="l06262"></a><span class="lineno"> 6262</span>&#160;}</div><div class="line"><a name="l06263"></a><span class="lineno"> 6263</span>&#160;</div><div class="line"><a name="l06264"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#afe51cdc5487699d03bd8bdf03f097ae0"> 6264</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d4/d28/channel_8c.html#afe51cdc5487699d03bd8bdf03f097ae0">ast_request_and_dial</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <span class="keyword">struct</span> <a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a> *assignedids, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *requestor, <span class="keyword">const</span> <span class="keywordtype">char</span> *addr, <span class="keywordtype">int</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>, <span class="keywordtype">int</span> *outstate, <span class="keyword">const</span> <span class="keywordtype">char</span> *cidnum, <span class="keyword">const</span> <span class="keywordtype">char</span> *cidname)</div><div class="line"><a name="l06265"></a><span class="lineno"> 6265</span>&#160;{</div><div class="line"><a name="l06266"></a><span class="lineno"> 6266</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a6f075826bf02742269bf7484e4ef481d">__ast_request_and_dial</a>(type, cap, assignedids, requestor, addr, timeout, outstate, cidnum, cidname, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l06267"></a><span class="lineno"> 6267</span>&#160;}</div><div class="line"><a name="l06268"></a><span class="lineno"> 6268</span>&#160;</div><div class="line"><a name="l06269"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a33c67949956a67dc911ddca7acc4158e"> 6269</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a33c67949956a67dc911ddca7acc4158e">set_security_requirements</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *requestor, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a>)</div><div class="line"><a name="l06270"></a><span class="lineno"> 6270</span>&#160;{</div><div class="line"><a name="l06271"></a><span class="lineno"> 6271</span>&#160;   <span class="keywordtype">int</span> ops[2][2] = {</div><div class="line"><a name="l06272"></a><span class="lineno"> 6272</span>&#160;      {<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ad712464e42606f08900cf2057a10ba08">AST_OPTION_SECURE_SIGNALING</a>, 0},</div><div class="line"><a name="l06273"></a><span class="lineno"> 6273</span>&#160;      {<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aacda7851474c2c67e1a959b2d82d672f">AST_OPTION_SECURE_MEDIA</a>, 0},</div><div class="line"><a name="l06274"></a><span class="lineno"> 6274</span>&#160;   };</div><div class="line"><a name="l06275"></a><span class="lineno"> 6275</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l06276"></a><span class="lineno"> 6276</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *r = (<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *) requestor; <span class="comment">/* UGLY */</span></div><div class="line"><a name="l06277"></a><span class="lineno"> 6277</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *ds;</div><div class="line"><a name="l06278"></a><span class="lineno"> 6278</span>&#160;</div><div class="line"><a name="l06279"></a><span class="lineno"> 6279</span>&#160;   <span class="keywordflow">if</span> (!requestor || !out) {</div><div class="line"><a name="l06280"></a><span class="lineno"> 6280</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06281"></a><span class="lineno"> 6281</span>&#160;   }</div><div class="line"><a name="l06282"></a><span class="lineno"> 6282</span>&#160;</div><div class="line"><a name="l06283"></a><span class="lineno"> 6283</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(r);</div><div class="line"><a name="l06284"></a><span class="lineno"> 6284</span>&#160;   <span class="keywordflow">if</span> ((ds = <a class="code" href="../../d4/d28/channel_8c.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a>(r, &amp;<a class="code" href="../../d2/dc3/global__datastores_8h.html#af4da5160f63d90557d809a967409af24">secure_call_info</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l06285"></a><span class="lineno"> 6285</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/d2a/structast__secure__call__store.html">ast_secure_call_store</a> *encrypt = ds-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l06286"></a><span class="lineno"> 6286</span>&#160;      ops[0][1] = encrypt-&gt;<a class="code" href="../../dd/d2a/structast__secure__call__store.html#a50b104e0500301624bc5d0bc44d5fd5d">signaling</a>;</div><div class="line"><a name="l06287"></a><span class="lineno"> 6287</span>&#160;      ops[1][1] = encrypt-&gt;<a class="code" href="../../dd/d2a/structast__secure__call__store.html#ac5b7f0f9a2b172ba668e03fb737038e5">media</a>;</div><div class="line"><a name="l06288"></a><span class="lineno"> 6288</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06289"></a><span class="lineno"> 6289</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(r);</div><div class="line"><a name="l06290"></a><span class="lineno"> 6290</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06291"></a><span class="lineno"> 6291</span>&#160;   }</div><div class="line"><a name="l06292"></a><span class="lineno"> 6292</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(r);</div><div class="line"><a name="l06293"></a><span class="lineno"> 6293</span>&#160;</div><div class="line"><a name="l06294"></a><span class="lineno"> 6294</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; 2; i++) {</div><div class="line"><a name="l06295"></a><span class="lineno"> 6295</span>&#160;      <span class="keywordflow">if</span> (ops[i][1]) {</div><div class="line"><a name="l06296"></a><span class="lineno"> 6296</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d4/d28/channel_8c.html#a51d19fd5d03e845c18b7826c9f74a3ae">ast_channel_setoption</a>(out, ops[i][0], &amp;ops[i][1], <span class="keyword">sizeof</span>(ops[i][1]), 0)) {</div><div class="line"><a name="l06297"></a><span class="lineno"> 6297</span>&#160;            <span class="comment">/* We require a security feature, but the channel won&#39;t provide it */</span></div><div class="line"><a name="l06298"></a><span class="lineno"> 6298</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06299"></a><span class="lineno"> 6299</span>&#160;         }</div><div class="line"><a name="l06300"></a><span class="lineno"> 6300</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06301"></a><span class="lineno"> 6301</span>&#160;         <span class="comment">/* We don&#39;t care if we can&#39;t clear the option on a channel that doesn&#39;t support it */</span></div><div class="line"><a name="l06302"></a><span class="lineno"> 6302</span>&#160;         <a class="code" href="../../d4/d28/channel_8c.html#a51d19fd5d03e845c18b7826c9f74a3ae">ast_channel_setoption</a>(out, ops[i][0], &amp;ops[i][1], <span class="keyword">sizeof</span>(ops[i][1]), 0);</div><div class="line"><a name="l06303"></a><span class="lineno"> 6303</span>&#160;      }</div><div class="line"><a name="l06304"></a><span class="lineno"> 6304</span>&#160;   }</div><div class="line"><a name="l06305"></a><span class="lineno"> 6305</span>&#160;</div><div class="line"><a name="l06306"></a><span class="lineno"> 6306</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06307"></a><span class="lineno"> 6307</span>&#160;}</div><div class="line"><a name="l06308"></a><span class="lineno"> 6308</span>&#160;</div><div class="line"><a name="l06309"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aced094e288cd6edb779e1794afc57946"> 6309</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d4/d28/channel_8c.html#aced094e288cd6edb779e1794afc57946">request_channel</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <span class="keyword">struct</span> <a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *request_cap, <span class="keyword">struct</span> <a class="code" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology,</div><div class="line"><a name="l06310"></a><span class="lineno"> 6310</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a> *assignedids, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *requestor, <span class="keyword">const</span> <span class="keywordtype">char</span> *addr, <span class="keywordtype">int</span> *cause)</div><div class="line"><a name="l06311"></a><span class="lineno"> 6311</span>&#160;{</div><div class="line"><a name="l06312"></a><span class="lineno"> 6312</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d6f/structchanlist.html">chanlist</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>;</div><div class="line"><a name="l06313"></a><span class="lineno"> 6313</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *c = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06314"></a><span class="lineno"> 6314</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l06315"></a><span class="lineno"> 6315</span>&#160;   <span class="keywordtype">int</span> foo;</div><div class="line"><a name="l06316"></a><span class="lineno"> 6316</span>&#160;</div><div class="line"><a name="l06317"></a><span class="lineno"> 6317</span>&#160;   <span class="keywordflow">if</span> (!cause)</div><div class="line"><a name="l06318"></a><span class="lineno"> 6318</span>&#160;      cause = &amp;foo;</div><div class="line"><a name="l06319"></a><span class="lineno"> 6319</span>&#160;   *cause = <a class="code" href="../../d4/da3/causes_8h.html#a9462c5c03560a909199202e6e2dbad3f">AST_CAUSE_NOTDEFINED</a>;</div><div class="line"><a name="l06320"></a><span class="lineno"> 6320</span>&#160;</div><div class="line"><a name="l06321"></a><span class="lineno"> 6321</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d3/da8/structbackends.html">backends</a>)) {</div><div class="line"><a name="l06322"></a><span class="lineno"> 6322</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to lock technology backend list\n&quot;</span>);</div><div class="line"><a name="l06323"></a><span class="lineno"> 6323</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06324"></a><span class="lineno"> 6324</span>&#160;   }</div><div class="line"><a name="l06325"></a><span class="lineno"> 6325</span>&#160;</div><div class="line"><a name="l06326"></a><span class="lineno"> 6326</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d3/da8/structbackends.html">backends</a>, chan, <a class="code" href="../../dd/d6f/structchanlist.html#aa6880648b159c5b2441129417c94048d">list</a>) {</div><div class="line"><a name="l06327"></a><span class="lineno"> 6327</span>&#160;      <span class="keywordflow">if</span> (strcasecmp(type, chan-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;type)) {</div><div class="line"><a name="l06328"></a><span class="lineno"> 6328</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l06329"></a><span class="lineno"> 6329</span>&#160;      }</div><div class="line"><a name="l06330"></a><span class="lineno"> 6330</span>&#160;</div><div class="line"><a name="l06331"></a><span class="lineno"> 6331</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l06332"></a><span class="lineno"> 6332</span>&#160;   }</div><div class="line"><a name="l06333"></a><span class="lineno"> 6333</span>&#160;</div><div class="line"><a name="l06334"></a><span class="lineno"> 6334</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d3/da8/structbackends.html">backends</a>);</div><div class="line"><a name="l06335"></a><span class="lineno"> 6335</span>&#160;</div><div class="line"><a name="l06336"></a><span class="lineno"> 6336</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l06337"></a><span class="lineno"> 6337</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No channel type registered for &#39;%s&#39;\n&quot;</span>, type);</div><div class="line"><a name="l06338"></a><span class="lineno"> 6338</span>&#160;      *cause = <a class="code" href="../../d4/da3/causes_8h.html#abad444ced4d61293c95114d7104d204c">AST_CAUSE_NOSUCHDRIVER</a>;</div><div class="line"><a name="l06339"></a><span class="lineno"> 6339</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06340"></a><span class="lineno"> 6340</span>&#160;   }</div><div class="line"><a name="l06341"></a><span class="lineno"> 6341</span>&#160;</div><div class="line"><a name="l06342"></a><span class="lineno"> 6342</span>&#160;   <span class="comment">/* Allow either format capabilities or stream topology to be provided and adapt */</span></div><div class="line"><a name="l06343"></a><span class="lineno"> 6343</span>&#160;   <span class="keywordflow">if</span> (chan-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;requester_with_stream_topology) {</div><div class="line"><a name="l06344"></a><span class="lineno"> 6344</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *tmp_converted_topology = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06345"></a><span class="lineno"> 6345</span>&#160;</div><div class="line"><a name="l06346"></a><span class="lineno"> 6346</span>&#160;      <span class="keywordflow">if</span> (!topology &amp;&amp; request_cap) {</div><div class="line"><a name="l06347"></a><span class="lineno"> 6347</span>&#160;         <span class="comment">/* Turn the requested capabilities into a stream topology */</span></div><div class="line"><a name="l06348"></a><span class="lineno"> 6348</span>&#160;         topology = tmp_converted_topology = <a class="code" href="../../d8/d95/stream_8h.html#ab57b837e53f8ea2335ec9dc00cdc0c0c">ast_stream_topology_create_from_format_cap</a>(request_cap);</div><div class="line"><a name="l06349"></a><span class="lineno"> 6349</span>&#160;      }</div><div class="line"><a name="l06350"></a><span class="lineno"> 6350</span>&#160;</div><div class="line"><a name="l06351"></a><span class="lineno"> 6351</span>&#160;      c = chan-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;requester_with_stream_topology(type, topology, assignedids, requestor, addr, cause);</div><div class="line"><a name="l06352"></a><span class="lineno"> 6352</span>&#160;</div><div class="line"><a name="l06353"></a><span class="lineno"> 6353</span>&#160;      <a class="code" href="../../d8/d95/stream_8h.html#a88eca139ded2d5bbc6cdcf793febc265">ast_stream_topology_free</a>(tmp_converted_topology);</div><div class="line"><a name="l06354"></a><span class="lineno"> 6354</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (chan-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;requester) {</div><div class="line"><a name="l06355"></a><span class="lineno"> 6355</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *tmp_converted_cap = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06356"></a><span class="lineno"> 6356</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *tmp_cap;</div><div class="line"><a name="l06357"></a><span class="lineno"> 6357</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *, tmp_fmt, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l06358"></a><span class="lineno"> 6358</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *, best_audio_fmt, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l06359"></a><span class="lineno"> 6359</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *joint_cap;</div><div class="line"><a name="l06360"></a><span class="lineno"> 6360</span>&#160;</div><div class="line"><a name="l06361"></a><span class="lineno"> 6361</span>&#160;      <span class="keywordflow">if</span> (!request_cap &amp;&amp; topology) {</div><div class="line"><a name="l06362"></a><span class="lineno"> 6362</span>&#160;         <span class="comment">/* Turn the request stream topology into capabilities */</span></div><div class="line"><a name="l06363"></a><span class="lineno"> 6363</span>&#160;         request_cap = tmp_converted_cap = <a class="code" href="../../d8/d95/stream_8h.html#ac027a9684ada5477ddc7f64142b5338d">ast_stream_topology_get_formats</a>(topology);</div><div class="line"><a name="l06364"></a><span class="lineno"> 6364</span>&#160;      }</div><div class="line"><a name="l06365"></a><span class="lineno"> 6365</span>&#160;</div><div class="line"><a name="l06366"></a><span class="lineno"> 6366</span>&#160;      <span class="comment">/* find the best audio format to use */</span></div><div class="line"><a name="l06367"></a><span class="lineno"> 6367</span>&#160;      tmp_cap = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l06368"></a><span class="lineno"> 6368</span>&#160;      <span class="keywordflow">if</span> (!tmp_cap) {</div><div class="line"><a name="l06369"></a><span class="lineno"> 6369</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d3/da8/structbackends.html">backends</a>);</div><div class="line"><a name="l06370"></a><span class="lineno"> 6370</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06371"></a><span class="lineno"> 6371</span>&#160;      }</div><div class="line"><a name="l06372"></a><span class="lineno"> 6372</span>&#160;</div><div class="line"><a name="l06373"></a><span class="lineno"> 6373</span>&#160;      <a class="code" href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a>(tmp_cap, request_cap, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>);</div><div class="line"><a name="l06374"></a><span class="lineno"> 6374</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d3c/format__cap_8h.html#a09809d02373dbc26b136f52cc98f7513">ast_format_cap_empty</a>(tmp_cap)) {</div><div class="line"><a name="l06375"></a><span class="lineno"> 6375</span>&#160;         <span class="comment">/* We have audio - is it possible to connect the various calls to each other?</span></div><div class="line"><a name="l06376"></a><span class="lineno"> 6376</span>&#160;<span class="comment">            (Avoid this check for calls without audio, like text+video calls)</span></div><div class="line"><a name="l06377"></a><span class="lineno"> 6377</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l06378"></a><span class="lineno"> 6378</span>&#160;         res = <a class="code" href="../../db/d39/translate_8h.html#a67f43da0468e888ba70f0d001499e3e7">ast_translator_best_choice</a>(tmp_cap, chan-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;capabilities, &amp;tmp_fmt, &amp;best_audio_fmt);</div><div class="line"><a name="l06379"></a><span class="lineno"> 6379</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(tmp_cap, -1);</div><div class="line"><a name="l06380"></a><span class="lineno"> 6380</span>&#160;         <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l06381"></a><span class="lineno"> 6381</span>&#160;            <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *tech_codecs = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a>);</div><div class="line"><a name="l06382"></a><span class="lineno"> 6382</span>&#160;            <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *request_codecs = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a>);</div><div class="line"><a name="l06383"></a><span class="lineno"> 6383</span>&#160;</div><div class="line"><a name="l06384"></a><span class="lineno"> 6384</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No translator path exists for channel type %s (native %s) to %s\n&quot;</span>, type,</div><div class="line"><a name="l06385"></a><span class="lineno"> 6385</span>&#160;               <a class="code" href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a>(chan-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;capabilities, &amp;tech_codecs),</div><div class="line"><a name="l06386"></a><span class="lineno"> 6386</span>&#160;               <a class="code" href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a>(request_cap, &amp;request_codecs));</div><div class="line"><a name="l06387"></a><span class="lineno"> 6387</span>&#160;            *cause = <a class="code" href="../../d4/da3/causes_8h.html#a208e4fc34932b91fc9e90d9008329e87">AST_CAUSE_BEARERCAPABILITY_NOTAVAIL</a>;</div><div class="line"><a name="l06388"></a><span class="lineno"> 6388</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(tmp_converted_cap);</div><div class="line"><a name="l06389"></a><span class="lineno"> 6389</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06390"></a><span class="lineno"> 6390</span>&#160;         }</div><div class="line"><a name="l06391"></a><span class="lineno"> 6391</span>&#160;      }</div><div class="line"><a name="l06392"></a><span class="lineno"> 6392</span>&#160;</div><div class="line"><a name="l06393"></a><span class="lineno"> 6393</span>&#160;      <span class="comment">/* XXX Only the audio format calculated as being the best for translation</span></div><div class="line"><a name="l06394"></a><span class="lineno"> 6394</span>&#160;<span class="comment">       * purposes is used for the request. This is because we don&#39;t have the ability</span></div><div class="line"><a name="l06395"></a><span class="lineno"> 6395</span>&#160;<span class="comment">       * to signal to the initiator which one of their codecs that was offered is</span></div><div class="line"><a name="l06396"></a><span class="lineno"> 6396</span>&#160;<span class="comment">       * the one that was selected, particularly in a chain of Local channels.</span></div><div class="line"><a name="l06397"></a><span class="lineno"> 6397</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l06398"></a><span class="lineno"> 6398</span>&#160;      joint_cap = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l06399"></a><span class="lineno"> 6399</span>&#160;      <span class="keywordflow">if</span> (!joint_cap) {</div><div class="line"><a name="l06400"></a><span class="lineno"> 6400</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(tmp_converted_cap);</div><div class="line"><a name="l06401"></a><span class="lineno"> 6401</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06402"></a><span class="lineno"> 6402</span>&#160;      }</div><div class="line"><a name="l06403"></a><span class="lineno"> 6403</span>&#160;      <a class="code" href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a>(joint_cap, request_cap, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a>);</div><div class="line"><a name="l06404"></a><span class="lineno"> 6404</span>&#160;      <a class="code" href="../../d0/d3c/format__cap_8h.html#a4dc6fa9191c19396cfaa57113f5b4af2">ast_format_cap_remove_by_type</a>(joint_cap, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>);</div><div class="line"><a name="l06405"></a><span class="lineno"> 6405</span>&#160;      <span class="keywordflow">if</span> (best_audio_fmt) { <span class="comment">/* text+video call? then, this is NULL */</span></div><div class="line"><a name="l06406"></a><span class="lineno"> 6406</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a>(joint_cap, best_audio_fmt, 0);</div><div class="line"><a name="l06407"></a><span class="lineno"> 6407</span>&#160;      }</div><div class="line"><a name="l06408"></a><span class="lineno"> 6408</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(tmp_converted_cap);</div><div class="line"><a name="l06409"></a><span class="lineno"> 6409</span>&#160;</div><div class="line"><a name="l06410"></a><span class="lineno"> 6410</span>&#160;      c = chan-&gt;<a class="code" href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">tech</a>-&gt;requester(type, joint_cap, assignedids, requestor, addr, cause);</div><div class="line"><a name="l06411"></a><span class="lineno"> 6411</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(joint_cap, -1);</div><div class="line"><a name="l06412"></a><span class="lineno"> 6412</span>&#160;   }</div><div class="line"><a name="l06413"></a><span class="lineno"> 6413</span>&#160;</div><div class="line"><a name="l06414"></a><span class="lineno"> 6414</span>&#160;   <span class="keywordflow">if</span> (!c) {</div><div class="line"><a name="l06415"></a><span class="lineno"> 6415</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06416"></a><span class="lineno"> 6416</span>&#160;   }</div><div class="line"><a name="l06417"></a><span class="lineno"> 6417</span>&#160;</div><div class="line"><a name="l06418"></a><span class="lineno"> 6418</span>&#160;   <span class="keywordflow">if</span> (requestor) {</div><div class="line"><a name="l06419"></a><span class="lineno"> 6419</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a6db44a7e26f0bc42801fc7225817c6a1">ast_callid</a> callid;</div><div class="line"><a name="l06420"></a><span class="lineno"> 6420</span>&#160;</div><div class="line"><a name="l06421"></a><span class="lineno"> 6421</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a695e5b4fcf983db6451b583fbd647424">ast_channel_lock_both</a>(c, (<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *) requestor);</div><div class="line"><a name="l06422"></a><span class="lineno"> 6422</span>&#160;</div><div class="line"><a name="l06423"></a><span class="lineno"> 6423</span>&#160;      <span class="comment">/* Set the newly created channel&#39;s callid to the same as the requestor. */</span></div><div class="line"><a name="l06424"></a><span class="lineno"> 6424</span>&#160;      callid = <a class="code" href="../../d5/d7b/channel_8h.html#a6c2c406bdebd477029e61774cc300abd">ast_channel_callid</a>(requestor);</div><div class="line"><a name="l06425"></a><span class="lineno"> 6425</span>&#160;      <span class="keywordflow">if</span> (callid) {</div><div class="line"><a name="l06426"></a><span class="lineno"> 6426</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ae3d06c28b4dc8cb2830aa16c8913e6d9">ast_channel_callid_set</a>(c, callid);</div><div class="line"><a name="l06427"></a><span class="lineno"> 6427</span>&#160;      }</div><div class="line"><a name="l06428"></a><span class="lineno"> 6428</span>&#160;</div><div class="line"><a name="l06429"></a><span class="lineno"> 6429</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(c);</div><div class="line"><a name="l06430"></a><span class="lineno"> 6430</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>((<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *) requestor);</div><div class="line"><a name="l06431"></a><span class="lineno"> 6431</span>&#160;   }</div><div class="line"><a name="l06432"></a><span class="lineno"> 6432</span>&#160;</div><div class="line"><a name="l06433"></a><span class="lineno"> 6433</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d28/channel_8c.html#a33c67949956a67dc911ddca7acc4158e">set_security_requirements</a>(requestor, c)) {</div><div class="line"><a name="l06434"></a><span class="lineno"> 6434</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Setting security requirements failed\n&quot;</span>);</div><div class="line"><a name="l06435"></a><span class="lineno"> 6435</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(c);</div><div class="line"><a name="l06436"></a><span class="lineno"> 6436</span>&#160;      *cause = <a class="code" href="../../d4/da3/causes_8h.html#a208e4fc34932b91fc9e90d9008329e87">AST_CAUSE_BEARERCAPABILITY_NOTAVAIL</a>;</div><div class="line"><a name="l06437"></a><span class="lineno"> 6437</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06438"></a><span class="lineno"> 6438</span>&#160;   }</div><div class="line"><a name="l06439"></a><span class="lineno"> 6439</span>&#160;</div><div class="line"><a name="l06440"></a><span class="lineno"> 6440</span>&#160;   <span class="comment">/* no need to generate a Newchannel event here; it is done in the channel_alloc call */</span></div><div class="line"><a name="l06441"></a><span class="lineno"> 6441</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l06442"></a><span class="lineno"> 6442</span>&#160;}</div><div class="line"><a name="l06443"></a><span class="lineno"> 6443</span>&#160;</div><div class="line"><a name="l06444"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a39fc055500e09810d0afd0bff87407c5"> 6444</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d4/d28/channel_8c.html#a39fc055500e09810d0afd0bff87407c5">ast_request</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <span class="keyword">struct</span> <a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *request_cap, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a> *assignedids, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *requestor, <span class="keyword">const</span> <span class="keywordtype">char</span> *addr, <span class="keywordtype">int</span> *cause)</div><div class="line"><a name="l06445"></a><span class="lineno"> 6445</span>&#160;{</div><div class="line"><a name="l06446"></a><span class="lineno"> 6446</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#aced094e288cd6edb779e1794afc57946">request_channel</a>(type, request_cap, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, assignedids, requestor, addr, cause);</div><div class="line"><a name="l06447"></a><span class="lineno"> 6447</span>&#160;}</div><div class="line"><a name="l06448"></a><span class="lineno"> 6448</span>&#160;</div><div class="line"><a name="l06449"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3f32294cdf04b80a2f7a49cd134be090"> 6449</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d4/d28/channel_8c.html#a3f32294cdf04b80a2f7a49cd134be090">ast_request_with_stream_topology</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <span class="keyword">struct</span> <a class="code" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a> *assignedids, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *requestor, <span class="keyword">const</span> <span class="keywordtype">char</span> *addr, <span class="keywordtype">int</span> *cause)</div><div class="line"><a name="l06450"></a><span class="lineno"> 6450</span>&#160;{</div><div class="line"><a name="l06451"></a><span class="lineno"> 6451</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#aced094e288cd6edb779e1794afc57946">request_channel</a>(type, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, topology, assignedids, requestor, addr, cause);</div><div class="line"><a name="l06452"></a><span class="lineno"> 6452</span>&#160;}</div><div class="line"><a name="l06453"></a><span class="lineno"> 6453</span>&#160;<span class="comment"></span></div><div class="line"><a name="l06454"></a><span class="lineno"> 6454</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l06455"></a><span class="lineno"> 6455</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l06456"></a><span class="lineno"> 6456</span>&#160;<span class="comment"> * \brief Setup new channel accountcodes from the requestor channel after ast_request().</span></div><div class="line"><a name="l06457"></a><span class="lineno"> 6457</span>&#160;<span class="comment"> * \since 13.0.0</span></div><div class="line"><a name="l06458"></a><span class="lineno"> 6458</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l06459"></a><span class="lineno"> 6459</span>&#160;<span class="comment"> * \param chan New channel to get accountcodes setup.</span></div><div class="line"><a name="l06460"></a><span class="lineno"> 6460</span>&#160;<span class="comment"> * \param requestor Requesting channel to get accountcodes from.</span></div><div class="line"><a name="l06461"></a><span class="lineno"> 6461</span>&#160;<span class="comment"> * \param relationship What the new channel was created for.</span></div><div class="line"><a name="l06462"></a><span class="lineno"> 6462</span>&#160;<span class="comment"> * \param precious TRUE if pre-existing accountcodes on chan will not be overwritten.</span></div><div class="line"><a name="l06463"></a><span class="lineno"> 6463</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l06464"></a><span class="lineno"> 6464</span>&#160;<span class="comment"> * \pre The chan and requestor channels are already locked.</span></div><div class="line"><a name="l06465"></a><span class="lineno"> 6465</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l06466"></a><span class="lineno"> 6466</span>&#160;<span class="comment"> * \return Nothing</span></div><div class="line"><a name="l06467"></a><span class="lineno"> 6467</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l06468"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a0f5bbcd11fd11047a7bc2312328b3694"> 6468</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a0f5bbcd11fd11047a7bc2312328b3694">channel_req_accountcodes</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *requestor, <span class="keyword">enum</span> <a class="code" href="../../d5/d7b/channel_8h.html#a31a465197a7766c3d0bb9f65f0a4418f">ast_channel_requestor_relationship</a> relationship, <span class="keywordtype">int</span> precious)</div><div class="line"><a name="l06469"></a><span class="lineno"> 6469</span>&#160;{</div><div class="line"><a name="l06470"></a><span class="lineno"> 6470</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l06471"></a><span class="lineno"> 6471</span>&#160;<span class="comment">    * The primary reason for the existence of this function is</span></div><div class="line"><a name="l06472"></a><span class="lineno"> 6472</span>&#160;<span class="comment">    * so local channels can propagate accountcodes to the ;2</span></div><div class="line"><a name="l06473"></a><span class="lineno"> 6473</span>&#160;<span class="comment">    * channel before ast_call().</span></div><div class="line"><a name="l06474"></a><span class="lineno"> 6474</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l06475"></a><span class="lineno"> 6475</span>&#160;<span class="comment">    * The secondary reason is to propagate the CHANNEL(peeraccount)</span></div><div class="line"><a name="l06476"></a><span class="lineno"> 6476</span>&#160;<span class="comment">    * value set before Dial, FollowMe, and Queue while maintaining</span></div><div class="line"><a name="l06477"></a><span class="lineno"> 6477</span>&#160;<span class="comment">    * the historic straight across accountcode propagation as a</span></div><div class="line"><a name="l06478"></a><span class="lineno"> 6478</span>&#160;<span class="comment">    * fallback.</span></div><div class="line"><a name="l06479"></a><span class="lineno"> 6479</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l06480"></a><span class="lineno"> 6480</span>&#160;   <span class="keywordflow">switch</span> (relationship) {</div><div class="line"><a name="l06481"></a><span class="lineno"> 6481</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/d7b/channel_8h.html#a31a465197a7766c3d0bb9f65f0a4418fa0e613bbe5c524be8c225eff98782e3a8">AST_CHANNEL_REQUESTOR_BRIDGE_PEER</a>:</div><div class="line"><a name="l06482"></a><span class="lineno"> 6482</span>&#160;      <span class="comment">/* Crossover the requestor&#39;s accountcode and peeraccount */</span></div><div class="line"><a name="l06483"></a><span class="lineno"> 6483</span>&#160;      <span class="keywordflow">if</span> (!precious || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1d6833a829f7402bbf9cf0383ae3ca00">ast_channel_accountcode</a>(chan))) {</div><div class="line"><a name="l06484"></a><span class="lineno"> 6484</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l06485"></a><span class="lineno"> 6485</span>&#160;<span class="comment">          * The newly created channel does not have an accountcode</span></div><div class="line"><a name="l06486"></a><span class="lineno"> 6486</span>&#160;<span class="comment">          * or we don&#39;t care.</span></div><div class="line"><a name="l06487"></a><span class="lineno"> 6487</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l06488"></a><span class="lineno"> 6488</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a806bfcbe038d762c950ad76f0269ebd4">ast_channel_peeraccount</a>(requestor))) {</div><div class="line"><a name="l06489"></a><span class="lineno"> 6489</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l06490"></a><span class="lineno"> 6490</span>&#160;<span class="comment">             * Set it to the requestor&#39;s peeraccount.  This allows the</span></div><div class="line"><a name="l06491"></a><span class="lineno"> 6491</span>&#160;<span class="comment">             * dialplan to indicate the accountcode to use when dialing</span></div><div class="line"><a name="l06492"></a><span class="lineno"> 6492</span>&#160;<span class="comment">             * by setting CHANNEL(peeraccount).</span></div><div class="line"><a name="l06493"></a><span class="lineno"> 6493</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l06494"></a><span class="lineno"> 6494</span>&#160;            ast_channel_accountcode_set(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a806bfcbe038d762c950ad76f0269ebd4">ast_channel_peeraccount</a>(requestor));</div><div class="line"><a name="l06495"></a><span class="lineno"> 6495</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!precious</div><div class="line"><a name="l06496"></a><span class="lineno"> 6496</span>&#160;            &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1d6833a829f7402bbf9cf0383ae3ca00">ast_channel_accountcode</a>(requestor))) {</div><div class="line"><a name="l06497"></a><span class="lineno"> 6497</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l06498"></a><span class="lineno"> 6498</span>&#160;<span class="comment">             * Fallback to the historic propagation and set it to the</span></div><div class="line"><a name="l06499"></a><span class="lineno"> 6499</span>&#160;<span class="comment">             * requestor&#39;s accountcode.</span></div><div class="line"><a name="l06500"></a><span class="lineno"> 6500</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l06501"></a><span class="lineno"> 6501</span>&#160;            ast_channel_accountcode_set(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a1d6833a829f7402bbf9cf0383ae3ca00">ast_channel_accountcode</a>(requestor));</div><div class="line"><a name="l06502"></a><span class="lineno"> 6502</span>&#160;         }</div><div class="line"><a name="l06503"></a><span class="lineno"> 6503</span>&#160;      }</div><div class="line"><a name="l06504"></a><span class="lineno"> 6504</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1d6833a829f7402bbf9cf0383ae3ca00">ast_channel_accountcode</a>(requestor))) {</div><div class="line"><a name="l06505"></a><span class="lineno"> 6505</span>&#160;         ast_channel_peeraccount_set(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a1d6833a829f7402bbf9cf0383ae3ca00">ast_channel_accountcode</a>(requestor));</div><div class="line"><a name="l06506"></a><span class="lineno"> 6506</span>&#160;      }</div><div class="line"><a name="l06507"></a><span class="lineno"> 6507</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l06508"></a><span class="lineno"> 6508</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/d7b/channel_8h.html#a31a465197a7766c3d0bb9f65f0a4418fac3861dd1a26771778606b7aacdfb4048">AST_CHANNEL_REQUESTOR_REPLACEMENT</a>:</div><div class="line"><a name="l06509"></a><span class="lineno"> 6509</span>&#160;      <span class="comment">/* Pass the requestor&#39;s accountcode and peeraccount straight. */</span></div><div class="line"><a name="l06510"></a><span class="lineno"> 6510</span>&#160;      <span class="keywordflow">if</span> (!precious || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1d6833a829f7402bbf9cf0383ae3ca00">ast_channel_accountcode</a>(chan))) {</div><div class="line"><a name="l06511"></a><span class="lineno"> 6511</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l06512"></a><span class="lineno"> 6512</span>&#160;<span class="comment">          * The newly created channel does not have an accountcode</span></div><div class="line"><a name="l06513"></a><span class="lineno"> 6513</span>&#160;<span class="comment">          * or we don&#39;t care.</span></div><div class="line"><a name="l06514"></a><span class="lineno"> 6514</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l06515"></a><span class="lineno"> 6515</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1d6833a829f7402bbf9cf0383ae3ca00">ast_channel_accountcode</a>(requestor))) {</div><div class="line"><a name="l06516"></a><span class="lineno"> 6516</span>&#160;            ast_channel_accountcode_set(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a1d6833a829f7402bbf9cf0383ae3ca00">ast_channel_accountcode</a>(requestor));</div><div class="line"><a name="l06517"></a><span class="lineno"> 6517</span>&#160;         }</div><div class="line"><a name="l06518"></a><span class="lineno"> 6518</span>&#160;      }</div><div class="line"><a name="l06519"></a><span class="lineno"> 6519</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a806bfcbe038d762c950ad76f0269ebd4">ast_channel_peeraccount</a>(requestor))) {</div><div class="line"><a name="l06520"></a><span class="lineno"> 6520</span>&#160;         ast_channel_peeraccount_set(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a806bfcbe038d762c950ad76f0269ebd4">ast_channel_peeraccount</a>(requestor));</div><div class="line"><a name="l06521"></a><span class="lineno"> 6521</span>&#160;      }</div><div class="line"><a name="l06522"></a><span class="lineno"> 6522</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l06523"></a><span class="lineno"> 6523</span>&#160;   }</div><div class="line"><a name="l06524"></a><span class="lineno"> 6524</span>&#160;}</div><div class="line"><a name="l06525"></a><span class="lineno"> 6525</span>&#160;</div><div class="line"><a name="l06526"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a6f3f42365ac84d888b55e35e1309f067"> 6526</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a6f3f42365ac84d888b55e35e1309f067">ast_channel_req_accountcodes</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *requestor, <span class="keyword">enum</span> <a class="code" href="../../d5/d7b/channel_8h.html#a31a465197a7766c3d0bb9f65f0a4418f">ast_channel_requestor_relationship</a> relationship)</div><div class="line"><a name="l06527"></a><span class="lineno"> 6527</span>&#160;{</div><div class="line"><a name="l06528"></a><span class="lineno"> 6528</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a0f5bbcd11fd11047a7bc2312328b3694">channel_req_accountcodes</a>(chan, requestor, relationship, 0);</div><div class="line"><a name="l06529"></a><span class="lineno"> 6529</span>&#160;}</div><div class="line"><a name="l06530"></a><span class="lineno"> 6530</span>&#160;</div><div class="line"><a name="l06531"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ad1107e82de7494c8a10f19179e75b1fb"> 6531</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#ad1107e82de7494c8a10f19179e75b1fb">ast_channel_req_accountcodes_precious</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *requestor, <span class="keyword">enum</span> <a class="code" href="../../d5/d7b/channel_8h.html#a31a465197a7766c3d0bb9f65f0a4418f">ast_channel_requestor_relationship</a> relationship)</div><div class="line"><a name="l06532"></a><span class="lineno"> 6532</span>&#160;{</div><div class="line"><a name="l06533"></a><span class="lineno"> 6533</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a0f5bbcd11fd11047a7bc2312328b3694">channel_req_accountcodes</a>(chan, requestor, relationship, 1);</div><div class="line"><a name="l06534"></a><span class="lineno"> 6534</span>&#160;}</div><div class="line"><a name="l06535"></a><span class="lineno"> 6535</span>&#160;</div><div class="line"><a name="l06536"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ad75b575faec0b9bac758d6a373ee762f"> 6536</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#ad75b575faec0b9bac758d6a373ee762f">ast_pre_call</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *sub_args)</div><div class="line"><a name="l06537"></a><span class="lineno"> 6537</span>&#160;{</div><div class="line"><a name="l06538"></a><span class="lineno"> 6538</span>&#160;   int (*pre_call)(<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *sub_args);</div><div class="line"><a name="l06539"></a><span class="lineno"> 6539</span>&#160;</div><div class="line"><a name="l06540"></a><span class="lineno"> 6540</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l06541"></a><span class="lineno"> 6541</span>&#160;   pre_call = <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#ad58ac369cd858333170a0a21e4a5307c">pre_call</a>;</div><div class="line"><a name="l06542"></a><span class="lineno"> 6542</span>&#160;   <span class="keywordflow">if</span> (pre_call) {</div><div class="line"><a name="l06543"></a><span class="lineno"> 6543</span>&#160;      <span class="keywordtype">int</span> res;</div><div class="line"><a name="l06544"></a><span class="lineno"> 6544</span>&#160;</div><div class="line"><a name="l06545"></a><span class="lineno"> 6545</span>&#160;      res = pre_call(chan, sub_args);</div><div class="line"><a name="l06546"></a><span class="lineno"> 6546</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l06547"></a><span class="lineno"> 6547</span>&#160;      <span class="keywordflow">return</span> res;</div><div class="line"><a name="l06548"></a><span class="lineno"> 6548</span>&#160;   }</div><div class="line"><a name="l06549"></a><span class="lineno"> 6549</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l06550"></a><span class="lineno"> 6550</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aee5e20694b04eee43463fde6cf121d06">ast_app_exec_sub</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, chan, sub_args, 0);</div><div class="line"><a name="l06551"></a><span class="lineno"> 6551</span>&#160;}</div><div class="line"><a name="l06552"></a><span class="lineno"> 6552</span>&#160;</div><div class="line"><a name="l06553"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a1b732eb4ed203140b1a3aae9e7dec2c1"> 6553</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a1b732eb4ed203140b1a3aae9e7dec2c1">ast_call</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *addr, <span class="keywordtype">int</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>)</div><div class="line"><a name="l06554"></a><span class="lineno"> 6554</span>&#160;{</div><div class="line"><a name="l06555"></a><span class="lineno"> 6555</span>&#160;   <span class="comment">/* Place an outgoing call, but don&#39;t wait any longer than timeout ms before returning.</span></div><div class="line"><a name="l06556"></a><span class="lineno"> 6556</span>&#160;<span class="comment">      If the remote end does not answer within the timeout, then do NOT hang up, but</span></div><div class="line"><a name="l06557"></a><span class="lineno"> 6557</span>&#160;<span class="comment">      return anyway.  */</span></div><div class="line"><a name="l06558"></a><span class="lineno"> 6558</span>&#160;   <span class="keywordtype">int</span> res = -1;</div><div class="line"><a name="l06559"></a><span class="lineno"> 6559</span>&#160;   <span class="comment">/* Stop if we&#39;re a zombie or need a soft hangup */</span></div><div class="line"><a name="l06560"></a><span class="lineno"> 6560</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l06561"></a><span class="lineno"> 6561</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a26796fa52cc5857446eec8d16a4b718d">AST_FLAG_ZOMBIE</a>) &amp;&amp; !<a class="code" href="../../d4/d28/channel_8c.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(chan)) {</div><div class="line"><a name="l06562"></a><span class="lineno"> 6562</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#acc941e909d1ca6a0997028d9562d78da">call</a>)</div><div class="line"><a name="l06563"></a><span class="lineno"> 6563</span>&#160;         res = <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#a87d560c307b0736b475f5893299db06e">call</a>(chan, addr, timeout);</div><div class="line"><a name="l06564"></a><span class="lineno"> 6564</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a36fa77a64746637c77c6b18a7999d0a2">AST_FLAG_OUTGOING</a>);</div><div class="line"><a name="l06565"></a><span class="lineno"> 6565</span>&#160;   }</div><div class="line"><a name="l06566"></a><span class="lineno"> 6566</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l06567"></a><span class="lineno"> 6567</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l06568"></a><span class="lineno"> 6568</span>&#160;}</div><div class="line"><a name="l06569"></a><span class="lineno"> 6569</span>&#160;<span class="comment"></span></div><div class="line"><a name="l06570"></a><span class="lineno"> 6570</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l06571"></a><span class="lineno"> 6571</span>&#160;<span class="comment">  \brief Transfer a call to dest, if the channel supports transfer</span></div><div class="line"><a name="l06572"></a><span class="lineno"> 6572</span>&#160;<span class="comment"></span></div><div class="line"><a name="l06573"></a><span class="lineno"> 6573</span>&#160;<span class="comment">  Called by:</span></div><div class="line"><a name="l06574"></a><span class="lineno"> 6574</span>&#160;<span class="comment">   \arg app_transfer</span></div><div class="line"><a name="l06575"></a><span class="lineno"> 6575</span>&#160;<span class="comment">   \arg the manager interface</span></div><div class="line"><a name="l06576"></a><span class="lineno"> 6576</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l06577"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ac6ae24f259d33ae591e76eac023e8b21"> 6577</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#ac6ae24f259d33ae591e76eac023e8b21">ast_transfer</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">char</span> *dest)</div><div class="line"><a name="l06578"></a><span class="lineno"> 6578</span>&#160;{</div><div class="line"><a name="l06579"></a><span class="lineno"> 6579</span>&#160;   <span class="keywordtype">int</span> protocol;</div><div class="line"><a name="l06580"></a><span class="lineno"> 6580</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a329c4b1e75a8de592dd2a8a493b1d101">ast_transfer_protocol</a>(chan, dest, &amp;protocol);</div><div class="line"><a name="l06581"></a><span class="lineno"> 6581</span>&#160;}</div><div class="line"><a name="l06582"></a><span class="lineno"> 6582</span>&#160;<span class="comment"></span></div><div class="line"><a name="l06583"></a><span class="lineno"> 6583</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l06584"></a><span class="lineno"> 6584</span>&#160;<span class="comment">  \brief Transfer a call to dest, if the channel supports transfer</span></div><div class="line"><a name="l06585"></a><span class="lineno"> 6585</span>&#160;<span class="comment"></span></div><div class="line"><a name="l06586"></a><span class="lineno"> 6586</span>&#160;<span class="comment">  \param chan channel to transfer</span></div><div class="line"><a name="l06587"></a><span class="lineno"> 6587</span>&#160;<span class="comment">  \param dest destination to transfer to</span></div><div class="line"><a name="l06588"></a><span class="lineno"> 6588</span>&#160;<span class="comment">  \param protocol is the protocol result</span></div><div class="line"><a name="l06589"></a><span class="lineno"> 6589</span>&#160;<span class="comment">  SIP example, 0=success, 3xx-6xx is SIP error code</span></div><div class="line"><a name="l06590"></a><span class="lineno"> 6590</span>&#160;<span class="comment"></span></div><div class="line"><a name="l06591"></a><span class="lineno"> 6591</span>&#160;<span class="comment">  Called by:</span></div><div class="line"><a name="l06592"></a><span class="lineno"> 6592</span>&#160;<span class="comment">   \arg app_transfer</span></div><div class="line"><a name="l06593"></a><span class="lineno"> 6593</span>&#160;<span class="comment">   \arg the manager interface</span></div><div class="line"><a name="l06594"></a><span class="lineno"> 6594</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l06595"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a329c4b1e75a8de592dd2a8a493b1d101"> 6595</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a329c4b1e75a8de592dd2a8a493b1d101">ast_transfer_protocol</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">char</span> *dest, <span class="keywordtype">int</span> *protocol)</div><div class="line"><a name="l06596"></a><span class="lineno"> 6596</span>&#160;{</div><div class="line"><a name="l06597"></a><span class="lineno"> 6597</span>&#160;   <span class="keywordtype">int</span> res = -1;</div><div class="line"><a name="l06598"></a><span class="lineno"> 6598</span>&#160;</div><div class="line"><a name="l06599"></a><span class="lineno"> 6599</span>&#160;   <span class="keywordflow">if</span> (protocol) {</div><div class="line"><a name="l06600"></a><span class="lineno"> 6600</span>&#160;      *protocol = 0;</div><div class="line"><a name="l06601"></a><span class="lineno"> 6601</span>&#160;   }</div><div class="line"><a name="l06602"></a><span class="lineno"> 6602</span>&#160;</div><div class="line"><a name="l06603"></a><span class="lineno"> 6603</span>&#160;   <span class="comment">/* Stop if we&#39;re a zombie or need a soft hangup */</span></div><div class="line"><a name="l06604"></a><span class="lineno"> 6604</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l06605"></a><span class="lineno"> 6605</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a26796fa52cc5857446eec8d16a4b718d">AST_FLAG_ZOMBIE</a>) &amp;&amp; !<a class="code" href="../../d4/d28/channel_8c.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(chan)) {</div><div class="line"><a name="l06606"></a><span class="lineno"> 6606</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a9caa677def8fa97666646d9e2e607b7c">transfer</a>) {</div><div class="line"><a name="l06607"></a><span class="lineno"> 6607</span>&#160;         res = <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#a13cd795c048a930f2b391b9e44cb9538">transfer</a>(chan, dest);</div><div class="line"><a name="l06608"></a><span class="lineno"> 6608</span>&#160;         <span class="keywordflow">if</span> (!res)</div><div class="line"><a name="l06609"></a><span class="lineno"> 6609</span>&#160;            res = 1;</div><div class="line"><a name="l06610"></a><span class="lineno"> 6610</span>&#160;      } <span class="keywordflow">else</span></div><div class="line"><a name="l06611"></a><span class="lineno"> 6611</span>&#160;         res = 0;</div><div class="line"><a name="l06612"></a><span class="lineno"> 6612</span>&#160;   }</div><div class="line"><a name="l06613"></a><span class="lineno"> 6613</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l06614"></a><span class="lineno"> 6614</span>&#160;</div><div class="line"><a name="l06615"></a><span class="lineno"> 6615</span>&#160;   <span class="keywordflow">if</span> (res &lt;= 0) {</div><div class="line"><a name="l06616"></a><span class="lineno"> 6616</span>&#160;      <span class="keywordflow">return</span> res;</div><div class="line"><a name="l06617"></a><span class="lineno"> 6617</span>&#160;   }</div><div class="line"><a name="l06618"></a><span class="lineno"> 6618</span>&#160;</div><div class="line"><a name="l06619"></a><span class="lineno"> 6619</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l06620"></a><span class="lineno"> 6620</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *fr;</div><div class="line"><a name="l06621"></a><span class="lineno"> 6621</span>&#160;</div><div class="line"><a name="l06622"></a><span class="lineno"> 6622</span>&#160;      res = <a class="code" href="../../d4/d28/channel_8c.html#aed7cba5dd8c6d31600f50d4b3f68d9ca">ast_waitfor</a>(chan, -1);</div><div class="line"><a name="l06623"></a><span class="lineno"> 6623</span>&#160;</div><div class="line"><a name="l06624"></a><span class="lineno"> 6624</span>&#160;      <span class="keywordflow">if</span> (res &lt; 0 || !(fr = <a class="code" href="../../d4/d28/channel_8c.html#a7ef6737309dc9e8b6c4a7cb4800638b1">ast_read</a>(chan))) {</div><div class="line"><a name="l06625"></a><span class="lineno"> 6625</span>&#160;         res = -1;</div><div class="line"><a name="l06626"></a><span class="lineno"> 6626</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06627"></a><span class="lineno"> 6627</span>&#160;      }</div><div class="line"><a name="l06628"></a><span class="lineno"> 6628</span>&#160;</div><div class="line"><a name="l06629"></a><span class="lineno"> 6629</span>&#160;      <span class="keywordflow">if</span> (fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a> &amp;&amp; fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae177c145d03ff05a54e1d0547a239005">AST_CONTROL_TRANSFER</a>) {</div><div class="line"><a name="l06630"></a><span class="lineno"> 6630</span>&#160;         <span class="keyword">enum</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a52d63717311388ffc67543a1106fe101">ast_control_transfer</a> *<a class="code" href="../../d8/d9e/structmessage.html">message</a> = fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>;</div><div class="line"><a name="l06631"></a><span class="lineno"> 6631</span>&#160;</div><div class="line"><a name="l06632"></a><span class="lineno"> 6632</span>&#160;         <span class="keywordflow">if</span> (*message == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a52d63717311388ffc67543a1106fe101a74b12266f6488477e272388b8cb81864">AST_TRANSFER_SUCCESS</a>) {</div><div class="line"><a name="l06633"></a><span class="lineno"> 6633</span>&#160;            res = 1;</div><div class="line"><a name="l06634"></a><span class="lineno"> 6634</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06635"></a><span class="lineno"> 6635</span>&#160;            res = -1;</div><div class="line"><a name="l06636"></a><span class="lineno"> 6636</span>&#160;            <span class="comment">/* Message can contain a protocol specific code</span></div><div class="line"><a name="l06637"></a><span class="lineno"> 6637</span>&#160;<span class="comment">               AST_TRANSFER_SUCCESS indicates success</span></div><div class="line"><a name="l06638"></a><span class="lineno"> 6638</span>&#160;<span class="comment">               Else, failure.  Protocol will be set to the failure reason.</span></div><div class="line"><a name="l06639"></a><span class="lineno"> 6639</span>&#160;<span class="comment">               SIP example, 0 is success, else error code 3xx-6xx */</span></div><div class="line"><a name="l06640"></a><span class="lineno"> 6640</span>&#160;            <span class="keywordflow">if</span> (protocol) {</div><div class="line"><a name="l06641"></a><span class="lineno"> 6641</span>&#160;               *protocol = *message;</div><div class="line"><a name="l06642"></a><span class="lineno"> 6642</span>&#160;            }</div><div class="line"><a name="l06643"></a><span class="lineno"> 6643</span>&#160;         }</div><div class="line"><a name="l06644"></a><span class="lineno"> 6644</span>&#160;</div><div class="line"><a name="l06645"></a><span class="lineno"> 6645</span>&#160;         <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(fr);</div><div class="line"><a name="l06646"></a><span class="lineno"> 6646</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06647"></a><span class="lineno"> 6647</span>&#160;      }</div><div class="line"><a name="l06648"></a><span class="lineno"> 6648</span>&#160;</div><div class="line"><a name="l06649"></a><span class="lineno"> 6649</span>&#160;      <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(fr);</div><div class="line"><a name="l06650"></a><span class="lineno"> 6650</span>&#160;   }</div><div class="line"><a name="l06651"></a><span class="lineno"> 6651</span>&#160;</div><div class="line"><a name="l06652"></a><span class="lineno"> 6652</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l06653"></a><span class="lineno"> 6653</span>&#160;}</div><div class="line"><a name="l06654"></a><span class="lineno"> 6654</span>&#160;</div><div class="line"><a name="l06655"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a2ead08f6d731f739b40787f79d2a64ef"> 6655</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a2ead08f6d731f739b40787f79d2a64ef">ast_readstring</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *c, <span class="keywordtype">char</span> *s, <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, <span class="keywordtype">int</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>, <span class="keywordtype">int</span> ftimeout, <span class="keywordtype">char</span> *enders)</div><div class="line"><a name="l06656"></a><span class="lineno"> 6656</span>&#160;{</div><div class="line"><a name="l06657"></a><span class="lineno"> 6657</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a4029626a4c61de707ff021b7af7c3767">ast_readstring_full</a>(c, s, len, timeout, ftimeout, enders, -1, -1);</div><div class="line"><a name="l06658"></a><span class="lineno"> 6658</span>&#160;}</div><div class="line"><a name="l06659"></a><span class="lineno"> 6659</span>&#160;</div><div class="line"><a name="l06660"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a4029626a4c61de707ff021b7af7c3767"> 6660</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a4029626a4c61de707ff021b7af7c3767">ast_readstring_full</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *c, <span class="keywordtype">char</span> *s, <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, <span class="keywordtype">int</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>, <span class="keywordtype">int</span> ftimeout, <span class="keywordtype">char</span> *enders, <span class="keywordtype">int</span> audiofd, <span class="keywordtype">int</span> ctrlfd)</div><div class="line"><a name="l06661"></a><span class="lineno"> 6661</span>&#160;{</div><div class="line"><a name="l06662"></a><span class="lineno"> 6662</span>&#160;   <span class="keywordtype">int</span> pos = 0;   <span class="comment">/* index in the buffer where we accumulate digits */</span></div><div class="line"><a name="l06663"></a><span class="lineno"> 6663</span>&#160;   <span class="keywordtype">int</span> to = ftimeout;</div><div class="line"><a name="l06664"></a><span class="lineno"> 6664</span>&#160;</div><div class="line"><a name="l06665"></a><span class="lineno"> 6665</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/da1/structast__silence__generator.html">ast_silence_generator</a> *silgen = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06666"></a><span class="lineno"> 6666</span>&#160;</div><div class="line"><a name="l06667"></a><span class="lineno"> 6667</span>&#160;   <span class="comment">/* Stop if we&#39;re a zombie or need a soft hangup */</span></div><div class="line"><a name="l06668"></a><span class="lineno"> 6668</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(c), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a26796fa52cc5857446eec8d16a4b718d">AST_FLAG_ZOMBIE</a>) || <a class="code" href="../../d4/d28/channel_8c.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(c))</div><div class="line"><a name="l06669"></a><span class="lineno"> 6669</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06670"></a><span class="lineno"> 6670</span>&#160;   <span class="keywordflow">if</span> (!len)</div><div class="line"><a name="l06671"></a><span class="lineno"> 6671</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06672"></a><span class="lineno"> 6672</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l06673"></a><span class="lineno"> 6673</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a156f09c32102fa036620ad75c3ee4fbf">d</a>;</div><div class="line"><a name="l06674"></a><span class="lineno"> 6674</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a043ef90a065fe177af7b21a6045b6506">ast_channel_stream</a>(c)) {</div><div class="line"><a name="l06675"></a><span class="lineno"> 6675</span>&#160;         d = <a class="code" href="../../d2/d4d/file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a>(c, <a class="code" href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a>, audiofd, ctrlfd);</div><div class="line"><a name="l06676"></a><span class="lineno"> 6676</span>&#160;         <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(c);</div><div class="line"><a name="l06677"></a><span class="lineno"> 6677</span>&#160;         <span class="keywordflow">if</span> (!silgen &amp;&amp; <a class="code" href="../../d7/d5b/options_8h.html#afe8795c4ec744506a9300700fc0813dc">ast_opt_transmit_silence</a>)</div><div class="line"><a name="l06678"></a><span class="lineno"> 6678</span>&#160;            silgen = <a class="code" href="../../d4/d28/channel_8c.html#a2a2e0ff24c57491a877cac39cb670024">ast_channel_start_silence_generator</a>(c);</div><div class="line"><a name="l06679"></a><span class="lineno"> 6679</span>&#160;         usleep(1000);</div><div class="line"><a name="l06680"></a><span class="lineno"> 6680</span>&#160;         <span class="keywordflow">if</span> (!d)</div><div class="line"><a name="l06681"></a><span class="lineno"> 6681</span>&#160;            d = <a class="code" href="../../d4/d28/channel_8c.html#a9b4476ddb41746948476b2ac7a9875a4">ast_waitfordigit_full</a>(c, to, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, audiofd, ctrlfd);</div><div class="line"><a name="l06682"></a><span class="lineno"> 6682</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l06683"></a><span class="lineno"> 6683</span>&#160;         <span class="keywordflow">if</span> (!silgen &amp;&amp; <a class="code" href="../../d7/d5b/options_8h.html#afe8795c4ec744506a9300700fc0813dc">ast_opt_transmit_silence</a>)</div><div class="line"><a name="l06684"></a><span class="lineno"> 6684</span>&#160;            silgen = <a class="code" href="../../d4/d28/channel_8c.html#a2a2e0ff24c57491a877cac39cb670024">ast_channel_start_silence_generator</a>(c);</div><div class="line"><a name="l06685"></a><span class="lineno"> 6685</span>&#160;         d = <a class="code" href="../../d4/d28/channel_8c.html#a9b4476ddb41746948476b2ac7a9875a4">ast_waitfordigit_full</a>(c, to, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, audiofd, ctrlfd);</div><div class="line"><a name="l06686"></a><span class="lineno"> 6686</span>&#160;      }</div><div class="line"><a name="l06687"></a><span class="lineno"> 6687</span>&#160;      <span class="keywordflow">if</span> (d &lt; 0) {</div><div class="line"><a name="l06688"></a><span class="lineno"> 6688</span>&#160;         <a class="code" href="../../d4/d28/channel_8c.html#a6643cbe766a051d2d06750ab5b3e933d">ast_channel_stop_silence_generator</a>(c, silgen);</div><div class="line"><a name="l06689"></a><span class="lineno"> 6689</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a10624bc470a4ac2634221dfa74bdb17fa447a1a659574cde67aa71538c804206f">AST_GETDATA_FAILED</a>;</div><div class="line"><a name="l06690"></a><span class="lineno"> 6690</span>&#160;      }</div><div class="line"><a name="l06691"></a><span class="lineno"> 6691</span>&#160;      <span class="keywordflow">if</span> (d == 0) {</div><div class="line"><a name="l06692"></a><span class="lineno"> 6692</span>&#160;         s[pos] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l06693"></a><span class="lineno"> 6693</span>&#160;         <a class="code" href="../../d4/d28/channel_8c.html#a6643cbe766a051d2d06750ab5b3e933d">ast_channel_stop_silence_generator</a>(c, silgen);</div><div class="line"><a name="l06694"></a><span class="lineno"> 6694</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a10624bc470a4ac2634221dfa74bdb17fa79554349b620ac61794e76cb70eef322">AST_GETDATA_TIMEOUT</a>;</div><div class="line"><a name="l06695"></a><span class="lineno"> 6695</span>&#160;      }</div><div class="line"><a name="l06696"></a><span class="lineno"> 6696</span>&#160;      <span class="keywordflow">if</span> (d == 1) {</div><div class="line"><a name="l06697"></a><span class="lineno"> 6697</span>&#160;         s[pos] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l06698"></a><span class="lineno"> 6698</span>&#160;         <a class="code" href="../../d4/d28/channel_8c.html#a6643cbe766a051d2d06750ab5b3e933d">ast_channel_stop_silence_generator</a>(c, silgen);</div><div class="line"><a name="l06699"></a><span class="lineno"> 6699</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a10624bc470a4ac2634221dfa74bdb17fa74b94669f324ba10f5bfb979f54e636c">AST_GETDATA_INTERRUPTED</a>;</div><div class="line"><a name="l06700"></a><span class="lineno"> 6700</span>&#160;      }</div><div class="line"><a name="l06701"></a><span class="lineno"> 6701</span>&#160;      <span class="keywordflow">if</span> (strchr(enders, d) &amp;&amp; (pos == 0)) {</div><div class="line"><a name="l06702"></a><span class="lineno"> 6702</span>&#160;         s[pos] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l06703"></a><span class="lineno"> 6703</span>&#160;         <a class="code" href="../../d4/d28/channel_8c.html#a6643cbe766a051d2d06750ab5b3e933d">ast_channel_stop_silence_generator</a>(c, silgen);</div><div class="line"><a name="l06704"></a><span class="lineno"> 6704</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a10624bc470a4ac2634221dfa74bdb17fa94425459ee6ac7993c6289fde4d4ea8c">AST_GETDATA_EMPTY_END_TERMINATED</a>;</div><div class="line"><a name="l06705"></a><span class="lineno"> 6705</span>&#160;      }</div><div class="line"><a name="l06706"></a><span class="lineno"> 6706</span>&#160;      <span class="keywordflow">if</span> (!strchr(enders, d)) {</div><div class="line"><a name="l06707"></a><span class="lineno"> 6707</span>&#160;         s[pos++] = <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a156f09c32102fa036620ad75c3ee4fbf">d</a>;</div><div class="line"><a name="l06708"></a><span class="lineno"> 6708</span>&#160;      }</div><div class="line"><a name="l06709"></a><span class="lineno"> 6709</span>&#160;      <span class="keywordflow">if</span> (strchr(enders, d) || (pos &gt;= len)) {</div><div class="line"><a name="l06710"></a><span class="lineno"> 6710</span>&#160;         s[pos] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l06711"></a><span class="lineno"> 6711</span>&#160;         <a class="code" href="../../d4/d28/channel_8c.html#a6643cbe766a051d2d06750ab5b3e933d">ast_channel_stop_silence_generator</a>(c, silgen);</div><div class="line"><a name="l06712"></a><span class="lineno"> 6712</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a10624bc470a4ac2634221dfa74bdb17fa76a0cf0f0ca1c3000e227686d7de7d9c">AST_GETDATA_COMPLETE</a>;</div><div class="line"><a name="l06713"></a><span class="lineno"> 6713</span>&#160;      }</div><div class="line"><a name="l06714"></a><span class="lineno"> 6714</span>&#160;      to = <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>;</div><div class="line"><a name="l06715"></a><span class="lineno"> 6715</span>&#160;   }</div><div class="line"><a name="l06716"></a><span class="lineno"> 6716</span>&#160;   <span class="comment">/* Never reached */</span></div><div class="line"><a name="l06717"></a><span class="lineno"> 6717</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06718"></a><span class="lineno"> 6718</span>&#160;}</div><div class="line"><a name="l06719"></a><span class="lineno"> 6719</span>&#160;</div><div class="line"><a name="l06720"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ad8aa1e0753aff7c104f4f4cf134eab68"> 6720</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#ad8aa1e0753aff7c104f4f4cf134eab68">ast_channel_supports_html</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l06721"></a><span class="lineno"> 6721</span>&#160;{</div><div class="line"><a name="l06722"></a><span class="lineno"> 6722</span>&#160;   <span class="keywordflow">return</span> (<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;send_html) ? 1 : 0;</div><div class="line"><a name="l06723"></a><span class="lineno"> 6723</span>&#160;}</div><div class="line"><a name="l06724"></a><span class="lineno"> 6724</span>&#160;</div><div class="line"><a name="l06725"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8d715844337b07f950bf2ff0eb4c5b90"> 6725</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a8d715844337b07f950bf2ff0eb4c5b90">ast_channel_sendhtml</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">int</span> subclass, <span class="keyword">const</span> <span class="keywordtype">char</span> *data, <span class="keywordtype">int</span> datalen)</div><div class="line"><a name="l06726"></a><span class="lineno"> 6726</span>&#160;{</div><div class="line"><a name="l06727"></a><span class="lineno"> 6727</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;send_html)</div><div class="line"><a name="l06728"></a><span class="lineno"> 6728</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#a82adcb6335ced70bf32beb1290079878">send_html</a>(chan, subclass, data, datalen);</div><div class="line"><a name="l06729"></a><span class="lineno"> 6729</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06730"></a><span class="lineno"> 6730</span>&#160;}</div><div class="line"><a name="l06731"></a><span class="lineno"> 6731</span>&#160;</div><div class="line"><a name="l06732"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a2f152a294b4dd2561b0da2325421aead"> 6732</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a2f152a294b4dd2561b0da2325421aead">ast_channel_sendurl</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dc/d12/res__config__ldap_8c.html#a75e4590043edf35241d30fabe2eda546">url</a>)</div><div class="line"><a name="l06733"></a><span class="lineno"> 6733</span>&#160;{</div><div class="line"><a name="l06734"></a><span class="lineno"> 6734</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a8d715844337b07f950bf2ff0eb4c5b90">ast_channel_sendhtml</a>(chan, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6eada13200d55b88ef01b68c5d62a43a">AST_HTML_URL</a>, url, strlen(url) + 1);</div><div class="line"><a name="l06735"></a><span class="lineno"> 6735</span>&#160;}</div><div class="line"><a name="l06736"></a><span class="lineno"> 6736</span>&#160;<span class="comment"></span></div><div class="line"><a name="l06737"></a><span class="lineno"> 6737</span>&#160;<span class="comment">/*! \brief Set up translation from one channel to another */</span></div><div class="line"><a name="l06738"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a269e229318912967cf9c939d2b7b52e7"> 6738</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a269e229318912967cf9c939d2b7b52e7">ast_channel_make_compatible_helper</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *from, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *to)</div><div class="line"><a name="l06739"></a><span class="lineno"> 6739</span>&#160;{</div><div class="line"><a name="l06740"></a><span class="lineno"> 6740</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *src_cap;</div><div class="line"><a name="l06741"></a><span class="lineno"> 6741</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *dst_cap;</div><div class="line"><a name="l06742"></a><span class="lineno"> 6742</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *, best_src_fmt, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l06743"></a><span class="lineno"> 6743</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *, best_dst_fmt, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l06744"></a><span class="lineno"> 6744</span>&#160;   <span class="keywordtype">int</span> no_path;</div><div class="line"><a name="l06745"></a><span class="lineno"> 6745</span>&#160;</div><div class="line"><a name="l06746"></a><span class="lineno"> 6746</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l06747"></a><span class="lineno"> 6747</span>&#160;<span class="comment">    * We cannot short circuit this code because it is possible to ask</span></div><div class="line"><a name="l06748"></a><span class="lineno"> 6748</span>&#160;<span class="comment">    * to make compatible two channels that are &quot;compatible&quot; because</span></div><div class="line"><a name="l06749"></a><span class="lineno"> 6749</span>&#160;<span class="comment">    * they already have translation paths setup but together make for</span></div><div class="line"><a name="l06750"></a><span class="lineno"> 6750</span>&#160;<span class="comment">    * a sub-optimal path.  e.g., The From channel has g722 -&gt; ulaw</span></div><div class="line"><a name="l06751"></a><span class="lineno"> 6751</span>&#160;<span class="comment">    * and the To channel has ulaw -&gt; g722.  They are &quot;compatible&quot; but</span></div><div class="line"><a name="l06752"></a><span class="lineno"> 6752</span>&#160;<span class="comment">    * together the translations are unnecessary and the audio loses</span></div><div class="line"><a name="l06753"></a><span class="lineno"> 6753</span>&#160;<span class="comment">    * fidelity in the process.</span></div><div class="line"><a name="l06754"></a><span class="lineno"> 6754</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l06755"></a><span class="lineno"> 6755</span>&#160;</div><div class="line"><a name="l06756"></a><span class="lineno"> 6756</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a695e5b4fcf983db6451b583fbd647424">ast_channel_lock_both</a>(from, to);</div><div class="line"><a name="l06757"></a><span class="lineno"> 6757</span>&#160;</div><div class="line"><a name="l06758"></a><span class="lineno"> 6758</span>&#160;   src_cap = <a class="code" href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a>(from); <span class="comment">/* shallow copy, do not destroy */</span></div><div class="line"><a name="l06759"></a><span class="lineno"> 6759</span>&#160;   dst_cap = <a class="code" href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a>(to);   <span class="comment">/* shallow copy, do not destroy */</span></div><div class="line"><a name="l06760"></a><span class="lineno"> 6760</span>&#160;</div><div class="line"><a name="l06761"></a><span class="lineno"> 6761</span>&#160;   <span class="comment">/* If there&#39;s no audio in this call, don&#39;t bother with trying to find a translation path */</span></div><div class="line"><a name="l06762"></a><span class="lineno"> 6762</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d3c/format__cap_8h.html#a9b2d6490b222d436f5f6a8296d36c13f">ast_format_cap_has_type</a>(src_cap, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>)</div><div class="line"><a name="l06763"></a><span class="lineno"> 6763</span>&#160;      || !<a class="code" href="../../d0/d3c/format__cap_8h.html#a9b2d6490b222d436f5f6a8296d36c13f">ast_format_cap_has_type</a>(dst_cap, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>)) {</div><div class="line"><a name="l06764"></a><span class="lineno"> 6764</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(to);</div><div class="line"><a name="l06765"></a><span class="lineno"> 6765</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(from);</div><div class="line"><a name="l06766"></a><span class="lineno"> 6766</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06767"></a><span class="lineno"> 6767</span>&#160;   }</div><div class="line"><a name="l06768"></a><span class="lineno"> 6768</span>&#160;</div><div class="line"><a name="l06769"></a><span class="lineno"> 6769</span>&#160;   no_path = <a class="code" href="../../db/d39/translate_8h.html#a67f43da0468e888ba70f0d001499e3e7">ast_translator_best_choice</a>(dst_cap, src_cap, &amp;best_dst_fmt, &amp;best_src_fmt);</div><div class="line"><a name="l06770"></a><span class="lineno"> 6770</span>&#160;</div><div class="line"><a name="l06771"></a><span class="lineno"> 6771</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(to);</div><div class="line"><a name="l06772"></a><span class="lineno"> 6772</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(from);</div><div class="line"><a name="l06773"></a><span class="lineno"> 6773</span>&#160;</div><div class="line"><a name="l06774"></a><span class="lineno"> 6774</span>&#160;   <span class="keywordflow">if</span> (no_path) {</div><div class="line"><a name="l06775"></a><span class="lineno"> 6775</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No path to translate from %s to %s\n&quot;</span>,</div><div class="line"><a name="l06776"></a><span class="lineno"> 6776</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(from), <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(to));</div><div class="line"><a name="l06777"></a><span class="lineno"> 6777</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06778"></a><span class="lineno"> 6778</span>&#160;   }</div><div class="line"><a name="l06779"></a><span class="lineno"> 6779</span>&#160;</div><div class="line"><a name="l06780"></a><span class="lineno"> 6780</span>&#160;   <span class="comment">/* if the best path is not &#39;pass through&#39;, then</span></div><div class="line"><a name="l06781"></a><span class="lineno"> 6781</span>&#160;<span class="comment">    * transcoding is needed; if desired, force transcode path</span></div><div class="line"><a name="l06782"></a><span class="lineno"> 6782</span>&#160;<span class="comment">    * to use SLINEAR between channels, but only if there is</span></div><div class="line"><a name="l06783"></a><span class="lineno"> 6783</span>&#160;<span class="comment">    * no direct conversion available. If generic PLC is</span></div><div class="line"><a name="l06784"></a><span class="lineno"> 6784</span>&#160;<span class="comment">    * desired, then transcoding via SLINEAR is a requirement</span></div><div class="line"><a name="l06785"></a><span class="lineno"> 6785</span>&#160;<span class="comment">    * even if the formats are the same.</span></div><div class="line"><a name="l06786"></a><span class="lineno"> 6786</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l06787"></a><span class="lineno"> 6787</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5b/options_8h.html#a64fcc3bad029c5b4230fc58638ed4652">ast_opt_generic_plc_on_equal_codecs</a></div><div class="line"><a name="l06788"></a><span class="lineno"> 6788</span>&#160;      || (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(best_dst_fmt, best_src_fmt) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a></div><div class="line"><a name="l06789"></a><span class="lineno"> 6789</span>&#160;         &amp;&amp; (<a class="code" href="../../d7/d5b/options_8h.html#aec9ad52a51bdb17fb149b63bfb9244bf">ast_opt_generic_plc</a> || <a class="code" href="../../d7/d5b/options_8h.html#a48887ee8724c584209e55362bc887b43">ast_opt_transcode_via_slin</a>))) {</div><div class="line"><a name="l06790"></a><span class="lineno"> 6790</span>&#160;</div><div class="line"><a name="l06791"></a><span class="lineno"> 6791</span>&#160;      <span class="keywordtype">int</span> use_slin = (<a class="code" href="../../db/d1c/format__cache_8h.html#a309515067d94f11b99659093c5beefee">ast_format_cache_is_slinear</a>(best_src_fmt)</div><div class="line"><a name="l06792"></a><span class="lineno"> 6792</span>&#160;         || <a class="code" href="../../db/d1c/format__cache_8h.html#a309515067d94f11b99659093c5beefee">ast_format_cache_is_slinear</a>(best_dst_fmt))</div><div class="line"><a name="l06793"></a><span class="lineno"> 6793</span>&#160;         ? 1 : <a class="code" href="../../d7/d5b/options_8h.html#a64fcc3bad029c5b4230fc58638ed4652">ast_opt_generic_plc_on_equal_codecs</a>;</div><div class="line"><a name="l06794"></a><span class="lineno"> 6794</span>&#160;</div><div class="line"><a name="l06795"></a><span class="lineno"> 6795</span>&#160;      <span class="keywordflow">if</span> (use_slin || <a class="code" href="../../db/d39/translate_8h.html#afc08e849ba68be7952acb64a3beef620">ast_translate_path_steps</a>(best_dst_fmt, best_src_fmt) != 1) {</div><div class="line"><a name="l06796"></a><span class="lineno"> 6796</span>&#160;         <span class="keywordtype">int</span> best_sample_rate = (<a class="code" href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a>(best_src_fmt) &gt; <a class="code" href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a>(best_dst_fmt)) ?</div><div class="line"><a name="l06797"></a><span class="lineno"> 6797</span>&#160;            <a class="code" href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a>(best_src_fmt) : <a class="code" href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a>(best_dst_fmt);</div><div class="line"><a name="l06798"></a><span class="lineno"> 6798</span>&#160;</div><div class="line"><a name="l06799"></a><span class="lineno"> 6799</span>&#160;         <span class="comment">/* pick the best signed linear format based upon what preserves the sample rate the best. */</span></div><div class="line"><a name="l06800"></a><span class="lineno"> 6800</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aa81c8462bd0574f4f9e09e71f2772f44">ao2_replace</a>(best_src_fmt, <a class="code" href="../../db/d1c/format__cache_8h.html#ab660f51155ceeabb4abd0e25cd3a11a6">ast_format_cache_get_slin_by_rate</a>(best_sample_rate));</div><div class="line"><a name="l06801"></a><span class="lineno"> 6801</span>&#160;      }</div><div class="line"><a name="l06802"></a><span class="lineno"> 6802</span>&#160;   }</div><div class="line"><a name="l06803"></a><span class="lineno"> 6803</span>&#160;</div><div class="line"><a name="l06804"></a><span class="lineno"> 6804</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d28/channel_8c.html#a9107a83365cbf327cc0d12cb0dbd28d8">ast_set_read_format</a>(from, best_src_fmt)) {</div><div class="line"><a name="l06805"></a><span class="lineno"> 6805</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to set read format on channel %s to %s\n&quot;</span>,</div><div class="line"><a name="l06806"></a><span class="lineno"> 6806</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(from), <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(best_src_fmt));</div><div class="line"><a name="l06807"></a><span class="lineno"> 6807</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06808"></a><span class="lineno"> 6808</span>&#160;   }</div><div class="line"><a name="l06809"></a><span class="lineno"> 6809</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d28/channel_8c.html#abbdfb98077180544657b2d16c5d25f74">ast_set_write_format</a>(to, best_src_fmt)) {</div><div class="line"><a name="l06810"></a><span class="lineno"> 6810</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to set write format on channel %s to %s\n&quot;</span>,</div><div class="line"><a name="l06811"></a><span class="lineno"> 6811</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(to), <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(best_src_fmt));</div><div class="line"><a name="l06812"></a><span class="lineno"> 6812</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06813"></a><span class="lineno"> 6813</span>&#160;   }</div><div class="line"><a name="l06814"></a><span class="lineno"> 6814</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06815"></a><span class="lineno"> 6815</span>&#160;}</div><div class="line"><a name="l06816"></a><span class="lineno"> 6816</span>&#160;</div><div class="line"><a name="l06817"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a4aff0f5358bdc107a92320b4c4631834"> 6817</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a4aff0f5358bdc107a92320b4c4631834">ast_channel_make_compatible</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *peer)</div><div class="line"><a name="l06818"></a><span class="lineno"> 6818</span>&#160;{</div><div class="line"><a name="l06819"></a><span class="lineno"> 6819</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l06820"></a><span class="lineno"> 6820</span>&#160;<span class="comment">    * Set up translation from the peer to the chan first in case we</span></div><div class="line"><a name="l06821"></a><span class="lineno"> 6821</span>&#160;<span class="comment">    * need to hear any in-band tones and the other direction fails.</span></div><div class="line"><a name="l06822"></a><span class="lineno"> 6822</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l06823"></a><span class="lineno"> 6823</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d28/channel_8c.html#a269e229318912967cf9c939d2b7b52e7">ast_channel_make_compatible_helper</a>(peer, chan)) {</div><div class="line"><a name="l06824"></a><span class="lineno"> 6824</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06825"></a><span class="lineno"> 6825</span>&#160;   }</div><div class="line"><a name="l06826"></a><span class="lineno"> 6826</span>&#160;</div><div class="line"><a name="l06827"></a><span class="lineno"> 6827</span>&#160;   <span class="comment">/* Set up translation from the chan to the peer */</span></div><div class="line"><a name="l06828"></a><span class="lineno"> 6828</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d28/channel_8c.html#a269e229318912967cf9c939d2b7b52e7">ast_channel_make_compatible_helper</a>(chan, peer)) {</div><div class="line"><a name="l06829"></a><span class="lineno"> 6829</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06830"></a><span class="lineno"> 6830</span>&#160;   }</div><div class="line"><a name="l06831"></a><span class="lineno"> 6831</span>&#160;</div><div class="line"><a name="l06832"></a><span class="lineno"> 6832</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06833"></a><span class="lineno"> 6833</span>&#160;}</div><div class="line"><a name="l06834"></a><span class="lineno"> 6834</span>&#160;<span class="comment"></span></div><div class="line"><a name="l06835"></a><span class="lineno"> 6835</span>&#160;<span class="comment">/*! \brief this function simply changes the name of the channel and issues a manager_event</span></div><div class="line"><a name="l06836"></a><span class="lineno"> 6836</span>&#160;<span class="comment"> *         with out unlinking and linking the channel from the ao2_container.  This should</span></div><div class="line"><a name="l06837"></a><span class="lineno"> 6837</span>&#160;<span class="comment"> *         only be used when the channel has already been unlinked from the ao2_container.</span></div><div class="line"><a name="l06838"></a><span class="lineno"> 6838</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l06839"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a7b4442ac5fb6820df03e3a660b8e8344"> 6839</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a7b4442ac5fb6820df03e3a660b8e8344">__ast_change_name_nolink</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *newname)</div><div class="line"><a name="l06840"></a><span class="lineno"> 6840</span>&#160;{</div><div class="line"><a name="l06841"></a><span class="lineno"> 6841</span>&#160;   <span class="comment">/*** DOCUMENTATION</span></div><div class="line"><a name="l06842"></a><span class="lineno"> 6842</span>&#160;<span class="comment">      &lt;managerEventInstance&gt;</span></div><div class="line"><a name="l06843"></a><span class="lineno"> 6843</span>&#160;<span class="comment">         &lt;synopsis&gt;Raised when the name of a channel is changed.&lt;/synopsis&gt;</span></div><div class="line"><a name="l06844"></a><span class="lineno"> 6844</span>&#160;<span class="comment">      &lt;/managerEventInstance&gt;</span></div><div class="line"><a name="l06845"></a><span class="lineno"> 6845</span>&#160;<span class="comment">   ***/</span></div><div class="line"><a name="l06846"></a><span class="lineno"> 6846</span>&#160;   <a class="code" href="../../db/d45/manager_8h.html#ad6a2ad9ec5b951d49f796d1534c70b5e">ast_manager_event</a>(chan, <a class="code" href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a>, <span class="stringliteral">&quot;Rename&quot;</span>,</div><div class="line"><a name="l06847"></a><span class="lineno"> 6847</span>&#160;      <span class="stringliteral">&quot;Channel: %s\r\n&quot;</span></div><div class="line"><a name="l06848"></a><span class="lineno"> 6848</span>&#160;      <span class="stringliteral">&quot;Newname: %s\r\n&quot;</span></div><div class="line"><a name="l06849"></a><span class="lineno"> 6849</span>&#160;      <span class="stringliteral">&quot;Uniqueid: %s\r\n&quot;</span>,</div><div class="line"><a name="l06850"></a><span class="lineno"> 6850</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), newname, <a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(chan));</div><div class="line"><a name="l06851"></a><span class="lineno"> 6851</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a2a098f55377d125e8346655f5a50612d">ast_channel_name_set</a>(chan, newname);</div><div class="line"><a name="l06852"></a><span class="lineno"> 6852</span>&#160;}</div><div class="line"><a name="l06853"></a><span class="lineno"> 6853</span>&#160;</div><div class="line"><a name="l06854"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aed0df108a26552c41985e4762e4993d8"> 6854</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#aed0df108a26552c41985e4762e4993d8">ast_change_name</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *newname)</div><div class="line"><a name="l06855"></a><span class="lineno"> 6855</span>&#160;{</div><div class="line"><a name="l06856"></a><span class="lineno"> 6856</span>&#160;   <span class="comment">/* We must re-link, as the hash value will change here. */</span></div><div class="line"><a name="l06857"></a><span class="lineno"> 6857</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(channels);</div><div class="line"><a name="l06858"></a><span class="lineno"> 6858</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l06859"></a><span class="lineno"> 6859</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a>(channels, chan);</div><div class="line"><a name="l06860"></a><span class="lineno"> 6860</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a7b4442ac5fb6820df03e3a660b8e8344">__ast_change_name_nolink</a>(chan, newname);</div><div class="line"><a name="l06861"></a><span class="lineno"> 6861</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a>(channels, chan);</div><div class="line"><a name="l06862"></a><span class="lineno"> 6862</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l06863"></a><span class="lineno"> 6863</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(channels);</div><div class="line"><a name="l06864"></a><span class="lineno"> 6864</span>&#160;}</div><div class="line"><a name="l06865"></a><span class="lineno"> 6865</span>&#160;</div><div class="line"><a name="l06866"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a892b6550a4f90b70ad92198c9d05cedc"> 6866</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a892b6550a4f90b70ad92198c9d05cedc">ast_channel_inherit_variables</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *parent, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *child)</div><div class="line"><a name="l06867"></a><span class="lineno"> 6867</span>&#160;{</div><div class="line"><a name="l06868"></a><span class="lineno"> 6868</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d7d/structast__var__t.html">ast_var_t</a> *current;</div><div class="line"><a name="l06869"></a><span class="lineno"> 6869</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d7d/structast__var__t.html">ast_var_t</a> *newvar;</div><div class="line"><a name="l06870"></a><span class="lineno"> 6870</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *varname;</div><div class="line"><a name="l06871"></a><span class="lineno"> 6871</span>&#160;   <span class="keywordtype">int</span> vartype;</div><div class="line"><a name="l06872"></a><span class="lineno"> 6872</span>&#160;</div><div class="line"><a name="l06873"></a><span class="lineno"> 6873</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(<a class="code" href="../../d5/d7b/channel_8h.html#add6255866ea1651a90cf70d963c4920a">ast_channel_varshead</a>((<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *) parent), current, <a class="code" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">entries</a>) {</div><div class="line"><a name="l06874"></a><span class="lineno"> 6874</span>&#160;      varname = <a class="code" href="../../d9/de7/chanvars_8h.html#a37f22870d234aefac66dafb58f8b86fd">ast_var_full_name</a>(current);</div><div class="line"><a name="l06875"></a><span class="lineno"> 6875</span>&#160;      <span class="keywordflow">if</span> (!varname) {</div><div class="line"><a name="l06876"></a><span class="lineno"> 6876</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l06877"></a><span class="lineno"> 6877</span>&#160;      }</div><div class="line"><a name="l06878"></a><span class="lineno"> 6878</span>&#160;</div><div class="line"><a name="l06879"></a><span class="lineno"> 6879</span>&#160;      vartype = 0;</div><div class="line"><a name="l06880"></a><span class="lineno"> 6880</span>&#160;      <span class="keywordflow">if</span> (varname[0] == <span class="charliteral">&#39;_&#39;</span>) {</div><div class="line"><a name="l06881"></a><span class="lineno"> 6881</span>&#160;         vartype = 1;</div><div class="line"><a name="l06882"></a><span class="lineno"> 6882</span>&#160;         <span class="keywordflow">if</span> (varname[1] == <span class="charliteral">&#39;_&#39;</span>) {</div><div class="line"><a name="l06883"></a><span class="lineno"> 6883</span>&#160;            vartype = 2;</div><div class="line"><a name="l06884"></a><span class="lineno"> 6884</span>&#160;         }</div><div class="line"><a name="l06885"></a><span class="lineno"> 6885</span>&#160;      }</div><div class="line"><a name="l06886"></a><span class="lineno"> 6886</span>&#160;</div><div class="line"><a name="l06887"></a><span class="lineno"> 6887</span>&#160;      <span class="keywordflow">switch</span> (vartype) {</div><div class="line"><a name="l06888"></a><span class="lineno"> 6888</span>&#160;      <span class="keywordflow">case</span> 1:</div><div class="line"><a name="l06889"></a><span class="lineno"> 6889</span>&#160;         newvar = <a class="code" href="../../d9/de7/chanvars_8h.html#a78deeb18e93b145e9895346cef766577">ast_var_assign</a>(&amp;varname[1], <a class="code" href="../../d9/de7/chanvars_8h.html#a8e0081172db71c5021d20706c50d959c">ast_var_value</a>(current));</div><div class="line"><a name="l06890"></a><span class="lineno"> 6890</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06891"></a><span class="lineno"> 6891</span>&#160;      <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l06892"></a><span class="lineno"> 6892</span>&#160;         newvar = <a class="code" href="../../d9/de7/chanvars_8h.html#a78deeb18e93b145e9895346cef766577">ast_var_assign</a>(varname, <a class="code" href="../../d9/de7/chanvars_8h.html#a8e0081172db71c5021d20706c50d959c">ast_var_value</a>(current));</div><div class="line"><a name="l06893"></a><span class="lineno"> 6893</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06894"></a><span class="lineno"> 6894</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l06895"></a><span class="lineno"> 6895</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l06896"></a><span class="lineno"> 6896</span>&#160;      }</div><div class="line"><a name="l06897"></a><span class="lineno"> 6897</span>&#160;      <span class="keywordflow">if</span> (newvar) {</div><div class="line"><a name="l06898"></a><span class="lineno"> 6898</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Inheriting variable %s from %s to %s.\n&quot;</span>,</div><div class="line"><a name="l06899"></a><span class="lineno"> 6899</span>&#160;            <a class="code" href="../../d9/de7/chanvars_8h.html#a37f22870d234aefac66dafb58f8b86fd">ast_var_full_name</a>(newvar), <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(parent),</div><div class="line"><a name="l06900"></a><span class="lineno"> 6900</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(child));</div><div class="line"><a name="l06901"></a><span class="lineno"> 6901</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(<a class="code" href="../../d5/d7b/channel_8h.html#add6255866ea1651a90cf70d963c4920a">ast_channel_varshead</a>(child), newvar, <a class="code" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">entries</a>);</div><div class="line"><a name="l06902"></a><span class="lineno"> 6902</span>&#160;         <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga17518a82a3bc958cfb53d954dc14d630">ast_channel_publish_varset</a>(child, <a class="code" href="../../d9/de7/chanvars_8h.html#a37f22870d234aefac66dafb58f8b86fd">ast_var_full_name</a>(newvar),</div><div class="line"><a name="l06903"></a><span class="lineno"> 6903</span>&#160;            <a class="code" href="../../d9/de7/chanvars_8h.html#a8e0081172db71c5021d20706c50d959c">ast_var_value</a>(newvar));</div><div class="line"><a name="l06904"></a><span class="lineno"> 6904</span>&#160;      }</div><div class="line"><a name="l06905"></a><span class="lineno"> 6905</span>&#160;   }</div><div class="line"><a name="l06906"></a><span class="lineno"> 6906</span>&#160;}</div><div class="line"><a name="l06907"></a><span class="lineno"> 6907</span>&#160;<span class="comment"></span></div><div class="line"><a name="l06908"></a><span class="lineno"> 6908</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l06909"></a><span class="lineno"> 6909</span>&#160;<span class="comment">  \brief Clone channel variables from &#39;clone&#39; channel into &#39;original&#39; channel</span></div><div class="line"><a name="l06910"></a><span class="lineno"> 6910</span>&#160;<span class="comment"></span></div><div class="line"><a name="l06911"></a><span class="lineno"> 6911</span>&#160;<span class="comment">  All variables except those related to app_groupcount are cloned.</span></div><div class="line"><a name="l06912"></a><span class="lineno"> 6912</span>&#160;<span class="comment">  Variables are actually _removed_ from &#39;clone&#39; channel, presumably</span></div><div class="line"><a name="l06913"></a><span class="lineno"> 6913</span>&#160;<span class="comment">  because it will subsequently be destroyed.</span></div><div class="line"><a name="l06914"></a><span class="lineno"> 6914</span>&#160;<span class="comment"></span></div><div class="line"><a name="l06915"></a><span class="lineno"> 6915</span>&#160;<span class="comment">  \note Assumes locks will be in place on both channels when called.</span></div><div class="line"><a name="l06916"></a><span class="lineno"> 6916</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l06917"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a21d6a634f2f99c44233e6c734aadc233"> 6917</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a21d6a634f2f99c44233e6c734aadc233">clone_variables</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *original, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *clonechan)</div><div class="line"><a name="l06918"></a><span class="lineno"> 6918</span>&#160;{</div><div class="line"><a name="l06919"></a><span class="lineno"> 6919</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d7d/structast__var__t.html">ast_var_t</a> *current, *newvar;</div><div class="line"><a name="l06920"></a><span class="lineno"> 6920</span>&#160;   <span class="comment">/* Append variables from clone channel into original channel */</span></div><div class="line"><a name="l06921"></a><span class="lineno"> 6921</span>&#160;   <span class="comment">/* XXX Is this always correct?  We have to in order to keep MACROS working XXX */</span></div><div class="line"><a name="l06922"></a><span class="lineno"> 6922</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ad66405f1d0b9e1fb484643d9a36e94ed">AST_LIST_APPEND_LIST</a>(<a class="code" href="../../d5/d7b/channel_8h.html#add6255866ea1651a90cf70d963c4920a">ast_channel_varshead</a>(original), <a class="code" href="../../d5/d7b/channel_8h.html#add6255866ea1651a90cf70d963c4920a">ast_channel_varshead</a>(clonechan), <a class="code" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">entries</a>);</div><div class="line"><a name="l06923"></a><span class="lineno"> 6923</span>&#160;</div><div class="line"><a name="l06924"></a><span class="lineno"> 6924</span>&#160;   <span class="comment">/* then, dup the varshead list into the clone */</span></div><div class="line"><a name="l06925"></a><span class="lineno"> 6925</span>&#160;</div><div class="line"><a name="l06926"></a><span class="lineno"> 6926</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(<a class="code" href="../../d5/d7b/channel_8h.html#add6255866ea1651a90cf70d963c4920a">ast_channel_varshead</a>(original), current, <a class="code" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">entries</a>) {</div><div class="line"><a name="l06927"></a><span class="lineno"> 6927</span>&#160;      newvar = <a class="code" href="../../d9/de7/chanvars_8h.html#a78deeb18e93b145e9895346cef766577">ast_var_assign</a>(current-&gt;<a class="code" href="../../d0/d7d/structast__var__t.html#a2a7f851274ec18e17d38114c39b8511a">name</a>, current-&gt;<a class="code" href="../../d0/d7d/structast__var__t.html#a325611b97f57f55a57b2a7cf3238ef54">value</a>);</div><div class="line"><a name="l06928"></a><span class="lineno"> 6928</span>&#160;      <span class="keywordflow">if</span> (newvar)</div><div class="line"><a name="l06929"></a><span class="lineno"> 6929</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(<a class="code" href="../../d5/d7b/channel_8h.html#add6255866ea1651a90cf70d963c4920a">ast_channel_varshead</a>(clonechan), newvar, <a class="code" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">entries</a>);</div><div class="line"><a name="l06930"></a><span class="lineno"> 6930</span>&#160;   }</div><div class="line"><a name="l06931"></a><span class="lineno"> 6931</span>&#160;}</div><div class="line"><a name="l06932"></a><span class="lineno"> 6932</span>&#160;</div><div class="line"><a name="l06933"></a><span class="lineno"> 6933</span>&#160;</div><div class="line"><a name="l06934"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aac59b275abb3611bd20074c54bf093df"> 6934</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#aac59b275abb3611bd20074c54bf093df">ast_channel_name_to_dial_string</a>(<span class="keywordtype">char</span> *channel_name)</div><div class="line"><a name="l06935"></a><span class="lineno"> 6935</span>&#160;{</div><div class="line"><a name="l06936"></a><span class="lineno"> 6936</span>&#160;   <span class="keywordtype">char</span> *dash;</div><div class="line"><a name="l06937"></a><span class="lineno"> 6937</span>&#160;</div><div class="line"><a name="l06938"></a><span class="lineno"> 6938</span>&#160;   <span class="comment">/* Truncate after the dash */</span></div><div class="line"><a name="l06939"></a><span class="lineno"> 6939</span>&#160;   dash = strrchr(channel_name, <span class="charliteral">&#39;-&#39;</span>);</div><div class="line"><a name="l06940"></a><span class="lineno"> 6940</span>&#160;   <span class="keywordflow">if</span> (dash) {</div><div class="line"><a name="l06941"></a><span class="lineno"> 6941</span>&#160;      *dash = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l06942"></a><span class="lineno"> 6942</span>&#160;   }</div><div class="line"><a name="l06943"></a><span class="lineno"> 6943</span>&#160;}</div><div class="line"><a name="l06944"></a><span class="lineno"> 6944</span>&#160;<span class="comment"></span></div><div class="line"><a name="l06945"></a><span class="lineno"> 6945</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l06946"></a><span class="lineno"> 6946</span>&#160;<span class="comment"> * \brief Masquerade a channel</span></div><div class="line"><a name="l06947"></a><span class="lineno"> 6947</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l06948"></a><span class="lineno"> 6948</span>&#160;<span class="comment"> * \note Assumes _NO_ channels and _NO_ channel pvt&#39;s are locked.  If a channel is locked while calling</span></div><div class="line"><a name="l06949"></a><span class="lineno"> 6949</span>&#160;<span class="comment"> *       this function, it invalidates our channel container locking order.  All channels</span></div><div class="line"><a name="l06950"></a><span class="lineno"> 6950</span>&#160;<span class="comment"> *       must be unlocked before it is permissible to lock the channels&#39; ao2 container.</span></div><div class="line"><a name="l06951"></a><span class="lineno"> 6951</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l06952"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a01a29e89df22b89cd98b70914d1aa40c"> 6952</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a01a29e89df22b89cd98b70914d1aa40c">channel_do_masquerade</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *original, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *clonechan)</div><div class="line"><a name="l06953"></a><span class="lineno"> 6953</span>&#160;{</div><div class="line"><a name="l06954"></a><span class="lineno"> 6954</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l06955"></a><span class="lineno"> 6955</span>&#160;   <span class="keywordtype">int</span> origstate;</div><div class="line"><a name="l06956"></a><span class="lineno"> 6956</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> orig_disablestatecache;</div><div class="line"><a name="l06957"></a><span class="lineno"> 6957</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> clone_disablestatecache;</div><div class="line"><a name="l06958"></a><span class="lineno"> 6958</span>&#160;   <span class="keywordtype">int</span> generator_fd;</div><div class="line"><a name="l06959"></a><span class="lineno"> 6959</span>&#160;   <span class="keywordtype">int</span> visible_indication;</div><div class="line"><a name="l06960"></a><span class="lineno"> 6960</span>&#160;   <span class="keywordtype">int</span> clone_hold_state;</div><div class="line"><a name="l06961"></a><span class="lineno"> 6961</span>&#160;   <span class="keywordtype">int</span> moh_is_playing;</div><div class="line"><a name="l06962"></a><span class="lineno"> 6962</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *current;</div><div class="line"><a name="l06963"></a><span class="lineno"> 6963</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d4/d85/structast__channel__tech.html">ast_channel_tech</a> *t;</div><div class="line"><a name="l06964"></a><span class="lineno"> 6964</span>&#160;   <span class="keywordtype">void</span> *t_pvt;</div><div class="line"><a name="l06965"></a><span class="lineno"> 6965</span>&#160;   <span class="keyword">union </span>{</div><div class="line"><a name="l06966"></a><span class="lineno"> 6966</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d5/d49/structast__hangup__handler__list.html">ast_hangup_handler_list</a> handlers;</div><div class="line"><a name="l06967"></a><span class="lineno"> 6967</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d1/dd1/structast__party__dialed.html">ast_party_dialed</a> dialed;</div><div class="line"><a name="l06968"></a><span class="lineno"> 6968</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/d77/structast__party__caller.html">ast_party_caller</a> caller;</div><div class="line"><a name="l06969"></a><span class="lineno"> 6969</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> connected;</div><div class="line"><a name="l06970"></a><span class="lineno"> 6970</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../df/d44/structast__party__redirecting.html">ast_party_redirecting</a> redirecting;</div><div class="line"><a name="l06971"></a><span class="lineno"> 6971</span>&#160;   } exchange;</div><div class="line"><a name="l06972"></a><span class="lineno"> 6972</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *bridged;</div><div class="line"><a name="l06973"></a><span class="lineno"> 6973</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *rformat;</div><div class="line"><a name="l06974"></a><span class="lineno"> 6974</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *wformat;</div><div class="line"><a name="l06975"></a><span class="lineno"> 6975</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *tmp_format;</div><div class="line"><a name="l06976"></a><span class="lineno"> 6976</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *tmp_cap;</div><div class="line"><a name="l06977"></a><span class="lineno"> 6977</span>&#160;   <span class="keywordtype">char</span> tmp_name[<a class="code" href="../../d5/d7b/channel_8h.html#ab57c278099ea5f8d7cedbb41eba58b56">AST_CHANNEL_NAME</a>];</div><div class="line"><a name="l06978"></a><span class="lineno"> 6978</span>&#160;   <span class="keywordtype">char</span> clone_sending_dtmf_digit;</div><div class="line"><a name="l06979"></a><span class="lineno"> 6979</span>&#160;   <span class="keyword">struct </span>timeval clone_sending_dtmf_tv;</div><div class="line"><a name="l06980"></a><span class="lineno"> 6980</span>&#160;</div><div class="line"><a name="l06981"></a><span class="lineno"> 6981</span>&#160;   <span class="comment">/* XXX This operation is a bit odd.  We&#39;re essentially putting the guts of</span></div><div class="line"><a name="l06982"></a><span class="lineno"> 6982</span>&#160;<span class="comment">    * the clone channel into the original channel.  Start by killing off the</span></div><div class="line"><a name="l06983"></a><span class="lineno"> 6983</span>&#160;<span class="comment">    * original channel&#39;s backend.  While the features are nice, which is the</span></div><div class="line"><a name="l06984"></a><span class="lineno"> 6984</span>&#160;<span class="comment">    * reason we&#39;re keeping it, it&#39;s still awesomely weird. XXX */</span></div><div class="line"><a name="l06985"></a><span class="lineno"> 6985</span>&#160;</div><div class="line"><a name="l06986"></a><span class="lineno"> 6986</span>&#160;   <span class="comment">/* Indicate to each channel that a masquerade is about to begin. */</span></div><div class="line"><a name="l06987"></a><span class="lineno"> 6987</span>&#160;   x = 1;</div><div class="line"><a name="l06988"></a><span class="lineno"> 6988</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#acea4077a84f9d8ffac3c41bf660e3219">ast_indicate_data</a>(original, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af699fa9e173afdd4c1fea90ee892330e">AST_CONTROL_MASQUERADE_NOTIFY</a>, &amp;x, <span class="keyword">sizeof</span>(x));</div><div class="line"><a name="l06989"></a><span class="lineno"> 6989</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#acea4077a84f9d8ffac3c41bf660e3219">ast_indicate_data</a>(clonechan, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af699fa9e173afdd4c1fea90ee892330e">AST_CONTROL_MASQUERADE_NOTIFY</a>, &amp;x, <span class="keyword">sizeof</span>(x));</div><div class="line"><a name="l06990"></a><span class="lineno"> 6990</span>&#160;</div><div class="line"><a name="l06991"></a><span class="lineno"> 6991</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l06992"></a><span class="lineno"> 6992</span>&#160;<span class="comment">    * The container lock is necessary for proper locking order</span></div><div class="line"><a name="l06993"></a><span class="lineno"> 6993</span>&#160;<span class="comment">    * because the channels must be unlinked to change their</span></div><div class="line"><a name="l06994"></a><span class="lineno"> 6994</span>&#160;<span class="comment">    * names.</span></div><div class="line"><a name="l06995"></a><span class="lineno"> 6995</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l06996"></a><span class="lineno"> 6996</span>&#160;<span class="comment">    * The original and clonechan locks must be held while the</span></div><div class="line"><a name="l06997"></a><span class="lineno"> 6997</span>&#160;<span class="comment">    * channel contents are shuffled around for the masquerade.</span></div><div class="line"><a name="l06998"></a><span class="lineno"> 6998</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l06999"></a><span class="lineno"> 6999</span>&#160;<span class="comment">    * The masq and masqr pointers need to be left alone until the masquerade</span></div><div class="line"><a name="l07000"></a><span class="lineno"> 7000</span>&#160;<span class="comment">    * has restabilized the channels to hold off ast_hangup() and until</span></div><div class="line"><a name="l07001"></a><span class="lineno"> 7001</span>&#160;<span class="comment">    * AST_FLAG_ZOMBIE can be set on the clonechan.</span></div><div class="line"><a name="l07002"></a><span class="lineno"> 7002</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l07003"></a><span class="lineno"> 7003</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(channels);</div><div class="line"><a name="l07004"></a><span class="lineno"> 7004</span>&#160;</div><div class="line"><a name="l07005"></a><span class="lineno"> 7005</span>&#160;   <span class="comment">/* Bump the refs to ensure that they won&#39;t dissapear on us. */</span></div><div class="line"><a name="l07006"></a><span class="lineno"> 7006</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a>(original);</div><div class="line"><a name="l07007"></a><span class="lineno"> 7007</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a>(clonechan);</div><div class="line"><a name="l07008"></a><span class="lineno"> 7008</span>&#160;</div><div class="line"><a name="l07009"></a><span class="lineno"> 7009</span>&#160;   <span class="comment">/* unlink from channels container as name (which is the hash value) will change */</span></div><div class="line"><a name="l07010"></a><span class="lineno"> 7010</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a>(channels, original);</div><div class="line"><a name="l07011"></a><span class="lineno"> 7011</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a>(channels, clonechan);</div><div class="line"><a name="l07012"></a><span class="lineno"> 7012</span>&#160;</div><div class="line"><a name="l07013"></a><span class="lineno"> 7013</span>&#160;   moh_is_playing = <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(original), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5af342fb5a757280799be80248e898d14a">AST_FLAG_MOH</a>);</div><div class="line"><a name="l07014"></a><span class="lineno"> 7014</span>&#160;   <span class="keywordflow">if</span> (moh_is_playing) {</div><div class="line"><a name="l07015"></a><span class="lineno"> 7015</span>&#160;      <span class="comment">/* Stop MOH on the old original channel. */</span></div><div class="line"><a name="l07016"></a><span class="lineno"> 7016</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a52fead32f69533450f3c05b2e6960149">ast_moh_stop</a>(original);</div><div class="line"><a name="l07017"></a><span class="lineno"> 7017</span>&#160;   }</div><div class="line"><a name="l07018"></a><span class="lineno"> 7018</span>&#160;</div><div class="line"><a name="l07019"></a><span class="lineno"> 7019</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l07020"></a><span class="lineno"> 7020</span>&#160;<span class="comment">    * Stop any visible indication on the original channel so we can</span></div><div class="line"><a name="l07021"></a><span class="lineno"> 7021</span>&#160;<span class="comment">    * transfer it to the clonechan taking the original&#39;s place.</span></div><div class="line"><a name="l07022"></a><span class="lineno"> 7022</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l07023"></a><span class="lineno"> 7023</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(original);</div><div class="line"><a name="l07024"></a><span class="lineno"> 7024</span>&#160;   visible_indication = <a class="code" href="../../d5/d7b/channel_8h.html#adfe39dc3611c6eda03b3dd3fbde10892">ast_channel_visible_indication</a>(original);</div><div class="line"><a name="l07025"></a><span class="lineno"> 7025</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(original);</div><div class="line"><a name="l07026"></a><span class="lineno"> 7026</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(original, -1);</div><div class="line"><a name="l07027"></a><span class="lineno"> 7027</span>&#160;</div><div class="line"><a name="l07028"></a><span class="lineno"> 7028</span>&#160;   <span class="comment">/* Start the masquerade channel contents rearangement. */</span></div><div class="line"><a name="l07029"></a><span class="lineno"> 7029</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a695e5b4fcf983db6451b583fbd647424">ast_channel_lock_both</a>(original, clonechan);</div><div class="line"><a name="l07030"></a><span class="lineno"> 7030</span>&#160;</div><div class="line"><a name="l07031"></a><span class="lineno"> 7031</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Actually Masquerading %s(%u) into the structure of %s(%u)\n&quot;</span>,</div><div class="line"><a name="l07032"></a><span class="lineno"> 7032</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(clonechan), <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(clonechan),</div><div class="line"><a name="l07033"></a><span class="lineno"> 7033</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(original), <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(original));</div><div class="line"><a name="l07034"></a><span class="lineno"> 7034</span>&#160;</div><div class="line"><a name="l07035"></a><span class="lineno"> 7035</span>&#160;   <span class="comment">/* When all is said and done force new snapshot segments so they are</span></div><div class="line"><a name="l07036"></a><span class="lineno"> 7036</span>&#160;<span class="comment">    * up to date.</span></div><div class="line"><a name="l07037"></a><span class="lineno"> 7037</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l07038"></a><span class="lineno"> 7038</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac53c766578be61738c20d8ccd4f097ed">ast_channel_snapshot_segment_flags</a>(original), <a class="code" href="../../d5/d60/utils_8h.html#afb8683b4d96960d7a82a86a974a57599">AST_FLAGS_ALL</a>);</div><div class="line"><a name="l07039"></a><span class="lineno"> 7039</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac53c766578be61738c20d8ccd4f097ed">ast_channel_snapshot_segment_flags</a>(clonechan), <a class="code" href="../../d5/d60/utils_8h.html#afb8683b4d96960d7a82a86a974a57599">AST_FLAGS_ALL</a>);</div><div class="line"><a name="l07040"></a><span class="lineno"> 7040</span>&#160;</div><div class="line"><a name="l07041"></a><span class="lineno"> 7041</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l07042"></a><span class="lineno"> 7042</span>&#160;<span class="comment">    * Remember the original read/write formats.  We turn off any</span></div><div class="line"><a name="l07043"></a><span class="lineno"> 7043</span>&#160;<span class="comment">    * translation on either one</span></div><div class="line"><a name="l07044"></a><span class="lineno"> 7044</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l07045"></a><span class="lineno"> 7045</span>&#160;   rformat = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a>(original));</div><div class="line"><a name="l07046"></a><span class="lineno"> 7046</span>&#160;   wformat = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a>(original));</div><div class="line"><a name="l07047"></a><span class="lineno"> 7047</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#ac9d4d03c20c48d15d9e91a85c5e35d67">free_translation</a>(clonechan);</div><div class="line"><a name="l07048"></a><span class="lineno"> 7048</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#ac9d4d03c20c48d15d9e91a85c5e35d67">free_translation</a>(original);</div><div class="line"><a name="l07049"></a><span class="lineno"> 7049</span>&#160;</div><div class="line"><a name="l07050"></a><span class="lineno"> 7050</span>&#160;   clone_hold_state = <a class="code" href="../../d5/d7b/channel_8h.html#ac13c3b096520bacd17e9c023280e580f">ast_channel_hold_state</a>(clonechan);</div><div class="line"><a name="l07051"></a><span class="lineno"> 7051</span>&#160;</div><div class="line"><a name="l07052"></a><span class="lineno"> 7052</span>&#160;   <span class="comment">/* Save the current DTMF digit being sent if any. */</span></div><div class="line"><a name="l07053"></a><span class="lineno"> 7053</span>&#160;   clone_sending_dtmf_digit = <a class="code" href="../../d5/d7b/channel_8h.html#adfb1957995e60f6711ae15b8b77a0ba6">ast_channel_sending_dtmf_digit</a>(clonechan);</div><div class="line"><a name="l07054"></a><span class="lineno"> 7054</span>&#160;   clone_sending_dtmf_tv = <a class="code" href="../../d5/d7b/channel_8h.html#a4ebd6b7a4ee77aad814080881a495dc9">ast_channel_sending_dtmf_tv</a>(clonechan);</div><div class="line"><a name="l07055"></a><span class="lineno"> 7055</span>&#160;</div><div class="line"><a name="l07056"></a><span class="lineno"> 7056</span>&#160;   <span class="comment">/* Swap uniqueid&#39;s of the channels. This needs to happen before channel renames,</span></div><div class="line"><a name="l07057"></a><span class="lineno"> 7057</span>&#160;<span class="comment">    * so rename events get the proper id&#39;s.</span></div><div class="line"><a name="l07058"></a><span class="lineno"> 7058</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l07059"></a><span class="lineno"> 7059</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#abccd7e584530bf477182f2a5286c4d88">ast_channel_internal_swap_uniqueid_and_linkedid</a>(clonechan, original);</div><div class="line"><a name="l07060"></a><span class="lineno"> 7060</span>&#160;</div><div class="line"><a name="l07061"></a><span class="lineno"> 7061</span>&#160;   <span class="comment">/* Make sure the Stasis topic on the channel is updated appropriately */</span></div><div class="line"><a name="l07062"></a><span class="lineno"> 7062</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a833298ae10beaad5b8ad6de2d6ce0467">ast_channel_internal_swap_topics</a>(clonechan, original);</div><div class="line"><a name="l07063"></a><span class="lineno"> 7063</span>&#160;</div><div class="line"><a name="l07064"></a><span class="lineno"> 7064</span>&#160;   <span class="comment">/* Swap endpoint forward so channel created with endpoint exchanges its state</span></div><div class="line"><a name="l07065"></a><span class="lineno"> 7065</span>&#160;<span class="comment">    * with other channel for proper endpoint cleanup.</span></div><div class="line"><a name="l07066"></a><span class="lineno"> 7066</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l07067"></a><span class="lineno"> 7067</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a3c54600ed92c29ddb3c9c7abb1418063">ast_channel_internal_swap_endpoint_forward</a>(clonechan, original);</div><div class="line"><a name="l07068"></a><span class="lineno"> 7068</span>&#160;</div><div class="line"><a name="l07069"></a><span class="lineno"> 7069</span>&#160;   <span class="comment">/* The old snapshots need to follow the channels so the snapshot update is correct */</span></div><div class="line"><a name="l07070"></a><span class="lineno"> 7070</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ad046e99c98cdb295c85c81b39884c879">ast_channel_internal_swap_snapshots</a>(clonechan, original);</div><div class="line"><a name="l07071"></a><span class="lineno"> 7071</span>&#160;</div><div class="line"><a name="l07072"></a><span class="lineno"> 7072</span>&#160;   <span class="comment">/* Swap channel names. This uses ast_channel_name_set directly, so we</span></div><div class="line"><a name="l07073"></a><span class="lineno"> 7073</span>&#160;<span class="comment">    * don&#39;t get any spurious rename events.</span></div><div class="line"><a name="l07074"></a><span class="lineno"> 7074</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l07075"></a><span class="lineno"> 7075</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(tmp_name, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(clonechan), <span class="keyword">sizeof</span>(tmp_name));</div><div class="line"><a name="l07076"></a><span class="lineno"> 7076</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a2a098f55377d125e8346655f5a50612d">ast_channel_name_set</a>(clonechan, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(original));</div><div class="line"><a name="l07077"></a><span class="lineno"> 7077</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a2a098f55377d125e8346655f5a50612d">ast_channel_name_set</a>(original, tmp_name);</div><div class="line"><a name="l07078"></a><span class="lineno"> 7078</span>&#160;</div><div class="line"><a name="l07079"></a><span class="lineno"> 7079</span>&#160;   <span class="comment">/* Swap the technologies */</span></div><div class="line"><a name="l07080"></a><span class="lineno"> 7080</span>&#160;   t = <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(original);</div><div class="line"><a name="l07081"></a><span class="lineno"> 7081</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af0566a4937a5bb1323825e4ef89c0e5a">ast_channel_tech_set</a>(original, <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(clonechan));</div><div class="line"><a name="l07082"></a><span class="lineno"> 7082</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af0566a4937a5bb1323825e4ef89c0e5a">ast_channel_tech_set</a>(clonechan, t);</div><div class="line"><a name="l07083"></a><span class="lineno"> 7083</span>&#160;</div><div class="line"><a name="l07084"></a><span class="lineno"> 7084</span>&#160;   t_pvt = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(original);</div><div class="line"><a name="l07085"></a><span class="lineno"> 7085</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a929b8b2cb36308e5cf4e51ed880bfcba">ast_channel_tech_pvt_set</a>(original, <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(clonechan));</div><div class="line"><a name="l07086"></a><span class="lineno"> 7086</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a929b8b2cb36308e5cf4e51ed880bfcba">ast_channel_tech_pvt_set</a>(clonechan, t_pvt);</div><div class="line"><a name="l07087"></a><span class="lineno"> 7087</span>&#160;</div><div class="line"><a name="l07088"></a><span class="lineno"> 7088</span>&#160;   <span class="comment">/* Swap the alertpipes */</span></div><div class="line"><a name="l07089"></a><span class="lineno"> 7089</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a00f1b53d822255e76aaa4c3694fbbc89">ast_channel_internal_alertpipe_swap</a>(original, clonechan);</div><div class="line"><a name="l07090"></a><span class="lineno"> 7090</span>&#160;</div><div class="line"><a name="l07091"></a><span class="lineno"> 7091</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l07092"></a><span class="lineno"> 7092</span>&#160;<span class="comment">    * Swap the readq&#39;s.  The end result should be this:</span></div><div class="line"><a name="l07093"></a><span class="lineno"> 7093</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l07094"></a><span class="lineno"> 7094</span>&#160;<span class="comment">    *  1) All frames should be on the new (original) channel.</span></div><div class="line"><a name="l07095"></a><span class="lineno"> 7095</span>&#160;<span class="comment">    *  2) Any frames that were already on the new channel before this</span></div><div class="line"><a name="l07096"></a><span class="lineno"> 7096</span>&#160;<span class="comment">    *     masquerade need to be at the end of the readq, after all of the</span></div><div class="line"><a name="l07097"></a><span class="lineno"> 7097</span>&#160;<span class="comment">    *     frames on the old (clone) channel.</span></div><div class="line"><a name="l07098"></a><span class="lineno"> 7098</span>&#160;<span class="comment">    *  3) The alertpipe needs to get poked for every frame that was already</span></div><div class="line"><a name="l07099"></a><span class="lineno"> 7099</span>&#160;<span class="comment">    *     on the new channel, since we are now using the alert pipe from the</span></div><div class="line"><a name="l07100"></a><span class="lineno"> 7100</span>&#160;<span class="comment">    *     old (clone) channel.</span></div><div class="line"><a name="l07101"></a><span class="lineno"> 7101</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l07102"></a><span class="lineno"> 7102</span>&#160;   {</div><div class="line"><a name="l07103"></a><span class="lineno"> 7103</span>&#160;      <a class="code" href="../../d1/d8f/reqresp__parser_8h.html#a7e4aa55331b8292eff94249de72b807d">AST_LIST_HEAD_NOLOCK</a>(, <a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a>) tmp_readq;</div><div class="line"><a name="l07104"></a><span class="lineno"> 7104</span>&#160;</div><div class="line"><a name="l07105"></a><span class="lineno"> 7105</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a>(&amp;tmp_readq);</div><div class="line"><a name="l07106"></a><span class="lineno"> 7106</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#ad66405f1d0b9e1fb484643d9a36e94ed">AST_LIST_APPEND_LIST</a>(&amp;tmp_readq, <a class="code" href="../../d5/d7b/channel_8h.html#ad89ab3133d87a496f63da917148d02be">ast_channel_readq</a>(original), <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l07107"></a><span class="lineno"> 7107</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#ad66405f1d0b9e1fb484643d9a36e94ed">AST_LIST_APPEND_LIST</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad89ab3133d87a496f63da917148d02be">ast_channel_readq</a>(original), <a class="code" href="../../d5/d7b/channel_8h.html#ad89ab3133d87a496f63da917148d02be">ast_channel_readq</a>(clonechan), <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l07108"></a><span class="lineno"> 7108</span>&#160;</div><div class="line"><a name="l07109"></a><span class="lineno"> 7109</span>&#160;      <span class="keywordflow">while</span> ((current = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;tmp_readq, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>))) {</div><div class="line"><a name="l07110"></a><span class="lineno"> 7110</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad89ab3133d87a496f63da917148d02be">ast_channel_readq</a>(original), current, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l07111"></a><span class="lineno"> 7111</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#aaca68f142e039bcb3c69cc7524b958a8">ast_channel_alert_write</a>(original)) {</div><div class="line"><a name="l07112"></a><span class="lineno"> 7112</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;write() failed: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l07113"></a><span class="lineno"> 7113</span>&#160;         }</div><div class="line"><a name="l07114"></a><span class="lineno"> 7114</span>&#160;      }</div><div class="line"><a name="l07115"></a><span class="lineno"> 7115</span>&#160;   }</div><div class="line"><a name="l07116"></a><span class="lineno"> 7116</span>&#160;</div><div class="line"><a name="l07117"></a><span class="lineno"> 7117</span>&#160;   <span class="comment">/* Swap the raw formats */</span></div><div class="line"><a name="l07118"></a><span class="lineno"> 7118</span>&#160;   tmp_format = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aa6ceb6b9067d793c4d00c566ae585f0b">ast_channel_rawreadformat</a>(original));</div><div class="line"><a name="l07119"></a><span class="lineno"> 7119</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a921a2d48faa9ed99a59d33e7aefa7888">ast_channel_set_rawreadformat</a>(original, <a class="code" href="../../d5/d7b/channel_8h.html#aa6ceb6b9067d793c4d00c566ae585f0b">ast_channel_rawreadformat</a>(clonechan));</div><div class="line"><a name="l07120"></a><span class="lineno"> 7120</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a921a2d48faa9ed99a59d33e7aefa7888">ast_channel_set_rawreadformat</a>(clonechan, tmp_format);</div><div class="line"><a name="l07121"></a><span class="lineno"> 7121</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(tmp_format);</div><div class="line"><a name="l07122"></a><span class="lineno"> 7122</span>&#160;</div><div class="line"><a name="l07123"></a><span class="lineno"> 7123</span>&#160;   tmp_format = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad27c52cda6e6435a121900661ad5bdce">ast_channel_rawwriteformat</a>(original));</div><div class="line"><a name="l07124"></a><span class="lineno"> 7124</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aa2df58e77751b741b6891afe210b5b8c">ast_channel_set_rawwriteformat</a>(original, <a class="code" href="../../d5/d7b/channel_8h.html#ad27c52cda6e6435a121900661ad5bdce">ast_channel_rawwriteformat</a>(clonechan));</div><div class="line"><a name="l07125"></a><span class="lineno"> 7125</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aa2df58e77751b741b6891afe210b5b8c">ast_channel_set_rawwriteformat</a>(clonechan, tmp_format);</div><div class="line"><a name="l07126"></a><span class="lineno"> 7126</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(tmp_format);</div><div class="line"><a name="l07127"></a><span class="lineno"> 7127</span>&#160;</div><div class="line"><a name="l07128"></a><span class="lineno"> 7128</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a6c0dd56eedc72a6b0b871436d55443f5">ast_channel_softhangup_internal_flag_set</a>(clonechan, <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2e185ce313026e13ed90ae3a319c9cb7">AST_SOFTHANGUP_DEV</a>);</div><div class="line"><a name="l07129"></a><span class="lineno"> 7129</span>&#160;</div><div class="line"><a name="l07130"></a><span class="lineno"> 7130</span>&#160;   <span class="comment">/* And of course, so does our current state.  Note we need not</span></div><div class="line"><a name="l07131"></a><span class="lineno"> 7131</span>&#160;<span class="comment">      call ast_setstate since the event manager doesn&#39;t really consider</span></div><div class="line"><a name="l07132"></a><span class="lineno"> 7132</span>&#160;<span class="comment">      these separate.  We do this early so that the clone has the proper</span></div><div class="line"><a name="l07133"></a><span class="lineno"> 7133</span>&#160;<span class="comment">      state of the original channel. */</span></div><div class="line"><a name="l07134"></a><span class="lineno"> 7134</span>&#160;   origstate = <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(original);</div><div class="line"><a name="l07135"></a><span class="lineno"> 7135</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#acc7e03f08c0df9fe5f5ff801db51224d">ast_channel_state_set</a>(original, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(clonechan));</div><div class="line"><a name="l07136"></a><span class="lineno"> 7136</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#acc7e03f08c0df9fe5f5ff801db51224d">ast_channel_state_set</a>(clonechan, origstate);</div><div class="line"><a name="l07137"></a><span class="lineno"> 7137</span>&#160;</div><div class="line"><a name="l07138"></a><span class="lineno"> 7138</span>&#160;   <span class="comment">/* And the swap the cachable state too. Otherwise we&#39;d start caching</span></div><div class="line"><a name="l07139"></a><span class="lineno"> 7139</span>&#160;<span class="comment">    * Local channels and ignoring real ones. */</span></div><div class="line"><a name="l07140"></a><span class="lineno"> 7140</span>&#160;   orig_disablestatecache = <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(original), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a29df923fcf5fe2c681eaa2114f1c41a6">AST_FLAG_DISABLE_DEVSTATE_CACHE</a>);</div><div class="line"><a name="l07141"></a><span class="lineno"> 7141</span>&#160;   clone_disablestatecache = <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(clonechan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a29df923fcf5fe2c681eaa2114f1c41a6">AST_FLAG_DISABLE_DEVSTATE_CACHE</a>);</div><div class="line"><a name="l07142"></a><span class="lineno"> 7142</span>&#160;   <span class="keywordflow">if</span> (orig_disablestatecache != clone_disablestatecache) {</div><div class="line"><a name="l07143"></a><span class="lineno"> 7143</span>&#160;      <span class="keywordflow">if</span> (orig_disablestatecache) {</div><div class="line"><a name="l07144"></a><span class="lineno"> 7144</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(original), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a29df923fcf5fe2c681eaa2114f1c41a6">AST_FLAG_DISABLE_DEVSTATE_CACHE</a>);</div><div class="line"><a name="l07145"></a><span class="lineno"> 7145</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(clonechan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a29df923fcf5fe2c681eaa2114f1c41a6">AST_FLAG_DISABLE_DEVSTATE_CACHE</a>);</div><div class="line"><a name="l07146"></a><span class="lineno"> 7146</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07147"></a><span class="lineno"> 7147</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(original), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a29df923fcf5fe2c681eaa2114f1c41a6">AST_FLAG_DISABLE_DEVSTATE_CACHE</a>);</div><div class="line"><a name="l07148"></a><span class="lineno"> 7148</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(clonechan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a29df923fcf5fe2c681eaa2114f1c41a6">AST_FLAG_DISABLE_DEVSTATE_CACHE</a>);</div><div class="line"><a name="l07149"></a><span class="lineno"> 7149</span>&#160;      }</div><div class="line"><a name="l07150"></a><span class="lineno"> 7150</span>&#160;   }</div><div class="line"><a name="l07151"></a><span class="lineno"> 7151</span>&#160;</div><div class="line"><a name="l07152"></a><span class="lineno"> 7152</span>&#160;   <span class="comment">/* Update the type. */</span></div><div class="line"><a name="l07153"></a><span class="lineno"> 7153</span>&#160;   t_pvt = <a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(original);</div><div class="line"><a name="l07154"></a><span class="lineno"> 7154</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aa52fe100a9952fc355bfa6a0582d87dd">ast_channel_monitor_set</a>(original, <a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(clonechan));</div><div class="line"><a name="l07155"></a><span class="lineno"> 7155</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aa52fe100a9952fc355bfa6a0582d87dd">ast_channel_monitor_set</a>(clonechan, t_pvt);</div><div class="line"><a name="l07156"></a><span class="lineno"> 7156</span>&#160;</div><div class="line"><a name="l07157"></a><span class="lineno"> 7157</span>&#160;   <span class="comment">/* Keep the same language.  */</span></div><div class="line"><a name="l07158"></a><span class="lineno"> 7158</span>&#160;   ast_channel_language_set(original, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(clonechan));</div><div class="line"><a name="l07159"></a><span class="lineno"> 7159</span>&#160;</div><div class="line"><a name="l07160"></a><span class="lineno"> 7160</span>&#160;   <span class="comment">/* Keep the same parkinglot. */</span></div><div class="line"><a name="l07161"></a><span class="lineno"> 7161</span>&#160;   ast_channel_parkinglot_set(original, <a class="code" href="../../d5/d7b/channel_8h.html#abdaf681794561f17c4598cb2f16f06b0">ast_channel_parkinglot</a>(clonechan));</div><div class="line"><a name="l07162"></a><span class="lineno"> 7162</span>&#160;</div><div class="line"><a name="l07163"></a><span class="lineno"> 7163</span>&#160;   <span class="comment">/* Clear all existing file descriptors but retain the generator */</span></div><div class="line"><a name="l07164"></a><span class="lineno"> 7164</span>&#160;   generator_fd = <a class="code" href="../../d5/d7b/channel_8h.html#a8e5cf0a066beee895cfd9048e4abdbb3">ast_channel_fd</a>(original, <a class="code" href="../../d5/d7b/channel_8h.html#a34c26382160debe3411987ec0df1f927">AST_GENERATOR_FD</a>);</div><div class="line"><a name="l07165"></a><span class="lineno"> 7165</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a3fd653bf72b897400f2e3f5c0ad480da">ast_channel_internal_fd_clear_all</a>(original);</div><div class="line"><a name="l07166"></a><span class="lineno"> 7166</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#aca37ca2f3d55a223d26617329ed48a3e">ast_channel_set_fd</a>(original, <a class="code" href="../../d5/d7b/channel_8h.html#a34c26382160debe3411987ec0df1f927">AST_GENERATOR_FD</a>, generator_fd);</div><div class="line"><a name="l07167"></a><span class="lineno"> 7167</span>&#160;</div><div class="line"><a name="l07168"></a><span class="lineno"> 7168</span>&#160;   <span class="comment">/* Copy all file descriptors present on clonechan to original, skipping generator */</span></div><div class="line"><a name="l07169"></a><span class="lineno"> 7169</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../d5/d7b/channel_8h.html#acd38e0ed015ff8ee77f3eef0f425a85f">ast_channel_fd_count</a>(clonechan); x++) {</div><div class="line"><a name="l07170"></a><span class="lineno"> 7170</span>&#160;      <span class="keywordflow">if</span> (x != <a class="code" href="../../d5/d7b/channel_8h.html#a34c26382160debe3411987ec0df1f927">AST_GENERATOR_FD</a>)</div><div class="line"><a name="l07171"></a><span class="lineno"> 7171</span>&#160;         <a class="code" href="../../d4/d28/channel_8c.html#aca37ca2f3d55a223d26617329ed48a3e">ast_channel_set_fd</a>(original, x, <a class="code" href="../../d5/d7b/channel_8h.html#a8e5cf0a066beee895cfd9048e4abdbb3">ast_channel_fd</a>(clonechan, x));</div><div class="line"><a name="l07172"></a><span class="lineno"> 7172</span>&#160;   }</div><div class="line"><a name="l07173"></a><span class="lineno"> 7173</span>&#160;</div><div class="line"><a name="l07174"></a><span class="lineno"> 7174</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a69e90e401aa3da48a6eef5139727cbb3">ast_app_group_update</a>(clonechan, original);</div><div class="line"><a name="l07175"></a><span class="lineno"> 7175</span>&#160;</div><div class="line"><a name="l07176"></a><span class="lineno"> 7176</span>&#160;   <span class="comment">/* Swap hangup handlers. */</span></div><div class="line"><a name="l07177"></a><span class="lineno"> 7177</span>&#160;   exchange.handlers = *<a class="code" href="../../d5/d7b/channel_8h.html#a7f1aac8d8ed115097063ae6922ec4029">ast_channel_hangup_handlers</a>(original);</div><div class="line"><a name="l07178"></a><span class="lineno"> 7178</span>&#160;   *<a class="code" href="../../d5/d7b/channel_8h.html#a7f1aac8d8ed115097063ae6922ec4029">ast_channel_hangup_handlers</a>(original) = *<a class="code" href="../../d5/d7b/channel_8h.html#a7f1aac8d8ed115097063ae6922ec4029">ast_channel_hangup_handlers</a>(clonechan);</div><div class="line"><a name="l07179"></a><span class="lineno"> 7179</span>&#160;   *<a class="code" href="../../d5/d7b/channel_8h.html#a7f1aac8d8ed115097063ae6922ec4029">ast_channel_hangup_handlers</a>(clonechan) = exchange.handlers;</div><div class="line"><a name="l07180"></a><span class="lineno"> 7180</span>&#160;</div><div class="line"><a name="l07181"></a><span class="lineno"> 7181</span>&#160;   <span class="comment">/* Call fixup handlers for the clone chan */</span></div><div class="line"><a name="l07182"></a><span class="lineno"> 7182</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aae56765bab2eed7bd11d8dca29b2975c">ast_channel_datastores</a>(clonechan))) {</div><div class="line"><a name="l07183"></a><span class="lineno"> 7183</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *ds;</div><div class="line"><a name="l07184"></a><span class="lineno"> 7184</span>&#160;      <span class="comment">/* We use a safe traversal here because some fixup routines actually</span></div><div class="line"><a name="l07185"></a><span class="lineno"> 7185</span>&#160;<span class="comment">       * remove the datastore from the list and free them.</span></div><div class="line"><a name="l07186"></a><span class="lineno"> 7186</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l07187"></a><span class="lineno"> 7187</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aae56765bab2eed7bd11d8dca29b2975c">ast_channel_datastores</a>(clonechan), ds, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l07188"></a><span class="lineno"> 7188</span>&#160;         <span class="keywordflow">if</span> (ds-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a03ea21247b5d39b165343431b44131f1">info</a>-&gt;<a class="code" href="../../d9/dfb/structast__datastore__info.html#a330ef558cb83d02af90a40e01fc83e6b">chan_fixup</a>) {</div><div class="line"><a name="l07189"></a><span class="lineno"> 7189</span>&#160;            ds-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a03ea21247b5d39b165343431b44131f1">info</a>-&gt;<a class="code" href="../../d9/dfb/structast__datastore__info.html#a330ef558cb83d02af90a40e01fc83e6b">chan_fixup</a>(ds-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>, clonechan, original);</div><div class="line"><a name="l07190"></a><span class="lineno"> 7190</span>&#160;         }</div><div class="line"><a name="l07191"></a><span class="lineno"> 7191</span>&#160;      }</div><div class="line"><a name="l07192"></a><span class="lineno"> 7192</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l07193"></a><span class="lineno"> 7193</span>&#160;   }</div><div class="line"><a name="l07194"></a><span class="lineno"> 7194</span>&#160;</div><div class="line"><a name="l07195"></a><span class="lineno"> 7195</span>&#160;   <span class="comment">/* Call breakdown handlers for the original chan */</span></div><div class="line"><a name="l07196"></a><span class="lineno"> 7196</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aae56765bab2eed7bd11d8dca29b2975c">ast_channel_datastores</a>(original))) {</div><div class="line"><a name="l07197"></a><span class="lineno"> 7197</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *ds;</div><div class="line"><a name="l07198"></a><span class="lineno"> 7198</span>&#160;      <span class="comment">/* We use a safe traversal here because some breakdown routines may</span></div><div class="line"><a name="l07199"></a><span class="lineno"> 7199</span>&#160;<span class="comment">       * remove the datastore from the list and free them.</span></div><div class="line"><a name="l07200"></a><span class="lineno"> 7200</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l07201"></a><span class="lineno"> 7201</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aae56765bab2eed7bd11d8dca29b2975c">ast_channel_datastores</a>(original), ds, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l07202"></a><span class="lineno"> 7202</span>&#160;         <span class="keywordflow">if</span> (ds-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a03ea21247b5d39b165343431b44131f1">info</a>-&gt;<a class="code" href="../../d9/dfb/structast__datastore__info.html#aa2b1ed933a027724ee0467c5af78bfb8">chan_breakdown</a>) {</div><div class="line"><a name="l07203"></a><span class="lineno"> 7203</span>&#160;            ds-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a03ea21247b5d39b165343431b44131f1">info</a>-&gt;<a class="code" href="../../d9/dfb/structast__datastore__info.html#aa2b1ed933a027724ee0467c5af78bfb8">chan_breakdown</a>(ds-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>, clonechan, original);</div><div class="line"><a name="l07204"></a><span class="lineno"> 7204</span>&#160;         }</div><div class="line"><a name="l07205"></a><span class="lineno"> 7205</span>&#160;      }</div><div class="line"><a name="l07206"></a><span class="lineno"> 7206</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l07207"></a><span class="lineno"> 7207</span>&#160;   }</div><div class="line"><a name="l07208"></a><span class="lineno"> 7208</span>&#160;</div><div class="line"><a name="l07209"></a><span class="lineno"> 7209</span>&#160;   <span class="comment">/* Move data stores over */</span></div><div class="line"><a name="l07210"></a><span class="lineno"> 7210</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aae56765bab2eed7bd11d8dca29b2975c">ast_channel_datastores</a>(clonechan))) {</div><div class="line"><a name="l07211"></a><span class="lineno"> 7211</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#ad66405f1d0b9e1fb484643d9a36e94ed">AST_LIST_APPEND_LIST</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aae56765bab2eed7bd11d8dca29b2975c">ast_channel_datastores</a>(original), <a class="code" href="../../d5/d7b/channel_8h.html#aae56765bab2eed7bd11d8dca29b2975c">ast_channel_datastores</a>(clonechan), <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l07212"></a><span class="lineno"> 7212</span>&#160;   }</div><div class="line"><a name="l07213"></a><span class="lineno"> 7213</span>&#160;</div><div class="line"><a name="l07214"></a><span class="lineno"> 7214</span>&#160;   <span class="comment">/* Move framehooks over */</span></div><div class="line"><a name="l07215"></a><span class="lineno"> 7215</span>&#160;   <a class="code" href="../../db/d3c/framehook_8h.html#aa169f02b832ec449533552ec590ed54d">ast_framehook_list_fixup</a>(clonechan, original);</div><div class="line"><a name="l07216"></a><span class="lineno"> 7216</span>&#160;</div><div class="line"><a name="l07217"></a><span class="lineno"> 7217</span>&#160;   <span class="comment">/* Move audiohooks over */</span></div><div class="line"><a name="l07218"></a><span class="lineno"> 7218</span>&#160;   <a class="code" href="../../d0/d79/audiohook_8h.html#aee985c02a01f9cbd475bf4481f5f66f9">ast_audiohook_move_all</a>(clonechan, original);</div><div class="line"><a name="l07219"></a><span class="lineno"> 7219</span>&#160;</div><div class="line"><a name="l07220"></a><span class="lineno"> 7220</span>&#160;   <a class="code" href="../../d8/d6c/autochan_8h.html#a7c71b7d2333439b3822440ac14654026">ast_autochan_new_channel</a>(clonechan, original);</div><div class="line"><a name="l07221"></a><span class="lineno"> 7221</span>&#160;</div><div class="line"><a name="l07222"></a><span class="lineno"> 7222</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a21d6a634f2f99c44233e6c734aadc233">clone_variables</a>(original, clonechan);</div><div class="line"><a name="l07223"></a><span class="lineno"> 7223</span>&#160;   <span class="comment">/* Presense of ADSI capable CPE follows clone */</span></div><div class="line"><a name="l07224"></a><span class="lineno"> 7224</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aed40a28831fcb5791cd63c1b8761d659">ast_channel_adsicpe_set</a>(original, <a class="code" href="../../d5/d7b/channel_8h.html#a828f537544a2ad2352c56c078390a0bd">ast_channel_adsicpe</a>(clonechan));</div><div class="line"><a name="l07225"></a><span class="lineno"> 7225</span>&#160;   <span class="comment">/* Bridge remains the same */</span></div><div class="line"><a name="l07226"></a><span class="lineno"> 7226</span>&#160;   <span class="comment">/* CDR fields remain the same */</span></div><div class="line"><a name="l07227"></a><span class="lineno"> 7227</span>&#160;   <span class="comment">/* XXX What about blocking, softhangup, blocker, and lock and blockproc? XXX */</span></div><div class="line"><a name="l07228"></a><span class="lineno"> 7228</span>&#160;   <span class="comment">/* Application and data remain the same */</span></div><div class="line"><a name="l07229"></a><span class="lineno"> 7229</span>&#160;   <span class="comment">/* Clone exception  becomes real one, as with fdno */</span></div><div class="line"><a name="l07230"></a><span class="lineno"> 7230</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(original), <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(clonechan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a75202bcfa58fce5d40e2daddc73b8d11">AST_FLAG_EXCEPTION</a> | <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a36fa77a64746637c77c6b18a7999d0a2">AST_FLAG_OUTGOING</a>));</div><div class="line"><a name="l07231"></a><span class="lineno"> 7231</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aa2048158d099227002ac76f41865c5b5">ast_channel_fdno_set</a>(original, <a class="code" href="../../d5/d7b/channel_8h.html#a3e3e7e66e65ad9cdba2299e36b13e173">ast_channel_fdno</a>(clonechan));</div><div class="line"><a name="l07232"></a><span class="lineno"> 7232</span>&#160;   <span class="comment">/* Schedule context remains the same */</span></div><div class="line"><a name="l07233"></a><span class="lineno"> 7233</span>&#160;   <span class="comment">/* Stream stuff stays the same */</span></div><div class="line"><a name="l07234"></a><span class="lineno"> 7234</span>&#160;   <span class="comment">/* Keep the original state.  The fixup code will need to work with it most likely */</span></div><div class="line"><a name="l07235"></a><span class="lineno"> 7235</span>&#160;</div><div class="line"><a name="l07236"></a><span class="lineno"> 7236</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l07237"></a><span class="lineno"> 7237</span>&#160;<span class="comment">    * Just swap the whole structures, nevermind the allocations,</span></div><div class="line"><a name="l07238"></a><span class="lineno"> 7238</span>&#160;<span class="comment">    * they&#39;ll work themselves out.</span></div><div class="line"><a name="l07239"></a><span class="lineno"> 7239</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l07240"></a><span class="lineno"> 7240</span>&#160;   exchange.dialed = *<a class="code" href="../../d5/d7b/channel_8h.html#a63732831df3e7a0999b0900ec85c626a">ast_channel_dialed</a>(original);</div><div class="line"><a name="l07241"></a><span class="lineno"> 7241</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a1d97a054133db260e25368ca9f4432f6">ast_channel_dialed_set</a>(original, <a class="code" href="../../d5/d7b/channel_8h.html#a63732831df3e7a0999b0900ec85c626a">ast_channel_dialed</a>(clonechan));</div><div class="line"><a name="l07242"></a><span class="lineno"> 7242</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a1d97a054133db260e25368ca9f4432f6">ast_channel_dialed_set</a>(clonechan, &amp;exchange.<a class="code" href="../../df/d3c/structast__channel.html#abe3b191f9529aba5e60447f982310648">dialed</a>);</div><div class="line"><a name="l07243"></a><span class="lineno"> 7243</span>&#160;</div><div class="line"><a name="l07244"></a><span class="lineno"> 7244</span>&#160;   <span class="comment">/* Reset any earlier private caller id representations */</span></div><div class="line"><a name="l07245"></a><span class="lineno"> 7245</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#ab1c04d237cea67fefadaacc3f79497fa">ast_party_id_reset</a>(&amp;<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(original)-&gt;priv);</div><div class="line"><a name="l07246"></a><span class="lineno"> 7246</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#ab1c04d237cea67fefadaacc3f79497fa">ast_party_id_reset</a>(&amp;<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(clonechan)-&gt;priv);</div><div class="line"><a name="l07247"></a><span class="lineno"> 7247</span>&#160;</div><div class="line"><a name="l07248"></a><span class="lineno"> 7248</span>&#160;   exchange.caller = *<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(original);</div><div class="line"><a name="l07249"></a><span class="lineno"> 7249</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a16ef76c1e3a076b0daffda589ed8ab1a">ast_channel_caller_set</a>(original, <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(clonechan));</div><div class="line"><a name="l07250"></a><span class="lineno"> 7250</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a16ef76c1e3a076b0daffda589ed8ab1a">ast_channel_caller_set</a>(clonechan, &amp;exchange.<a class="code" href="../../df/d3c/structast__channel.html#aff76880df6a5121f2eb36109c79c28a2">caller</a>);</div><div class="line"><a name="l07251"></a><span class="lineno"> 7251</span>&#160;</div><div class="line"><a name="l07252"></a><span class="lineno"> 7252</span>&#160;   <span class="comment">/* Reset any earlier private connected id representations */</span></div><div class="line"><a name="l07253"></a><span class="lineno"> 7253</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#ab1c04d237cea67fefadaacc3f79497fa">ast_party_id_reset</a>(&amp;<a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(original)-&gt;priv);</div><div class="line"><a name="l07254"></a><span class="lineno"> 7254</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#ab1c04d237cea67fefadaacc3f79497fa">ast_party_id_reset</a>(&amp;<a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(clonechan)-&gt;priv);</div><div class="line"><a name="l07255"></a><span class="lineno"> 7255</span>&#160;</div><div class="line"><a name="l07256"></a><span class="lineno"> 7256</span>&#160;   exchange.connected = *<a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(original);</div><div class="line"><a name="l07257"></a><span class="lineno"> 7257</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#acab5d4332748c259f614751318d1f92c">ast_channel_connected_set</a>(original, <a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(clonechan));</div><div class="line"><a name="l07258"></a><span class="lineno"> 7258</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#acab5d4332748c259f614751318d1f92c">ast_channel_connected_set</a>(clonechan, &amp;exchange.<a class="code" href="../../df/d3c/structast__channel.html#a5023e29d4234076952bfecfff178b566">connected</a>);</div><div class="line"><a name="l07259"></a><span class="lineno"> 7259</span>&#160;</div><div class="line"><a name="l07260"></a><span class="lineno"> 7260</span>&#160;   <span class="comment">/* Reset any earlier private redirecting orig, from or to representations */</span></div><div class="line"><a name="l07261"></a><span class="lineno"> 7261</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#ab1c04d237cea67fefadaacc3f79497fa">ast_party_id_reset</a>(&amp;<a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(original)-&gt;priv_orig);</div><div class="line"><a name="l07262"></a><span class="lineno"> 7262</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#ab1c04d237cea67fefadaacc3f79497fa">ast_party_id_reset</a>(&amp;<a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(clonechan)-&gt;priv_orig);</div><div class="line"><a name="l07263"></a><span class="lineno"> 7263</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#ab1c04d237cea67fefadaacc3f79497fa">ast_party_id_reset</a>(&amp;<a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(original)-&gt;priv_from);</div><div class="line"><a name="l07264"></a><span class="lineno"> 7264</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#ab1c04d237cea67fefadaacc3f79497fa">ast_party_id_reset</a>(&amp;<a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(clonechan)-&gt;priv_from);</div><div class="line"><a name="l07265"></a><span class="lineno"> 7265</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#ab1c04d237cea67fefadaacc3f79497fa">ast_party_id_reset</a>(&amp;<a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(original)-&gt;priv_to);</div><div class="line"><a name="l07266"></a><span class="lineno"> 7266</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#ab1c04d237cea67fefadaacc3f79497fa">ast_party_id_reset</a>(&amp;<a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(clonechan)-&gt;priv_to);</div><div class="line"><a name="l07267"></a><span class="lineno"> 7267</span>&#160;</div><div class="line"><a name="l07268"></a><span class="lineno"> 7268</span>&#160;   exchange.redirecting = *<a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(original);</div><div class="line"><a name="l07269"></a><span class="lineno"> 7269</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a63332f4790afb1a01cfcbf7df16b2dbc">ast_channel_redirecting_set</a>(original, <a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(clonechan));</div><div class="line"><a name="l07270"></a><span class="lineno"> 7270</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a63332f4790afb1a01cfcbf7df16b2dbc">ast_channel_redirecting_set</a>(clonechan, &amp;exchange.<a class="code" href="../../df/d3c/structast__channel.html#ab9ba3b6c1a314a533dad7b61ed0be35e">redirecting</a>);</div><div class="line"><a name="l07271"></a><span class="lineno"> 7271</span>&#160;</div><div class="line"><a name="l07272"></a><span class="lineno"> 7272</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaec5f1aaded97197250e063ed6c7ad857">ast_channel_publish_snapshot</a>(original);</div><div class="line"><a name="l07273"></a><span class="lineno"> 7273</span>&#160;</div><div class="line"><a name="l07274"></a><span class="lineno"> 7274</span>&#160;   <span class="comment">/* Restore original timing file descriptor */</span></div><div class="line"><a name="l07275"></a><span class="lineno"> 7275</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#aca37ca2f3d55a223d26617329ed48a3e">ast_channel_set_fd</a>(original, <a class="code" href="../../d5/d7b/channel_8h.html#aa2c87e87fcb0c34e45f4596448dea70e">AST_TIMING_FD</a>, <a class="code" href="../../d5/d7b/channel_8h.html#aa1a82c77c44469cd524ebb00357f673b">ast_channel_timingfd</a>(original));</div><div class="line"><a name="l07276"></a><span class="lineno"> 7276</span>&#160;</div><div class="line"><a name="l07277"></a><span class="lineno"> 7277</span>&#160;   <span class="comment">/* Our native formats are different now */</span></div><div class="line"><a name="l07278"></a><span class="lineno"> 7278</span>&#160;   tmp_cap = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l07279"></a><span class="lineno"> 7279</span>&#160;   <span class="keywordflow">if</span> (tmp_cap) {</div><div class="line"><a name="l07280"></a><span class="lineno"> 7280</span>&#160;      <a class="code" href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a>(tmp_cap, <a class="code" href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a>(clonechan), <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a>);</div><div class="line"><a name="l07281"></a><span class="lineno"> 7281</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a3c9c29fb2bc2b715fee335c1ffa50449">ast_channel_nativeformats_set</a>(original, tmp_cap);</div><div class="line"><a name="l07282"></a><span class="lineno"> 7282</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(tmp_cap, -1);</div><div class="line"><a name="l07283"></a><span class="lineno"> 7283</span>&#160;   }</div><div class="line"><a name="l07284"></a><span class="lineno"> 7284</span>&#160;</div><div class="line"><a name="l07285"></a><span class="lineno"> 7285</span>&#160;   <span class="comment">/* Context, extension, priority, app data, jump table,  remain the same */</span></div><div class="line"><a name="l07286"></a><span class="lineno"> 7286</span>&#160;   <span class="comment">/* pvt switches.  pbx stays the same, as does next */</span></div><div class="line"><a name="l07287"></a><span class="lineno"> 7287</span>&#160;</div><div class="line"><a name="l07288"></a><span class="lineno"> 7288</span>&#160;   <span class="comment">/* Set the write format */</span></div><div class="line"><a name="l07289"></a><span class="lineno"> 7289</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#abbdfb98077180544657b2d16c5d25f74">ast_set_write_format</a>(original, wformat);</div><div class="line"><a name="l07290"></a><span class="lineno"> 7290</span>&#160;</div><div class="line"><a name="l07291"></a><span class="lineno"> 7291</span>&#160;   <span class="comment">/* Set the read format */</span></div><div class="line"><a name="l07292"></a><span class="lineno"> 7292</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a9107a83365cbf327cc0d12cb0dbd28d8">ast_set_read_format</a>(original, rformat);</div><div class="line"><a name="l07293"></a><span class="lineno"> 7293</span>&#160;</div><div class="line"><a name="l07294"></a><span class="lineno"> 7294</span>&#160;   <span class="comment">/* Copy the music class */</span></div><div class="line"><a name="l07295"></a><span class="lineno"> 7295</span>&#160;   ast_channel_musicclass_set(original, <a class="code" href="../../d5/d7b/channel_8h.html#a9b745a6d0e3d7af90d2708dca5b5e069">ast_channel_musicclass</a>(clonechan));</div><div class="line"><a name="l07296"></a><span class="lineno"> 7296</span>&#160;</div><div class="line"><a name="l07297"></a><span class="lineno"> 7297</span>&#160;   <span class="comment">/* copy over accuntcode and set peeraccount across the bridge */</span></div><div class="line"><a name="l07298"></a><span class="lineno"> 7298</span>&#160;   ast_channel_accountcode_set(original, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1d6833a829f7402bbf9cf0383ae3ca00">ast_channel_accountcode</a>(clonechan), <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l07299"></a><span class="lineno"> 7299</span>&#160;</div><div class="line"><a name="l07300"></a><span class="lineno"> 7300</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Putting channel %s in %s/%s formats\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(original),</div><div class="line"><a name="l07301"></a><span class="lineno"> 7301</span>&#160;      <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(wformat), <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(rformat));</div><div class="line"><a name="l07302"></a><span class="lineno"> 7302</span>&#160;</div><div class="line"><a name="l07303"></a><span class="lineno"> 7303</span>&#160;   <span class="comment">/* Fixup the original clonechan&#39;s physical side */</span></div><div class="line"><a name="l07304"></a><span class="lineno"> 7304</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(original)-&gt;fixup &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(original)-&gt;fixup(clonechan, original)) {</div><div class="line"><a name="l07305"></a><span class="lineno"> 7305</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Channel type &#39;%s&#39; could not fixup channel %s, strange things may happen. (clonechan)\n&quot;</span>,</div><div class="line"><a name="l07306"></a><span class="lineno"> 7306</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(original)-&gt;<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(original));</div><div class="line"><a name="l07307"></a><span class="lineno"> 7307</span>&#160;   }</div><div class="line"><a name="l07308"></a><span class="lineno"> 7308</span>&#160;</div><div class="line"><a name="l07309"></a><span class="lineno"> 7309</span>&#160;   <span class="comment">/* Fixup the original original&#39;s physical side */</span></div><div class="line"><a name="l07310"></a><span class="lineno"> 7310</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(clonechan)-&gt;fixup &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(clonechan)-&gt;fixup(original, clonechan)) {</div><div class="line"><a name="l07311"></a><span class="lineno"> 7311</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Channel type &#39;%s&#39; could not fixup channel %s, strange things may happen. (original)\n&quot;</span>,</div><div class="line"><a name="l07312"></a><span class="lineno"> 7312</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(clonechan)-&gt;<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(clonechan));</div><div class="line"><a name="l07313"></a><span class="lineno"> 7313</span>&#160;   }</div><div class="line"><a name="l07314"></a><span class="lineno"> 7314</span>&#160;</div><div class="line"><a name="l07315"></a><span class="lineno"> 7315</span>&#160;   <a class="code" href="../../d5/de4/channel__internal_8h.html#a5c65bfe78b97d78dbd987b24928c04c7">ast_channel_internal_swap_stream_topology</a>(original, clonechan);</div><div class="line"><a name="l07316"></a><span class="lineno"> 7316</span>&#160;</div><div class="line"><a name="l07317"></a><span class="lineno"> 7317</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l07318"></a><span class="lineno"> 7318</span>&#160;<span class="comment">    * Now, at this point, the &quot;clone&quot; channel is totally F&#39;d up.</span></div><div class="line"><a name="l07319"></a><span class="lineno"> 7319</span>&#160;<span class="comment">    * We mark it as a zombie so nothing tries to touch it.</span></div><div class="line"><a name="l07320"></a><span class="lineno"> 7320</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l07321"></a><span class="lineno"> 7321</span>&#160;<span class="comment">    * This must be done before we unlock clonechan to prevent</span></div><div class="line"><a name="l07322"></a><span class="lineno"> 7322</span>&#160;<span class="comment">    * setting up another masquerade on the clonechan.</span></div><div class="line"><a name="l07323"></a><span class="lineno"> 7323</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l07324"></a><span class="lineno"> 7324</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(clonechan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a26796fa52cc5857446eec8d16a4b718d">AST_FLAG_ZOMBIE</a>);</div><div class="line"><a name="l07325"></a><span class="lineno"> 7325</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3df7007b550647c63a1b211181b55814">ast_queue_frame</a>(clonechan, &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>);</div><div class="line"><a name="l07326"></a><span class="lineno"> 7326</span>&#160;</div><div class="line"><a name="l07327"></a><span class="lineno"> 7327</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(original);</div><div class="line"><a name="l07328"></a><span class="lineno"> 7328</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(clonechan);</div><div class="line"><a name="l07329"></a><span class="lineno"> 7329</span>&#160;</div><div class="line"><a name="l07330"></a><span class="lineno"> 7330</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l07331"></a><span class="lineno"> 7331</span>&#160;<span class="comment">    * Indicate to each channel that a masquerade is complete.</span></div><div class="line"><a name="l07332"></a><span class="lineno"> 7332</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l07333"></a><span class="lineno"> 7333</span>&#160;<span class="comment">    * We can still do this to clonechan even though it is a</span></div><div class="line"><a name="l07334"></a><span class="lineno"> 7334</span>&#160;<span class="comment">    * zombie because ast_indicate_data() will explicitly pass</span></div><div class="line"><a name="l07335"></a><span class="lineno"> 7335</span>&#160;<span class="comment">    * this control and ast_hangup() is held off until the</span></div><div class="line"><a name="l07336"></a><span class="lineno"> 7336</span>&#160;<span class="comment">    * ast_channel_masq() and ast_channel_masqr() pointers are</span></div><div class="line"><a name="l07337"></a><span class="lineno"> 7337</span>&#160;<span class="comment">    * cleared.</span></div><div class="line"><a name="l07338"></a><span class="lineno"> 7338</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l07339"></a><span class="lineno"> 7339</span>&#160;   x = 0;</div><div class="line"><a name="l07340"></a><span class="lineno"> 7340</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#acea4077a84f9d8ffac3c41bf660e3219">ast_indicate_data</a>(original, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af699fa9e173afdd4c1fea90ee892330e">AST_CONTROL_MASQUERADE_NOTIFY</a>, &amp;x, <span class="keyword">sizeof</span>(x));</div><div class="line"><a name="l07341"></a><span class="lineno"> 7341</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#acea4077a84f9d8ffac3c41bf660e3219">ast_indicate_data</a>(clonechan, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af699fa9e173afdd4c1fea90ee892330e">AST_CONTROL_MASQUERADE_NOTIFY</a>, &amp;x, <span class="keyword">sizeof</span>(x));</div><div class="line"><a name="l07342"></a><span class="lineno"> 7342</span>&#160;</div><div class="line"><a name="l07343"></a><span class="lineno"> 7343</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#aeb11f378e45f0beb05de964b3af9a6bc">ast_bridge_notify_masquerade</a>(original);</div><div class="line"><a name="l07344"></a><span class="lineno"> 7344</span>&#160;</div><div class="line"><a name="l07345"></a><span class="lineno"> 7345</span>&#160;   <span class="keywordflow">if</span> (clone_hold_state == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5">AST_CONTROL_HOLD</a>) {</div><div class="line"><a name="l07346"></a><span class="lineno"> 7346</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Channel %s simulating UNHOLD for masquerade.\n&quot;</span>,</div><div class="line"><a name="l07347"></a><span class="lineno"> 7347</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(original));</div><div class="line"><a name="l07348"></a><span class="lineno"> 7348</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(original, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e">AST_CONTROL_UNHOLD</a>);</div><div class="line"><a name="l07349"></a><span class="lineno"> 7349</span>&#160;   }</div><div class="line"><a name="l07350"></a><span class="lineno"> 7350</span>&#160;   <span class="keywordflow">if</span> (clone_sending_dtmf_digit) {</div><div class="line"><a name="l07351"></a><span class="lineno"> 7351</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l07352"></a><span class="lineno"> 7352</span>&#160;<span class="comment">       * The clonechan was sending a DTMF digit that was not completed</span></div><div class="line"><a name="l07353"></a><span class="lineno"> 7353</span>&#160;<span class="comment">       * before the masquerade.</span></div><div class="line"><a name="l07354"></a><span class="lineno"> 7354</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l07355"></a><span class="lineno"> 7355</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a0b5ab7d69d45eb506f08997ccaddcf3b">ast_channel_end_dtmf</a>(original, clone_sending_dtmf_digit, clone_sending_dtmf_tv,</div><div class="line"><a name="l07356"></a><span class="lineno"> 7356</span>&#160;         <span class="stringliteral">&quot;masquerade&quot;</span>);</div><div class="line"><a name="l07357"></a><span class="lineno"> 7357</span>&#160;   }</div><div class="line"><a name="l07358"></a><span class="lineno"> 7358</span>&#160;</div><div class="line"><a name="l07359"></a><span class="lineno"> 7359</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l07360"></a><span class="lineno"> 7360</span>&#160;<span class="comment">    * If an indication is currently playing, maintain it on the</span></div><div class="line"><a name="l07361"></a><span class="lineno"> 7361</span>&#160;<span class="comment">    * channel that is taking the place of original.</span></div><div class="line"><a name="l07362"></a><span class="lineno"> 7362</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l07363"></a><span class="lineno"> 7363</span>&#160;<span class="comment">    * This is needed because the masquerade is swapping out the</span></div><div class="line"><a name="l07364"></a><span class="lineno"> 7364</span>&#160;<span class="comment">    * internals of the channel, and the new channel private data</span></div><div class="line"><a name="l07365"></a><span class="lineno"> 7365</span>&#160;<span class="comment">    * needs to be made aware of the current visible indication</span></div><div class="line"><a name="l07366"></a><span class="lineno"> 7366</span>&#160;<span class="comment">    * (RINGING, CONGESTION, etc.)</span></div><div class="line"><a name="l07367"></a><span class="lineno"> 7367</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l07368"></a><span class="lineno"> 7368</span>&#160;   <span class="keywordflow">if</span> (visible_indication) {</div><div class="line"><a name="l07369"></a><span class="lineno"> 7369</span>&#160;      <span class="keywordflow">if</span> (visible_indication == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5">AST_CONTROL_HOLD</a>) {</div><div class="line"><a name="l07370"></a><span class="lineno"> 7370</span>&#160;         <span class="keyword">const</span> <span class="keywordtype">char</span> *latest_musicclass;</div><div class="line"><a name="l07371"></a><span class="lineno"> 7371</span>&#160;         <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l07372"></a><span class="lineno"> 7372</span>&#160;</div><div class="line"><a name="l07373"></a><span class="lineno"> 7373</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(original);</div><div class="line"><a name="l07374"></a><span class="lineno"> 7374</span>&#160;         latest_musicclass = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a03cad86bc84ad7a0de6c70fef09e9dde">ast_channel_latest_musicclass</a>(original));</div><div class="line"><a name="l07375"></a><span class="lineno"> 7375</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(original);</div><div class="line"><a name="l07376"></a><span class="lineno"> 7376</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(latest_musicclass)) {</div><div class="line"><a name="l07377"></a><span class="lineno"> 7377</span>&#160;            latest_musicclass = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07378"></a><span class="lineno"> 7378</span>&#160;            len = 0;</div><div class="line"><a name="l07379"></a><span class="lineno"> 7379</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07380"></a><span class="lineno"> 7380</span>&#160;            len = strlen(latest_musicclass) + 1;</div><div class="line"><a name="l07381"></a><span class="lineno"> 7381</span>&#160;         }</div><div class="line"><a name="l07382"></a><span class="lineno"> 7382</span>&#160;         <a class="code" href="../../d4/d28/channel_8c.html#acea4077a84f9d8ffac3c41bf660e3219">ast_indicate_data</a>(original, visible_indication, latest_musicclass, len);</div><div class="line"><a name="l07383"></a><span class="lineno"> 7383</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07384"></a><span class="lineno"> 7384</span>&#160;         <a class="code" href="../../d4/d28/channel_8c.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(original, visible_indication);</div><div class="line"><a name="l07385"></a><span class="lineno"> 7385</span>&#160;      }</div><div class="line"><a name="l07386"></a><span class="lineno"> 7386</span>&#160;   }</div><div class="line"><a name="l07387"></a><span class="lineno"> 7387</span>&#160;</div><div class="line"><a name="l07388"></a><span class="lineno"> 7388</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l07389"></a><span class="lineno"> 7389</span>&#160;<span class="comment">    * If MOH was playing on the original channel then it needs to be</span></div><div class="line"><a name="l07390"></a><span class="lineno"> 7390</span>&#160;<span class="comment">    * maintained on the channel that is replacing it.</span></div><div class="line"><a name="l07391"></a><span class="lineno"> 7391</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l07392"></a><span class="lineno"> 7392</span>&#160;   <span class="keywordflow">if</span> (moh_is_playing) {</div><div class="line"><a name="l07393"></a><span class="lineno"> 7393</span>&#160;      <span class="comment">/* Start MOH on the new original channel. */</span></div><div class="line"><a name="l07394"></a><span class="lineno"> 7394</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a2acec01f2fddd8ca494d874003815cf7">ast_moh_start</a>(original, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07395"></a><span class="lineno"> 7395</span>&#160;   }</div><div class="line"><a name="l07396"></a><span class="lineno"> 7396</span>&#160;</div><div class="line"><a name="l07397"></a><span class="lineno"> 7397</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(original);</div><div class="line"><a name="l07398"></a><span class="lineno"> 7398</span>&#160;</div><div class="line"><a name="l07399"></a><span class="lineno"> 7399</span>&#160;   <span class="comment">/* Signal any blocker */</span></div><div class="line"><a name="l07400"></a><span class="lineno"> 7400</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(original), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ab5b2bec9425dd0cfc789d96ef229cb3a">AST_FLAG_BLOCKING</a>)) {</div><div class="line"><a name="l07401"></a><span class="lineno"> 7401</span>&#160;      pthread_kill(<a class="code" href="../../d5/d7b/channel_8h.html#a77fb68157dff2a7004641cb8c3bc7e3c">ast_channel_blocker</a>(original), SIGURG);</div><div class="line"><a name="l07402"></a><span class="lineno"> 7402</span>&#160;   }</div><div class="line"><a name="l07403"></a><span class="lineno"> 7403</span>&#160;</div><div class="line"><a name="l07404"></a><span class="lineno"> 7404</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Done Masquerading %s (%u)\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(original), <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(original));</div><div class="line"><a name="l07405"></a><span class="lineno"> 7405</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(original);</div><div class="line"><a name="l07406"></a><span class="lineno"> 7406</span>&#160;</div><div class="line"><a name="l07407"></a><span class="lineno"> 7407</span>&#160;   <span class="keywordflow">if</span> ((bridged = <a class="code" href="../../d4/d28/channel_8c.html#af9e27ecd92ff5aa897c9e058dfbd6510">ast_channel_bridge_peer</a>(original))) {</div><div class="line"><a name="l07408"></a><span class="lineno"> 7408</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(bridged, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af334ccaa958af9b049d6bfcaa41549b8">AST_CONTROL_SRCCHANGE</a>);</div><div class="line"><a name="l07409"></a><span class="lineno"> 7409</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(bridged);</div><div class="line"><a name="l07410"></a><span class="lineno"> 7410</span>&#160;   }</div><div class="line"><a name="l07411"></a><span class="lineno"> 7411</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(original, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af334ccaa958af9b049d6bfcaa41549b8">AST_CONTROL_SRCCHANGE</a>);</div><div class="line"><a name="l07412"></a><span class="lineno"> 7412</span>&#160;</div><div class="line"><a name="l07413"></a><span class="lineno"> 7413</span>&#160;   <span class="comment">/* Now that the operation is complete, we can clear the masq</span></div><div class="line"><a name="l07414"></a><span class="lineno"> 7414</span>&#160;<span class="comment">    * and masqr fields of both channels.</span></div><div class="line"><a name="l07415"></a><span class="lineno"> 7415</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l07416"></a><span class="lineno"> 7416</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a695e5b4fcf983db6451b583fbd647424">ast_channel_lock_both</a>(original, clonechan);</div><div class="line"><a name="l07417"></a><span class="lineno"> 7417</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af4d1b140188a723edd8c3c34ba18d8a9">ast_channel_masq_set</a>(original, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07418"></a><span class="lineno"> 7418</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ae38736e53a58aceb4fb010b61905edba">ast_channel_masqr_set</a>(clonechan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07419"></a><span class="lineno"> 7419</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(original);</div><div class="line"><a name="l07420"></a><span class="lineno"> 7420</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(clonechan);</div><div class="line"><a name="l07421"></a><span class="lineno"> 7421</span>&#160;</div><div class="line"><a name="l07422"></a><span class="lineno"> 7422</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a>(channels, clonechan);</div><div class="line"><a name="l07423"></a><span class="lineno"> 7423</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a>(channels, original);</div><div class="line"><a name="l07424"></a><span class="lineno"> 7424</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(channels);</div><div class="line"><a name="l07425"></a><span class="lineno"> 7425</span>&#160;</div><div class="line"><a name="l07426"></a><span class="lineno"> 7426</span>&#160;   <span class="comment">/* Release our held safety references. */</span></div><div class="line"><a name="l07427"></a><span class="lineno"> 7427</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(original);</div><div class="line"><a name="l07428"></a><span class="lineno"> 7428</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(clonechan);</div><div class="line"><a name="l07429"></a><span class="lineno"> 7429</span>&#160;</div><div class="line"><a name="l07430"></a><span class="lineno"> 7430</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(rformat);</div><div class="line"><a name="l07431"></a><span class="lineno"> 7431</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(wformat);</div><div class="line"><a name="l07432"></a><span class="lineno"> 7432</span>&#160;}</div><div class="line"><a name="l07433"></a><span class="lineno"> 7433</span>&#160;</div><div class="line"><a name="l07434"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a88d833a56ea7de33e230281c5c12b75d"> 7434</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a88d833a56ea7de33e230281c5c12b75d">ast_set_callerid</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#ade5a89f9bee15a492c760ec1765a292d">cid_name</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *cid_ani)</div><div class="line"><a name="l07435"></a><span class="lineno"> 7435</span>&#160;{</div><div class="line"><a name="l07436"></a><span class="lineno"> 7436</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l07437"></a><span class="lineno"> 7437</span>&#160;</div><div class="line"><a name="l07438"></a><span class="lineno"> 7438</span>&#160;   <span class="keywordflow">if</span> (cid_num) {</div><div class="line"><a name="l07439"></a><span class="lineno"> 7439</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = 1;</div><div class="line"><a name="l07440"></a><span class="lineno"> 7440</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.str);</div><div class="line"><a name="l07441"></a><span class="lineno"> 7441</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(cid_num);</div><div class="line"><a name="l07442"></a><span class="lineno"> 7442</span>&#160;   }</div><div class="line"><a name="l07443"></a><span class="lineno"> 7443</span>&#160;   <span class="keywordflow">if</span> (cid_name) {</div><div class="line"><a name="l07444"></a><span class="lineno"> 7444</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = 1;</div><div class="line"><a name="l07445"></a><span class="lineno"> 7445</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>.str);</div><div class="line"><a name="l07446"></a><span class="lineno"> 7446</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(cid_name);</div><div class="line"><a name="l07447"></a><span class="lineno"> 7447</span>&#160;   }</div><div class="line"><a name="l07448"></a><span class="lineno"> 7448</span>&#160;   <span class="keywordflow">if</span> (cid_ani) {</div><div class="line"><a name="l07449"></a><span class="lineno"> 7449</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#aeeb8c05290fd113bd0d1a3129898fd49">ani</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = 1;</div><div class="line"><a name="l07450"></a><span class="lineno"> 7450</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;ani.number.str);</div><div class="line"><a name="l07451"></a><span class="lineno"> 7451</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#aeeb8c05290fd113bd0d1a3129898fd49">ani</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(cid_ani);</div><div class="line"><a name="l07452"></a><span class="lineno"> 7452</span>&#160;   }</div><div class="line"><a name="l07453"></a><span class="lineno"> 7453</span>&#160;</div><div class="line"><a name="l07454"></a><span class="lineno"> 7454</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaec5f1aaded97197250e063ed6c7ad857">ast_channel_publish_snapshot</a>(chan);</div><div class="line"><a name="l07455"></a><span class="lineno"> 7455</span>&#160;</div><div class="line"><a name="l07456"></a><span class="lineno"> 7456</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l07457"></a><span class="lineno"> 7457</span>&#160;}</div><div class="line"><a name="l07458"></a><span class="lineno"> 7458</span>&#160;</div><div class="line"><a name="l07459"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a2997bb4d30b2f5111f3f94e394c667ff"> 7459</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a2997bb4d30b2f5111f3f94e394c667ff">ast_channel_set_caller</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/d77/structast__party__caller.html">ast_party_caller</a> *caller, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d7/d91/structast__set__party__caller.html">ast_set_party_caller</a> *<a class="code" href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a>)</div><div class="line"><a name="l07460"></a><span class="lineno"> 7460</span>&#160;{</div><div class="line"><a name="l07461"></a><span class="lineno"> 7461</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan) == caller) {</div><div class="line"><a name="l07462"></a><span class="lineno"> 7462</span>&#160;      <span class="comment">/* Don&#39;t set to self */</span></div><div class="line"><a name="l07463"></a><span class="lineno"> 7463</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l07464"></a><span class="lineno"> 7464</span>&#160;   }</div><div class="line"><a name="l07465"></a><span class="lineno"> 7465</span>&#160;</div><div class="line"><a name="l07466"></a><span class="lineno"> 7466</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l07467"></a><span class="lineno"> 7467</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a7a410e1008c361f6ea2bd89b41c4be5c">ast_party_caller_set</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan), caller, update);</div><div class="line"><a name="l07468"></a><span class="lineno"> 7468</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga5c533cb6116415f52f137ea431afe9e3">ast_channel_snapshot_invalidate_segment</a>(chan, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ggae4d6df086e192d70f732e3ce8a5a2210a06fc3d57de686a0838563fb1cd0c25d8">AST_CHANNEL_SNAPSHOT_INVALIDATE_CALLER</a>);</div><div class="line"><a name="l07469"></a><span class="lineno"> 7469</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l07470"></a><span class="lineno"> 7470</span>&#160;}</div><div class="line"><a name="l07471"></a><span class="lineno"> 7471</span>&#160;</div><div class="line"><a name="l07472"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a46837c158733334d2bb155bbd827ddb8"> 7472</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a46837c158733334d2bb155bbd827ddb8">ast_channel_set_caller_event</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/d77/structast__party__caller.html">ast_party_caller</a> *caller, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d7/d91/structast__set__party__caller.html">ast_set_party_caller</a> *<a class="code" href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a>)</div><div class="line"><a name="l07473"></a><span class="lineno"> 7473</span>&#160;{</div><div class="line"><a name="l07474"></a><span class="lineno"> 7474</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan) == caller) {</div><div class="line"><a name="l07475"></a><span class="lineno"> 7475</span>&#160;      <span class="comment">/* Don&#39;t set to self */</span></div><div class="line"><a name="l07476"></a><span class="lineno"> 7476</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l07477"></a><span class="lineno"> 7477</span>&#160;   }</div><div class="line"><a name="l07478"></a><span class="lineno"> 7478</span>&#160;</div><div class="line"><a name="l07479"></a><span class="lineno"> 7479</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l07480"></a><span class="lineno"> 7480</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a7a410e1008c361f6ea2bd89b41c4be5c">ast_party_caller_set</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan), caller, update);</div><div class="line"><a name="l07481"></a><span class="lineno"> 7481</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga5c533cb6116415f52f137ea431afe9e3">ast_channel_snapshot_invalidate_segment</a>(chan, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ggae4d6df086e192d70f732e3ce8a5a2210a06fc3d57de686a0838563fb1cd0c25d8">AST_CHANNEL_SNAPSHOT_INVALIDATE_CALLER</a>);</div><div class="line"><a name="l07482"></a><span class="lineno"> 7482</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaec5f1aaded97197250e063ed6c7ad857">ast_channel_publish_snapshot</a>(chan);</div><div class="line"><a name="l07483"></a><span class="lineno"> 7483</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l07484"></a><span class="lineno"> 7484</span>&#160;}</div><div class="line"><a name="l07485"></a><span class="lineno"> 7485</span>&#160;</div><div class="line"><a name="l07486"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a6b869988b7ee213be11a0e45ee3ba09f"> 7486</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a6b869988b7ee213be11a0e45ee3ba09f">ast_setstate</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">enum</span> <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a> <a class="code" href="../../d4/d88/structstate.html">state</a>)</div><div class="line"><a name="l07487"></a><span class="lineno"> 7487</span>&#160;{</div><div class="line"><a name="l07488"></a><span class="lineno"> 7488</span>&#160;   <span class="keywordtype">int</span> oldstate = <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(chan);</div><div class="line"><a name="l07489"></a><span class="lineno"> 7489</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>[<a class="code" href="../../d5/d7b/channel_8h.html#ab57c278099ea5f8d7cedbb41eba58b56">AST_CHANNEL_NAME</a>], *dashptr;</div><div class="line"><a name="l07490"></a><span class="lineno"> 7490</span>&#160;</div><div class="line"><a name="l07491"></a><span class="lineno"> 7491</span>&#160;   <span class="keywordflow">if</span> (oldstate == state)</div><div class="line"><a name="l07492"></a><span class="lineno"> 7492</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07493"></a><span class="lineno"> 7493</span>&#160;</div><div class="line"><a name="l07494"></a><span class="lineno"> 7494</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(name, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), <span class="keyword">sizeof</span>(name));</div><div class="line"><a name="l07495"></a><span class="lineno"> 7495</span>&#160;   <span class="keywordflow">if</span> ((dashptr = strrchr(name, <span class="charliteral">&#39;-&#39;</span>))) {</div><div class="line"><a name="l07496"></a><span class="lineno"> 7496</span>&#160;      *dashptr = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l07497"></a><span class="lineno"> 7497</span>&#160;   }</div><div class="line"><a name="l07498"></a><span class="lineno"> 7498</span>&#160;</div><div class="line"><a name="l07499"></a><span class="lineno"> 7499</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#acc7e03f08c0df9fe5f5ff801db51224d">ast_channel_state_set</a>(chan, state);</div><div class="line"><a name="l07500"></a><span class="lineno"> 7500</span>&#160;</div><div class="line"><a name="l07501"></a><span class="lineno"> 7501</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaec5f1aaded97197250e063ed6c7ad857">ast_channel_publish_snapshot</a>(chan);</div><div class="line"><a name="l07502"></a><span class="lineno"> 7502</span>&#160;</div><div class="line"><a name="l07503"></a><span class="lineno"> 7503</span>&#160;   <span class="comment">/* We have to pass AST_DEVICE_UNKNOWN here because it is entirely possible that the channel driver</span></div><div class="line"><a name="l07504"></a><span class="lineno"> 7504</span>&#160;<span class="comment">    * for this channel is using the callback method for device state. If we pass in an actual state here</span></div><div class="line"><a name="l07505"></a><span class="lineno"> 7505</span>&#160;<span class="comment">    * we override what they are saying the state is and things go amuck. */</span></div><div class="line"><a name="l07506"></a><span class="lineno"> 7506</span>&#160;   <a class="code" href="../../da/da2/devicestate_8h.html#acb74555f2a796e00cd26bd866c52e7b6">ast_devstate_changed_literal</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a>, (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a29df923fcf5fe2c681eaa2114f1c41a6">AST_FLAG_DISABLE_DEVSTATE_CACHE</a>) ? <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a4dbd4bd0c7bf0b9d8c3c2c800d39cfc1">AST_DEVSTATE_NOT_CACHABLE</a> : <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a>), name);</div><div class="line"><a name="l07507"></a><span class="lineno"> 7507</span>&#160;</div><div class="line"><a name="l07508"></a><span class="lineno"> 7508</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07509"></a><span class="lineno"> 7509</span>&#160;}</div><div class="line"><a name="l07510"></a><span class="lineno"> 7510</span>&#160;<span class="comment"></span></div><div class="line"><a name="l07511"></a><span class="lineno"> 7511</span>&#160;<span class="comment">/*! \brief Bridge two channels together (early) */</span></div><div class="line"><a name="l07512"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aef0540461d88daff61e411841ae264ae"> 7512</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#aef0540461d88daff61e411841ae264ae">ast_channel_early_bridge</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *c0, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *c1)</div><div class="line"><a name="l07513"></a><span class="lineno"> 7513</span>&#160;{</div><div class="line"><a name="l07514"></a><span class="lineno"> 7514</span>&#160;   <span class="comment">/* Make sure we can early bridge, if not error out */</span></div><div class="line"><a name="l07515"></a><span class="lineno"> 7515</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(c0)-&gt;early_bridge || (c1 &amp;&amp; (!<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(c1)-&gt;early_bridge || <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(c0)-&gt;early_bridge != <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(c1)-&gt;early_bridge)))</div><div class="line"><a name="l07516"></a><span class="lineno"> 7516</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07517"></a><span class="lineno"> 7517</span>&#160;</div><div class="line"><a name="l07518"></a><span class="lineno"> 7518</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(c0)-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#a27558a663de94fa3b37bf537bed61c3c">early_bridge</a>(c0, c1);</div><div class="line"><a name="l07519"></a><span class="lineno"> 7519</span>&#160;}</div><div class="line"><a name="l07520"></a><span class="lineno"> 7520</span>&#160;<span class="comment"></span></div><div class="line"><a name="l07521"></a><span class="lineno"> 7521</span>&#160;<span class="comment">/*! \brief Sets an option on a channel */</span></div><div class="line"><a name="l07522"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a51d19fd5d03e845c18b7826c9f74a3ae"> 7522</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a51d19fd5d03e845c18b7826c9f74a3ae">ast_channel_setoption</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">int</span> option, <span class="keywordtype">void</span> *<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>, <span class="keywordtype">int</span> datalen, <span class="keywordtype">int</span> block)</div><div class="line"><a name="l07523"></a><span class="lineno"> 7523</span>&#160;{</div><div class="line"><a name="l07524"></a><span class="lineno"> 7524</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l07525"></a><span class="lineno"> 7525</span>&#160;</div><div class="line"><a name="l07526"></a><span class="lineno"> 7526</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l07527"></a><span class="lineno"> 7527</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;setoption) {</div><div class="line"><a name="l07528"></a><span class="lineno"> 7528</span>&#160;      <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = ENOSYS;</div><div class="line"><a name="l07529"></a><span class="lineno"> 7529</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l07530"></a><span class="lineno"> 7530</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07531"></a><span class="lineno"> 7531</span>&#160;   }</div><div class="line"><a name="l07532"></a><span class="lineno"> 7532</span>&#160;</div><div class="line"><a name="l07533"></a><span class="lineno"> 7533</span>&#160;   <span class="keywordflow">if</span> (block)</div><div class="line"><a name="l07534"></a><span class="lineno"> 7534</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;XXX Blocking not implemented yet XXX\n&quot;</span>);</div><div class="line"><a name="l07535"></a><span class="lineno"> 7535</span>&#160;</div><div class="line"><a name="l07536"></a><span class="lineno"> 7536</span>&#160;   res = <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#a753bd4ae57b6128ac98a2d76aed21f28">setoption</a>(chan, option, data, datalen);</div><div class="line"><a name="l07537"></a><span class="lineno"> 7537</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l07538"></a><span class="lineno"> 7538</span>&#160;</div><div class="line"><a name="l07539"></a><span class="lineno"> 7539</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l07540"></a><span class="lineno"> 7540</span>&#160;}</div><div class="line"><a name="l07541"></a><span class="lineno"> 7541</span>&#160;</div><div class="line"><a name="l07542"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a4ca17f6d1c390e88d53b4180dea5487b"> 7542</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a4ca17f6d1c390e88d53b4180dea5487b">ast_channel_queryoption</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">int</span> option, <span class="keywordtype">void</span> *<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>, <span class="keywordtype">int</span> *datalen, <span class="keywordtype">int</span> block)</div><div class="line"><a name="l07543"></a><span class="lineno"> 7543</span>&#160;{</div><div class="line"><a name="l07544"></a><span class="lineno"> 7544</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l07545"></a><span class="lineno"> 7545</span>&#160;</div><div class="line"><a name="l07546"></a><span class="lineno"> 7546</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l07547"></a><span class="lineno"> 7547</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;queryoption) {</div><div class="line"><a name="l07548"></a><span class="lineno"> 7548</span>&#160;      <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = ENOSYS;</div><div class="line"><a name="l07549"></a><span class="lineno"> 7549</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l07550"></a><span class="lineno"> 7550</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07551"></a><span class="lineno"> 7551</span>&#160;   }</div><div class="line"><a name="l07552"></a><span class="lineno"> 7552</span>&#160;</div><div class="line"><a name="l07553"></a><span class="lineno"> 7553</span>&#160;   <span class="keywordflow">if</span> (block)</div><div class="line"><a name="l07554"></a><span class="lineno"> 7554</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;XXX Blocking not implemented yet XXX\n&quot;</span>);</div><div class="line"><a name="l07555"></a><span class="lineno"> 7555</span>&#160;</div><div class="line"><a name="l07556"></a><span class="lineno"> 7556</span>&#160;   res = <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#a12ccc5affd0561ceee96f9245e208bff">queryoption</a>(chan, option, data, datalen);</div><div class="line"><a name="l07557"></a><span class="lineno"> 7557</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l07558"></a><span class="lineno"> 7558</span>&#160;</div><div class="line"><a name="l07559"></a><span class="lineno"> 7559</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l07560"></a><span class="lineno"> 7560</span>&#160;}</div><div class="line"><a name="l07561"></a><span class="lineno"> 7561</span>&#160;</div><div class="line"><a name="l07562"></a><span class="lineno"><a class="line" href="../../dd/d61/structtonepair__def.html"> 7562</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../dd/d61/structtonepair__def.html">tonepair_def</a> {</div><div class="line"><a name="l07563"></a><span class="lineno"><a class="line" href="../../dd/d61/structtonepair__def.html#aef0a8374190702d825cd5be4f7c3d16f"> 7563</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../dd/d61/structtonepair__def.html#aef0a8374190702d825cd5be4f7c3d16f">freq1</a>;</div><div class="line"><a name="l07564"></a><span class="lineno"><a class="line" href="../../dd/d61/structtonepair__def.html#ae484cbecf50a6913f24356fc00e34d8e"> 7564</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../dd/d61/structtonepair__def.html#ae484cbecf50a6913f24356fc00e34d8e">freq2</a>;</div><div class="line"><a name="l07565"></a><span class="lineno"><a class="line" href="../../dd/d61/structtonepair__def.html#ac6e4b2a3cf932b33832d4e4e4e7cd0de"> 7565</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../dd/d61/structtonepair__def.html#ac6e4b2a3cf932b33832d4e4e4e7cd0de">duration</a>;</div><div class="line"><a name="l07566"></a><span class="lineno"><a class="line" href="../../dd/d61/structtonepair__def.html#a0865f919827121ede94c816e460e4857"> 7566</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../dd/d61/structtonepair__def.html#a0865f919827121ede94c816e460e4857">vol</a>;</div><div class="line"><a name="l07567"></a><span class="lineno"> 7567</span>&#160;};</div><div class="line"><a name="l07568"></a><span class="lineno"> 7568</span>&#160;</div><div class="line"><a name="l07569"></a><span class="lineno"><a class="line" href="../../d6/d63/structtonepair__state.html"> 7569</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d6/d63/structtonepair__state.html">tonepair_state</a> {</div><div class="line"><a name="l07570"></a><span class="lineno"><a class="line" href="../../d6/d63/structtonepair__state.html#a78be16714343e05c92280423d7b8c049"> 7570</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d6/d63/structtonepair__state.html#a78be16714343e05c92280423d7b8c049">fac1</a>;</div><div class="line"><a name="l07571"></a><span class="lineno"><a class="line" href="../../d6/d63/structtonepair__state.html#a346af58f2d4bbe53004ec9ef0cdabfa4"> 7571</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d6/d63/structtonepair__state.html#a346af58f2d4bbe53004ec9ef0cdabfa4">fac2</a>;</div><div class="line"><a name="l07572"></a><span class="lineno"><a class="line" href="../../d6/d63/structtonepair__state.html#a0a65e151f23eb826acca0a6bee55edb5"> 7572</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d6/d63/structtonepair__state.html#a0a65e151f23eb826acca0a6bee55edb5">v1_1</a>;</div><div class="line"><a name="l07573"></a><span class="lineno"><a class="line" href="../../d6/d63/structtonepair__state.html#a6a19249508791678eec714f6ba20dcf5"> 7573</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d6/d63/structtonepair__state.html#a6a19249508791678eec714f6ba20dcf5">v2_1</a>;</div><div class="line"><a name="l07574"></a><span class="lineno"><a class="line" href="../../d6/d63/structtonepair__state.html#accaedd1ffb93951a317101d3c9340769"> 7574</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d6/d63/structtonepair__state.html#accaedd1ffb93951a317101d3c9340769">v3_1</a>;</div><div class="line"><a name="l07575"></a><span class="lineno"><a class="line" href="../../d6/d63/structtonepair__state.html#a6bce5bf91aef7c67ff71a69f437f25c3"> 7575</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d6/d63/structtonepair__state.html#a6bce5bf91aef7c67ff71a69f437f25c3">v1_2</a>;</div><div class="line"><a name="l07576"></a><span class="lineno"><a class="line" href="../../d6/d63/structtonepair__state.html#ab34934db2556aa36bf2a30c33313f911"> 7576</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d6/d63/structtonepair__state.html#ab34934db2556aa36bf2a30c33313f911">v2_2</a>;</div><div class="line"><a name="l07577"></a><span class="lineno"><a class="line" href="../../d6/d63/structtonepair__state.html#ad4af51433f84565e04fa49a753e08b64"> 7577</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d6/d63/structtonepair__state.html#ad4af51433f84565e04fa49a753e08b64">v3_2</a>;</div><div class="line"><a name="l07578"></a><span class="lineno"><a class="line" href="../../d6/d63/structtonepair__state.html#a67c7e065450c2a224e067625e9cdaa0c"> 7578</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../d6/d63/structtonepair__state.html#a67c7e065450c2a224e067625e9cdaa0c">origwfmt</a>;</div><div class="line"><a name="l07579"></a><span class="lineno"><a class="line" href="../../d6/d63/structtonepair__state.html#a1910d262855b71da353ed0d07a6c7823"> 7579</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d6/d63/structtonepair__state.html#a1910d262855b71da353ed0d07a6c7823">pos</a>;</div><div class="line"><a name="l07580"></a><span class="lineno"><a class="line" href="../../d6/d63/structtonepair__state.html#ac6e4b2a3cf932b33832d4e4e4e7cd0de"> 7580</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d6/d63/structtonepair__state.html#ac6e4b2a3cf932b33832d4e4e4e7cd0de">duration</a>;</div><div class="line"><a name="l07581"></a><span class="lineno"><a class="line" href="../../d6/d63/structtonepair__state.html#ac1c4127983f79b8c09b4f1610d1c1021"> 7581</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d6/d63/structtonepair__state.html#ac1c4127983f79b8c09b4f1610d1c1021">modulate</a>;</div><div class="line"><a name="l07582"></a><span class="lineno"><a class="line" href="../../d6/d63/structtonepair__state.html#a735f764b1095611ace084e7c6c06857d"> 7582</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> f;</div><div class="line"><a name="l07583"></a><span class="lineno"><a class="line" href="../../d6/d63/structtonepair__state.html#a0bf5616e8aaf5454fcace39dd952359c"> 7583</a></span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="../../d0/d99/structast__frame.html#aed7ea92f45bd273dde380a45ddced592">offset</a>[<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a>];</div><div class="line"><a name="l07584"></a><span class="lineno"><a class="line" href="../../d6/d63/structtonepair__state.html#aaaea89b24922f3b6099fd0185acb3142"> 7584</a></span>&#160;   <span class="keywordtype">short</span> <a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>[4000];</div><div class="line"><a name="l07585"></a><span class="lineno"> 7585</span>&#160;};</div><div class="line"><a name="l07586"></a><span class="lineno"> 7586</span>&#160;</div><div class="line"><a name="l07587"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a509aeb7d4b65232ad296813f674e90dd"> 7587</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a509aeb7d4b65232ad296813f674e90dd">tonepair_release</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">void</span> *params)</div><div class="line"><a name="l07588"></a><span class="lineno"> 7588</span>&#160;{</div><div class="line"><a name="l07589"></a><span class="lineno"> 7589</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d63/structtonepair__state.html">tonepair_state</a> *ts = params;</div><div class="line"><a name="l07590"></a><span class="lineno"> 7590</span>&#160;</div><div class="line"><a name="l07591"></a><span class="lineno"> 7591</span>&#160;   <span class="keywordflow">if</span> (chan) {</div><div class="line"><a name="l07592"></a><span class="lineno"> 7592</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#abbdfb98077180544657b2d16c5d25f74">ast_set_write_format</a>(chan, ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#a67c7e065450c2a224e067625e9cdaa0c">origwfmt</a>);</div><div class="line"><a name="l07593"></a><span class="lineno"> 7593</span>&#160;   }</div><div class="line"><a name="l07594"></a><span class="lineno"> 7594</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#a67c7e065450c2a224e067625e9cdaa0c">origwfmt</a>);</div><div class="line"><a name="l07595"></a><span class="lineno"> 7595</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(ts);</div><div class="line"><a name="l07596"></a><span class="lineno"> 7596</span>&#160;}</div><div class="line"><a name="l07597"></a><span class="lineno"> 7597</span>&#160;</div><div class="line"><a name="l07598"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a6f5a723ce82b8f608b25a36b4df38e46"> 7598</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> *<a class="code" href="../../d4/d28/channel_8c.html#a6f5a723ce82b8f608b25a36b4df38e46">tonepair_alloc</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">void</span> *params)</div><div class="line"><a name="l07599"></a><span class="lineno"> 7599</span>&#160;{</div><div class="line"><a name="l07600"></a><span class="lineno"> 7600</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d63/structtonepair__state.html">tonepair_state</a> *ts;</div><div class="line"><a name="l07601"></a><span class="lineno"> 7601</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d61/structtonepair__def.html">tonepair_def</a> *td = params;</div><div class="line"><a name="l07602"></a><span class="lineno"> 7602</span>&#160;</div><div class="line"><a name="l07603"></a><span class="lineno"> 7603</span>&#160;   <span class="keywordflow">if</span> (!(ts = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*ts)))) {</div><div class="line"><a name="l07604"></a><span class="lineno"> 7604</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07605"></a><span class="lineno"> 7605</span>&#160;   }</div><div class="line"><a name="l07606"></a><span class="lineno"> 7606</span>&#160;</div><div class="line"><a name="l07607"></a><span class="lineno"> 7607</span>&#160;   ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#a67c7e065450c2a224e067625e9cdaa0c">origwfmt</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a>(chan));</div><div class="line"><a name="l07608"></a><span class="lineno"> 7608</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d28/channel_8c.html#abbdfb98077180544657b2d16c5d25f74">ast_set_write_format</a>(chan, <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>)) {</div><div class="line"><a name="l07609"></a><span class="lineno"> 7609</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to set &#39;%s&#39; to signed linear format (write)\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l07610"></a><span class="lineno"> 7610</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a509aeb7d4b65232ad296813f674e90dd">tonepair_release</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, ts);</div><div class="line"><a name="l07611"></a><span class="lineno"> 7611</span>&#160;      ts = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07612"></a><span class="lineno"> 7612</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07613"></a><span class="lineno"> 7613</span>&#160;      ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#a78be16714343e05c92280423d7b8c049">fac1</a> = 2.0 * <a class="code" href="../../d5/dff/chan__iax2_8c.html#ae91dad65f553f7afebe4af507803bc7f">cos</a>(2.0 * <a class="code" href="../../dc/d7f/resample_8c.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> * (td-&gt;<a class="code" href="../../dd/d61/structtonepair__def.html#aef0a8374190702d825cd5be4f7c3d16f">freq1</a> / 8000.0)) * 32768.0;</div><div class="line"><a name="l07614"></a><span class="lineno"> 7614</span>&#160;      ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#a0a65e151f23eb826acca0a6bee55edb5">v1_1</a> = 0;</div><div class="line"><a name="l07615"></a><span class="lineno"> 7615</span>&#160;      ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#a6a19249508791678eec714f6ba20dcf5">v2_1</a> = sin(-4.0 * <a class="code" href="../../dc/d7f/resample_8c.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> * (td-&gt;<a class="code" href="../../dd/d61/structtonepair__def.html#aef0a8374190702d825cd5be4f7c3d16f">freq1</a> / 8000.0)) * td-&gt;<a class="code" href="../../dd/d61/structtonepair__def.html#a0865f919827121ede94c816e460e4857">vol</a>;</div><div class="line"><a name="l07616"></a><span class="lineno"> 7616</span>&#160;      ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#accaedd1ffb93951a317101d3c9340769">v3_1</a> = sin(-2.0 * <a class="code" href="../../dc/d7f/resample_8c.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> * (td-&gt;<a class="code" href="../../dd/d61/structtonepair__def.html#aef0a8374190702d825cd5be4f7c3d16f">freq1</a> / 8000.0)) * td-&gt;<a class="code" href="../../dd/d61/structtonepair__def.html#a0865f919827121ede94c816e460e4857">vol</a>;</div><div class="line"><a name="l07617"></a><span class="lineno"> 7617</span>&#160;      ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#a6a19249508791678eec714f6ba20dcf5">v2_1</a> = 0;</div><div class="line"><a name="l07618"></a><span class="lineno"> 7618</span>&#160;      ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#a346af58f2d4bbe53004ec9ef0cdabfa4">fac2</a> = 2.0 * <a class="code" href="../../d5/dff/chan__iax2_8c.html#ae91dad65f553f7afebe4af507803bc7f">cos</a>(2.0 * <a class="code" href="../../dc/d7f/resample_8c.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> * (td-&gt;<a class="code" href="../../dd/d61/structtonepair__def.html#ae484cbecf50a6913f24356fc00e34d8e">freq2</a> / 8000.0)) * 32768.0;</div><div class="line"><a name="l07619"></a><span class="lineno"> 7619</span>&#160;      ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#ab34934db2556aa36bf2a30c33313f911">v2_2</a> = sin(-4.0 * <a class="code" href="../../dc/d7f/resample_8c.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> * (td-&gt;<a class="code" href="../../dd/d61/structtonepair__def.html#ae484cbecf50a6913f24356fc00e34d8e">freq2</a> / 8000.0)) * td-&gt;<a class="code" href="../../dd/d61/structtonepair__def.html#a0865f919827121ede94c816e460e4857">vol</a>;</div><div class="line"><a name="l07620"></a><span class="lineno"> 7620</span>&#160;      ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#ad4af51433f84565e04fa49a753e08b64">v3_2</a> = sin(-2.0 * <a class="code" href="../../dc/d7f/resample_8c.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a> * (td-&gt;<a class="code" href="../../dd/d61/structtonepair__def.html#ae484cbecf50a6913f24356fc00e34d8e">freq2</a> / 8000.0)) * td-&gt;<a class="code" href="../../dd/d61/structtonepair__def.html#a0865f919827121ede94c816e460e4857">vol</a>;</div><div class="line"><a name="l07621"></a><span class="lineno"> 7621</span>&#160;      ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#ac6e4b2a3cf932b33832d4e4e4e7cd0de">duration</a> = td-&gt;<a class="code" href="../../dd/d61/structtonepair__def.html#ac6e4b2a3cf932b33832d4e4e4e7cd0de">duration</a>;</div><div class="line"><a name="l07622"></a><span class="lineno"> 7622</span>&#160;      ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#ac1c4127983f79b8c09b4f1610d1c1021">modulate</a> = 0;</div><div class="line"><a name="l07623"></a><span class="lineno"> 7623</span>&#160;   }</div><div class="line"><a name="l07624"></a><span class="lineno"> 7624</span>&#160;   <span class="comment">/* Let interrupts interrupt :) */</span></div><div class="line"><a name="l07625"></a><span class="lineno"> 7625</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a9deec175d13a40a6a5fdb527b13c6878">AST_FLAG_WRITE_INT</a>);</div><div class="line"><a name="l07626"></a><span class="lineno"> 7626</span>&#160;   <span class="keywordflow">return</span> ts;</div><div class="line"><a name="l07627"></a><span class="lineno"> 7627</span>&#160;}</div><div class="line"><a name="l07628"></a><span class="lineno"> 7628</span>&#160;</div><div class="line"><a name="l07629"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a2ac659c4031230f671a2c94eb7f6e806"> 7629</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a2ac659c4031230f671a2c94eb7f6e806">tonepair_generator</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">void</span> *data, <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, <span class="keywordtype">int</span> samples)</div><div class="line"><a name="l07630"></a><span class="lineno"> 7630</span>&#160;{</div><div class="line"><a name="l07631"></a><span class="lineno"> 7631</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d63/structtonepair__state.html">tonepair_state</a> *ts = <a class="code" href="../../d6/d63/structtonepair__state.html#aaaea89b24922f3b6099fd0185acb3142">data</a>;</div><div class="line"><a name="l07632"></a><span class="lineno"> 7632</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l07633"></a><span class="lineno"> 7633</span>&#160;</div><div class="line"><a name="l07634"></a><span class="lineno"> 7634</span>&#160;   <span class="comment">/* we need to prepare a frame with 16 * timelen samples as we&#39;re</span></div><div class="line"><a name="l07635"></a><span class="lineno"> 7635</span>&#160;<span class="comment">    * generating SLIN audio</span></div><div class="line"><a name="l07636"></a><span class="lineno"> 7636</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l07637"></a><span class="lineno"> 7637</span>&#160;   len = samples * 2;</div><div class="line"><a name="l07638"></a><span class="lineno"> 7638</span>&#160;</div><div class="line"><a name="l07639"></a><span class="lineno"> 7639</span>&#160;   <span class="keywordflow">if</span> (len &gt; <span class="keyword">sizeof</span>(ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#aaaea89b24922f3b6099fd0185acb3142">data</a>) / 2 - 1) {</div><div class="line"><a name="l07640"></a><span class="lineno"> 7640</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Can&#39;t generate that much data!\n&quot;</span>);</div><div class="line"><a name="l07641"></a><span class="lineno"> 7641</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07642"></a><span class="lineno"> 7642</span>&#160;   }</div><div class="line"><a name="l07643"></a><span class="lineno"> 7643</span>&#160;   memset(&amp;ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#a735f764b1095611ace084e7c6c06857d">f</a>, 0, <span class="keyword">sizeof</span>(ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#a735f764b1095611ace084e7c6c06857d">f</a>));</div><div class="line"><a name="l07644"></a><span class="lineno"> 7644</span>&#160;   <span class="keywordflow">for</span> (x=0;x&lt;len/2;x++) {</div><div class="line"><a name="l07645"></a><span class="lineno"> 7645</span>&#160;      ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#a0a65e151f23eb826acca0a6bee55edb5">v1_1</a> = ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#a6a19249508791678eec714f6ba20dcf5">v2_1</a>;</div><div class="line"><a name="l07646"></a><span class="lineno"> 7646</span>&#160;      ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#a6a19249508791678eec714f6ba20dcf5">v2_1</a> = ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#accaedd1ffb93951a317101d3c9340769">v3_1</a>;</div><div class="line"><a name="l07647"></a><span class="lineno"> 7647</span>&#160;      ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#accaedd1ffb93951a317101d3c9340769">v3_1</a> = (ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#a78be16714343e05c92280423d7b8c049">fac1</a> * ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#a6a19249508791678eec714f6ba20dcf5">v2_1</a> &gt;&gt; 15) - ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#a0a65e151f23eb826acca0a6bee55edb5">v1_1</a>;</div><div class="line"><a name="l07648"></a><span class="lineno"> 7648</span>&#160;</div><div class="line"><a name="l07649"></a><span class="lineno"> 7649</span>&#160;      ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#a6bce5bf91aef7c67ff71a69f437f25c3">v1_2</a> = ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#ab34934db2556aa36bf2a30c33313f911">v2_2</a>;</div><div class="line"><a name="l07650"></a><span class="lineno"> 7650</span>&#160;      ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#ab34934db2556aa36bf2a30c33313f911">v2_2</a> = ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#ad4af51433f84565e04fa49a753e08b64">v3_2</a>;</div><div class="line"><a name="l07651"></a><span class="lineno"> 7651</span>&#160;      ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#ad4af51433f84565e04fa49a753e08b64">v3_2</a> = (ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#a346af58f2d4bbe53004ec9ef0cdabfa4">fac2</a> * ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#ab34934db2556aa36bf2a30c33313f911">v2_2</a> &gt;&gt; 15) - ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#a6bce5bf91aef7c67ff71a69f437f25c3">v1_2</a>;</div><div class="line"><a name="l07652"></a><span class="lineno"> 7652</span>&#160;      <span class="keywordflow">if</span> (ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#ac1c4127983f79b8c09b4f1610d1c1021">modulate</a>) {</div><div class="line"><a name="l07653"></a><span class="lineno"> 7653</span>&#160;         <span class="keywordtype">int</span> p;</div><div class="line"><a name="l07654"></a><span class="lineno"> 7654</span>&#160;         p = ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#ad4af51433f84565e04fa49a753e08b64">v3_2</a> - 32768;</div><div class="line"><a name="l07655"></a><span class="lineno"> 7655</span>&#160;         <span class="keywordflow">if</span> (p &lt; 0) p = -p;</div><div class="line"><a name="l07656"></a><span class="lineno"> 7656</span>&#160;         p = ((p * 9) / 10) + 1;</div><div class="line"><a name="l07657"></a><span class="lineno"> 7657</span>&#160;         ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#aaaea89b24922f3b6099fd0185acb3142">data</a>[x] = (ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#accaedd1ffb93951a317101d3c9340769">v3_1</a> * p) &gt;&gt; 15;</div><div class="line"><a name="l07658"></a><span class="lineno"> 7658</span>&#160;      } <span class="keywordflow">else</span></div><div class="line"><a name="l07659"></a><span class="lineno"> 7659</span>&#160;         ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#aaaea89b24922f3b6099fd0185acb3142">data</a>[x] = ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#accaedd1ffb93951a317101d3c9340769">v3_1</a> + ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#ad4af51433f84565e04fa49a753e08b64">v3_2</a>;</div><div class="line"><a name="l07660"></a><span class="lineno"> 7660</span>&#160;   }</div><div class="line"><a name="l07661"></a><span class="lineno"> 7661</span>&#160;   ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>;</div><div class="line"><a name="l07662"></a><span class="lineno"> 7662</span>&#160;   ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a> = <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>;</div><div class="line"><a name="l07663"></a><span class="lineno"> 7663</span>&#160;   ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> = <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l07664"></a><span class="lineno"> 7664</span>&#160;   ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> = samples;</div><div class="line"><a name="l07665"></a><span class="lineno"> 7665</span>&#160;   ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#aed7ea92f45bd273dde380a45ddced592">offset</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a>;</div><div class="line"><a name="l07666"></a><span class="lineno"> 7666</span>&#160;   ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a> = ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#aaaea89b24922f3b6099fd0185acb3142">data</a>;</div><div class="line"><a name="l07667"></a><span class="lineno"> 7667</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a1b4c335490f5170c1f9e2c7c6781003f">ast_write</a>(chan, &amp;ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#a735f764b1095611ace084e7c6c06857d">f</a>);</div><div class="line"><a name="l07668"></a><span class="lineno"> 7668</span>&#160;   ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#a1910d262855b71da353ed0d07a6c7823">pos</a> += x;</div><div class="line"><a name="l07669"></a><span class="lineno"> 7669</span>&#160;   <span class="keywordflow">if</span> (ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#ac6e4b2a3cf932b33832d4e4e4e7cd0de">duration</a> &gt; 0) {</div><div class="line"><a name="l07670"></a><span class="lineno"> 7670</span>&#160;      <span class="keywordflow">if</span> (ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#a1910d262855b71da353ed0d07a6c7823">pos</a> &gt;= ts-&gt;<a class="code" href="../../d6/d63/structtonepair__state.html#ac6e4b2a3cf932b33832d4e4e4e7cd0de">duration</a> * 8)</div><div class="line"><a name="l07671"></a><span class="lineno"> 7671</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07672"></a><span class="lineno"> 7672</span>&#160;   }</div><div class="line"><a name="l07673"></a><span class="lineno"> 7673</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07674"></a><span class="lineno"> 7674</span>&#160;}</div><div class="line"><a name="l07675"></a><span class="lineno"> 7675</span>&#160;</div><div class="line"><a name="l07676"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a982bf142a56c626e34f9d4c3f1a16d15"> 7676</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../de/d2a/structast__generator.html">ast_generator</a> <a class="code" href="../../d4/d28/channel_8c.html#a982bf142a56c626e34f9d4c3f1a16d15">tonepair</a> = {</div><div class="line"><a name="l07677"></a><span class="lineno"> 7677</span>&#160;   .<a class="code" href="../../de/d2a/structast__generator.html#a77c293dc8108e06e2a81a1fdafc8fd97">alloc</a> = <a class="code" href="../../d4/d28/channel_8c.html#a6f5a723ce82b8f608b25a36b4df38e46">tonepair_alloc</a>,</div><div class="line"><a name="l07678"></a><span class="lineno"> 7678</span>&#160;   .release = <a class="code" href="../../d4/d28/channel_8c.html#a509aeb7d4b65232ad296813f674e90dd">tonepair_release</a>,</div><div class="line"><a name="l07679"></a><span class="lineno"> 7679</span>&#160;   .generate = <a class="code" href="../../d4/d28/channel_8c.html#a2ac659c4031230f671a2c94eb7f6e806">tonepair_generator</a>,</div><div class="line"><a name="l07680"></a><span class="lineno"> 7680</span>&#160;};</div><div class="line"><a name="l07681"></a><span class="lineno"> 7681</span>&#160;</div><div class="line"><a name="l07682"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a45670e7ba068c0e69745fc44e2084046"> 7682</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a45670e7ba068c0e69745fc44e2084046">ast_tonepair_start</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">int</span> freq1, <span class="keywordtype">int</span> freq2, <span class="keywordtype">int</span> duration, <span class="keywordtype">int</span> vol)</div><div class="line"><a name="l07683"></a><span class="lineno"> 7683</span>&#160;{</div><div class="line"><a name="l07684"></a><span class="lineno"> 7684</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d61/structtonepair__def.html">tonepair_def</a> d = { 0, };</div><div class="line"><a name="l07685"></a><span class="lineno"> 7685</span>&#160;</div><div class="line"><a name="l07686"></a><span class="lineno"> 7686</span>&#160;   d.<a class="code" href="../../dd/d61/structtonepair__def.html#aef0a8374190702d825cd5be4f7c3d16f">freq1</a> = <a class="code" href="../../dd/d61/structtonepair__def.html#aef0a8374190702d825cd5be4f7c3d16f">freq1</a>;</div><div class="line"><a name="l07687"></a><span class="lineno"> 7687</span>&#160;   d.<a class="code" href="../../dd/d61/structtonepair__def.html#ae484cbecf50a6913f24356fc00e34d8e">freq2</a> = <a class="code" href="../../dd/d61/structtonepair__def.html#ae484cbecf50a6913f24356fc00e34d8e">freq2</a>;</div><div class="line"><a name="l07688"></a><span class="lineno"> 7688</span>&#160;   d.<a class="code" href="../../dd/d61/structtonepair__def.html#ac6e4b2a3cf932b33832d4e4e4e7cd0de">duration</a> = <a class="code" href="../../dd/d61/structtonepair__def.html#ac6e4b2a3cf932b33832d4e4e4e7cd0de">duration</a>;</div><div class="line"><a name="l07689"></a><span class="lineno"> 7689</span>&#160;   d.<a class="code" href="../../dd/d61/structtonepair__def.html#a0865f919827121ede94c816e460e4857">vol</a> = (vol &lt; 1) ? 8192 : vol; <span class="comment">/* force invalid to 8192 */</span></div><div class="line"><a name="l07690"></a><span class="lineno"> 7690</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d28/channel_8c.html#a12a58dda74a19f383f6b77cf7fa88b54">ast_activate_generator</a>(chan, &amp;tonepair, &amp;d))</div><div class="line"><a name="l07691"></a><span class="lineno"> 7691</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07692"></a><span class="lineno"> 7692</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07693"></a><span class="lineno"> 7693</span>&#160;}</div><div class="line"><a name="l07694"></a><span class="lineno"> 7694</span>&#160;</div><div class="line"><a name="l07695"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#afef5134a6fb69fdd9492981dcf52b31a"> 7695</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#afef5134a6fb69fdd9492981dcf52b31a">ast_tonepair_stop</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l07696"></a><span class="lineno"> 7696</span>&#160;{</div><div class="line"><a name="l07697"></a><span class="lineno"> 7697</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a7160355005776732fba88cc020f4a45b">ast_deactivate_generator</a>(chan);</div><div class="line"><a name="l07698"></a><span class="lineno"> 7698</span>&#160;}</div><div class="line"><a name="l07699"></a><span class="lineno"> 7699</span>&#160;</div><div class="line"><a name="l07700"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aec0fd025bfdf11852ceca62636006141"> 7700</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#aec0fd025bfdf11852ceca62636006141">ast_tonepair</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">int</span> <a class="code" href="../../dd/d61/structtonepair__def.html#aef0a8374190702d825cd5be4f7c3d16f">freq1</a>, <span class="keywordtype">int</span> <a class="code" href="../../dd/d61/structtonepair__def.html#ae484cbecf50a6913f24356fc00e34d8e">freq2</a>, <span class="keywordtype">int</span> <a class="code" href="../../dd/d61/structtonepair__def.html#ac6e4b2a3cf932b33832d4e4e4e7cd0de">duration</a>, <span class="keywordtype">int</span> <a class="code" href="../../dd/d61/structtonepair__def.html#a0865f919827121ede94c816e460e4857">vol</a>)</div><div class="line"><a name="l07701"></a><span class="lineno"> 7701</span>&#160;{</div><div class="line"><a name="l07702"></a><span class="lineno"> 7702</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l07703"></a><span class="lineno"> 7703</span>&#160;</div><div class="line"><a name="l07704"></a><span class="lineno"> 7704</span>&#160;   <span class="keywordflow">if</span> ((res = <a class="code" href="../../d4/d28/channel_8c.html#a45670e7ba068c0e69745fc44e2084046">ast_tonepair_start</a>(chan, freq1, freq2, duration, vol)))</div><div class="line"><a name="l07705"></a><span class="lineno"> 7705</span>&#160;      <span class="keywordflow">return</span> res;</div><div class="line"><a name="l07706"></a><span class="lineno"> 7706</span>&#160;</div><div class="line"><a name="l07707"></a><span class="lineno"> 7707</span>&#160;   <span class="comment">/* Give us some wiggle room */</span></div><div class="line"><a name="l07708"></a><span class="lineno"> 7708</span>&#160;   <span class="keywordflow">while</span> (<a class="code" href="../../d5/d7b/channel_8h.html#afb86bdd7fa42b7bf8ac2fbfab01f67ef">ast_channel_generatordata</a>(chan) &amp;&amp; <a class="code" href="../../d4/d28/channel_8c.html#aed7cba5dd8c6d31600f50d4b3f68d9ca">ast_waitfor</a>(chan, 100) &gt;= 0) {</div><div class="line"><a name="l07709"></a><span class="lineno"> 7709</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f = <a class="code" href="../../d4/d28/channel_8c.html#a7ef6737309dc9e8b6c4a7cb4800638b1">ast_read</a>(chan);</div><div class="line"><a name="l07710"></a><span class="lineno"> 7710</span>&#160;      <span class="keywordflow">if</span> (f)</div><div class="line"><a name="l07711"></a><span class="lineno"> 7711</span>&#160;         <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l07712"></a><span class="lineno"> 7712</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l07713"></a><span class="lineno"> 7713</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07714"></a><span class="lineno"> 7714</span>&#160;   }</div><div class="line"><a name="l07715"></a><span class="lineno"> 7715</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07716"></a><span class="lineno"> 7716</span>&#160;}</div><div class="line"><a name="l07717"></a><span class="lineno"> 7717</span>&#160;</div><div class="line"><a name="l07718"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aee83e23058d0a4111fda1f506cbda107"> 7718</a></span>&#160;<a class="code" href="../../d5/d7b/channel_8h.html#a641d81d0c5c8df99d43eff69aede3bfd">ast_group_t</a> <a class="code" href="../../d4/d28/channel_8c.html#aee83e23058d0a4111fda1f506cbda107">ast_get_group</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *s)</div><div class="line"><a name="l07719"></a><span class="lineno"> 7719</span>&#160;{</div><div class="line"><a name="l07720"></a><span class="lineno"> 7720</span>&#160;   <span class="keywordtype">char</span> *piece;</div><div class="line"><a name="l07721"></a><span class="lineno"> 7721</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l07722"></a><span class="lineno"> 7722</span>&#160;   <span class="keywordtype">int</span> start=0, finish=0, x;</div><div class="line"><a name="l07723"></a><span class="lineno"> 7723</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a641d81d0c5c8df99d43eff69aede3bfd">ast_group_t</a> <a class="code" href="../../d3/d08/structgroup.html">group</a> = 0;</div><div class="line"><a name="l07724"></a><span class="lineno"> 7724</span>&#160;</div><div class="line"><a name="l07725"></a><span class="lineno"> 7725</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(s))</div><div class="line"><a name="l07726"></a><span class="lineno"> 7726</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07727"></a><span class="lineno"> 7727</span>&#160;</div><div class="line"><a name="l07728"></a><span class="lineno"> 7728</span>&#160;   c = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(s);</div><div class="line"><a name="l07729"></a><span class="lineno"> 7729</span>&#160;</div><div class="line"><a name="l07730"></a><span class="lineno"> 7730</span>&#160;   <span class="keywordflow">while</span> ((piece = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;c, <span class="stringliteral">&quot;,&quot;</span>))) {</div><div class="line"><a name="l07731"></a><span class="lineno"> 7731</span>&#160;      <span class="keywordflow">if</span> (sscanf(piece, <span class="stringliteral">&quot;%30d-%30d&quot;</span>, &amp;start, &amp;finish) == 2) {</div><div class="line"><a name="l07732"></a><span class="lineno"> 7732</span>&#160;         <span class="comment">/* Range */</span></div><div class="line"><a name="l07733"></a><span class="lineno"> 7733</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sscanf(piece, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;start)) {</div><div class="line"><a name="l07734"></a><span class="lineno"> 7734</span>&#160;         <span class="comment">/* Just one */</span></div><div class="line"><a name="l07735"></a><span class="lineno"> 7735</span>&#160;         finish = start;</div><div class="line"><a name="l07736"></a><span class="lineno"> 7736</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07737"></a><span class="lineno"> 7737</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Syntax error parsing group configuration &#39;%s&#39; at &#39;%s&#39;. Ignoring.\n&quot;</span>, s, piece);</div><div class="line"><a name="l07738"></a><span class="lineno"> 7738</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l07739"></a><span class="lineno"> 7739</span>&#160;      }</div><div class="line"><a name="l07740"></a><span class="lineno"> 7740</span>&#160;      <span class="keywordflow">for</span> (x = start; x &lt;= finish; x++) {</div><div class="line"><a name="l07741"></a><span class="lineno"> 7741</span>&#160;         <span class="keywordflow">if</span> ((x &gt; 63) || (x &lt; 0)) {</div><div class="line"><a name="l07742"></a><span class="lineno"> 7742</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Ignoring invalid group %d (maximum group is 63)\n&quot;</span>, x);</div><div class="line"><a name="l07743"></a><span class="lineno"> 7743</span>&#160;         } <span class="keywordflow">else</span></div><div class="line"><a name="l07744"></a><span class="lineno"> 7744</span>&#160;            group |= ((<a class="code" href="../../d5/d7b/channel_8h.html#a641d81d0c5c8df99d43eff69aede3bfd">ast_group_t</a>) 1 &lt;&lt; x);</div><div class="line"><a name="l07745"></a><span class="lineno"> 7745</span>&#160;      }</div><div class="line"><a name="l07746"></a><span class="lineno"> 7746</span>&#160;   }</div><div class="line"><a name="l07747"></a><span class="lineno"> 7747</span>&#160;   <span class="keywordflow">return</span> group;</div><div class="line"><a name="l07748"></a><span class="lineno"> 7748</span>&#160;}</div><div class="line"><a name="l07749"></a><span class="lineno"> 7749</span>&#160;<span class="comment"></span></div><div class="line"><a name="l07750"></a><span class="lineno"> 7750</span>&#160;<span class="comment">/*! \brief Named group member structure */</span></div><div class="line"><a name="l07751"></a><span class="lineno"><a class="line" href="../../db/d9c/structnamedgroup__member.html"> 7751</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../db/d9c/structnamedgroup__member.html">namedgroup_member</a> {<span class="comment"></span></div><div class="line"><a name="l07752"></a><span class="lineno"> 7752</span>&#160;<span class="comment">   /*! Pre-built hash of group member name. */</span></div><div class="line"><a name="l07753"></a><span class="lineno"><a class="line" href="../../db/d9c/structnamedgroup__member.html#a09f9a9ce240560b1d191b42ed56af642"> 7753</a></span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../db/d9c/structnamedgroup__member.html#a09f9a9ce240560b1d191b42ed56af642">hash</a>;<span class="comment"></span></div><div class="line"><a name="l07754"></a><span class="lineno"> 7754</span>&#160;<span class="comment">   /*! Group member name. (End allocation of name string.) */</span></div><div class="line"><a name="l07755"></a><span class="lineno"><a class="line" href="../../db/d9c/structnamedgroup__member.html#ac8b44a387cf3da062c4a32316b43962c"> 7755</a></span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>[1];</div><div class="line"><a name="l07756"></a><span class="lineno"> 7756</span>&#160;};</div><div class="line"><a name="l07757"></a><span class="lineno"> 7757</span>&#160;<span class="comment"></span></div><div class="line"><a name="l07758"></a><span class="lineno"> 7758</span>&#160;<span class="comment">/*! \brief Comparison function used for named group container */</span></div><div class="line"><a name="l07759"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3c27a399ee6a32bd294b78e659a0763f"> 7759</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a3c27a399ee6a32bd294b78e659a0763f">namedgroup_cmp_cb</a>(<span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *arg, <span class="keywordtype">int</span> <a class="code" href="../../dd/d6f/structchanlist.html#a899a76dc5f03f0d4ea3793c339e07ee9">flags</a>)</div><div class="line"><a name="l07760"></a><span class="lineno"> 7760</span>&#160;{</div><div class="line"><a name="l07761"></a><span class="lineno"> 7761</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../db/d9c/structnamedgroup__member.html">namedgroup_member</a> *an = obj;</div><div class="line"><a name="l07762"></a><span class="lineno"> 7762</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../db/d9c/structnamedgroup__member.html">namedgroup_member</a> *bn = arg;</div><div class="line"><a name="l07763"></a><span class="lineno"> 7763</span>&#160;</div><div class="line"><a name="l07764"></a><span class="lineno"> 7764</span>&#160;   <span class="keywordflow">return</span> strcmp(an-&gt;<a class="code" href="../../db/d9c/structnamedgroup__member.html#ac8b44a387cf3da062c4a32316b43962c">name</a>, bn-&gt;<a class="code" href="../../db/d9c/structnamedgroup__member.html#ac8b44a387cf3da062c4a32316b43962c">name</a>) ? 0 : <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df">CMP_STOP</a>;</div><div class="line"><a name="l07765"></a><span class="lineno"> 7765</span>&#160;}</div><div class="line"><a name="l07766"></a><span class="lineno"> 7766</span>&#160;<span class="comment"></span></div><div class="line"><a name="l07767"></a><span class="lineno"> 7767</span>&#160;<span class="comment">/*! \brief Hashing function used for named group container */</span></div><div class="line"><a name="l07768"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a5b86e78e2398f42198590bf33c28ef40"> 7768</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a5b86e78e2398f42198590bf33c28ef40">namedgroup_hash_cb</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *obj, <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/d6f/structchanlist.html#a899a76dc5f03f0d4ea3793c339e07ee9">flags</a>)</div><div class="line"><a name="l07769"></a><span class="lineno"> 7769</span>&#160;{</div><div class="line"><a name="l07770"></a><span class="lineno"> 7770</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../db/d9c/structnamedgroup__member.html">namedgroup_member</a> *<a class="code" href="../../d7/dd6/structmember.html">member</a> = obj;</div><div class="line"><a name="l07771"></a><span class="lineno"> 7771</span>&#160;</div><div class="line"><a name="l07772"></a><span class="lineno"> 7772</span>&#160;   <span class="keywordflow">return</span> member-&gt;<a class="code" href="../../db/d9c/structnamedgroup__member.html#a09f9a9ce240560b1d191b42ed56af642">hash</a>;</div><div class="line"><a name="l07773"></a><span class="lineno"> 7773</span>&#160;}</div><div class="line"><a name="l07774"></a><span class="lineno"> 7774</span>&#160;</div><div class="line"><a name="l07775"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#afd7c527ec74e66bcc02de0aeb361d804"> 7775</a></span>&#160;<span class="keyword">struct </span>ast_namedgroups *<a class="code" href="../../d4/d28/channel_8c.html#afd7c527ec74e66bcc02de0aeb361d804">ast_get_namedgroups</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *s)</div><div class="line"><a name="l07776"></a><span class="lineno"> 7776</span>&#160;{</div><div class="line"><a name="l07777"></a><span class="lineno"> 7777</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *namedgroups;</div><div class="line"><a name="l07778"></a><span class="lineno"> 7778</span>&#160;   <span class="keywordtype">char</span> *piece;</div><div class="line"><a name="l07779"></a><span class="lineno"> 7779</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l07780"></a><span class="lineno"> 7780</span>&#160;</div><div class="line"><a name="l07781"></a><span class="lineno"> 7781</span>&#160;   <span class="keywordflow">if</span> (!s) {</div><div class="line"><a name="l07782"></a><span class="lineno"> 7782</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07783"></a><span class="lineno"> 7783</span>&#160;   }</div><div class="line"><a name="l07784"></a><span class="lineno"> 7784</span>&#160;<span class="comment"></span></div><div class="line"><a name="l07785"></a><span class="lineno"> 7785</span>&#160;<span class="comment">   /*! \brief Remove leading and trailing whitespace */</span></div><div class="line"><a name="l07786"></a><span class="lineno"> 7786</span>&#160;   c = <a class="code" href="../../d6/d90/strings_8h.html#abe38193be148775f7559f8fff6e0c17e">ast_trim_blanks</a>(<a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d6/d90/strings_8h.html#af5693da955fa3bc73bc49c47b601fc7a">ast_skip_blanks</a>(s)));</div><div class="line"><a name="l07787"></a><span class="lineno"> 7787</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(c)) {</div><div class="line"><a name="l07788"></a><span class="lineno"> 7788</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07789"></a><span class="lineno"> 7789</span>&#160;   }</div><div class="line"><a name="l07790"></a><span class="lineno"> 7790</span>&#160;</div><div class="line"><a name="l07791"></a><span class="lineno"> 7791</span>&#160;   namedgroups = <a class="code" href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, 0, 19,</div><div class="line"><a name="l07792"></a><span class="lineno"> 7792</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a5b86e78e2398f42198590bf33c28ef40">namedgroup_hash_cb</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d28/channel_8c.html#a3c27a399ee6a32bd294b78e659a0763f">namedgroup_cmp_cb</a>);</div><div class="line"><a name="l07793"></a><span class="lineno"> 7793</span>&#160;   <span class="keywordflow">if</span> (!namedgroups) {</div><div class="line"><a name="l07794"></a><span class="lineno"> 7794</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07795"></a><span class="lineno"> 7795</span>&#160;   }</div><div class="line"><a name="l07796"></a><span class="lineno"> 7796</span>&#160;</div><div class="line"><a name="l07797"></a><span class="lineno"> 7797</span>&#160;   <span class="keywordflow">while</span> ((piece = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;c, <span class="stringliteral">&quot;,&quot;</span>))) {</div><div class="line"><a name="l07798"></a><span class="lineno"> 7798</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../db/d9c/structnamedgroup__member.html">namedgroup_member</a> *<a class="code" href="../../d7/dd6/structmember.html">member</a>;</div><div class="line"><a name="l07799"></a><span class="lineno"> 7799</span>&#160;      <span class="keywordtype">size_t</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l07800"></a><span class="lineno"> 7800</span>&#160;</div><div class="line"><a name="l07801"></a><span class="lineno"> 7801</span>&#160;      <span class="comment">/* remove leading/trailing whitespace */</span></div><div class="line"><a name="l07802"></a><span class="lineno"> 7802</span>&#160;      piece = <a class="code" href="../../d6/d90/strings_8h.html#ac92713b8d07a45720b2664be70810e55">ast_strip</a>(piece);</div><div class="line"><a name="l07803"></a><span class="lineno"> 7803</span>&#160;</div><div class="line"><a name="l07804"></a><span class="lineno"> 7804</span>&#160;      len = strlen(piece);</div><div class="line"><a name="l07805"></a><span class="lineno"> 7805</span>&#160;      <span class="keywordflow">if</span> (!len) {</div><div class="line"><a name="l07806"></a><span class="lineno"> 7806</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l07807"></a><span class="lineno"> 7807</span>&#160;      }</div><div class="line"><a name="l07808"></a><span class="lineno"> 7808</span>&#160;</div><div class="line"><a name="l07809"></a><span class="lineno"> 7809</span>&#160;      member = <a class="code" href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a>(<span class="keyword">sizeof</span>(*member) + len, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>);</div><div class="line"><a name="l07810"></a><span class="lineno"> 7810</span>&#160;      <span class="keywordflow">if</span> (!member) {</div><div class="line"><a name="l07811"></a><span class="lineno"> 7811</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(namedgroups, -1);</div><div class="line"><a name="l07812"></a><span class="lineno"> 7812</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07813"></a><span class="lineno"> 7813</span>&#160;      }</div><div class="line"><a name="l07814"></a><span class="lineno"> 7814</span>&#160;      strcpy(member-&gt;<a class="code" href="../../db/d9c/structnamedgroup__member.html#ac8b44a387cf3da062c4a32316b43962c">name</a>, piece);<span class="comment">/* Safe */</span></div><div class="line"><a name="l07815"></a><span class="lineno"> 7815</span>&#160;      member-&gt;<a class="code" href="../../db/d9c/structnamedgroup__member.html#a09f9a9ce240560b1d191b42ed56af642">hash</a> = <a class="code" href="../../d6/d90/strings_8h.html#a33ab7fa091d5513d8507d3bd33ef5b55">ast_str_hash</a>(member-&gt;<a class="code" href="../../db/d9c/structnamedgroup__member.html#ac8b44a387cf3da062c4a32316b43962c">name</a>);</div><div class="line"><a name="l07816"></a><span class="lineno"> 7816</span>&#160;</div><div class="line"><a name="l07817"></a><span class="lineno"> 7817</span>&#160;      <span class="comment">/* every group name may exist only once, delete duplicates */</span></div><div class="line"><a name="l07818"></a><span class="lineno"> 7818</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(namedgroups, member, <a class="code" href="../../d5/da5/astobj2_8h.html#a2448088751e4d494d1981c7f4b84e8d0">OBJ_POINTER</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45">OBJ_UNLINK</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>);</div><div class="line"><a name="l07819"></a><span class="lineno"> 7819</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a>(namedgroups, member);</div><div class="line"><a name="l07820"></a><span class="lineno"> 7820</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(member, -1);</div><div class="line"><a name="l07821"></a><span class="lineno"> 7821</span>&#160;   }</div><div class="line"><a name="l07822"></a><span class="lineno"> 7822</span>&#160;</div><div class="line"><a name="l07823"></a><span class="lineno"> 7823</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(namedgroups)) {</div><div class="line"><a name="l07824"></a><span class="lineno"> 7824</span>&#160;      <span class="comment">/* There were no group names specified. */</span></div><div class="line"><a name="l07825"></a><span class="lineno"> 7825</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(namedgroups, -1);</div><div class="line"><a name="l07826"></a><span class="lineno"> 7826</span>&#160;      namedgroups = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07827"></a><span class="lineno"> 7827</span>&#160;   }</div><div class="line"><a name="l07828"></a><span class="lineno"> 7828</span>&#160;</div><div class="line"><a name="l07829"></a><span class="lineno"> 7829</span>&#160;   <span class="keywordflow">return</span> (<span class="keyword">struct</span> ast_namedgroups *) namedgroups;</div><div class="line"><a name="l07830"></a><span class="lineno"> 7830</span>&#160;}</div><div class="line"><a name="l07831"></a><span class="lineno"> 7831</span>&#160;</div><div class="line"><a name="l07832"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ae4bed10845e16e1cbde4bb46d4b1d679"> 7832</a></span>&#160;<span class="keyword">struct </span>ast_namedgroups *<a class="code" href="../../d4/d28/channel_8c.html#ae4bed10845e16e1cbde4bb46d4b1d679">ast_unref_namedgroups</a>(<span class="keyword">struct</span> ast_namedgroups *<a class="code" href="../../d9/d28/structgroups.html">groups</a>)</div><div class="line"><a name="l07833"></a><span class="lineno"> 7833</span>&#160;{</div><div class="line"><a name="l07834"></a><span class="lineno"> 7834</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(groups);</div><div class="line"><a name="l07835"></a><span class="lineno"> 7835</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07836"></a><span class="lineno"> 7836</span>&#160;}</div><div class="line"><a name="l07837"></a><span class="lineno"> 7837</span>&#160;</div><div class="line"><a name="l07838"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#abf97a21c400858d15b0cd446887be88b"> 7838</a></span>&#160;<span class="keyword">struct </span>ast_namedgroups *<a class="code" href="../../d4/d28/channel_8c.html#abf97a21c400858d15b0cd446887be88b">ast_ref_namedgroups</a>(<span class="keyword">struct</span> ast_namedgroups *<a class="code" href="../../d9/d28/structgroups.html">groups</a>)</div><div class="line"><a name="l07839"></a><span class="lineno"> 7839</span>&#160;{</div><div class="line"><a name="l07840"></a><span class="lineno"> 7840</span>&#160;   <span class="keywordflow">if</span> (groups) {</div><div class="line"><a name="l07841"></a><span class="lineno"> 7841</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(groups, 1);</div><div class="line"><a name="l07842"></a><span class="lineno"> 7842</span>&#160;   }</div><div class="line"><a name="l07843"></a><span class="lineno"> 7843</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d83/main_2app_8c.html#a4c64cde04fcdfadca23c715d24981888">groups</a>;</div><div class="line"><a name="l07844"></a><span class="lineno"> 7844</span>&#160;}</div><div class="line"><a name="l07845"></a><span class="lineno"> 7845</span>&#160;</div><div class="line"><a name="l07846"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#af3ca35d45450375fc04a2e5af45def4b"> 7846</a></span>&#160;<span class="keyword">static</span> int (*<a class="code" href="../../d4/d28/channel_8c.html#af3ca35d45450375fc04a2e5af45def4b">ast_moh_start_ptr</a>)(<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, <span class="keyword">const</span> <span class="keywordtype">char</span> *, <span class="keyword">const</span> <span class="keywordtype">char</span> *) = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07847"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a5cfd27f9a26831fec121ba1c78a40466"> 7847</a></span>&#160;<span class="keyword">static</span> void (*<a class="code" href="../../d4/d28/channel_8c.html#a5cfd27f9a26831fec121ba1c78a40466">ast_moh_stop_ptr</a>)(<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *) = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07848"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a331c5e69285107329a78ab1b2de00844"> 7848</a></span>&#160;<span class="keyword">static</span> void (*<a class="code" href="../../d4/d28/channel_8c.html#a331c5e69285107329a78ab1b2de00844">ast_moh_cleanup_ptr</a>)(<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *) = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07849"></a><span class="lineno"> 7849</span>&#160;</div><div class="line"><a name="l07850"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a76c8f293c2dacf853b96314157f3421b"> 7850</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a76c8f293c2dacf853b96314157f3421b">ast_install_music_functions</a>(<span class="keywordtype">int</span> (*start_ptr)(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, <span class="keyword">const</span> <span class="keywordtype">char</span> *, <span class="keyword">const</span> <span class="keywordtype">char</span> *),</div><div class="line"><a name="l07851"></a><span class="lineno"> 7851</span>&#160;             <span class="keywordtype">void</span> (*stop_ptr)(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *),</div><div class="line"><a name="l07852"></a><span class="lineno"> 7852</span>&#160;             <span class="keywordtype">void</span> (*cleanup_ptr)(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *))</div><div class="line"><a name="l07853"></a><span class="lineno"> 7853</span>&#160;{</div><div class="line"><a name="l07854"></a><span class="lineno"> 7854</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#af3ca35d45450375fc04a2e5af45def4b">ast_moh_start_ptr</a> = start_ptr;</div><div class="line"><a name="l07855"></a><span class="lineno"> 7855</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a5cfd27f9a26831fec121ba1c78a40466">ast_moh_stop_ptr</a> = stop_ptr;</div><div class="line"><a name="l07856"></a><span class="lineno"> 7856</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a331c5e69285107329a78ab1b2de00844">ast_moh_cleanup_ptr</a> = cleanup_ptr;</div><div class="line"><a name="l07857"></a><span class="lineno"> 7857</span>&#160;}</div><div class="line"><a name="l07858"></a><span class="lineno"> 7858</span>&#160;</div><div class="line"><a name="l07859"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a9a1bf5906ede80cab6b57627fea47272"> 7859</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a9a1bf5906ede80cab6b57627fea47272">ast_uninstall_music_functions</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l07860"></a><span class="lineno"> 7860</span>&#160;{</div><div class="line"><a name="l07861"></a><span class="lineno"> 7861</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#af3ca35d45450375fc04a2e5af45def4b">ast_moh_start_ptr</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07862"></a><span class="lineno"> 7862</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a5cfd27f9a26831fec121ba1c78a40466">ast_moh_stop_ptr</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07863"></a><span class="lineno"> 7863</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a331c5e69285107329a78ab1b2de00844">ast_moh_cleanup_ptr</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07864"></a><span class="lineno"> 7864</span>&#160;}</div><div class="line"><a name="l07865"></a><span class="lineno"> 7865</span>&#160;</div><div class="line"><a name="l07866"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a2acec01f2fddd8ca494d874003815cf7"> 7866</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a2acec01f2fddd8ca494d874003815cf7">ast_moh_start</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *mclass, <span class="keyword">const</span> <span class="keywordtype">char</span> *interpclass)</div><div class="line"><a name="l07867"></a><span class="lineno"> 7867</span>&#160;{</div><div class="line"><a name="l07868"></a><span class="lineno"> 7868</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d28/channel_8c.html#af3ca35d45450375fc04a2e5af45def4b">ast_moh_start_ptr</a>)</div><div class="line"><a name="l07869"></a><span class="lineno"> 7869</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#af3ca35d45450375fc04a2e5af45def4b">ast_moh_start_ptr</a>(chan, mclass, interpclass);</div><div class="line"><a name="l07870"></a><span class="lineno"> 7870</span>&#160;</div><div class="line"><a name="l07871"></a><span class="lineno"> 7871</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Music class %s requested but no musiconhold loaded.\n&quot;</span>, mclass ? mclass : (interpclass ? interpclass : <span class="stringliteral">&quot;default&quot;</span>));</div><div class="line"><a name="l07872"></a><span class="lineno"> 7872</span>&#160;</div><div class="line"><a name="l07873"></a><span class="lineno"> 7873</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07874"></a><span class="lineno"> 7874</span>&#160;}</div><div class="line"><a name="l07875"></a><span class="lineno"> 7875</span>&#160;</div><div class="line"><a name="l07876"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a52fead32f69533450f3c05b2e6960149"> 7876</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a52fead32f69533450f3c05b2e6960149">ast_moh_stop</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l07877"></a><span class="lineno"> 7877</span>&#160;{</div><div class="line"><a name="l07878"></a><span class="lineno"> 7878</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d28/channel_8c.html#a5cfd27f9a26831fec121ba1c78a40466">ast_moh_stop_ptr</a>)</div><div class="line"><a name="l07879"></a><span class="lineno"> 7879</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a5cfd27f9a26831fec121ba1c78a40466">ast_moh_stop_ptr</a>(chan);</div><div class="line"><a name="l07880"></a><span class="lineno"> 7880</span>&#160;}</div><div class="line"><a name="l07881"></a><span class="lineno"> 7881</span>&#160;</div><div class="line"><a name="l07882"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a2bfbbbb8be5c8a13ec5a054bbc9f25b1"> 7882</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a2bfbbbb8be5c8a13ec5a054bbc9f25b1">ast_moh_cleanup</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l07883"></a><span class="lineno"> 7883</span>&#160;{</div><div class="line"><a name="l07884"></a><span class="lineno"> 7884</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d28/channel_8c.html#a331c5e69285107329a78ab1b2de00844">ast_moh_cleanup_ptr</a>)</div><div class="line"><a name="l07885"></a><span class="lineno"> 7885</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a331c5e69285107329a78ab1b2de00844">ast_moh_cleanup_ptr</a>(chan);</div><div class="line"><a name="l07886"></a><span class="lineno"> 7886</span>&#160;}</div><div class="line"><a name="l07887"></a><span class="lineno"> 7887</span>&#160;</div><div class="line"><a name="l07888"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a4fa5db2ad03751a0d3bca7b200536115"> 7888</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a4fa5db2ad03751a0d3bca7b200536115">ast_channel_hash_cb</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> *obj, <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/d6f/structchanlist.html#a899a76dc5f03f0d4ea3793c339e07ee9">flags</a>)</div><div class="line"><a name="l07889"></a><span class="lineno"> 7889</span>&#160;{</div><div class="line"><a name="l07890"></a><span class="lineno"> 7890</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> = (flags &amp; <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>) ? obj : <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>((<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *) obj);</div><div class="line"><a name="l07891"></a><span class="lineno"> 7891</span>&#160;</div><div class="line"><a name="l07892"></a><span class="lineno"> 7892</span>&#160;   <span class="comment">/* If the name isn&#39;t set, return 0 so that the ao2_find() search will</span></div><div class="line"><a name="l07893"></a><span class="lineno"> 7893</span>&#160;<span class="comment">    * start in the first bucket. */</span></div><div class="line"><a name="l07894"></a><span class="lineno"> 7894</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(name)) {</div><div class="line"><a name="l07895"></a><span class="lineno"> 7895</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07896"></a><span class="lineno"> 7896</span>&#160;   }</div><div class="line"><a name="l07897"></a><span class="lineno"> 7897</span>&#160;</div><div class="line"><a name="l07898"></a><span class="lineno"> 7898</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#ab08f8db2a7258e538a0da7417f58db58">ast_str_case_hash</a>(name);</div><div class="line"><a name="l07899"></a><span class="lineno"> 7899</span>&#160;}</div><div class="line"><a name="l07900"></a><span class="lineno"> 7900</span>&#160;<span class="comment"></span></div><div class="line"><a name="l07901"></a><span class="lineno"> 7901</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l07902"></a><span class="lineno"> 7902</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l07903"></a><span class="lineno"> 7903</span>&#160;<span class="comment"> * \brief Print channel object key (name).</span></div><div class="line"><a name="l07904"></a><span class="lineno"> 7904</span>&#160;<span class="comment"> * \since 12.0.0</span></div><div class="line"><a name="l07905"></a><span class="lineno"> 7905</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l07906"></a><span class="lineno"> 7906</span>&#160;<span class="comment"> * \param v_obj A pointer to the object we want the key printed.</span></div><div class="line"><a name="l07907"></a><span class="lineno"> 7907</span>&#160;<span class="comment"> * \param where User data needed by prnt to determine where to put output.</span></div><div class="line"><a name="l07908"></a><span class="lineno"> 7908</span>&#160;<span class="comment"> * \param prnt Print output callback function to use.</span></div><div class="line"><a name="l07909"></a><span class="lineno"> 7909</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l07910"></a><span class="lineno"> 7910</span>&#160;<span class="comment"> * \return Nothing</span></div><div class="line"><a name="l07911"></a><span class="lineno"> 7911</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l07912"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a9eb0c4d08672bea641ad9d28b0ac36b7"> 7912</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a9eb0c4d08672bea641ad9d28b0ac36b7">prnt_channel_key</a>(<span class="keywordtype">void</span> *v_obj, <span class="keywordtype">void</span> *where, <a class="code" href="../../d5/da5/astobj2_8h.html#af236ed10cd1eddcbad0579ed0cf9f4c5">ao2_prnt_fn</a> *prnt)</div><div class="line"><a name="l07913"></a><span class="lineno"> 7913</span>&#160;{</div><div class="line"><a name="l07914"></a><span class="lineno"> 7914</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan = v_obj;</div><div class="line"><a name="l07915"></a><span class="lineno"> 7915</span>&#160;</div><div class="line"><a name="l07916"></a><span class="lineno"> 7916</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l07917"></a><span class="lineno"> 7917</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l07918"></a><span class="lineno"> 7918</span>&#160;   }</div><div class="line"><a name="l07919"></a><span class="lineno"> 7919</span>&#160;   prnt(where, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l07920"></a><span class="lineno"> 7920</span>&#160;}</div><div class="line"><a name="l07921"></a><span class="lineno"> 7921</span>&#160;<span class="comment"></span></div><div class="line"><a name="l07922"></a><span class="lineno"> 7922</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l07923"></a><span class="lineno"> 7923</span>&#160;<span class="comment"> * \brief List of channel variables to append to all channel-related events.</span></div><div class="line"><a name="l07924"></a><span class="lineno"> 7924</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l07925"></a><span class="lineno"><a class="line" href="../../d7/d07/structmanager__channel__variable.html"> 7925</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d7/d07/structmanager__channel__variable.html">manager_channel_variable</a> {</div><div class="line"><a name="l07926"></a><span class="lineno"><a class="line" href="../../d7/d07/structmanager__channel__variable.html#a49273024119a244ea943c65f853eb6fb"> 7926</a></span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a67508a613c8f337732e35d9367b43ae7">AST_LIST_ENTRY</a>(<a class="code" href="../../d7/d07/structmanager__channel__variable.html">manager_channel_variable</a>) <a class="code" href="../../d3/d96/structentry.html">entry</a>;</div><div class="line"><a name="l07927"></a><span class="lineno"><a class="line" href="../../d7/d07/structmanager__channel__variable.html#a8c1450d4026368bfc9530c2d59255457"> 7927</a></span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d7/d07/structmanager__channel__variable.html#a8c1450d4026368bfc9530c2d59255457">isfunc</a>:1;</div><div class="line"><a name="l07928"></a><span class="lineno"><a class="line" href="../../d7/d07/structmanager__channel__variable.html#a635b950b2ddb0f18644a528dbdd60dfe"> 7928</a></span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>[];</div><div class="line"><a name="l07929"></a><span class="lineno"> 7929</span>&#160;};</div><div class="line"><a name="l07930"></a><span class="lineno"> 7930</span>&#160;</div><div class="line"><a name="l07931"></a><span class="lineno"><a class="line" href="../../de/dc7/structexternal__vars.html#ace4e0066a5b24f84b90536e9906619f6"> 7931</a></span>&#160;<a class="code" href="../../df/d90/linkedlists_8h.html#a93a29f1537444303ac1707e50b1a841d">AST_RWLIST_HEAD</a>(<a class="code" href="../../de/dc7/structexternal__vars.html">external_vars</a>, <a class="code" href="../../d7/d07/structmanager__channel__variable.html">manager_channel_variable</a>);</div><div class="line"><a name="l07932"></a><span class="lineno"> 7932</span>&#160;</div><div class="line"><a name="l07933"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a9f51bdb4c307684913cf295526a48d06"> 7933</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../de/dc7/structexternal__vars.html">external_vars</a> <a class="code" href="../../d4/d28/channel_8c.html#a9f51bdb4c307684913cf295526a48d06">ami_vars</a>;</div><div class="line"><a name="l07934"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a5db46ecae7f0dd58545cd8b98cc7491b"> 7934</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../de/dc7/structexternal__vars.html">external_vars</a> <a class="code" href="../../d4/d28/channel_8c.html#a5db46ecae7f0dd58545cd8b98cc7491b">ari_vars</a>;</div><div class="line"><a name="l07935"></a><span class="lineno"> 7935</span>&#160;</div><div class="line"><a name="l07936"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a913ff7afa12007ae9da62636da1bb9b4"> 7936</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a913ff7afa12007ae9da62636da1bb9b4">free_external_channelvars</a>(<span class="keyword">struct</span> <a class="code" href="../../de/dc7/structexternal__vars.html">external_vars</a> *channelvars)</div><div class="line"><a name="l07937"></a><span class="lineno"> 7937</span>&#160;{</div><div class="line"><a name="l07938"></a><span class="lineno"> 7938</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d07/structmanager__channel__variable.html">manager_channel_variable</a> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l07939"></a><span class="lineno"> 7939</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(channelvars);</div><div class="line"><a name="l07940"></a><span class="lineno"> 7940</span>&#160;   <span class="keywordflow">while</span> ((var = <a class="code" href="../../df/d90/linkedlists_8h.html#a3d3aa4fb3b4ba38ad8d6d255d97e037c">AST_RWLIST_REMOVE_HEAD</a>(channelvars, <a class="code" href="../../d3/d96/structentry.html">entry</a>))) {</div><div class="line"><a name="l07941"></a><span class="lineno"> 7941</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(var);</div><div class="line"><a name="l07942"></a><span class="lineno"> 7942</span>&#160;   }</div><div class="line"><a name="l07943"></a><span class="lineno"> 7943</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(channelvars);</div><div class="line"><a name="l07944"></a><span class="lineno"> 7944</span>&#160;}</div><div class="line"><a name="l07945"></a><span class="lineno"> 7945</span>&#160;</div><div class="line"><a name="l07946"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a391b1236902630a3cb9ac5b6d381c6dd"> 7946</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a391b1236902630a3cb9ac5b6d381c6dd">channel_has_external_vars</a>(<span class="keyword">struct</span> <a class="code" href="../../de/dc7/structexternal__vars.html">external_vars</a> *channelvars)</div><div class="line"><a name="l07947"></a><span class="lineno"> 7947</span>&#160;{</div><div class="line"><a name="l07948"></a><span class="lineno"> 7948</span>&#160;   <span class="keywordtype">int</span> vars_present;</div><div class="line"><a name="l07949"></a><span class="lineno"> 7949</span>&#160;</div><div class="line"><a name="l07950"></a><span class="lineno"> 7950</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(channelvars);</div><div class="line"><a name="l07951"></a><span class="lineno"> 7951</span>&#160;   vars_present = !<a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(channelvars);</div><div class="line"><a name="l07952"></a><span class="lineno"> 7952</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(channelvars);</div><div class="line"><a name="l07953"></a><span class="lineno"> 7953</span>&#160;</div><div class="line"><a name="l07954"></a><span class="lineno"> 7954</span>&#160;   <span class="keywordflow">return</span> vars_present;</div><div class="line"><a name="l07955"></a><span class="lineno"> 7955</span>&#160;}</div><div class="line"><a name="l07956"></a><span class="lineno"> 7956</span>&#160;</div><div class="line"><a name="l07957"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ab0286d19e506f9557c567e7e3a076b2f"> 7957</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#ab0286d19e506f9557c567e7e3a076b2f">ast_channel_has_manager_vars</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l07958"></a><span class="lineno"> 7958</span>&#160;{</div><div class="line"><a name="l07959"></a><span class="lineno"> 7959</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a391b1236902630a3cb9ac5b6d381c6dd">channel_has_external_vars</a>(&amp;<a class="code" href="../../d4/d28/channel_8c.html#a9f51bdb4c307684913cf295526a48d06">ami_vars</a>);</div><div class="line"><a name="l07960"></a><span class="lineno"> 7960</span>&#160;}</div><div class="line"><a name="l07961"></a><span class="lineno"> 7961</span>&#160;</div><div class="line"><a name="l07962"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ab49e5db54f7c4f193c7e1ae4a8eb7cf5"> 7962</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#ab49e5db54f7c4f193c7e1ae4a8eb7cf5">ast_channel_has_ari_vars</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l07963"></a><span class="lineno"> 7963</span>&#160;{</div><div class="line"><a name="l07964"></a><span class="lineno"> 7964</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a391b1236902630a3cb9ac5b6d381c6dd">channel_has_external_vars</a>(&amp;<a class="code" href="../../d4/d28/channel_8c.html#a5db46ecae7f0dd58545cd8b98cc7491b">ari_vars</a>);</div><div class="line"><a name="l07965"></a><span class="lineno"> 7965</span>&#160;}</div><div class="line"><a name="l07966"></a><span class="lineno"> 7966</span>&#160;</div><div class="line"><a name="l07967"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ac67e18bdd7cbf0e603e7b209812a000e"> 7967</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#ac67e18bdd7cbf0e603e7b209812a000e">channel_set_external_vars</a>(<span class="keyword">struct</span> <a class="code" href="../../de/dc7/structexternal__vars.html">external_vars</a> *channelvars, <span class="keywordtype">size_t</span> varc, <span class="keywordtype">char</span> **vars)</div><div class="line"><a name="l07968"></a><span class="lineno"> 7968</span>&#160;{</div><div class="line"><a name="l07969"></a><span class="lineno"> 7969</span>&#160;   <span class="keywordtype">size_t</span> i;</div><div class="line"><a name="l07970"></a><span class="lineno"> 7970</span>&#160;</div><div class="line"><a name="l07971"></a><span class="lineno"> 7971</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a913ff7afa12007ae9da62636da1bb9b4">free_external_channelvars</a>(channelvars);</div><div class="line"><a name="l07972"></a><span class="lineno"> 7972</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(channelvars);</div><div class="line"><a name="l07973"></a><span class="lineno"> 7973</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; varc; ++i) {</div><div class="line"><a name="l07974"></a><span class="lineno"> 7974</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a> = vars[i];</div><div class="line"><a name="l07975"></a><span class="lineno"> 7975</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d7/d07/structmanager__channel__variable.html">manager_channel_variable</a> *mcv;</div><div class="line"><a name="l07976"></a><span class="lineno"> 7976</span>&#160;      <span class="keywordflow">if</span> (!(mcv = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*mcv) + strlen(var) + 1))) {</div><div class="line"><a name="l07977"></a><span class="lineno"> 7977</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l07978"></a><span class="lineno"> 7978</span>&#160;      }</div><div class="line"><a name="l07979"></a><span class="lineno"> 7979</span>&#160;      strcpy(mcv-&gt;<a class="code" href="../../d7/d07/structmanager__channel__variable.html#a635b950b2ddb0f18644a528dbdd60dfe">name</a>, var); <span class="comment">/* SAFE */</span></div><div class="line"><a name="l07980"></a><span class="lineno"> 7980</span>&#160;      <span class="keywordflow">if</span> (strchr(var, <span class="charliteral">&#39;(&#39;</span>)) {</div><div class="line"><a name="l07981"></a><span class="lineno"> 7981</span>&#160;         mcv-&gt;<a class="code" href="../../d7/d07/structmanager__channel__variable.html#a8c1450d4026368bfc9530c2d59255457">isfunc</a> = 1;</div><div class="line"><a name="l07982"></a><span class="lineno"> 7982</span>&#160;      }</div><div class="line"><a name="l07983"></a><span class="lineno"> 7983</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a>(channelvars, mcv, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l07984"></a><span class="lineno"> 7984</span>&#160;   }</div><div class="line"><a name="l07985"></a><span class="lineno"> 7985</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(channelvars);</div><div class="line"><a name="l07986"></a><span class="lineno"> 7986</span>&#160;</div><div class="line"><a name="l07987"></a><span class="lineno"> 7987</span>&#160;}</div><div class="line"><a name="l07988"></a><span class="lineno"> 7988</span>&#160;</div><div class="line"><a name="l07989"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a43d96fc80c7e8289f1fac8d7b8fef3ec"> 7989</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a43d96fc80c7e8289f1fac8d7b8fef3ec">ast_channel_set_manager_vars</a>(<span class="keywordtype">size_t</span> varc, <span class="keywordtype">char</span> **vars)</div><div class="line"><a name="l07990"></a><span class="lineno"> 7990</span>&#160;{</div><div class="line"><a name="l07991"></a><span class="lineno"> 7991</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#ac67e18bdd7cbf0e603e7b209812a000e">channel_set_external_vars</a>(&amp;<a class="code" href="../../d4/d28/channel_8c.html#a9f51bdb4c307684913cf295526a48d06">ami_vars</a>, varc, vars);</div><div class="line"><a name="l07992"></a><span class="lineno"> 7992</span>&#160;}</div><div class="line"><a name="l07993"></a><span class="lineno"> 7993</span>&#160;</div><div class="line"><a name="l07994"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8608dc790ac2ad371c5e8e8550dfe110"> 7994</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a8608dc790ac2ad371c5e8e8550dfe110">ast_channel_set_ari_vars</a>(<span class="keywordtype">size_t</span> varc, <span class="keywordtype">char</span> **vars)</div><div class="line"><a name="l07995"></a><span class="lineno"> 7995</span>&#160;{</div><div class="line"><a name="l07996"></a><span class="lineno"> 7996</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#ac67e18bdd7cbf0e603e7b209812a000e">channel_set_external_vars</a>(&amp;<a class="code" href="../../d4/d28/channel_8c.html#a5db46ecae7f0dd58545cd8b98cc7491b">ari_vars</a>, varc, vars);</div><div class="line"><a name="l07997"></a><span class="lineno"> 7997</span>&#160;}</div><div class="line"><a name="l07998"></a><span class="lineno"> 7998</span>&#160;<span class="comment"></span></div><div class="line"><a name="l07999"></a><span class="lineno"> 7999</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l08000"></a><span class="lineno"> 8000</span>&#160;<span class="comment"> * \brief Destructor for lists of variables.</span></div><div class="line"><a name="l08001"></a><span class="lineno"> 8001</span>&#160;<span class="comment"> * \param obj AO2 object.</span></div><div class="line"><a name="l08002"></a><span class="lineno"> 8002</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l08003"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a77aaa8f695ceea7db331fad92a4ff633"> 8003</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a77aaa8f695ceea7db331fad92a4ff633">varshead_dtor</a>(<span class="keywordtype">void</span> *obj)</div><div class="line"><a name="l08004"></a><span class="lineno"> 8004</span>&#160;{</div><div class="line"><a name="l08005"></a><span class="lineno"> 8005</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/de6/structvarshead.html">varshead</a> *head = obj;</div><div class="line"><a name="l08006"></a><span class="lineno"> 8006</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d7d/structast__var__t.html">ast_var_t</a> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l08007"></a><span class="lineno"> 8007</span>&#160;</div><div class="line"><a name="l08008"></a><span class="lineno"> 8008</span>&#160;   <span class="keywordflow">while</span> ((var = <a class="code" href="../../df/d90/linkedlists_8h.html#a3d3aa4fb3b4ba38ad8d6d255d97e037c">AST_RWLIST_REMOVE_HEAD</a>(head, <a class="code" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">entries</a>))) {</div><div class="line"><a name="l08009"></a><span class="lineno"> 8009</span>&#160;      <a class="code" href="../../d9/de7/chanvars_8h.html#ae19fa022349aa0481f982ccced85d7ba">ast_var_delete</a>(var);</div><div class="line"><a name="l08010"></a><span class="lineno"> 8010</span>&#160;   }</div><div class="line"><a name="l08011"></a><span class="lineno"> 8011</span>&#160;}</div><div class="line"><a name="l08012"></a><span class="lineno"> 8012</span>&#160;</div><div class="line"><a name="l08013"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ad2e95ec12060b842aa4250de56a25c27"> 8013</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../dd/de6/structvarshead.html">varshead</a> *<a class="code" href="../../d4/d28/channel_8c.html#ad2e95ec12060b842aa4250de56a25c27">ast_channel_get_vars</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l08014"></a><span class="lineno"> 8014</span>&#160;{</div><div class="line"><a name="l08015"></a><span class="lineno"> 8015</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/de6/structvarshead.html">varshead</a> *, ret, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l08016"></a><span class="lineno"> 8016</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d7d/structast__var__t.html">ast_var_t</a> *cv;</div><div class="line"><a name="l08017"></a><span class="lineno"> 8017</span>&#160;</div><div class="line"><a name="l08018"></a><span class="lineno"> 8018</span>&#160;   ret = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*ret), <a class="code" href="../../d4/d28/channel_8c.html#a77aaa8f695ceea7db331fad92a4ff633">varshead_dtor</a>);</div><div class="line"><a name="l08019"></a><span class="lineno"> 8019</span>&#160;</div><div class="line"><a name="l08020"></a><span class="lineno"> 8020</span>&#160;   <span class="keywordflow">if</span> (!ret) {</div><div class="line"><a name="l08021"></a><span class="lineno"> 8021</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08022"></a><span class="lineno"> 8022</span>&#160;   }</div><div class="line"><a name="l08023"></a><span class="lineno"> 8023</span>&#160;</div><div class="line"><a name="l08024"></a><span class="lineno"> 8024</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(<a class="code" href="../../d5/d7b/channel_8h.html#add6255866ea1651a90cf70d963c4920a">ast_channel_varshead</a>(chan), cv, <a class="code" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">entries</a>) {</div><div class="line"><a name="l08025"></a><span class="lineno"> 8025</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d7d/structast__var__t.html">ast_var_t</a> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a> = <a class="code" href="../../d9/de7/chanvars_8h.html#a78deeb18e93b145e9895346cef766577">ast_var_assign</a>(<a class="code" href="../../d9/de7/chanvars_8h.html#a356a31cd608ec07d3668dcd589be49d8">ast_var_name</a>(cv), <a class="code" href="../../d9/de7/chanvars_8h.html#a8e0081172db71c5021d20706c50d959c">ast_var_value</a>(cv));</div><div class="line"><a name="l08026"></a><span class="lineno"> 8026</span>&#160;</div><div class="line"><a name="l08027"></a><span class="lineno"> 8027</span>&#160;      <span class="keywordflow">if</span> (!var) {</div><div class="line"><a name="l08028"></a><span class="lineno"> 8028</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08029"></a><span class="lineno"> 8029</span>&#160;      }</div><div class="line"><a name="l08030"></a><span class="lineno"> 8030</span>&#160;</div><div class="line"><a name="l08031"></a><span class="lineno"> 8031</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(ret, var, <a class="code" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">entries</a>);</div><div class="line"><a name="l08032"></a><span class="lineno"> 8032</span>&#160;   }</div><div class="line"><a name="l08033"></a><span class="lineno"> 8033</span>&#160;</div><div class="line"><a name="l08034"></a><span class="lineno"> 8034</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(ret, +1);</div><div class="line"><a name="l08035"></a><span class="lineno"> 8035</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l08036"></a><span class="lineno"> 8036</span>&#160;}</div><div class="line"><a name="l08037"></a><span class="lineno"> 8037</span>&#160;</div><div class="line"><a name="l08038"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a9b9a1f0865d838fd0104c433f3a408b2"> 8038</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../dd/de6/structvarshead.html">varshead</a> *<a class="code" href="../../d4/d28/channel_8c.html#a9b9a1f0865d838fd0104c433f3a408b2">channel_get_external_vars</a>(<span class="keyword">struct</span> <a class="code" href="../../de/dc7/structexternal__vars.html">external_vars</a> *channelvars,</div><div class="line"><a name="l08039"></a><span class="lineno"> 8039</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l08040"></a><span class="lineno"> 8040</span>&#160;{</div><div class="line"><a name="l08041"></a><span class="lineno"> 8041</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/de6/structvarshead.html">varshead</a> *, ret, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l08042"></a><span class="lineno"> 8042</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, tmp, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l08043"></a><span class="lineno"> 8043</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d07/structmanager__channel__variable.html">manager_channel_variable</a> *mcv;</div><div class="line"><a name="l08044"></a><span class="lineno"> 8044</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a8b9d9f2f2c41ecf3c70587c2510dddfc">SCOPED_LOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, channelvars, <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>, <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>);</div><div class="line"><a name="l08045"></a><span class="lineno"> 8045</span>&#160;</div><div class="line"><a name="l08046"></a><span class="lineno"> 8046</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(channelvars)) {</div><div class="line"><a name="l08047"></a><span class="lineno"> 8047</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08048"></a><span class="lineno"> 8048</span>&#160;   }</div><div class="line"><a name="l08049"></a><span class="lineno"> 8049</span>&#160;</div><div class="line"><a name="l08050"></a><span class="lineno"> 8050</span>&#160;   ret = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*ret), <a class="code" href="../../d4/d28/channel_8c.html#a77aaa8f695ceea7db331fad92a4ff633">varshead_dtor</a>);</div><div class="line"><a name="l08051"></a><span class="lineno"> 8051</span>&#160;   tmp = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(16);</div><div class="line"><a name="l08052"></a><span class="lineno"> 8052</span>&#160;</div><div class="line"><a name="l08053"></a><span class="lineno"> 8053</span>&#160;   <span class="keywordflow">if</span> (!ret || !tmp) {</div><div class="line"><a name="l08054"></a><span class="lineno"> 8054</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08055"></a><span class="lineno"> 8055</span>&#160;   }</div><div class="line"><a name="l08056"></a><span class="lineno"> 8056</span>&#160;</div><div class="line"><a name="l08057"></a><span class="lineno"> 8057</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(channelvars, mcv, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l08058"></a><span class="lineno"> 8058</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d85/structval.html">val</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08059"></a><span class="lineno"> 8059</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d7d/structast__var__t.html">ast_var_t</a> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l08060"></a><span class="lineno"> 8060</span>&#160;</div><div class="line"><a name="l08061"></a><span class="lineno"> 8061</span>&#160;      <span class="keywordflow">if</span> (mcv-&gt;<a class="code" href="../../d7/d07/structmanager__channel__variable.html#a8c1450d4026368bfc9530c2d59255457">isfunc</a>) {</div><div class="line"><a name="l08062"></a><span class="lineno"> 8062</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#a9c74b2f5ba8be6e351d35c1b97803e1e">ast_func_read2</a>(chan, mcv-&gt;<a class="code" href="../../d7/d07/structmanager__channel__variable.html#a635b950b2ddb0f18644a528dbdd60dfe">name</a>, &amp;tmp, 0) == 0) {</div><div class="line"><a name="l08063"></a><span class="lineno"> 8063</span>&#160;            val = <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(tmp);</div><div class="line"><a name="l08064"></a><span class="lineno"> 8064</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08065"></a><span class="lineno"> 8065</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>,</div><div class="line"><a name="l08066"></a><span class="lineno"> 8066</span>&#160;               <span class="stringliteral">&quot;Error invoking function %s\n&quot;</span>, mcv-&gt;<a class="code" href="../../d7/d07/structmanager__channel__variable.html#a635b950b2ddb0f18644a528dbdd60dfe">name</a>);</div><div class="line"><a name="l08067"></a><span class="lineno"> 8067</span>&#160;         }</div><div class="line"><a name="l08068"></a><span class="lineno"> 8068</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08069"></a><span class="lineno"> 8069</span>&#160;         val = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, mcv-&gt;<a class="code" href="../../d7/d07/structmanager__channel__variable.html#a635b950b2ddb0f18644a528dbdd60dfe">name</a>);</div><div class="line"><a name="l08070"></a><span class="lineno"> 8070</span>&#160;      }</div><div class="line"><a name="l08071"></a><span class="lineno"> 8071</span>&#160;</div><div class="line"><a name="l08072"></a><span class="lineno"> 8072</span>&#160;      var = <a class="code" href="../../d9/de7/chanvars_8h.html#a78deeb18e93b145e9895346cef766577">ast_var_assign</a>(mcv-&gt;<a class="code" href="../../d7/d07/structmanager__channel__variable.html#a635b950b2ddb0f18644a528dbdd60dfe">name</a>, val ? val : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l08073"></a><span class="lineno"> 8073</span>&#160;      <span class="keywordflow">if</span> (!var) {</div><div class="line"><a name="l08074"></a><span class="lineno"> 8074</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08075"></a><span class="lineno"> 8075</span>&#160;      }</div><div class="line"><a name="l08076"></a><span class="lineno"> 8076</span>&#160;</div><div class="line"><a name="l08077"></a><span class="lineno"> 8077</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a>(ret, var, <a class="code" href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">entries</a>);</div><div class="line"><a name="l08078"></a><span class="lineno"> 8078</span>&#160;   }</div><div class="line"><a name="l08079"></a><span class="lineno"> 8079</span>&#160;</div><div class="line"><a name="l08080"></a><span class="lineno"> 8080</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(ret, +1);</div><div class="line"><a name="l08081"></a><span class="lineno"> 8081</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l08082"></a><span class="lineno"> 8082</span>&#160;</div><div class="line"><a name="l08083"></a><span class="lineno"> 8083</span>&#160;}</div><div class="line"><a name="l08084"></a><span class="lineno"> 8084</span>&#160;</div><div class="line"><a name="l08085"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a5f72bc09af81d17c4ecebf77cea38508"> 8085</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../dd/de6/structvarshead.html">varshead</a> *<a class="code" href="../../d4/d28/channel_8c.html#a5f72bc09af81d17c4ecebf77cea38508">ast_channel_get_manager_vars</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l08086"></a><span class="lineno"> 8086</span>&#160;{</div><div class="line"><a name="l08087"></a><span class="lineno"> 8087</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a9b9a1f0865d838fd0104c433f3a408b2">channel_get_external_vars</a>(&amp;<a class="code" href="../../d4/d28/channel_8c.html#a9f51bdb4c307684913cf295526a48d06">ami_vars</a>, chan);</div><div class="line"><a name="l08088"></a><span class="lineno"> 8088</span>&#160;}</div><div class="line"><a name="l08089"></a><span class="lineno"> 8089</span>&#160;</div><div class="line"><a name="l08090"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a1c6e57f04f1e4d23dcd27c2bac717aa0"> 8090</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../dd/de6/structvarshead.html">varshead</a> *<a class="code" href="../../d4/d28/channel_8c.html#a1c6e57f04f1e4d23dcd27c2bac717aa0">ast_channel_get_ari_vars</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l08091"></a><span class="lineno"> 8091</span>&#160;{</div><div class="line"><a name="l08092"></a><span class="lineno"> 8092</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a9b9a1f0865d838fd0104c433f3a408b2">channel_get_external_vars</a>(&amp;<a class="code" href="../../d4/d28/channel_8c.html#a5db46ecae7f0dd58545cd8b98cc7491b">ari_vars</a>, chan);</div><div class="line"><a name="l08093"></a><span class="lineno"> 8093</span>&#160;}</div><div class="line"><a name="l08094"></a><span class="lineno"> 8094</span>&#160;</div><div class="line"><a name="l08095"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a010c8169fd7c857d615a4195e932d928"> 8095</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a010c8169fd7c857d615a4195e932d928">channels_shutdown</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l08096"></a><span class="lineno"> 8096</span>&#160;{</div><div class="line"><a name="l08097"></a><span class="lineno"> 8097</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a913ff7afa12007ae9da62636da1bb9b4">free_external_channelvars</a>(&amp;<a class="code" href="../../d4/d28/channel_8c.html#a9f51bdb4c307684913cf295526a48d06">ami_vars</a>);</div><div class="line"><a name="l08098"></a><span class="lineno"> 8098</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a913ff7afa12007ae9da62636da1bb9b4">free_external_channelvars</a>(&amp;<a class="code" href="../../d4/d28/channel_8c.html#a5db46ecae7f0dd58545cd8b98cc7491b">ari_vars</a>);</div><div class="line"><a name="l08099"></a><span class="lineno"> 8099</span>&#160;</div><div class="line"><a name="l08100"></a><span class="lineno"> 8100</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a>(cli_channel, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(cli_channel));</div><div class="line"><a name="l08101"></a><span class="lineno"> 8101</span>&#160;   <span class="keywordflow">if</span> (channels) {</div><div class="line"><a name="l08102"></a><span class="lineno"> 8102</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a4b8c1cca9dace1cf1bbadc5039f3dedf">ao2_container_unregister</a>(<span class="stringliteral">&quot;channels&quot;</span>);</div><div class="line"><a name="l08103"></a><span class="lineno"> 8103</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(channels, -1);</div><div class="line"><a name="l08104"></a><span class="lineno"> 8104</span>&#160;      channels = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08105"></a><span class="lineno"> 8105</span>&#160;   }</div><div class="line"><a name="l08106"></a><span class="lineno"> 8106</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a53b708b7fc71dcbcd33acae0ad4d7ef8">ast_channel_unregister</a>(&amp;surrogate_tech);</div><div class="line"><a name="l08107"></a><span class="lineno"> 8107</span>&#160;}</div><div class="line"><a name="l08108"></a><span class="lineno"> 8108</span>&#160;</div><div class="line"><a name="l08109"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a9b09f889da3c4aa25ce350e3239e29d2"> 8109</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a9b09f889da3c4aa25ce350e3239e29d2">ast_channels_init</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l08110"></a><span class="lineno"> 8110</span>&#160;{</div><div class="line"><a name="l08111"></a><span class="lineno"> 8111</span>&#160;   channels = <a class="code" href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a>, 0, <a class="code" href="../../d5/d7b/channel_8h.html#aa0358ea3ad40c705e5bd7c391374238a">AST_NUM_CHANNEL_BUCKETS</a>,</div><div class="line"><a name="l08112"></a><span class="lineno"> 8112</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a4fa5db2ad03751a0d3bca7b200536115">ast_channel_hash_cb</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d28/channel_8c.html#aed8efcc0048d18a845e16c02c7e21ae6">ast_channel_cmp_cb</a>);</div><div class="line"><a name="l08113"></a><span class="lineno"> 8113</span>&#160;   <span class="keywordflow">if</span> (!channels) {</div><div class="line"><a name="l08114"></a><span class="lineno"> 8114</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l08115"></a><span class="lineno"> 8115</span>&#160;   }</div><div class="line"><a name="l08116"></a><span class="lineno"> 8116</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#abdb952d2373503555d96f02f130c5770">ao2_container_register</a>(<span class="stringliteral">&quot;channels&quot;</span>, channels, <a class="code" href="../../d4/d28/channel_8c.html#a9eb0c4d08672bea641ad9d28b0ac36b7">prnt_channel_key</a>);</div><div class="line"><a name="l08117"></a><span class="lineno"> 8117</span>&#160;</div><div class="line"><a name="l08118"></a><span class="lineno"> 8118</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#ab5f3776fda943e52820ceeee5835c1b4">ast_channel_register</a>(&amp;surrogate_tech);</div><div class="line"><a name="l08119"></a><span class="lineno"> 8119</span>&#160;</div><div class="line"><a name="l08120"></a><span class="lineno"> 8120</span>&#160;   <a class="code" href="../../d9/d4a/stasis__channels_8h.html#a746be4da8b0536018438640d2db14b8c">ast_stasis_channels_init</a>();</div><div class="line"><a name="l08121"></a><span class="lineno"> 8121</span>&#160;</div><div class="line"><a name="l08122"></a><span class="lineno"> 8122</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a>(cli_channel, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(cli_channel));</div><div class="line"><a name="l08123"></a><span class="lineno"> 8123</span>&#160;</div><div class="line"><a name="l08124"></a><span class="lineno"> 8124</span>&#160;   <a class="code" href="../../db/db2/asterisk_8h.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a>(<a class="code" href="../../d4/d28/channel_8c.html#a010c8169fd7c857d615a4195e932d928">channels_shutdown</a>);</div><div class="line"><a name="l08125"></a><span class="lineno"> 8125</span>&#160;</div><div class="line"><a name="l08126"></a><span class="lineno"> 8126</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a389aaa73318087dfed0cdd11e1d3090b">AST_RWLIST_HEAD_INIT</a>(&amp;<a class="code" href="../../d4/d28/channel_8c.html#a9f51bdb4c307684913cf295526a48d06">ami_vars</a>);</div><div class="line"><a name="l08127"></a><span class="lineno"> 8127</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a389aaa73318087dfed0cdd11e1d3090b">AST_RWLIST_HEAD_INIT</a>(&amp;<a class="code" href="../../d4/d28/channel_8c.html#a5db46ecae7f0dd58545cd8b98cc7491b">ari_vars</a>);</div><div class="line"><a name="l08128"></a><span class="lineno"> 8128</span>&#160;</div><div class="line"><a name="l08129"></a><span class="lineno"> 8129</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l08130"></a><span class="lineno"> 8130</span>&#160;}</div><div class="line"><a name="l08131"></a><span class="lineno"> 8131</span>&#160;<span class="comment"></span></div><div class="line"><a name="l08132"></a><span class="lineno"> 8132</span>&#160;<span class="comment">/*! \brief Print call group and pickup group ---*/</span></div><div class="line"><a name="l08133"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a092d4e67b0bda0f99b02a1534ee75408"> 8133</a></span>&#160;<span class="keywordtype">char</span> *<a class="code" href="../../d4/d28/channel_8c.html#a092d4e67b0bda0f99b02a1534ee75408">ast_print_group</a>(<span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <span class="keywordtype">int</span> buflen, <a class="code" href="../../d5/d7b/channel_8h.html#a641d81d0c5c8df99d43eff69aede3bfd">ast_group_t</a> <a class="code" href="../../d3/d08/structgroup.html">group</a>)</div><div class="line"><a name="l08134"></a><span class="lineno"> 8134</span>&#160;{</div><div class="line"><a name="l08135"></a><span class="lineno"> 8135</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div><div class="line"><a name="l08136"></a><span class="lineno"> 8136</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a18b6f1cf748d864dd085819a7d4e6680">first</a> = 1;</div><div class="line"><a name="l08137"></a><span class="lineno"> 8137</span>&#160;   <span class="keywordtype">char</span> num[3];</div><div class="line"><a name="l08138"></a><span class="lineno"> 8138</span>&#160;</div><div class="line"><a name="l08139"></a><span class="lineno"> 8139</span>&#160;   buf[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l08140"></a><span class="lineno"> 8140</span>&#160;</div><div class="line"><a name="l08141"></a><span class="lineno"> 8141</span>&#160;   <span class="keywordflow">if</span> (!group) <span class="comment">/* Return empty string if no group */</span></div><div class="line"><a name="l08142"></a><span class="lineno"> 8142</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l08143"></a><span class="lineno"> 8143</span>&#160;</div><div class="line"><a name="l08144"></a><span class="lineno"> 8144</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt;= 63; i++) {   <span class="comment">/* Max group is 63 */</span></div><div class="line"><a name="l08145"></a><span class="lineno"> 8145</span>&#160;      <span class="keywordflow">if</span> (group &amp; ((<a class="code" href="../../d5/d7b/channel_8h.html#a641d81d0c5c8df99d43eff69aede3bfd">ast_group_t</a>) 1 &lt;&lt; i)) {</div><div class="line"><a name="l08146"></a><span class="lineno"> 8146</span>&#160;         <span class="keywordflow">if</span> (!first) {</div><div class="line"><a name="l08147"></a><span class="lineno"> 8147</span>&#160;            strncat(buf, <span class="stringliteral">&quot;, &quot;</span>, buflen - strlen(buf) - 1);</div><div class="line"><a name="l08148"></a><span class="lineno"> 8148</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08149"></a><span class="lineno"> 8149</span>&#160;            first = 0;</div><div class="line"><a name="l08150"></a><span class="lineno"> 8150</span>&#160;         }</div><div class="line"><a name="l08151"></a><span class="lineno"> 8151</span>&#160;         snprintf(num, <span class="keyword">sizeof</span>(num), <span class="stringliteral">&quot;%u&quot;</span>, i);</div><div class="line"><a name="l08152"></a><span class="lineno"> 8152</span>&#160;         strncat(buf, num, buflen - strlen(buf) - 1);</div><div class="line"><a name="l08153"></a><span class="lineno"> 8153</span>&#160;      }</div><div class="line"><a name="l08154"></a><span class="lineno"> 8154</span>&#160;   }</div><div class="line"><a name="l08155"></a><span class="lineno"> 8155</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l08156"></a><span class="lineno"> 8156</span>&#160;}</div><div class="line"><a name="l08157"></a><span class="lineno"> 8157</span>&#160;</div><div class="line"><a name="l08158"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a39b24ee9bbee67cd9e4ceb2626a4eda3"> 8158</a></span>&#160;<span class="keywordtype">char</span> *<a class="code" href="../../d4/d28/channel_8c.html#a39b24ee9bbee67cd9e4ceb2626a4eda3">ast_print_namedgroups</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> **<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <span class="keyword">struct</span> ast_namedgroups *<a class="code" href="../../d3/d08/structgroup.html">group</a>)</div><div class="line"><a name="l08159"></a><span class="lineno"> 8159</span>&#160;{</div><div class="line"><a name="l08160"></a><span class="lineno"> 8160</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *grp = (<span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *) group;</div><div class="line"><a name="l08161"></a><span class="lineno"> 8161</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d9c/structnamedgroup__member.html">namedgroup_member</a> *ng;</div><div class="line"><a name="l08162"></a><span class="lineno"> 8162</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a18b6f1cf748d864dd085819a7d4e6680">first</a> = 1;</div><div class="line"><a name="l08163"></a><span class="lineno"> 8163</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> it;</div><div class="line"><a name="l08164"></a><span class="lineno"> 8164</span>&#160;</div><div class="line"><a name="l08165"></a><span class="lineno"> 8165</span>&#160;   <span class="keywordflow">if</span> (!grp) {</div><div class="line"><a name="l08166"></a><span class="lineno"> 8166</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(*buf);</div><div class="line"><a name="l08167"></a><span class="lineno"> 8167</span>&#160;   }</div><div class="line"><a name="l08168"></a><span class="lineno"> 8168</span>&#160;</div><div class="line"><a name="l08169"></a><span class="lineno"> 8169</span>&#160;   <span class="keywordflow">for</span> (it = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(grp, 0); (ng = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;it)); <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(ng, -1)) {</div><div class="line"><a name="l08170"></a><span class="lineno"> 8170</span>&#160;      <span class="keywordflow">if</span> (!first) {</div><div class="line"><a name="l08171"></a><span class="lineno"> 8171</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(buf, 0, <span class="stringliteral">&quot;, &quot;</span>);</div><div class="line"><a name="l08172"></a><span class="lineno"> 8172</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08173"></a><span class="lineno"> 8173</span>&#160;         first = 0;</div><div class="line"><a name="l08174"></a><span class="lineno"> 8174</span>&#160;      }</div><div class="line"><a name="l08175"></a><span class="lineno"> 8175</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(buf, 0, <span class="stringliteral">&quot;%s&quot;</span>, ng-&gt;<a class="code" href="../../db/d9c/structnamedgroup__member.html#ac8b44a387cf3da062c4a32316b43962c">name</a>);</div><div class="line"><a name="l08176"></a><span class="lineno"> 8176</span>&#160;   }</div><div class="line"><a name="l08177"></a><span class="lineno"> 8177</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;it);</div><div class="line"><a name="l08178"></a><span class="lineno"> 8178</span>&#160;</div><div class="line"><a name="l08179"></a><span class="lineno"> 8179</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(*buf);</div><div class="line"><a name="l08180"></a><span class="lineno"> 8180</span>&#160;}</div><div class="line"><a name="l08181"></a><span class="lineno"> 8181</span>&#160;</div><div class="line"><a name="l08182"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8a0919eb0f17e51d9bbf9de280950a65"> 8182</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a8a0919eb0f17e51d9bbf9de280950a65">namedgroup_match</a>(<span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *arg, <span class="keywordtype">int</span> <a class="code" href="../../dd/d6f/structchanlist.html#a899a76dc5f03f0d4ea3793c339e07ee9">flags</a>)</div><div class="line"><a name="l08183"></a><span class="lineno"> 8183</span>&#160;{</div><div class="line"><a name="l08184"></a><span class="lineno"> 8184</span>&#160;   <span class="keywordtype">void</span> *<a class="code" href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a>;</div><div class="line"><a name="l08185"></a><span class="lineno"> 8185</span>&#160;</div><div class="line"><a name="l08186"></a><span class="lineno"> 8186</span>&#160;   match = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(arg, obj, <a class="code" href="../../d5/da5/astobj2_8h.html#a2448088751e4d494d1981c7f4b84e8d0">OBJ_POINTER</a>);</div><div class="line"><a name="l08187"></a><span class="lineno"> 8187</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(match);</div><div class="line"><a name="l08188"></a><span class="lineno"> 8188</span>&#160;</div><div class="line"><a name="l08189"></a><span class="lineno"> 8189</span>&#160;   <span class="keywordflow">return</span> match ? <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df">CMP_STOP</a> : 0;</div><div class="line"><a name="l08190"></a><span class="lineno"> 8190</span>&#160;}</div><div class="line"><a name="l08191"></a><span class="lineno"> 8191</span>&#160;</div><div class="line"><a name="l08192"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a6cd21b1843ef2c21455fd943549e8781"> 8192</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a6cd21b1843ef2c21455fd943549e8781">ast_namedgroups_intersect</a>(<span class="keyword">struct</span> ast_namedgroups *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>, <span class="keyword">struct</span> ast_namedgroups *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>)</div><div class="line"><a name="l08193"></a><span class="lineno"> 8193</span>&#160;{</div><div class="line"><a name="l08194"></a><span class="lineno"> 8194</span>&#160;   <span class="keywordtype">void</span> *<a class="code" href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a>;</div><div class="line"><a name="l08195"></a><span class="lineno"> 8195</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *group_a = (<span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *) a;</div><div class="line"><a name="l08196"></a><span class="lineno"> 8196</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *group_b = (<span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *) b;</div><div class="line"><a name="l08197"></a><span class="lineno"> 8197</span>&#160;</div><div class="line"><a name="l08198"></a><span class="lineno"> 8198</span>&#160;   <span class="keywordflow">if</span> (!a || !b) {</div><div class="line"><a name="l08199"></a><span class="lineno"> 8199</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l08200"></a><span class="lineno"> 8200</span>&#160;   }</div><div class="line"><a name="l08201"></a><span class="lineno"> 8201</span>&#160;</div><div class="line"><a name="l08202"></a><span class="lineno"> 8202</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l08203"></a><span class="lineno"> 8203</span>&#160;<span class="comment">    * Do groups a and b intersect?  Since a and b are hash tables,</span></div><div class="line"><a name="l08204"></a><span class="lineno"> 8204</span>&#160;<span class="comment">    * the average time complexity is:</span></div><div class="line"><a name="l08205"></a><span class="lineno"> 8205</span>&#160;<span class="comment">    * O(a.count &lt;= b.count ? a.count : b.count)</span></div><div class="line"><a name="l08206"></a><span class="lineno"> 8206</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l08207"></a><span class="lineno"> 8207</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(group_b) &lt; <a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(group_a)) {</div><div class="line"><a name="l08208"></a><span class="lineno"> 8208</span>&#160;      <span class="comment">/* Traverse over the smaller group. */</span></div><div class="line"><a name="l08209"></a><span class="lineno"> 8209</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#aac9153aee4bdb92701df902e06a74eb3">SWAP</a>(group_a, group_b);</div><div class="line"><a name="l08210"></a><span class="lineno"> 8210</span>&#160;   }</div><div class="line"><a name="l08211"></a><span class="lineno"> 8211</span>&#160;   match = <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(group_a, 0, <a class="code" href="../../d4/d28/channel_8c.html#a8a0919eb0f17e51d9bbf9de280950a65">namedgroup_match</a>, group_b);</div><div class="line"><a name="l08212"></a><span class="lineno"> 8212</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(match);</div><div class="line"><a name="l08213"></a><span class="lineno"> 8213</span>&#160;</div><div class="line"><a name="l08214"></a><span class="lineno"> 8214</span>&#160;   <span class="keywordflow">return</span> match != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08215"></a><span class="lineno"> 8215</span>&#160;}</div><div class="line"><a name="l08216"></a><span class="lineno"> 8216</span>&#160;</div><div class="line"><a name="l08217"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a5b14bfe21364dd8f73d45f15cf313524"> 8217</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a5b14bfe21364dd8f73d45f15cf313524">ast_set_variables</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *vars)</div><div class="line"><a name="l08218"></a><span class="lineno"> 8218</span>&#160;{</div><div class="line"><a name="l08219"></a><span class="lineno"> 8219</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *cur;</div><div class="line"><a name="l08220"></a><span class="lineno"> 8220</span>&#160;</div><div class="line"><a name="l08221"></a><span class="lineno"> 8221</span>&#160;   <span class="keywordflow">for</span> (cur = vars; cur; cur = cur-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l08222"></a><span class="lineno"> 8222</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, cur-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, cur-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l08223"></a><span class="lineno"> 8223</span>&#160;   }</div><div class="line"><a name="l08224"></a><span class="lineno"> 8224</span>&#160;}</div><div class="line"><a name="l08225"></a><span class="lineno"> 8225</span>&#160;</div><div class="line"><a name="l08226"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a9b25e6d6b996635d7fb5fc6e000e71c9"> 8226</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> *<a class="code" href="../../d4/d28/channel_8c.html#a9b25e6d6b996635d7fb5fc6e000e71c9">silence_generator_alloc</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">void</span> *data)</div><div class="line"><a name="l08227"></a><span class="lineno"> 8227</span>&#160;{</div><div class="line"><a name="l08228"></a><span class="lineno"> 8228</span>&#160;   <span class="comment">/* just store the data pointer in the channel structure */</span></div><div class="line"><a name="l08229"></a><span class="lineno"> 8229</span>&#160;   <span class="keywordflow">return</span> data;</div><div class="line"><a name="l08230"></a><span class="lineno"> 8230</span>&#160;}</div><div class="line"><a name="l08231"></a><span class="lineno"> 8231</span>&#160;</div><div class="line"><a name="l08232"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a5b6038c1b5aeb272bcb35c937088984c"> 8232</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a5b6038c1b5aeb272bcb35c937088984c">silence_generator_release</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">void</span> *data)</div><div class="line"><a name="l08233"></a><span class="lineno"> 8233</span>&#160;{</div><div class="line"><a name="l08234"></a><span class="lineno"> 8234</span>&#160;   <span class="comment">/* nothing to do */</span></div><div class="line"><a name="l08235"></a><span class="lineno"> 8235</span>&#160;}</div><div class="line"><a name="l08236"></a><span class="lineno"> 8236</span>&#160;</div><div class="line"><a name="l08237"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a196556ea463d5aa7e7672d673a2f688f"> 8237</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a196556ea463d5aa7e7672d673a2f688f">silence_generator_generate</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">void</span> *data, <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, <span class="keywordtype">int</span> samples)</div><div class="line"><a name="l08238"></a><span class="lineno"> 8238</span>&#160;{</div><div class="line"><a name="l08239"></a><span class="lineno"> 8239</span>&#160;   <span class="keywordtype">short</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[samples];</div><div class="line"><a name="l08240"></a><span class="lineno"> 8240</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> frame = {</div><div class="line"><a name="l08241"></a><span class="lineno"> 8241</span>&#160;      .<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>,</div><div class="line"><a name="l08242"></a><span class="lineno"> 8242</span>&#160;      .data.ptr = <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>,</div><div class="line"><a name="l08243"></a><span class="lineno"> 8243</span>&#160;      .samples = <a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>,</div><div class="line"><a name="l08244"></a><span class="lineno"> 8244</span>&#160;      .datalen = <span class="keyword">sizeof</span>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>),</div><div class="line"><a name="l08245"></a><span class="lineno"> 8245</span>&#160;   };</div><div class="line"><a name="l08246"></a><span class="lineno"> 8246</span>&#160;   frame.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a> = <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>;</div><div class="line"><a name="l08247"></a><span class="lineno"> 8247</span>&#160;</div><div class="line"><a name="l08248"></a><span class="lineno"> 8248</span>&#160;   memset(buf, 0, <span class="keyword">sizeof</span>(buf));</div><div class="line"><a name="l08249"></a><span class="lineno"> 8249</span>&#160;</div><div class="line"><a name="l08250"></a><span class="lineno"> 8250</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d28/channel_8c.html#a1b4c335490f5170c1f9e2c7c6781003f">ast_write</a>(chan, &amp;frame))</div><div class="line"><a name="l08251"></a><span class="lineno"> 8251</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l08252"></a><span class="lineno"> 8252</span>&#160;</div><div class="line"><a name="l08253"></a><span class="lineno"> 8253</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l08254"></a><span class="lineno"> 8254</span>&#160;}</div><div class="line"><a name="l08255"></a><span class="lineno"> 8255</span>&#160;</div><div class="line"><a name="l08256"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ac4fb3b333021e26b0305fe4949f5f254"> 8256</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../de/d2a/structast__generator.html">ast_generator</a> <a class="code" href="../../d4/d28/channel_8c.html#ac4fb3b333021e26b0305fe4949f5f254">silence_generator</a> = {</div><div class="line"><a name="l08257"></a><span class="lineno"> 8257</span>&#160;   .<a class="code" href="../../de/d2a/structast__generator.html#a77c293dc8108e06e2a81a1fdafc8fd97">alloc</a> = <a class="code" href="../../d4/d28/channel_8c.html#a9b25e6d6b996635d7fb5fc6e000e71c9">silence_generator_alloc</a>,</div><div class="line"><a name="l08258"></a><span class="lineno"> 8258</span>&#160;   .release = <a class="code" href="../../d4/d28/channel_8c.html#a5b6038c1b5aeb272bcb35c937088984c">silence_generator_release</a>,</div><div class="line"><a name="l08259"></a><span class="lineno"> 8259</span>&#160;   .generate = <a class="code" href="../../d4/d28/channel_8c.html#a196556ea463d5aa7e7672d673a2f688f">silence_generator_generate</a>,</div><div class="line"><a name="l08260"></a><span class="lineno"> 8260</span>&#160;};</div><div class="line"><a name="l08261"></a><span class="lineno"> 8261</span>&#160;</div><div class="line"><a name="l08262"></a><span class="lineno"><a class="line" href="../../d9/da1/structast__silence__generator.html"> 8262</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d9/da1/structast__silence__generator.html">ast_silence_generator</a> {</div><div class="line"><a name="l08263"></a><span class="lineno"><a class="line" href="../../d9/da1/structast__silence__generator.html#a771d124f2b2c7a869c7eeae94f965b53"> 8263</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../d9/da1/structast__silence__generator.html#a771d124f2b2c7a869c7eeae94f965b53">old_write_format</a>;</div><div class="line"><a name="l08264"></a><span class="lineno"> 8264</span>&#160;};</div><div class="line"><a name="l08265"></a><span class="lineno"> 8265</span>&#160;</div><div class="line"><a name="l08266"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a2a2e0ff24c57491a877cac39cb670024"> 8266</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d9/da1/structast__silence__generator.html">ast_silence_generator</a> *<a class="code" href="../../d4/d28/channel_8c.html#a2a2e0ff24c57491a877cac39cb670024">ast_channel_start_silence_generator</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l08267"></a><span class="lineno"> 8267</span>&#160;{</div><div class="line"><a name="l08268"></a><span class="lineno"> 8268</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/da1/structast__silence__generator.html">ast_silence_generator</a> *<a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>;</div><div class="line"><a name="l08269"></a><span class="lineno"> 8269</span>&#160;</div><div class="line"><a name="l08270"></a><span class="lineno"> 8270</span>&#160;   <span class="keywordflow">if</span> (!(state = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*state)))) {</div><div class="line"><a name="l08271"></a><span class="lineno"> 8271</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08272"></a><span class="lineno"> 8272</span>&#160;   }</div><div class="line"><a name="l08273"></a><span class="lineno"> 8273</span>&#160;</div><div class="line"><a name="l08274"></a><span class="lineno"> 8274</span>&#160;   state-&gt;<a class="code" href="../../d9/da1/structast__silence__generator.html#a771d124f2b2c7a869c7eeae94f965b53">old_write_format</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a>(chan));</div><div class="line"><a name="l08275"></a><span class="lineno"> 8275</span>&#160;</div><div class="line"><a name="l08276"></a><span class="lineno"> 8276</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d28/channel_8c.html#abbdfb98077180544657b2d16c5d25f74">ast_set_write_format</a>(chan, <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>) &lt; 0) {</div><div class="line"><a name="l08277"></a><span class="lineno"> 8277</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not set write format to SLINEAR\n&quot;</span>);</div><div class="line"><a name="l08278"></a><span class="lineno"> 8278</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(state);</div><div class="line"><a name="l08279"></a><span class="lineno"> 8279</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l08280"></a><span class="lineno"> 8280</span>&#160;   }</div><div class="line"><a name="l08281"></a><span class="lineno"> 8281</span>&#160;</div><div class="line"><a name="l08282"></a><span class="lineno"> 8282</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a12a58dda74a19f383f6b77cf7fa88b54">ast_activate_generator</a>(chan, &amp;silence_generator, state);</div><div class="line"><a name="l08283"></a><span class="lineno"> 8283</span>&#160;</div><div class="line"><a name="l08284"></a><span class="lineno"> 8284</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Started silence generator on &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l08285"></a><span class="lineno"> 8285</span>&#160;</div><div class="line"><a name="l08286"></a><span class="lineno"> 8286</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>;</div><div class="line"><a name="l08287"></a><span class="lineno"> 8287</span>&#160;}</div><div class="line"><a name="l08288"></a><span class="lineno"> 8288</span>&#160;</div><div class="line"><a name="l08289"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a50330bce9fe31e3191fbaad479054bb7"> 8289</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a50330bce9fe31e3191fbaad479054bb7">deactivate_silence_generator</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l08290"></a><span class="lineno"> 8290</span>&#160;{</div><div class="line"><a name="l08291"></a><span class="lineno"> 8291</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l08292"></a><span class="lineno"> 8292</span>&#160;</div><div class="line"><a name="l08293"></a><span class="lineno"> 8293</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#afb86bdd7fa42b7bf8ac2fbfab01f67ef">ast_channel_generatordata</a>(chan)) {</div><div class="line"><a name="l08294"></a><span class="lineno"> 8294</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Trying to stop silence generator when there is no generator on &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l08295"></a><span class="lineno"> 8295</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l08296"></a><span class="lineno"> 8296</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l08297"></a><span class="lineno"> 8297</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l08298"></a><span class="lineno"> 8298</span>&#160;   }</div><div class="line"><a name="l08299"></a><span class="lineno"> 8299</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a6fa8e680c963b66575d1950c19493b40">ast_channel_generator</a>(chan) != &amp;silence_generator) {</div><div class="line"><a name="l08300"></a><span class="lineno"> 8300</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Trying to stop silence generator when it is not the current generator on &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l08301"></a><span class="lineno"> 8301</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l08302"></a><span class="lineno"> 8302</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l08303"></a><span class="lineno"> 8303</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l08304"></a><span class="lineno"> 8304</span>&#160;   }</div><div class="line"><a name="l08305"></a><span class="lineno"> 8305</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a6e65df0ab5f6ce5e0c7292e91ec86254">deactivate_generator_nolock</a>(chan);</div><div class="line"><a name="l08306"></a><span class="lineno"> 8306</span>&#160;</div><div class="line"><a name="l08307"></a><span class="lineno"> 8307</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l08308"></a><span class="lineno"> 8308</span>&#160;</div><div class="line"><a name="l08309"></a><span class="lineno"> 8309</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l08310"></a><span class="lineno"> 8310</span>&#160;}</div><div class="line"><a name="l08311"></a><span class="lineno"> 8311</span>&#160;</div><div class="line"><a name="l08312"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a6643cbe766a051d2d06750ab5b3e933d"> 8312</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a6643cbe766a051d2d06750ab5b3e933d">ast_channel_stop_silence_generator</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d9/da1/structast__silence__generator.html">ast_silence_generator</a> *<a class="code" href="../../d4/d88/structstate.html">state</a>)</div><div class="line"><a name="l08313"></a><span class="lineno"> 8313</span>&#160;{</div><div class="line"><a name="l08314"></a><span class="lineno"> 8314</span>&#160;   <span class="keywordflow">if</span> (!state) {</div><div class="line"><a name="l08315"></a><span class="lineno"> 8315</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l08316"></a><span class="lineno"> 8316</span>&#160;   }</div><div class="line"><a name="l08317"></a><span class="lineno"> 8317</span>&#160;</div><div class="line"><a name="l08318"></a><span class="lineno"> 8318</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d28/channel_8c.html#a50330bce9fe31e3191fbaad479054bb7">deactivate_silence_generator</a>(chan)) {</div><div class="line"><a name="l08319"></a><span class="lineno"> 8319</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Stopped silence generator on &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l08320"></a><span class="lineno"> 8320</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d4/d28/channel_8c.html#abbdfb98077180544657b2d16c5d25f74">ast_set_write_format</a>(chan, state-&gt;<a class="code" href="../../d9/da1/structast__silence__generator.html#a771d124f2b2c7a869c7eeae94f965b53">old_write_format</a>) &lt; 0) {</div><div class="line"><a name="l08321"></a><span class="lineno"> 8321</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not return write format to its original state\n&quot;</span>);</div><div class="line"><a name="l08322"></a><span class="lineno"> 8322</span>&#160;      }</div><div class="line"><a name="l08323"></a><span class="lineno"> 8323</span>&#160;   }</div><div class="line"><a name="l08324"></a><span class="lineno"> 8324</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(state-&gt;<a class="code" href="../../d9/da1/structast__silence__generator.html#a771d124f2b2c7a869c7eeae94f965b53">old_write_format</a>);</div><div class="line"><a name="l08325"></a><span class="lineno"> 8325</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(state);</div><div class="line"><a name="l08326"></a><span class="lineno"> 8326</span>&#160;}</div><div class="line"><a name="l08327"></a><span class="lineno"> 8327</span>&#160;</div><div class="line"><a name="l08328"></a><span class="lineno"> 8328</span>&#160;</div><div class="line"><a name="l08329"></a><span class="lineno"> 8329</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l08330"></a><span class="lineno"> 8330</span>&#160;<span class="comment"> * Wrappers for various ast_say_*() functions that call the full version</span></div><div class="line"><a name="l08331"></a><span class="lineno"> 8331</span>&#160;<span class="comment"> * of the same functions.</span></div><div class="line"><a name="l08332"></a><span class="lineno"> 8332</span>&#160;<span class="comment"> * The proper place would be say.c, but that file is optional and one</span></div><div class="line"><a name="l08333"></a><span class="lineno"> 8333</span>&#160;<span class="comment"> * must be able to build asterisk even without it (using a loadable &#39;say&#39;</span></div><div class="line"><a name="l08334"></a><span class="lineno"> 8334</span>&#160;<span class="comment"> * implementation that only supplies the &#39;full&#39; version of the functions.</span></div><div class="line"><a name="l08335"></a><span class="lineno"> 8335</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l08336"></a><span class="lineno"> 8336</span>&#160;</div><div class="line"><a name="l08337"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a0275d7480f8a07d47460752834bb3a40"> 8337</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a0275d7480f8a07d47460752834bb3a40">ast_say_number</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">int</span> num,</div><div class="line"><a name="l08338"></a><span class="lineno"> 8338</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *ints, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>)</div><div class="line"><a name="l08339"></a><span class="lineno"> 8339</span>&#160;{</div><div class="line"><a name="l08340"></a><span class="lineno"> 8340</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/dce/say_8h.html#a22eed2dcf42488b3e6cea2a987a67503">ast_say_number_full</a>(chan, num, ints, language, options, -1, -1);</div><div class="line"><a name="l08341"></a><span class="lineno"> 8341</span>&#160;}</div><div class="line"><a name="l08342"></a><span class="lineno"> 8342</span>&#160;</div><div class="line"><a name="l08343"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a91c054f75fcf111f208a9fa185e8cd94"> 8343</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a91c054f75fcf111f208a9fa185e8cd94">ast_say_enumeration</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">int</span> num,</div><div class="line"><a name="l08344"></a><span class="lineno"> 8344</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *ints, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>)</div><div class="line"><a name="l08345"></a><span class="lineno"> 8345</span>&#160;{</div><div class="line"><a name="l08346"></a><span class="lineno"> 8346</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/dce/say_8h.html#aa29035b1516bf16f471ece5e5adc052a">ast_say_enumeration_full</a>(chan, num, ints, language, options, -1, -1);</div><div class="line"><a name="l08347"></a><span class="lineno"> 8347</span>&#160;}</div><div class="line"><a name="l08348"></a><span class="lineno"> 8348</span>&#160;</div><div class="line"><a name="l08349"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a7cf9dcf6ae6fcedb7752d0deac683b3b"> 8349</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a7cf9dcf6ae6fcedb7752d0deac683b3b">ast_say_digits</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">int</span> num,</div><div class="line"><a name="l08350"></a><span class="lineno"> 8350</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *ints, <span class="keyword">const</span> <span class="keywordtype">char</span> *lang)</div><div class="line"><a name="l08351"></a><span class="lineno"> 8351</span>&#160;{</div><div class="line"><a name="l08352"></a><span class="lineno"> 8352</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#ac293bae3a692080477911e637dbf3463">ast_say_digits_full</a>(chan, num, ints, lang, -1, -1);</div><div class="line"><a name="l08353"></a><span class="lineno"> 8353</span>&#160;}</div><div class="line"><a name="l08354"></a><span class="lineno"> 8354</span>&#160;</div><div class="line"><a name="l08355"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a22de2fa4172d1ecd3b32426ea1b8f4ba"> 8355</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a22de2fa4172d1ecd3b32426ea1b8f4ba">ast_say_digit_str</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>,</div><div class="line"><a name="l08356"></a><span class="lineno"> 8356</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *ints, <span class="keyword">const</span> <span class="keywordtype">char</span> *lang)</div><div class="line"><a name="l08357"></a><span class="lineno"> 8357</span>&#160;{</div><div class="line"><a name="l08358"></a><span class="lineno"> 8358</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/dce/say_8h.html#ab05d3e2a245fb9a199d6b628f901c221">ast_say_digit_str_full</a>(chan, str, ints, lang, -1, -1);</div><div class="line"><a name="l08359"></a><span class="lineno"> 8359</span>&#160;}</div><div class="line"><a name="l08360"></a><span class="lineno"> 8360</span>&#160;</div><div class="line"><a name="l08361"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a88cc3634f7d59b6a65586c32c65e6eac"> 8361</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a88cc3634f7d59b6a65586c32c65e6eac">ast_say_money_str</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>,</div><div class="line"><a name="l08362"></a><span class="lineno"> 8362</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *ints, <span class="keyword">const</span> <span class="keywordtype">char</span> *lang)</div><div class="line"><a name="l08363"></a><span class="lineno"> 8363</span>&#160;{</div><div class="line"><a name="l08364"></a><span class="lineno"> 8364</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/dce/say_8h.html#a3c16ca1c3b98ecbc423b7cb84bab09fc">ast_say_money_str_full</a>(chan, str, ints, lang, -1, -1);</div><div class="line"><a name="l08365"></a><span class="lineno"> 8365</span>&#160;}</div><div class="line"><a name="l08366"></a><span class="lineno"> 8366</span>&#160;</div><div class="line"><a name="l08367"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a9f39a2015f32baf67cc21f36cce6f009"> 8367</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a9f39a2015f32baf67cc21f36cce6f009">ast_say_character_str</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>,</div><div class="line"><a name="l08368"></a><span class="lineno"> 8368</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *ints, <span class="keyword">const</span> <span class="keywordtype">char</span> *lang, <span class="keyword">enum</span> <a class="code" href="../../db/dce/say_8h.html#ab73ba7bbfc3824448a2cd4f0c6d050c6">ast_say_case_sensitivity</a> sensitivity)</div><div class="line"><a name="l08369"></a><span class="lineno"> 8369</span>&#160;{</div><div class="line"><a name="l08370"></a><span class="lineno"> 8370</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/dce/say_8h.html#a7ef8984468db709b3a9a9d13a260177a">ast_say_character_str_full</a>(chan, str, ints, lang, sensitivity, -1, -1);</div><div class="line"><a name="l08371"></a><span class="lineno"> 8371</span>&#160;}</div><div class="line"><a name="l08372"></a><span class="lineno"> 8372</span>&#160;</div><div class="line"><a name="l08373"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ab7c03b95bdfaed8f38ecd45e93c868d3"> 8373</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#ab7c03b95bdfaed8f38ecd45e93c868d3">ast_say_phonetic_str</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>,</div><div class="line"><a name="l08374"></a><span class="lineno"> 8374</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *ints, <span class="keyword">const</span> <span class="keywordtype">char</span> *lang)</div><div class="line"><a name="l08375"></a><span class="lineno"> 8375</span>&#160;{</div><div class="line"><a name="l08376"></a><span class="lineno"> 8376</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/dce/say_8h.html#a25da3fe3eff6311e1b56eba1283c3c71">ast_say_phonetic_str_full</a>(chan, str, ints, lang, -1, -1);</div><div class="line"><a name="l08377"></a><span class="lineno"> 8377</span>&#160;}</div><div class="line"><a name="l08378"></a><span class="lineno"> 8378</span>&#160;</div><div class="line"><a name="l08379"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ac293bae3a692080477911e637dbf3463"> 8379</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#ac293bae3a692080477911e637dbf3463">ast_say_digits_full</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">int</span> num,</div><div class="line"><a name="l08380"></a><span class="lineno"> 8380</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *ints, <span class="keyword">const</span> <span class="keywordtype">char</span> *lang, <span class="keywordtype">int</span> audiofd, <span class="keywordtype">int</span> ctrlfd)</div><div class="line"><a name="l08381"></a><span class="lineno"> 8381</span>&#160;{</div><div class="line"><a name="l08382"></a><span class="lineno"> 8382</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[256];</div><div class="line"><a name="l08383"></a><span class="lineno"> 8383</span>&#160;</div><div class="line"><a name="l08384"></a><span class="lineno"> 8384</span>&#160;   snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;%d&quot;</span>, num);</div><div class="line"><a name="l08385"></a><span class="lineno"> 8385</span>&#160;</div><div class="line"><a name="l08386"></a><span class="lineno"> 8386</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/dce/say_8h.html#ab05d3e2a245fb9a199d6b628f901c221">ast_say_digit_str_full</a>(chan, buf, ints, lang, audiofd, ctrlfd);</div><div class="line"><a name="l08387"></a><span class="lineno"> 8387</span>&#160;}</div><div class="line"><a name="l08388"></a><span class="lineno"> 8388</span>&#160;</div><div class="line"><a name="l08389"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#accf4e9753bd5d7316f4988e74486552b"> 8389</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#accf4e9753bd5d7316f4988e74486552b">ast_connected_line_copy_from_caller</a>(<span class="keyword">struct</span> <a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> *dest, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/d77/structast__party__caller.html">ast_party_caller</a> *src)</div><div class="line"><a name="l08390"></a><span class="lineno"> 8390</span>&#160;{</div><div class="line"><a name="l08391"></a><span class="lineno"> 8391</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#abbf5c9830dd3533f3a6d5d35f941effb">ast_party_id_copy</a>(&amp;dest-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>, &amp;src-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>);</div><div class="line"><a name="l08392"></a><span class="lineno"> 8392</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#abbf5c9830dd3533f3a6d5d35f941effb">ast_party_id_copy</a>(&amp;dest-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#aeeb8c05290fd113bd0d1a3129898fd49">ani</a>, &amp;src-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#aeeb8c05290fd113bd0d1a3129898fd49">ani</a>);</div><div class="line"><a name="l08393"></a><span class="lineno"> 8393</span>&#160;   dest-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#ad3bdbbc7177d5ac309bc72f9fc3c4bee">ani2</a> = src-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#ad3bdbbc7177d5ac309bc72f9fc3c4bee">ani2</a>;</div><div class="line"><a name="l08394"></a><span class="lineno"> 8394</span>&#160;}</div><div class="line"><a name="l08395"></a><span class="lineno"> 8395</span>&#160;</div><div class="line"><a name="l08396"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ae69ce2895f55de598da0103481d82b95"> 8396</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#ae69ce2895f55de598da0103481d82b95">ast_connected_line_copy_to_caller</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d77/structast__party__caller.html">ast_party_caller</a> *dest, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> *src)</div><div class="line"><a name="l08397"></a><span class="lineno"> 8397</span>&#160;{</div><div class="line"><a name="l08398"></a><span class="lineno"> 8398</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#abbf5c9830dd3533f3a6d5d35f941effb">ast_party_id_copy</a>(&amp;dest-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>, &amp;src-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>);</div><div class="line"><a name="l08399"></a><span class="lineno"> 8399</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#abbf5c9830dd3533f3a6d5d35f941effb">ast_party_id_copy</a>(&amp;dest-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#aeeb8c05290fd113bd0d1a3129898fd49">ani</a>, &amp;src-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#aeeb8c05290fd113bd0d1a3129898fd49">ani</a>);</div><div class="line"><a name="l08400"></a><span class="lineno"> 8400</span>&#160;</div><div class="line"><a name="l08401"></a><span class="lineno"> 8401</span>&#160;   dest-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#ad3bdbbc7177d5ac309bc72f9fc3c4bee">ani2</a> = src-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#ad3bdbbc7177d5ac309bc72f9fc3c4bee">ani2</a>;</div><div class="line"><a name="l08402"></a><span class="lineno"> 8402</span>&#160;}</div><div class="line"><a name="l08403"></a><span class="lineno"> 8403</span>&#160;</div><div class="line"><a name="l08404"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a388b1ab04ed52109917914ac73662d0a"> 8404</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a388b1ab04ed52109917914ac73662d0a">ast_channel_set_connected_line</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a5023e29d4234076952bfecfff178b566">connected</a>, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/dc9/structast__set__party__connected__line.html">ast_set_party_connected_line</a> *<a class="code" href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a>)</div><div class="line"><a name="l08405"></a><span class="lineno"> 8405</span>&#160;{</div><div class="line"><a name="l08406"></a><span class="lineno"> 8406</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(chan) == connected) {</div><div class="line"><a name="l08407"></a><span class="lineno"> 8407</span>&#160;      <span class="comment">/* Don&#39;t set to self */</span></div><div class="line"><a name="l08408"></a><span class="lineno"> 8408</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l08409"></a><span class="lineno"> 8409</span>&#160;   }</div><div class="line"><a name="l08410"></a><span class="lineno"> 8410</span>&#160;</div><div class="line"><a name="l08411"></a><span class="lineno"> 8411</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l08412"></a><span class="lineno"> 8412</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a65d86fdffdd9c52b17b79b069cd0c6cb">ast_party_connected_line_set</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(chan), connected, update);</div><div class="line"><a name="l08413"></a><span class="lineno"> 8413</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga5c533cb6116415f52f137ea431afe9e3">ast_channel_snapshot_invalidate_segment</a>(chan, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ggae4d6df086e192d70f732e3ce8a5a2210ac744bafb6ef5c6a5369e15ef08810016">AST_CHANNEL_SNAPSHOT_INVALIDATE_CONNECTED</a>);</div><div class="line"><a name="l08414"></a><span class="lineno"> 8414</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaec5f1aaded97197250e063ed6c7ad857">ast_channel_publish_snapshot</a>(chan);</div><div class="line"><a name="l08415"></a><span class="lineno"> 8415</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l08416"></a><span class="lineno"> 8416</span>&#160;}</div><div class="line"><a name="l08417"></a><span class="lineno"> 8417</span>&#160;<span class="comment"></span></div><div class="line"><a name="l08418"></a><span class="lineno"> 8418</span>&#160;<span class="comment">/*! \note Should follow struct ast_party_name */</span></div><div class="line"><a name="l08419"></a><span class="lineno"><a class="line" href="../../df/d8e/structast__party__name__ies.html"> 8419</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../df/d8e/structast__party__name__ies.html">ast_party_name_ies</a> {<span class="comment"></span></div><div class="line"><a name="l08420"></a><span class="lineno"> 8420</span>&#160;<span class="comment">   /*! \brief Subscriber name ie */</span></div><div class="line"><a name="l08421"></a><span class="lineno"><a class="line" href="../../df/d8e/structast__party__name__ies.html#aba03208f197d75b6e355ba9b2ae08ab5"> 8421</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../df/d8e/structast__party__name__ies.html#aba03208f197d75b6e355ba9b2ae08ab5">str</a>;<span class="comment"></span></div><div class="line"><a name="l08422"></a><span class="lineno"> 8422</span>&#160;<span class="comment">   /*! \brief Character set ie. */</span></div><div class="line"><a name="l08423"></a><span class="lineno"><a class="line" href="../../df/d8e/structast__party__name__ies.html#a1fb9f03e5de01bf0a8f221e627fa9a7b"> 8423</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../df/d8e/structast__party__name__ies.html#a1fb9f03e5de01bf0a8f221e627fa9a7b">char_set</a>;<span class="comment"></span></div><div class="line"><a name="l08424"></a><span class="lineno"> 8424</span>&#160;<span class="comment">   /*! \brief presentation-indicator ie */</span></div><div class="line"><a name="l08425"></a><span class="lineno"><a class="line" href="../../df/d8e/structast__party__name__ies.html#a3df9119032baa1743f2db71344bd7cac"> 8425</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../df/d8e/structast__party__name__ies.html#a3df9119032baa1743f2db71344bd7cac">presentation</a>;<span class="comment"></span></div><div class="line"><a name="l08426"></a><span class="lineno"> 8426</span>&#160;<span class="comment">   /*! \brief valid/present ie */</span></div><div class="line"><a name="l08427"></a><span class="lineno"><a class="line" href="../../df/d8e/structast__party__name__ies.html#ac63b1f168765a53e565a8ba27f5469d1"> 8427</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../df/d8e/structast__party__name__ies.html#ac63b1f168765a53e565a8ba27f5469d1">valid</a>;</div><div class="line"><a name="l08428"></a><span class="lineno"> 8428</span>&#160;};</div><div class="line"><a name="l08429"></a><span class="lineno"> 8429</span>&#160;<span class="comment"></span></div><div class="line"><a name="l08430"></a><span class="lineno"> 8430</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l08431"></a><span class="lineno"> 8431</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l08432"></a><span class="lineno"> 8432</span>&#160;<span class="comment"> * \since 1.8</span></div><div class="line"><a name="l08433"></a><span class="lineno"> 8433</span>&#160;<span class="comment"> * \brief Build a party name information data frame component.</span></div><div class="line"><a name="l08434"></a><span class="lineno"> 8434</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l08435"></a><span class="lineno"> 8435</span>&#160;<span class="comment"> * \param data Buffer to fill with the frame data</span></div><div class="line"><a name="l08436"></a><span class="lineno"> 8436</span>&#160;<span class="comment"> * \param datalen Size of the buffer to fill</span></div><div class="line"><a name="l08437"></a><span class="lineno"> 8437</span>&#160;<span class="comment"> * \param name Party name information</span></div><div class="line"><a name="l08438"></a><span class="lineno"> 8438</span>&#160;<span class="comment"> * \param label Name of particular party name</span></div><div class="line"><a name="l08439"></a><span class="lineno"> 8439</span>&#160;<span class="comment"> * \param ies Data frame ie values for the party name components</span></div><div class="line"><a name="l08440"></a><span class="lineno"> 8440</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l08441"></a><span class="lineno"> 8441</span>&#160;<span class="comment"> * \retval -1 if error</span></div><div class="line"><a name="l08442"></a><span class="lineno"> 8442</span>&#160;<span class="comment"> * \retval Amount of data buffer used</span></div><div class="line"><a name="l08443"></a><span class="lineno"> 8443</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l08444"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a44fd3f84c18c4751cdc56196b0471ead"> 8444</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a44fd3f84c18c4751cdc56196b0471ead">party_name_build_data</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *data, <span class="keywordtype">size_t</span> datalen, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d8/d6f/structast__party__name.html">ast_party_name</a> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *label, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/d8e/structast__party__name__ies.html">ast_party_name_ies</a> *ies)</div><div class="line"><a name="l08445"></a><span class="lineno"> 8445</span>&#160;{</div><div class="line"><a name="l08446"></a><span class="lineno"> 8446</span>&#160;   <span class="keywordtype">size_t</span> length;</div><div class="line"><a name="l08447"></a><span class="lineno"> 8447</span>&#160;   <span class="keywordtype">size_t</span> pos = 0;</div><div class="line"><a name="l08448"></a><span class="lineno"> 8448</span>&#160;</div><div class="line"><a name="l08449"></a><span class="lineno"> 8449</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l08450"></a><span class="lineno"> 8450</span>&#160;<span class="comment">    * The size of integer values must be fixed in case the frame is</span></div><div class="line"><a name="l08451"></a><span class="lineno"> 8451</span>&#160;<span class="comment">    * shipped to another machine.</span></div><div class="line"><a name="l08452"></a><span class="lineno"> 8452</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l08453"></a><span class="lineno"> 8453</span>&#160;   <span class="keywordflow">if</span> (name-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l08454"></a><span class="lineno"> 8454</span>&#160;      length = strlen(name-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l08455"></a><span class="lineno"> 8455</span>&#160;      <span class="keywordflow">if</span> (datalen &lt; pos + (<span class="keyword">sizeof</span>(data[0]) * 2) + length) {</div><div class="line"><a name="l08456"></a><span class="lineno"> 8456</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No space left for %s name\n&quot;</span>, label);</div><div class="line"><a name="l08457"></a><span class="lineno"> 8457</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l08458"></a><span class="lineno"> 8458</span>&#160;      }</div><div class="line"><a name="l08459"></a><span class="lineno"> 8459</span>&#160;      data[pos++] = ies-&gt;<a class="code" href="../../df/d8e/structast__party__name__ies.html#aba03208f197d75b6e355ba9b2ae08ab5">str</a>;</div><div class="line"><a name="l08460"></a><span class="lineno"> 8460</span>&#160;      data[pos++] = length;</div><div class="line"><a name="l08461"></a><span class="lineno"> 8461</span>&#160;      memcpy(data + pos, name-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, length);</div><div class="line"><a name="l08462"></a><span class="lineno"> 8462</span>&#160;      pos += length;</div><div class="line"><a name="l08463"></a><span class="lineno"> 8463</span>&#160;   }</div><div class="line"><a name="l08464"></a><span class="lineno"> 8464</span>&#160;</div><div class="line"><a name="l08465"></a><span class="lineno"> 8465</span>&#160;   <span class="keywordflow">if</span> (datalen &lt; pos + (<span class="keyword">sizeof</span>(data[0]) * 2) + 1) {</div><div class="line"><a name="l08466"></a><span class="lineno"> 8466</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No space left for %s name char set\n&quot;</span>, label);</div><div class="line"><a name="l08467"></a><span class="lineno"> 8467</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l08468"></a><span class="lineno"> 8468</span>&#160;   }</div><div class="line"><a name="l08469"></a><span class="lineno"> 8469</span>&#160;   data[pos++] = ies-&gt;<a class="code" href="../../df/d8e/structast__party__name__ies.html#a1fb9f03e5de01bf0a8f221e627fa9a7b">char_set</a>;</div><div class="line"><a name="l08470"></a><span class="lineno"> 8470</span>&#160;   data[pos++] = 1;</div><div class="line"><a name="l08471"></a><span class="lineno"> 8471</span>&#160;   data[pos++] = name-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#a1fb9f03e5de01bf0a8f221e627fa9a7b">char_set</a>;</div><div class="line"><a name="l08472"></a><span class="lineno"> 8472</span>&#160;</div><div class="line"><a name="l08473"></a><span class="lineno"> 8473</span>&#160;   <span class="keywordflow">if</span> (datalen &lt; pos + (<span class="keyword">sizeof</span>(data[0]) * 2) + 1) {</div><div class="line"><a name="l08474"></a><span class="lineno"> 8474</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No space left for %s name presentation\n&quot;</span>, label);</div><div class="line"><a name="l08475"></a><span class="lineno"> 8475</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l08476"></a><span class="lineno"> 8476</span>&#160;   }</div><div class="line"><a name="l08477"></a><span class="lineno"> 8477</span>&#160;   data[pos++] = ies-&gt;<a class="code" href="../../df/d8e/structast__party__name__ies.html#a3df9119032baa1743f2db71344bd7cac">presentation</a>;</div><div class="line"><a name="l08478"></a><span class="lineno"> 8478</span>&#160;   data[pos++] = 1;</div><div class="line"><a name="l08479"></a><span class="lineno"> 8479</span>&#160;   data[pos++] = name-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#a3df9119032baa1743f2db71344bd7cac">presentation</a>;</div><div class="line"><a name="l08480"></a><span class="lineno"> 8480</span>&#160;</div><div class="line"><a name="l08481"></a><span class="lineno"> 8481</span>&#160;   <span class="keywordflow">if</span> (datalen &lt; pos + (<span class="keyword">sizeof</span>(data[0]) * 2) + 1) {</div><div class="line"><a name="l08482"></a><span class="lineno"> 8482</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No space left for %s name valid\n&quot;</span>, label);</div><div class="line"><a name="l08483"></a><span class="lineno"> 8483</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l08484"></a><span class="lineno"> 8484</span>&#160;   }</div><div class="line"><a name="l08485"></a><span class="lineno"> 8485</span>&#160;   data[pos++] = ies-&gt;<a class="code" href="../../df/d8e/structast__party__name__ies.html#ac63b1f168765a53e565a8ba27f5469d1">valid</a>;</div><div class="line"><a name="l08486"></a><span class="lineno"> 8486</span>&#160;   data[pos++] = 1;</div><div class="line"><a name="l08487"></a><span class="lineno"> 8487</span>&#160;   data[pos++] = name-&gt;<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>;</div><div class="line"><a name="l08488"></a><span class="lineno"> 8488</span>&#160;</div><div class="line"><a name="l08489"></a><span class="lineno"> 8489</span>&#160;   <span class="keywordflow">return</span> pos;</div><div class="line"><a name="l08490"></a><span class="lineno"> 8490</span>&#160;}</div><div class="line"><a name="l08491"></a><span class="lineno"> 8491</span>&#160;<span class="comment"></span></div><div class="line"><a name="l08492"></a><span class="lineno"> 8492</span>&#160;<span class="comment">/*! \note Should follow struct ast_party_number */</span></div><div class="line"><a name="l08493"></a><span class="lineno"><a class="line" href="../../d1/dbe/structast__party__number__ies.html"> 8493</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d1/dbe/structast__party__number__ies.html">ast_party_number_ies</a> {<span class="comment"></span></div><div class="line"><a name="l08494"></a><span class="lineno"> 8494</span>&#160;<span class="comment">   /*! \brief Subscriber phone number ie */</span></div><div class="line"><a name="l08495"></a><span class="lineno"><a class="line" href="../../d1/dbe/structast__party__number__ies.html#aba03208f197d75b6e355ba9b2ae08ab5"> 8495</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d1/dbe/structast__party__number__ies.html#aba03208f197d75b6e355ba9b2ae08ab5">str</a>;<span class="comment"></span></div><div class="line"><a name="l08496"></a><span class="lineno"> 8496</span>&#160;<span class="comment">   /*! \brief Type-Of-Number and Numbering-Plan ie */</span></div><div class="line"><a name="l08497"></a><span class="lineno"><a class="line" href="../../d1/dbe/structast__party__number__ies.html#ad1f8db563cb99d404b72e02cf8f78cd1"> 8497</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d1/dbe/structast__party__number__ies.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a>;<span class="comment"></span></div><div class="line"><a name="l08498"></a><span class="lineno"> 8498</span>&#160;<span class="comment">   /*! \brief presentation-indicator ie */</span></div><div class="line"><a name="l08499"></a><span class="lineno"><a class="line" href="../../d1/dbe/structast__party__number__ies.html#a3df9119032baa1743f2db71344bd7cac"> 8499</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d1/dbe/structast__party__number__ies.html#a3df9119032baa1743f2db71344bd7cac">presentation</a>;<span class="comment"></span></div><div class="line"><a name="l08500"></a><span class="lineno"> 8500</span>&#160;<span class="comment">   /*! \brief valid/present ie */</span></div><div class="line"><a name="l08501"></a><span class="lineno"><a class="line" href="../../d1/dbe/structast__party__number__ies.html#ac63b1f168765a53e565a8ba27f5469d1"> 8501</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d1/dbe/structast__party__number__ies.html#ac63b1f168765a53e565a8ba27f5469d1">valid</a>;</div><div class="line"><a name="l08502"></a><span class="lineno"> 8502</span>&#160;};</div><div class="line"><a name="l08503"></a><span class="lineno"> 8503</span>&#160;<span class="comment"></span></div><div class="line"><a name="l08504"></a><span class="lineno"> 8504</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l08505"></a><span class="lineno"> 8505</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l08506"></a><span class="lineno"> 8506</span>&#160;<span class="comment"> * \since 1.8</span></div><div class="line"><a name="l08507"></a><span class="lineno"> 8507</span>&#160;<span class="comment"> * \brief Build a party number information data frame component.</span></div><div class="line"><a name="l08508"></a><span class="lineno"> 8508</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l08509"></a><span class="lineno"> 8509</span>&#160;<span class="comment"> * \param data Buffer to fill with the frame data</span></div><div class="line"><a name="l08510"></a><span class="lineno"> 8510</span>&#160;<span class="comment"> * \param datalen Size of the buffer to fill</span></div><div class="line"><a name="l08511"></a><span class="lineno"> 8511</span>&#160;<span class="comment"> * \param number Party number information</span></div><div class="line"><a name="l08512"></a><span class="lineno"> 8512</span>&#160;<span class="comment"> * \param label Name of particular party number</span></div><div class="line"><a name="l08513"></a><span class="lineno"> 8513</span>&#160;<span class="comment"> * \param ies Data frame ie values for the party number components</span></div><div class="line"><a name="l08514"></a><span class="lineno"> 8514</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l08515"></a><span class="lineno"> 8515</span>&#160;<span class="comment"> * \retval -1 if error</span></div><div class="line"><a name="l08516"></a><span class="lineno"> 8516</span>&#160;<span class="comment"> * \retval Amount of data buffer used</span></div><div class="line"><a name="l08517"></a><span class="lineno"> 8517</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l08518"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ad14ff1aee3e9bd8ce15ea24bbb6d528e"> 8518</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#ad14ff1aee3e9bd8ce15ea24bbb6d528e">party_number_build_data</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *data, <span class="keywordtype">size_t</span> datalen, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d6/dbb/structast__party__number.html">ast_party_number</a> *<a class="code" href="../../d6/d49/structnumber.html">number</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *label, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d1/dbe/structast__party__number__ies.html">ast_party_number_ies</a> *ies)</div><div class="line"><a name="l08519"></a><span class="lineno"> 8519</span>&#160;{</div><div class="line"><a name="l08520"></a><span class="lineno"> 8520</span>&#160;   <span class="keywordtype">size_t</span> length;</div><div class="line"><a name="l08521"></a><span class="lineno"> 8521</span>&#160;   <span class="keywordtype">size_t</span> pos = 0;</div><div class="line"><a name="l08522"></a><span class="lineno"> 8522</span>&#160;</div><div class="line"><a name="l08523"></a><span class="lineno"> 8523</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l08524"></a><span class="lineno"> 8524</span>&#160;<span class="comment">    * The size of integer values must be fixed in case the frame is</span></div><div class="line"><a name="l08525"></a><span class="lineno"> 8525</span>&#160;<span class="comment">    * shipped to another machine.</span></div><div class="line"><a name="l08526"></a><span class="lineno"> 8526</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l08527"></a><span class="lineno"> 8527</span>&#160;   <span class="keywordflow">if</span> (number-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l08528"></a><span class="lineno"> 8528</span>&#160;      length = strlen(number-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l08529"></a><span class="lineno"> 8529</span>&#160;      <span class="keywordflow">if</span> (datalen &lt; pos + (<span class="keyword">sizeof</span>(data[0]) * 2) + length) {</div><div class="line"><a name="l08530"></a><span class="lineno"> 8530</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No space left for %s number\n&quot;</span>, label);</div><div class="line"><a name="l08531"></a><span class="lineno"> 8531</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l08532"></a><span class="lineno"> 8532</span>&#160;      }</div><div class="line"><a name="l08533"></a><span class="lineno"> 8533</span>&#160;      data[pos++] = ies-&gt;<a class="code" href="../../d1/dbe/structast__party__number__ies.html#aba03208f197d75b6e355ba9b2ae08ab5">str</a>;</div><div class="line"><a name="l08534"></a><span class="lineno"> 8534</span>&#160;      data[pos++] = length;</div><div class="line"><a name="l08535"></a><span class="lineno"> 8535</span>&#160;      memcpy(data + pos, number-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, length);</div><div class="line"><a name="l08536"></a><span class="lineno"> 8536</span>&#160;      pos += length;</div><div class="line"><a name="l08537"></a><span class="lineno"> 8537</span>&#160;   }</div><div class="line"><a name="l08538"></a><span class="lineno"> 8538</span>&#160;</div><div class="line"><a name="l08539"></a><span class="lineno"> 8539</span>&#160;   <span class="keywordflow">if</span> (datalen &lt; pos + (<span class="keyword">sizeof</span>(data[0]) * 2) + 1) {</div><div class="line"><a name="l08540"></a><span class="lineno"> 8540</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No space left for %s numbering plan\n&quot;</span>, label);</div><div class="line"><a name="l08541"></a><span class="lineno"> 8541</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l08542"></a><span class="lineno"> 8542</span>&#160;   }</div><div class="line"><a name="l08543"></a><span class="lineno"> 8543</span>&#160;   data[pos++] = ies-&gt;<a class="code" href="../../d1/dbe/structast__party__number__ies.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a>;</div><div class="line"><a name="l08544"></a><span class="lineno"> 8544</span>&#160;   data[pos++] = 1;</div><div class="line"><a name="l08545"></a><span class="lineno"> 8545</span>&#160;   data[pos++] = number-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a>;</div><div class="line"><a name="l08546"></a><span class="lineno"> 8546</span>&#160;</div><div class="line"><a name="l08547"></a><span class="lineno"> 8547</span>&#160;   <span class="keywordflow">if</span> (datalen &lt; pos + (<span class="keyword">sizeof</span>(data[0]) * 2) + 1) {</div><div class="line"><a name="l08548"></a><span class="lineno"> 8548</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No space left for %s number presentation\n&quot;</span>, label);</div><div class="line"><a name="l08549"></a><span class="lineno"> 8549</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l08550"></a><span class="lineno"> 8550</span>&#160;   }</div><div class="line"><a name="l08551"></a><span class="lineno"> 8551</span>&#160;   data[pos++] = ies-&gt;<a class="code" href="../../d1/dbe/structast__party__number__ies.html#a3df9119032baa1743f2db71344bd7cac">presentation</a>;</div><div class="line"><a name="l08552"></a><span class="lineno"> 8552</span>&#160;   data[pos++] = 1;</div><div class="line"><a name="l08553"></a><span class="lineno"> 8553</span>&#160;   data[pos++] = number-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">presentation</a>;</div><div class="line"><a name="l08554"></a><span class="lineno"> 8554</span>&#160;</div><div class="line"><a name="l08555"></a><span class="lineno"> 8555</span>&#160;   <span class="keywordflow">if</span> (datalen &lt; pos + (<span class="keyword">sizeof</span>(data[0]) * 2) + 1) {</div><div class="line"><a name="l08556"></a><span class="lineno"> 8556</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No space left for %s number valid\n&quot;</span>, label);</div><div class="line"><a name="l08557"></a><span class="lineno"> 8557</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l08558"></a><span class="lineno"> 8558</span>&#160;   }</div><div class="line"><a name="l08559"></a><span class="lineno"> 8559</span>&#160;   data[pos++] = ies-&gt;<a class="code" href="../../d1/dbe/structast__party__number__ies.html#ac63b1f168765a53e565a8ba27f5469d1">valid</a>;</div><div class="line"><a name="l08560"></a><span class="lineno"> 8560</span>&#160;   data[pos++] = 1;</div><div class="line"><a name="l08561"></a><span class="lineno"> 8561</span>&#160;   data[pos++] = number-&gt;<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>;</div><div class="line"><a name="l08562"></a><span class="lineno"> 8562</span>&#160;</div><div class="line"><a name="l08563"></a><span class="lineno"> 8563</span>&#160;   <span class="keywordflow">return</span> pos;</div><div class="line"><a name="l08564"></a><span class="lineno"> 8564</span>&#160;}</div><div class="line"><a name="l08565"></a><span class="lineno"> 8565</span>&#160;<span class="comment"></span></div><div class="line"><a name="l08566"></a><span class="lineno"> 8566</span>&#160;<span class="comment">/*! \note Should follow struct ast_party_subaddress */</span></div><div class="line"><a name="l08567"></a><span class="lineno"><a class="line" href="../../d3/d05/structast__party__subaddress__ies.html"> 8567</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d3/d05/structast__party__subaddress__ies.html">ast_party_subaddress_ies</a> {<span class="comment"></span></div><div class="line"><a name="l08568"></a><span class="lineno"> 8568</span>&#160;<span class="comment">   /*! \brief subaddress ie. */</span></div><div class="line"><a name="l08569"></a><span class="lineno"><a class="line" href="../../d3/d05/structast__party__subaddress__ies.html#aba03208f197d75b6e355ba9b2ae08ab5"> 8569</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d3/d05/structast__party__subaddress__ies.html#aba03208f197d75b6e355ba9b2ae08ab5">str</a>;<span class="comment"></span></div><div class="line"><a name="l08570"></a><span class="lineno"> 8570</span>&#160;<span class="comment">   /*! \brief subaddress type ie */</span></div><div class="line"><a name="l08571"></a><span class="lineno"><a class="line" href="../../d3/d05/structast__party__subaddress__ies.html#ac765329451135abec74c45e1897abf26"> 8571</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d3/d05/structast__party__subaddress__ies.html#ac765329451135abec74c45e1897abf26">type</a>;<span class="comment"></span></div><div class="line"><a name="l08572"></a><span class="lineno"> 8572</span>&#160;<span class="comment">   /*! \brief odd/even indicator ie */</span></div><div class="line"><a name="l08573"></a><span class="lineno"><a class="line" href="../../d3/d05/structast__party__subaddress__ies.html#abdb47e1d1ee801bd19a649e8f556c641"> 8573</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d3/d05/structast__party__subaddress__ies.html#abdb47e1d1ee801bd19a649e8f556c641">odd_even_indicator</a>;<span class="comment"></span></div><div class="line"><a name="l08574"></a><span class="lineno"> 8574</span>&#160;<span class="comment">   /*! \brief valid/present ie */</span></div><div class="line"><a name="l08575"></a><span class="lineno"><a class="line" href="../../d3/d05/structast__party__subaddress__ies.html#ac63b1f168765a53e565a8ba27f5469d1"> 8575</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d3/d05/structast__party__subaddress__ies.html#ac63b1f168765a53e565a8ba27f5469d1">valid</a>;</div><div class="line"><a name="l08576"></a><span class="lineno"> 8576</span>&#160;};</div><div class="line"><a name="l08577"></a><span class="lineno"> 8577</span>&#160;<span class="comment"></span></div><div class="line"><a name="l08578"></a><span class="lineno"> 8578</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l08579"></a><span class="lineno"> 8579</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l08580"></a><span class="lineno"> 8580</span>&#160;<span class="comment"> * \since 1.8</span></div><div class="line"><a name="l08581"></a><span class="lineno"> 8581</span>&#160;<span class="comment"> * \brief Build a party subaddress information data frame component.</span></div><div class="line"><a name="l08582"></a><span class="lineno"> 8582</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l08583"></a><span class="lineno"> 8583</span>&#160;<span class="comment"> * \param data Buffer to fill with the frame data</span></div><div class="line"><a name="l08584"></a><span class="lineno"> 8584</span>&#160;<span class="comment"> * \param datalen Size of the buffer to fill</span></div><div class="line"><a name="l08585"></a><span class="lineno"> 8585</span>&#160;<span class="comment"> * \param subaddress Party subaddress information</span></div><div class="line"><a name="l08586"></a><span class="lineno"> 8586</span>&#160;<span class="comment"> * \param label Name of particular party subaddress</span></div><div class="line"><a name="l08587"></a><span class="lineno"> 8587</span>&#160;<span class="comment"> * \param ies Data frame ie values for the party subaddress components</span></div><div class="line"><a name="l08588"></a><span class="lineno"> 8588</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l08589"></a><span class="lineno"> 8589</span>&#160;<span class="comment"> * \retval -1 if error</span></div><div class="line"><a name="l08590"></a><span class="lineno"> 8590</span>&#160;<span class="comment"> * \retval Amount of data buffer used</span></div><div class="line"><a name="l08591"></a><span class="lineno"> 8591</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l08592"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3a450363be09968f1328dd900c7ab2ca"> 8592</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a3a450363be09968f1328dd900c7ab2ca">party_subaddress_build_data</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *data, <span class="keywordtype">size_t</span> datalen, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d7/d41/structast__party__subaddress.html">ast_party_subaddress</a> *subaddress, <span class="keyword">const</span> <span class="keywordtype">char</span> *label, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d3/d05/structast__party__subaddress__ies.html">ast_party_subaddress_ies</a> *ies)</div><div class="line"><a name="l08593"></a><span class="lineno"> 8593</span>&#160;{</div><div class="line"><a name="l08594"></a><span class="lineno"> 8594</span>&#160;   <span class="keywordtype">size_t</span> length;</div><div class="line"><a name="l08595"></a><span class="lineno"> 8595</span>&#160;   <span class="keywordtype">size_t</span> pos = 0;</div><div class="line"><a name="l08596"></a><span class="lineno"> 8596</span>&#160;</div><div class="line"><a name="l08597"></a><span class="lineno"> 8597</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l08598"></a><span class="lineno"> 8598</span>&#160;<span class="comment">    * The size of integer values must be fixed in case the frame is</span></div><div class="line"><a name="l08599"></a><span class="lineno"> 8599</span>&#160;<span class="comment">    * shipped to another machine.</span></div><div class="line"><a name="l08600"></a><span class="lineno"> 8600</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l08601"></a><span class="lineno"> 8601</span>&#160;   <span class="keywordflow">if</span> (subaddress-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l08602"></a><span class="lineno"> 8602</span>&#160;      length = strlen(subaddress-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l08603"></a><span class="lineno"> 8603</span>&#160;      <span class="keywordflow">if</span> (datalen &lt; pos + (<span class="keyword">sizeof</span>(data[0]) * 2) + length) {</div><div class="line"><a name="l08604"></a><span class="lineno"> 8604</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No space left for %s subaddress\n&quot;</span>, label);</div><div class="line"><a name="l08605"></a><span class="lineno"> 8605</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l08606"></a><span class="lineno"> 8606</span>&#160;      }</div><div class="line"><a name="l08607"></a><span class="lineno"> 8607</span>&#160;      data[pos++] = ies-&gt;<a class="code" href="../../d3/d05/structast__party__subaddress__ies.html#aba03208f197d75b6e355ba9b2ae08ab5">str</a>;</div><div class="line"><a name="l08608"></a><span class="lineno"> 8608</span>&#160;      data[pos++] = length;</div><div class="line"><a name="l08609"></a><span class="lineno"> 8609</span>&#160;      memcpy(data + pos, subaddress-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, length);</div><div class="line"><a name="l08610"></a><span class="lineno"> 8610</span>&#160;      pos += length;</div><div class="line"><a name="l08611"></a><span class="lineno"> 8611</span>&#160;   }</div><div class="line"><a name="l08612"></a><span class="lineno"> 8612</span>&#160;</div><div class="line"><a name="l08613"></a><span class="lineno"> 8613</span>&#160;   <span class="keywordflow">if</span> (datalen &lt; pos + (<span class="keyword">sizeof</span>(data[0]) * 2) + 1) {</div><div class="line"><a name="l08614"></a><span class="lineno"> 8614</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No space left for %s type of subaddress\n&quot;</span>, label);</div><div class="line"><a name="l08615"></a><span class="lineno"> 8615</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l08616"></a><span class="lineno"> 8616</span>&#160;   }</div><div class="line"><a name="l08617"></a><span class="lineno"> 8617</span>&#160;   data[pos++] = ies-&gt;<a class="code" href="../../d3/d05/structast__party__subaddress__ies.html#ac765329451135abec74c45e1897abf26">type</a>;</div><div class="line"><a name="l08618"></a><span class="lineno"> 8618</span>&#160;   data[pos++] = 1;</div><div class="line"><a name="l08619"></a><span class="lineno"> 8619</span>&#160;   data[pos++] = subaddress-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#ac765329451135abec74c45e1897abf26">type</a>;</div><div class="line"><a name="l08620"></a><span class="lineno"> 8620</span>&#160;</div><div class="line"><a name="l08621"></a><span class="lineno"> 8621</span>&#160;   <span class="keywordflow">if</span> (datalen &lt; pos + (<span class="keyword">sizeof</span>(data[0]) * 2) + 1) {</div><div class="line"><a name="l08622"></a><span class="lineno"> 8622</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,</div><div class="line"><a name="l08623"></a><span class="lineno"> 8623</span>&#160;         <span class="stringliteral">&quot;No space left for %s subaddress odd-even indicator\n&quot;</span>, label);</div><div class="line"><a name="l08624"></a><span class="lineno"> 8624</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l08625"></a><span class="lineno"> 8625</span>&#160;   }</div><div class="line"><a name="l08626"></a><span class="lineno"> 8626</span>&#160;   data[pos++] = ies-&gt;<a class="code" href="../../d3/d05/structast__party__subaddress__ies.html#abdb47e1d1ee801bd19a649e8f556c641">odd_even_indicator</a>;</div><div class="line"><a name="l08627"></a><span class="lineno"> 8627</span>&#160;   data[pos++] = 1;</div><div class="line"><a name="l08628"></a><span class="lineno"> 8628</span>&#160;   data[pos++] = subaddress-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#a141590e40aa10259d3c0bc722725e7ad">odd_even_indicator</a>;</div><div class="line"><a name="l08629"></a><span class="lineno"> 8629</span>&#160;</div><div class="line"><a name="l08630"></a><span class="lineno"> 8630</span>&#160;   <span class="keywordflow">if</span> (datalen &lt; pos + (<span class="keyword">sizeof</span>(data[0]) * 2) + 1) {</div><div class="line"><a name="l08631"></a><span class="lineno"> 8631</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No space left for %s subaddress valid\n&quot;</span>, label);</div><div class="line"><a name="l08632"></a><span class="lineno"> 8632</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l08633"></a><span class="lineno"> 8633</span>&#160;   }</div><div class="line"><a name="l08634"></a><span class="lineno"> 8634</span>&#160;   data[pos++] = ies-&gt;<a class="code" href="../../d3/d05/structast__party__subaddress__ies.html#ac63b1f168765a53e565a8ba27f5469d1">valid</a>;</div><div class="line"><a name="l08635"></a><span class="lineno"> 8635</span>&#160;   data[pos++] = 1;</div><div class="line"><a name="l08636"></a><span class="lineno"> 8636</span>&#160;   data[pos++] = subaddress-&gt;<a class="code" href="../../d7/d41/structast__party__subaddress.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>;</div><div class="line"><a name="l08637"></a><span class="lineno"> 8637</span>&#160;</div><div class="line"><a name="l08638"></a><span class="lineno"> 8638</span>&#160;   <span class="keywordflow">return</span> pos;</div><div class="line"><a name="l08639"></a><span class="lineno"> 8639</span>&#160;}</div><div class="line"><a name="l08640"></a><span class="lineno"> 8640</span>&#160;<span class="comment"></span></div><div class="line"><a name="l08641"></a><span class="lineno"> 8641</span>&#160;<span class="comment">/*! \note Should follow struct ast_party_id */</span></div><div class="line"><a name="l08642"></a><span class="lineno"><a class="line" href="../../d5/d23/structast__party__id__ies.html"> 8642</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d5/d23/structast__party__id__ies.html">ast_party_id_ies</a> {<span class="comment"></span></div><div class="line"><a name="l08643"></a><span class="lineno"> 8643</span>&#160;<span class="comment">   /*! \brief Subscriber name ies */</span></div><div class="line"><a name="l08644"></a><span class="lineno"><a class="line" href="../../d5/d23/structast__party__id__ies.html#a5d80ef8e2a5b2b25e104da6f43fd1ce0"> 8644</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d8e/structast__party__name__ies.html">ast_party_name_ies</a> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>;<span class="comment"></span></div><div class="line"><a name="l08645"></a><span class="lineno"> 8645</span>&#160;<span class="comment">   /*! \brief Subscriber phone number ies */</span></div><div class="line"><a name="l08646"></a><span class="lineno"><a class="line" href="../../d5/d23/structast__party__id__ies.html#aa93f6a3848b7e7fef23a3429211460fe"> 8646</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/dbe/structast__party__number__ies.html">ast_party_number_ies</a> <a class="code" href="../../d6/d49/structnumber.html">number</a>;<span class="comment"></span></div><div class="line"><a name="l08647"></a><span class="lineno"> 8647</span>&#160;<span class="comment">   /*! \brief Subscriber subaddress ies. */</span></div><div class="line"><a name="l08648"></a><span class="lineno"><a class="line" href="../../d5/d23/structast__party__id__ies.html#a1539e4414e5e28ec19b215615770be90"> 8648</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d05/structast__party__subaddress__ies.html">ast_party_subaddress_ies</a> subaddress;<span class="comment"></span></div><div class="line"><a name="l08649"></a><span class="lineno"> 8649</span>&#160;<span class="comment">   /*! \brief User party id tag ie. */</span></div><div class="line"><a name="l08650"></a><span class="lineno"><a class="line" href="../../d5/d23/structast__party__id__ies.html#aab34f2fc02b4a86bea93c68e1ec09d75"> 8650</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d5/d23/structast__party__id__ies.html#aab34f2fc02b4a86bea93c68e1ec09d75">tag</a>;<span class="comment"></span></div><div class="line"><a name="l08651"></a><span class="lineno"> 8651</span>&#160;<span class="comment">   /*!</span></div><div class="line"><a name="l08652"></a><span class="lineno"> 8652</span>&#160;<span class="comment">    * \brief Combined name and number presentation ie.</span></div><div class="line"><a name="l08653"></a><span class="lineno"> 8653</span>&#160;<span class="comment">    * \note Not sent if value is zero.</span></div><div class="line"><a name="l08654"></a><span class="lineno"> 8654</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l08655"></a><span class="lineno"><a class="line" href="../../d5/d23/structast__party__id__ies.html#a8993e50df9b0cec283d52de46d949283"> 8655</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d5/d23/structast__party__id__ies.html#a8993e50df9b0cec283d52de46d949283">combined_presentation</a>;</div><div class="line"><a name="l08656"></a><span class="lineno"> 8656</span>&#160;};</div><div class="line"><a name="l08657"></a><span class="lineno"> 8657</span>&#160;<span class="comment"></span></div><div class="line"><a name="l08658"></a><span class="lineno"> 8658</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l08659"></a><span class="lineno"> 8659</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l08660"></a><span class="lineno"> 8660</span>&#160;<span class="comment"> * \since 1.8</span></div><div class="line"><a name="l08661"></a><span class="lineno"> 8661</span>&#160;<span class="comment"> * \brief Build a party id information data frame component.</span></div><div class="line"><a name="l08662"></a><span class="lineno"> 8662</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l08663"></a><span class="lineno"> 8663</span>&#160;<span class="comment"> * \param data Buffer to fill with the frame data</span></div><div class="line"><a name="l08664"></a><span class="lineno"> 8664</span>&#160;<span class="comment"> * \param datalen Size of the buffer to fill</span></div><div class="line"><a name="l08665"></a><span class="lineno"> 8665</span>&#160;<span class="comment"> * \param id Party id information</span></div><div class="line"><a name="l08666"></a><span class="lineno"> 8666</span>&#160;<span class="comment"> * \param label Name of particular party id</span></div><div class="line"><a name="l08667"></a><span class="lineno"> 8667</span>&#160;<span class="comment"> * \param ies Data frame ie values for the party id components</span></div><div class="line"><a name="l08668"></a><span class="lineno"> 8668</span>&#160;<span class="comment"> * \param update What id information to build.  NULL if all.</span></div><div class="line"><a name="l08669"></a><span class="lineno"> 8669</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l08670"></a><span class="lineno"> 8670</span>&#160;<span class="comment"> * \retval -1 if error</span></div><div class="line"><a name="l08671"></a><span class="lineno"> 8671</span>&#160;<span class="comment"> * \retval Amount of data buffer used</span></div><div class="line"><a name="l08672"></a><span class="lineno"> 8672</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l08673"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ac7f590f6fdd261fc2ab76a9ff97247e8"> 8673</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#ac7f590f6fdd261fc2ab76a9ff97247e8">party_id_build_data</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *data, <span class="keywordtype">size_t</span> datalen,</div><div class="line"><a name="l08674"></a><span class="lineno"> 8674</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *<span class="keywordtype">id</span>, <span class="keyword">const</span> <span class="keywordtype">char</span> *label, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d5/d23/structast__party__id__ies.html">ast_party_id_ies</a> *ies,</div><div class="line"><a name="l08675"></a><span class="lineno"> 8675</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/dcf/structast__set__party__id.html">ast_set_party_id</a> *<a class="code" href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a>)</div><div class="line"><a name="l08676"></a><span class="lineno"> 8676</span>&#160;{</div><div class="line"><a name="l08677"></a><span class="lineno"> 8677</span>&#160;   <span class="keywordtype">size_t</span> length;</div><div class="line"><a name="l08678"></a><span class="lineno"> 8678</span>&#160;   <span class="keywordtype">size_t</span> pos = 0;</div><div class="line"><a name="l08679"></a><span class="lineno"> 8679</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l08680"></a><span class="lineno"> 8680</span>&#160;</div><div class="line"><a name="l08681"></a><span class="lineno"> 8681</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l08682"></a><span class="lineno"> 8682</span>&#160;<span class="comment">    * The size of integer values must be fixed in case the frame is</span></div><div class="line"><a name="l08683"></a><span class="lineno"> 8683</span>&#160;<span class="comment">    * shipped to another machine.</span></div><div class="line"><a name="l08684"></a><span class="lineno"> 8684</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l08685"></a><span class="lineno"> 8685</span>&#160;</div><div class="line"><a name="l08686"></a><span class="lineno"> 8686</span>&#160;   <span class="keywordflow">if</span> (!update || update-&gt;<a class="code" href="../../df/dcf/structast__set__party__id.html#abbd32f02dc419af56bdf709336f6c33e">name</a>) {</div><div class="line"><a name="l08687"></a><span class="lineno"> 8687</span>&#160;      res = <a class="code" href="../../d4/d28/channel_8c.html#a44fd3f84c18c4751cdc56196b0471ead">party_name_build_data</a>(data + pos, datalen - pos, &amp;id-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>, label,</div><div class="line"><a name="l08688"></a><span class="lineno"> 8688</span>&#160;         &amp;ies-&gt;<a class="code" href="../../d5/d23/structast__party__id__ies.html#a5d80ef8e2a5b2b25e104da6f43fd1ce0">name</a>);</div><div class="line"><a name="l08689"></a><span class="lineno"> 8689</span>&#160;      <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l08690"></a><span class="lineno"> 8690</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l08691"></a><span class="lineno"> 8691</span>&#160;      }</div><div class="line"><a name="l08692"></a><span class="lineno"> 8692</span>&#160;      pos += res;</div><div class="line"><a name="l08693"></a><span class="lineno"> 8693</span>&#160;   }</div><div class="line"><a name="l08694"></a><span class="lineno"> 8694</span>&#160;</div><div class="line"><a name="l08695"></a><span class="lineno"> 8695</span>&#160;   <span class="keywordflow">if</span> (!update || update-&gt;<a class="code" href="../../df/dcf/structast__set__party__id.html#aa6787fc6eb732987040b1f378489db54">number</a>) {</div><div class="line"><a name="l08696"></a><span class="lineno"> 8696</span>&#160;      res = <a class="code" href="../../d4/d28/channel_8c.html#ad14ff1aee3e9bd8ce15ea24bbb6d528e">party_number_build_data</a>(data + pos, datalen - pos, &amp;id-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>, label,</div><div class="line"><a name="l08697"></a><span class="lineno"> 8697</span>&#160;         &amp;ies-&gt;<a class="code" href="../../d5/d23/structast__party__id__ies.html#aa93f6a3848b7e7fef23a3429211460fe">number</a>);</div><div class="line"><a name="l08698"></a><span class="lineno"> 8698</span>&#160;      <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l08699"></a><span class="lineno"> 8699</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l08700"></a><span class="lineno"> 8700</span>&#160;      }</div><div class="line"><a name="l08701"></a><span class="lineno"> 8701</span>&#160;      pos += res;</div><div class="line"><a name="l08702"></a><span class="lineno"> 8702</span>&#160;   }</div><div class="line"><a name="l08703"></a><span class="lineno"> 8703</span>&#160;</div><div class="line"><a name="l08704"></a><span class="lineno"> 8704</span>&#160;   <span class="keywordflow">if</span> (!update || update-&gt;<a class="code" href="../../df/dcf/structast__set__party__id.html#a220f288903c39eb8673e61c90a842c33">subaddress</a>) {</div><div class="line"><a name="l08705"></a><span class="lineno"> 8705</span>&#160;      res = <a class="code" href="../../d4/d28/channel_8c.html#a3a450363be09968f1328dd900c7ab2ca">party_subaddress_build_data</a>(data + pos, datalen - pos, &amp;id-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>,</div><div class="line"><a name="l08706"></a><span class="lineno"> 8706</span>&#160;         label, &amp;ies-&gt;<a class="code" href="../../d5/d23/structast__party__id__ies.html#a1539e4414e5e28ec19b215615770be90">subaddress</a>);</div><div class="line"><a name="l08707"></a><span class="lineno"> 8707</span>&#160;      <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l08708"></a><span class="lineno"> 8708</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l08709"></a><span class="lineno"> 8709</span>&#160;      }</div><div class="line"><a name="l08710"></a><span class="lineno"> 8710</span>&#160;      pos += res;</div><div class="line"><a name="l08711"></a><span class="lineno"> 8711</span>&#160;   }</div><div class="line"><a name="l08712"></a><span class="lineno"> 8712</span>&#160;</div><div class="line"><a name="l08713"></a><span class="lineno"> 8713</span>&#160;   <span class="comment">/* *************** Party id user tag **************************** */</span></div><div class="line"><a name="l08714"></a><span class="lineno"> 8714</span>&#160;   <span class="keywordflow">if</span> (id-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>) {</div><div class="line"><a name="l08715"></a><span class="lineno"> 8715</span>&#160;      length = strlen(id-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>);</div><div class="line"><a name="l08716"></a><span class="lineno"> 8716</span>&#160;      <span class="keywordflow">if</span> (datalen &lt; pos + (<span class="keyword">sizeof</span>(data[0]) * 2) + length) {</div><div class="line"><a name="l08717"></a><span class="lineno"> 8717</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No space left for %s tag\n&quot;</span>, label);</div><div class="line"><a name="l08718"></a><span class="lineno"> 8718</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l08719"></a><span class="lineno"> 8719</span>&#160;      }</div><div class="line"><a name="l08720"></a><span class="lineno"> 8720</span>&#160;      data[pos++] = ies-&gt;<a class="code" href="../../d5/d23/structast__party__id__ies.html#aab34f2fc02b4a86bea93c68e1ec09d75">tag</a>;</div><div class="line"><a name="l08721"></a><span class="lineno"> 8721</span>&#160;      data[pos++] = length;</div><div class="line"><a name="l08722"></a><span class="lineno"> 8722</span>&#160;      memcpy(data + pos, id-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>, length);</div><div class="line"><a name="l08723"></a><span class="lineno"> 8723</span>&#160;      pos += length;</div><div class="line"><a name="l08724"></a><span class="lineno"> 8724</span>&#160;   }</div><div class="line"><a name="l08725"></a><span class="lineno"> 8725</span>&#160;</div><div class="line"><a name="l08726"></a><span class="lineno"> 8726</span>&#160;   <span class="comment">/* *************** Party id combined presentation *************** */</span></div><div class="line"><a name="l08727"></a><span class="lineno"> 8727</span>&#160;   <span class="keywordflow">if</span> (ies-&gt;<a class="code" href="../../d5/d23/structast__party__id__ies.html#a8993e50df9b0cec283d52de46d949283">combined_presentation</a> &amp;&amp; (!update || update-&gt;<a class="code" href="../../df/dcf/structast__set__party__id.html#aa6787fc6eb732987040b1f378489db54">number</a>)) {</div><div class="line"><a name="l08728"></a><span class="lineno"> 8728</span>&#160;      <span class="keywordtype">int</span> presentation;</div><div class="line"><a name="l08729"></a><span class="lineno"> 8729</span>&#160;</div><div class="line"><a name="l08730"></a><span class="lineno"> 8730</span>&#160;      <span class="keywordflow">if</span> (!update || update-&gt;<a class="code" href="../../df/dcf/structast__set__party__id.html#abbd32f02dc419af56bdf709336f6c33e">name</a>) {</div><div class="line"><a name="l08731"></a><span class="lineno"> 8731</span>&#160;         presentation = <a class="code" href="../../d4/d28/channel_8c.html#a39aac47fef1240391fd97e055522fd83">ast_party_id_presentation</a>(<span class="keywordtype">id</span>);</div><div class="line"><a name="l08732"></a><span class="lineno"> 8732</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l08733"></a><span class="lineno"> 8733</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l08734"></a><span class="lineno"> 8734</span>&#160;<span class="comment">          * We must compromise because not all the information is available</span></div><div class="line"><a name="l08735"></a><span class="lineno"> 8735</span>&#160;<span class="comment">          * to determine a combined presentation value.</span></div><div class="line"><a name="l08736"></a><span class="lineno"> 8736</span>&#160;<span class="comment">          * We will only send the number presentation instead.</span></div><div class="line"><a name="l08737"></a><span class="lineno"> 8737</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l08738"></a><span class="lineno"> 8738</span>&#160;         presentation = <span class="keywordtype">id</span>-&gt;number.presentation;</div><div class="line"><a name="l08739"></a><span class="lineno"> 8739</span>&#160;      }</div><div class="line"><a name="l08740"></a><span class="lineno"> 8740</span>&#160;</div><div class="line"><a name="l08741"></a><span class="lineno"> 8741</span>&#160;      <span class="keywordflow">if</span> (datalen &lt; pos + (<span class="keyword">sizeof</span>(data[0]) * 2) + 1) {</div><div class="line"><a name="l08742"></a><span class="lineno"> 8742</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No space left for %s combined presentation\n&quot;</span>, label);</div><div class="line"><a name="l08743"></a><span class="lineno"> 8743</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l08744"></a><span class="lineno"> 8744</span>&#160;      }</div><div class="line"><a name="l08745"></a><span class="lineno"> 8745</span>&#160;      data[pos++] = ies-&gt;<a class="code" href="../../d5/d23/structast__party__id__ies.html#a8993e50df9b0cec283d52de46d949283">combined_presentation</a>;</div><div class="line"><a name="l08746"></a><span class="lineno"> 8746</span>&#160;      data[pos++] = 1;</div><div class="line"><a name="l08747"></a><span class="lineno"> 8747</span>&#160;      data[pos++] = presentation;</div><div class="line"><a name="l08748"></a><span class="lineno"> 8748</span>&#160;   }</div><div class="line"><a name="l08749"></a><span class="lineno"> 8749</span>&#160;</div><div class="line"><a name="l08750"></a><span class="lineno"> 8750</span>&#160;   <span class="keywordflow">return</span> pos;</div><div class="line"><a name="l08751"></a><span class="lineno"> 8751</span>&#160;}</div><div class="line"><a name="l08752"></a><span class="lineno"> 8752</span>&#160;<span class="comment"></span></div><div class="line"><a name="l08753"></a><span class="lineno"> 8753</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l08754"></a><span class="lineno"> 8754</span>&#160;<span class="comment"> * \brief Element identifiers for connected line indication frame data</span></div><div class="line"><a name="l08755"></a><span class="lineno"> 8755</span>&#160;<span class="comment"> * \note Only add to the end of this enum.</span></div><div class="line"><a name="l08756"></a><span class="lineno"> 8756</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l08757"></a><span class="lineno"> 8757</span>&#160;<span class="keyword">enum</span> {</div><div class="line"><a name="l08758"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a7fa2503dc4dfb16153f519deeb2d47ec"> 8758</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a7fa2503dc4dfb16153f519deeb2d47ec">AST_CONNECTED_LINE_NUMBER</a>,</div><div class="line"><a name="l08759"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876acc93a99a2ec2485a955b9dface8ebf86"> 8759</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876acc93a99a2ec2485a955b9dface8ebf86">AST_CONNECTED_LINE_NAME</a>,</div><div class="line"><a name="l08760"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876afd2a6c6f9e551dd448cbee52f03b546f"> 8760</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876afd2a6c6f9e551dd448cbee52f03b546f">AST_CONNECTED_LINE_NUMBER_PLAN</a>,</div><div class="line"><a name="l08761"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a8614a42368ac70310dc91d345af2e4e3"> 8761</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a8614a42368ac70310dc91d345af2e4e3">AST_CONNECTED_LINE_ID_PRESENTATION</a>,<span class="comment">/* Combined number and name presentation. */</span></div><div class="line"><a name="l08762"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a049542394a05e2be28526008e8f1eb78"> 8762</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a049542394a05e2be28526008e8f1eb78">AST_CONNECTED_LINE_SOURCE</a>,</div><div class="line"><a name="l08763"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a765889201caaff09b8cf5ee36f45f7d0"> 8763</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a765889201caaff09b8cf5ee36f45f7d0">AST_CONNECTED_LINE_SUBADDRESS</a>,</div><div class="line"><a name="l08764"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876ad395bd248b37cc85f35d206c73a7c802"> 8764</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876ad395bd248b37cc85f35d206c73a7c802">AST_CONNECTED_LINE_SUBADDRESS_TYPE</a>,</div><div class="line"><a name="l08765"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a70db77169415300aa82d2ec95028bd0b"> 8765</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a70db77169415300aa82d2ec95028bd0b">AST_CONNECTED_LINE_SUBADDRESS_ODD_EVEN</a>,</div><div class="line"><a name="l08766"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a47c82e5bb9a7c433ff3083dc6e1cf6a3"> 8766</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a47c82e5bb9a7c433ff3083dc6e1cf6a3">AST_CONNECTED_LINE_SUBADDRESS_VALID</a>,</div><div class="line"><a name="l08767"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876abf320d7c90ab6439b6e4e6c214a9c30c"> 8767</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876abf320d7c90ab6439b6e4e6c214a9c30c">AST_CONNECTED_LINE_TAG</a>,</div><div class="line"><a name="l08768"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876aff5b26c05cf294cfe8df0bd0a809087d"> 8768</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876aff5b26c05cf294cfe8df0bd0a809087d">AST_CONNECTED_LINE_VERSION</a>,</div><div class="line"><a name="l08769"></a><span class="lineno"> 8769</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l08770"></a><span class="lineno"> 8770</span>&#160;<span class="comment">    * No more party id combined number and name presentation values</span></div><div class="line"><a name="l08771"></a><span class="lineno"> 8771</span>&#160;<span class="comment">    * need to be created.</span></div><div class="line"><a name="l08772"></a><span class="lineno"> 8772</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l08773"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876adaaecd6294b07e9205d24b19beb69ebf"> 8773</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876adaaecd6294b07e9205d24b19beb69ebf">AST_CONNECTED_LINE_NAME_VALID</a>,</div><div class="line"><a name="l08774"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a3194894c8e61c579deb4a7403f358a39"> 8774</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a3194894c8e61c579deb4a7403f358a39">AST_CONNECTED_LINE_NAME_CHAR_SET</a>,</div><div class="line"><a name="l08775"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876acdafbb2b3516258a19998f47a3df5f1b"> 8775</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876acdafbb2b3516258a19998f47a3df5f1b">AST_CONNECTED_LINE_NAME_PRESENTATION</a>,</div><div class="line"><a name="l08776"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a011704f0946d51ed30001afcce2f7f3d"> 8776</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a011704f0946d51ed30001afcce2f7f3d">AST_CONNECTED_LINE_NUMBER_VALID</a>,</div><div class="line"><a name="l08777"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876ac36f6c6286e5e2522901d6e86e7745ab"> 8777</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876ac36f6c6286e5e2522901d6e86e7745ab">AST_CONNECTED_LINE_NUMBER_PRESENTATION</a>,</div><div class="line"><a name="l08778"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876af70cefebc95cfb5681aa190d04a57ea9"> 8778</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876af70cefebc95cfb5681aa190d04a57ea9">AST_CONNECTED_LINE_PRIV_NUMBER</a>,</div><div class="line"><a name="l08779"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a7663d3f77bce64344e57586b48ac46a2"> 8779</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a7663d3f77bce64344e57586b48ac46a2">AST_CONNECTED_LINE_PRIV_NUMBER_PLAN</a>,</div><div class="line"><a name="l08780"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876ac32bb54a3d7c59eb047ec4a278eef693"> 8780</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876ac32bb54a3d7c59eb047ec4a278eef693">AST_CONNECTED_LINE_PRIV_NUMBER_VALID</a>,</div><div class="line"><a name="l08781"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a28c6714cf6b9fc587d16be9b3800c354"> 8781</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a28c6714cf6b9fc587d16be9b3800c354">AST_CONNECTED_LINE_PRIV_NUMBER_PRESENTATION</a>,</div><div class="line"><a name="l08782"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a976c12acdeab4bbcaa5dd70e9856b256"> 8782</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a976c12acdeab4bbcaa5dd70e9856b256">AST_CONNECTED_LINE_PRIV_NAME</a>,</div><div class="line"><a name="l08783"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a0d3f08aab70c15ca65cafceda937166f"> 8783</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a0d3f08aab70c15ca65cafceda937166f">AST_CONNECTED_LINE_PRIV_NAME_VALID</a>,</div><div class="line"><a name="l08784"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876acc43c58cebca3c782099a590cf07ddab"> 8784</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876acc43c58cebca3c782099a590cf07ddab">AST_CONNECTED_LINE_PRIV_NAME_CHAR_SET</a>,</div><div class="line"><a name="l08785"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a898aa5bd4f67835872f001534a5d0161"> 8785</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a898aa5bd4f67835872f001534a5d0161">AST_CONNECTED_LINE_PRIV_NAME_PRESENTATION</a>,</div><div class="line"><a name="l08786"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876ad5aff16f5c624f934038fafb747e0d01"> 8786</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876ad5aff16f5c624f934038fafb747e0d01">AST_CONNECTED_LINE_PRIV_SUBADDRESS</a>,</div><div class="line"><a name="l08787"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a18f6cfd24ab8b44292cfd879eafa564a"> 8787</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a18f6cfd24ab8b44292cfd879eafa564a">AST_CONNECTED_LINE_PRIV_SUBADDRESS_TYPE</a>,</div><div class="line"><a name="l08788"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a096336a324a96da5dc1d2889f2f23a95"> 8788</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a096336a324a96da5dc1d2889f2f23a95">AST_CONNECTED_LINE_PRIV_SUBADDRESS_ODD_EVEN</a>,</div><div class="line"><a name="l08789"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a08d8232b0bb99f13647a9ce5e0d11ed4"> 8789</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a08d8232b0bb99f13647a9ce5e0d11ed4">AST_CONNECTED_LINE_PRIV_SUBADDRESS_VALID</a>,</div><div class="line"><a name="l08790"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876ad8f108076857ba3a2944b7a63883f89f"> 8790</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876ad8f108076857ba3a2944b7a63883f89f">AST_CONNECTED_LINE_PRIV_TAG</a>,</div><div class="line"><a name="l08791"></a><span class="lineno"> 8791</span>&#160;};</div><div class="line"><a name="l08792"></a><span class="lineno"> 8792</span>&#160;</div><div class="line"><a name="l08793"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ab380c81e4514ab48ca8402f7950a354a"> 8793</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#ab380c81e4514ab48ca8402f7950a354a">ast_connected_line_build_data</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *data, <span class="keywordtype">size_t</span> datalen, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a5023e29d4234076952bfecfff178b566">connected</a>, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/dc9/structast__set__party__connected__line.html">ast_set_party_connected_line</a> *<a class="code" href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a>)</div><div class="line"><a name="l08794"></a><span class="lineno"> 8794</span>&#160;{</div><div class="line"><a name="l08795"></a><span class="lineno"> 8795</span>&#160;   <a class="code" href="../../da/d4e/db_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;</div><div class="line"><a name="l08796"></a><span class="lineno"> 8796</span>&#160;   <span class="keywordtype">size_t</span> pos = 0;</div><div class="line"><a name="l08797"></a><span class="lineno"> 8797</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l08798"></a><span class="lineno"> 8798</span>&#160;</div><div class="line"><a name="l08799"></a><span class="lineno"> 8799</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d5/d23/structast__party__id__ies.html">ast_party_id_ies</a> ies = {</div><div class="line"><a name="l08800"></a><span class="lineno"> 8800</span>&#160;      .<a class="code" href="../../d5/d23/structast__party__id__ies.html#a5d80ef8e2a5b2b25e104da6f43fd1ce0">name</a>.<a class="code" href="../../df/d8e/structast__party__name__ies.html#aba03208f197d75b6e355ba9b2ae08ab5">str</a> = <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876acc93a99a2ec2485a955b9dface8ebf86">AST_CONNECTED_LINE_NAME</a>,</div><div class="line"><a name="l08801"></a><span class="lineno"> 8801</span>&#160;      .name.char_set = <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a3194894c8e61c579deb4a7403f358a39">AST_CONNECTED_LINE_NAME_CHAR_SET</a>,</div><div class="line"><a name="l08802"></a><span class="lineno"> 8802</span>&#160;      .name.presentation = <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876acdafbb2b3516258a19998f47a3df5f1b">AST_CONNECTED_LINE_NAME_PRESENTATION</a>,</div><div class="line"><a name="l08803"></a><span class="lineno"> 8803</span>&#160;      .name.valid = <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876adaaecd6294b07e9205d24b19beb69ebf">AST_CONNECTED_LINE_NAME_VALID</a>,</div><div class="line"><a name="l08804"></a><span class="lineno"> 8804</span>&#160;</div><div class="line"><a name="l08805"></a><span class="lineno"> 8805</span>&#160;      .number.str = <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a7fa2503dc4dfb16153f519deeb2d47ec">AST_CONNECTED_LINE_NUMBER</a>,</div><div class="line"><a name="l08806"></a><span class="lineno"> 8806</span>&#160;      .number.plan = <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876afd2a6c6f9e551dd448cbee52f03b546f">AST_CONNECTED_LINE_NUMBER_PLAN</a>,</div><div class="line"><a name="l08807"></a><span class="lineno"> 8807</span>&#160;      .number.presentation = <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876ac36f6c6286e5e2522901d6e86e7745ab">AST_CONNECTED_LINE_NUMBER_PRESENTATION</a>,</div><div class="line"><a name="l08808"></a><span class="lineno"> 8808</span>&#160;      .number.valid = <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a011704f0946d51ed30001afcce2f7f3d">AST_CONNECTED_LINE_NUMBER_VALID</a>,</div><div class="line"><a name="l08809"></a><span class="lineno"> 8809</span>&#160;</div><div class="line"><a name="l08810"></a><span class="lineno"> 8810</span>&#160;      .subaddress.str = <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a765889201caaff09b8cf5ee36f45f7d0">AST_CONNECTED_LINE_SUBADDRESS</a>,</div><div class="line"><a name="l08811"></a><span class="lineno"> 8811</span>&#160;      .subaddress.type = <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876ad395bd248b37cc85f35d206c73a7c802">AST_CONNECTED_LINE_SUBADDRESS_TYPE</a>,</div><div class="line"><a name="l08812"></a><span class="lineno"> 8812</span>&#160;      .subaddress.odd_even_indicator = <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a70db77169415300aa82d2ec95028bd0b">AST_CONNECTED_LINE_SUBADDRESS_ODD_EVEN</a>,</div><div class="line"><a name="l08813"></a><span class="lineno"> 8813</span>&#160;      .subaddress.valid = <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a47c82e5bb9a7c433ff3083dc6e1cf6a3">AST_CONNECTED_LINE_SUBADDRESS_VALID</a>,</div><div class="line"><a name="l08814"></a><span class="lineno"> 8814</span>&#160;</div><div class="line"><a name="l08815"></a><span class="lineno"> 8815</span>&#160;      .tag = <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876abf320d7c90ab6439b6e4e6c214a9c30c">AST_CONNECTED_LINE_TAG</a>,</div><div class="line"><a name="l08816"></a><span class="lineno"> 8816</span>&#160;      .combined_presentation = <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a8614a42368ac70310dc91d345af2e4e3">AST_CONNECTED_LINE_ID_PRESENTATION</a>,</div><div class="line"><a name="l08817"></a><span class="lineno"> 8817</span>&#160;   };</div><div class="line"><a name="l08818"></a><span class="lineno"> 8818</span>&#160;</div><div class="line"><a name="l08819"></a><span class="lineno"> 8819</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d5/d23/structast__party__id__ies.html">ast_party_id_ies</a> priv_ies = {</div><div class="line"><a name="l08820"></a><span class="lineno"> 8820</span>&#160;      .<a class="code" href="../../d5/d23/structast__party__id__ies.html#a5d80ef8e2a5b2b25e104da6f43fd1ce0">name</a>.<a class="code" href="../../df/d8e/structast__party__name__ies.html#aba03208f197d75b6e355ba9b2ae08ab5">str</a> = <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a976c12acdeab4bbcaa5dd70e9856b256">AST_CONNECTED_LINE_PRIV_NAME</a>,</div><div class="line"><a name="l08821"></a><span class="lineno"> 8821</span>&#160;      .name.char_set = <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876acc43c58cebca3c782099a590cf07ddab">AST_CONNECTED_LINE_PRIV_NAME_CHAR_SET</a>,</div><div class="line"><a name="l08822"></a><span class="lineno"> 8822</span>&#160;      .name.presentation = <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a898aa5bd4f67835872f001534a5d0161">AST_CONNECTED_LINE_PRIV_NAME_PRESENTATION</a>,</div><div class="line"><a name="l08823"></a><span class="lineno"> 8823</span>&#160;      .name.valid = <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a0d3f08aab70c15ca65cafceda937166f">AST_CONNECTED_LINE_PRIV_NAME_VALID</a>,</div><div class="line"><a name="l08824"></a><span class="lineno"> 8824</span>&#160;</div><div class="line"><a name="l08825"></a><span class="lineno"> 8825</span>&#160;      .number.str = <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876af70cefebc95cfb5681aa190d04a57ea9">AST_CONNECTED_LINE_PRIV_NUMBER</a>,</div><div class="line"><a name="l08826"></a><span class="lineno"> 8826</span>&#160;      .number.plan = <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a7663d3f77bce64344e57586b48ac46a2">AST_CONNECTED_LINE_PRIV_NUMBER_PLAN</a>,</div><div class="line"><a name="l08827"></a><span class="lineno"> 8827</span>&#160;      .number.presentation = <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a28c6714cf6b9fc587d16be9b3800c354">AST_CONNECTED_LINE_PRIV_NUMBER_PRESENTATION</a>,</div><div class="line"><a name="l08828"></a><span class="lineno"> 8828</span>&#160;      .number.valid = <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876ac32bb54a3d7c59eb047ec4a278eef693">AST_CONNECTED_LINE_PRIV_NUMBER_VALID</a>,</div><div class="line"><a name="l08829"></a><span class="lineno"> 8829</span>&#160;</div><div class="line"><a name="l08830"></a><span class="lineno"> 8830</span>&#160;      .subaddress.str = <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876ad5aff16f5c624f934038fafb747e0d01">AST_CONNECTED_LINE_PRIV_SUBADDRESS</a>,</div><div class="line"><a name="l08831"></a><span class="lineno"> 8831</span>&#160;      .subaddress.type = <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a18f6cfd24ab8b44292cfd879eafa564a">AST_CONNECTED_LINE_PRIV_SUBADDRESS_TYPE</a>,</div><div class="line"><a name="l08832"></a><span class="lineno"> 8832</span>&#160;      .subaddress.odd_even_indicator = <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a096336a324a96da5dc1d2889f2f23a95">AST_CONNECTED_LINE_PRIV_SUBADDRESS_ODD_EVEN</a>,</div><div class="line"><a name="l08833"></a><span class="lineno"> 8833</span>&#160;      .subaddress.valid = <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a08d8232b0bb99f13647a9ce5e0d11ed4">AST_CONNECTED_LINE_PRIV_SUBADDRESS_VALID</a>,</div><div class="line"><a name="l08834"></a><span class="lineno"> 8834</span>&#160;</div><div class="line"><a name="l08835"></a><span class="lineno"> 8835</span>&#160;      .tag = <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876ad8f108076857ba3a2944b7a63883f89f">AST_CONNECTED_LINE_PRIV_TAG</a>,</div><div class="line"><a name="l08836"></a><span class="lineno"> 8836</span>&#160;      .combined_presentation = 0,<span class="comment">/* Not sent. */</span></div><div class="line"><a name="l08837"></a><span class="lineno"> 8837</span>&#160;   };</div><div class="line"><a name="l08838"></a><span class="lineno"> 8838</span>&#160;</div><div class="line"><a name="l08839"></a><span class="lineno"> 8839</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l08840"></a><span class="lineno"> 8840</span>&#160;<span class="comment">    * The size of integer values must be fixed in case the frame is</span></div><div class="line"><a name="l08841"></a><span class="lineno"> 8841</span>&#160;<span class="comment">    * shipped to another machine.</span></div><div class="line"><a name="l08842"></a><span class="lineno"> 8842</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l08843"></a><span class="lineno"> 8843</span>&#160;</div><div class="line"><a name="l08844"></a><span class="lineno"> 8844</span>&#160;   <span class="comment">/* Connected line frame version */</span></div><div class="line"><a name="l08845"></a><span class="lineno"> 8845</span>&#160;   <span class="keywordflow">if</span> (datalen &lt; pos + (<span class="keyword">sizeof</span>(data[0]) * 2) + 1) {</div><div class="line"><a name="l08846"></a><span class="lineno"> 8846</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No space left for connected line frame version\n&quot;</span>);</div><div class="line"><a name="l08847"></a><span class="lineno"> 8847</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l08848"></a><span class="lineno"> 8848</span>&#160;   }</div><div class="line"><a name="l08849"></a><span class="lineno"> 8849</span>&#160;   data[pos++] = <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876aff5b26c05cf294cfe8df0bd0a809087d">AST_CONNECTED_LINE_VERSION</a>;</div><div class="line"><a name="l08850"></a><span class="lineno"> 8850</span>&#160;   data[pos++] = 1;</div><div class="line"><a name="l08851"></a><span class="lineno"> 8851</span>&#160;   data[pos++] = 2;<span class="comment">/* Version 1 did not have a version ie */</span></div><div class="line"><a name="l08852"></a><span class="lineno"> 8852</span>&#160;</div><div class="line"><a name="l08853"></a><span class="lineno"> 8853</span>&#160;   res = <a class="code" href="../../d4/d28/channel_8c.html#ac7f590f6fdd261fc2ab76a9ff97247e8">party_id_build_data</a>(data + pos, datalen - pos, &amp;connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>,</div><div class="line"><a name="l08854"></a><span class="lineno"> 8854</span>&#160;      <span class="stringliteral">&quot;connected line&quot;</span>, &amp;ies, update ? &amp;update-&gt;<a class="code" href="../../d4/dc9/structast__set__party__connected__line.html#aa7845dae2adff27b0da13c58b16ca805">id</a> : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l08855"></a><span class="lineno"> 8855</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l08856"></a><span class="lineno"> 8856</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l08857"></a><span class="lineno"> 8857</span>&#160;   }</div><div class="line"><a name="l08858"></a><span class="lineno"> 8858</span>&#160;   pos += res;</div><div class="line"><a name="l08859"></a><span class="lineno"> 8859</span>&#160;</div><div class="line"><a name="l08860"></a><span class="lineno"> 8860</span>&#160;   res = <a class="code" href="../../d4/d28/channel_8c.html#ac7f590f6fdd261fc2ab76a9ff97247e8">party_id_build_data</a>(data + pos, datalen - pos, &amp;connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>,</div><div class="line"><a name="l08861"></a><span class="lineno"> 8861</span>&#160;      <span class="stringliteral">&quot;connected line priv&quot;</span>, &amp;priv_ies, update ? &amp;update-&gt;<a class="code" href="../../d4/dc9/structast__set__party__connected__line.html#a1ad0a1732e669f57e5b6e609affdd1db">priv</a> : NULL);</div><div class="line"><a name="l08862"></a><span class="lineno"> 8862</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l08863"></a><span class="lineno"> 8863</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l08864"></a><span class="lineno"> 8864</span>&#160;   }</div><div class="line"><a name="l08865"></a><span class="lineno"> 8865</span>&#160;   pos += res;</div><div class="line"><a name="l08866"></a><span class="lineno"> 8866</span>&#160;</div><div class="line"><a name="l08867"></a><span class="lineno"> 8867</span>&#160;   <span class="comment">/* Connected line source */</span></div><div class="line"><a name="l08868"></a><span class="lineno"> 8868</span>&#160;   <span class="keywordflow">if</span> (datalen &lt; pos + (<span class="keyword">sizeof</span>(data[0]) * 2) + <span class="keyword">sizeof</span>(value)) {</div><div class="line"><a name="l08869"></a><span class="lineno"> 8869</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No space left for connected line source\n&quot;</span>);</div><div class="line"><a name="l08870"></a><span class="lineno"> 8870</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l08871"></a><span class="lineno"> 8871</span>&#160;   }</div><div class="line"><a name="l08872"></a><span class="lineno"> 8872</span>&#160;   data[pos++] = <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a049542394a05e2be28526008e8f1eb78">AST_CONNECTED_LINE_SOURCE</a>;</div><div class="line"><a name="l08873"></a><span class="lineno"> 8873</span>&#160;   data[pos++] = <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>);</div><div class="line"><a name="l08874"></a><span class="lineno"> 8874</span>&#160;   value = htonl(connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a07a87b2e6ed927503e2f95f119c9fc23">source</a>);</div><div class="line"><a name="l08875"></a><span class="lineno"> 8875</span>&#160;   memcpy(data + pos, &amp;value, <span class="keyword">sizeof</span>(value));</div><div class="line"><a name="l08876"></a><span class="lineno"> 8876</span>&#160;   pos += <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>);</div><div class="line"><a name="l08877"></a><span class="lineno"> 8877</span>&#160;</div><div class="line"><a name="l08878"></a><span class="lineno"> 8878</span>&#160;   <span class="keywordflow">return</span> pos;</div><div class="line"><a name="l08879"></a><span class="lineno"> 8879</span>&#160;}</div><div class="line"><a name="l08880"></a><span class="lineno"> 8880</span>&#160;</div><div class="line"><a name="l08881"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a93d3e245d714d1ab18c5fb2ecb5cbf0e"> 8881</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a93d3e245d714d1ab18c5fb2ecb5cbf0e">ast_connected_line_parse_data</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *data, <span class="keywordtype">size_t</span> datalen, <span class="keyword">struct</span> <a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a5023e29d4234076952bfecfff178b566">connected</a>)</div><div class="line"><a name="l08882"></a><span class="lineno"> 8882</span>&#160;{</div><div class="line"><a name="l08883"></a><span class="lineno"> 8883</span>&#160;   <span class="keywordtype">size_t</span> pos;</div><div class="line"><a name="l08884"></a><span class="lineno"> 8884</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> ie_len;</div><div class="line"><a name="l08885"></a><span class="lineno"> 8885</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> ie_id;</div><div class="line"><a name="l08886"></a><span class="lineno"> 8886</span>&#160;   <a class="code" href="../../da/d4e/db_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;</div><div class="line"><a name="l08887"></a><span class="lineno"> 8887</span>&#160;   <span class="keywordtype">int</span> frame_version = 1;</div><div class="line"><a name="l08888"></a><span class="lineno"> 8888</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d5/d23/structast__party__id__ies.html#a8993e50df9b0cec283d52de46d949283">combined_presentation</a> = 0;</div><div class="line"><a name="l08889"></a><span class="lineno"> 8889</span>&#160;   <span class="keywordtype">int</span> got_combined_presentation = 0;<span class="comment">/* TRUE if got a combined name and number presentation value. */</span></div><div class="line"><a name="l08890"></a><span class="lineno"> 8890</span>&#160;</div><div class="line"><a name="l08891"></a><span class="lineno"> 8891</span>&#160;   <span class="keywordflow">for</span> (pos = 0; pos &lt; datalen; pos += ie_len) {</div><div class="line"><a name="l08892"></a><span class="lineno"> 8892</span>&#160;      <span class="keywordflow">if</span> (datalen &lt; pos + <span class="keyword">sizeof</span>(ie_id) + <span class="keyword">sizeof</span>(ie_len)) {</div><div class="line"><a name="l08893"></a><span class="lineno"> 8893</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid connected line update\n&quot;</span>);</div><div class="line"><a name="l08894"></a><span class="lineno"> 8894</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l08895"></a><span class="lineno"> 8895</span>&#160;      }</div><div class="line"><a name="l08896"></a><span class="lineno"> 8896</span>&#160;      ie_id = data[pos++];</div><div class="line"><a name="l08897"></a><span class="lineno"> 8897</span>&#160;      ie_len = data[pos++];</div><div class="line"><a name="l08898"></a><span class="lineno"> 8898</span>&#160;      <span class="keywordflow">if</span> (datalen &lt; pos + ie_len) {</div><div class="line"><a name="l08899"></a><span class="lineno"> 8899</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid connected line update\n&quot;</span>);</div><div class="line"><a name="l08900"></a><span class="lineno"> 8900</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l08901"></a><span class="lineno"> 8901</span>&#160;      }</div><div class="line"><a name="l08902"></a><span class="lineno"> 8902</span>&#160;</div><div class="line"><a name="l08903"></a><span class="lineno"> 8903</span>&#160;      <span class="keywordflow">switch</span> (ie_id) {</div><div class="line"><a name="l08904"></a><span class="lineno"> 8904</span>&#160;<span class="comment">/* Connected line party frame version */</span></div><div class="line"><a name="l08905"></a><span class="lineno"> 8905</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876aff5b26c05cf294cfe8df0bd0a809087d">AST_CONNECTED_LINE_VERSION</a>:</div><div class="line"><a name="l08906"></a><span class="lineno"> 8906</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l08907"></a><span class="lineno"> 8907</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid connected line frame version (%u)\n&quot;</span>,</div><div class="line"><a name="l08908"></a><span class="lineno"> 8908</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l08909"></a><span class="lineno"> 8909</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l08910"></a><span class="lineno"> 8910</span>&#160;         }</div><div class="line"><a name="l08911"></a><span class="lineno"> 8911</span>&#160;         frame_version = data[pos];</div><div class="line"><a name="l08912"></a><span class="lineno"> 8912</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l08913"></a><span class="lineno"> 8913</span>&#160;<span class="comment">/* Connected line party id name */</span></div><div class="line"><a name="l08914"></a><span class="lineno"> 8914</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876acc93a99a2ec2485a955b9dface8ebf86">AST_CONNECTED_LINE_NAME</a>:</div><div class="line"><a name="l08915"></a><span class="lineno"> 8915</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l08916"></a><span class="lineno"> 8916</span>&#160;         connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l08917"></a><span class="lineno"> 8917</span>&#160;         <span class="keywordflow">if</span> (connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l08918"></a><span class="lineno"> 8918</span>&#160;            memcpy(connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, data + pos, ie_len);</div><div class="line"><a name="l08919"></a><span class="lineno"> 8919</span>&#160;            connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>[ie_len] = 0;</div><div class="line"><a name="l08920"></a><span class="lineno"> 8920</span>&#160;         }</div><div class="line"><a name="l08921"></a><span class="lineno"> 8921</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l08922"></a><span class="lineno"> 8922</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a3194894c8e61c579deb4a7403f358a39">AST_CONNECTED_LINE_NAME_CHAR_SET</a>:</div><div class="line"><a name="l08923"></a><span class="lineno"> 8923</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l08924"></a><span class="lineno"> 8924</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid connected line name char set (%u)\n&quot;</span>,</div><div class="line"><a name="l08925"></a><span class="lineno"> 8925</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l08926"></a><span class="lineno"> 8926</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l08927"></a><span class="lineno"> 8927</span>&#160;         }</div><div class="line"><a name="l08928"></a><span class="lineno"> 8928</span>&#160;         connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#a1fb9f03e5de01bf0a8f221e627fa9a7b">char_set</a> = data[pos];</div><div class="line"><a name="l08929"></a><span class="lineno"> 8929</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l08930"></a><span class="lineno"> 8930</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876acdafbb2b3516258a19998f47a3df5f1b">AST_CONNECTED_LINE_NAME_PRESENTATION</a>:</div><div class="line"><a name="l08931"></a><span class="lineno"> 8931</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l08932"></a><span class="lineno"> 8932</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid connected line name presentation (%u)\n&quot;</span>,</div><div class="line"><a name="l08933"></a><span class="lineno"> 8933</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l08934"></a><span class="lineno"> 8934</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l08935"></a><span class="lineno"> 8935</span>&#160;         }</div><div class="line"><a name="l08936"></a><span class="lineno"> 8936</span>&#160;         connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = data[pos];</div><div class="line"><a name="l08937"></a><span class="lineno"> 8937</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l08938"></a><span class="lineno"> 8938</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876adaaecd6294b07e9205d24b19beb69ebf">AST_CONNECTED_LINE_NAME_VALID</a>:</div><div class="line"><a name="l08939"></a><span class="lineno"> 8939</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l08940"></a><span class="lineno"> 8940</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid connected line name valid (%u)\n&quot;</span>,</div><div class="line"><a name="l08941"></a><span class="lineno"> 8941</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l08942"></a><span class="lineno"> 8942</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l08943"></a><span class="lineno"> 8943</span>&#160;         }</div><div class="line"><a name="l08944"></a><span class="lineno"> 8944</span>&#160;         connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = data[pos];</div><div class="line"><a name="l08945"></a><span class="lineno"> 8945</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l08946"></a><span class="lineno"> 8946</span>&#160;<span class="comment">/* Connected line party id number */</span></div><div class="line"><a name="l08947"></a><span class="lineno"> 8947</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a7fa2503dc4dfb16153f519deeb2d47ec">AST_CONNECTED_LINE_NUMBER</a>:</div><div class="line"><a name="l08948"></a><span class="lineno"> 8948</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l08949"></a><span class="lineno"> 8949</span>&#160;         connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l08950"></a><span class="lineno"> 8950</span>&#160;         <span class="keywordflow">if</span> (connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l08951"></a><span class="lineno"> 8951</span>&#160;            memcpy(connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, data + pos, ie_len);</div><div class="line"><a name="l08952"></a><span class="lineno"> 8952</span>&#160;            connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>[ie_len] = 0;</div><div class="line"><a name="l08953"></a><span class="lineno"> 8953</span>&#160;         }</div><div class="line"><a name="l08954"></a><span class="lineno"> 8954</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l08955"></a><span class="lineno"> 8955</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876afd2a6c6f9e551dd448cbee52f03b546f">AST_CONNECTED_LINE_NUMBER_PLAN</a>:</div><div class="line"><a name="l08956"></a><span class="lineno"> 8956</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l08957"></a><span class="lineno"> 8957</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid connected line numbering plan (%u)\n&quot;</span>,</div><div class="line"><a name="l08958"></a><span class="lineno"> 8958</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l08959"></a><span class="lineno"> 8959</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l08960"></a><span class="lineno"> 8960</span>&#160;         }</div><div class="line"><a name="l08961"></a><span class="lineno"> 8961</span>&#160;         connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a> = data[pos];</div><div class="line"><a name="l08962"></a><span class="lineno"> 8962</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l08963"></a><span class="lineno"> 8963</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876ac36f6c6286e5e2522901d6e86e7745ab">AST_CONNECTED_LINE_NUMBER_PRESENTATION</a>:</div><div class="line"><a name="l08964"></a><span class="lineno"> 8964</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l08965"></a><span class="lineno"> 8965</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid connected line number presentation (%u)\n&quot;</span>,</div><div class="line"><a name="l08966"></a><span class="lineno"> 8966</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l08967"></a><span class="lineno"> 8967</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l08968"></a><span class="lineno"> 8968</span>&#160;         }</div><div class="line"><a name="l08969"></a><span class="lineno"> 8969</span>&#160;         connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = data[pos];</div><div class="line"><a name="l08970"></a><span class="lineno"> 8970</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l08971"></a><span class="lineno"> 8971</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a011704f0946d51ed30001afcce2f7f3d">AST_CONNECTED_LINE_NUMBER_VALID</a>:</div><div class="line"><a name="l08972"></a><span class="lineno"> 8972</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l08973"></a><span class="lineno"> 8973</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid connected line number valid (%u)\n&quot;</span>,</div><div class="line"><a name="l08974"></a><span class="lineno"> 8974</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l08975"></a><span class="lineno"> 8975</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l08976"></a><span class="lineno"> 8976</span>&#160;         }</div><div class="line"><a name="l08977"></a><span class="lineno"> 8977</span>&#160;         connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = data[pos];</div><div class="line"><a name="l08978"></a><span class="lineno"> 8978</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l08979"></a><span class="lineno"> 8979</span>&#160;<span class="comment">/* Connected line party id subaddress */</span></div><div class="line"><a name="l08980"></a><span class="lineno"> 8980</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a765889201caaff09b8cf5ee36f45f7d0">AST_CONNECTED_LINE_SUBADDRESS</a>:</div><div class="line"><a name="l08981"></a><span class="lineno"> 8981</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l08982"></a><span class="lineno"> 8982</span>&#160;         connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l08983"></a><span class="lineno"> 8983</span>&#160;         <span class="keywordflow">if</span> (connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l08984"></a><span class="lineno"> 8984</span>&#160;            memcpy(connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, data + pos, ie_len);</div><div class="line"><a name="l08985"></a><span class="lineno"> 8985</span>&#160;            connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>[ie_len] = 0;</div><div class="line"><a name="l08986"></a><span class="lineno"> 8986</span>&#160;         }</div><div class="line"><a name="l08987"></a><span class="lineno"> 8987</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l08988"></a><span class="lineno"> 8988</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876ad395bd248b37cc85f35d206c73a7c802">AST_CONNECTED_LINE_SUBADDRESS_TYPE</a>:</div><div class="line"><a name="l08989"></a><span class="lineno"> 8989</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l08990"></a><span class="lineno"> 8990</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid connected line type of subaddress (%u)\n&quot;</span>,</div><div class="line"><a name="l08991"></a><span class="lineno"> 8991</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l08992"></a><span class="lineno"> 8992</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l08993"></a><span class="lineno"> 8993</span>&#160;         }</div><div class="line"><a name="l08994"></a><span class="lineno"> 8994</span>&#160;         connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ac765329451135abec74c45e1897abf26">type</a> = data[pos];</div><div class="line"><a name="l08995"></a><span class="lineno"> 8995</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l08996"></a><span class="lineno"> 8996</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a70db77169415300aa82d2ec95028bd0b">AST_CONNECTED_LINE_SUBADDRESS_ODD_EVEN</a>:</div><div class="line"><a name="l08997"></a><span class="lineno"> 8997</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l08998"></a><span class="lineno"> 8998</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,</div><div class="line"><a name="l08999"></a><span class="lineno"> 8999</span>&#160;               <span class="stringliteral">&quot;Invalid connected line subaddress odd-even indicator (%u)\n&quot;</span>,</div><div class="line"><a name="l09000"></a><span class="lineno"> 9000</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09001"></a><span class="lineno"> 9001</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09002"></a><span class="lineno"> 9002</span>&#160;         }</div><div class="line"><a name="l09003"></a><span class="lineno"> 9003</span>&#160;         connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#a141590e40aa10259d3c0bc722725e7ad">odd_even_indicator</a> = data[pos];</div><div class="line"><a name="l09004"></a><span class="lineno"> 9004</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09005"></a><span class="lineno"> 9005</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a47c82e5bb9a7c433ff3083dc6e1cf6a3">AST_CONNECTED_LINE_SUBADDRESS_VALID</a>:</div><div class="line"><a name="l09006"></a><span class="lineno"> 9006</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09007"></a><span class="lineno"> 9007</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid connected line subaddress valid (%u)\n&quot;</span>,</div><div class="line"><a name="l09008"></a><span class="lineno"> 9008</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09009"></a><span class="lineno"> 9009</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09010"></a><span class="lineno"> 9010</span>&#160;         }</div><div class="line"><a name="l09011"></a><span class="lineno"> 9011</span>&#160;         connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = data[pos];</div><div class="line"><a name="l09012"></a><span class="lineno"> 9012</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09013"></a><span class="lineno"> 9013</span>&#160;<span class="comment">/* Connected line party tag */</span></div><div class="line"><a name="l09014"></a><span class="lineno"> 9014</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876abf320d7c90ab6439b6e4e6c214a9c30c">AST_CONNECTED_LINE_TAG</a>:</div><div class="line"><a name="l09015"></a><span class="lineno"> 9015</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>);</div><div class="line"><a name="l09016"></a><span class="lineno"> 9016</span>&#160;         connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l09017"></a><span class="lineno"> 9017</span>&#160;         <span class="keywordflow">if</span> (connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>) {</div><div class="line"><a name="l09018"></a><span class="lineno"> 9018</span>&#160;            memcpy(connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>, data + pos, ie_len);</div><div class="line"><a name="l09019"></a><span class="lineno"> 9019</span>&#160;            connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>[ie_len] = 0;</div><div class="line"><a name="l09020"></a><span class="lineno"> 9020</span>&#160;         }</div><div class="line"><a name="l09021"></a><span class="lineno"> 9021</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09022"></a><span class="lineno"> 9022</span>&#160;<span class="comment">/* Connected line party id combined presentation */</span></div><div class="line"><a name="l09023"></a><span class="lineno"> 9023</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a8614a42368ac70310dc91d345af2e4e3">AST_CONNECTED_LINE_ID_PRESENTATION</a>:</div><div class="line"><a name="l09024"></a><span class="lineno"> 9024</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09025"></a><span class="lineno"> 9025</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid connected line combined presentation (%u)\n&quot;</span>,</div><div class="line"><a name="l09026"></a><span class="lineno"> 9026</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09027"></a><span class="lineno"> 9027</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09028"></a><span class="lineno"> 9028</span>&#160;         }</div><div class="line"><a name="l09029"></a><span class="lineno"> 9029</span>&#160;         combined_presentation = data[pos];</div><div class="line"><a name="l09030"></a><span class="lineno"> 9030</span>&#160;         got_combined_presentation = 1;</div><div class="line"><a name="l09031"></a><span class="lineno"> 9031</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09032"></a><span class="lineno"> 9032</span>&#160;<span class="comment">/* Private connected line party id name */</span></div><div class="line"><a name="l09033"></a><span class="lineno"> 9033</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a976c12acdeab4bbcaa5dd70e9856b256">AST_CONNECTED_LINE_PRIV_NAME</a>:</div><div class="line"><a name="l09034"></a><span class="lineno"> 9034</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l09035"></a><span class="lineno"> 9035</span>&#160;         connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l09036"></a><span class="lineno"> 9036</span>&#160;         <span class="keywordflow">if</span> (connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l09037"></a><span class="lineno"> 9037</span>&#160;            memcpy(connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, data + pos, ie_len);</div><div class="line"><a name="l09038"></a><span class="lineno"> 9038</span>&#160;            connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>[ie_len] = 0;</div><div class="line"><a name="l09039"></a><span class="lineno"> 9039</span>&#160;         }</div><div class="line"><a name="l09040"></a><span class="lineno"> 9040</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09041"></a><span class="lineno"> 9041</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876acc43c58cebca3c782099a590cf07ddab">AST_CONNECTED_LINE_PRIV_NAME_CHAR_SET</a>:</div><div class="line"><a name="l09042"></a><span class="lineno"> 9042</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09043"></a><span class="lineno"> 9043</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid connected line private name char set (%u)\n&quot;</span>,</div><div class="line"><a name="l09044"></a><span class="lineno"> 9044</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09045"></a><span class="lineno"> 9045</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09046"></a><span class="lineno"> 9046</span>&#160;         }</div><div class="line"><a name="l09047"></a><span class="lineno"> 9047</span>&#160;         connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#a1fb9f03e5de01bf0a8f221e627fa9a7b">char_set</a> = data[pos];</div><div class="line"><a name="l09048"></a><span class="lineno"> 9048</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09049"></a><span class="lineno"> 9049</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a898aa5bd4f67835872f001534a5d0161">AST_CONNECTED_LINE_PRIV_NAME_PRESENTATION</a>:</div><div class="line"><a name="l09050"></a><span class="lineno"> 9050</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09051"></a><span class="lineno"> 9051</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid connected line private name presentation (%u)\n&quot;</span>,</div><div class="line"><a name="l09052"></a><span class="lineno"> 9052</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09053"></a><span class="lineno"> 9053</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09054"></a><span class="lineno"> 9054</span>&#160;         }</div><div class="line"><a name="l09055"></a><span class="lineno"> 9055</span>&#160;         connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = data[pos];</div><div class="line"><a name="l09056"></a><span class="lineno"> 9056</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09057"></a><span class="lineno"> 9057</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a0d3f08aab70c15ca65cafceda937166f">AST_CONNECTED_LINE_PRIV_NAME_VALID</a>:</div><div class="line"><a name="l09058"></a><span class="lineno"> 9058</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09059"></a><span class="lineno"> 9059</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid connected line private name valid (%u)\n&quot;</span>,</div><div class="line"><a name="l09060"></a><span class="lineno"> 9060</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09061"></a><span class="lineno"> 9061</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09062"></a><span class="lineno"> 9062</span>&#160;         }</div><div class="line"><a name="l09063"></a><span class="lineno"> 9063</span>&#160;         connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = data[pos];</div><div class="line"><a name="l09064"></a><span class="lineno"> 9064</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09065"></a><span class="lineno"> 9065</span>&#160;<span class="comment">/* Private connected line party id number */</span></div><div class="line"><a name="l09066"></a><span class="lineno"> 9066</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876af70cefebc95cfb5681aa190d04a57ea9">AST_CONNECTED_LINE_PRIV_NUMBER</a>:</div><div class="line"><a name="l09067"></a><span class="lineno"> 9067</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l09068"></a><span class="lineno"> 9068</span>&#160;         connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l09069"></a><span class="lineno"> 9069</span>&#160;         <span class="keywordflow">if</span> (connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l09070"></a><span class="lineno"> 9070</span>&#160;            memcpy(connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, data + pos, ie_len);</div><div class="line"><a name="l09071"></a><span class="lineno"> 9071</span>&#160;            connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>[ie_len] = 0;</div><div class="line"><a name="l09072"></a><span class="lineno"> 9072</span>&#160;         }</div><div class="line"><a name="l09073"></a><span class="lineno"> 9073</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09074"></a><span class="lineno"> 9074</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a7663d3f77bce64344e57586b48ac46a2">AST_CONNECTED_LINE_PRIV_NUMBER_PLAN</a>:</div><div class="line"><a name="l09075"></a><span class="lineno"> 9075</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09076"></a><span class="lineno"> 9076</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid connected line private numbering plan (%u)\n&quot;</span>,</div><div class="line"><a name="l09077"></a><span class="lineno"> 9077</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09078"></a><span class="lineno"> 9078</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09079"></a><span class="lineno"> 9079</span>&#160;         }</div><div class="line"><a name="l09080"></a><span class="lineno"> 9080</span>&#160;         connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a> = data[pos];</div><div class="line"><a name="l09081"></a><span class="lineno"> 9081</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09082"></a><span class="lineno"> 9082</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a28c6714cf6b9fc587d16be9b3800c354">AST_CONNECTED_LINE_PRIV_NUMBER_PRESENTATION</a>:</div><div class="line"><a name="l09083"></a><span class="lineno"> 9083</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09084"></a><span class="lineno"> 9084</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid connected line private number presentation (%u)\n&quot;</span>,</div><div class="line"><a name="l09085"></a><span class="lineno"> 9085</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09086"></a><span class="lineno"> 9086</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09087"></a><span class="lineno"> 9087</span>&#160;         }</div><div class="line"><a name="l09088"></a><span class="lineno"> 9088</span>&#160;         connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = data[pos];</div><div class="line"><a name="l09089"></a><span class="lineno"> 9089</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09090"></a><span class="lineno"> 9090</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876ac32bb54a3d7c59eb047ec4a278eef693">AST_CONNECTED_LINE_PRIV_NUMBER_VALID</a>:</div><div class="line"><a name="l09091"></a><span class="lineno"> 9091</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09092"></a><span class="lineno"> 9092</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid connected line private number valid (%u)\n&quot;</span>,</div><div class="line"><a name="l09093"></a><span class="lineno"> 9093</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09094"></a><span class="lineno"> 9094</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09095"></a><span class="lineno"> 9095</span>&#160;         }</div><div class="line"><a name="l09096"></a><span class="lineno"> 9096</span>&#160;         connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = data[pos];</div><div class="line"><a name="l09097"></a><span class="lineno"> 9097</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09098"></a><span class="lineno"> 9098</span>&#160;<span class="comment">/* Private connected line party id subaddress */</span></div><div class="line"><a name="l09099"></a><span class="lineno"> 9099</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876ad5aff16f5c624f934038fafb747e0d01">AST_CONNECTED_LINE_PRIV_SUBADDRESS</a>:</div><div class="line"><a name="l09100"></a><span class="lineno"> 9100</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l09101"></a><span class="lineno"> 9101</span>&#160;         connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l09102"></a><span class="lineno"> 9102</span>&#160;         <span class="keywordflow">if</span> (connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l09103"></a><span class="lineno"> 9103</span>&#160;            memcpy(connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, data + pos, ie_len);</div><div class="line"><a name="l09104"></a><span class="lineno"> 9104</span>&#160;            connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>[ie_len] = 0;</div><div class="line"><a name="l09105"></a><span class="lineno"> 9105</span>&#160;         }</div><div class="line"><a name="l09106"></a><span class="lineno"> 9106</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09107"></a><span class="lineno"> 9107</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a18f6cfd24ab8b44292cfd879eafa564a">AST_CONNECTED_LINE_PRIV_SUBADDRESS_TYPE</a>:</div><div class="line"><a name="l09108"></a><span class="lineno"> 9108</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09109"></a><span class="lineno"> 9109</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid connected line private type of subaddress (%u)\n&quot;</span>,</div><div class="line"><a name="l09110"></a><span class="lineno"> 9110</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09111"></a><span class="lineno"> 9111</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09112"></a><span class="lineno"> 9112</span>&#160;         }</div><div class="line"><a name="l09113"></a><span class="lineno"> 9113</span>&#160;         connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ac765329451135abec74c45e1897abf26">type</a> = data[pos];</div><div class="line"><a name="l09114"></a><span class="lineno"> 9114</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09115"></a><span class="lineno"> 9115</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a096336a324a96da5dc1d2889f2f23a95">AST_CONNECTED_LINE_PRIV_SUBADDRESS_ODD_EVEN</a>:</div><div class="line"><a name="l09116"></a><span class="lineno"> 9116</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09117"></a><span class="lineno"> 9117</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,</div><div class="line"><a name="l09118"></a><span class="lineno"> 9118</span>&#160;               <span class="stringliteral">&quot;Invalid connected line private subaddress odd-even indicator (%u)\n&quot;</span>,</div><div class="line"><a name="l09119"></a><span class="lineno"> 9119</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09120"></a><span class="lineno"> 9120</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09121"></a><span class="lineno"> 9121</span>&#160;         }</div><div class="line"><a name="l09122"></a><span class="lineno"> 9122</span>&#160;         connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#a141590e40aa10259d3c0bc722725e7ad">odd_even_indicator</a> = data[pos];</div><div class="line"><a name="l09123"></a><span class="lineno"> 9123</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09124"></a><span class="lineno"> 9124</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a08d8232b0bb99f13647a9ce5e0d11ed4">AST_CONNECTED_LINE_PRIV_SUBADDRESS_VALID</a>:</div><div class="line"><a name="l09125"></a><span class="lineno"> 9125</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09126"></a><span class="lineno"> 9126</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid connected line private subaddress valid (%u)\n&quot;</span>,</div><div class="line"><a name="l09127"></a><span class="lineno"> 9127</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09128"></a><span class="lineno"> 9128</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09129"></a><span class="lineno"> 9129</span>&#160;         }</div><div class="line"><a name="l09130"></a><span class="lineno"> 9130</span>&#160;         connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = data[pos];</div><div class="line"><a name="l09131"></a><span class="lineno"> 9131</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09132"></a><span class="lineno"> 9132</span>&#160;<span class="comment">/* Private connected line party tag */</span></div><div class="line"><a name="l09133"></a><span class="lineno"> 9133</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876ad8f108076857ba3a2944b7a63883f89f">AST_CONNECTED_LINE_PRIV_TAG</a>:</div><div class="line"><a name="l09134"></a><span class="lineno"> 9134</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>);</div><div class="line"><a name="l09135"></a><span class="lineno"> 9135</span>&#160;         connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l09136"></a><span class="lineno"> 9136</span>&#160;         <span class="keywordflow">if</span> (connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>) {</div><div class="line"><a name="l09137"></a><span class="lineno"> 9137</span>&#160;            memcpy(connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>, data + pos, ie_len);</div><div class="line"><a name="l09138"></a><span class="lineno"> 9138</span>&#160;            connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">priv</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>[ie_len] = 0;</div><div class="line"><a name="l09139"></a><span class="lineno"> 9139</span>&#160;         }</div><div class="line"><a name="l09140"></a><span class="lineno"> 9140</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09141"></a><span class="lineno"> 9141</span>&#160;<span class="comment">/* Connected line party source */</span></div><div class="line"><a name="l09142"></a><span class="lineno"> 9142</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a049542394a05e2be28526008e8f1eb78">AST_CONNECTED_LINE_SOURCE</a>:</div><div class="line"><a name="l09143"></a><span class="lineno"> 9143</span>&#160;         <span class="keywordflow">if</span> (ie_len != <span class="keyword">sizeof</span>(value)) {</div><div class="line"><a name="l09144"></a><span class="lineno"> 9144</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid connected line source (%u)\n&quot;</span>,</div><div class="line"><a name="l09145"></a><span class="lineno"> 9145</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09146"></a><span class="lineno"> 9146</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09147"></a><span class="lineno"> 9147</span>&#160;         }</div><div class="line"><a name="l09148"></a><span class="lineno"> 9148</span>&#160;         memcpy(&amp;value, data + pos, <span class="keyword">sizeof</span>(value));</div><div class="line"><a name="l09149"></a><span class="lineno"> 9149</span>&#160;         connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a07a87b2e6ed927503e2f95f119c9fc23">source</a> = ntohl(value);</div><div class="line"><a name="l09150"></a><span class="lineno"> 9150</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09151"></a><span class="lineno"> 9151</span>&#160;<span class="comment">/* Connected line party unknown element */</span></div><div class="line"><a name="l09152"></a><span class="lineno"> 9152</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l09153"></a><span class="lineno"> 9153</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Unknown connected line element: %u (%u)\n&quot;</span>,</div><div class="line"><a name="l09154"></a><span class="lineno"> 9154</span>&#160;            (<span class="keywordtype">unsigned</span>) ie_id, (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09155"></a><span class="lineno"> 9155</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09156"></a><span class="lineno"> 9156</span>&#160;      }</div><div class="line"><a name="l09157"></a><span class="lineno"> 9157</span>&#160;   }</div><div class="line"><a name="l09158"></a><span class="lineno"> 9158</span>&#160;</div><div class="line"><a name="l09159"></a><span class="lineno"> 9159</span>&#160;   <span class="keywordflow">switch</span> (frame_version) {</div><div class="line"><a name="l09160"></a><span class="lineno"> 9160</span>&#160;   <span class="keywordflow">case</span> 1:</div><div class="line"><a name="l09161"></a><span class="lineno"> 9161</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l09162"></a><span class="lineno"> 9162</span>&#160;<span class="comment">       * The other end is an earlier version that we need to adjust</span></div><div class="line"><a name="l09163"></a><span class="lineno"> 9163</span>&#160;<span class="comment">       * for compatibility.</span></div><div class="line"><a name="l09164"></a><span class="lineno"> 9164</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l09165"></a><span class="lineno"> 9165</span>&#160;      connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = 1;</div><div class="line"><a name="l09166"></a><span class="lineno"> 9166</span>&#160;      connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#a1fb9f03e5de01bf0a8f221e627fa9a7b">char_set</a> = <a class="code" href="../../d5/d7b/channel_8h.html#aa36854cfee90c77c4124e94273e42dffae83dea89fd3ea1272aca35be3e9767e9">AST_PARTY_CHAR_SET_ISO8859_1</a>;</div><div class="line"><a name="l09167"></a><span class="lineno"> 9167</span>&#160;      connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = 1;</div><div class="line"><a name="l09168"></a><span class="lineno"> 9168</span>&#160;      <span class="keywordflow">if</span> (got_combined_presentation) {</div><div class="line"><a name="l09169"></a><span class="lineno"> 9169</span>&#160;         connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = <a class="code" href="../../d5/d23/structast__party__id__ies.html#a8993e50df9b0cec283d52de46d949283">combined_presentation</a>;</div><div class="line"><a name="l09170"></a><span class="lineno"> 9170</span>&#160;         connected-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = <a class="code" href="../../d5/d23/structast__party__id__ies.html#a8993e50df9b0cec283d52de46d949283">combined_presentation</a>;</div><div class="line"><a name="l09171"></a><span class="lineno"> 9171</span>&#160;      }</div><div class="line"><a name="l09172"></a><span class="lineno"> 9172</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09173"></a><span class="lineno"> 9173</span>&#160;   <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l09174"></a><span class="lineno"> 9174</span>&#160;      <span class="comment">/* The other end is at the same level as we are. */</span></div><div class="line"><a name="l09175"></a><span class="lineno"> 9175</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09176"></a><span class="lineno"> 9176</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l09177"></a><span class="lineno"> 9177</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l09178"></a><span class="lineno"> 9178</span>&#160;<span class="comment">       * The other end is newer than we are.</span></div><div class="line"><a name="l09179"></a><span class="lineno"> 9179</span>&#160;<span class="comment">       * We need to assume that they are compatible with us.</span></div><div class="line"><a name="l09180"></a><span class="lineno"> 9180</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l09181"></a><span class="lineno"> 9181</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Connected line frame has newer version: %u\n&quot;</span>,</div><div class="line"><a name="l09182"></a><span class="lineno"> 9182</span>&#160;         (<span class="keywordtype">unsigned</span>) frame_version);</div><div class="line"><a name="l09183"></a><span class="lineno"> 9183</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l09184"></a><span class="lineno"> 9184</span>&#160;   }</div><div class="line"><a name="l09185"></a><span class="lineno"> 9185</span>&#160;</div><div class="line"><a name="l09186"></a><span class="lineno"> 9186</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l09187"></a><span class="lineno"> 9187</span>&#160;}</div><div class="line"><a name="l09188"></a><span class="lineno"> 9188</span>&#160;</div><div class="line"><a name="l09189"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a7ee3ff7bf7773329e9e20143f0ba2f69"> 9189</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a7ee3ff7bf7773329e9e20143f0ba2f69">ast_channel_update_connected_line</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a5023e29d4234076952bfecfff178b566">connected</a>, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/dc9/structast__set__party__connected__line.html">ast_set_party_connected_line</a> *<a class="code" href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a>)</div><div class="line"><a name="l09190"></a><span class="lineno"> 9190</span>&#160;{</div><div class="line"><a name="l09191"></a><span class="lineno"> 9191</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> data[1024];  <span class="comment">/* This should be large enough */</span></div><div class="line"><a name="l09192"></a><span class="lineno"> 9192</span>&#160;   <span class="keywordtype">size_t</span> datalen;</div><div class="line"><a name="l09193"></a><span class="lineno"> 9193</span>&#160;</div><div class="line"><a name="l09194"></a><span class="lineno"> 9194</span>&#160;   datalen = <a class="code" href="../../d4/d28/channel_8c.html#ab380c81e4514ab48ca8402f7950a354a">ast_connected_line_build_data</a>(data, <span class="keyword">sizeof</span>(data), connected, update);</div><div class="line"><a name="l09195"></a><span class="lineno"> 9195</span>&#160;   <span class="keywordflow">if</span> (datalen == (<span class="keywordtype">size_t</span>) -1) {</div><div class="line"><a name="l09196"></a><span class="lineno"> 9196</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l09197"></a><span class="lineno"> 9197</span>&#160;   }</div><div class="line"><a name="l09198"></a><span class="lineno"> 9198</span>&#160;</div><div class="line"><a name="l09199"></a><span class="lineno"> 9199</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#acea4077a84f9d8ffac3c41bf660e3219">ast_indicate_data</a>(chan, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac976c01c12ae70e36b99b16dbfa3dda7">AST_CONTROL_CONNECTED_LINE</a>, data, datalen);</div><div class="line"><a name="l09200"></a><span class="lineno"> 9200</span>&#160;}</div><div class="line"><a name="l09201"></a><span class="lineno"> 9201</span>&#160;</div><div class="line"><a name="l09202"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ade57349a78b2f32d3a7d1bc01fb3bf96"> 9202</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#ade57349a78b2f32d3a7d1bc01fb3bf96">ast_channel_queue_connected_line_update</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a5023e29d4234076952bfecfff178b566">connected</a>, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/dc9/structast__set__party__connected__line.html">ast_set_party_connected_line</a> *<a class="code" href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a>)</div><div class="line"><a name="l09203"></a><span class="lineno"> 9203</span>&#160;{</div><div class="line"><a name="l09204"></a><span class="lineno"> 9204</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> data[1024];  <span class="comment">/* This should be large enough */</span></div><div class="line"><a name="l09205"></a><span class="lineno"> 9205</span>&#160;   <span class="keywordtype">size_t</span> datalen;</div><div class="line"><a name="l09206"></a><span class="lineno"> 9206</span>&#160;</div><div class="line"><a name="l09207"></a><span class="lineno"> 9207</span>&#160;   datalen = <a class="code" href="../../d4/d28/channel_8c.html#ab380c81e4514ab48ca8402f7950a354a">ast_connected_line_build_data</a>(data, <span class="keyword">sizeof</span>(data), connected, update);</div><div class="line"><a name="l09208"></a><span class="lineno"> 9208</span>&#160;   <span class="keywordflow">if</span> (datalen == (<span class="keywordtype">size_t</span>) -1) {</div><div class="line"><a name="l09209"></a><span class="lineno"> 9209</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l09210"></a><span class="lineno"> 9210</span>&#160;   }</div><div class="line"><a name="l09211"></a><span class="lineno"> 9211</span>&#160;</div><div class="line"><a name="l09212"></a><span class="lineno"> 9212</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a7e5e15c22564fd66351d332ad10658b5">ast_queue_control_data</a>(chan, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac976c01c12ae70e36b99b16dbfa3dda7">AST_CONTROL_CONNECTED_LINE</a>, data, datalen);</div><div class="line"><a name="l09213"></a><span class="lineno"> 9213</span>&#160;}</div><div class="line"><a name="l09214"></a><span class="lineno"> 9214</span>&#160;</div><div class="line"><a name="l09215"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a1cb98e78f1231d96dad09ddaeaf0981d"> 9215</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a1cb98e78f1231d96dad09ddaeaf0981d">ast_channel_set_redirecting</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/d44/structast__party__redirecting.html">ast_party_redirecting</a> *redirecting, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../de/df8/structast__set__party__redirecting.html">ast_set_party_redirecting</a> *<a class="code" href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a>)</div><div class="line"><a name="l09216"></a><span class="lineno"> 9216</span>&#160;{</div><div class="line"><a name="l09217"></a><span class="lineno"> 9217</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(chan) == redirecting) {</div><div class="line"><a name="l09218"></a><span class="lineno"> 9218</span>&#160;      <span class="comment">/* Don&#39;t set to self */</span></div><div class="line"><a name="l09219"></a><span class="lineno"> 9219</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l09220"></a><span class="lineno"> 9220</span>&#160;   }</div><div class="line"><a name="l09221"></a><span class="lineno"> 9221</span>&#160;</div><div class="line"><a name="l09222"></a><span class="lineno"> 9222</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l09223"></a><span class="lineno"> 9223</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a4a3691a88a747dd6ceec6cc17628402f">ast_party_redirecting_set</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(chan), redirecting, update);</div><div class="line"><a name="l09224"></a><span class="lineno"> 9224</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga5c533cb6116415f52f137ea431afe9e3">ast_channel_snapshot_invalidate_segment</a>(chan, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ggae4d6df086e192d70f732e3ce8a5a2210a06fc3d57de686a0838563fb1cd0c25d8">AST_CHANNEL_SNAPSHOT_INVALIDATE_CALLER</a>);</div><div class="line"><a name="l09225"></a><span class="lineno"> 9225</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l09226"></a><span class="lineno"> 9226</span>&#160;}</div><div class="line"><a name="l09227"></a><span class="lineno"> 9227</span>&#160;<span class="comment"></span></div><div class="line"><a name="l09228"></a><span class="lineno"> 9228</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l09229"></a><span class="lineno"> 9229</span>&#160;<span class="comment"> * \brief Element identifiers for redirecting indication frame data</span></div><div class="line"><a name="l09230"></a><span class="lineno"> 9230</span>&#160;<span class="comment"> * \note Only add to the end of this enum.</span></div><div class="line"><a name="l09231"></a><span class="lineno"> 9231</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l09232"></a><span class="lineno"> 9232</span>&#160;<span class="keyword">enum</span> {</div><div class="line"><a name="l09233"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ae45642d62d251e74f63046bef953c5c9"> 9233</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ae45642d62d251e74f63046bef953c5c9">AST_REDIRECTING_FROM_NUMBER</a>,</div><div class="line"><a name="l09234"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ac5112be19c8d91662fe0004f75f617d8"> 9234</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ac5112be19c8d91662fe0004f75f617d8">AST_REDIRECTING_FROM_NAME</a>,</div><div class="line"><a name="l09235"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a11a85e8e51317d5b57317a761c8e6921"> 9235</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a11a85e8e51317d5b57317a761c8e6921">AST_REDIRECTING_FROM_NUMBER_PLAN</a>,</div><div class="line"><a name="l09236"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a6e7abe0b2f38c10fc8291690362e1864"> 9236</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a6e7abe0b2f38c10fc8291690362e1864">AST_REDIRECTING_FROM_ID_PRESENTATION</a>,<span class="comment">/* Combined number and name presentation. */</span></div><div class="line"><a name="l09237"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a667da7258b9fb30232ba5371a691aa9b"> 9237</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a667da7258b9fb30232ba5371a691aa9b">AST_REDIRECTING_TO_NUMBER</a>,</div><div class="line"><a name="l09238"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a02797e73caf534e0d40baa6f03e3d3f4"> 9238</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a02797e73caf534e0d40baa6f03e3d3f4">AST_REDIRECTING_TO_NAME</a>,</div><div class="line"><a name="l09239"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a4e7a7b87975e192e7b0e52a3da89b5b6"> 9239</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a4e7a7b87975e192e7b0e52a3da89b5b6">AST_REDIRECTING_TO_NUMBER_PLAN</a>,</div><div class="line"><a name="l09240"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a8ee7de1f9dc8459b1e5bfb4c8cbd8b1a"> 9240</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a8ee7de1f9dc8459b1e5bfb4c8cbd8b1a">AST_REDIRECTING_TO_ID_PRESENTATION</a>,<span class="comment">/* Combined number and name presentation. */</span></div><div class="line"><a name="l09241"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a19de60b6d2aae3f71433113ee02dbdf7"> 9241</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a19de60b6d2aae3f71433113ee02dbdf7">AST_REDIRECTING_REASON_CODE</a>,</div><div class="line"><a name="l09242"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a86383247bc5ded6d5522d25139a71f4e"> 9242</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a86383247bc5ded6d5522d25139a71f4e">AST_REDIRECTING_COUNT</a>,</div><div class="line"><a name="l09243"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a870806e047987e8783b016efc0b89d7d"> 9243</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a870806e047987e8783b016efc0b89d7d">AST_REDIRECTING_FROM_SUBADDRESS</a>,</div><div class="line"><a name="l09244"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a8339363342c936dff645699b6018ee61"> 9244</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a8339363342c936dff645699b6018ee61">AST_REDIRECTING_FROM_SUBADDRESS_TYPE</a>,</div><div class="line"><a name="l09245"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aec8bf7b5a59cb1e1f66144d23f637135"> 9245</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aec8bf7b5a59cb1e1f66144d23f637135">AST_REDIRECTING_FROM_SUBADDRESS_ODD_EVEN</a>,</div><div class="line"><a name="l09246"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a791a8bb58907175482ac845835c0c678"> 9246</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a791a8bb58907175482ac845835c0c678">AST_REDIRECTING_FROM_SUBADDRESS_VALID</a>,</div><div class="line"><a name="l09247"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792af1daee1466e8256b8ca40f3aaa44aae9"> 9247</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792af1daee1466e8256b8ca40f3aaa44aae9">AST_REDIRECTING_TO_SUBADDRESS</a>,</div><div class="line"><a name="l09248"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ac4425cf0f406dd0bf341beb87c8e8b5f"> 9248</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ac4425cf0f406dd0bf341beb87c8e8b5f">AST_REDIRECTING_TO_SUBADDRESS_TYPE</a>,</div><div class="line"><a name="l09249"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a3b3724a87f3c5bfd700091011e01e0df"> 9249</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a3b3724a87f3c5bfd700091011e01e0df">AST_REDIRECTING_TO_SUBADDRESS_ODD_EVEN</a>,</div><div class="line"><a name="l09250"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ac17c7d55ca7591ced257a733db5e551f"> 9250</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ac17c7d55ca7591ced257a733db5e551f">AST_REDIRECTING_TO_SUBADDRESS_VALID</a>,</div><div class="line"><a name="l09251"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a586c5b85860b6b141d950b7927b85d0a"> 9251</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a586c5b85860b6b141d950b7927b85d0a">AST_REDIRECTING_FROM_TAG</a>,</div><div class="line"><a name="l09252"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a09aa0e37716fdb65f50ee1c33c48093a"> 9252</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a09aa0e37716fdb65f50ee1c33c48093a">AST_REDIRECTING_TO_TAG</a>,</div><div class="line"><a name="l09253"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a047c4250fa40757e25c1a41549d1678d"> 9253</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a047c4250fa40757e25c1a41549d1678d">AST_REDIRECTING_VERSION</a>,</div><div class="line"><a name="l09254"></a><span class="lineno"> 9254</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l09255"></a><span class="lineno"> 9255</span>&#160;<span class="comment">    * No more party id combined number and name presentation values</span></div><div class="line"><a name="l09256"></a><span class="lineno"> 9256</span>&#160;<span class="comment">    * need to be created.</span></div><div class="line"><a name="l09257"></a><span class="lineno"> 9257</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l09258"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a7ac0a7bfda5149c11a42afc070d8b39a"> 9258</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a7ac0a7bfda5149c11a42afc070d8b39a">AST_REDIRECTING_FROM_NAME_VALID</a>,</div><div class="line"><a name="l09259"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a6a1b17f93a20f21bf186af1b5994ab00"> 9259</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a6a1b17f93a20f21bf186af1b5994ab00">AST_REDIRECTING_FROM_NAME_CHAR_SET</a>,</div><div class="line"><a name="l09260"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a01a4aa5b3dc6e6ebadb3c7b93a313668"> 9260</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a01a4aa5b3dc6e6ebadb3c7b93a313668">AST_REDIRECTING_FROM_NAME_PRESENTATION</a>,</div><div class="line"><a name="l09261"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a3458c569979f7c11bb5a8a638748c128"> 9261</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a3458c569979f7c11bb5a8a638748c128">AST_REDIRECTING_FROM_NUMBER_VALID</a>,</div><div class="line"><a name="l09262"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a2bc1562da560648c0471d7d8e74ce7ff"> 9262</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a2bc1562da560648c0471d7d8e74ce7ff">AST_REDIRECTING_FROM_NUMBER_PRESENTATION</a>,</div><div class="line"><a name="l09263"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a38eedeffc3b8c533b3d4d885a401fcf2"> 9263</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a38eedeffc3b8c533b3d4d885a401fcf2">AST_REDIRECTING_TO_NAME_VALID</a>,</div><div class="line"><a name="l09264"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792af393eae44971089a6f6c075e0dc280f7"> 9264</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792af393eae44971089a6f6c075e0dc280f7">AST_REDIRECTING_TO_NAME_CHAR_SET</a>,</div><div class="line"><a name="l09265"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a2236897b5f92120e3f949c4e2fa08d8e"> 9265</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a2236897b5f92120e3f949c4e2fa08d8e">AST_REDIRECTING_TO_NAME_PRESENTATION</a>,</div><div class="line"><a name="l09266"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a777afaccdfee5a46245cedbb2e859acd"> 9266</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a777afaccdfee5a46245cedbb2e859acd">AST_REDIRECTING_TO_NUMBER_VALID</a>,</div><div class="line"><a name="l09267"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ae132d231e169ff864606c416bf2b5b25"> 9267</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ae132d231e169ff864606c416bf2b5b25">AST_REDIRECTING_TO_NUMBER_PRESENTATION</a>,</div><div class="line"><a name="l09268"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aad9cb668db1da7081ab78c0fe126e1fa"> 9268</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aad9cb668db1da7081ab78c0fe126e1fa">AST_REDIRECTING_ORIG_NUMBER</a>,</div><div class="line"><a name="l09269"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a2aaaaeed05df585c75e3930a51e63e65"> 9269</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a2aaaaeed05df585c75e3930a51e63e65">AST_REDIRECTING_ORIG_NUMBER_VALID</a>,</div><div class="line"><a name="l09270"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ae4c88e98038cbcde758114eb2b3bc805"> 9270</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ae4c88e98038cbcde758114eb2b3bc805">AST_REDIRECTING_ORIG_NUMBER_PLAN</a>,</div><div class="line"><a name="l09271"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792adadd765c09505110715245dd132a7eb9"> 9271</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792adadd765c09505110715245dd132a7eb9">AST_REDIRECTING_ORIG_NUMBER_PRESENTATION</a>,</div><div class="line"><a name="l09272"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a542fff7c60e1adb2cfdb8ec7374f405a"> 9272</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a542fff7c60e1adb2cfdb8ec7374f405a">AST_REDIRECTING_ORIG_NAME</a>,</div><div class="line"><a name="l09273"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a8ce72111eb5b123e60d20805d5fec33a"> 9273</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a8ce72111eb5b123e60d20805d5fec33a">AST_REDIRECTING_ORIG_NAME_VALID</a>,</div><div class="line"><a name="l09274"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a4c11b286f8baee30d3b56a2c31fe26a6"> 9274</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a4c11b286f8baee30d3b56a2c31fe26a6">AST_REDIRECTING_ORIG_NAME_CHAR_SET</a>,</div><div class="line"><a name="l09275"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aa69ffee94d2e9d2e61ffc6001b6d21cb"> 9275</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aa69ffee94d2e9d2e61ffc6001b6d21cb">AST_REDIRECTING_ORIG_NAME_PRESENTATION</a>,</div><div class="line"><a name="l09276"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a5841e97e13068cfd2102214ba2ea123c"> 9276</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a5841e97e13068cfd2102214ba2ea123c">AST_REDIRECTING_ORIG_SUBADDRESS</a>,</div><div class="line"><a name="l09277"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a698ba152c9d2f83238f68027489fec8a"> 9277</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a698ba152c9d2f83238f68027489fec8a">AST_REDIRECTING_ORIG_SUBADDRESS_TYPE</a>,</div><div class="line"><a name="l09278"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a3ec117aa2243c795905553454c5d114b"> 9278</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a3ec117aa2243c795905553454c5d114b">AST_REDIRECTING_ORIG_SUBADDRESS_ODD_EVEN</a>,</div><div class="line"><a name="l09279"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a325c1d3b34c0636fe2dcf4a7224515de"> 9279</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a325c1d3b34c0636fe2dcf4a7224515de">AST_REDIRECTING_ORIG_SUBADDRESS_VALID</a>,</div><div class="line"><a name="l09280"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a188aabe2f4692c9d4426d6bec1b8202f"> 9280</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a188aabe2f4692c9d4426d6bec1b8202f">AST_REDIRECTING_ORIG_TAG</a>,</div><div class="line"><a name="l09281"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a217ddb753acbccd09362ef45581906ce"> 9281</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a217ddb753acbccd09362ef45581906ce">AST_REDIRECTING_ORIG_REASON_CODE</a>,</div><div class="line"><a name="l09282"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a4e7df166afca82e85b8faa06d74c68f5"> 9282</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a4e7df166afca82e85b8faa06d74c68f5">AST_REDIRECTING_PRIV_TO_NUMBER</a>,</div><div class="line"><a name="l09283"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a748b91a64b30f68c8f3bd4b587c9367a"> 9283</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a748b91a64b30f68c8f3bd4b587c9367a">AST_REDIRECTING_PRIV_TO_NUMBER_PLAN</a>,</div><div class="line"><a name="l09284"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a20737f3984b4c9fec91da715ce4e22d5"> 9284</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a20737f3984b4c9fec91da715ce4e22d5">AST_REDIRECTING_PRIV_TO_NUMBER_VALID</a>,</div><div class="line"><a name="l09285"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a20b9655c65064608e5a64eb4d905260b"> 9285</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a20b9655c65064608e5a64eb4d905260b">AST_REDIRECTING_PRIV_TO_NUMBER_PRESENTATION</a>,</div><div class="line"><a name="l09286"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a282adacfb7cb1cd3c0ce2eb63bbf282f"> 9286</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a282adacfb7cb1cd3c0ce2eb63bbf282f">AST_REDIRECTING_PRIV_TO_NAME</a>,</div><div class="line"><a name="l09287"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a11d7be890d1517ea33fc69f3d07353d9"> 9287</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a11d7be890d1517ea33fc69f3d07353d9">AST_REDIRECTING_PRIV_TO_NAME_VALID</a>,</div><div class="line"><a name="l09288"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a7baecd23e0e111ddbc23ce2c4f3d92da"> 9288</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a7baecd23e0e111ddbc23ce2c4f3d92da">AST_REDIRECTING_PRIV_TO_NAME_CHAR_SET</a>,</div><div class="line"><a name="l09289"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a913527aea7faf5dde5462bd05d51b0eb"> 9289</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a913527aea7faf5dde5462bd05d51b0eb">AST_REDIRECTING_PRIV_TO_NAME_PRESENTATION</a>,</div><div class="line"><a name="l09290"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792add63ae196eae92e71526f2d49fbd4721"> 9290</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792add63ae196eae92e71526f2d49fbd4721">AST_REDIRECTING_PRIV_TO_SUBADDRESS</a>,</div><div class="line"><a name="l09291"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ab6192c2ae240ba9e051951dba6b85da0"> 9291</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ab6192c2ae240ba9e051951dba6b85da0">AST_REDIRECTING_PRIV_TO_SUBADDRESS_TYPE</a>,</div><div class="line"><a name="l09292"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a47d957ec421660fd81a6f52940bc9945"> 9292</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a47d957ec421660fd81a6f52940bc9945">AST_REDIRECTING_PRIV_TO_SUBADDRESS_ODD_EVEN</a>,</div><div class="line"><a name="l09293"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a465958f253dbce8a201319658ca99750"> 9293</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a465958f253dbce8a201319658ca99750">AST_REDIRECTING_PRIV_TO_SUBADDRESS_VALID</a>,</div><div class="line"><a name="l09294"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a83603fdcfd14d19e521ce76a53feb588"> 9294</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a83603fdcfd14d19e521ce76a53feb588">AST_REDIRECTING_PRIV_TO_TAG</a>,</div><div class="line"><a name="l09295"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a6eba7d36a20eb665e7680cdbf0c834c2"> 9295</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a6eba7d36a20eb665e7680cdbf0c834c2">AST_REDIRECTING_PRIV_FROM_NUMBER</a>,</div><div class="line"><a name="l09296"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a902377dfc1e6013af292a6f98ce86bd3"> 9296</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a902377dfc1e6013af292a6f98ce86bd3">AST_REDIRECTING_PRIV_FROM_NUMBER_PLAN</a>,</div><div class="line"><a name="l09297"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a5170789fcd157d0315387dbef005e043"> 9297</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a5170789fcd157d0315387dbef005e043">AST_REDIRECTING_PRIV_FROM_NUMBER_VALID</a>,</div><div class="line"><a name="l09298"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a95721650e26cbcb734ce91616e63ca68"> 9298</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a95721650e26cbcb734ce91616e63ca68">AST_REDIRECTING_PRIV_FROM_NUMBER_PRESENTATION</a>,</div><div class="line"><a name="l09299"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a39596e00e2981e5823aba4c98f6d16da"> 9299</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a39596e00e2981e5823aba4c98f6d16da">AST_REDIRECTING_PRIV_FROM_NAME</a>,</div><div class="line"><a name="l09300"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a05cc70ee1519ce1ffb687121f68df1a7"> 9300</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a05cc70ee1519ce1ffb687121f68df1a7">AST_REDIRECTING_PRIV_FROM_NAME_VALID</a>,</div><div class="line"><a name="l09301"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aabf14af13b81b7fe33a14afcf6ca2bf2"> 9301</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aabf14af13b81b7fe33a14afcf6ca2bf2">AST_REDIRECTING_PRIV_FROM_NAME_CHAR_SET</a>,</div><div class="line"><a name="l09302"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a9c09b93677bac821db85f7e194d3ea89"> 9302</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a9c09b93677bac821db85f7e194d3ea89">AST_REDIRECTING_PRIV_FROM_NAME_PRESENTATION</a>,</div><div class="line"><a name="l09303"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a4cc3a70dcfd5c3a977cfdcf2a75d8527"> 9303</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a4cc3a70dcfd5c3a977cfdcf2a75d8527">AST_REDIRECTING_PRIV_FROM_SUBADDRESS</a>,</div><div class="line"><a name="l09304"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a41dadfb835cc19fb7a62c63f2fe18d3e"> 9304</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a41dadfb835cc19fb7a62c63f2fe18d3e">AST_REDIRECTING_PRIV_FROM_SUBADDRESS_TYPE</a>,</div><div class="line"><a name="l09305"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a08b21da6da6f41c2b10d83a84fa2e016"> 9305</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a08b21da6da6f41c2b10d83a84fa2e016">AST_REDIRECTING_PRIV_FROM_SUBADDRESS_ODD_EVEN</a>,</div><div class="line"><a name="l09306"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ad8975c2a6f9f8304424931e420033788"> 9306</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ad8975c2a6f9f8304424931e420033788">AST_REDIRECTING_PRIV_FROM_SUBADDRESS_VALID</a>,</div><div class="line"><a name="l09307"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a6b3add43c84e8c9d1c420c46786d6600"> 9307</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a6b3add43c84e8c9d1c420c46786d6600">AST_REDIRECTING_PRIV_FROM_TAG</a>,</div><div class="line"><a name="l09308"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aca60d67300bbb8a4c85a0b61c597bed6"> 9308</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aca60d67300bbb8a4c85a0b61c597bed6">AST_REDIRECTING_PRIV_ORIG_NUMBER</a>,</div><div class="line"><a name="l09309"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792abdf50828de27e42f1e70b612bb1003c5"> 9309</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792abdf50828de27e42f1e70b612bb1003c5">AST_REDIRECTING_PRIV_ORIG_NUMBER_VALID</a>,</div><div class="line"><a name="l09310"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a5d643c7233f1c4f3c3780ab92b68fc38"> 9310</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a5d643c7233f1c4f3c3780ab92b68fc38">AST_REDIRECTING_PRIV_ORIG_NUMBER_PLAN</a>,</div><div class="line"><a name="l09311"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792abec9b47588bcb77c6ce5878e2bba53b3"> 9311</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792abec9b47588bcb77c6ce5878e2bba53b3">AST_REDIRECTING_PRIV_ORIG_NUMBER_PRESENTATION</a>,</div><div class="line"><a name="l09312"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aaddd1dfb5bf6cb498482095157f30694"> 9312</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aaddd1dfb5bf6cb498482095157f30694">AST_REDIRECTING_PRIV_ORIG_NAME</a>,</div><div class="line"><a name="l09313"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a2a6d2953d32856d91573ff12343be620"> 9313</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a2a6d2953d32856d91573ff12343be620">AST_REDIRECTING_PRIV_ORIG_NAME_VALID</a>,</div><div class="line"><a name="l09314"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a8a34f9064e5ebb6712635180d1b50e18"> 9314</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a8a34f9064e5ebb6712635180d1b50e18">AST_REDIRECTING_PRIV_ORIG_NAME_CHAR_SET</a>,</div><div class="line"><a name="l09315"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ae0e76bbbf85849ec57854baf6209d9dc"> 9315</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ae0e76bbbf85849ec57854baf6209d9dc">AST_REDIRECTING_PRIV_ORIG_NAME_PRESENTATION</a>,</div><div class="line"><a name="l09316"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aef98a6b6c42a63441c640308a23b8dc6"> 9316</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aef98a6b6c42a63441c640308a23b8dc6">AST_REDIRECTING_PRIV_ORIG_SUBADDRESS</a>,</div><div class="line"><a name="l09317"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a9cfe7eb77fd0a8715633cc805b680e4b"> 9317</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a9cfe7eb77fd0a8715633cc805b680e4b">AST_REDIRECTING_PRIV_ORIG_SUBADDRESS_TYPE</a>,</div><div class="line"><a name="l09318"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a18cf70ed9355f9f7ed5b1ec5615752f1"> 9318</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a18cf70ed9355f9f7ed5b1ec5615752f1">AST_REDIRECTING_PRIV_ORIG_SUBADDRESS_ODD_EVEN</a>,</div><div class="line"><a name="l09319"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ac249420ccee43b9f681e103696c54fd9"> 9319</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ac249420ccee43b9f681e103696c54fd9">AST_REDIRECTING_PRIV_ORIG_SUBADDRESS_VALID</a>,</div><div class="line"><a name="l09320"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a81210231d9c339ed4486e64243381cf7"> 9320</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a81210231d9c339ed4486e64243381cf7">AST_REDIRECTING_PRIV_ORIG_TAG</a>,</div><div class="line"><a name="l09321"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ac4a794763603856469df065a36f2474e"> 9321</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ac4a794763603856469df065a36f2474e">AST_REDIRECTING_REASON_STR</a>,</div><div class="line"><a name="l09322"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aa5cd96e496cdbb109fe8c75f5b93b54d"> 9322</a></span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aa5cd96e496cdbb109fe8c75f5b93b54d">AST_REDIRECTING_ORIG_REASON_STR</a>,</div><div class="line"><a name="l09323"></a><span class="lineno"> 9323</span>&#160;};</div><div class="line"><a name="l09324"></a><span class="lineno"> 9324</span>&#160;</div><div class="line"><a name="l09325"></a><span class="lineno"><a class="line" href="../../d0/dbd/structast__party__redirecting__reason__ies.html"> 9325</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d0/dbd/structast__party__redirecting__reason__ies.html">ast_party_redirecting_reason_ies</a> {</div><div class="line"><a name="l09326"></a><span class="lineno"><a class="line" href="../../d0/dbd/structast__party__redirecting__reason__ies.html#a45a5b7c00a796a23f01673cef1dbe0a9"> 9326</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d0/dbd/structast__party__redirecting__reason__ies.html#a45a5b7c00a796a23f01673cef1dbe0a9">code</a>;</div><div class="line"><a name="l09327"></a><span class="lineno"><a class="line" href="../../d0/dbd/structast__party__redirecting__reason__ies.html#aba03208f197d75b6e355ba9b2ae08ab5"> 9327</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d0/dbd/structast__party__redirecting__reason__ies.html#aba03208f197d75b6e355ba9b2ae08ab5">str</a>;</div><div class="line"><a name="l09328"></a><span class="lineno"> 9328</span>&#160;};</div><div class="line"><a name="l09329"></a><span class="lineno"> 9329</span>&#160;</div><div class="line"><a name="l09330"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#acde3e8b33bfcbd2e77f66e5270a58724"> 9330</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#acde3e8b33bfcbd2e77f66e5270a58724">redirecting_reason_build_data</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *data, <span class="keywordtype">size_t</span> datalen,</div><div class="line"><a name="l09331"></a><span class="lineno"> 9331</span>&#160;      <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d1/dee/structast__party__redirecting__reason.html">ast_party_redirecting_reason</a> *reason, <span class="keyword">const</span> <span class="keywordtype">char</span> *label,</div><div class="line"><a name="l09332"></a><span class="lineno"> 9332</span>&#160;      <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d0/dbd/structast__party__redirecting__reason__ies.html">ast_party_redirecting_reason_ies</a> *ies)</div><div class="line"><a name="l09333"></a><span class="lineno"> 9333</span>&#160;{</div><div class="line"><a name="l09334"></a><span class="lineno"> 9334</span>&#160;   <span class="keywordtype">size_t</span> length;</div><div class="line"><a name="l09335"></a><span class="lineno"> 9335</span>&#160;   <span class="keywordtype">size_t</span> pos = 0;</div><div class="line"><a name="l09336"></a><span class="lineno"> 9336</span>&#160;   <a class="code" href="../../da/d4e/db_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;</div><div class="line"><a name="l09337"></a><span class="lineno"> 9337</span>&#160;</div><div class="line"><a name="l09338"></a><span class="lineno"> 9338</span>&#160;   <span class="keywordflow">if</span> (datalen &lt; pos + (<span class="keyword">sizeof</span>(data[0]) * 2) + <span class="keyword">sizeof</span>(value)) {</div><div class="line"><a name="l09339"></a><span class="lineno"> 9339</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No space left for %s code\n&quot;</span>, label);</div><div class="line"><a name="l09340"></a><span class="lineno"> 9340</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l09341"></a><span class="lineno"> 9341</span>&#160;   }</div><div class="line"><a name="l09342"></a><span class="lineno"> 9342</span>&#160;   data[pos++] = ies-&gt;<a class="code" href="../../d0/dbd/structast__party__redirecting__reason__ies.html#a45a5b7c00a796a23f01673cef1dbe0a9">code</a>;</div><div class="line"><a name="l09343"></a><span class="lineno"> 9343</span>&#160;   data[pos++] = <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>);</div><div class="line"><a name="l09344"></a><span class="lineno"> 9344</span>&#160;   value = htonl(reason-&gt;<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#a45a5b7c00a796a23f01673cef1dbe0a9">code</a>);</div><div class="line"><a name="l09345"></a><span class="lineno"> 9345</span>&#160;   memcpy(data + pos, &amp;value, <span class="keyword">sizeof</span>(value));</div><div class="line"><a name="l09346"></a><span class="lineno"> 9346</span>&#160;   pos += <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>);</div><div class="line"><a name="l09347"></a><span class="lineno"> 9347</span>&#160;</div><div class="line"><a name="l09348"></a><span class="lineno"> 9348</span>&#160;   <span class="keywordflow">if</span> (reason-&gt;<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l09349"></a><span class="lineno"> 9349</span>&#160;      length = strlen(reason-&gt;<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l09350"></a><span class="lineno"> 9350</span>&#160;      <span class="keywordflow">if</span> (datalen &lt; pos + (<span class="keyword">sizeof</span>(data[0]) * 2) + length) {</div><div class="line"><a name="l09351"></a><span class="lineno"> 9351</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No space left for %s string\n&quot;</span>, label);</div><div class="line"><a name="l09352"></a><span class="lineno"> 9352</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l09353"></a><span class="lineno"> 9353</span>&#160;      }</div><div class="line"><a name="l09354"></a><span class="lineno"> 9354</span>&#160;      data[pos++] = ies-&gt;<a class="code" href="../../d0/dbd/structast__party__redirecting__reason__ies.html#aba03208f197d75b6e355ba9b2ae08ab5">str</a>;</div><div class="line"><a name="l09355"></a><span class="lineno"> 9355</span>&#160;      data[pos++] = length;</div><div class="line"><a name="l09356"></a><span class="lineno"> 9356</span>&#160;      memcpy(data + pos, reason-&gt;<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, length);</div><div class="line"><a name="l09357"></a><span class="lineno"> 9357</span>&#160;      pos += length;</div><div class="line"><a name="l09358"></a><span class="lineno"> 9358</span>&#160;   }</div><div class="line"><a name="l09359"></a><span class="lineno"> 9359</span>&#160;</div><div class="line"><a name="l09360"></a><span class="lineno"> 9360</span>&#160;   <span class="keywordflow">return</span> pos;</div><div class="line"><a name="l09361"></a><span class="lineno"> 9361</span>&#160;}</div><div class="line"><a name="l09362"></a><span class="lineno"> 9362</span>&#160;</div><div class="line"><a name="l09363"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aa8ee61afe088f1d67c6e27164cd91a37"> 9363</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#aa8ee61afe088f1d67c6e27164cd91a37">ast_redirecting_build_data</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *data, <span class="keywordtype">size_t</span> datalen, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/d44/structast__party__redirecting.html">ast_party_redirecting</a> *redirecting, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../de/df8/structast__set__party__redirecting.html">ast_set_party_redirecting</a> *<a class="code" href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a>)</div><div class="line"><a name="l09364"></a><span class="lineno"> 9364</span>&#160;{</div><div class="line"><a name="l09365"></a><span class="lineno"> 9365</span>&#160;   <a class="code" href="../../da/d4e/db_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;</div><div class="line"><a name="l09366"></a><span class="lineno"> 9366</span>&#160;   <span class="keywordtype">size_t</span> pos = 0;</div><div class="line"><a name="l09367"></a><span class="lineno"> 9367</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l09368"></a><span class="lineno"> 9368</span>&#160;</div><div class="line"><a name="l09369"></a><span class="lineno"> 9369</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d5/d23/structast__party__id__ies.html">ast_party_id_ies</a> orig_ies = {</div><div class="line"><a name="l09370"></a><span class="lineno"> 9370</span>&#160;      .<a class="code" href="../../d5/d23/structast__party__id__ies.html#a5d80ef8e2a5b2b25e104da6f43fd1ce0">name</a>.<a class="code" href="../../df/d8e/structast__party__name__ies.html#aba03208f197d75b6e355ba9b2ae08ab5">str</a> = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a542fff7c60e1adb2cfdb8ec7374f405a">AST_REDIRECTING_ORIG_NAME</a>,</div><div class="line"><a name="l09371"></a><span class="lineno"> 9371</span>&#160;      .name.char_set = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a4c11b286f8baee30d3b56a2c31fe26a6">AST_REDIRECTING_ORIG_NAME_CHAR_SET</a>,</div><div class="line"><a name="l09372"></a><span class="lineno"> 9372</span>&#160;      .name.presentation = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aa69ffee94d2e9d2e61ffc6001b6d21cb">AST_REDIRECTING_ORIG_NAME_PRESENTATION</a>,</div><div class="line"><a name="l09373"></a><span class="lineno"> 9373</span>&#160;      .name.valid = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a8ce72111eb5b123e60d20805d5fec33a">AST_REDIRECTING_ORIG_NAME_VALID</a>,</div><div class="line"><a name="l09374"></a><span class="lineno"> 9374</span>&#160;</div><div class="line"><a name="l09375"></a><span class="lineno"> 9375</span>&#160;      .number.str = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aad9cb668db1da7081ab78c0fe126e1fa">AST_REDIRECTING_ORIG_NUMBER</a>,</div><div class="line"><a name="l09376"></a><span class="lineno"> 9376</span>&#160;      .number.plan = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ae4c88e98038cbcde758114eb2b3bc805">AST_REDIRECTING_ORIG_NUMBER_PLAN</a>,</div><div class="line"><a name="l09377"></a><span class="lineno"> 9377</span>&#160;      .number.presentation = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792adadd765c09505110715245dd132a7eb9">AST_REDIRECTING_ORIG_NUMBER_PRESENTATION</a>,</div><div class="line"><a name="l09378"></a><span class="lineno"> 9378</span>&#160;      .number.valid = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a2aaaaeed05df585c75e3930a51e63e65">AST_REDIRECTING_ORIG_NUMBER_VALID</a>,</div><div class="line"><a name="l09379"></a><span class="lineno"> 9379</span>&#160;</div><div class="line"><a name="l09380"></a><span class="lineno"> 9380</span>&#160;      .subaddress.str = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a5841e97e13068cfd2102214ba2ea123c">AST_REDIRECTING_ORIG_SUBADDRESS</a>,</div><div class="line"><a name="l09381"></a><span class="lineno"> 9381</span>&#160;      .subaddress.type = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a698ba152c9d2f83238f68027489fec8a">AST_REDIRECTING_ORIG_SUBADDRESS_TYPE</a>,</div><div class="line"><a name="l09382"></a><span class="lineno"> 9382</span>&#160;      .subaddress.odd_even_indicator = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a3ec117aa2243c795905553454c5d114b">AST_REDIRECTING_ORIG_SUBADDRESS_ODD_EVEN</a>,</div><div class="line"><a name="l09383"></a><span class="lineno"> 9383</span>&#160;      .subaddress.valid = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a325c1d3b34c0636fe2dcf4a7224515de">AST_REDIRECTING_ORIG_SUBADDRESS_VALID</a>,</div><div class="line"><a name="l09384"></a><span class="lineno"> 9384</span>&#160;</div><div class="line"><a name="l09385"></a><span class="lineno"> 9385</span>&#160;      .tag = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a188aabe2f4692c9d4426d6bec1b8202f">AST_REDIRECTING_ORIG_TAG</a>,</div><div class="line"><a name="l09386"></a><span class="lineno"> 9386</span>&#160;      .combined_presentation = 0,<span class="comment">/* Not sent. */</span></div><div class="line"><a name="l09387"></a><span class="lineno"> 9387</span>&#160;   };</div><div class="line"><a name="l09388"></a><span class="lineno"> 9388</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d5/d23/structast__party__id__ies.html">ast_party_id_ies</a> from_ies = {</div><div class="line"><a name="l09389"></a><span class="lineno"> 9389</span>&#160;      .<a class="code" href="../../d5/d23/structast__party__id__ies.html#a5d80ef8e2a5b2b25e104da6f43fd1ce0">name</a>.<a class="code" href="../../df/d8e/structast__party__name__ies.html#aba03208f197d75b6e355ba9b2ae08ab5">str</a> = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ac5112be19c8d91662fe0004f75f617d8">AST_REDIRECTING_FROM_NAME</a>,</div><div class="line"><a name="l09390"></a><span class="lineno"> 9390</span>&#160;      .name.char_set = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a6a1b17f93a20f21bf186af1b5994ab00">AST_REDIRECTING_FROM_NAME_CHAR_SET</a>,</div><div class="line"><a name="l09391"></a><span class="lineno"> 9391</span>&#160;      .name.presentation = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a01a4aa5b3dc6e6ebadb3c7b93a313668">AST_REDIRECTING_FROM_NAME_PRESENTATION</a>,</div><div class="line"><a name="l09392"></a><span class="lineno"> 9392</span>&#160;      .name.valid = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a7ac0a7bfda5149c11a42afc070d8b39a">AST_REDIRECTING_FROM_NAME_VALID</a>,</div><div class="line"><a name="l09393"></a><span class="lineno"> 9393</span>&#160;</div><div class="line"><a name="l09394"></a><span class="lineno"> 9394</span>&#160;      .number.str = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ae45642d62d251e74f63046bef953c5c9">AST_REDIRECTING_FROM_NUMBER</a>,</div><div class="line"><a name="l09395"></a><span class="lineno"> 9395</span>&#160;      .number.plan = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a11a85e8e51317d5b57317a761c8e6921">AST_REDIRECTING_FROM_NUMBER_PLAN</a>,</div><div class="line"><a name="l09396"></a><span class="lineno"> 9396</span>&#160;      .number.presentation = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a2bc1562da560648c0471d7d8e74ce7ff">AST_REDIRECTING_FROM_NUMBER_PRESENTATION</a>,</div><div class="line"><a name="l09397"></a><span class="lineno"> 9397</span>&#160;      .number.valid = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a3458c569979f7c11bb5a8a638748c128">AST_REDIRECTING_FROM_NUMBER_VALID</a>,</div><div class="line"><a name="l09398"></a><span class="lineno"> 9398</span>&#160;</div><div class="line"><a name="l09399"></a><span class="lineno"> 9399</span>&#160;      .subaddress.str = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a870806e047987e8783b016efc0b89d7d">AST_REDIRECTING_FROM_SUBADDRESS</a>,</div><div class="line"><a name="l09400"></a><span class="lineno"> 9400</span>&#160;      .subaddress.type = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a8339363342c936dff645699b6018ee61">AST_REDIRECTING_FROM_SUBADDRESS_TYPE</a>,</div><div class="line"><a name="l09401"></a><span class="lineno"> 9401</span>&#160;      .subaddress.odd_even_indicator = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aec8bf7b5a59cb1e1f66144d23f637135">AST_REDIRECTING_FROM_SUBADDRESS_ODD_EVEN</a>,</div><div class="line"><a name="l09402"></a><span class="lineno"> 9402</span>&#160;      .subaddress.valid = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a791a8bb58907175482ac845835c0c678">AST_REDIRECTING_FROM_SUBADDRESS_VALID</a>,</div><div class="line"><a name="l09403"></a><span class="lineno"> 9403</span>&#160;</div><div class="line"><a name="l09404"></a><span class="lineno"> 9404</span>&#160;      .tag = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a586c5b85860b6b141d950b7927b85d0a">AST_REDIRECTING_FROM_TAG</a>,</div><div class="line"><a name="l09405"></a><span class="lineno"> 9405</span>&#160;      .combined_presentation = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a6e7abe0b2f38c10fc8291690362e1864">AST_REDIRECTING_FROM_ID_PRESENTATION</a>,</div><div class="line"><a name="l09406"></a><span class="lineno"> 9406</span>&#160;   };</div><div class="line"><a name="l09407"></a><span class="lineno"> 9407</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d5/d23/structast__party__id__ies.html">ast_party_id_ies</a> to_ies = {</div><div class="line"><a name="l09408"></a><span class="lineno"> 9408</span>&#160;      .<a class="code" href="../../d5/d23/structast__party__id__ies.html#a5d80ef8e2a5b2b25e104da6f43fd1ce0">name</a>.<a class="code" href="../../df/d8e/structast__party__name__ies.html#aba03208f197d75b6e355ba9b2ae08ab5">str</a> = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a02797e73caf534e0d40baa6f03e3d3f4">AST_REDIRECTING_TO_NAME</a>,</div><div class="line"><a name="l09409"></a><span class="lineno"> 9409</span>&#160;      .name.char_set = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792af393eae44971089a6f6c075e0dc280f7">AST_REDIRECTING_TO_NAME_CHAR_SET</a>,</div><div class="line"><a name="l09410"></a><span class="lineno"> 9410</span>&#160;      .name.presentation = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a2236897b5f92120e3f949c4e2fa08d8e">AST_REDIRECTING_TO_NAME_PRESENTATION</a>,</div><div class="line"><a name="l09411"></a><span class="lineno"> 9411</span>&#160;      .name.valid = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a38eedeffc3b8c533b3d4d885a401fcf2">AST_REDIRECTING_TO_NAME_VALID</a>,</div><div class="line"><a name="l09412"></a><span class="lineno"> 9412</span>&#160;</div><div class="line"><a name="l09413"></a><span class="lineno"> 9413</span>&#160;      .number.str = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a667da7258b9fb30232ba5371a691aa9b">AST_REDIRECTING_TO_NUMBER</a>,</div><div class="line"><a name="l09414"></a><span class="lineno"> 9414</span>&#160;      .number.plan = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a4e7a7b87975e192e7b0e52a3da89b5b6">AST_REDIRECTING_TO_NUMBER_PLAN</a>,</div><div class="line"><a name="l09415"></a><span class="lineno"> 9415</span>&#160;      .number.presentation = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ae132d231e169ff864606c416bf2b5b25">AST_REDIRECTING_TO_NUMBER_PRESENTATION</a>,</div><div class="line"><a name="l09416"></a><span class="lineno"> 9416</span>&#160;      .number.valid = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a777afaccdfee5a46245cedbb2e859acd">AST_REDIRECTING_TO_NUMBER_VALID</a>,</div><div class="line"><a name="l09417"></a><span class="lineno"> 9417</span>&#160;</div><div class="line"><a name="l09418"></a><span class="lineno"> 9418</span>&#160;      .subaddress.str = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792af1daee1466e8256b8ca40f3aaa44aae9">AST_REDIRECTING_TO_SUBADDRESS</a>,</div><div class="line"><a name="l09419"></a><span class="lineno"> 9419</span>&#160;      .subaddress.type = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ac4425cf0f406dd0bf341beb87c8e8b5f">AST_REDIRECTING_TO_SUBADDRESS_TYPE</a>,</div><div class="line"><a name="l09420"></a><span class="lineno"> 9420</span>&#160;      .subaddress.odd_even_indicator = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a3b3724a87f3c5bfd700091011e01e0df">AST_REDIRECTING_TO_SUBADDRESS_ODD_EVEN</a>,</div><div class="line"><a name="l09421"></a><span class="lineno"> 9421</span>&#160;      .subaddress.valid = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ac17c7d55ca7591ced257a733db5e551f">AST_REDIRECTING_TO_SUBADDRESS_VALID</a>,</div><div class="line"><a name="l09422"></a><span class="lineno"> 9422</span>&#160;</div><div class="line"><a name="l09423"></a><span class="lineno"> 9423</span>&#160;      .tag = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a09aa0e37716fdb65f50ee1c33c48093a">AST_REDIRECTING_TO_TAG</a>,</div><div class="line"><a name="l09424"></a><span class="lineno"> 9424</span>&#160;      .combined_presentation = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a8ee7de1f9dc8459b1e5bfb4c8cbd8b1a">AST_REDIRECTING_TO_ID_PRESENTATION</a>,</div><div class="line"><a name="l09425"></a><span class="lineno"> 9425</span>&#160;   };</div><div class="line"><a name="l09426"></a><span class="lineno"> 9426</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d5/d23/structast__party__id__ies.html">ast_party_id_ies</a> priv_orig_ies = {</div><div class="line"><a name="l09427"></a><span class="lineno"> 9427</span>&#160;      .<a class="code" href="../../d5/d23/structast__party__id__ies.html#a5d80ef8e2a5b2b25e104da6f43fd1ce0">name</a>.<a class="code" href="../../df/d8e/structast__party__name__ies.html#aba03208f197d75b6e355ba9b2ae08ab5">str</a> = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aaddd1dfb5bf6cb498482095157f30694">AST_REDIRECTING_PRIV_ORIG_NAME</a>,</div><div class="line"><a name="l09428"></a><span class="lineno"> 9428</span>&#160;      .name.char_set = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a8a34f9064e5ebb6712635180d1b50e18">AST_REDIRECTING_PRIV_ORIG_NAME_CHAR_SET</a>,</div><div class="line"><a name="l09429"></a><span class="lineno"> 9429</span>&#160;      .name.presentation = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ae0e76bbbf85849ec57854baf6209d9dc">AST_REDIRECTING_PRIV_ORIG_NAME_PRESENTATION</a>,</div><div class="line"><a name="l09430"></a><span class="lineno"> 9430</span>&#160;      .name.valid = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a2a6d2953d32856d91573ff12343be620">AST_REDIRECTING_PRIV_ORIG_NAME_VALID</a>,</div><div class="line"><a name="l09431"></a><span class="lineno"> 9431</span>&#160;</div><div class="line"><a name="l09432"></a><span class="lineno"> 9432</span>&#160;      .number.str = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aca60d67300bbb8a4c85a0b61c597bed6">AST_REDIRECTING_PRIV_ORIG_NUMBER</a>,</div><div class="line"><a name="l09433"></a><span class="lineno"> 9433</span>&#160;      .number.plan = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a5d643c7233f1c4f3c3780ab92b68fc38">AST_REDIRECTING_PRIV_ORIG_NUMBER_PLAN</a>,</div><div class="line"><a name="l09434"></a><span class="lineno"> 9434</span>&#160;      .number.presentation = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792abec9b47588bcb77c6ce5878e2bba53b3">AST_REDIRECTING_PRIV_ORIG_NUMBER_PRESENTATION</a>,</div><div class="line"><a name="l09435"></a><span class="lineno"> 9435</span>&#160;      .number.valid = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792abdf50828de27e42f1e70b612bb1003c5">AST_REDIRECTING_PRIV_ORIG_NUMBER_VALID</a>,</div><div class="line"><a name="l09436"></a><span class="lineno"> 9436</span>&#160;</div><div class="line"><a name="l09437"></a><span class="lineno"> 9437</span>&#160;      .subaddress.str = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aef98a6b6c42a63441c640308a23b8dc6">AST_REDIRECTING_PRIV_ORIG_SUBADDRESS</a>,</div><div class="line"><a name="l09438"></a><span class="lineno"> 9438</span>&#160;      .subaddress.type = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a9cfe7eb77fd0a8715633cc805b680e4b">AST_REDIRECTING_PRIV_ORIG_SUBADDRESS_TYPE</a>,</div><div class="line"><a name="l09439"></a><span class="lineno"> 9439</span>&#160;      .subaddress.odd_even_indicator = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a18cf70ed9355f9f7ed5b1ec5615752f1">AST_REDIRECTING_PRIV_ORIG_SUBADDRESS_ODD_EVEN</a>,</div><div class="line"><a name="l09440"></a><span class="lineno"> 9440</span>&#160;      .subaddress.valid = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ac249420ccee43b9f681e103696c54fd9">AST_REDIRECTING_PRIV_ORIG_SUBADDRESS_VALID</a>,</div><div class="line"><a name="l09441"></a><span class="lineno"> 9441</span>&#160;</div><div class="line"><a name="l09442"></a><span class="lineno"> 9442</span>&#160;      .tag = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a81210231d9c339ed4486e64243381cf7">AST_REDIRECTING_PRIV_ORIG_TAG</a>,</div><div class="line"><a name="l09443"></a><span class="lineno"> 9443</span>&#160;      .combined_presentation = 0,<span class="comment">/* Not sent. */</span></div><div class="line"><a name="l09444"></a><span class="lineno"> 9444</span>&#160;   };</div><div class="line"><a name="l09445"></a><span class="lineno"> 9445</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d5/d23/structast__party__id__ies.html">ast_party_id_ies</a> priv_from_ies = {</div><div class="line"><a name="l09446"></a><span class="lineno"> 9446</span>&#160;      .<a class="code" href="../../d5/d23/structast__party__id__ies.html#a5d80ef8e2a5b2b25e104da6f43fd1ce0">name</a>.<a class="code" href="../../df/d8e/structast__party__name__ies.html#aba03208f197d75b6e355ba9b2ae08ab5">str</a> = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a39596e00e2981e5823aba4c98f6d16da">AST_REDIRECTING_PRIV_FROM_NAME</a>,</div><div class="line"><a name="l09447"></a><span class="lineno"> 9447</span>&#160;      .name.char_set = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aabf14af13b81b7fe33a14afcf6ca2bf2">AST_REDIRECTING_PRIV_FROM_NAME_CHAR_SET</a>,</div><div class="line"><a name="l09448"></a><span class="lineno"> 9448</span>&#160;      .name.presentation = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a9c09b93677bac821db85f7e194d3ea89">AST_REDIRECTING_PRIV_FROM_NAME_PRESENTATION</a>,</div><div class="line"><a name="l09449"></a><span class="lineno"> 9449</span>&#160;      .name.valid = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a05cc70ee1519ce1ffb687121f68df1a7">AST_REDIRECTING_PRIV_FROM_NAME_VALID</a>,</div><div class="line"><a name="l09450"></a><span class="lineno"> 9450</span>&#160;</div><div class="line"><a name="l09451"></a><span class="lineno"> 9451</span>&#160;      .number.str = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a6eba7d36a20eb665e7680cdbf0c834c2">AST_REDIRECTING_PRIV_FROM_NUMBER</a>,</div><div class="line"><a name="l09452"></a><span class="lineno"> 9452</span>&#160;      .number.plan = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a902377dfc1e6013af292a6f98ce86bd3">AST_REDIRECTING_PRIV_FROM_NUMBER_PLAN</a>,</div><div class="line"><a name="l09453"></a><span class="lineno"> 9453</span>&#160;      .number.presentation = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a95721650e26cbcb734ce91616e63ca68">AST_REDIRECTING_PRIV_FROM_NUMBER_PRESENTATION</a>,</div><div class="line"><a name="l09454"></a><span class="lineno"> 9454</span>&#160;      .number.valid = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a5170789fcd157d0315387dbef005e043">AST_REDIRECTING_PRIV_FROM_NUMBER_VALID</a>,</div><div class="line"><a name="l09455"></a><span class="lineno"> 9455</span>&#160;</div><div class="line"><a name="l09456"></a><span class="lineno"> 9456</span>&#160;      .subaddress.str = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a4cc3a70dcfd5c3a977cfdcf2a75d8527">AST_REDIRECTING_PRIV_FROM_SUBADDRESS</a>,</div><div class="line"><a name="l09457"></a><span class="lineno"> 9457</span>&#160;      .subaddress.type = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a41dadfb835cc19fb7a62c63f2fe18d3e">AST_REDIRECTING_PRIV_FROM_SUBADDRESS_TYPE</a>,</div><div class="line"><a name="l09458"></a><span class="lineno"> 9458</span>&#160;      .subaddress.odd_even_indicator = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a08b21da6da6f41c2b10d83a84fa2e016">AST_REDIRECTING_PRIV_FROM_SUBADDRESS_ODD_EVEN</a>,</div><div class="line"><a name="l09459"></a><span class="lineno"> 9459</span>&#160;      .subaddress.valid = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ad8975c2a6f9f8304424931e420033788">AST_REDIRECTING_PRIV_FROM_SUBADDRESS_VALID</a>,</div><div class="line"><a name="l09460"></a><span class="lineno"> 9460</span>&#160;</div><div class="line"><a name="l09461"></a><span class="lineno"> 9461</span>&#160;      .tag = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a6b3add43c84e8c9d1c420c46786d6600">AST_REDIRECTING_PRIV_FROM_TAG</a>,</div><div class="line"><a name="l09462"></a><span class="lineno"> 9462</span>&#160;      .combined_presentation = 0,<span class="comment">/* Not sent. */</span></div><div class="line"><a name="l09463"></a><span class="lineno"> 9463</span>&#160;   };</div><div class="line"><a name="l09464"></a><span class="lineno"> 9464</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d5/d23/structast__party__id__ies.html">ast_party_id_ies</a> priv_to_ies = {</div><div class="line"><a name="l09465"></a><span class="lineno"> 9465</span>&#160;      .<a class="code" href="../../d5/d23/structast__party__id__ies.html#a5d80ef8e2a5b2b25e104da6f43fd1ce0">name</a>.<a class="code" href="../../df/d8e/structast__party__name__ies.html#aba03208f197d75b6e355ba9b2ae08ab5">str</a> = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a282adacfb7cb1cd3c0ce2eb63bbf282f">AST_REDIRECTING_PRIV_TO_NAME</a>,</div><div class="line"><a name="l09466"></a><span class="lineno"> 9466</span>&#160;      .name.char_set = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a7baecd23e0e111ddbc23ce2c4f3d92da">AST_REDIRECTING_PRIV_TO_NAME_CHAR_SET</a>,</div><div class="line"><a name="l09467"></a><span class="lineno"> 9467</span>&#160;      .name.presentation = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a913527aea7faf5dde5462bd05d51b0eb">AST_REDIRECTING_PRIV_TO_NAME_PRESENTATION</a>,</div><div class="line"><a name="l09468"></a><span class="lineno"> 9468</span>&#160;      .name.valid = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a11d7be890d1517ea33fc69f3d07353d9">AST_REDIRECTING_PRIV_TO_NAME_VALID</a>,</div><div class="line"><a name="l09469"></a><span class="lineno"> 9469</span>&#160;</div><div class="line"><a name="l09470"></a><span class="lineno"> 9470</span>&#160;      .number.str = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a4e7df166afca82e85b8faa06d74c68f5">AST_REDIRECTING_PRIV_TO_NUMBER</a>,</div><div class="line"><a name="l09471"></a><span class="lineno"> 9471</span>&#160;      .number.plan = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a748b91a64b30f68c8f3bd4b587c9367a">AST_REDIRECTING_PRIV_TO_NUMBER_PLAN</a>,</div><div class="line"><a name="l09472"></a><span class="lineno"> 9472</span>&#160;      .number.presentation = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a20b9655c65064608e5a64eb4d905260b">AST_REDIRECTING_PRIV_TO_NUMBER_PRESENTATION</a>,</div><div class="line"><a name="l09473"></a><span class="lineno"> 9473</span>&#160;      .number.valid = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a20737f3984b4c9fec91da715ce4e22d5">AST_REDIRECTING_PRIV_TO_NUMBER_VALID</a>,</div><div class="line"><a name="l09474"></a><span class="lineno"> 9474</span>&#160;</div><div class="line"><a name="l09475"></a><span class="lineno"> 9475</span>&#160;      .subaddress.str = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792add63ae196eae92e71526f2d49fbd4721">AST_REDIRECTING_PRIV_TO_SUBADDRESS</a>,</div><div class="line"><a name="l09476"></a><span class="lineno"> 9476</span>&#160;      .subaddress.type = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ab6192c2ae240ba9e051951dba6b85da0">AST_REDIRECTING_PRIV_TO_SUBADDRESS_TYPE</a>,</div><div class="line"><a name="l09477"></a><span class="lineno"> 9477</span>&#160;      .subaddress.odd_even_indicator = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a47d957ec421660fd81a6f52940bc9945">AST_REDIRECTING_PRIV_TO_SUBADDRESS_ODD_EVEN</a>,</div><div class="line"><a name="l09478"></a><span class="lineno"> 9478</span>&#160;      .subaddress.valid = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a465958f253dbce8a201319658ca99750">AST_REDIRECTING_PRIV_TO_SUBADDRESS_VALID</a>,</div><div class="line"><a name="l09479"></a><span class="lineno"> 9479</span>&#160;</div><div class="line"><a name="l09480"></a><span class="lineno"> 9480</span>&#160;      .tag = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a83603fdcfd14d19e521ce76a53feb588">AST_REDIRECTING_PRIV_TO_TAG</a>,</div><div class="line"><a name="l09481"></a><span class="lineno"> 9481</span>&#160;      .combined_presentation = 0,<span class="comment">/* Not sent. */</span></div><div class="line"><a name="l09482"></a><span class="lineno"> 9482</span>&#160;   };</div><div class="line"><a name="l09483"></a><span class="lineno"> 9483</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d0/dbd/structast__party__redirecting__reason__ies.html">ast_party_redirecting_reason_ies</a> reason_ies = {</div><div class="line"><a name="l09484"></a><span class="lineno"> 9484</span>&#160;      .<a class="code" href="../../d0/dbd/structast__party__redirecting__reason__ies.html#a45a5b7c00a796a23f01673cef1dbe0a9">code</a> = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a19de60b6d2aae3f71433113ee02dbdf7">AST_REDIRECTING_REASON_CODE</a>,</div><div class="line"><a name="l09485"></a><span class="lineno"> 9485</span>&#160;      .str = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ac4a794763603856469df065a36f2474e">AST_REDIRECTING_REASON_STR</a>,</div><div class="line"><a name="l09486"></a><span class="lineno"> 9486</span>&#160;   };</div><div class="line"><a name="l09487"></a><span class="lineno"> 9487</span>&#160;</div><div class="line"><a name="l09488"></a><span class="lineno"> 9488</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d0/dbd/structast__party__redirecting__reason__ies.html">ast_party_redirecting_reason_ies</a> orig_reason_ies = {</div><div class="line"><a name="l09489"></a><span class="lineno"> 9489</span>&#160;      .<a class="code" href="../../d0/dbd/structast__party__redirecting__reason__ies.html#a45a5b7c00a796a23f01673cef1dbe0a9">code</a> = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a217ddb753acbccd09362ef45581906ce">AST_REDIRECTING_ORIG_REASON_CODE</a>,</div><div class="line"><a name="l09490"></a><span class="lineno"> 9490</span>&#160;      .str = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aa5cd96e496cdbb109fe8c75f5b93b54d">AST_REDIRECTING_ORIG_REASON_STR</a>,</div><div class="line"><a name="l09491"></a><span class="lineno"> 9491</span>&#160;   };</div><div class="line"><a name="l09492"></a><span class="lineno"> 9492</span>&#160;</div><div class="line"><a name="l09493"></a><span class="lineno"> 9493</span>&#160;   <span class="comment">/* Redirecting frame version */</span></div><div class="line"><a name="l09494"></a><span class="lineno"> 9494</span>&#160;   <span class="keywordflow">if</span> (datalen &lt; pos + (<span class="keyword">sizeof</span>(data[0]) * 2) + 1) {</div><div class="line"><a name="l09495"></a><span class="lineno"> 9495</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No space left for redirecting frame version\n&quot;</span>);</div><div class="line"><a name="l09496"></a><span class="lineno"> 9496</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l09497"></a><span class="lineno"> 9497</span>&#160;   }</div><div class="line"><a name="l09498"></a><span class="lineno"> 9498</span>&#160;   data[pos++] = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a047c4250fa40757e25c1a41549d1678d">AST_REDIRECTING_VERSION</a>;</div><div class="line"><a name="l09499"></a><span class="lineno"> 9499</span>&#160;   data[pos++] = 1;</div><div class="line"><a name="l09500"></a><span class="lineno"> 9500</span>&#160;   data[pos++] = 2;<span class="comment">/* Version 1 did not have a version ie */</span></div><div class="line"><a name="l09501"></a><span class="lineno"> 9501</span>&#160;</div><div class="line"><a name="l09502"></a><span class="lineno"> 9502</span>&#160;   res = <a class="code" href="../../d4/d28/channel_8c.html#ac7f590f6fdd261fc2ab76a9ff97247e8">party_id_build_data</a>(data + pos, datalen - pos, &amp;redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>,</div><div class="line"><a name="l09503"></a><span class="lineno"> 9503</span>&#160;      <span class="stringliteral">&quot;redirecting-orig&quot;</span>, &amp;orig_ies, update ? &amp;update-&gt;<a class="code" href="../../de/df8/structast__set__party__redirecting.html#aa15d132882ae125c346da6ab687a8d59">orig</a> : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l09504"></a><span class="lineno"> 9504</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l09505"></a><span class="lineno"> 9505</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l09506"></a><span class="lineno"> 9506</span>&#160;   }</div><div class="line"><a name="l09507"></a><span class="lineno"> 9507</span>&#160;   pos += res;</div><div class="line"><a name="l09508"></a><span class="lineno"> 9508</span>&#160;</div><div class="line"><a name="l09509"></a><span class="lineno"> 9509</span>&#160;   res = <a class="code" href="../../d4/d28/channel_8c.html#ac7f590f6fdd261fc2ab76a9ff97247e8">party_id_build_data</a>(data + pos, datalen - pos, &amp;redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>,</div><div class="line"><a name="l09510"></a><span class="lineno"> 9510</span>&#160;      <span class="stringliteral">&quot;redirecting-from&quot;</span>, &amp;from_ies, update ? &amp;update-&gt;<a class="code" href="../../de/df8/structast__set__party__redirecting.html#a45899db729b8fd0b9193505a58b3baa8">from</a> : NULL);</div><div class="line"><a name="l09511"></a><span class="lineno"> 9511</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l09512"></a><span class="lineno"> 9512</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l09513"></a><span class="lineno"> 9513</span>&#160;   }</div><div class="line"><a name="l09514"></a><span class="lineno"> 9514</span>&#160;   pos += res;</div><div class="line"><a name="l09515"></a><span class="lineno"> 9515</span>&#160;</div><div class="line"><a name="l09516"></a><span class="lineno"> 9516</span>&#160;   res = <a class="code" href="../../d4/d28/channel_8c.html#ac7f590f6fdd261fc2ab76a9ff97247e8">party_id_build_data</a>(data + pos, datalen - pos, &amp;redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>,</div><div class="line"><a name="l09517"></a><span class="lineno"> 9517</span>&#160;      <span class="stringliteral">&quot;redirecting-to&quot;</span>, &amp;to_ies, update ? &amp;update-&gt;<a class="code" href="../../de/df8/structast__set__party__redirecting.html#afe0af5d5745eaa2d86a2d34f6f36d53e">to</a> : NULL);</div><div class="line"><a name="l09518"></a><span class="lineno"> 9518</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l09519"></a><span class="lineno"> 9519</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l09520"></a><span class="lineno"> 9520</span>&#160;   }</div><div class="line"><a name="l09521"></a><span class="lineno"> 9521</span>&#160;   pos += res;</div><div class="line"><a name="l09522"></a><span class="lineno"> 9522</span>&#160;</div><div class="line"><a name="l09523"></a><span class="lineno"> 9523</span>&#160;   res = <a class="code" href="../../d4/d28/channel_8c.html#ac7f590f6fdd261fc2ab76a9ff97247e8">party_id_build_data</a>(data + pos, datalen - pos, &amp;redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>,</div><div class="line"><a name="l09524"></a><span class="lineno"> 9524</span>&#160;      <span class="stringliteral">&quot;redirecting-priv-orig&quot;</span>, &amp;priv_orig_ies, update ? &amp;update-&gt;<a class="code" href="../../de/df8/structast__set__party__redirecting.html#a54ed2019cbce2f838acaba40717b787b">priv_orig</a> : NULL);</div><div class="line"><a name="l09525"></a><span class="lineno"> 9525</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l09526"></a><span class="lineno"> 9526</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l09527"></a><span class="lineno"> 9527</span>&#160;   }</div><div class="line"><a name="l09528"></a><span class="lineno"> 9528</span>&#160;   pos += res;</div><div class="line"><a name="l09529"></a><span class="lineno"> 9529</span>&#160;</div><div class="line"><a name="l09530"></a><span class="lineno"> 9530</span>&#160;   res = <a class="code" href="../../d4/d28/channel_8c.html#ac7f590f6fdd261fc2ab76a9ff97247e8">party_id_build_data</a>(data + pos, datalen - pos, &amp;redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>,</div><div class="line"><a name="l09531"></a><span class="lineno"> 9531</span>&#160;      <span class="stringliteral">&quot;redirecting-priv-from&quot;</span>, &amp;priv_from_ies, update ? &amp;update-&gt;<a class="code" href="../../de/df8/structast__set__party__redirecting.html#a68de1269d7d668b5fc16c5247f65f9ac">priv_from</a> : NULL);</div><div class="line"><a name="l09532"></a><span class="lineno"> 9532</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l09533"></a><span class="lineno"> 9533</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l09534"></a><span class="lineno"> 9534</span>&#160;   }</div><div class="line"><a name="l09535"></a><span class="lineno"> 9535</span>&#160;   pos += res;</div><div class="line"><a name="l09536"></a><span class="lineno"> 9536</span>&#160;</div><div class="line"><a name="l09537"></a><span class="lineno"> 9537</span>&#160;   res = <a class="code" href="../../d4/d28/channel_8c.html#ac7f590f6fdd261fc2ab76a9ff97247e8">party_id_build_data</a>(data + pos, datalen - pos, &amp;redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>,</div><div class="line"><a name="l09538"></a><span class="lineno"> 9538</span>&#160;      <span class="stringliteral">&quot;redirecting-priv-to&quot;</span>, &amp;priv_to_ies, update ? &amp;update-&gt;<a class="code" href="../../de/df8/structast__set__party__redirecting.html#a08184154ded9cea4d8c2b6667c69596e">priv_to</a> : NULL);</div><div class="line"><a name="l09539"></a><span class="lineno"> 9539</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l09540"></a><span class="lineno"> 9540</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l09541"></a><span class="lineno"> 9541</span>&#160;   }</div><div class="line"><a name="l09542"></a><span class="lineno"> 9542</span>&#160;   pos += res;</div><div class="line"><a name="l09543"></a><span class="lineno"> 9543</span>&#160;</div><div class="line"><a name="l09544"></a><span class="lineno"> 9544</span>&#160;   <span class="comment">/* Redirecting reason */</span></div><div class="line"><a name="l09545"></a><span class="lineno"> 9545</span>&#160;   res = <a class="code" href="../../d4/d28/channel_8c.html#acde3e8b33bfcbd2e77f66e5270a58724">redirecting_reason_build_data</a>(data + pos, datalen - pos, &amp;redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#aa961ad9bce0cf7679c5d938519ff1885">reason</a>,</div><div class="line"><a name="l09546"></a><span class="lineno"> 9546</span>&#160;         <span class="stringliteral">&quot;redirecting-reason&quot;</span>, &amp;reason_ies);</div><div class="line"><a name="l09547"></a><span class="lineno"> 9547</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l09548"></a><span class="lineno"> 9548</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l09549"></a><span class="lineno"> 9549</span>&#160;   }</div><div class="line"><a name="l09550"></a><span class="lineno"> 9550</span>&#160;   pos += res;</div><div class="line"><a name="l09551"></a><span class="lineno"> 9551</span>&#160;</div><div class="line"><a name="l09552"></a><span class="lineno"> 9552</span>&#160;   <span class="comment">/* Redirecting original reason */</span></div><div class="line"><a name="l09553"></a><span class="lineno"> 9553</span>&#160;   res = <a class="code" href="../../d4/d28/channel_8c.html#acde3e8b33bfcbd2e77f66e5270a58724">redirecting_reason_build_data</a>(data + pos, datalen - pos, &amp;redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#aa17ec85399145e14c9f08d81a2261231">orig_reason</a>,</div><div class="line"><a name="l09554"></a><span class="lineno"> 9554</span>&#160;         <span class="stringliteral">&quot;redirecting-orig-reason&quot;</span>, &amp;orig_reason_ies);</div><div class="line"><a name="l09555"></a><span class="lineno"> 9555</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l09556"></a><span class="lineno"> 9556</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l09557"></a><span class="lineno"> 9557</span>&#160;   }</div><div class="line"><a name="l09558"></a><span class="lineno"> 9558</span>&#160;   pos += res;</div><div class="line"><a name="l09559"></a><span class="lineno"> 9559</span>&#160;</div><div class="line"><a name="l09560"></a><span class="lineno"> 9560</span>&#160;   <span class="comment">/* Redirecting count */</span></div><div class="line"><a name="l09561"></a><span class="lineno"> 9561</span>&#160;   <span class="keywordflow">if</span> (datalen &lt; pos + (<span class="keyword">sizeof</span>(data[0]) * 2) + <span class="keyword">sizeof</span>(value)) {</div><div class="line"><a name="l09562"></a><span class="lineno"> 9562</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No space left for redirecting count\n&quot;</span>);</div><div class="line"><a name="l09563"></a><span class="lineno"> 9563</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l09564"></a><span class="lineno"> 9564</span>&#160;   }</div><div class="line"><a name="l09565"></a><span class="lineno"> 9565</span>&#160;   data[pos++] = <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a86383247bc5ded6d5522d25139a71f4e">AST_REDIRECTING_COUNT</a>;</div><div class="line"><a name="l09566"></a><span class="lineno"> 9566</span>&#160;   data[pos++] = <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>);</div><div class="line"><a name="l09567"></a><span class="lineno"> 9567</span>&#160;   value = htonl(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a>);</div><div class="line"><a name="l09568"></a><span class="lineno"> 9568</span>&#160;   memcpy(data + pos, &amp;value, <span class="keyword">sizeof</span>(value));</div><div class="line"><a name="l09569"></a><span class="lineno"> 9569</span>&#160;   pos += <span class="keyword">sizeof</span>(<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>);</div><div class="line"><a name="l09570"></a><span class="lineno"> 9570</span>&#160;</div><div class="line"><a name="l09571"></a><span class="lineno"> 9571</span>&#160;   <span class="keywordflow">return</span> pos;</div><div class="line"><a name="l09572"></a><span class="lineno"> 9572</span>&#160;}</div><div class="line"><a name="l09573"></a><span class="lineno"> 9573</span>&#160;</div><div class="line"><a name="l09574"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ac16b3b36606ee9db374e8d9f2b7dea88"> 9574</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#ac16b3b36606ee9db374e8d9f2b7dea88">ast_redirecting_parse_data</a>(<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *data, <span class="keywordtype">size_t</span> datalen, <span class="keyword">struct</span> <a class="code" href="../../df/d44/structast__party__redirecting.html">ast_party_redirecting</a> *redirecting)</div><div class="line"><a name="l09575"></a><span class="lineno"> 9575</span>&#160;{</div><div class="line"><a name="l09576"></a><span class="lineno"> 9576</span>&#160;   <span class="keywordtype">size_t</span> pos;</div><div class="line"><a name="l09577"></a><span class="lineno"> 9577</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> ie_len;</div><div class="line"><a name="l09578"></a><span class="lineno"> 9578</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> ie_id;</div><div class="line"><a name="l09579"></a><span class="lineno"> 9579</span>&#160;   <a class="code" href="../../da/d4e/db_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a> <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;</div><div class="line"><a name="l09580"></a><span class="lineno"> 9580</span>&#160;   <span class="keywordtype">int</span> frame_version = 1;</div><div class="line"><a name="l09581"></a><span class="lineno"> 9581</span>&#160;   <span class="keywordtype">int</span> from_combined_presentation = 0;</div><div class="line"><a name="l09582"></a><span class="lineno"> 9582</span>&#160;   <span class="keywordtype">int</span> got_from_combined_presentation = 0;<span class="comment">/* TRUE if got a combined name and number presentation value. */</span></div><div class="line"><a name="l09583"></a><span class="lineno"> 9583</span>&#160;   <span class="keywordtype">int</span> to_combined_presentation = 0;</div><div class="line"><a name="l09584"></a><span class="lineno"> 9584</span>&#160;   <span class="keywordtype">int</span> got_to_combined_presentation = 0;<span class="comment">/* TRUE if got a combined name and number presentation value. */</span></div><div class="line"><a name="l09585"></a><span class="lineno"> 9585</span>&#160;</div><div class="line"><a name="l09586"></a><span class="lineno"> 9586</span>&#160;   <span class="keywordflow">for</span> (pos = 0; pos &lt; datalen; pos += ie_len) {</div><div class="line"><a name="l09587"></a><span class="lineno"> 9587</span>&#160;      <span class="keywordflow">if</span> (datalen &lt; pos + <span class="keyword">sizeof</span>(ie_id) + <span class="keyword">sizeof</span>(ie_len)) {</div><div class="line"><a name="l09588"></a><span class="lineno"> 9588</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirecting update\n&quot;</span>);</div><div class="line"><a name="l09589"></a><span class="lineno"> 9589</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l09590"></a><span class="lineno"> 9590</span>&#160;      }</div><div class="line"><a name="l09591"></a><span class="lineno"> 9591</span>&#160;      ie_id = data[pos++];</div><div class="line"><a name="l09592"></a><span class="lineno"> 9592</span>&#160;      ie_len = data[pos++];</div><div class="line"><a name="l09593"></a><span class="lineno"> 9593</span>&#160;      <span class="keywordflow">if</span> (datalen &lt; pos + ie_len) {</div><div class="line"><a name="l09594"></a><span class="lineno"> 9594</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirecting update\n&quot;</span>);</div><div class="line"><a name="l09595"></a><span class="lineno"> 9595</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l09596"></a><span class="lineno"> 9596</span>&#160;      }</div><div class="line"><a name="l09597"></a><span class="lineno"> 9597</span>&#160;</div><div class="line"><a name="l09598"></a><span class="lineno"> 9598</span>&#160;      <span class="keywordflow">switch</span> (ie_id) {</div><div class="line"><a name="l09599"></a><span class="lineno"> 9599</span>&#160;<span class="comment">/* Redirecting frame version */</span></div><div class="line"><a name="l09600"></a><span class="lineno"> 9600</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a047c4250fa40757e25c1a41549d1678d">AST_REDIRECTING_VERSION</a>:</div><div class="line"><a name="l09601"></a><span class="lineno"> 9601</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09602"></a><span class="lineno"> 9602</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirecting frame version (%u)\n&quot;</span>,</div><div class="line"><a name="l09603"></a><span class="lineno"> 9603</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09604"></a><span class="lineno"> 9604</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09605"></a><span class="lineno"> 9605</span>&#160;         }</div><div class="line"><a name="l09606"></a><span class="lineno"> 9606</span>&#160;         frame_version = data[pos];</div><div class="line"><a name="l09607"></a><span class="lineno"> 9607</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09608"></a><span class="lineno"> 9608</span>&#160;<span class="comment">/* Redirecting-orig party id name */</span></div><div class="line"><a name="l09609"></a><span class="lineno"> 9609</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a542fff7c60e1adb2cfdb8ec7374f405a">AST_REDIRECTING_ORIG_NAME</a>:</div><div class="line"><a name="l09610"></a><span class="lineno"> 9610</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l09611"></a><span class="lineno"> 9611</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l09612"></a><span class="lineno"> 9612</span>&#160;         <span class="keywordflow">if</span> (redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l09613"></a><span class="lineno"> 9613</span>&#160;            memcpy(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, data + pos, ie_len);</div><div class="line"><a name="l09614"></a><span class="lineno"> 9614</span>&#160;            redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>[ie_len] = 0;</div><div class="line"><a name="l09615"></a><span class="lineno"> 9615</span>&#160;         }</div><div class="line"><a name="l09616"></a><span class="lineno"> 9616</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09617"></a><span class="lineno"> 9617</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a4c11b286f8baee30d3b56a2c31fe26a6">AST_REDIRECTING_ORIG_NAME_CHAR_SET</a>:</div><div class="line"><a name="l09618"></a><span class="lineno"> 9618</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09619"></a><span class="lineno"> 9619</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirecting-orig name char set (%u)\n&quot;</span>,</div><div class="line"><a name="l09620"></a><span class="lineno"> 9620</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09621"></a><span class="lineno"> 9621</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09622"></a><span class="lineno"> 9622</span>&#160;         }</div><div class="line"><a name="l09623"></a><span class="lineno"> 9623</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#a1fb9f03e5de01bf0a8f221e627fa9a7b">char_set</a> = data[pos];</div><div class="line"><a name="l09624"></a><span class="lineno"> 9624</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09625"></a><span class="lineno"> 9625</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aa69ffee94d2e9d2e61ffc6001b6d21cb">AST_REDIRECTING_ORIG_NAME_PRESENTATION</a>:</div><div class="line"><a name="l09626"></a><span class="lineno"> 9626</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09627"></a><span class="lineno"> 9627</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirecting-orig name presentation (%u)\n&quot;</span>,</div><div class="line"><a name="l09628"></a><span class="lineno"> 9628</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09629"></a><span class="lineno"> 9629</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09630"></a><span class="lineno"> 9630</span>&#160;         }</div><div class="line"><a name="l09631"></a><span class="lineno"> 9631</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = data[pos];</div><div class="line"><a name="l09632"></a><span class="lineno"> 9632</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09633"></a><span class="lineno"> 9633</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a8ce72111eb5b123e60d20805d5fec33a">AST_REDIRECTING_ORIG_NAME_VALID</a>:</div><div class="line"><a name="l09634"></a><span class="lineno"> 9634</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09635"></a><span class="lineno"> 9635</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirecting-orig name valid (%u)\n&quot;</span>,</div><div class="line"><a name="l09636"></a><span class="lineno"> 9636</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09637"></a><span class="lineno"> 9637</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09638"></a><span class="lineno"> 9638</span>&#160;         }</div><div class="line"><a name="l09639"></a><span class="lineno"> 9639</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = data[pos];</div><div class="line"><a name="l09640"></a><span class="lineno"> 9640</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09641"></a><span class="lineno"> 9641</span>&#160;<span class="comment">/* Redirecting-orig party id number */</span></div><div class="line"><a name="l09642"></a><span class="lineno"> 9642</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aad9cb668db1da7081ab78c0fe126e1fa">AST_REDIRECTING_ORIG_NUMBER</a>:</div><div class="line"><a name="l09643"></a><span class="lineno"> 9643</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l09644"></a><span class="lineno"> 9644</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l09645"></a><span class="lineno"> 9645</span>&#160;         <span class="keywordflow">if</span> (redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l09646"></a><span class="lineno"> 9646</span>&#160;            memcpy(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, data + pos, ie_len);</div><div class="line"><a name="l09647"></a><span class="lineno"> 9647</span>&#160;            redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>[ie_len] = 0;</div><div class="line"><a name="l09648"></a><span class="lineno"> 9648</span>&#160;         }</div><div class="line"><a name="l09649"></a><span class="lineno"> 9649</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09650"></a><span class="lineno"> 9650</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ae4c88e98038cbcde758114eb2b3bc805">AST_REDIRECTING_ORIG_NUMBER_PLAN</a>:</div><div class="line"><a name="l09651"></a><span class="lineno"> 9651</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09652"></a><span class="lineno"> 9652</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirecting-orig numbering plan (%u)\n&quot;</span>,</div><div class="line"><a name="l09653"></a><span class="lineno"> 9653</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09654"></a><span class="lineno"> 9654</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09655"></a><span class="lineno"> 9655</span>&#160;         }</div><div class="line"><a name="l09656"></a><span class="lineno"> 9656</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a> = data[pos];</div><div class="line"><a name="l09657"></a><span class="lineno"> 9657</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09658"></a><span class="lineno"> 9658</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792adadd765c09505110715245dd132a7eb9">AST_REDIRECTING_ORIG_NUMBER_PRESENTATION</a>:</div><div class="line"><a name="l09659"></a><span class="lineno"> 9659</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09660"></a><span class="lineno"> 9660</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirecting-orig number presentation (%u)\n&quot;</span>,</div><div class="line"><a name="l09661"></a><span class="lineno"> 9661</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09662"></a><span class="lineno"> 9662</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09663"></a><span class="lineno"> 9663</span>&#160;         }</div><div class="line"><a name="l09664"></a><span class="lineno"> 9664</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = data[pos];</div><div class="line"><a name="l09665"></a><span class="lineno"> 9665</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09666"></a><span class="lineno"> 9666</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a2aaaaeed05df585c75e3930a51e63e65">AST_REDIRECTING_ORIG_NUMBER_VALID</a>:</div><div class="line"><a name="l09667"></a><span class="lineno"> 9667</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09668"></a><span class="lineno"> 9668</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirecting-orig number valid (%u)\n&quot;</span>,</div><div class="line"><a name="l09669"></a><span class="lineno"> 9669</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09670"></a><span class="lineno"> 9670</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09671"></a><span class="lineno"> 9671</span>&#160;         }</div><div class="line"><a name="l09672"></a><span class="lineno"> 9672</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = data[pos];</div><div class="line"><a name="l09673"></a><span class="lineno"> 9673</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09674"></a><span class="lineno"> 9674</span>&#160;<span class="comment">/* Redirecting-orig party id subaddress */</span></div><div class="line"><a name="l09675"></a><span class="lineno"> 9675</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a5841e97e13068cfd2102214ba2ea123c">AST_REDIRECTING_ORIG_SUBADDRESS</a>:</div><div class="line"><a name="l09676"></a><span class="lineno"> 9676</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l09677"></a><span class="lineno"> 9677</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l09678"></a><span class="lineno"> 9678</span>&#160;         <span class="keywordflow">if</span> (redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l09679"></a><span class="lineno"> 9679</span>&#160;            memcpy(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, data + pos, ie_len);</div><div class="line"><a name="l09680"></a><span class="lineno"> 9680</span>&#160;            redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>[ie_len] = 0;</div><div class="line"><a name="l09681"></a><span class="lineno"> 9681</span>&#160;         }</div><div class="line"><a name="l09682"></a><span class="lineno"> 9682</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09683"></a><span class="lineno"> 9683</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a698ba152c9d2f83238f68027489fec8a">AST_REDIRECTING_ORIG_SUBADDRESS_TYPE</a>:</div><div class="line"><a name="l09684"></a><span class="lineno"> 9684</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09685"></a><span class="lineno"> 9685</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirecting-orig type of subaddress (%u)\n&quot;</span>,</div><div class="line"><a name="l09686"></a><span class="lineno"> 9686</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09687"></a><span class="lineno"> 9687</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09688"></a><span class="lineno"> 9688</span>&#160;         }</div><div class="line"><a name="l09689"></a><span class="lineno"> 9689</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ac765329451135abec74c45e1897abf26">type</a> = data[pos];</div><div class="line"><a name="l09690"></a><span class="lineno"> 9690</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09691"></a><span class="lineno"> 9691</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a3ec117aa2243c795905553454c5d114b">AST_REDIRECTING_ORIG_SUBADDRESS_ODD_EVEN</a>:</div><div class="line"><a name="l09692"></a><span class="lineno"> 9692</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09693"></a><span class="lineno"> 9693</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,</div><div class="line"><a name="l09694"></a><span class="lineno"> 9694</span>&#160;               <span class="stringliteral">&quot;Invalid redirecting-orig subaddress odd-even indicator (%u)\n&quot;</span>,</div><div class="line"><a name="l09695"></a><span class="lineno"> 9695</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09696"></a><span class="lineno"> 9696</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09697"></a><span class="lineno"> 9697</span>&#160;         }</div><div class="line"><a name="l09698"></a><span class="lineno"> 9698</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#a141590e40aa10259d3c0bc722725e7ad">odd_even_indicator</a> = data[pos];</div><div class="line"><a name="l09699"></a><span class="lineno"> 9699</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09700"></a><span class="lineno"> 9700</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a325c1d3b34c0636fe2dcf4a7224515de">AST_REDIRECTING_ORIG_SUBADDRESS_VALID</a>:</div><div class="line"><a name="l09701"></a><span class="lineno"> 9701</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09702"></a><span class="lineno"> 9702</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirecting-orig subaddress valid (%u)\n&quot;</span>,</div><div class="line"><a name="l09703"></a><span class="lineno"> 9703</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09704"></a><span class="lineno"> 9704</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09705"></a><span class="lineno"> 9705</span>&#160;         }</div><div class="line"><a name="l09706"></a><span class="lineno"> 9706</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = data[pos];</div><div class="line"><a name="l09707"></a><span class="lineno"> 9707</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09708"></a><span class="lineno"> 9708</span>&#160;<span class="comment">/* Redirecting-orig party id tag */</span></div><div class="line"><a name="l09709"></a><span class="lineno"> 9709</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a188aabe2f4692c9d4426d6bec1b8202f">AST_REDIRECTING_ORIG_TAG</a>:</div><div class="line"><a name="l09710"></a><span class="lineno"> 9710</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>);</div><div class="line"><a name="l09711"></a><span class="lineno"> 9711</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l09712"></a><span class="lineno"> 9712</span>&#160;         <span class="keywordflow">if</span> (redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>) {</div><div class="line"><a name="l09713"></a><span class="lineno"> 9713</span>&#160;            memcpy(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>, data + pos, ie_len);</div><div class="line"><a name="l09714"></a><span class="lineno"> 9714</span>&#160;            redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>[ie_len] = 0;</div><div class="line"><a name="l09715"></a><span class="lineno"> 9715</span>&#160;         }</div><div class="line"><a name="l09716"></a><span class="lineno"> 9716</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09717"></a><span class="lineno"> 9717</span>&#160;<span class="comment">/* Redirecting-from party id name */</span></div><div class="line"><a name="l09718"></a><span class="lineno"> 9718</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ac5112be19c8d91662fe0004f75f617d8">AST_REDIRECTING_FROM_NAME</a>:</div><div class="line"><a name="l09719"></a><span class="lineno"> 9719</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l09720"></a><span class="lineno"> 9720</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l09721"></a><span class="lineno"> 9721</span>&#160;         <span class="keywordflow">if</span> (redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l09722"></a><span class="lineno"> 9722</span>&#160;            memcpy(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, data + pos, ie_len);</div><div class="line"><a name="l09723"></a><span class="lineno"> 9723</span>&#160;            redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>[ie_len] = 0;</div><div class="line"><a name="l09724"></a><span class="lineno"> 9724</span>&#160;         }</div><div class="line"><a name="l09725"></a><span class="lineno"> 9725</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09726"></a><span class="lineno"> 9726</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a6a1b17f93a20f21bf186af1b5994ab00">AST_REDIRECTING_FROM_NAME_CHAR_SET</a>:</div><div class="line"><a name="l09727"></a><span class="lineno"> 9727</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09728"></a><span class="lineno"> 9728</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirecting-from name char set (%u)\n&quot;</span>,</div><div class="line"><a name="l09729"></a><span class="lineno"> 9729</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09730"></a><span class="lineno"> 9730</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09731"></a><span class="lineno"> 9731</span>&#160;         }</div><div class="line"><a name="l09732"></a><span class="lineno"> 9732</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#a1fb9f03e5de01bf0a8f221e627fa9a7b">char_set</a> = data[pos];</div><div class="line"><a name="l09733"></a><span class="lineno"> 9733</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09734"></a><span class="lineno"> 9734</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a01a4aa5b3dc6e6ebadb3c7b93a313668">AST_REDIRECTING_FROM_NAME_PRESENTATION</a>:</div><div class="line"><a name="l09735"></a><span class="lineno"> 9735</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09736"></a><span class="lineno"> 9736</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirecting-from name presentation (%u)\n&quot;</span>,</div><div class="line"><a name="l09737"></a><span class="lineno"> 9737</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09738"></a><span class="lineno"> 9738</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09739"></a><span class="lineno"> 9739</span>&#160;         }</div><div class="line"><a name="l09740"></a><span class="lineno"> 9740</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = data[pos];</div><div class="line"><a name="l09741"></a><span class="lineno"> 9741</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09742"></a><span class="lineno"> 9742</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a7ac0a7bfda5149c11a42afc070d8b39a">AST_REDIRECTING_FROM_NAME_VALID</a>:</div><div class="line"><a name="l09743"></a><span class="lineno"> 9743</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09744"></a><span class="lineno"> 9744</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirecting-from name valid (%u)\n&quot;</span>,</div><div class="line"><a name="l09745"></a><span class="lineno"> 9745</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09746"></a><span class="lineno"> 9746</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09747"></a><span class="lineno"> 9747</span>&#160;         }</div><div class="line"><a name="l09748"></a><span class="lineno"> 9748</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = data[pos];</div><div class="line"><a name="l09749"></a><span class="lineno"> 9749</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09750"></a><span class="lineno"> 9750</span>&#160;<span class="comment">/* Redirecting-from party id number */</span></div><div class="line"><a name="l09751"></a><span class="lineno"> 9751</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ae45642d62d251e74f63046bef953c5c9">AST_REDIRECTING_FROM_NUMBER</a>:</div><div class="line"><a name="l09752"></a><span class="lineno"> 9752</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l09753"></a><span class="lineno"> 9753</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l09754"></a><span class="lineno"> 9754</span>&#160;         <span class="keywordflow">if</span> (redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l09755"></a><span class="lineno"> 9755</span>&#160;            memcpy(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, data + pos, ie_len);</div><div class="line"><a name="l09756"></a><span class="lineno"> 9756</span>&#160;            redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>[ie_len] = 0;</div><div class="line"><a name="l09757"></a><span class="lineno"> 9757</span>&#160;         }</div><div class="line"><a name="l09758"></a><span class="lineno"> 9758</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09759"></a><span class="lineno"> 9759</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a11a85e8e51317d5b57317a761c8e6921">AST_REDIRECTING_FROM_NUMBER_PLAN</a>:</div><div class="line"><a name="l09760"></a><span class="lineno"> 9760</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09761"></a><span class="lineno"> 9761</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirecting-from numbering plan (%u)\n&quot;</span>,</div><div class="line"><a name="l09762"></a><span class="lineno"> 9762</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09763"></a><span class="lineno"> 9763</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09764"></a><span class="lineno"> 9764</span>&#160;         }</div><div class="line"><a name="l09765"></a><span class="lineno"> 9765</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a> = data[pos];</div><div class="line"><a name="l09766"></a><span class="lineno"> 9766</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09767"></a><span class="lineno"> 9767</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a2bc1562da560648c0471d7d8e74ce7ff">AST_REDIRECTING_FROM_NUMBER_PRESENTATION</a>:</div><div class="line"><a name="l09768"></a><span class="lineno"> 9768</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09769"></a><span class="lineno"> 9769</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirecting-from number presentation (%u)\n&quot;</span>,</div><div class="line"><a name="l09770"></a><span class="lineno"> 9770</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09771"></a><span class="lineno"> 9771</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09772"></a><span class="lineno"> 9772</span>&#160;         }</div><div class="line"><a name="l09773"></a><span class="lineno"> 9773</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = data[pos];</div><div class="line"><a name="l09774"></a><span class="lineno"> 9774</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09775"></a><span class="lineno"> 9775</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a3458c569979f7c11bb5a8a638748c128">AST_REDIRECTING_FROM_NUMBER_VALID</a>:</div><div class="line"><a name="l09776"></a><span class="lineno"> 9776</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09777"></a><span class="lineno"> 9777</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirecting-from number valid (%u)\n&quot;</span>,</div><div class="line"><a name="l09778"></a><span class="lineno"> 9778</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09779"></a><span class="lineno"> 9779</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09780"></a><span class="lineno"> 9780</span>&#160;         }</div><div class="line"><a name="l09781"></a><span class="lineno"> 9781</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = data[pos];</div><div class="line"><a name="l09782"></a><span class="lineno"> 9782</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09783"></a><span class="lineno"> 9783</span>&#160;<span class="comment">/* Redirecting-from party id combined presentation */</span></div><div class="line"><a name="l09784"></a><span class="lineno"> 9784</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a6e7abe0b2f38c10fc8291690362e1864">AST_REDIRECTING_FROM_ID_PRESENTATION</a>:</div><div class="line"><a name="l09785"></a><span class="lineno"> 9785</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09786"></a><span class="lineno"> 9786</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirecting-from combined presentation (%u)\n&quot;</span>,</div><div class="line"><a name="l09787"></a><span class="lineno"> 9787</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09788"></a><span class="lineno"> 9788</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09789"></a><span class="lineno"> 9789</span>&#160;         }</div><div class="line"><a name="l09790"></a><span class="lineno"> 9790</span>&#160;         from_combined_presentation = data[pos];</div><div class="line"><a name="l09791"></a><span class="lineno"> 9791</span>&#160;         got_from_combined_presentation = 1;</div><div class="line"><a name="l09792"></a><span class="lineno"> 9792</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09793"></a><span class="lineno"> 9793</span>&#160;<span class="comment">/* Redirecting-from party id subaddress */</span></div><div class="line"><a name="l09794"></a><span class="lineno"> 9794</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a870806e047987e8783b016efc0b89d7d">AST_REDIRECTING_FROM_SUBADDRESS</a>:</div><div class="line"><a name="l09795"></a><span class="lineno"> 9795</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l09796"></a><span class="lineno"> 9796</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l09797"></a><span class="lineno"> 9797</span>&#160;         <span class="keywordflow">if</span> (redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l09798"></a><span class="lineno"> 9798</span>&#160;            memcpy(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, data + pos, ie_len);</div><div class="line"><a name="l09799"></a><span class="lineno"> 9799</span>&#160;            redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>[ie_len] = 0;</div><div class="line"><a name="l09800"></a><span class="lineno"> 9800</span>&#160;         }</div><div class="line"><a name="l09801"></a><span class="lineno"> 9801</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09802"></a><span class="lineno"> 9802</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a8339363342c936dff645699b6018ee61">AST_REDIRECTING_FROM_SUBADDRESS_TYPE</a>:</div><div class="line"><a name="l09803"></a><span class="lineno"> 9803</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09804"></a><span class="lineno"> 9804</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirecting-from type of subaddress (%u)\n&quot;</span>,</div><div class="line"><a name="l09805"></a><span class="lineno"> 9805</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09806"></a><span class="lineno"> 9806</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09807"></a><span class="lineno"> 9807</span>&#160;         }</div><div class="line"><a name="l09808"></a><span class="lineno"> 9808</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ac765329451135abec74c45e1897abf26">type</a> = data[pos];</div><div class="line"><a name="l09809"></a><span class="lineno"> 9809</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09810"></a><span class="lineno"> 9810</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aec8bf7b5a59cb1e1f66144d23f637135">AST_REDIRECTING_FROM_SUBADDRESS_ODD_EVEN</a>:</div><div class="line"><a name="l09811"></a><span class="lineno"> 9811</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09812"></a><span class="lineno"> 9812</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,</div><div class="line"><a name="l09813"></a><span class="lineno"> 9813</span>&#160;               <span class="stringliteral">&quot;Invalid redirecting-from subaddress odd-even indicator (%u)\n&quot;</span>,</div><div class="line"><a name="l09814"></a><span class="lineno"> 9814</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09815"></a><span class="lineno"> 9815</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09816"></a><span class="lineno"> 9816</span>&#160;         }</div><div class="line"><a name="l09817"></a><span class="lineno"> 9817</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#a141590e40aa10259d3c0bc722725e7ad">odd_even_indicator</a> = data[pos];</div><div class="line"><a name="l09818"></a><span class="lineno"> 9818</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09819"></a><span class="lineno"> 9819</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a791a8bb58907175482ac845835c0c678">AST_REDIRECTING_FROM_SUBADDRESS_VALID</a>:</div><div class="line"><a name="l09820"></a><span class="lineno"> 9820</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09821"></a><span class="lineno"> 9821</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirecting-from subaddress valid (%u)\n&quot;</span>,</div><div class="line"><a name="l09822"></a><span class="lineno"> 9822</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09823"></a><span class="lineno"> 9823</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09824"></a><span class="lineno"> 9824</span>&#160;         }</div><div class="line"><a name="l09825"></a><span class="lineno"> 9825</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = data[pos];</div><div class="line"><a name="l09826"></a><span class="lineno"> 9826</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09827"></a><span class="lineno"> 9827</span>&#160;<span class="comment">/* Redirecting-from party id tag */</span></div><div class="line"><a name="l09828"></a><span class="lineno"> 9828</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a586c5b85860b6b141d950b7927b85d0a">AST_REDIRECTING_FROM_TAG</a>:</div><div class="line"><a name="l09829"></a><span class="lineno"> 9829</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>);</div><div class="line"><a name="l09830"></a><span class="lineno"> 9830</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l09831"></a><span class="lineno"> 9831</span>&#160;         <span class="keywordflow">if</span> (redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>) {</div><div class="line"><a name="l09832"></a><span class="lineno"> 9832</span>&#160;            memcpy(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>, data + pos, ie_len);</div><div class="line"><a name="l09833"></a><span class="lineno"> 9833</span>&#160;            redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>[ie_len] = 0;</div><div class="line"><a name="l09834"></a><span class="lineno"> 9834</span>&#160;         }</div><div class="line"><a name="l09835"></a><span class="lineno"> 9835</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09836"></a><span class="lineno"> 9836</span>&#160;<span class="comment">/* Redirecting-to party id name */</span></div><div class="line"><a name="l09837"></a><span class="lineno"> 9837</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a02797e73caf534e0d40baa6f03e3d3f4">AST_REDIRECTING_TO_NAME</a>:</div><div class="line"><a name="l09838"></a><span class="lineno"> 9838</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l09839"></a><span class="lineno"> 9839</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l09840"></a><span class="lineno"> 9840</span>&#160;         <span class="keywordflow">if</span> (redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l09841"></a><span class="lineno"> 9841</span>&#160;            memcpy(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, data + pos, ie_len);</div><div class="line"><a name="l09842"></a><span class="lineno"> 9842</span>&#160;            redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>[ie_len] = 0;</div><div class="line"><a name="l09843"></a><span class="lineno"> 9843</span>&#160;         }</div><div class="line"><a name="l09844"></a><span class="lineno"> 9844</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09845"></a><span class="lineno"> 9845</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792af393eae44971089a6f6c075e0dc280f7">AST_REDIRECTING_TO_NAME_CHAR_SET</a>:</div><div class="line"><a name="l09846"></a><span class="lineno"> 9846</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09847"></a><span class="lineno"> 9847</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirecting-to name char set (%u)\n&quot;</span>,</div><div class="line"><a name="l09848"></a><span class="lineno"> 9848</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09849"></a><span class="lineno"> 9849</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09850"></a><span class="lineno"> 9850</span>&#160;         }</div><div class="line"><a name="l09851"></a><span class="lineno"> 9851</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#a1fb9f03e5de01bf0a8f221e627fa9a7b">char_set</a> = data[pos];</div><div class="line"><a name="l09852"></a><span class="lineno"> 9852</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09853"></a><span class="lineno"> 9853</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a2236897b5f92120e3f949c4e2fa08d8e">AST_REDIRECTING_TO_NAME_PRESENTATION</a>:</div><div class="line"><a name="l09854"></a><span class="lineno"> 9854</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09855"></a><span class="lineno"> 9855</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirecting-to name presentation (%u)\n&quot;</span>,</div><div class="line"><a name="l09856"></a><span class="lineno"> 9856</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09857"></a><span class="lineno"> 9857</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09858"></a><span class="lineno"> 9858</span>&#160;         }</div><div class="line"><a name="l09859"></a><span class="lineno"> 9859</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = data[pos];</div><div class="line"><a name="l09860"></a><span class="lineno"> 9860</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09861"></a><span class="lineno"> 9861</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a38eedeffc3b8c533b3d4d885a401fcf2">AST_REDIRECTING_TO_NAME_VALID</a>:</div><div class="line"><a name="l09862"></a><span class="lineno"> 9862</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09863"></a><span class="lineno"> 9863</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirecting-to name valid (%u)\n&quot;</span>,</div><div class="line"><a name="l09864"></a><span class="lineno"> 9864</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09865"></a><span class="lineno"> 9865</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09866"></a><span class="lineno"> 9866</span>&#160;         }</div><div class="line"><a name="l09867"></a><span class="lineno"> 9867</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = data[pos];</div><div class="line"><a name="l09868"></a><span class="lineno"> 9868</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09869"></a><span class="lineno"> 9869</span>&#160;<span class="comment">/* Redirecting-to party id number */</span></div><div class="line"><a name="l09870"></a><span class="lineno"> 9870</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a667da7258b9fb30232ba5371a691aa9b">AST_REDIRECTING_TO_NUMBER</a>:</div><div class="line"><a name="l09871"></a><span class="lineno"> 9871</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l09872"></a><span class="lineno"> 9872</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l09873"></a><span class="lineno"> 9873</span>&#160;         <span class="keywordflow">if</span> (redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l09874"></a><span class="lineno"> 9874</span>&#160;            memcpy(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, data + pos, ie_len);</div><div class="line"><a name="l09875"></a><span class="lineno"> 9875</span>&#160;            redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>[ie_len] = 0;</div><div class="line"><a name="l09876"></a><span class="lineno"> 9876</span>&#160;         }</div><div class="line"><a name="l09877"></a><span class="lineno"> 9877</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09878"></a><span class="lineno"> 9878</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a4e7a7b87975e192e7b0e52a3da89b5b6">AST_REDIRECTING_TO_NUMBER_PLAN</a>:</div><div class="line"><a name="l09879"></a><span class="lineno"> 9879</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09880"></a><span class="lineno"> 9880</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirecting-to numbering plan (%u)\n&quot;</span>,</div><div class="line"><a name="l09881"></a><span class="lineno"> 9881</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09882"></a><span class="lineno"> 9882</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09883"></a><span class="lineno"> 9883</span>&#160;         }</div><div class="line"><a name="l09884"></a><span class="lineno"> 9884</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a> = data[pos];</div><div class="line"><a name="l09885"></a><span class="lineno"> 9885</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09886"></a><span class="lineno"> 9886</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ae132d231e169ff864606c416bf2b5b25">AST_REDIRECTING_TO_NUMBER_PRESENTATION</a>:</div><div class="line"><a name="l09887"></a><span class="lineno"> 9887</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09888"></a><span class="lineno"> 9888</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirecting-to number presentation (%u)\n&quot;</span>,</div><div class="line"><a name="l09889"></a><span class="lineno"> 9889</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09890"></a><span class="lineno"> 9890</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09891"></a><span class="lineno"> 9891</span>&#160;         }</div><div class="line"><a name="l09892"></a><span class="lineno"> 9892</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = data[pos];</div><div class="line"><a name="l09893"></a><span class="lineno"> 9893</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09894"></a><span class="lineno"> 9894</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a777afaccdfee5a46245cedbb2e859acd">AST_REDIRECTING_TO_NUMBER_VALID</a>:</div><div class="line"><a name="l09895"></a><span class="lineno"> 9895</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09896"></a><span class="lineno"> 9896</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirecting-to number valid (%u)\n&quot;</span>,</div><div class="line"><a name="l09897"></a><span class="lineno"> 9897</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09898"></a><span class="lineno"> 9898</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09899"></a><span class="lineno"> 9899</span>&#160;         }</div><div class="line"><a name="l09900"></a><span class="lineno"> 9900</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = data[pos];</div><div class="line"><a name="l09901"></a><span class="lineno"> 9901</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09902"></a><span class="lineno"> 9902</span>&#160;<span class="comment">/* Redirecting-to party id combined presentation */</span></div><div class="line"><a name="l09903"></a><span class="lineno"> 9903</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a8ee7de1f9dc8459b1e5bfb4c8cbd8b1a">AST_REDIRECTING_TO_ID_PRESENTATION</a>:</div><div class="line"><a name="l09904"></a><span class="lineno"> 9904</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09905"></a><span class="lineno"> 9905</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirecting-to combined presentation (%u)\n&quot;</span>,</div><div class="line"><a name="l09906"></a><span class="lineno"> 9906</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09907"></a><span class="lineno"> 9907</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09908"></a><span class="lineno"> 9908</span>&#160;         }</div><div class="line"><a name="l09909"></a><span class="lineno"> 9909</span>&#160;         to_combined_presentation = data[pos];</div><div class="line"><a name="l09910"></a><span class="lineno"> 9910</span>&#160;         got_to_combined_presentation = 1;</div><div class="line"><a name="l09911"></a><span class="lineno"> 9911</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09912"></a><span class="lineno"> 9912</span>&#160;<span class="comment">/* Redirecting-to party id subaddress */</span></div><div class="line"><a name="l09913"></a><span class="lineno"> 9913</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792af1daee1466e8256b8ca40f3aaa44aae9">AST_REDIRECTING_TO_SUBADDRESS</a>:</div><div class="line"><a name="l09914"></a><span class="lineno"> 9914</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l09915"></a><span class="lineno"> 9915</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l09916"></a><span class="lineno"> 9916</span>&#160;         <span class="keywordflow">if</span> (redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l09917"></a><span class="lineno"> 9917</span>&#160;            memcpy(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, data + pos, ie_len);</div><div class="line"><a name="l09918"></a><span class="lineno"> 9918</span>&#160;            redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>[ie_len] = 0;</div><div class="line"><a name="l09919"></a><span class="lineno"> 9919</span>&#160;         }</div><div class="line"><a name="l09920"></a><span class="lineno"> 9920</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09921"></a><span class="lineno"> 9921</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ac4425cf0f406dd0bf341beb87c8e8b5f">AST_REDIRECTING_TO_SUBADDRESS_TYPE</a>:</div><div class="line"><a name="l09922"></a><span class="lineno"> 9922</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09923"></a><span class="lineno"> 9923</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirecting-to type of subaddress (%u)\n&quot;</span>,</div><div class="line"><a name="l09924"></a><span class="lineno"> 9924</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09925"></a><span class="lineno"> 9925</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09926"></a><span class="lineno"> 9926</span>&#160;         }</div><div class="line"><a name="l09927"></a><span class="lineno"> 9927</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ac765329451135abec74c45e1897abf26">type</a> = data[pos];</div><div class="line"><a name="l09928"></a><span class="lineno"> 9928</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09929"></a><span class="lineno"> 9929</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a3b3724a87f3c5bfd700091011e01e0df">AST_REDIRECTING_TO_SUBADDRESS_ODD_EVEN</a>:</div><div class="line"><a name="l09930"></a><span class="lineno"> 9930</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09931"></a><span class="lineno"> 9931</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,</div><div class="line"><a name="l09932"></a><span class="lineno"> 9932</span>&#160;               <span class="stringliteral">&quot;Invalid redirecting-to subaddress odd-even indicator (%u)\n&quot;</span>,</div><div class="line"><a name="l09933"></a><span class="lineno"> 9933</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09934"></a><span class="lineno"> 9934</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09935"></a><span class="lineno"> 9935</span>&#160;         }</div><div class="line"><a name="l09936"></a><span class="lineno"> 9936</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#a141590e40aa10259d3c0bc722725e7ad">odd_even_indicator</a> = data[pos];</div><div class="line"><a name="l09937"></a><span class="lineno"> 9937</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09938"></a><span class="lineno"> 9938</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ac17c7d55ca7591ced257a733db5e551f">AST_REDIRECTING_TO_SUBADDRESS_VALID</a>:</div><div class="line"><a name="l09939"></a><span class="lineno"> 9939</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09940"></a><span class="lineno"> 9940</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirecting-to subaddress valid (%u)\n&quot;</span>,</div><div class="line"><a name="l09941"></a><span class="lineno"> 9941</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09942"></a><span class="lineno"> 9942</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09943"></a><span class="lineno"> 9943</span>&#160;         }</div><div class="line"><a name="l09944"></a><span class="lineno"> 9944</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = data[pos];</div><div class="line"><a name="l09945"></a><span class="lineno"> 9945</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09946"></a><span class="lineno"> 9946</span>&#160;<span class="comment">/* Redirecting-to party id tag */</span></div><div class="line"><a name="l09947"></a><span class="lineno"> 9947</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a09aa0e37716fdb65f50ee1c33c48093a">AST_REDIRECTING_TO_TAG</a>:</div><div class="line"><a name="l09948"></a><span class="lineno"> 9948</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>);</div><div class="line"><a name="l09949"></a><span class="lineno"> 9949</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l09950"></a><span class="lineno"> 9950</span>&#160;         <span class="keywordflow">if</span> (redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>) {</div><div class="line"><a name="l09951"></a><span class="lineno"> 9951</span>&#160;            memcpy(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>, data + pos, ie_len);</div><div class="line"><a name="l09952"></a><span class="lineno"> 9952</span>&#160;            redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>[ie_len] = 0;</div><div class="line"><a name="l09953"></a><span class="lineno"> 9953</span>&#160;         }</div><div class="line"><a name="l09954"></a><span class="lineno"> 9954</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09955"></a><span class="lineno"> 9955</span>&#160;<span class="comment">/* Private redirecting-orig party id name */</span></div><div class="line"><a name="l09956"></a><span class="lineno"> 9956</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aaddd1dfb5bf6cb498482095157f30694">AST_REDIRECTING_PRIV_ORIG_NAME</a>:</div><div class="line"><a name="l09957"></a><span class="lineno"> 9957</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l09958"></a><span class="lineno"> 9958</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l09959"></a><span class="lineno"> 9959</span>&#160;         <span class="keywordflow">if</span> (redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l09960"></a><span class="lineno"> 9960</span>&#160;            memcpy(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, data + pos, ie_len);</div><div class="line"><a name="l09961"></a><span class="lineno"> 9961</span>&#160;            redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>[ie_len] = 0;</div><div class="line"><a name="l09962"></a><span class="lineno"> 9962</span>&#160;         }</div><div class="line"><a name="l09963"></a><span class="lineno"> 9963</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09964"></a><span class="lineno"> 9964</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a8a34f9064e5ebb6712635180d1b50e18">AST_REDIRECTING_PRIV_ORIG_NAME_CHAR_SET</a>:</div><div class="line"><a name="l09965"></a><span class="lineno"> 9965</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09966"></a><span class="lineno"> 9966</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid private redirecting-orig name char set (%u)\n&quot;</span>,</div><div class="line"><a name="l09967"></a><span class="lineno"> 9967</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09968"></a><span class="lineno"> 9968</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09969"></a><span class="lineno"> 9969</span>&#160;         }</div><div class="line"><a name="l09970"></a><span class="lineno"> 9970</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#a1fb9f03e5de01bf0a8f221e627fa9a7b">char_set</a> = data[pos];</div><div class="line"><a name="l09971"></a><span class="lineno"> 9971</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09972"></a><span class="lineno"> 9972</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ae0e76bbbf85849ec57854baf6209d9dc">AST_REDIRECTING_PRIV_ORIG_NAME_PRESENTATION</a>:</div><div class="line"><a name="l09973"></a><span class="lineno"> 9973</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09974"></a><span class="lineno"> 9974</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid private redirecting-orig name presentation (%u)\n&quot;</span>,</div><div class="line"><a name="l09975"></a><span class="lineno"> 9975</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09976"></a><span class="lineno"> 9976</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09977"></a><span class="lineno"> 9977</span>&#160;         }</div><div class="line"><a name="l09978"></a><span class="lineno"> 9978</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = data[pos];</div><div class="line"><a name="l09979"></a><span class="lineno"> 9979</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09980"></a><span class="lineno"> 9980</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a2a6d2953d32856d91573ff12343be620">AST_REDIRECTING_PRIV_ORIG_NAME_VALID</a>:</div><div class="line"><a name="l09981"></a><span class="lineno"> 9981</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09982"></a><span class="lineno"> 9982</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid private redirecting-orig name valid (%u)\n&quot;</span>,</div><div class="line"><a name="l09983"></a><span class="lineno"> 9983</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l09984"></a><span class="lineno"> 9984</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l09985"></a><span class="lineno"> 9985</span>&#160;         }</div><div class="line"><a name="l09986"></a><span class="lineno"> 9986</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = data[pos];</div><div class="line"><a name="l09987"></a><span class="lineno"> 9987</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09988"></a><span class="lineno"> 9988</span>&#160;<span class="comment">/* Private redirecting-orig party id number */</span></div><div class="line"><a name="l09989"></a><span class="lineno"> 9989</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aca60d67300bbb8a4c85a0b61c597bed6">AST_REDIRECTING_PRIV_ORIG_NUMBER</a>:</div><div class="line"><a name="l09990"></a><span class="lineno"> 9990</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l09991"></a><span class="lineno"> 9991</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l09992"></a><span class="lineno"> 9992</span>&#160;         <span class="keywordflow">if</span> (redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l09993"></a><span class="lineno"> 9993</span>&#160;            memcpy(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, data + pos, ie_len);</div><div class="line"><a name="l09994"></a><span class="lineno"> 9994</span>&#160;            redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>[ie_len] = 0;</div><div class="line"><a name="l09995"></a><span class="lineno"> 9995</span>&#160;         }</div><div class="line"><a name="l09996"></a><span class="lineno"> 9996</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l09997"></a><span class="lineno"> 9997</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a5d643c7233f1c4f3c3780ab92b68fc38">AST_REDIRECTING_PRIV_ORIG_NUMBER_PLAN</a>:</div><div class="line"><a name="l09998"></a><span class="lineno"> 9998</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l09999"></a><span class="lineno"> 9999</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid private redirecting-orig numbering plan (%u)\n&quot;</span>,</div><div class="line"><a name="l10000"></a><span class="lineno">10000</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l10001"></a><span class="lineno">10001</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10002"></a><span class="lineno">10002</span>&#160;         }</div><div class="line"><a name="l10003"></a><span class="lineno">10003</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a> = data[pos];</div><div class="line"><a name="l10004"></a><span class="lineno">10004</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10005"></a><span class="lineno">10005</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792abec9b47588bcb77c6ce5878e2bba53b3">AST_REDIRECTING_PRIV_ORIG_NUMBER_PRESENTATION</a>:</div><div class="line"><a name="l10006"></a><span class="lineno">10006</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l10007"></a><span class="lineno">10007</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid private redirecting-orig number presentation (%u)\n&quot;</span>,</div><div class="line"><a name="l10008"></a><span class="lineno">10008</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l10009"></a><span class="lineno">10009</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10010"></a><span class="lineno">10010</span>&#160;         }</div><div class="line"><a name="l10011"></a><span class="lineno">10011</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = data[pos];</div><div class="line"><a name="l10012"></a><span class="lineno">10012</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10013"></a><span class="lineno">10013</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792abdf50828de27e42f1e70b612bb1003c5">AST_REDIRECTING_PRIV_ORIG_NUMBER_VALID</a>:</div><div class="line"><a name="l10014"></a><span class="lineno">10014</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l10015"></a><span class="lineno">10015</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid private redirecting-orig number valid (%u)\n&quot;</span>,</div><div class="line"><a name="l10016"></a><span class="lineno">10016</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l10017"></a><span class="lineno">10017</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10018"></a><span class="lineno">10018</span>&#160;         }</div><div class="line"><a name="l10019"></a><span class="lineno">10019</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = data[pos];</div><div class="line"><a name="l10020"></a><span class="lineno">10020</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10021"></a><span class="lineno">10021</span>&#160;<span class="comment">/* Private redirecting-orig party id subaddress */</span></div><div class="line"><a name="l10022"></a><span class="lineno">10022</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aef98a6b6c42a63441c640308a23b8dc6">AST_REDIRECTING_PRIV_ORIG_SUBADDRESS</a>:</div><div class="line"><a name="l10023"></a><span class="lineno">10023</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l10024"></a><span class="lineno">10024</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l10025"></a><span class="lineno">10025</span>&#160;         <span class="keywordflow">if</span> (redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l10026"></a><span class="lineno">10026</span>&#160;            memcpy(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, data + pos, ie_len);</div><div class="line"><a name="l10027"></a><span class="lineno">10027</span>&#160;            redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>[ie_len] = 0;</div><div class="line"><a name="l10028"></a><span class="lineno">10028</span>&#160;         }</div><div class="line"><a name="l10029"></a><span class="lineno">10029</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10030"></a><span class="lineno">10030</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a9cfe7eb77fd0a8715633cc805b680e4b">AST_REDIRECTING_PRIV_ORIG_SUBADDRESS_TYPE</a>:</div><div class="line"><a name="l10031"></a><span class="lineno">10031</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l10032"></a><span class="lineno">10032</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid private redirecting-orig type of subaddress (%u)\n&quot;</span>,</div><div class="line"><a name="l10033"></a><span class="lineno">10033</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l10034"></a><span class="lineno">10034</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10035"></a><span class="lineno">10035</span>&#160;         }</div><div class="line"><a name="l10036"></a><span class="lineno">10036</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ac765329451135abec74c45e1897abf26">type</a> = data[pos];</div><div class="line"><a name="l10037"></a><span class="lineno">10037</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10038"></a><span class="lineno">10038</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a18cf70ed9355f9f7ed5b1ec5615752f1">AST_REDIRECTING_PRIV_ORIG_SUBADDRESS_ODD_EVEN</a>:</div><div class="line"><a name="l10039"></a><span class="lineno">10039</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l10040"></a><span class="lineno">10040</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,</div><div class="line"><a name="l10041"></a><span class="lineno">10041</span>&#160;               <span class="stringliteral">&quot;Invalid private redirecting-orig subaddress odd-even indicator (%u)\n&quot;</span>,</div><div class="line"><a name="l10042"></a><span class="lineno">10042</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l10043"></a><span class="lineno">10043</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10044"></a><span class="lineno">10044</span>&#160;         }</div><div class="line"><a name="l10045"></a><span class="lineno">10045</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#a141590e40aa10259d3c0bc722725e7ad">odd_even_indicator</a> = data[pos];</div><div class="line"><a name="l10046"></a><span class="lineno">10046</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10047"></a><span class="lineno">10047</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ac249420ccee43b9f681e103696c54fd9">AST_REDIRECTING_PRIV_ORIG_SUBADDRESS_VALID</a>:</div><div class="line"><a name="l10048"></a><span class="lineno">10048</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l10049"></a><span class="lineno">10049</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid private redirecting-orig subaddress valid (%u)\n&quot;</span>,</div><div class="line"><a name="l10050"></a><span class="lineno">10050</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l10051"></a><span class="lineno">10051</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10052"></a><span class="lineno">10052</span>&#160;         }</div><div class="line"><a name="l10053"></a><span class="lineno">10053</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = data[pos];</div><div class="line"><a name="l10054"></a><span class="lineno">10054</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10055"></a><span class="lineno">10055</span>&#160;<span class="comment">/* Private redirecting-orig party id tag */</span></div><div class="line"><a name="l10056"></a><span class="lineno">10056</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a81210231d9c339ed4486e64243381cf7">AST_REDIRECTING_PRIV_ORIG_TAG</a>:</div><div class="line"><a name="l10057"></a><span class="lineno">10057</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>);</div><div class="line"><a name="l10058"></a><span class="lineno">10058</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l10059"></a><span class="lineno">10059</span>&#160;         <span class="keywordflow">if</span> (redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>) {</div><div class="line"><a name="l10060"></a><span class="lineno">10060</span>&#160;            memcpy(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>, data + pos, ie_len);</div><div class="line"><a name="l10061"></a><span class="lineno">10061</span>&#160;            redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">priv_orig</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>[ie_len] = 0;</div><div class="line"><a name="l10062"></a><span class="lineno">10062</span>&#160;         }</div><div class="line"><a name="l10063"></a><span class="lineno">10063</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10064"></a><span class="lineno">10064</span>&#160;<span class="comment">/* Private redirecting-from party id name */</span></div><div class="line"><a name="l10065"></a><span class="lineno">10065</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a39596e00e2981e5823aba4c98f6d16da">AST_REDIRECTING_PRIV_FROM_NAME</a>:</div><div class="line"><a name="l10066"></a><span class="lineno">10066</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l10067"></a><span class="lineno">10067</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l10068"></a><span class="lineno">10068</span>&#160;         <span class="keywordflow">if</span> (redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l10069"></a><span class="lineno">10069</span>&#160;            memcpy(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, data + pos, ie_len);</div><div class="line"><a name="l10070"></a><span class="lineno">10070</span>&#160;            redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>[ie_len] = 0;</div><div class="line"><a name="l10071"></a><span class="lineno">10071</span>&#160;         }</div><div class="line"><a name="l10072"></a><span class="lineno">10072</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10073"></a><span class="lineno">10073</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aabf14af13b81b7fe33a14afcf6ca2bf2">AST_REDIRECTING_PRIV_FROM_NAME_CHAR_SET</a>:</div><div class="line"><a name="l10074"></a><span class="lineno">10074</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l10075"></a><span class="lineno">10075</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid private redirecting-from name char set (%u)\n&quot;</span>,</div><div class="line"><a name="l10076"></a><span class="lineno">10076</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l10077"></a><span class="lineno">10077</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10078"></a><span class="lineno">10078</span>&#160;         }</div><div class="line"><a name="l10079"></a><span class="lineno">10079</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#a1fb9f03e5de01bf0a8f221e627fa9a7b">char_set</a> = data[pos];</div><div class="line"><a name="l10080"></a><span class="lineno">10080</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10081"></a><span class="lineno">10081</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a9c09b93677bac821db85f7e194d3ea89">AST_REDIRECTING_PRIV_FROM_NAME_PRESENTATION</a>:</div><div class="line"><a name="l10082"></a><span class="lineno">10082</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l10083"></a><span class="lineno">10083</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid private redirecting-from name presentation (%u)\n&quot;</span>,</div><div class="line"><a name="l10084"></a><span class="lineno">10084</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l10085"></a><span class="lineno">10085</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10086"></a><span class="lineno">10086</span>&#160;         }</div><div class="line"><a name="l10087"></a><span class="lineno">10087</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = data[pos];</div><div class="line"><a name="l10088"></a><span class="lineno">10088</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10089"></a><span class="lineno">10089</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a05cc70ee1519ce1ffb687121f68df1a7">AST_REDIRECTING_PRIV_FROM_NAME_VALID</a>:</div><div class="line"><a name="l10090"></a><span class="lineno">10090</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l10091"></a><span class="lineno">10091</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid private redirecting-from name valid (%u)\n&quot;</span>,</div><div class="line"><a name="l10092"></a><span class="lineno">10092</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l10093"></a><span class="lineno">10093</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10094"></a><span class="lineno">10094</span>&#160;         }</div><div class="line"><a name="l10095"></a><span class="lineno">10095</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = data[pos];</div><div class="line"><a name="l10096"></a><span class="lineno">10096</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10097"></a><span class="lineno">10097</span>&#160;<span class="comment">/* Private redirecting-from party id number */</span></div><div class="line"><a name="l10098"></a><span class="lineno">10098</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a6eba7d36a20eb665e7680cdbf0c834c2">AST_REDIRECTING_PRIV_FROM_NUMBER</a>:</div><div class="line"><a name="l10099"></a><span class="lineno">10099</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l10100"></a><span class="lineno">10100</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l10101"></a><span class="lineno">10101</span>&#160;         <span class="keywordflow">if</span> (redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l10102"></a><span class="lineno">10102</span>&#160;            memcpy(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, data + pos, ie_len);</div><div class="line"><a name="l10103"></a><span class="lineno">10103</span>&#160;            redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>[ie_len] = 0;</div><div class="line"><a name="l10104"></a><span class="lineno">10104</span>&#160;         }</div><div class="line"><a name="l10105"></a><span class="lineno">10105</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10106"></a><span class="lineno">10106</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a902377dfc1e6013af292a6f98ce86bd3">AST_REDIRECTING_PRIV_FROM_NUMBER_PLAN</a>:</div><div class="line"><a name="l10107"></a><span class="lineno">10107</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l10108"></a><span class="lineno">10108</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid private redirecting-from numbering plan (%u)\n&quot;</span>,</div><div class="line"><a name="l10109"></a><span class="lineno">10109</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l10110"></a><span class="lineno">10110</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10111"></a><span class="lineno">10111</span>&#160;         }</div><div class="line"><a name="l10112"></a><span class="lineno">10112</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a> = data[pos];</div><div class="line"><a name="l10113"></a><span class="lineno">10113</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10114"></a><span class="lineno">10114</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a95721650e26cbcb734ce91616e63ca68">AST_REDIRECTING_PRIV_FROM_NUMBER_PRESENTATION</a>:</div><div class="line"><a name="l10115"></a><span class="lineno">10115</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l10116"></a><span class="lineno">10116</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid private redirecting-from number presentation (%u)\n&quot;</span>,</div><div class="line"><a name="l10117"></a><span class="lineno">10117</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l10118"></a><span class="lineno">10118</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10119"></a><span class="lineno">10119</span>&#160;         }</div><div class="line"><a name="l10120"></a><span class="lineno">10120</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = data[pos];</div><div class="line"><a name="l10121"></a><span class="lineno">10121</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10122"></a><span class="lineno">10122</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a5170789fcd157d0315387dbef005e043">AST_REDIRECTING_PRIV_FROM_NUMBER_VALID</a>:</div><div class="line"><a name="l10123"></a><span class="lineno">10123</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l10124"></a><span class="lineno">10124</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid private redirecting-from number valid (%u)\n&quot;</span>,</div><div class="line"><a name="l10125"></a><span class="lineno">10125</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l10126"></a><span class="lineno">10126</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10127"></a><span class="lineno">10127</span>&#160;         }</div><div class="line"><a name="l10128"></a><span class="lineno">10128</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = data[pos];</div><div class="line"><a name="l10129"></a><span class="lineno">10129</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10130"></a><span class="lineno">10130</span>&#160;<span class="comment">/* Private redirecting-from party id subaddress */</span></div><div class="line"><a name="l10131"></a><span class="lineno">10131</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a4cc3a70dcfd5c3a977cfdcf2a75d8527">AST_REDIRECTING_PRIV_FROM_SUBADDRESS</a>:</div><div class="line"><a name="l10132"></a><span class="lineno">10132</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l10133"></a><span class="lineno">10133</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l10134"></a><span class="lineno">10134</span>&#160;         <span class="keywordflow">if</span> (redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l10135"></a><span class="lineno">10135</span>&#160;            memcpy(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, data + pos, ie_len);</div><div class="line"><a name="l10136"></a><span class="lineno">10136</span>&#160;            redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>[ie_len] = 0;</div><div class="line"><a name="l10137"></a><span class="lineno">10137</span>&#160;         }</div><div class="line"><a name="l10138"></a><span class="lineno">10138</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10139"></a><span class="lineno">10139</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a41dadfb835cc19fb7a62c63f2fe18d3e">AST_REDIRECTING_PRIV_FROM_SUBADDRESS_TYPE</a>:</div><div class="line"><a name="l10140"></a><span class="lineno">10140</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l10141"></a><span class="lineno">10141</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid private redirecting-from type of subaddress (%u)\n&quot;</span>,</div><div class="line"><a name="l10142"></a><span class="lineno">10142</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l10143"></a><span class="lineno">10143</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10144"></a><span class="lineno">10144</span>&#160;         }</div><div class="line"><a name="l10145"></a><span class="lineno">10145</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ac765329451135abec74c45e1897abf26">type</a> = data[pos];</div><div class="line"><a name="l10146"></a><span class="lineno">10146</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10147"></a><span class="lineno">10147</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a08b21da6da6f41c2b10d83a84fa2e016">AST_REDIRECTING_PRIV_FROM_SUBADDRESS_ODD_EVEN</a>:</div><div class="line"><a name="l10148"></a><span class="lineno">10148</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l10149"></a><span class="lineno">10149</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,</div><div class="line"><a name="l10150"></a><span class="lineno">10150</span>&#160;               <span class="stringliteral">&quot;Invalid private redirecting-from subaddress odd-even indicator (%u)\n&quot;</span>,</div><div class="line"><a name="l10151"></a><span class="lineno">10151</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l10152"></a><span class="lineno">10152</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10153"></a><span class="lineno">10153</span>&#160;         }</div><div class="line"><a name="l10154"></a><span class="lineno">10154</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#a141590e40aa10259d3c0bc722725e7ad">odd_even_indicator</a> = data[pos];</div><div class="line"><a name="l10155"></a><span class="lineno">10155</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10156"></a><span class="lineno">10156</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ad8975c2a6f9f8304424931e420033788">AST_REDIRECTING_PRIV_FROM_SUBADDRESS_VALID</a>:</div><div class="line"><a name="l10157"></a><span class="lineno">10157</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l10158"></a><span class="lineno">10158</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid private redirecting-from subaddress valid (%u)\n&quot;</span>,</div><div class="line"><a name="l10159"></a><span class="lineno">10159</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l10160"></a><span class="lineno">10160</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10161"></a><span class="lineno">10161</span>&#160;         }</div><div class="line"><a name="l10162"></a><span class="lineno">10162</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = data[pos];</div><div class="line"><a name="l10163"></a><span class="lineno">10163</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10164"></a><span class="lineno">10164</span>&#160;<span class="comment">/* Private redirecting-from party id tag */</span></div><div class="line"><a name="l10165"></a><span class="lineno">10165</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a6b3add43c84e8c9d1c420c46786d6600">AST_REDIRECTING_PRIV_FROM_TAG</a>:</div><div class="line"><a name="l10166"></a><span class="lineno">10166</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>);</div><div class="line"><a name="l10167"></a><span class="lineno">10167</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l10168"></a><span class="lineno">10168</span>&#160;         <span class="keywordflow">if</span> (redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>) {</div><div class="line"><a name="l10169"></a><span class="lineno">10169</span>&#160;            memcpy(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>, data + pos, ie_len);</div><div class="line"><a name="l10170"></a><span class="lineno">10170</span>&#160;            redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">priv_from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>[ie_len] = 0;</div><div class="line"><a name="l10171"></a><span class="lineno">10171</span>&#160;         }</div><div class="line"><a name="l10172"></a><span class="lineno">10172</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10173"></a><span class="lineno">10173</span>&#160;<span class="comment">/* Private redirecting-to party id name */</span></div><div class="line"><a name="l10174"></a><span class="lineno">10174</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a282adacfb7cb1cd3c0ce2eb63bbf282f">AST_REDIRECTING_PRIV_TO_NAME</a>:</div><div class="line"><a name="l10175"></a><span class="lineno">10175</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l10176"></a><span class="lineno">10176</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l10177"></a><span class="lineno">10177</span>&#160;         <span class="keywordflow">if</span> (redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l10178"></a><span class="lineno">10178</span>&#160;            memcpy(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, data + pos, ie_len);</div><div class="line"><a name="l10179"></a><span class="lineno">10179</span>&#160;            redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>[ie_len] = 0;</div><div class="line"><a name="l10180"></a><span class="lineno">10180</span>&#160;         }</div><div class="line"><a name="l10181"></a><span class="lineno">10181</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10182"></a><span class="lineno">10182</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a7baecd23e0e111ddbc23ce2c4f3d92da">AST_REDIRECTING_PRIV_TO_NAME_CHAR_SET</a>:</div><div class="line"><a name="l10183"></a><span class="lineno">10183</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l10184"></a><span class="lineno">10184</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid private redirecting-to name char set (%u)\n&quot;</span>,</div><div class="line"><a name="l10185"></a><span class="lineno">10185</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l10186"></a><span class="lineno">10186</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10187"></a><span class="lineno">10187</span>&#160;         }</div><div class="line"><a name="l10188"></a><span class="lineno">10188</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#a1fb9f03e5de01bf0a8f221e627fa9a7b">char_set</a> = data[pos];</div><div class="line"><a name="l10189"></a><span class="lineno">10189</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10190"></a><span class="lineno">10190</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a913527aea7faf5dde5462bd05d51b0eb">AST_REDIRECTING_PRIV_TO_NAME_PRESENTATION</a>:</div><div class="line"><a name="l10191"></a><span class="lineno">10191</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l10192"></a><span class="lineno">10192</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid private redirecting-to name presentation (%u)\n&quot;</span>,</div><div class="line"><a name="l10193"></a><span class="lineno">10193</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l10194"></a><span class="lineno">10194</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10195"></a><span class="lineno">10195</span>&#160;         }</div><div class="line"><a name="l10196"></a><span class="lineno">10196</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = data[pos];</div><div class="line"><a name="l10197"></a><span class="lineno">10197</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10198"></a><span class="lineno">10198</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a11d7be890d1517ea33fc69f3d07353d9">AST_REDIRECTING_PRIV_TO_NAME_VALID</a>:</div><div class="line"><a name="l10199"></a><span class="lineno">10199</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l10200"></a><span class="lineno">10200</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid private redirecting-to name valid (%u)\n&quot;</span>,</div><div class="line"><a name="l10201"></a><span class="lineno">10201</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l10202"></a><span class="lineno">10202</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10203"></a><span class="lineno">10203</span>&#160;         }</div><div class="line"><a name="l10204"></a><span class="lineno">10204</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = data[pos];</div><div class="line"><a name="l10205"></a><span class="lineno">10205</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10206"></a><span class="lineno">10206</span>&#160;<span class="comment">/* Private redirecting-to party id number */</span></div><div class="line"><a name="l10207"></a><span class="lineno">10207</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a4e7df166afca82e85b8faa06d74c68f5">AST_REDIRECTING_PRIV_TO_NUMBER</a>:</div><div class="line"><a name="l10208"></a><span class="lineno">10208</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l10209"></a><span class="lineno">10209</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l10210"></a><span class="lineno">10210</span>&#160;         <span class="keywordflow">if</span> (redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l10211"></a><span class="lineno">10211</span>&#160;            memcpy(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, data + pos, ie_len);</div><div class="line"><a name="l10212"></a><span class="lineno">10212</span>&#160;            redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>[ie_len] = 0;</div><div class="line"><a name="l10213"></a><span class="lineno">10213</span>&#160;         }</div><div class="line"><a name="l10214"></a><span class="lineno">10214</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10215"></a><span class="lineno">10215</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a748b91a64b30f68c8f3bd4b587c9367a">AST_REDIRECTING_PRIV_TO_NUMBER_PLAN</a>:</div><div class="line"><a name="l10216"></a><span class="lineno">10216</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l10217"></a><span class="lineno">10217</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid private redirecting-to numbering plan (%u)\n&quot;</span>,</div><div class="line"><a name="l10218"></a><span class="lineno">10218</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l10219"></a><span class="lineno">10219</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10220"></a><span class="lineno">10220</span>&#160;         }</div><div class="line"><a name="l10221"></a><span class="lineno">10221</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ad1f8db563cb99d404b72e02cf8f78cd1">plan</a> = data[pos];</div><div class="line"><a name="l10222"></a><span class="lineno">10222</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10223"></a><span class="lineno">10223</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a20b9655c65064608e5a64eb4d905260b">AST_REDIRECTING_PRIV_TO_NUMBER_PRESENTATION</a>:</div><div class="line"><a name="l10224"></a><span class="lineno">10224</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l10225"></a><span class="lineno">10225</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid private redirecting-to number presentation (%u)\n&quot;</span>,</div><div class="line"><a name="l10226"></a><span class="lineno">10226</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l10227"></a><span class="lineno">10227</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10228"></a><span class="lineno">10228</span>&#160;         }</div><div class="line"><a name="l10229"></a><span class="lineno">10229</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = data[pos];</div><div class="line"><a name="l10230"></a><span class="lineno">10230</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10231"></a><span class="lineno">10231</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a20737f3984b4c9fec91da715ce4e22d5">AST_REDIRECTING_PRIV_TO_NUMBER_VALID</a>:</div><div class="line"><a name="l10232"></a><span class="lineno">10232</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l10233"></a><span class="lineno">10233</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid private redirecting-to number valid (%u)\n&quot;</span>,</div><div class="line"><a name="l10234"></a><span class="lineno">10234</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l10235"></a><span class="lineno">10235</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10236"></a><span class="lineno">10236</span>&#160;         }</div><div class="line"><a name="l10237"></a><span class="lineno">10237</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = data[pos];</div><div class="line"><a name="l10238"></a><span class="lineno">10238</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10239"></a><span class="lineno">10239</span>&#160;<span class="comment">/* Private redirecting-to party id subaddress */</span></div><div class="line"><a name="l10240"></a><span class="lineno">10240</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792add63ae196eae92e71526f2d49fbd4721">AST_REDIRECTING_PRIV_TO_SUBADDRESS</a>:</div><div class="line"><a name="l10241"></a><span class="lineno">10241</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l10242"></a><span class="lineno">10242</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l10243"></a><span class="lineno">10243</span>&#160;         <span class="keywordflow">if</span> (redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l10244"></a><span class="lineno">10244</span>&#160;            memcpy(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, data + pos, ie_len);</div><div class="line"><a name="l10245"></a><span class="lineno">10245</span>&#160;            redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>[ie_len] = 0;</div><div class="line"><a name="l10246"></a><span class="lineno">10246</span>&#160;         }</div><div class="line"><a name="l10247"></a><span class="lineno">10247</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10248"></a><span class="lineno">10248</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ab6192c2ae240ba9e051951dba6b85da0">AST_REDIRECTING_PRIV_TO_SUBADDRESS_TYPE</a>:</div><div class="line"><a name="l10249"></a><span class="lineno">10249</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l10250"></a><span class="lineno">10250</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid private redirecting-to type of subaddress (%u)\n&quot;</span>,</div><div class="line"><a name="l10251"></a><span class="lineno">10251</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l10252"></a><span class="lineno">10252</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10253"></a><span class="lineno">10253</span>&#160;         }</div><div class="line"><a name="l10254"></a><span class="lineno">10254</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#ac765329451135abec74c45e1897abf26">type</a> = data[pos];</div><div class="line"><a name="l10255"></a><span class="lineno">10255</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10256"></a><span class="lineno">10256</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a47d957ec421660fd81a6f52940bc9945">AST_REDIRECTING_PRIV_TO_SUBADDRESS_ODD_EVEN</a>:</div><div class="line"><a name="l10257"></a><span class="lineno">10257</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l10258"></a><span class="lineno">10258</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,</div><div class="line"><a name="l10259"></a><span class="lineno">10259</span>&#160;               <span class="stringliteral">&quot;Invalid private redirecting-to subaddress odd-even indicator (%u)\n&quot;</span>,</div><div class="line"><a name="l10260"></a><span class="lineno">10260</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l10261"></a><span class="lineno">10261</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10262"></a><span class="lineno">10262</span>&#160;         }</div><div class="line"><a name="l10263"></a><span class="lineno">10263</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#a141590e40aa10259d3c0bc722725e7ad">odd_even_indicator</a> = data[pos];</div><div class="line"><a name="l10264"></a><span class="lineno">10264</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10265"></a><span class="lineno">10265</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a465958f253dbce8a201319658ca99750">AST_REDIRECTING_PRIV_TO_SUBADDRESS_VALID</a>:</div><div class="line"><a name="l10266"></a><span class="lineno">10266</span>&#160;         <span class="keywordflow">if</span> (ie_len != 1) {</div><div class="line"><a name="l10267"></a><span class="lineno">10267</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid private redirecting-to subaddress valid (%u)\n&quot;</span>,</div><div class="line"><a name="l10268"></a><span class="lineno">10268</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l10269"></a><span class="lineno">10269</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10270"></a><span class="lineno">10270</span>&#160;         }</div><div class="line"><a name="l10271"></a><span class="lineno">10271</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">subaddress</a>.<a class="code" href="../../d7/d41/structast__party__subaddress.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = data[pos];</div><div class="line"><a name="l10272"></a><span class="lineno">10272</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10273"></a><span class="lineno">10273</span>&#160;<span class="comment">/* Private redirecting-to party id tag */</span></div><div class="line"><a name="l10274"></a><span class="lineno">10274</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a83603fdcfd14d19e521ce76a53feb588">AST_REDIRECTING_PRIV_TO_TAG</a>:</div><div class="line"><a name="l10275"></a><span class="lineno">10275</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>);</div><div class="line"><a name="l10276"></a><span class="lineno">10276</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l10277"></a><span class="lineno">10277</span>&#160;         <span class="keywordflow">if</span> (redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>) {</div><div class="line"><a name="l10278"></a><span class="lineno">10278</span>&#160;            memcpy(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>, data + pos, ie_len);</div><div class="line"><a name="l10279"></a><span class="lineno">10279</span>&#160;            redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">priv_to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">tag</a>[ie_len] = 0;</div><div class="line"><a name="l10280"></a><span class="lineno">10280</span>&#160;         }</div><div class="line"><a name="l10281"></a><span class="lineno">10281</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10282"></a><span class="lineno">10282</span>&#160;<span class="comment">/* Redirecting reason code */</span></div><div class="line"><a name="l10283"></a><span class="lineno">10283</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a19de60b6d2aae3f71433113ee02dbdf7">AST_REDIRECTING_REASON_CODE</a>:</div><div class="line"><a name="l10284"></a><span class="lineno">10284</span>&#160;         <span class="keywordflow">if</span> (ie_len != <span class="keyword">sizeof</span>(value)) {</div><div class="line"><a name="l10285"></a><span class="lineno">10285</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirecting reason (%u)\n&quot;</span>,</div><div class="line"><a name="l10286"></a><span class="lineno">10286</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l10287"></a><span class="lineno">10287</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10288"></a><span class="lineno">10288</span>&#160;         }</div><div class="line"><a name="l10289"></a><span class="lineno">10289</span>&#160;         memcpy(&amp;value, data + pos, <span class="keyword">sizeof</span>(value));</div><div class="line"><a name="l10290"></a><span class="lineno">10290</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#aa961ad9bce0cf7679c5d938519ff1885">reason</a>.<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#a45a5b7c00a796a23f01673cef1dbe0a9">code</a> = ntohl(value);</div><div class="line"><a name="l10291"></a><span class="lineno">10291</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10292"></a><span class="lineno">10292</span>&#160;<span class="comment">/* Redirecting reason string */</span></div><div class="line"><a name="l10293"></a><span class="lineno">10293</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ac4a794763603856469df065a36f2474e">AST_REDIRECTING_REASON_STR</a>:</div><div class="line"><a name="l10294"></a><span class="lineno">10294</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#aa961ad9bce0cf7679c5d938519ff1885">reason</a>.<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l10295"></a><span class="lineno">10295</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#aa961ad9bce0cf7679c5d938519ff1885">reason</a>.<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l10296"></a><span class="lineno">10296</span>&#160;         <span class="keywordflow">if</span> (redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#aa961ad9bce0cf7679c5d938519ff1885">reason</a>.<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l10297"></a><span class="lineno">10297</span>&#160;            memcpy(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#aa961ad9bce0cf7679c5d938519ff1885">reason</a>.<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, data + pos, ie_len);</div><div class="line"><a name="l10298"></a><span class="lineno">10298</span>&#160;            redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#aa961ad9bce0cf7679c5d938519ff1885">reason</a>.<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>[ie_len] = 0;</div><div class="line"><a name="l10299"></a><span class="lineno">10299</span>&#160;         }</div><div class="line"><a name="l10300"></a><span class="lineno">10300</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10301"></a><span class="lineno">10301</span>&#160;<span class="comment">/* Redirecting orig-reason code */</span></div><div class="line"><a name="l10302"></a><span class="lineno">10302</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a217ddb753acbccd09362ef45581906ce">AST_REDIRECTING_ORIG_REASON_CODE</a>:</div><div class="line"><a name="l10303"></a><span class="lineno">10303</span>&#160;         <span class="keywordflow">if</span> (ie_len != <span class="keyword">sizeof</span>(value)) {</div><div class="line"><a name="l10304"></a><span class="lineno">10304</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirecting original reason (%u)\n&quot;</span>,</div><div class="line"><a name="l10305"></a><span class="lineno">10305</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l10306"></a><span class="lineno">10306</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10307"></a><span class="lineno">10307</span>&#160;         }</div><div class="line"><a name="l10308"></a><span class="lineno">10308</span>&#160;         memcpy(&amp;value, data + pos, <span class="keyword">sizeof</span>(value));</div><div class="line"><a name="l10309"></a><span class="lineno">10309</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#aa17ec85399145e14c9f08d81a2261231">orig_reason</a>.<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#a45a5b7c00a796a23f01673cef1dbe0a9">code</a> = ntohl(value);</div><div class="line"><a name="l10310"></a><span class="lineno">10310</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10311"></a><span class="lineno">10311</span>&#160;<span class="comment">/* Redirecting orig-reason string */</span></div><div class="line"><a name="l10312"></a><span class="lineno">10312</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aa5cd96e496cdbb109fe8c75f5b93b54d">AST_REDIRECTING_ORIG_REASON_STR</a>:</div><div class="line"><a name="l10313"></a><span class="lineno">10313</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#aa17ec85399145e14c9f08d81a2261231">orig_reason</a>.<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l10314"></a><span class="lineno">10314</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#aa17ec85399145e14c9f08d81a2261231">orig_reason</a>.<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#ab50d783982593ef993ea0b68f7ad8b80">str</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(ie_len + 1);</div><div class="line"><a name="l10315"></a><span class="lineno">10315</span>&#160;         <span class="keywordflow">if</span> (redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#aa17ec85399145e14c9f08d81a2261231">orig_reason</a>.<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) {</div><div class="line"><a name="l10316"></a><span class="lineno">10316</span>&#160;            memcpy(redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#aa17ec85399145e14c9f08d81a2261231">orig_reason</a>.<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, data + pos, ie_len);</div><div class="line"><a name="l10317"></a><span class="lineno">10317</span>&#160;            redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#aa17ec85399145e14c9f08d81a2261231">orig_reason</a>.<a class="code" href="../../d1/dee/structast__party__redirecting__reason.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>[ie_len] = 0;</div><div class="line"><a name="l10318"></a><span class="lineno">10318</span>&#160;         }</div><div class="line"><a name="l10319"></a><span class="lineno">10319</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10320"></a><span class="lineno">10320</span>&#160;<span class="comment">/* Redirecting count */</span></div><div class="line"><a name="l10321"></a><span class="lineno">10321</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a86383247bc5ded6d5522d25139a71f4e">AST_REDIRECTING_COUNT</a>:</div><div class="line"><a name="l10322"></a><span class="lineno">10322</span>&#160;         <span class="keywordflow">if</span> (ie_len != <span class="keyword">sizeof</span>(value)) {</div><div class="line"><a name="l10323"></a><span class="lineno">10323</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid redirecting count (%u)\n&quot;</span>,</div><div class="line"><a name="l10324"></a><span class="lineno">10324</span>&#160;               (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l10325"></a><span class="lineno">10325</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l10326"></a><span class="lineno">10326</span>&#160;         }</div><div class="line"><a name="l10327"></a><span class="lineno">10327</span>&#160;         memcpy(&amp;value, data + pos, <span class="keyword">sizeof</span>(value));</div><div class="line"><a name="l10328"></a><span class="lineno">10328</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a> = ntohl(value);</div><div class="line"><a name="l10329"></a><span class="lineno">10329</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10330"></a><span class="lineno">10330</span>&#160;<span class="comment">/* Redirecting unknown element */</span></div><div class="line"><a name="l10331"></a><span class="lineno">10331</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l10332"></a><span class="lineno">10332</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Unknown redirecting element: %u (%u)\n&quot;</span>,</div><div class="line"><a name="l10333"></a><span class="lineno">10333</span>&#160;            (<span class="keywordtype">unsigned</span>) ie_id, (<span class="keywordtype">unsigned</span>) ie_len);</div><div class="line"><a name="l10334"></a><span class="lineno">10334</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10335"></a><span class="lineno">10335</span>&#160;      }</div><div class="line"><a name="l10336"></a><span class="lineno">10336</span>&#160;   }</div><div class="line"><a name="l10337"></a><span class="lineno">10337</span>&#160;</div><div class="line"><a name="l10338"></a><span class="lineno">10338</span>&#160;   <span class="keywordflow">switch</span> (frame_version) {</div><div class="line"><a name="l10339"></a><span class="lineno">10339</span>&#160;   <span class="keywordflow">case</span> 1:</div><div class="line"><a name="l10340"></a><span class="lineno">10340</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l10341"></a><span class="lineno">10341</span>&#160;<span class="comment">       * The other end is an earlier version that we need to adjust</span></div><div class="line"><a name="l10342"></a><span class="lineno">10342</span>&#160;<span class="comment">       * for compatibility.</span></div><div class="line"><a name="l10343"></a><span class="lineno">10343</span>&#160;<span class="comment">       *</span></div><div class="line"><a name="l10344"></a><span class="lineno">10344</span>&#160;<span class="comment">       * The earlier version did not have the orig party id or</span></div><div class="line"><a name="l10345"></a><span class="lineno">10345</span>&#160;<span class="comment">       * orig_reason value.</span></div><div class="line"><a name="l10346"></a><span class="lineno">10346</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l10347"></a><span class="lineno">10347</span>&#160;      redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = 1;</div><div class="line"><a name="l10348"></a><span class="lineno">10348</span>&#160;      redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#a1fb9f03e5de01bf0a8f221e627fa9a7b">char_set</a> = <a class="code" href="../../d5/d7b/channel_8h.html#aa36854cfee90c77c4124e94273e42dffae83dea89fd3ea1272aca35be3e9767e9">AST_PARTY_CHAR_SET_ISO8859_1</a>;</div><div class="line"><a name="l10349"></a><span class="lineno">10349</span>&#160;      redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = 1;</div><div class="line"><a name="l10350"></a><span class="lineno">10350</span>&#160;      <span class="keywordflow">if</span> (got_from_combined_presentation) {</div><div class="line"><a name="l10351"></a><span class="lineno">10351</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = from_combined_presentation;</div><div class="line"><a name="l10352"></a><span class="lineno">10352</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">from</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = from_combined_presentation;</div><div class="line"><a name="l10353"></a><span class="lineno">10353</span>&#160;      }</div><div class="line"><a name="l10354"></a><span class="lineno">10354</span>&#160;</div><div class="line"><a name="l10355"></a><span class="lineno">10355</span>&#160;      redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = 1;</div><div class="line"><a name="l10356"></a><span class="lineno">10356</span>&#160;      redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#a1fb9f03e5de01bf0a8f221e627fa9a7b">char_set</a> = <a class="code" href="../../d5/d7b/channel_8h.html#aa36854cfee90c77c4124e94273e42dffae83dea89fd3ea1272aca35be3e9767e9">AST_PARTY_CHAR_SET_ISO8859_1</a>;</div><div class="line"><a name="l10357"></a><span class="lineno">10357</span>&#160;      redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a> = 1;</div><div class="line"><a name="l10358"></a><span class="lineno">10358</span>&#160;      <span class="keywordflow">if</span> (got_to_combined_presentation) {</div><div class="line"><a name="l10359"></a><span class="lineno">10359</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = to_combined_presentation;</div><div class="line"><a name="l10360"></a><span class="lineno">10360</span>&#160;         redirecting-&gt;<a class="code" href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">to</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">presentation</a> = to_combined_presentation;</div><div class="line"><a name="l10361"></a><span class="lineno">10361</span>&#160;      }</div><div class="line"><a name="l10362"></a><span class="lineno">10362</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l10363"></a><span class="lineno">10363</span>&#160;   <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l10364"></a><span class="lineno">10364</span>&#160;      <span class="comment">/* The other end is at the same level as we are. */</span></div><div class="line"><a name="l10365"></a><span class="lineno">10365</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l10366"></a><span class="lineno">10366</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l10367"></a><span class="lineno">10367</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l10368"></a><span class="lineno">10368</span>&#160;<span class="comment">       * The other end is newer than we are.</span></div><div class="line"><a name="l10369"></a><span class="lineno">10369</span>&#160;<span class="comment">       * We need to assume that they are compatible with us.</span></div><div class="line"><a name="l10370"></a><span class="lineno">10370</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l10371"></a><span class="lineno">10371</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Redirecting frame has newer version: %u\n&quot;</span>,</div><div class="line"><a name="l10372"></a><span class="lineno">10372</span>&#160;         (<span class="keywordtype">unsigned</span>) frame_version);</div><div class="line"><a name="l10373"></a><span class="lineno">10373</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l10374"></a><span class="lineno">10374</span>&#160;   }</div><div class="line"><a name="l10375"></a><span class="lineno">10375</span>&#160;</div><div class="line"><a name="l10376"></a><span class="lineno">10376</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l10377"></a><span class="lineno">10377</span>&#160;}</div><div class="line"><a name="l10378"></a><span class="lineno">10378</span>&#160;</div><div class="line"><a name="l10379"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ab025bba87d1757aa28e1a837596b1ead">10379</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#ab025bba87d1757aa28e1a837596b1ead">ast_channel_update_redirecting</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/d44/structast__party__redirecting.html">ast_party_redirecting</a> *redirecting, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../de/df8/structast__set__party__redirecting.html">ast_set_party_redirecting</a> *<a class="code" href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a>)</div><div class="line"><a name="l10380"></a><span class="lineno">10380</span>&#160;{</div><div class="line"><a name="l10381"></a><span class="lineno">10381</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> data[1024];  <span class="comment">/* This should be large enough */</span></div><div class="line"><a name="l10382"></a><span class="lineno">10382</span>&#160;   <span class="keywordtype">size_t</span> datalen;</div><div class="line"><a name="l10383"></a><span class="lineno">10383</span>&#160;</div><div class="line"><a name="l10384"></a><span class="lineno">10384</span>&#160;   datalen = <a class="code" href="../../d4/d28/channel_8c.html#aa8ee61afe088f1d67c6e27164cd91a37">ast_redirecting_build_data</a>(data, <span class="keyword">sizeof</span>(data), redirecting, update);</div><div class="line"><a name="l10385"></a><span class="lineno">10385</span>&#160;   <span class="keywordflow">if</span> (datalen == (<span class="keywordtype">size_t</span>) -1) {</div><div class="line"><a name="l10386"></a><span class="lineno">10386</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l10387"></a><span class="lineno">10387</span>&#160;   }</div><div class="line"><a name="l10388"></a><span class="lineno">10388</span>&#160;</div><div class="line"><a name="l10389"></a><span class="lineno">10389</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#acea4077a84f9d8ffac3c41bf660e3219">ast_indicate_data</a>(chan, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a5344deefcbdcca938001314e81ea195a">AST_CONTROL_REDIRECTING</a>, data, datalen);</div><div class="line"><a name="l10390"></a><span class="lineno">10390</span>&#160;}</div><div class="line"><a name="l10391"></a><span class="lineno">10391</span>&#160;</div><div class="line"><a name="l10392"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8195bba43b7c08b3063bd19b28291b55">10392</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a8195bba43b7c08b3063bd19b28291b55">ast_channel_queue_redirecting_update</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/d44/structast__party__redirecting.html">ast_party_redirecting</a> *redirecting, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../de/df8/structast__set__party__redirecting.html">ast_set_party_redirecting</a> *<a class="code" href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a>)</div><div class="line"><a name="l10393"></a><span class="lineno">10393</span>&#160;{</div><div class="line"><a name="l10394"></a><span class="lineno">10394</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> data[1024];  <span class="comment">/* This should be large enough */</span></div><div class="line"><a name="l10395"></a><span class="lineno">10395</span>&#160;   <span class="keywordtype">size_t</span> datalen;</div><div class="line"><a name="l10396"></a><span class="lineno">10396</span>&#160;</div><div class="line"><a name="l10397"></a><span class="lineno">10397</span>&#160;   datalen = <a class="code" href="../../d4/d28/channel_8c.html#aa8ee61afe088f1d67c6e27164cd91a37">ast_redirecting_build_data</a>(data, <span class="keyword">sizeof</span>(data), redirecting, update);</div><div class="line"><a name="l10398"></a><span class="lineno">10398</span>&#160;   <span class="keywordflow">if</span> (datalen == (<span class="keywordtype">size_t</span>) -1) {</div><div class="line"><a name="l10399"></a><span class="lineno">10399</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l10400"></a><span class="lineno">10400</span>&#160;   }</div><div class="line"><a name="l10401"></a><span class="lineno">10401</span>&#160;</div><div class="line"><a name="l10402"></a><span class="lineno">10402</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a7e5e15c22564fd66351d332ad10658b5">ast_queue_control_data</a>(chan, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a5344deefcbdcca938001314e81ea195a">AST_CONTROL_REDIRECTING</a>, data, datalen);</div><div class="line"><a name="l10403"></a><span class="lineno">10403</span>&#160;}</div><div class="line"><a name="l10404"></a><span class="lineno">10404</span>&#160;<span class="comment"></span></div><div class="line"><a name="l10405"></a><span class="lineno">10405</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l10406"></a><span class="lineno">10406</span>&#160;<span class="comment"> * Storage to determine if the current thread is running an intercept dialplan routine.</span></div><div class="line"><a name="l10407"></a><span class="lineno">10407</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l10408"></a><span class="lineno">10408</span>&#160;<a class="code" href="../../d4/d28/channel_8c.html#a4d76f322ccd9bb1c0b8d3eee8881a22d">AST_THREADSTORAGE_RAW</a>(in_intercept_routine);</div><div class="line"><a name="l10409"></a><span class="lineno">10409</span>&#160;<span class="comment"></span></div><div class="line"><a name="l10410"></a><span class="lineno">10410</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l10411"></a><span class="lineno">10411</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l10412"></a><span class="lineno">10412</span>&#160;<span class="comment"> * \brief Set the current intercept dialplan routine status mode.</span></div><div class="line"><a name="l10413"></a><span class="lineno">10413</span>&#160;<span class="comment"> * \since 13.14.0</span></div><div class="line"><a name="l10414"></a><span class="lineno">10414</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l10415"></a><span class="lineno">10415</span>&#160;<span class="comment"> * \param in_intercept_mode New intercept mode.  (Non-zero if in intercept mode)</span></div><div class="line"><a name="l10416"></a><span class="lineno">10416</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l10417"></a><span class="lineno">10417</span>&#160;<span class="comment"> * \return Nothing</span></div><div class="line"><a name="l10418"></a><span class="lineno">10418</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l10419"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a9a479c867a7632fb3bc0767a9893b288">10419</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a9a479c867a7632fb3bc0767a9893b288">channel_set_intercept_mode</a>(<span class="keywordtype">int</span> in_intercept_mode)</div><div class="line"><a name="l10420"></a><span class="lineno">10420</span>&#160;{</div><div class="line"><a name="l10421"></a><span class="lineno">10421</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>;</div><div class="line"><a name="l10422"></a><span class="lineno">10422</span>&#160;</div><div class="line"><a name="l10423"></a><span class="lineno">10423</span>&#160;   status = <a class="code" href="../../dc/d7d/threadstorage_8h.html#a10886a1187bdffd95a266d04e0739b60">ast_threadstorage_set_ptr</a>(&amp;in_intercept_routine,</div><div class="line"><a name="l10424"></a><span class="lineno">10424</span>&#160;      in_intercept_mode ? (<span class="keywordtype">void</span> *) 1 : (<span class="keywordtype">void</span> *) 0);</div><div class="line"><a name="l10425"></a><span class="lineno">10425</span>&#160;   <span class="keywordflow">if</span> (status) {</div><div class="line"><a name="l10426"></a><span class="lineno">10426</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to set dialplan intercept mode\n&quot;</span>);</div><div class="line"><a name="l10427"></a><span class="lineno">10427</span>&#160;   }</div><div class="line"><a name="l10428"></a><span class="lineno">10428</span>&#160;}</div><div class="line"><a name="l10429"></a><span class="lineno">10429</span>&#160;</div><div class="line"><a name="l10430"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a65b548fdac14462497431eb07bc45d63">10430</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a65b548fdac14462497431eb07bc45d63">ast_channel_get_intercept_mode</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l10431"></a><span class="lineno">10431</span>&#160;{</div><div class="line"><a name="l10432"></a><span class="lineno">10432</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7d/threadstorage_8h.html#a273e9e038c879199c4192156b9349169">ast_threadstorage_get_ptr</a>(&amp;in_intercept_routine) ? 1 : 0;</div><div class="line"><a name="l10433"></a><span class="lineno">10433</span>&#160;}</div><div class="line"><a name="l10434"></a><span class="lineno">10434</span>&#160;</div><div class="line"><a name="l10435"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a6757eb73bc4592a9e935d6a66380d565">10435</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a6757eb73bc4592a9e935d6a66380d565">ast_channel_connected_line_macro</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *autoservice_chan, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *macro_chan, <span class="keyword">const</span> <span class="keywordtype">void</span> *connected_info, <span class="keywordtype">int</span> is_caller, <span class="keywordtype">int</span> is_frame)</div><div class="line"><a name="l10436"></a><span class="lineno">10436</span>&#160;{</div><div class="line"><a name="l10437"></a><span class="lineno">10437</span>&#160;   <span class="keyword">static</span> <span class="keywordtype">int</span> deprecation_warning = 0;</div><div class="line"><a name="l10438"></a><span class="lineno">10438</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *macro;</div><div class="line"><a name="l10439"></a><span class="lineno">10439</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *macro_args;</div><div class="line"><a name="l10440"></a><span class="lineno">10440</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../db/d37/hsearch_8c.html#ad0f0f85b3cab490a81baa02c4b9edf45">retval</a>;</div><div class="line"><a name="l10441"></a><span class="lineno">10441</span>&#160;</div><div class="line"><a name="l10442"></a><span class="lineno">10442</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(macro_chan);</div><div class="line"><a name="l10443"></a><span class="lineno">10443</span>&#160;   macro = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(macro_chan, is_caller</div><div class="line"><a name="l10444"></a><span class="lineno">10444</span>&#160;      ? <span class="stringliteral">&quot;CONNECTED_LINE_CALLER_SEND_MACRO&quot;</span> : <span class="stringliteral">&quot;CONNECTED_LINE_CALLEE_SEND_MACRO&quot;</span>);</div><div class="line"><a name="l10445"></a><span class="lineno">10445</span>&#160;   macro = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(macro, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l10446"></a><span class="lineno">10446</span>&#160;   macro_args = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(macro_chan, is_caller</div><div class="line"><a name="l10447"></a><span class="lineno">10447</span>&#160;      ? <span class="stringliteral">&quot;CONNECTED_LINE_CALLER_SEND_MACRO_ARGS&quot;</span> : <span class="stringliteral">&quot;CONNECTED_LINE_CALLEE_SEND_MACRO_ARGS&quot;</span>);</div><div class="line"><a name="l10448"></a><span class="lineno">10448</span>&#160;   macro_args = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(macro_args, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l10449"></a><span class="lineno">10449</span>&#160;</div><div class="line"><a name="l10450"></a><span class="lineno">10450</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(macro)) {</div><div class="line"><a name="l10451"></a><span class="lineno">10451</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(macro_chan);</div><div class="line"><a name="l10452"></a><span class="lineno">10452</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l10453"></a><span class="lineno">10453</span>&#160;   }</div><div class="line"><a name="l10454"></a><span class="lineno">10454</span>&#160;</div><div class="line"><a name="l10455"></a><span class="lineno">10455</span>&#160;   <span class="keywordflow">if</span> (!deprecation_warning) {</div><div class="line"><a name="l10456"></a><span class="lineno">10456</span>&#160;      deprecation_warning = 1;</div><div class="line"><a name="l10457"></a><span class="lineno">10457</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Usage of CONNECTED_LINE_CALLE[ER]_SEND_MACRO is deprecated.  Please use CONNECTED_LINE_SEND_SUB instead.\n&quot;</span>);</div><div class="line"><a name="l10458"></a><span class="lineno">10458</span>&#160;   }</div><div class="line"><a name="l10459"></a><span class="lineno">10459</span>&#160;   <span class="keywordflow">if</span> (is_frame) {</div><div class="line"><a name="l10460"></a><span class="lineno">10460</span>&#160;      <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame = connected_info;</div><div class="line"><a name="l10461"></a><span class="lineno">10461</span>&#160;</div><div class="line"><a name="l10462"></a><span class="lineno">10462</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a93d3e245d714d1ab18c5fb2ecb5cbf0e">ast_connected_line_parse_data</a>(frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(macro_chan));</div><div class="line"><a name="l10463"></a><span class="lineno">10463</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l10464"></a><span class="lineno">10464</span>&#160;      <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a5023e29d4234076952bfecfff178b566">connected</a> = connected_info;</div><div class="line"><a name="l10465"></a><span class="lineno">10465</span>&#160;</div><div class="line"><a name="l10466"></a><span class="lineno">10466</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a5d3c15fe1dffda82e6dc03ca7b26526a">ast_party_connected_line_copy</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(macro_chan), connected);</div><div class="line"><a name="l10467"></a><span class="lineno">10467</span>&#160;   }</div><div class="line"><a name="l10468"></a><span class="lineno">10468</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(macro_chan);</div><div class="line"><a name="l10469"></a><span class="lineno">10469</span>&#160;</div><div class="line"><a name="l10470"></a><span class="lineno">10470</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a9a479c867a7632fb3bc0767a9893b288">channel_set_intercept_mode</a>(1);</div><div class="line"><a name="l10471"></a><span class="lineno">10471</span>&#160;   retval = <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a2fdf117969c2c1d8e1f0044d7c3ecd3b">ast_app_run_macro</a>(autoservice_chan, macro_chan, macro, macro_args);</div><div class="line"><a name="l10472"></a><span class="lineno">10472</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a9a479c867a7632fb3bc0767a9893b288">channel_set_intercept_mode</a>(0);</div><div class="line"><a name="l10473"></a><span class="lineno">10473</span>&#160;   <span class="keywordflow">if</span> (!retval) {</div><div class="line"><a name="l10474"></a><span class="lineno">10474</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> saved_connected;</div><div class="line"><a name="l10475"></a><span class="lineno">10475</span>&#160;</div><div class="line"><a name="l10476"></a><span class="lineno">10476</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#abf514b9d96a1821a33fec8c64ee4e26f">ast_party_connected_line_init</a>(&amp;saved_connected);</div><div class="line"><a name="l10477"></a><span class="lineno">10477</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(macro_chan);</div><div class="line"><a name="l10478"></a><span class="lineno">10478</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a5d3c15fe1dffda82e6dc03ca7b26526a">ast_party_connected_line_copy</a>(&amp;saved_connected, <a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(macro_chan));</div><div class="line"><a name="l10479"></a><span class="lineno">10479</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(macro_chan);</div><div class="line"><a name="l10480"></a><span class="lineno">10480</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a7ee3ff7bf7773329e9e20143f0ba2f69">ast_channel_update_connected_line</a>(macro_chan, &amp;saved_connected, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l10481"></a><span class="lineno">10481</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a40fc421536e02d30fecaa51a255b4144">ast_party_connected_line_free</a>(&amp;saved_connected);</div><div class="line"><a name="l10482"></a><span class="lineno">10482</span>&#160;   }</div><div class="line"><a name="l10483"></a><span class="lineno">10483</span>&#160;</div><div class="line"><a name="l10484"></a><span class="lineno">10484</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/d37/hsearch_8c.html#ad0f0f85b3cab490a81baa02c4b9edf45">retval</a>;</div><div class="line"><a name="l10485"></a><span class="lineno">10485</span>&#160;}</div><div class="line"><a name="l10486"></a><span class="lineno">10486</span>&#160;</div><div class="line"><a name="l10487"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a7176c4ba1352462039ef63412f425b00">10487</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a7176c4ba1352462039ef63412f425b00">ast_channel_redirecting_macro</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *autoservice_chan, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *macro_chan, <span class="keyword">const</span> <span class="keywordtype">void</span> *redirecting_info, <span class="keywordtype">int</span> is_caller, <span class="keywordtype">int</span> is_frame)</div><div class="line"><a name="l10488"></a><span class="lineno">10488</span>&#160;{</div><div class="line"><a name="l10489"></a><span class="lineno">10489</span>&#160;   <span class="keyword">static</span> <span class="keywordtype">int</span> deprecation_warning = 0;</div><div class="line"><a name="l10490"></a><span class="lineno">10490</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *macro;</div><div class="line"><a name="l10491"></a><span class="lineno">10491</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *macro_args;</div><div class="line"><a name="l10492"></a><span class="lineno">10492</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../db/d37/hsearch_8c.html#ad0f0f85b3cab490a81baa02c4b9edf45">retval</a>;</div><div class="line"><a name="l10493"></a><span class="lineno">10493</span>&#160;</div><div class="line"><a name="l10494"></a><span class="lineno">10494</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(macro_chan);</div><div class="line"><a name="l10495"></a><span class="lineno">10495</span>&#160;   macro = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(macro_chan, is_caller</div><div class="line"><a name="l10496"></a><span class="lineno">10496</span>&#160;      ? <span class="stringliteral">&quot;REDIRECTING_CALLER_SEND_MACRO&quot;</span> : <span class="stringliteral">&quot;REDIRECTING_CALLEE_SEND_MACRO&quot;</span>);</div><div class="line"><a name="l10497"></a><span class="lineno">10497</span>&#160;   macro = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(macro, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l10498"></a><span class="lineno">10498</span>&#160;   macro_args = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(macro_chan, is_caller</div><div class="line"><a name="l10499"></a><span class="lineno">10499</span>&#160;      ? <span class="stringliteral">&quot;REDIRECTING_CALLER_SEND_MACRO_ARGS&quot;</span> : <span class="stringliteral">&quot;REDIRECTING_CALLEE_SEND_MACRO_ARGS&quot;</span>);</div><div class="line"><a name="l10500"></a><span class="lineno">10500</span>&#160;   macro_args = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(macro_args, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l10501"></a><span class="lineno">10501</span>&#160;</div><div class="line"><a name="l10502"></a><span class="lineno">10502</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(macro)) {</div><div class="line"><a name="l10503"></a><span class="lineno">10503</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(macro_chan);</div><div class="line"><a name="l10504"></a><span class="lineno">10504</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l10505"></a><span class="lineno">10505</span>&#160;   }</div><div class="line"><a name="l10506"></a><span class="lineno">10506</span>&#160;</div><div class="line"><a name="l10507"></a><span class="lineno">10507</span>&#160;   <span class="keywordflow">if</span> (!deprecation_warning) {</div><div class="line"><a name="l10508"></a><span class="lineno">10508</span>&#160;      deprecation_warning = 1;</div><div class="line"><a name="l10509"></a><span class="lineno">10509</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Usage of REDIRECTING_CALLE[ER]_SEND_MACRO is deprecated.  Please use REDIRECTING_SEND_SUB instead.\n&quot;</span>);</div><div class="line"><a name="l10510"></a><span class="lineno">10510</span>&#160;   }</div><div class="line"><a name="l10511"></a><span class="lineno">10511</span>&#160;   <span class="keywordflow">if</span> (is_frame) {</div><div class="line"><a name="l10512"></a><span class="lineno">10512</span>&#160;      <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame = redirecting_info;</div><div class="line"><a name="l10513"></a><span class="lineno">10513</span>&#160;</div><div class="line"><a name="l10514"></a><span class="lineno">10514</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#ac16b3b36606ee9db374e8d9f2b7dea88">ast_redirecting_parse_data</a>(frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>, <a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(macro_chan));</div><div class="line"><a name="l10515"></a><span class="lineno">10515</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l10516"></a><span class="lineno">10516</span>&#160;      <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../df/d44/structast__party__redirecting.html">ast_party_redirecting</a> *redirecting = redirecting_info;</div><div class="line"><a name="l10517"></a><span class="lineno">10517</span>&#160;</div><div class="line"><a name="l10518"></a><span class="lineno">10518</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#af6f0b2102f29f86914e10a7787f0d536">ast_party_redirecting_copy</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(macro_chan), redirecting);</div><div class="line"><a name="l10519"></a><span class="lineno">10519</span>&#160;   }</div><div class="line"><a name="l10520"></a><span class="lineno">10520</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(macro_chan);</div><div class="line"><a name="l10521"></a><span class="lineno">10521</span>&#160;</div><div class="line"><a name="l10522"></a><span class="lineno">10522</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a9a479c867a7632fb3bc0767a9893b288">channel_set_intercept_mode</a>(1);</div><div class="line"><a name="l10523"></a><span class="lineno">10523</span>&#160;   retval = <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a2fdf117969c2c1d8e1f0044d7c3ecd3b">ast_app_run_macro</a>(autoservice_chan, macro_chan, macro, macro_args);</div><div class="line"><a name="l10524"></a><span class="lineno">10524</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a9a479c867a7632fb3bc0767a9893b288">channel_set_intercept_mode</a>(0);</div><div class="line"><a name="l10525"></a><span class="lineno">10525</span>&#160;   <span class="keywordflow">if</span> (!retval) {</div><div class="line"><a name="l10526"></a><span class="lineno">10526</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../df/d44/structast__party__redirecting.html">ast_party_redirecting</a> saved_redirecting;</div><div class="line"><a name="l10527"></a><span class="lineno">10527</span>&#160;</div><div class="line"><a name="l10528"></a><span class="lineno">10528</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a1a5760823cd16fd0343e489efd9c8f89">ast_party_redirecting_init</a>(&amp;saved_redirecting);</div><div class="line"><a name="l10529"></a><span class="lineno">10529</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(macro_chan);</div><div class="line"><a name="l10530"></a><span class="lineno">10530</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#af6f0b2102f29f86914e10a7787f0d536">ast_party_redirecting_copy</a>(&amp;saved_redirecting, <a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(macro_chan));</div><div class="line"><a name="l10531"></a><span class="lineno">10531</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(macro_chan);</div><div class="line"><a name="l10532"></a><span class="lineno">10532</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#ab025bba87d1757aa28e1a837596b1ead">ast_channel_update_redirecting</a>(macro_chan, &amp;saved_redirecting, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l10533"></a><span class="lineno">10533</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#ac8bce0bf79829c59a7671c4eff83a31f">ast_party_redirecting_free</a>(&amp;saved_redirecting);</div><div class="line"><a name="l10534"></a><span class="lineno">10534</span>&#160;   }</div><div class="line"><a name="l10535"></a><span class="lineno">10535</span>&#160;</div><div class="line"><a name="l10536"></a><span class="lineno">10536</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/d37/hsearch_8c.html#ad0f0f85b3cab490a81baa02c4b9edf45">retval</a>;</div><div class="line"><a name="l10537"></a><span class="lineno">10537</span>&#160;}</div><div class="line"><a name="l10538"></a><span class="lineno">10538</span>&#160;</div><div class="line"><a name="l10539"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aafebfefd067ebab73fd66e7c008a8353">10539</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#aafebfefd067ebab73fd66e7c008a8353">ast_channel_connected_line_sub</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *autoservice_chan, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *sub_chan, <span class="keyword">const</span> <span class="keywordtype">void</span> *connected_info, <span class="keywordtype">int</span> is_frame)</div><div class="line"><a name="l10540"></a><span class="lineno">10540</span>&#160;{</div><div class="line"><a name="l10541"></a><span class="lineno">10541</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>;</div><div class="line"><a name="l10542"></a><span class="lineno">10542</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *sub_args;</div><div class="line"><a name="l10543"></a><span class="lineno">10543</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../db/d37/hsearch_8c.html#ad0f0f85b3cab490a81baa02c4b9edf45">retval</a>;</div><div class="line"><a name="l10544"></a><span class="lineno">10544</span>&#160;</div><div class="line"><a name="l10545"></a><span class="lineno">10545</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(sub_chan);</div><div class="line"><a name="l10546"></a><span class="lineno">10546</span>&#160;   sub = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(sub_chan, <span class="stringliteral">&quot;CONNECTED_LINE_SEND_SUB&quot;</span>);</div><div class="line"><a name="l10547"></a><span class="lineno">10547</span>&#160;   sub = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(sub, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l10548"></a><span class="lineno">10548</span>&#160;   sub_args = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(sub_chan, <span class="stringliteral">&quot;CONNECTED_LINE_SEND_SUB_ARGS&quot;</span>);</div><div class="line"><a name="l10549"></a><span class="lineno">10549</span>&#160;   sub_args = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(sub_args, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l10550"></a><span class="lineno">10550</span>&#160;</div><div class="line"><a name="l10551"></a><span class="lineno">10551</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(sub)) {</div><div class="line"><a name="l10552"></a><span class="lineno">10552</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(sub_chan);</div><div class="line"><a name="l10553"></a><span class="lineno">10553</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l10554"></a><span class="lineno">10554</span>&#160;   }</div><div class="line"><a name="l10555"></a><span class="lineno">10555</span>&#160;</div><div class="line"><a name="l10556"></a><span class="lineno">10556</span>&#160;   <span class="keywordflow">if</span> (is_frame) {</div><div class="line"><a name="l10557"></a><span class="lineno">10557</span>&#160;      <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame = connected_info;</div><div class="line"><a name="l10558"></a><span class="lineno">10558</span>&#160;</div><div class="line"><a name="l10559"></a><span class="lineno">10559</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a93d3e245d714d1ab18c5fb2ecb5cbf0e">ast_connected_line_parse_data</a>(frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(sub_chan));</div><div class="line"><a name="l10560"></a><span class="lineno">10560</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l10561"></a><span class="lineno">10561</span>&#160;      <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> *<a class="code" href="../../dd/d6f/structchanlist.html#a5023e29d4234076952bfecfff178b566">connected</a> = connected_info;</div><div class="line"><a name="l10562"></a><span class="lineno">10562</span>&#160;</div><div class="line"><a name="l10563"></a><span class="lineno">10563</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a5d3c15fe1dffda82e6dc03ca7b26526a">ast_party_connected_line_copy</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(sub_chan), connected);</div><div class="line"><a name="l10564"></a><span class="lineno">10564</span>&#160;   }</div><div class="line"><a name="l10565"></a><span class="lineno">10565</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(sub_chan);</div><div class="line"><a name="l10566"></a><span class="lineno">10566</span>&#160;</div><div class="line"><a name="l10567"></a><span class="lineno">10567</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a9a479c867a7632fb3bc0767a9893b288">channel_set_intercept_mode</a>(1);</div><div class="line"><a name="l10568"></a><span class="lineno">10568</span>&#160;   retval = <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a437a314deb7eb7260014426c55e8289c">ast_app_run_sub</a>(autoservice_chan, sub_chan, sub, sub_args, 0);</div><div class="line"><a name="l10569"></a><span class="lineno">10569</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a9a479c867a7632fb3bc0767a9893b288">channel_set_intercept_mode</a>(0);</div><div class="line"><a name="l10570"></a><span class="lineno">10570</span>&#160;   <span class="keywordflow">if</span> (!retval) {</div><div class="line"><a name="l10571"></a><span class="lineno">10571</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> saved_connected;</div><div class="line"><a name="l10572"></a><span class="lineno">10572</span>&#160;</div><div class="line"><a name="l10573"></a><span class="lineno">10573</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#abf514b9d96a1821a33fec8c64ee4e26f">ast_party_connected_line_init</a>(&amp;saved_connected);</div><div class="line"><a name="l10574"></a><span class="lineno">10574</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(sub_chan);</div><div class="line"><a name="l10575"></a><span class="lineno">10575</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a5d3c15fe1dffda82e6dc03ca7b26526a">ast_party_connected_line_copy</a>(&amp;saved_connected, <a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(sub_chan));</div><div class="line"><a name="l10576"></a><span class="lineno">10576</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(sub_chan);</div><div class="line"><a name="l10577"></a><span class="lineno">10577</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a7ee3ff7bf7773329e9e20143f0ba2f69">ast_channel_update_connected_line</a>(sub_chan, &amp;saved_connected, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l10578"></a><span class="lineno">10578</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a40fc421536e02d30fecaa51a255b4144">ast_party_connected_line_free</a>(&amp;saved_connected);</div><div class="line"><a name="l10579"></a><span class="lineno">10579</span>&#160;   }</div><div class="line"><a name="l10580"></a><span class="lineno">10580</span>&#160;</div><div class="line"><a name="l10581"></a><span class="lineno">10581</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/d37/hsearch_8c.html#ad0f0f85b3cab490a81baa02c4b9edf45">retval</a>;</div><div class="line"><a name="l10582"></a><span class="lineno">10582</span>&#160;}</div><div class="line"><a name="l10583"></a><span class="lineno">10583</span>&#160;</div><div class="line"><a name="l10584"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a88fe9ad417e869049cb359030f06cab4">10584</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a88fe9ad417e869049cb359030f06cab4">ast_channel_redirecting_sub</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *autoservice_chan, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *sub_chan, <span class="keyword">const</span> <span class="keywordtype">void</span> *redirecting_info, <span class="keywordtype">int</span> is_frame)</div><div class="line"><a name="l10585"></a><span class="lineno">10585</span>&#160;{</div><div class="line"><a name="l10586"></a><span class="lineno">10586</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>;</div><div class="line"><a name="l10587"></a><span class="lineno">10587</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *sub_args;</div><div class="line"><a name="l10588"></a><span class="lineno">10588</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../db/d37/hsearch_8c.html#ad0f0f85b3cab490a81baa02c4b9edf45">retval</a>;</div><div class="line"><a name="l10589"></a><span class="lineno">10589</span>&#160;</div><div class="line"><a name="l10590"></a><span class="lineno">10590</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(sub_chan);</div><div class="line"><a name="l10591"></a><span class="lineno">10591</span>&#160;   sub = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(sub_chan, <span class="stringliteral">&quot;REDIRECTING_SEND_SUB&quot;</span>);</div><div class="line"><a name="l10592"></a><span class="lineno">10592</span>&#160;   sub = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(sub, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l10593"></a><span class="lineno">10593</span>&#160;   sub_args = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(sub_chan, <span class="stringliteral">&quot;REDIRECTING_SEND_SUB_ARGS&quot;</span>);</div><div class="line"><a name="l10594"></a><span class="lineno">10594</span>&#160;   sub_args = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(sub_args, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l10595"></a><span class="lineno">10595</span>&#160;</div><div class="line"><a name="l10596"></a><span class="lineno">10596</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(sub)) {</div><div class="line"><a name="l10597"></a><span class="lineno">10597</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(sub_chan);</div><div class="line"><a name="l10598"></a><span class="lineno">10598</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l10599"></a><span class="lineno">10599</span>&#160;   }</div><div class="line"><a name="l10600"></a><span class="lineno">10600</span>&#160;</div><div class="line"><a name="l10601"></a><span class="lineno">10601</span>&#160;   <span class="keywordflow">if</span> (is_frame) {</div><div class="line"><a name="l10602"></a><span class="lineno">10602</span>&#160;      <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame = redirecting_info;</div><div class="line"><a name="l10603"></a><span class="lineno">10603</span>&#160;</div><div class="line"><a name="l10604"></a><span class="lineno">10604</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#ac16b3b36606ee9db374e8d9f2b7dea88">ast_redirecting_parse_data</a>(frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>, <a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(sub_chan));</div><div class="line"><a name="l10605"></a><span class="lineno">10605</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l10606"></a><span class="lineno">10606</span>&#160;      <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../df/d44/structast__party__redirecting.html">ast_party_redirecting</a> *redirecting = redirecting_info;</div><div class="line"><a name="l10607"></a><span class="lineno">10607</span>&#160;</div><div class="line"><a name="l10608"></a><span class="lineno">10608</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#af6f0b2102f29f86914e10a7787f0d536">ast_party_redirecting_copy</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(sub_chan), redirecting);</div><div class="line"><a name="l10609"></a><span class="lineno">10609</span>&#160;   }</div><div class="line"><a name="l10610"></a><span class="lineno">10610</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(sub_chan);</div><div class="line"><a name="l10611"></a><span class="lineno">10611</span>&#160;</div><div class="line"><a name="l10612"></a><span class="lineno">10612</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a9a479c867a7632fb3bc0767a9893b288">channel_set_intercept_mode</a>(1);</div><div class="line"><a name="l10613"></a><span class="lineno">10613</span>&#160;   retval = <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a437a314deb7eb7260014426c55e8289c">ast_app_run_sub</a>(autoservice_chan, sub_chan, sub, sub_args, 0);</div><div class="line"><a name="l10614"></a><span class="lineno">10614</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a9a479c867a7632fb3bc0767a9893b288">channel_set_intercept_mode</a>(0);</div><div class="line"><a name="l10615"></a><span class="lineno">10615</span>&#160;   <span class="keywordflow">if</span> (!retval) {</div><div class="line"><a name="l10616"></a><span class="lineno">10616</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../df/d44/structast__party__redirecting.html">ast_party_redirecting</a> saved_redirecting;</div><div class="line"><a name="l10617"></a><span class="lineno">10617</span>&#160;</div><div class="line"><a name="l10618"></a><span class="lineno">10618</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a1a5760823cd16fd0343e489efd9c8f89">ast_party_redirecting_init</a>(&amp;saved_redirecting);</div><div class="line"><a name="l10619"></a><span class="lineno">10619</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(sub_chan);</div><div class="line"><a name="l10620"></a><span class="lineno">10620</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#af6f0b2102f29f86914e10a7787f0d536">ast_party_redirecting_copy</a>(&amp;saved_redirecting, <a class="code" href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a>(sub_chan));</div><div class="line"><a name="l10621"></a><span class="lineno">10621</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(sub_chan);</div><div class="line"><a name="l10622"></a><span class="lineno">10622</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#ab025bba87d1757aa28e1a837596b1ead">ast_channel_update_redirecting</a>(sub_chan, &amp;saved_redirecting, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l10623"></a><span class="lineno">10623</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#ac8bce0bf79829c59a7671c4eff83a31f">ast_party_redirecting_free</a>(&amp;saved_redirecting);</div><div class="line"><a name="l10624"></a><span class="lineno">10624</span>&#160;   }</div><div class="line"><a name="l10625"></a><span class="lineno">10625</span>&#160;</div><div class="line"><a name="l10626"></a><span class="lineno">10626</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/d37/hsearch_8c.html#ad0f0f85b3cab490a81baa02c4b9edf45">retval</a>;</div><div class="line"><a name="l10627"></a><span class="lineno">10627</span>&#160;}</div><div class="line"><a name="l10628"></a><span class="lineno">10628</span>&#160;</div><div class="line"><a name="l10629"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a7c9b8255907176a405dd0c071df12632">10629</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> *<a class="code" href="../../d4/d28/channel_8c.html#a7c9b8255907176a405dd0c071df12632">channel_cc_params_copy</a>(<span class="keywordtype">void</span> *data)</div><div class="line"><a name="l10630"></a><span class="lineno">10630</span>&#160;{</div><div class="line"><a name="l10631"></a><span class="lineno">10631</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d4/d2e/structast__cc__config__params.html">ast_cc_config_params</a> *src = data;</div><div class="line"><a name="l10632"></a><span class="lineno">10632</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d2e/structast__cc__config__params.html">ast_cc_config_params</a> *dest = <a class="code" href="../../de/dc8/ccss_8h.html#a1419c77d2c40064d442ae794175ca879">ast_cc_config_params_init</a>();</div><div class="line"><a name="l10633"></a><span class="lineno">10633</span>&#160;   <span class="keywordflow">if</span> (!dest) {</div><div class="line"><a name="l10634"></a><span class="lineno">10634</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l10635"></a><span class="lineno">10635</span>&#160;   }</div><div class="line"><a name="l10636"></a><span class="lineno">10636</span>&#160;   <a class="code" href="../../de/dc8/ccss_8h.html#a6f6f8fffb6cf0856d5cf953c5f51b74b">ast_cc_copy_config_params</a>(dest, src);</div><div class="line"><a name="l10637"></a><span class="lineno">10637</span>&#160;   <span class="keywordflow">return</span> dest;</div><div class="line"><a name="l10638"></a><span class="lineno">10638</span>&#160;}</div><div class="line"><a name="l10639"></a><span class="lineno">10639</span>&#160;</div><div class="line"><a name="l10640"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a7197eea912710dca220f38dbec9e618d">10640</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a7197eea912710dca220f38dbec9e618d">channel_cc_params_destroy</a>(<span class="keywordtype">void</span> *data)</div><div class="line"><a name="l10641"></a><span class="lineno">10641</span>&#160;{</div><div class="line"><a name="l10642"></a><span class="lineno">10642</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d2e/structast__cc__config__params.html">ast_cc_config_params</a> *cc_params = data;</div><div class="line"><a name="l10643"></a><span class="lineno">10643</span>&#160;   <a class="code" href="../../de/dc8/ccss_8h.html#a239279c104563561034f7988b78ae685">ast_cc_config_params_destroy</a>(cc_params);</div><div class="line"><a name="l10644"></a><span class="lineno">10644</span>&#160;}</div><div class="line"><a name="l10645"></a><span class="lineno">10645</span>&#160;</div><div class="line"><a name="l10646"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8b9ce6cb64a68f2ab30fccff6999c869">10646</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a> <a class="code" href="../../d4/d28/channel_8c.html#a8b9ce6cb64a68f2ab30fccff6999c869">cc_channel_datastore_info</a> = {</div><div class="line"><a name="l10647"></a><span class="lineno">10647</span>&#160;   .<a class="code" href="../../d9/dfb/structast__datastore__info.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a> = <span class="stringliteral">&quot;Call Completion&quot;</span>,</div><div class="line"><a name="l10648"></a><span class="lineno">10648</span>&#160;   .duplicate = <a class="code" href="../../d4/d28/channel_8c.html#a7c9b8255907176a405dd0c071df12632">channel_cc_params_copy</a>,</div><div class="line"><a name="l10649"></a><span class="lineno">10649</span>&#160;   .destroy = <a class="code" href="../../d4/d28/channel_8c.html#a7197eea912710dca220f38dbec9e618d">channel_cc_params_destroy</a>,</div><div class="line"><a name="l10650"></a><span class="lineno">10650</span>&#160;};</div><div class="line"><a name="l10651"></a><span class="lineno">10651</span>&#160;</div><div class="line"><a name="l10652"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a6234217363fb618938c53f7b8169f29b">10652</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a6234217363fb618938c53f7b8169f29b">ast_channel_cc_params_init</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan,</div><div class="line"><a name="l10653"></a><span class="lineno">10653</span>&#160;      <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/d2e/structast__cc__config__params.html">ast_cc_config_params</a> *base_params)</div><div class="line"><a name="l10654"></a><span class="lineno">10654</span>&#160;{</div><div class="line"><a name="l10655"></a><span class="lineno">10655</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d2e/structast__cc__config__params.html">ast_cc_config_params</a> *cc_params;</div><div class="line"><a name="l10656"></a><span class="lineno">10656</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *cc_datastore;</div><div class="line"><a name="l10657"></a><span class="lineno">10657</span>&#160;</div><div class="line"><a name="l10658"></a><span class="lineno">10658</span>&#160;   <span class="keywordflow">if</span> (!(cc_params = <a class="code" href="../../de/dc8/ccss_8h.html#a1419c77d2c40064d442ae794175ca879">ast_cc_config_params_init</a>())) {</div><div class="line"><a name="l10659"></a><span class="lineno">10659</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l10660"></a><span class="lineno">10660</span>&#160;   }</div><div class="line"><a name="l10661"></a><span class="lineno">10661</span>&#160;</div><div class="line"><a name="l10662"></a><span class="lineno">10662</span>&#160;   <span class="keywordflow">if</span> (!(cc_datastore = <a class="code" href="../../d9/db6/datastore_8h.html#a666afb07fd77d50782cc10f83e029159">ast_datastore_alloc</a>(&amp;cc_channel_datastore_info, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l10663"></a><span class="lineno">10663</span>&#160;      <a class="code" href="../../de/dc8/ccss_8h.html#a239279c104563561034f7988b78ae685">ast_cc_config_params_destroy</a>(cc_params);</div><div class="line"><a name="l10664"></a><span class="lineno">10664</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l10665"></a><span class="lineno">10665</span>&#160;   }</div><div class="line"><a name="l10666"></a><span class="lineno">10666</span>&#160;</div><div class="line"><a name="l10667"></a><span class="lineno">10667</span>&#160;   <span class="keywordflow">if</span> (base_params) {</div><div class="line"><a name="l10668"></a><span class="lineno">10668</span>&#160;      <a class="code" href="../../de/dc8/ccss_8h.html#a6f6f8fffb6cf0856d5cf953c5f51b74b">ast_cc_copy_config_params</a>(cc_params, base_params);</div><div class="line"><a name="l10669"></a><span class="lineno">10669</span>&#160;   }</div><div class="line"><a name="l10670"></a><span class="lineno">10670</span>&#160;   cc_datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a> = cc_params;</div><div class="line"><a name="l10671"></a><span class="lineno">10671</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a1ed3e98d33d5587948a0e2ef67a81f52">ast_channel_datastore_add</a>(chan, cc_datastore);</div><div class="line"><a name="l10672"></a><span class="lineno">10672</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l10673"></a><span class="lineno">10673</span>&#160;}</div><div class="line"><a name="l10674"></a><span class="lineno">10674</span>&#160;</div><div class="line"><a name="l10675"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a7df9da0e99e443d7ae13dc07bbc57dcd">10675</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d4/d2e/structast__cc__config__params.html">ast_cc_config_params</a> *<a class="code" href="../../d4/d28/channel_8c.html#a7df9da0e99e443d7ae13dc07bbc57dcd">ast_channel_get_cc_config_params</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l10676"></a><span class="lineno">10676</span>&#160;{</div><div class="line"><a name="l10677"></a><span class="lineno">10677</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *cc_datastore;</div><div class="line"><a name="l10678"></a><span class="lineno">10678</span>&#160;</div><div class="line"><a name="l10679"></a><span class="lineno">10679</span>&#160;   <span class="keywordflow">if</span> (!(cc_datastore = <a class="code" href="../../d4/d28/channel_8c.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a>(chan, &amp;cc_channel_datastore_info, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l10680"></a><span class="lineno">10680</span>&#160;      <span class="comment">/* If we can&#39;t find the datastore, it almost definitely means that the channel type being</span></div><div class="line"><a name="l10681"></a><span class="lineno">10681</span>&#160;<span class="comment">       * used has not had its driver modified to parse CC config parameters. The best action</span></div><div class="line"><a name="l10682"></a><span class="lineno">10682</span>&#160;<span class="comment">       * to take here is to create the parameters on the spot with the defaults set.</span></div><div class="line"><a name="l10683"></a><span class="lineno">10683</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l10684"></a><span class="lineno">10684</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d4/d28/channel_8c.html#a6234217363fb618938c53f7b8169f29b">ast_channel_cc_params_init</a>(chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l10685"></a><span class="lineno">10685</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l10686"></a><span class="lineno">10686</span>&#160;      }</div><div class="line"><a name="l10687"></a><span class="lineno">10687</span>&#160;      <span class="keywordflow">if</span> (!(cc_datastore = <a class="code" href="../../d4/d28/channel_8c.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a>(chan, &amp;cc_channel_datastore_info, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l10688"></a><span class="lineno">10688</span>&#160;         <span class="comment">/* Should be impossible */</span></div><div class="line"><a name="l10689"></a><span class="lineno">10689</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l10690"></a><span class="lineno">10690</span>&#160;      }</div><div class="line"><a name="l10691"></a><span class="lineno">10691</span>&#160;   }</div><div class="line"><a name="l10692"></a><span class="lineno">10692</span>&#160;</div><div class="line"><a name="l10693"></a><span class="lineno">10693</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(cc_datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l10694"></a><span class="lineno">10694</span>&#160;   <span class="keywordflow">return</span> cc_datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l10695"></a><span class="lineno">10695</span>&#160;}</div><div class="line"><a name="l10696"></a><span class="lineno">10696</span>&#160;</div><div class="line"><a name="l10697"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a1677fd1f6e2cab646aeb76db8a044c2e">10697</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a1677fd1f6e2cab646aeb76db8a044c2e">ast_channel_get_device_name</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">char</span> *device_name, <span class="keywordtype">size_t</span> name_buffer_length)</div><div class="line"><a name="l10698"></a><span class="lineno">10698</span>&#160;{</div><div class="line"><a name="l10699"></a><span class="lineno">10699</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = name_buffer_length;</div><div class="line"><a name="l10700"></a><span class="lineno">10700</span>&#160;   <span class="keywordtype">char</span> *dash;</div><div class="line"><a name="l10701"></a><span class="lineno">10701</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d28/channel_8c.html#a4ca17f6d1c390e88d53b4180dea5487b">ast_channel_queryoption</a>(chan, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a2c9fb351572d62a917f8eb85752478bc">AST_OPTION_DEVICE_NAME</a>, device_name, &amp;len, 0)) {</div><div class="line"><a name="l10702"></a><span class="lineno">10702</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l10703"></a><span class="lineno">10703</span>&#160;   }</div><div class="line"><a name="l10704"></a><span class="lineno">10704</span>&#160;</div><div class="line"><a name="l10705"></a><span class="lineno">10705</span>&#160;   <span class="comment">/* Dang. Do it the old-fashioned way */</span></div><div class="line"><a name="l10706"></a><span class="lineno">10706</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(device_name, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), name_buffer_length);</div><div class="line"><a name="l10707"></a><span class="lineno">10707</span>&#160;   <span class="keywordflow">if</span> ((dash = strrchr(device_name, <span class="charliteral">&#39;-&#39;</span>))) {</div><div class="line"><a name="l10708"></a><span class="lineno">10708</span>&#160;      *dash = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l10709"></a><span class="lineno">10709</span>&#160;   }</div><div class="line"><a name="l10710"></a><span class="lineno">10710</span>&#160;</div><div class="line"><a name="l10711"></a><span class="lineno">10711</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l10712"></a><span class="lineno">10712</span>&#160;}</div><div class="line"><a name="l10713"></a><span class="lineno">10713</span>&#160;</div><div class="line"><a name="l10714"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#afbb24da777f6a7ca9b24918a63e048da">10714</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#afbb24da777f6a7ca9b24918a63e048da">ast_channel_get_cc_agent_type</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">char</span> *<a class="code" href="../../de/d11/app__agent__pool_8c.html#a5cbaa6e72ca2e17b3339e7031d113dc1">agent_type</a>, <span class="keywordtype">size_t</span> size)</div><div class="line"><a name="l10715"></a><span class="lineno">10715</span>&#160;{</div><div class="line"><a name="l10716"></a><span class="lineno">10716</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = size;</div><div class="line"><a name="l10717"></a><span class="lineno">10717</span>&#160;   <span class="keywordtype">char</span> *slash;</div><div class="line"><a name="l10718"></a><span class="lineno">10718</span>&#160;</div><div class="line"><a name="l10719"></a><span class="lineno">10719</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d28/channel_8c.html#a4ca17f6d1c390e88d53b4180dea5487b">ast_channel_queryoption</a>(chan, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a9fccbbe7d7045408dee32c1d31575485">AST_OPTION_CC_AGENT_TYPE</a>, agent_type, &amp;len, 0)) {</div><div class="line"><a name="l10720"></a><span class="lineno">10720</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l10721"></a><span class="lineno">10721</span>&#160;   }</div><div class="line"><a name="l10722"></a><span class="lineno">10722</span>&#160;</div><div class="line"><a name="l10723"></a><span class="lineno">10723</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(agent_type, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), size);</div><div class="line"><a name="l10724"></a><span class="lineno">10724</span>&#160;   <span class="keywordflow">if</span> ((slash = strchr(agent_type, <span class="charliteral">&#39;/&#39;</span>))) {</div><div class="line"><a name="l10725"></a><span class="lineno">10725</span>&#160;      *slash = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l10726"></a><span class="lineno">10726</span>&#160;   }</div><div class="line"><a name="l10727"></a><span class="lineno">10727</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l10728"></a><span class="lineno">10728</span>&#160;}</div><div class="line"><a name="l10729"></a><span class="lineno">10729</span>&#160;</div><div class="line"><a name="l10730"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a3dda07b27527beb0e8b4c92b90810834">10730</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a3dda07b27527beb0e8b4c92b90810834">ast_channel_unlink</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l10731"></a><span class="lineno">10731</span>&#160;{</div><div class="line"><a name="l10732"></a><span class="lineno">10732</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a>(channels, chan);</div><div class="line"><a name="l10733"></a><span class="lineno">10733</span>&#160;}</div><div class="line"><a name="l10734"></a><span class="lineno">10734</span>&#160;</div><div class="line"><a name="l10735"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a557663006d52a9cdc11f42602bf48326">10735</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *<a class="code" href="../../d4/d28/channel_8c.html#a557663006d52a9cdc11f42602bf48326">ast_channel_get_bridge</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l10736"></a><span class="lineno">10736</span>&#160;{</div><div class="line"><a name="l10737"></a><span class="lineno">10737</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge;</div><div class="line"><a name="l10738"></a><span class="lineno">10738</span>&#160;</div><div class="line"><a name="l10739"></a><span class="lineno">10739</span>&#160;   bridge = <a class="code" href="../../d5/d7b/channel_8h.html#a2e46e4da6a025dfe7c64c4f1a480967b">ast_channel_internal_bridge</a>(chan);</div><div class="line"><a name="l10740"></a><span class="lineno">10740</span>&#160;   <span class="keywordflow">if</span> (bridge) {</div><div class="line"><a name="l10741"></a><span class="lineno">10741</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(bridge, +1);</div><div class="line"><a name="l10742"></a><span class="lineno">10742</span>&#160;   }</div><div class="line"><a name="l10743"></a><span class="lineno">10743</span>&#160;   <span class="keywordflow">return</span> bridge;</div><div class="line"><a name="l10744"></a><span class="lineno">10744</span>&#160;}</div><div class="line"><a name="l10745"></a><span class="lineno">10745</span>&#160;</div><div class="line"><a name="l10746"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aa0a52e573af67cb0f29095177128d186">10746</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#aa0a52e573af67cb0f29095177128d186">ast_channel_is_bridged</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l10747"></a><span class="lineno">10747</span>&#160;{</div><div class="line"><a name="l10748"></a><span class="lineno">10748</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d7b/channel_8h.html#a2e46e4da6a025dfe7c64c4f1a480967b">ast_channel_internal_bridge</a>(chan) != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l10749"></a><span class="lineno">10749</span>&#160;}</div><div class="line"><a name="l10750"></a><span class="lineno">10750</span>&#160;</div><div class="line"><a name="l10751"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#abfe7d902da46e372034cda92b5c13c4f">10751</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#abfe7d902da46e372034cda92b5c13c4f">ast_channel_is_leaving_bridge</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l10752"></a><span class="lineno">10752</span>&#160;{</div><div class="line"><a name="l10753"></a><span class="lineno">10753</span>&#160;   <span class="keywordtype">int</span> hangup_flags = <a class="code" href="../../d5/d7b/channel_8h.html#adac99999f1e55833e7f903979d67b48b">ast_channel_softhangup_internal_flag</a>(chan);</div><div class="line"><a name="l10754"></a><span class="lineno">10754</span>&#160;   <span class="keywordtype">int</span> hangup_test = hangup_flags &amp; <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a085c0c603de12dc2474a17a92e1cb5a4">AST_SOFTHANGUP_ASYNCGOTO</a>;</div><div class="line"><a name="l10755"></a><span class="lineno">10755</span>&#160;   <span class="keywordtype">int</span> unbridge = <a class="code" href="../../d5/d7b/channel_8h.html#abe3ed00598198643ab729c80896cb525">ast_channel_unbridged</a>(chan);</div><div class="line"><a name="l10756"></a><span class="lineno">10756</span>&#160;</div><div class="line"><a name="l10757"></a><span class="lineno">10757</span>&#160;   <span class="comment">/* This function should only return true if either the unbridged flag or</span></div><div class="line"><a name="l10758"></a><span class="lineno">10758</span>&#160;<span class="comment">    * the ASYNCGOTO soft hangup flag is set and when no other soft hangup</span></div><div class="line"><a name="l10759"></a><span class="lineno">10759</span>&#160;<span class="comment">    * flags are set. Any other soft hangup flags being set should make it</span></div><div class="line"><a name="l10760"></a><span class="lineno">10760</span>&#160;<span class="comment">    * return false.</span></div><div class="line"><a name="l10761"></a><span class="lineno">10761</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l10762"></a><span class="lineno">10762</span>&#160;   <span class="keywordflow">return</span> ((hangup_test || unbridge) &amp;&amp; (hangup_test == hangup_flags));</div><div class="line"><a name="l10763"></a><span class="lineno">10763</span>&#160;}</div><div class="line"><a name="l10764"></a><span class="lineno">10764</span>&#160;</div><div class="line"><a name="l10765"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#af9e27ecd92ff5aa897c9e058dfbd6510">10765</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d4/d28/channel_8c.html#af9e27ecd92ff5aa897c9e058dfbd6510">ast_channel_bridge_peer</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l10766"></a><span class="lineno">10766</span>&#160;{</div><div class="line"><a name="l10767"></a><span class="lineno">10767</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *peer;</div><div class="line"><a name="l10768"></a><span class="lineno">10768</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge;</div><div class="line"><a name="l10769"></a><span class="lineno">10769</span>&#160;</div><div class="line"><a name="l10770"></a><span class="lineno">10770</span>&#160;   <span class="comment">/* Get the bridge the channel is in. */</span></div><div class="line"><a name="l10771"></a><span class="lineno">10771</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l10772"></a><span class="lineno">10772</span>&#160;   bridge = <a class="code" href="../../d4/d28/channel_8c.html#a557663006d52a9cdc11f42602bf48326">ast_channel_get_bridge</a>(chan);</div><div class="line"><a name="l10773"></a><span class="lineno">10773</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l10774"></a><span class="lineno">10774</span>&#160;   <span class="keywordflow">if</span> (!bridge) {</div><div class="line"><a name="l10775"></a><span class="lineno">10775</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l10776"></a><span class="lineno">10776</span>&#160;   }</div><div class="line"><a name="l10777"></a><span class="lineno">10777</span>&#160;</div><div class="line"><a name="l10778"></a><span class="lineno">10778</span>&#160;   peer = <a class="code" href="../../d4/d56/bridge_8h.html#a08a41371fb4f020d645a0e6f50434005">ast_bridge_peer</a>(bridge, chan);</div><div class="line"><a name="l10779"></a><span class="lineno">10779</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(bridge, -1);</div><div class="line"><a name="l10780"></a><span class="lineno">10780</span>&#160;   <span class="keywordflow">return</span> peer;</div><div class="line"><a name="l10781"></a><span class="lineno">10781</span>&#160;}</div><div class="line"><a name="l10782"></a><span class="lineno">10782</span>&#160;</div><div class="line"><a name="l10783"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a9b6409c38af733c46eead884d86dd284">10783</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *<a class="code" href="../../d4/d28/channel_8c.html#a9b6409c38af733c46eead884d86dd284">ast_channel_get_bridge_channel</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l10784"></a><span class="lineno">10784</span>&#160;{</div><div class="line"><a name="l10785"></a><span class="lineno">10785</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel;</div><div class="line"><a name="l10786"></a><span class="lineno">10786</span>&#160;</div><div class="line"><a name="l10787"></a><span class="lineno">10787</span>&#160;   bridge_channel = <a class="code" href="../../d5/d7b/channel_8h.html#a5e41daaa81df59fc1e8eea2796029c31">ast_channel_internal_bridge_channel</a>(chan);</div><div class="line"><a name="l10788"></a><span class="lineno">10788</span>&#160;   <span class="keywordflow">if</span> (bridge_channel) {</div><div class="line"><a name="l10789"></a><span class="lineno">10789</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(bridge_channel, +1);</div><div class="line"><a name="l10790"></a><span class="lineno">10790</span>&#160;   }</div><div class="line"><a name="l10791"></a><span class="lineno">10791</span>&#160;   <span class="keywordflow">return</span> bridge_channel;</div><div class="line"><a name="l10792"></a><span class="lineno">10792</span>&#160;}</div><div class="line"><a name="l10793"></a><span class="lineno">10793</span>&#160;</div><div class="line"><a name="l10794"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a17e5eed14e9256176bb685dc7bac620a">10794</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d4/d28/channel_8c.html#a17e5eed14e9256176bb685dc7bac620a">ast_channel_yank</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *yankee)</div><div class="line"><a name="l10795"></a><span class="lineno">10795</span>&#160;{</div><div class="line"><a name="l10796"></a><span class="lineno">10796</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *yanked_chan;</div><div class="line"><a name="l10797"></a><span class="lineno">10797</span>&#160;   <span class="keyword">struct </span>{</div><div class="line"><a name="l10798"></a><span class="lineno">10798</span>&#160;      <span class="keywordtype">char</span> *<a class="code" href="../../d5/dff/chan__iax2_8c.html#adfee50d07a98645d4d20b896ce03785a">accountcode</a>;</div><div class="line"><a name="l10799"></a><span class="lineno">10799</span>&#160;      <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>;</div><div class="line"><a name="l10800"></a><span class="lineno">10800</span>&#160;      <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>;</div><div class="line"><a name="l10801"></a><span class="lineno">10801</span>&#160;      <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>;</div><div class="line"><a name="l10802"></a><span class="lineno">10802</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="../../d5/dff/chan__iax2_8c.html#ad2cfb0f821c065261382a9298bb5a16b">amaflags</a>;</div><div class="line"><a name="l10803"></a><span class="lineno">10803</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="../../d9/d47/cdr__beanstalkd_8c.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a>;</div><div class="line"><a name="l10804"></a><span class="lineno">10804</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *readformat;</div><div class="line"><a name="l10805"></a><span class="lineno">10805</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *writeformat;</div><div class="line"><a name="l10806"></a><span class="lineno">10806</span>&#160;   } my_vars = { 0, };</div><div class="line"><a name="l10807"></a><span class="lineno">10807</span>&#160;</div><div class="line"><a name="l10808"></a><span class="lineno">10808</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(yankee);</div><div class="line"><a name="l10809"></a><span class="lineno">10809</span>&#160;   my_vars.accountcode = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1d6833a829f7402bbf9cf0383ae3ca00">ast_channel_accountcode</a>(yankee));</div><div class="line"><a name="l10810"></a><span class="lineno">10810</span>&#160;   my_vars.exten = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a>(yankee));</div><div class="line"><a name="l10811"></a><span class="lineno">10811</span>&#160;   my_vars.context = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(yankee));</div><div class="line"><a name="l10812"></a><span class="lineno">10812</span>&#160;   my_vars.name = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(yankee));</div><div class="line"><a name="l10813"></a><span class="lineno">10813</span>&#160;   my_vars.amaflags = <a class="code" href="../../d5/d7b/channel_8h.html#a938863dd527bbcac399636661623baf9">ast_channel_amaflags</a>(yankee);</div><div class="line"><a name="l10814"></a><span class="lineno">10814</span>&#160;   my_vars.priority = <a class="code" href="../../d5/d7b/channel_8h.html#a6610c8171ced0a69738622c11736ff5e">ast_channel_priority</a>(yankee);</div><div class="line"><a name="l10815"></a><span class="lineno">10815</span>&#160;   <span class="comment">/* The priority as returned by ast_channel_yank is where the channel</span></div><div class="line"><a name="l10816"></a><span class="lineno">10816</span>&#160;<span class="comment">    * should go if the dialplan is executed on it. If the channel is</span></div><div class="line"><a name="l10817"></a><span class="lineno">10817</span>&#160;<span class="comment">    * already executing dialplan then the priority currently set is</span></div><div class="line"><a name="l10818"></a><span class="lineno">10818</span>&#160;<span class="comment">    * where it is currently. We increment it so it becomes where it should</span></div><div class="line"><a name="l10819"></a><span class="lineno">10819</span>&#160;<span class="comment">    * execute.</span></div><div class="line"><a name="l10820"></a><span class="lineno">10820</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l10821"></a><span class="lineno">10821</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(yankee), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a5ff4f7a94a36fcc2b8628186cb643d4b">AST_FLAG_IN_AUTOLOOP</a>)) {</div><div class="line"><a name="l10822"></a><span class="lineno">10822</span>&#160;      my_vars.priority++;</div><div class="line"><a name="l10823"></a><span class="lineno">10823</span>&#160;   }</div><div class="line"><a name="l10824"></a><span class="lineno">10824</span>&#160;   my_vars.writeformat = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a>(yankee));</div><div class="line"><a name="l10825"></a><span class="lineno">10825</span>&#160;   my_vars.readformat = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a>(yankee));</div><div class="line"><a name="l10826"></a><span class="lineno">10826</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(yankee);</div><div class="line"><a name="l10827"></a><span class="lineno">10827</span>&#160;</div><div class="line"><a name="l10828"></a><span class="lineno">10828</span>&#160;   <span class="comment">/* Do not hold any channel locks while calling channel_alloc() since the function</span></div><div class="line"><a name="l10829"></a><span class="lineno">10829</span>&#160;<span class="comment">    * locks the channel container when linking the new channel in. */</span></div><div class="line"><a name="l10830"></a><span class="lineno">10830</span>&#160;   <span class="keywordflow">if</span> (!(yanked_chan = <a class="code" href="../../d5/d7b/channel_8h.html#a2f18aafad0442206e71033ac6676dbb5">ast_channel_alloc</a>(0, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a>, 0, 0, my_vars.accountcode,</div><div class="line"><a name="l10831"></a><span class="lineno">10831</span>&#160;               my_vars.exten, my_vars.context, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, yankee, my_vars.amaflags,</div><div class="line"><a name="l10832"></a><span class="lineno">10832</span>&#160;               <span class="stringliteral">&quot;Surrogate/%s&quot;</span>, my_vars.<a class="code" href="../../df/d3c/structast__channel.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>))) {</div><div class="line"><a name="l10833"></a><span class="lineno">10833</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(my_vars.writeformat);</div><div class="line"><a name="l10834"></a><span class="lineno">10834</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(my_vars.readformat);</div><div class="line"><a name="l10835"></a><span class="lineno">10835</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l10836"></a><span class="lineno">10836</span>&#160;   }</div><div class="line"><a name="l10837"></a><span class="lineno">10837</span>&#160;</div><div class="line"><a name="l10838"></a><span class="lineno">10838</span>&#160;   <span class="comment">/* Make formats okay */</span></div><div class="line"><a name="l10839"></a><span class="lineno">10839</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ab3786cbbff7a03241fc75dafa0c8a1c1">ast_channel_set_readformat</a>(yanked_chan, my_vars.readformat);</div><div class="line"><a name="l10840"></a><span class="lineno">10840</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#afac6d7d115c1edfe3ad8a8c7fa5d59d1">ast_channel_set_writeformat</a>(yanked_chan, my_vars.writeformat);</div><div class="line"><a name="l10841"></a><span class="lineno">10841</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(my_vars.readformat);</div><div class="line"><a name="l10842"></a><span class="lineno">10842</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(my_vars.writeformat);</div><div class="line"><a name="l10843"></a><span class="lineno">10843</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ae56cab679c0cda6436b930bc74297895">ast_channel_priority_set</a>(yanked_chan, my_vars.priority);</div><div class="line"><a name="l10844"></a><span class="lineno">10844</span>&#160;</div><div class="line"><a name="l10845"></a><span class="lineno">10845</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(yanked_chan);</div><div class="line"><a name="l10846"></a><span class="lineno">10846</span>&#160;</div><div class="line"><a name="l10847"></a><span class="lineno">10847</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d28/channel_8c.html#a8043e35bcff5fb2d410dd161ac6e4360">ast_channel_move</a>(yanked_chan, yankee)) {</div><div class="line"><a name="l10848"></a><span class="lineno">10848</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(yanked_chan);</div><div class="line"><a name="l10849"></a><span class="lineno">10849</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l10850"></a><span class="lineno">10850</span>&#160;   }</div><div class="line"><a name="l10851"></a><span class="lineno">10851</span>&#160;</div><div class="line"><a name="l10852"></a><span class="lineno">10852</span>&#160;   <span class="keywordflow">return</span> yanked_chan;</div><div class="line"><a name="l10853"></a><span class="lineno">10853</span>&#160;}</div><div class="line"><a name="l10854"></a><span class="lineno">10854</span>&#160;<span class="comment"></span></div><div class="line"><a name="l10855"></a><span class="lineno">10855</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l10856"></a><span class="lineno">10856</span>&#160;<span class="comment"> * Mutex that prevents multiple ast_channel_move() operations</span></div><div class="line"><a name="l10857"></a><span class="lineno">10857</span>&#160;<span class="comment"> * from occurring simultaneously. This is necessary since the</span></div><div class="line"><a name="l10858"></a><span class="lineno">10858</span>&#160;<span class="comment"> * involved channels have to be locked and unlocked throughout</span></div><div class="line"><a name="l10859"></a><span class="lineno">10859</span>&#160;<span class="comment"> * the move operation.</span></div><div class="line"><a name="l10860"></a><span class="lineno">10860</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l10861"></a><span class="lineno">10861</span>&#160;<span class="comment"> * The most important data being protected are the masq and masqr</span></div><div class="line"><a name="l10862"></a><span class="lineno">10862</span>&#160;<span class="comment"> * data on channels. We don&#39;t want them getting criss-crossed due</span></div><div class="line"><a name="l10863"></a><span class="lineno">10863</span>&#160;<span class="comment"> * to multiple moves mucking with them.</span></div><div class="line"><a name="l10864"></a><span class="lineno">10864</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l10865"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a89fca3b0f0aae97b9c96e1da30e59d8f">10865</a></span>&#160;<a class="code" href="../../dd/d42/lock_8h.html#ac840092853644cea0a186efdc58985f5">AST_MUTEX_DEFINE_STATIC</a>(<a class="code" href="../../d4/d28/channel_8c.html#a89fca3b0f0aae97b9c96e1da30e59d8f">channel_move_lock</a>);</div><div class="line"><a name="l10866"></a><span class="lineno">10866</span>&#160;</div><div class="line"><a name="l10867"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8043e35bcff5fb2d410dd161ac6e4360">10867</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a8043e35bcff5fb2d410dd161ac6e4360">ast_channel_move</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *dest, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *source)</div><div class="line"><a name="l10868"></a><span class="lineno">10868</span>&#160;{</div><div class="line"><a name="l10869"></a><span class="lineno">10869</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, blob, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l10870"></a><span class="lineno">10870</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;<a class="code" href="../../d4/d28/channel_8c.html#a89fca3b0f0aae97b9c96e1da30e59d8f">channel_move_lock</a>);</div><div class="line"><a name="l10871"></a><span class="lineno">10871</span>&#160;</div><div class="line"><a name="l10872"></a><span class="lineno">10872</span>&#160;   <span class="keywordflow">if</span> (dest == source) {</div><div class="line"><a name="l10873"></a><span class="lineno">10873</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Can&#39;t move channel &#39;%s&#39; into itself!\n&quot;</span>,</div><div class="line"><a name="l10874"></a><span class="lineno">10874</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(dest));</div><div class="line"><a name="l10875"></a><span class="lineno">10875</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l10876"></a><span class="lineno">10876</span>&#160;   }</div><div class="line"><a name="l10877"></a><span class="lineno">10877</span>&#160;</div><div class="line"><a name="l10878"></a><span class="lineno">10878</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a695e5b4fcf983db6451b583fbd647424">ast_channel_lock_both</a>(dest, source);</div><div class="line"><a name="l10879"></a><span class="lineno">10879</span>&#160;</div><div class="line"><a name="l10880"></a><span class="lineno">10880</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(dest), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a26796fa52cc5857446eec8d16a4b718d">AST_FLAG_ZOMBIE</a>)</div><div class="line"><a name="l10881"></a><span class="lineno">10881</span>&#160;      || <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(source), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a26796fa52cc5857446eec8d16a4b718d">AST_FLAG_ZOMBIE</a>)) {</div><div class="line"><a name="l10882"></a><span class="lineno">10882</span>&#160;      <span class="comment">/* Zombies! Run! */</span></div><div class="line"><a name="l10883"></a><span class="lineno">10883</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,</div><div class="line"><a name="l10884"></a><span class="lineno">10884</span>&#160;         <span class="stringliteral">&quot;Can&#39;t move channel. One or both is dead (%s &lt;-- %s)\n&quot;</span>,</div><div class="line"><a name="l10885"></a><span class="lineno">10885</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(dest), <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(source));</div><div class="line"><a name="l10886"></a><span class="lineno">10886</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(source);</div><div class="line"><a name="l10887"></a><span class="lineno">10887</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(dest);</div><div class="line"><a name="l10888"></a><span class="lineno">10888</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l10889"></a><span class="lineno">10889</span>&#160;   }</div><div class="line"><a name="l10890"></a><span class="lineno">10890</span>&#160;</div><div class="line"><a name="l10891"></a><span class="lineno">10891</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af4d1b140188a723edd8c3c34ba18d8a9">ast_channel_masq_set</a>(dest, source);</div><div class="line"><a name="l10892"></a><span class="lineno">10892</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ae38736e53a58aceb4fb010b61905edba">ast_channel_masqr_set</a>(source, dest);</div><div class="line"><a name="l10893"></a><span class="lineno">10893</span>&#160;</div><div class="line"><a name="l10894"></a><span class="lineno">10894</span>&#160;   blob = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: s}&quot;</span>,</div><div class="line"><a name="l10895"></a><span class="lineno">10895</span>&#160;         <span class="stringliteral">&quot;newchanneluniqueid&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(dest));</div><div class="line"><a name="l10896"></a><span class="lineno">10896</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf03b8daa7784a26648db90614add6caa">ast_channel_publish_blob</a>(source, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga793b849e5b7c9257e92fe30621de5b74">ast_channel_masquerade_type</a>(), blob);</div><div class="line"><a name="l10897"></a><span class="lineno">10897</span>&#160;</div><div class="line"><a name="l10898"></a><span class="lineno">10898</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(dest);</div><div class="line"><a name="l10899"></a><span class="lineno">10899</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(source);</div><div class="line"><a name="l10900"></a><span class="lineno">10900</span>&#160;</div><div class="line"><a name="l10901"></a><span class="lineno">10901</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a01a29e89df22b89cd98b70914d1aa40c">channel_do_masquerade</a>(dest, source);</div><div class="line"><a name="l10902"></a><span class="lineno">10902</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l10903"></a><span class="lineno">10903</span>&#160;}</div><div class="line"><a name="l10904"></a><span class="lineno">10904</span>&#160;</div><div class="line"><a name="l10905"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aa43d4fbec4e8ff45c5fd3aa87c885928">10905</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#aa43d4fbec4e8ff45c5fd3aa87c885928">suppress_datastore_destroy_cb</a>(<span class="keywordtype">void</span> *data)</div><div class="line"><a name="l10906"></a><span class="lineno">10906</span>&#160;{</div><div class="line"><a name="l10907"></a><span class="lineno">10907</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(data);</div><div class="line"><a name="l10908"></a><span class="lineno">10908</span>&#160;}</div><div class="line"><a name="l10909"></a><span class="lineno">10909</span>&#160;</div><div class="line"><a name="l10910"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a40dbdd9febe439782b273c41c14560c3">10910</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a> <a class="code" href="../../d4/d28/channel_8c.html#a40dbdd9febe439782b273c41c14560c3">suppress_datastore_voice</a> = {</div><div class="line"><a name="l10911"></a><span class="lineno">10911</span>&#160;   .<a class="code" href="../../d9/dfb/structast__datastore__info.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a> = <span class="stringliteral">&quot;suppressvoice&quot;</span>,</div><div class="line"><a name="l10912"></a><span class="lineno">10912</span>&#160;   .destroy = <a class="code" href="../../d4/d28/channel_8c.html#aa43d4fbec4e8ff45c5fd3aa87c885928">suppress_datastore_destroy_cb</a></div><div class="line"><a name="l10913"></a><span class="lineno">10913</span>&#160;};</div><div class="line"><a name="l10914"></a><span class="lineno">10914</span>&#160;</div><div class="line"><a name="l10915"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ac5e2e0f98fbfb9a8cd4dcb101b6bdac7">10915</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#ac5e2e0f98fbfb9a8cd4dcb101b6bdac7">suppress_framehook_destroy_cb</a>(<span class="keywordtype">void</span> *data)</div><div class="line"><a name="l10916"></a><span class="lineno">10916</span>&#160;{</div><div class="line"><a name="l10917"></a><span class="lineno">10917</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(data);</div><div class="line"><a name="l10918"></a><span class="lineno">10918</span>&#160;}</div><div class="line"><a name="l10919"></a><span class="lineno">10919</span>&#160;</div><div class="line"><a name="l10920"></a><span class="lineno"><a class="line" href="../../d1/dac/structsuppress__data.html">10920</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d1/dac/structsuppress__data.html">suppress_data</a> {</div><div class="line"><a name="l10921"></a><span class="lineno"><a class="line" href="../../d1/dac/structsuppress__data.html#a6937b93c56cb473b547eda454dca7b4c">10921</a></span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0">ast_frame_type</a> frametype;</div><div class="line"><a name="l10922"></a><span class="lineno"><a class="line" href="../../d1/dac/structsuppress__data.html#ac7e977c3f00d50b1cd332813fa428b4d">10922</a></span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d1/dac/structsuppress__data.html#ac7e977c3f00d50b1cd332813fa428b4d">direction</a>;</div><div class="line"><a name="l10923"></a><span class="lineno"><a class="line" href="../../d1/dac/structsuppress__data.html#a23e0c5bd3b431b6527456cab2f745066">10923</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d1/dac/structsuppress__data.html#a23e0c5bd3b431b6527456cab2f745066">framehook_id</a>;</div><div class="line"><a name="l10924"></a><span class="lineno">10924</span>&#160;};</div><div class="line"><a name="l10925"></a><span class="lineno">10925</span>&#160;</div><div class="line"><a name="l10926"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a28f99b0e719f64be0550301a70a40936">10926</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a28f99b0e719f64be0550301a70a40936">suppress_framehook_fixup_cb</a>(<span class="keywordtype">void</span> *data, <span class="keywordtype">int</span> framehook_id, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *old_chan, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *new_chan)</div><div class="line"><a name="l10927"></a><span class="lineno">10927</span>&#160;{</div><div class="line"><a name="l10928"></a><span class="lineno">10928</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/dac/structsuppress__data.html">suppress_data</a> *suppress = data;</div><div class="line"><a name="l10929"></a><span class="lineno">10929</span>&#160;</div><div class="line"><a name="l10930"></a><span class="lineno">10930</span>&#160;   suppress-&gt;<a class="code" href="../../d1/dac/structsuppress__data.html#a23e0c5bd3b431b6527456cab2f745066">framehook_id</a> = <a class="code" href="../../d1/dac/structsuppress__data.html#a23e0c5bd3b431b6527456cab2f745066">framehook_id</a>;</div><div class="line"><a name="l10931"></a><span class="lineno">10931</span>&#160;}</div><div class="line"><a name="l10932"></a><span class="lineno">10932</span>&#160;</div><div class="line"><a name="l10933"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a672dfa5a82df9cc312b1990d348f44e7">10933</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *<a class="code" href="../../d4/d28/channel_8c.html#a672dfa5a82df9cc312b1990d348f44e7">suppress_framehook_event_cb</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame, <span class="keyword">enum</span> <a class="code" href="../../db/d3c/framehook_8h.html#a54250544f50efde9156d2341e8da0614">ast_framehook_event</a> <a class="code" href="../../df/d7d/structevent.html">event</a>, <span class="keywordtype">void</span> *<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>)</div><div class="line"><a name="l10934"></a><span class="lineno">10934</span>&#160;{</div><div class="line"><a name="l10935"></a><span class="lineno">10935</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/dac/structsuppress__data.html">suppress_data</a> *suppress = data;</div><div class="line"><a name="l10936"></a><span class="lineno">10936</span>&#160;   <span class="keywordtype">int</span> suppress_frame = 0;</div><div class="line"><a name="l10937"></a><span class="lineno">10937</span>&#160;</div><div class="line"><a name="l10938"></a><span class="lineno">10938</span>&#160;   <span class="keywordflow">if</span> (!frame) {</div><div class="line"><a name="l10939"></a><span class="lineno">10939</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l10940"></a><span class="lineno">10940</span>&#160;   }</div><div class="line"><a name="l10941"></a><span class="lineno">10941</span>&#160;</div><div class="line"><a name="l10942"></a><span class="lineno">10942</span>&#160;   <span class="keywordflow">if</span> (frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> != suppress-&gt;<a class="code" href="../../d1/dac/structsuppress__data.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a>) {</div><div class="line"><a name="l10943"></a><span class="lineno">10943</span>&#160;      <span class="keywordflow">return</span> frame;</div><div class="line"><a name="l10944"></a><span class="lineno">10944</span>&#160;   }</div><div class="line"><a name="l10945"></a><span class="lineno">10945</span>&#160;</div><div class="line"><a name="l10946"></a><span class="lineno">10946</span>&#160;   <span class="keywordflow">if</span> (event == <a class="code" href="../../db/d3c/framehook_8h.html#a54250544f50efde9156d2341e8da0614ab652eafa2595533d8c065a6ac426aa8a">AST_FRAMEHOOK_EVENT_READ</a> &amp;&amp; (suppress-&gt;<a class="code" href="../../d1/dac/structsuppress__data.html#ac7e977c3f00d50b1cd332813fa428b4d">direction</a> &amp; <a class="code" href="../../d5/d7b/channel_8h.html#a74da52aac47a277801349e8577978a83">AST_MUTE_DIRECTION_READ</a>)) {</div><div class="line"><a name="l10947"></a><span class="lineno">10947</span>&#160;      suppress_frame = 1;</div><div class="line"><a name="l10948"></a><span class="lineno">10948</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (event == <a class="code" href="../../db/d3c/framehook_8h.html#a54250544f50efde9156d2341e8da0614a8e96ab8d6971c2abf694c55ed52653d9">AST_FRAMEHOOK_EVENT_WRITE</a> &amp;&amp; (suppress-&gt;<a class="code" href="../../d1/dac/structsuppress__data.html#ac7e977c3f00d50b1cd332813fa428b4d">direction</a> &amp; <a class="code" href="../../d5/d7b/channel_8h.html#ace039a8191c129d7e16589790868210e">AST_MUTE_DIRECTION_WRITE</a>)) {</div><div class="line"><a name="l10949"></a><span class="lineno">10949</span>&#160;      suppress_frame = 1;</div><div class="line"><a name="l10950"></a><span class="lineno">10950</span>&#160;   }</div><div class="line"><a name="l10951"></a><span class="lineno">10951</span>&#160;</div><div class="line"><a name="l10952"></a><span class="lineno">10952</span>&#160;   <span class="keywordflow">if</span> (suppress_frame) {</div><div class="line"><a name="l10953"></a><span class="lineno">10953</span>&#160;      <span class="keywordflow">switch</span> (frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a>) {</div><div class="line"><a name="l10954"></a><span class="lineno">10954</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>:</div><div class="line"><a name="l10955"></a><span class="lineno">10955</span>&#160;         <span class="keywordflow">if</span> (event == <a class="code" href="../../db/d3c/framehook_8h.html#a54250544f50efde9156d2341e8da0614ab652eafa2595533d8c065a6ac426aa8a">AST_FRAMEHOOK_EVENT_READ</a>) {</div><div class="line"><a name="l10956"></a><span class="lineno">10956</span>&#160;            <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(frame);</div><div class="line"><a name="l10957"></a><span class="lineno">10957</span>&#160;         }</div><div class="line"><a name="l10958"></a><span class="lineno">10958</span>&#160;         frame = &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l10959"></a><span class="lineno">10959</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10960"></a><span class="lineno">10960</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l10961"></a><span class="lineno">10961</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l10962"></a><span class="lineno">10962</span>&#160;      }</div><div class="line"><a name="l10963"></a><span class="lineno">10963</span>&#160;   }</div><div class="line"><a name="l10964"></a><span class="lineno">10964</span>&#160;</div><div class="line"><a name="l10965"></a><span class="lineno">10965</span>&#160;   <span class="keywordflow">return</span> frame;</div><div class="line"><a name="l10966"></a><span class="lineno">10966</span>&#160;}</div><div class="line"><a name="l10967"></a><span class="lineno">10967</span>&#160;</div><div class="line"><a name="l10968"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a94a57b3cc709269b05735021f33f106e">10968</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a> *<a class="code" href="../../d4/d28/channel_8c.html#a94a57b3cc709269b05735021f33f106e">suppress_get_datastore_information</a>(<span class="keyword">enum</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0">ast_frame_type</a> frametype)</div><div class="line"><a name="l10969"></a><span class="lineno">10969</span>&#160;{</div><div class="line"><a name="l10970"></a><span class="lineno">10970</span>&#160;   <span class="keywordflow">switch</span> (frametype) {</div><div class="line"><a name="l10971"></a><span class="lineno">10971</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>:</div><div class="line"><a name="l10972"></a><span class="lineno">10972</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../d4/d28/channel_8c.html#a40dbdd9febe439782b273c41c14560c3">suppress_datastore_voice</a>;</div><div class="line"><a name="l10973"></a><span class="lineno">10973</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l10974"></a><span class="lineno">10974</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l10975"></a><span class="lineno">10975</span>&#160;   }</div><div class="line"><a name="l10976"></a><span class="lineno">10976</span>&#160;}</div><div class="line"><a name="l10977"></a><span class="lineno">10977</span>&#160;</div><div class="line"><a name="l10978"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a7a6a6c2ccad3e3fb8a4a9e242568b408">10978</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a7a6a6c2ccad3e3fb8a4a9e242568b408">ast_channel_suppress</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a>, <span class="keyword">enum</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0">ast_frame_type</a> frametype)</div><div class="line"><a name="l10979"></a><span class="lineno">10979</span>&#160;{</div><div class="line"><a name="l10980"></a><span class="lineno">10980</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/dac/structsuppress__data.html">suppress_data</a> *suppress;</div><div class="line"><a name="l10981"></a><span class="lineno">10981</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a> *datastore_info = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l10982"></a><span class="lineno">10982</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *datastore = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l10983"></a><span class="lineno">10983</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d7b/structast__framehook__interface.html">ast_framehook_interface</a> interface = {</div><div class="line"><a name="l10984"></a><span class="lineno">10984</span>&#160;      .<a class="code" href="../../d3/d7b/structast__framehook__interface.html#ab6d7b6f8c2ceaba7acda80aaf05f4899">version</a> = <a class="code" href="../../db/d3c/framehook_8h.html#ae3b6fa28df6c8608d05936efaf929f32">AST_FRAMEHOOK_INTERFACE_VERSION</a>,</div><div class="line"><a name="l10985"></a><span class="lineno">10985</span>&#160;      .event_cb = <a class="code" href="../../d4/d28/channel_8c.html#a672dfa5a82df9cc312b1990d348f44e7">suppress_framehook_event_cb</a>,</div><div class="line"><a name="l10986"></a><span class="lineno">10986</span>&#160;      .destroy_cb = <a class="code" href="../../d4/d28/channel_8c.html#ac5e2e0f98fbfb9a8cd4dcb101b6bdac7">suppress_framehook_destroy_cb</a>,</div><div class="line"><a name="l10987"></a><span class="lineno">10987</span>&#160;      .chan_fixup_cb = <a class="code" href="../../d4/d28/channel_8c.html#a28f99b0e719f64be0550301a70a40936">suppress_framehook_fixup_cb</a>,</div><div class="line"><a name="l10988"></a><span class="lineno">10988</span>&#160;   };</div><div class="line"><a name="l10989"></a><span class="lineno">10989</span>&#160;   <span class="keywordtype">int</span> framehook_id;</div><div class="line"><a name="l10990"></a><span class="lineno">10990</span>&#160;</div><div class="line"><a name="l10991"></a><span class="lineno">10991</span>&#160;   <span class="keywordflow">if</span> (!(datastore_info = <a class="code" href="../../d4/d28/channel_8c.html#a94a57b3cc709269b05735021f33f106e">suppress_get_datastore_information</a>(frametype))) {</div><div class="line"><a name="l10992"></a><span class="lineno">10992</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Attempted to suppress an unsupported frame type (%u).\n&quot;</span>, frametype);</div><div class="line"><a name="l10993"></a><span class="lineno">10993</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l10994"></a><span class="lineno">10994</span>&#160;   }</div><div class="line"><a name="l10995"></a><span class="lineno">10995</span>&#160;</div><div class="line"><a name="l10996"></a><span class="lineno">10996</span>&#160;   <span class="keywordflow">if</span> ((datastore = <a class="code" href="../../d4/d28/channel_8c.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a>(chan, datastore_info, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l10997"></a><span class="lineno">10997</span>&#160;      suppress = datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l10998"></a><span class="lineno">10998</span>&#160;      suppress-&gt;<a class="code" href="../../d1/dac/structsuppress__data.html#ac7e977c3f00d50b1cd332813fa428b4d">direction</a> |= <a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a>;</div><div class="line"><a name="l10999"></a><span class="lineno">10999</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l11000"></a><span class="lineno">11000</span>&#160;   }</div><div class="line"><a name="l11001"></a><span class="lineno">11001</span>&#160;</div><div class="line"><a name="l11002"></a><span class="lineno">11002</span>&#160;   <span class="keywordflow">if</span> (!(suppress = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*suppress), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l11003"></a><span class="lineno">11003</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to allocate data while attempting to suppress a stream.\n&quot;</span>);</div><div class="line"><a name="l11004"></a><span class="lineno">11004</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l11005"></a><span class="lineno">11005</span>&#160;   }</div><div class="line"><a name="l11006"></a><span class="lineno">11006</span>&#160;</div><div class="line"><a name="l11007"></a><span class="lineno">11007</span>&#160;   suppress-&gt;<a class="code" href="../../d1/dac/structsuppress__data.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = frametype;</div><div class="line"><a name="l11008"></a><span class="lineno">11008</span>&#160;   suppress-&gt;<a class="code" href="../../d1/dac/structsuppress__data.html#ac7e977c3f00d50b1cd332813fa428b4d">direction</a> |= <a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a>;</div><div class="line"><a name="l11009"></a><span class="lineno">11009</span>&#160;</div><div class="line"><a name="l11010"></a><span class="lineno">11010</span>&#160;   interface.<a class="code" href="../../d3/d7b/structast__framehook__interface.html#a735984d41155bc1032e09bece8f8d66d">data</a> = suppress;</div><div class="line"><a name="l11011"></a><span class="lineno">11011</span>&#160;</div><div class="line"><a name="l11012"></a><span class="lineno">11012</span>&#160;   framehook_id = <a class="code" href="../../db/d3c/framehook_8h.html#a3ca711dc98d26e881936c855f0ae3d77">ast_framehook_attach</a>(chan, &amp;interface);</div><div class="line"><a name="l11013"></a><span class="lineno">11013</span>&#160;   <span class="keywordflow">if</span> (framehook_id &lt; 0) {</div><div class="line"><a name="l11014"></a><span class="lineno">11014</span>&#160;      <span class="comment">/* Hook attach failed.  Get rid of the evidence. */</span></div><div class="line"><a name="l11015"></a><span class="lineno">11015</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to attach framehook while attempting to suppress a stream.\n&quot;</span>);</div><div class="line"><a name="l11016"></a><span class="lineno">11016</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(suppress, -1);</div><div class="line"><a name="l11017"></a><span class="lineno">11017</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l11018"></a><span class="lineno">11018</span>&#160;   }</div><div class="line"><a name="l11019"></a><span class="lineno">11019</span>&#160;</div><div class="line"><a name="l11020"></a><span class="lineno">11020</span>&#160;   <span class="comment">/* One ref for the framehook */</span></div><div class="line"><a name="l11021"></a><span class="lineno">11021</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(suppress, +1);</div><div class="line"><a name="l11022"></a><span class="lineno">11022</span>&#160;</div><div class="line"><a name="l11023"></a><span class="lineno">11023</span>&#160;   suppress-&gt;<a class="code" href="../../d1/dac/structsuppress__data.html#a23e0c5bd3b431b6527456cab2f745066">framehook_id</a> = framehook_id;</div><div class="line"><a name="l11024"></a><span class="lineno">11024</span>&#160;</div><div class="line"><a name="l11025"></a><span class="lineno">11025</span>&#160;   <span class="keywordflow">if</span> (!(datastore = <a class="code" href="../../d9/db6/datastore_8h.html#a666afb07fd77d50782cc10f83e029159">ast_datastore_alloc</a>(datastore_info, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l11026"></a><span class="lineno">11026</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to allocate datastore while attempting to suppress a stream.\n&quot;</span>);</div><div class="line"><a name="l11027"></a><span class="lineno">11027</span>&#160;      <a class="code" href="../../db/d3c/framehook_8h.html#a6e116259cae8c1e5cca074d05f0a3475">ast_framehook_detach</a>(chan, framehook_id);</div><div class="line"><a name="l11028"></a><span class="lineno">11028</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(suppress, -1);</div><div class="line"><a name="l11029"></a><span class="lineno">11029</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l11030"></a><span class="lineno">11030</span>&#160;   }</div><div class="line"><a name="l11031"></a><span class="lineno">11031</span>&#160;</div><div class="line"><a name="l11032"></a><span class="lineno">11032</span>&#160;   <span class="comment">/* the ref provided by the allocation is taken by the datastore */</span></div><div class="line"><a name="l11033"></a><span class="lineno">11033</span>&#160;   datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a> = suppress;</div><div class="line"><a name="l11034"></a><span class="lineno">11034</span>&#160;</div><div class="line"><a name="l11035"></a><span class="lineno">11035</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a1ed3e98d33d5587948a0e2ef67a81f52">ast_channel_datastore_add</a>(chan, datastore);</div><div class="line"><a name="l11036"></a><span class="lineno">11036</span>&#160;</div><div class="line"><a name="l11037"></a><span class="lineno">11037</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l11038"></a><span class="lineno">11038</span>&#160;}</div><div class="line"><a name="l11039"></a><span class="lineno">11039</span>&#160;</div><div class="line"><a name="l11040"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ac84af9a704746d20211e0e02045ffecd">11040</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#ac84af9a704746d20211e0e02045ffecd">ast_channel_unsuppress</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a>, <span class="keyword">enum</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0">ast_frame_type</a> frametype)</div><div class="line"><a name="l11041"></a><span class="lineno">11041</span>&#160;{</div><div class="line"><a name="l11042"></a><span class="lineno">11042</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a> *datastore_info = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l11043"></a><span class="lineno">11043</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *datastore = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l11044"></a><span class="lineno">11044</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/dac/structsuppress__data.html">suppress_data</a> *suppress;</div><div class="line"><a name="l11045"></a><span class="lineno">11045</span>&#160;</div><div class="line"><a name="l11046"></a><span class="lineno">11046</span>&#160;   <span class="keywordflow">if</span> (!(datastore_info = <a class="code" href="../../d4/d28/channel_8c.html#a94a57b3cc709269b05735021f33f106e">suppress_get_datastore_information</a>(frametype))) {</div><div class="line"><a name="l11047"></a><span class="lineno">11047</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Attempted to unsuppress an unsupported frame type (%u).\n&quot;</span>, frametype);</div><div class="line"><a name="l11048"></a><span class="lineno">11048</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l11049"></a><span class="lineno">11049</span>&#160;   }</div><div class="line"><a name="l11050"></a><span class="lineno">11050</span>&#160;</div><div class="line"><a name="l11051"></a><span class="lineno">11051</span>&#160;   <span class="keywordflow">if</span> (!(datastore = <a class="code" href="../../d4/d28/channel_8c.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a>(chan, datastore_info, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l11052"></a><span class="lineno">11052</span>&#160;      <span class="comment">/* Nothing to do! */</span></div><div class="line"><a name="l11053"></a><span class="lineno">11053</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l11054"></a><span class="lineno">11054</span>&#160;   }</div><div class="line"><a name="l11055"></a><span class="lineno">11055</span>&#160;</div><div class="line"><a name="l11056"></a><span class="lineno">11056</span>&#160;   suppress = datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l11057"></a><span class="lineno">11057</span>&#160;</div><div class="line"><a name="l11058"></a><span class="lineno">11058</span>&#160;   suppress-&gt;<a class="code" href="../../d1/dac/structsuppress__data.html#ac7e977c3f00d50b1cd332813fa428b4d">direction</a> &amp;= ~(<a class="code" href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a>);</div><div class="line"><a name="l11059"></a><span class="lineno">11059</span>&#160;</div><div class="line"><a name="l11060"></a><span class="lineno">11060</span>&#160;   <span class="keywordflow">if</span> (suppress-&gt;<a class="code" href="../../d1/dac/structsuppress__data.html#ac7e977c3f00d50b1cd332813fa428b4d">direction</a> == 0) {</div><div class="line"><a name="l11061"></a><span class="lineno">11061</span>&#160;      <span class="comment">/* Nothing left to suppress.  Bye! */</span></div><div class="line"><a name="l11062"></a><span class="lineno">11062</span>&#160;      <a class="code" href="../../db/d3c/framehook_8h.html#a6e116259cae8c1e5cca074d05f0a3475">ast_framehook_detach</a>(chan, suppress-&gt;<a class="code" href="../../d1/dac/structsuppress__data.html#a23e0c5bd3b431b6527456cab2f745066">framehook_id</a>);</div><div class="line"><a name="l11063"></a><span class="lineno">11063</span>&#160;      <a class="code" href="../../d4/d28/channel_8c.html#a1ff1c62b6d50823da93a920575c9c0c9">ast_channel_datastore_remove</a>(chan, datastore);</div><div class="line"><a name="l11064"></a><span class="lineno">11064</span>&#160;      <a class="code" href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14">ast_datastore_free</a>(datastore);</div><div class="line"><a name="l11065"></a><span class="lineno">11065</span>&#160;   }</div><div class="line"><a name="l11066"></a><span class="lineno">11066</span>&#160;</div><div class="line"><a name="l11067"></a><span class="lineno">11067</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l11068"></a><span class="lineno">11068</span>&#160;}</div><div class="line"><a name="l11069"></a><span class="lineno">11069</span>&#160;</div><div class="line"><a name="l11070"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a0b5ab7d69d45eb506f08997ccaddcf3b">11070</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a0b5ab7d69d45eb506f08997ccaddcf3b">ast_channel_end_dtmf</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">char</span> <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>, <span class="keyword">struct</span> timeval start, <span class="keyword">const</span> <span class="keywordtype">char</span> *why)</div><div class="line"><a name="l11071"></a><span class="lineno">11071</span>&#160;{</div><div class="line"><a name="l11072"></a><span class="lineno">11072</span>&#160;   <span class="keywordtype">int</span> dead;</div><div class="line"><a name="l11073"></a><span class="lineno">11073</span>&#160;   <span class="keywordtype">long</span> duration;</div><div class="line"><a name="l11074"></a><span class="lineno">11074</span>&#160;</div><div class="line"><a name="l11075"></a><span class="lineno">11075</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l11076"></a><span class="lineno">11076</span>&#160;   dead = <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a26796fa52cc5857446eec8d16a4b718d">AST_FLAG_ZOMBIE</a>)</div><div class="line"><a name="l11077"></a><span class="lineno">11077</span>&#160;      || (<a class="code" href="../../d5/d7b/channel_8h.html#adac99999f1e55833e7f903979d67b48b">ast_channel_softhangup_internal_flag</a>(chan)</div><div class="line"><a name="l11078"></a><span class="lineno">11078</span>&#160;         &amp; ~<a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a085c0c603de12dc2474a17a92e1cb5a4">AST_SOFTHANGUP_ASYNCGOTO</a>);</div><div class="line"><a name="l11079"></a><span class="lineno">11079</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l11080"></a><span class="lineno">11080</span>&#160;   <span class="keywordflow">if</span> (dead) {</div><div class="line"><a name="l11081"></a><span class="lineno">11081</span>&#160;      <span class="comment">/* Channel is a zombie or a real hangup. */</span></div><div class="line"><a name="l11082"></a><span class="lineno">11082</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l11083"></a><span class="lineno">11083</span>&#160;   }</div><div class="line"><a name="l11084"></a><span class="lineno">11084</span>&#160;</div><div class="line"><a name="l11085"></a><span class="lineno">11085</span>&#160;   duration = <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), start);</div><div class="line"><a name="l11086"></a><span class="lineno">11086</span>&#160;   <span class="keywordflow">if</span> (duration &lt; <a class="code" href="../../d6/dd6/group__main__options.html#gac4f0ffd69871cc47ad3dc030127b8719">option_dtmfminduration</a>) {</div><div class="line"><a name="l11087"></a><span class="lineno">11087</span>&#160;      duration = <a class="code" href="../../d6/dd6/group__main__options.html#gac4f0ffd69871cc47ad3dc030127b8719">option_dtmfminduration</a>;</div><div class="line"><a name="l11088"></a><span class="lineno">11088</span>&#160;   }</div><div class="line"><a name="l11089"></a><span class="lineno">11089</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#ab45db8cf33a706a5831d553d5199c143">ast_senddigit_end</a>(chan, digit, duration);</div><div class="line"><a name="l11090"></a><span class="lineno">11090</span>&#160;   <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#af360dd5e7b67cff6cb747d1aa2ac3db8">LOG_DTMF</a>, <span class="stringliteral">&quot;DTMF end &#39;%c&#39; simulated on %s due to %s, duration %ld ms\n&quot;</span>,</div><div class="line"><a name="l11091"></a><span class="lineno">11091</span>&#160;      digit, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), why, duration);</div><div class="line"><a name="l11092"></a><span class="lineno">11092</span>&#160;}</div><div class="line"><a name="l11093"></a><span class="lineno">11093</span>&#160;</div><div class="line"><a name="l11094"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aa04698b135a0299545ce4fc2513ed006">11094</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#aa04698b135a0299545ce4fc2513ed006">features_destroy</a>(<span class="keywordtype">void</span> *obj)</div><div class="line"><a name="l11095"></a><span class="lineno">11095</span>&#160;{</div><div class="line"><a name="l11096"></a><span class="lineno">11096</span>&#160;   <a class="code" href="../../dc/d7a/bridge__features_8h.html#ad3debd15062b4b9463e5703724dd9a1f">ast_bridge_features_destroy</a>(obj);</div><div class="line"><a name="l11097"></a><span class="lineno">11097</span>&#160;}</div><div class="line"><a name="l11098"></a><span class="lineno">11098</span>&#160;</div><div class="line"><a name="l11099"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aeaeec32b2464fa191b04c0ec212969f1">11099</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a> <a class="code" href="../../d4/d28/channel_8c.html#aeaeec32b2464fa191b04c0ec212969f1">bridge_features_info</a> = {</div><div class="line"><a name="l11100"></a><span class="lineno">11100</span>&#160;   .<a class="code" href="../../d9/dfb/structast__datastore__info.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a> = <span class="stringliteral">&quot;bridge-features&quot;</span>,</div><div class="line"><a name="l11101"></a><span class="lineno">11101</span>&#160;   .destroy = <a class="code" href="../../d4/d28/channel_8c.html#aa04698b135a0299545ce4fc2513ed006">features_destroy</a>,</div><div class="line"><a name="l11102"></a><span class="lineno">11102</span>&#160;};</div><div class="line"><a name="l11103"></a><span class="lineno">11103</span>&#160;</div><div class="line"><a name="l11104"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ab5571bd5fd71f1c9c3b68af4082b2c73">11104</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a> *<a class="code" href="../../d4/d28/channel_8c.html#ab5571bd5fd71f1c9c3b68af4082b2c73">ast_channel_feature_hooks_get</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l11105"></a><span class="lineno">11105</span>&#160;{</div><div class="line"><a name="l11106"></a><span class="lineno">11106</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *datastore;</div><div class="line"><a name="l11107"></a><span class="lineno">11107</span>&#160;</div><div class="line"><a name="l11108"></a><span class="lineno">11108</span>&#160;   datastore = <a class="code" href="../../d4/d28/channel_8c.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a>(chan, &amp;bridge_features_info, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l11109"></a><span class="lineno">11109</span>&#160;   <span class="keywordflow">if</span> (!datastore) {</div><div class="line"><a name="l11110"></a><span class="lineno">11110</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l11111"></a><span class="lineno">11111</span>&#160;   }</div><div class="line"><a name="l11112"></a><span class="lineno">11112</span>&#160;   <span class="keywordflow">return</span> datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l11113"></a><span class="lineno">11113</span>&#160;}</div><div class="line"><a name="l11114"></a><span class="lineno">11114</span>&#160;</div><div class="line"><a name="l11115"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a8c78bb458956af6d70a53681ec24a3d6">11115</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a8c78bb458956af6d70a53681ec24a3d6">channel_feature_hooks_set_full</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a> *features, <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#a7f763283c27da5574f6f8d1b2a2b9288">replace</a>)</div><div class="line"><a name="l11116"></a><span class="lineno">11116</span>&#160;{</div><div class="line"><a name="l11117"></a><span class="lineno">11117</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d5d/structast__datastore.html">ast_datastore</a> *datastore;</div><div class="line"><a name="l11118"></a><span class="lineno">11118</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a> *ds_features;</div><div class="line"><a name="l11119"></a><span class="lineno">11119</span>&#160;</div><div class="line"><a name="l11120"></a><span class="lineno">11120</span>&#160;   datastore = <a class="code" href="../../d4/d28/channel_8c.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a>(chan, &amp;bridge_features_info, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l11121"></a><span class="lineno">11121</span>&#160;   <span class="keywordflow">if</span> (datastore) {</div><div class="line"><a name="l11122"></a><span class="lineno">11122</span>&#160;      ds_features = datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l11123"></a><span class="lineno">11123</span>&#160;      <span class="keywordflow">if</span> (replace) {</div><div class="line"><a name="l11124"></a><span class="lineno">11124</span>&#160;         <a class="code" href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a>(ds_features);</div><div class="line"><a name="l11125"></a><span class="lineno">11125</span>&#160;         <a class="code" href="../../dc/d7a/bridge__features_8h.html#a3128b52009fb3dd764dce90ea377fce1">ast_bridge_features_init</a>(ds_features);</div><div class="line"><a name="l11126"></a><span class="lineno">11126</span>&#160;      }</div><div class="line"><a name="l11127"></a><span class="lineno">11127</span>&#160;      <span class="keywordflow">if</span> (features) {</div><div class="line"><a name="l11128"></a><span class="lineno">11128</span>&#160;         <a class="code" href="../../dc/d7a/bridge__features_8h.html#a91794e42131b7edc3119b92d789f8268">ast_bridge_features_merge</a>(ds_features, features);</div><div class="line"><a name="l11129"></a><span class="lineno">11129</span>&#160;      }</div><div class="line"><a name="l11130"></a><span class="lineno">11130</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l11131"></a><span class="lineno">11131</span>&#160;   }</div><div class="line"><a name="l11132"></a><span class="lineno">11132</span>&#160;</div><div class="line"><a name="l11133"></a><span class="lineno">11133</span>&#160;   datastore = <a class="code" href="../../d9/db6/datastore_8h.html#a666afb07fd77d50782cc10f83e029159">ast_datastore_alloc</a>(&amp;bridge_features_info, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l11134"></a><span class="lineno">11134</span>&#160;   <span class="keywordflow">if</span> (!datastore) {</div><div class="line"><a name="l11135"></a><span class="lineno">11135</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l11136"></a><span class="lineno">11136</span>&#160;   }</div><div class="line"><a name="l11137"></a><span class="lineno">11137</span>&#160;</div><div class="line"><a name="l11138"></a><span class="lineno">11138</span>&#160;   ds_features = <a class="code" href="../../dc/d7a/bridge__features_8h.html#abf9e5d393615c63d27e0bd530301a1ed">ast_bridge_features_new</a>();</div><div class="line"><a name="l11139"></a><span class="lineno">11139</span>&#160;   <span class="keywordflow">if</span> (!ds_features) {</div><div class="line"><a name="l11140"></a><span class="lineno">11140</span>&#160;      <a class="code" href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14">ast_datastore_free</a>(datastore);</div><div class="line"><a name="l11141"></a><span class="lineno">11141</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l11142"></a><span class="lineno">11142</span>&#160;   }</div><div class="line"><a name="l11143"></a><span class="lineno">11143</span>&#160;</div><div class="line"><a name="l11144"></a><span class="lineno">11144</span>&#160;   <span class="keywordflow">if</span> (features) {</div><div class="line"><a name="l11145"></a><span class="lineno">11145</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#a91794e42131b7edc3119b92d789f8268">ast_bridge_features_merge</a>(ds_features, features);</div><div class="line"><a name="l11146"></a><span class="lineno">11146</span>&#160;   }</div><div class="line"><a name="l11147"></a><span class="lineno">11147</span>&#160;   datastore-&gt;<a class="code" href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">data</a> = ds_features;</div><div class="line"><a name="l11148"></a><span class="lineno">11148</span>&#160;   <a class="code" href="../../d4/d28/channel_8c.html#a1ed3e98d33d5587948a0e2ef67a81f52">ast_channel_datastore_add</a>(chan, datastore);</div><div class="line"><a name="l11149"></a><span class="lineno">11149</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l11150"></a><span class="lineno">11150</span>&#160;}</div><div class="line"><a name="l11151"></a><span class="lineno">11151</span>&#160;</div><div class="line"><a name="l11152"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a7a6c7334e6dbd91a2bffb826a338a922">11152</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a7a6c7334e6dbd91a2bffb826a338a922">ast_channel_feature_hooks_append</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a> *features)</div><div class="line"><a name="l11153"></a><span class="lineno">11153</span>&#160;{</div><div class="line"><a name="l11154"></a><span class="lineno">11154</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a8c78bb458956af6d70a53681ec24a3d6">channel_feature_hooks_set_full</a>(chan, features, 0);</div><div class="line"><a name="l11155"></a><span class="lineno">11155</span>&#160;}</div><div class="line"><a name="l11156"></a><span class="lineno">11156</span>&#160;</div><div class="line"><a name="l11157"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a5b3b9f54f49649a311d281745b4fe79b">11157</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a5b3b9f54f49649a311d281745b4fe79b">ast_channel_feature_hooks_replace</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a> *features)</div><div class="line"><a name="l11158"></a><span class="lineno">11158</span>&#160;{</div><div class="line"><a name="l11159"></a><span class="lineno">11159</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d28/channel_8c.html#a8c78bb458956af6d70a53681ec24a3d6">channel_feature_hooks_set_full</a>(chan, features, 1);</div><div class="line"><a name="l11160"></a><span class="lineno">11160</span>&#160;}</div><div class="line"><a name="l11161"></a><span class="lineno">11161</span>&#160;</div><div class="line"><a name="l11162"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a1284a91696129ddcb1bf805adf769e0e">11162</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="../../d5/d7b/channel_8h.html#a65123e0ee89c498bdade937bdfb66ede">ast_channel_error</a> <a class="code" href="../../d4/d28/channel_8c.html#a1284a91696129ddcb1bf805adf769e0e">ast_channel_errno</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l11163"></a><span class="lineno">11163</span>&#160;{</div><div class="line"><a name="l11164"></a><span class="lineno">11164</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/de4/channel__internal_8h.html#a51c2bdaad6a3acef5089f6a29bdc7164">ast_channel_internal_errno</a>();</div><div class="line"><a name="l11165"></a><span class="lineno">11165</span>&#160;}</div><div class="line"><a name="l11166"></a><span class="lineno">11166</span>&#160;</div><div class="line"><a name="l11167"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a0b1e57b68b6e4970d55a1ffe49baaaf1">11167</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a0b1e57b68b6e4970d55a1ffe49baaaf1">ast_channel_request_stream_topology_change</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan,</div><div class="line"><a name="l11168"></a><span class="lineno">11168</span>&#160;      <span class="keyword">struct</span> <a class="code" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology, <span class="keywordtype">void</span> *change_source)</div><div class="line"><a name="l11169"></a><span class="lineno">11169</span>&#160;{</div><div class="line"><a name="l11170"></a><span class="lineno">11170</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l11171"></a><span class="lineno">11171</span>&#160;</div><div class="line"><a name="l11172"></a><span class="lineno">11172</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(chan != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l11173"></a><span class="lineno">11173</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(topology != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l11174"></a><span class="lineno">11174</span>&#160;</div><div class="line"><a name="l11175"></a><span class="lineno">11175</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l11176"></a><span class="lineno">11176</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#aee89f8031cb348efd3a20be962e7eefb">ast_channel_is_multistream</a>(chan) || !<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a6613d45a04e74534bf7e318b2c71e077">indicate</a>) {</div><div class="line"><a name="l11177"></a><span class="lineno">11177</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l11178"></a><span class="lineno">11178</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l11179"></a><span class="lineno">11179</span>&#160;   }</div><div class="line"><a name="l11180"></a><span class="lineno">11180</span>&#160;</div><div class="line"><a name="l11181"></a><span class="lineno">11181</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d95/stream_8h.html#ae0d846e650b6d3e654c01d61a991c82c">ast_stream_topology_equal</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ae35174b33cb8d9b4c1424448b21e50d2">ast_channel_get_stream_topology</a>(chan), topology)) {</div><div class="line"><a name="l11182"></a><span class="lineno">11182</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;%s: Topologies already match. Current: %s  Requested: %s\n&quot;</span>,</div><div class="line"><a name="l11183"></a><span class="lineno">11183</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan),</div><div class="line"><a name="l11184"></a><span class="lineno">11184</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a68ab38eef5d5958cae536ba7589093cc">ast_str_tmp</a>(256, <a class="code" href="../../d8/d95/stream_8h.html#a3da8d8e63718c47d43b9e738c7f6e55a">ast_stream_topology_to_str</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ae35174b33cb8d9b4c1424448b21e50d2">ast_channel_get_stream_topology</a>(chan), &amp;STR_TMP)),</div><div class="line"><a name="l11185"></a><span class="lineno">11185</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a68ab38eef5d5958cae536ba7589093cc">ast_str_tmp</a>(256, <a class="code" href="../../d8/d95/stream_8h.html#a3da8d8e63718c47d43b9e738c7f6e55a">ast_stream_topology_to_str</a>(topology, &amp;STR_TMP)));</div><div class="line"><a name="l11186"></a><span class="lineno">11186</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l11187"></a><span class="lineno">11187</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l11188"></a><span class="lineno">11188</span>&#160;   }</div><div class="line"><a name="l11189"></a><span class="lineno">11189</span>&#160;</div><div class="line"><a name="l11190"></a><span class="lineno">11190</span>&#160;   <a class="code" href="../../d5/de4/channel__internal_8h.html#a00ad4a65cfee8217c28d8359538e0c40">ast_channel_internal_set_stream_topology_change_source</a>(chan, change_source);</div><div class="line"><a name="l11191"></a><span class="lineno">11191</span>&#160;</div><div class="line"><a name="l11192"></a><span class="lineno">11192</span>&#160;   res = <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#aace25b48cb97266e6482721f5772af24">indicate</a>(chan, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a44656a284fb1f50d225d2634ede69171">AST_CONTROL_STREAM_TOPOLOGY_REQUEST_CHANGE</a>, topology, <span class="keyword">sizeof</span>(topology));</div><div class="line"><a name="l11193"></a><span class="lineno">11193</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l11194"></a><span class="lineno">11194</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l11195"></a><span class="lineno">11195</span>&#160;}</div><div class="line"><a name="l11196"></a><span class="lineno">11196</span>&#160;</div><div class="line"><a name="l11197"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a57c9b9b79de9d0c22e404169fc836e9f">11197</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#a57c9b9b79de9d0c22e404169fc836e9f">ast_channel_stream_topology_changed</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology)</div><div class="line"><a name="l11198"></a><span class="lineno">11198</span>&#160;{</div><div class="line"><a name="l11199"></a><span class="lineno">11199</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(chan != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l11200"></a><span class="lineno">11200</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(topology != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l11201"></a><span class="lineno">11201</span>&#160;</div><div class="line"><a name="l11202"></a><span class="lineno">11202</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#aee89f8031cb348efd3a20be962e7eefb">ast_channel_is_multistream</a>(chan) || !<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a6613d45a04e74534bf7e318b2c71e077">indicate</a>) {</div><div class="line"><a name="l11203"></a><span class="lineno">11203</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l11204"></a><span class="lineno">11204</span>&#160;   }</div><div class="line"><a name="l11205"></a><span class="lineno">11205</span>&#160;</div><div class="line"><a name="l11206"></a><span class="lineno">11206</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d4/d85/structast__channel__tech.html#aace25b48cb97266e6482721f5772af24">indicate</a>(chan, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac4227fb216ecb8388d24e9d4776ad400">AST_CONTROL_STREAM_TOPOLOGY_CHANGED</a>, topology, <span class="keyword">sizeof</span>(topology));</div><div class="line"><a name="l11207"></a><span class="lineno">11207</span>&#160;}</div><div class="line"><a name="l11208"></a><span class="lineno">11208</span>&#160;</div><div class="line"><a name="l11209"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#ab973166b1c061782085c2ca9fd87cb5c">11209</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d4/d28/channel_8c.html#ab973166b1c061782085c2ca9fd87cb5c">ast_channel_stream_topology_changed_externally</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l11210"></a><span class="lineno">11210</span>&#160;{</div><div class="line"><a name="l11211"></a><span class="lineno">11211</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l11212"></a><span class="lineno">11212</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> f = { <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>, .subclass.integer = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac4227fb216ecb8388d24e9d4776ad400">AST_CONTROL_STREAM_TOPOLOGY_CHANGED</a> };</div><div class="line"><a name="l11213"></a><span class="lineno">11213</span>&#160;</div><div class="line"><a name="l11214"></a><span class="lineno">11214</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(chan != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l11215"></a><span class="lineno">11215</span>&#160;</div><div class="line"><a name="l11216"></a><span class="lineno">11216</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#aee89f8031cb348efd3a20be962e7eefb">ast_channel_is_multistream</a>(chan)) {</div><div class="line"><a name="l11217"></a><span class="lineno">11217</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l11218"></a><span class="lineno">11218</span>&#160;   }</div><div class="line"><a name="l11219"></a><span class="lineno">11219</span>&#160;</div><div class="line"><a name="l11220"></a><span class="lineno">11220</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l11221"></a><span class="lineno">11221</span>&#160;   <a class="code" href="../../d5/de4/channel__internal_8h.html#a00ad4a65cfee8217c28d8359538e0c40">ast_channel_internal_set_stream_topology_change_source</a>(chan, (<span class="keywordtype">void</span> *)&amp;<a class="code" href="../../d5/d7b/channel_8h.html#a5cb3a7bfd21b59042d33965a87164bdb">ast_stream_topology_changed_external</a>);</div><div class="line"><a name="l11222"></a><span class="lineno">11222</span>&#160;   res = <a class="code" href="../../d4/d28/channel_8c.html#a3df7007b550647c63a1b211181b55814">ast_queue_frame</a>(chan, &amp;f);</div><div class="line"><a name="l11223"></a><span class="lineno">11223</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l11224"></a><span class="lineno">11224</span>&#160;</div><div class="line"><a name="l11225"></a><span class="lineno">11225</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l11226"></a><span class="lineno">11226</span>&#160;}</div><div class="line"><a name="l11227"></a><span class="lineno">11227</span>&#160;</div><div class="line"><a name="l11228"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#aa9d8ea64f1c03ccc844f630bb59b9466">11228</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#aa9d8ea64f1c03ccc844f630bb59b9466">ast_channel_set_flag</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>)</div><div class="line"><a name="l11229"></a><span class="lineno">11229</span>&#160;{</div><div class="line"><a name="l11230"></a><span class="lineno">11230</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l11231"></a><span class="lineno">11231</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), flag);</div><div class="line"><a name="l11232"></a><span class="lineno">11232</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l11233"></a><span class="lineno">11233</span>&#160;}</div><div class="line"><a name="l11234"></a><span class="lineno">11234</span>&#160;</div><div class="line"><a name="l11235"></a><span class="lineno"><a class="line" href="../../d4/d28/channel_8c.html#a1d9fcff85d7adbe0bd54f88eb927998c">11235</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d4/d28/channel_8c.html#a1d9fcff85d7adbe0bd54f88eb927998c">ast_channel_clear_flag</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>)</div><div class="line"><a name="l11236"></a><span class="lineno">11236</span>&#160;{</div><div class="line"><a name="l11237"></a><span class="lineno">11237</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l11238"></a><span class="lineno">11238</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), flag);</div><div class="line"><a name="l11239"></a><span class="lineno">11239</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l11240"></a><span class="lineno">11240</span>&#160;}</div><div class="ttc" id="channel_8c_html_a22de2fa4172d1ecd3b32426ea1b8f4ba"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a22de2fa4172d1ecd3b32426ea1b8f4ba">ast_say_digit_str</a></div><div class="ttdeci">int ast_say_digit_str(struct ast_channel *chan, const char *str, const char *ints, const char *lang)</div><div class="ttdoc">says digits of a string </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08355">channel.c:8355</a></div></div>
<div class="ttc" id="channel_8h_html_a784b9642d6e2862b04b7f970b337549faa817f7fe5e8e40d403b349a6510d69df"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a784b9642d6e2862b04b7f970b337549faa817f7fe5e8e40d403b349a6510d69df">AST_AMA_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01179">channel.h:1179</a></div></div>
<div class="ttc" id="structast__party__name__ies_html_ac63b1f168765a53e565a8ba27f5469d1"><div class="ttname"><a href="../../df/d8e/structast__party__name__ies.html#ac63b1f168765a53e565a8ba27f5469d1">ast_party_name_ies::valid</a></div><div class="ttdeci">int valid</div><div class="ttdoc">valid/present ie </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08427">channel.c:8427</a></div></div>
<div class="ttc" id="channel_8c_html_a4553faa9cf1e184164ebb526693585f0ad36d00efd146b7944de99a52d3fb0c75"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a4553faa9cf1e184164ebb526693585f0ad36d00efd146b7944de99a52d3fb0c75">DTMF_RECEIVED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03362">channel.c:3362</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga624c4bd0bf97a8a1a9e335cb26996f97"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga624c4bd0bf97a8a1a9e335cb26996f97">ast_channel_hold_type</a></div><div class="ttdeci">struct stasis_message_type * ast_channel_hold_type(void)</div><div class="ttdoc">Message type for when a channel is placed on hold. </div></div>
<div class="ttc" id="channel_8c_html_ab7e42c3c758e44260f91a5dd6e017fdc"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ab7e42c3c758e44260f91a5dd6e017fdc">ast_party_id_merge</a></div><div class="ttdeci">struct ast_party_id ast_party_id_merge(struct ast_party_id *base, struct ast_party_id *overlay)</div><div class="ttdoc">Merge a given party id into another given party id. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01902">channel.c:1902</a></div></div>
<div class="ttc" id="channel_8h_html_ac2dc872b606534943c98304aed841b34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a></div><div class="ttdeci">struct ast_party_caller * ast_channel_caller(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00888">channel_internal_api.c:888</a></div></div>
<div class="ttc" id="structast__datastore__info_html_a763fd8db6bba8fbbbc113ca0d61c47c2"><div class="ttname"><a href="../../d9/dfb/structast__datastore__info.html#a763fd8db6bba8fbbbc113ca0d61c47c2">ast_datastore_info::type</a></div><div class="ttdeci">const char * type</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00032">datastore.h:32</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5">AST_CONTROL_HOLD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00293">include/asterisk/frame.h:293</a></div></div>
<div class="ttc" id="structast__channel__tech_html_a6d8399b6669345e9338e93ed292faa5b"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#a6d8399b6669345e9338e93ed292faa5b">ast_channel_tech::answer_with_stream_topology</a></div><div class="ttdeci">int(*const answer_with_stream_topology)(struct ast_channel *chan, struct ast_stream_topology *topology)</div><div class="ttdoc">Answer the channel with topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00721">channel.h:721</a></div></div>
<div class="ttc" id="causes_8h_html_a1514f9ae692d948e3351fa75d4be2bf3"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a1514f9ae692d948e3351fa75d4be2bf3">AST_CAUSE_PROTOCOL_ERROR</a></div><div class="ttdeci">#define AST_CAUSE_PROTOCOL_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00144">causes.h:144</a></div></div>
<div class="ttc" id="channel_8h_html_ab53a405a4ee95970b9d8d54749782482"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab53a405a4ee95970b9d8d54749782482">ast_channel_dtmf_digit_to_emulate_set</a></div><div class="ttdeci">void ast_channel_dtmf_digit_to_emulate_set(struct ast_channel *chan, char value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00383">channel_internal_api.c:383</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_abc34958c9b03014779727e5ca61b93e5"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#abc34958c9b03014779727e5ca61b93e5">musicclass</a></div><div class="ttdeci">static char musicclass[MAX_MUSICCLASS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00162">chan_mgcp.c:162</a></div></div>
<div class="ttc" id="structast__framehook__interface_html_ab6d7b6f8c2ceaba7acda80aaf05f4899"><div class="ttname"><a href="../../d3/d7b/structast__framehook__interface.html#ab6d7b6f8c2ceaba7acda80aaf05f4899">ast_framehook_interface::version</a></div><div class="ttdeci">uint16_t version</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d3c/framehook_8h_source.html#l00231">framehook.h:231</a></div></div>
<div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792ad8975c2a6f9f8304424931e420033788"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ad8975c2a6f9f8304424931e420033788">AST_REDIRECTING_PRIV_FROM_SUBADDRESS_VALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09306">channel.c:9306</a></div></div>
<div class="ttc" id="threadstorage_8h_html_ac268c0a8272ec11e73269392507fb1a6"><div class="ttname"><a href="../../dc/d7d/threadstorage_8h.html#ac268c0a8272ec11e73269392507fb1a6">AST_THREADSTORAGE</a></div><div class="ttdeci">#define AST_THREADSTORAGE(name)</div><div class="ttdoc">Define a thread storage variable. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/threadstorage_8h_source.html#l00084">threadstorage.h:84</a></div></div>
<div class="ttc" id="channel_8c_html_a0275d7480f8a07d47460752834bb3a40"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a0275d7480f8a07d47460752834bb3a40">ast_say_number</a></div><div class="ttdeci">int ast_say_number(struct ast_channel *chan, int num, const char *ints, const char *language, const char *options)</div><div class="ttdoc">says a number </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08337">channel.c:8337</a></div></div>
<div class="ttc" id="channel_8h_html_a641d81d0c5c8df99d43eff69aede3bfd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a641d81d0c5c8df99d43eff69aede3bfd">ast_group_t</a></div><div class="ttdeci">unsigned long long ast_group_t</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00214">channel.h:214</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a2236897b5f92120e3f949c4e2fa08d8e"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a2236897b5f92120e3f949c4e2fa08d8e">AST_REDIRECTING_TO_NAME_PRESENTATION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09265">channel.c:9265</a></div></div>
<div class="ttc" id="structast__party__name__ies_html"><div class="ttname"><a href="../../df/d8e/structast__party__name__ies.html">ast_party_name_ies</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08419">channel.c:8419</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792af393eae44971089a6f6c075e0dc280f7"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792af393eae44971089a6f6c075e0dc280f7">AST_REDIRECTING_TO_NAME_CHAR_SET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09264">channel.c:9264</a></div></div>
<div class="ttc" id="channel_8c_html_aa024215ca494ac1d1a4987c2e3809fd8"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aa024215ca494ac1d1a4987c2e3809fd8">ast_party_name_set</a></div><div class="ttdeci">void ast_party_name_set(struct ast_party_name *dest, const struct ast_party_name *src)</div><div class="ttdoc">Set the source party name information into the destination party name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01621">channel.c:1621</a></div></div>
<div class="ttc" id="channel_8h_html_ae527c750e43093165b2dcfd75e7bb6c4"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae527c750e43093165b2dcfd75e7bb6c4">ast_channel_internal_alertpipe_clear</a></div><div class="ttdeci">void ast_channel_internal_alertpipe_clear(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01135">channel_internal_api.c:1135</a></div></div>
<div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="channel_8c_html_a56819f90869d77808fd52f4d2693a75c"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a56819f90869d77808fd52f4d2693a75c">ast_waitfor_n_fd</a></div><div class="ttdeci">int ast_waitfor_n_fd(int *fds, int n, int *ms, int *exception)</div><div class="ttdoc">Wait for x amount of time on a file descriptor to have input. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02989">channel.c:2989</a></div></div>
<div class="ttc" id="structast__framehook__interface_html"><div class="ttname"><a href="../../d3/d7b/structast__framehook__interface.html">ast_framehook_interface</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d3c/framehook_8h_source.html#l00229">framehook.h:229</a></div></div>
<div class="ttc" id="channel_8c_html_a3212119ca5acac4c9ec6051987380876aff5b26c05cf294cfe8df0bd0a809087d"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876aff5b26c05cf294cfe8df0bd0a809087d">AST_CONNECTED_LINE_VERSION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08768">channel.c:8768</a></div></div>
<div class="ttc" id="channel_8h_html_aa2048158d099227002ac76f41865c5b5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa2048158d099227002ac76f41865c5b5">ast_channel_fdno_set</a></div><div class="ttdeci">void ast_channel_fdno_set(struct ast_channel *chan, int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00423">channel_internal_api.c:423</a></div></div>
<div class="ttc" id="structast__party__id_html"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html">ast_party_id</a></div><div class="ttdoc">Information needed to identify an endpoint in a call. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00339">channel.h:339</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a14a9662e09deed264497073732fb014a"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a></div><div class="ttdeci">enum sip_cc_notify_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00959">chan_sip.c:959</a></div></div>
<div class="ttc" id="channel_8h_html_a4870c8e338e4026d3b32509da7aeec34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4870c8e338e4026d3b32509da7aeec34">ast_channel_blockproc</a></div><div class="ttdeci">const char * ast_channel_blockproc(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00326">channel_internal_api.c:326</a></div></div>
<div class="ttc" id="indications_8h_html"><div class="ttname"><a href="../../d2/d0f/indications_8h.html">indications.h</a></div><div class="ttdoc">Tone Indication Support. </div></div>
<div class="ttc" id="linkedlists_8h_html_a22f1ded7491469f1fa336a7d25fac468"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a22f1ded7491469f1fa336a7d25fac468">AST_LIST_INSERT_LIST_AFTER</a></div><div class="ttdeci">#define AST_LIST_INSERT_LIST_AFTER(head, list, elm, field)</div><div class="ttdoc">Inserts a whole list after a specific entry in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00811">linkedlists.h:811</a></div></div>
<div class="ttc" id="channel_8c_html_a3dda07b27527beb0e8b4c92b90810834"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3dda07b27527beb0e8b4c92b90810834">ast_channel_unlink</a></div><div class="ttdeci">void ast_channel_unlink(struct ast_channel *chan)</div><div class="ttdoc">Remove a channel from the global channels container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10730">channel.c:10730</a></div></div>
<div class="ttc" id="structast__party__name__ies_html_a1fb9f03e5de01bf0a8f221e627fa9a7b"><div class="ttname"><a href="../../df/d8e/structast__party__name__ies.html#a1fb9f03e5de01bf0a8f221e627fa9a7b">ast_party_name_ies::char_set</a></div><div class="ttdeci">int char_set</div><div class="ttdoc">Character set ie. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08423">channel.c:8423</a></div></div>
<div class="ttc" id="chan__iax2_8c_html_adfee50d07a98645d4d20b896ce03785a"><div class="ttname"><a href="../../d5/dff/chan__iax2_8c.html#adfee50d07a98645d4d20b896ce03785a">accountcode</a></div><div class="ttdeci">static char accountcode[AST_MAX_ACCOUNT_CODE]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dff/chan__iax2_8c_source.html#l00428">chan_iax2.c:428</a></div></div>
<div class="ttc" id="channel_8h_html_acc673ff60b558a8b69392c29a6478c72"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#acc673ff60b558a8b69392c29a6478c72">ast_channel_timingfunc_set</a></div><div class="ttdeci">void ast_channel_timingfunc_set(struct ast_channel *chan, ast_timing_func_t value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01235">channel_internal_api.c:1235</a></div></div>
<div class="ttc" id="structast__party__name_html_a3df9119032baa1743f2db71344bd7cac"><div class="ttname"><a href="../../d8/d6f/structast__party__name.html#a3df9119032baa1743f2db71344bd7cac">ast_party_name::presentation</a></div><div class="ttdeci">int presentation</div><div class="ttdoc">Q.931 encoded presentation-indicator encoded field. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00278">channel.h:278</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_gga44ac88ed1b656e254dcad5cf0dbd2a22ad68ccac32a7d354861a476fe99a88f2c"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22ad68ccac32a7d354861a476fe99a88f2c">AST_MSG_DATA_ATTR_CONTENT_TYPE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00457">message.h:457</a></div></div>
<div class="ttc" id="channel_8c_html_a60f9d2b0ab8b7a839902313321163b28"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a60f9d2b0ab8b7a839902313321163b28">ast_queue_control</a></div><div class="ttdeci">int ast_queue_control(struct ast_channel *chan, enum ast_control_frame_type control)</div><div class="ttdoc">Queue a control frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01231">channel.c:1231</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a8a34f9064e5ebb6712635180d1b50e18"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a8a34f9064e5ebb6712635180d1b50e18">AST_REDIRECTING_PRIV_ORIG_NAME_CHAR_SET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09314">channel.c:9314</a></div></div>
<div class="ttc" id="channel_8h_html_ae985d192912f7b94747225672c57dc5d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae985d192912f7b94747225672c57dc5d">ast_channel_fd_isset</a></div><div class="ttdeci">int ast_channel_fd_isset(const struct ast_channel *chan, int which)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01190">channel_internal_api.c:1190</a></div></div>
<div class="ttc" id="channel_8c_html_a723ac44c92b9edb6c1a731e01edacb4a"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a723ac44c92b9edb6c1a731e01edacb4a">ast_check_hangup_locked</a></div><div class="ttdeci">int ast_check_hangup_locked(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00459">channel.c:459</a></div></div>
<div class="ttc" id="causes_8h_html_ab7713547640d212063cb5af042b2370e"><div class="ttname"><a href="../../d4/da3/causes_8h.html#ab7713547640d212063cb5af042b2370e">AST_CAUSE_MANDATORY_IE_MISSING</a></div><div class="ttdeci">#define AST_CAUSE_MANDATORY_IE_MISSING</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00136">causes.h:136</a></div></div>
<div class="ttc" id="app__alarmreceiver_8c_html_ac2c887b7f7b359bfdda8a128980f5081"><div class="ttname"><a href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a></div><div class="ttdeci">char digit</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">app_alarmreceiver.c:131</a></div></div>
<div class="ttc" id="channel_8c_html_a1514566e424a97422871903379c1a304"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a1514566e424a97422871903379c1a304">ast_party_dialed_set_init</a></div><div class="ttdeci">void ast_party_dialed_set_init(struct ast_party_dialed *init, const struct ast_party_dialed *guide)</div><div class="ttdoc">Initialize the given dialed structure using the given guide for a set update operation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01950">channel.c:1950</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="causes_8h_html_a512cf0d8e1eb047ebf9daceb9930a228"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a512cf0d8e1eb047ebf9daceb9930a228">AST_CAUSE_BEARERCAPABILITY_NOTAUTH</a></div><div class="ttdeci">#define AST_CAUSE_BEARERCAPABILITY_NOTAUTH</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00128">causes.h:128</a></div></div>
<div class="ttc" id="channel_8c_html_a21c057f81ff8b02eb1120410ae86e657"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a21c057f81ff8b02eb1120410ae86e657">ast_channel_clear_softhangup</a></div><div class="ttdeci">void ast_channel_clear_softhangup(struct ast_channel *chan, int flag)</div><div class="ttdoc">Clear a set of softhangup flags from a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02437">channel.c:2437</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a6613d45a04e74534bf7e318b2c71e077"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a6613d45a04e74534bf7e318b2c71e077">indicate</a></div><div class="ttdeci">static int indicate(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l01333">chan_pjsip.c:1333</a></div></div>
<div class="ttc" id="format_8h_html_a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0a/format_8h_source.html#l00036">format.h:36</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="structset__format__access_html_a479c848d7753855587c70c628b2774b6"><div class="ttname"><a href="../../d0/d0f/structset__format__access.html#a479c848d7753855587c70c628b2774b6">set_format_access::set_trans</a></div><div class="ttdeci">void(* set_trans)(struct ast_channel *chan, struct ast_trans_pvt *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05650">channel.c:5650</a></div></div>
<div class="ttc" id="channel_8c_html_a3212119ca5acac4c9ec6051987380876a096336a324a96da5dc1d2889f2f23a95"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a096336a324a96da5dc1d2889f2f23a95">AST_CONNECTED_LINE_PRIV_SUBADDRESS_ODD_EVEN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08788">channel.c:8788</a></div></div>
<div class="ttc" id="channel_8c_html_a3212119ca5acac4c9ec6051987380876afd2a6c6f9e551dd448cbee52f03b546f"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876afd2a6c6f9e551dd448cbee52f03b546f">AST_CONNECTED_LINE_NUMBER_PLAN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08760">channel.c:8760</a></div></div>
<div class="ttc" id="channel_8c_html_aa04698b135a0299545ce4fc2513ed006"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aa04698b135a0299545ce4fc2513ed006">features_destroy</a></div><div class="ttdeci">static void features_destroy(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l11094">channel.c:11094</a></div></div>
<div class="ttc" id="structast__party__dialed_html_a436a3700bd4ae24751d7fad4538466aa"><div class="ttname"><a href="../../d1/dd1/structast__party__dialed.html#a436a3700bd4ae24751d7fad4538466aa">ast_party_dialed::number</a></div><div class="ttdeci">struct ast_party_dialed::@246 number</div><div class="ttdoc">Dialed/Called number. </div></div>
<div class="ttc" id="say_8h_html_a22eed2dcf42488b3e6cea2a987a67503"><div class="ttname"><a href="../../db/dce/say_8h.html#a22eed2dcf42488b3e6cea2a987a67503">ast_say_number_full</a></div><div class="ttdeci">SAY_EXTERN int(* ast_say_number_full)(struct ast_channel *chan, int num, const char *ints, const char *lang, const char *options, int audiofd, int ctrlfd) SAY_INIT(ast_say_number_full)</div><div class="ttdoc">Same as ast_say_number() with audiofd for received audio and returns 1 on ctrlfd being readable...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dce/say_8h_source.html#l00086">say.h:86</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a047c4250fa40757e25c1a41549d1678d"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a047c4250fa40757e25c1a41549d1678d">AST_REDIRECTING_VERSION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09253">channel.c:9253</a></div></div>
<div class="ttc" id="bridge__features_8h_html_aafc3026d777c0bf6899e93263178e102"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a></div><div class="ttdeci">void ast_bridge_features_cleanup(struct ast_bridge_features *features)</div><div class="ttdoc">Clean up the contents of a bridge features structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03720">bridge.c:3720</a></div></div>
<div class="ttc" id="musiconhold_8h_html"><div class="ttname"><a href="../../dc/d07/musiconhold_8h.html">musiconhold.h</a></div><div class="ttdoc">Music on hold handling. </div></div>
<div class="ttc" id="structoutgoing__helper_html_a1032774a59971af0f3555668407e7ec7"><div class="ttname"><a href="../../d9/dc0/structoutgoing__helper.html#a1032774a59971af0f3555668407e7ec7">outgoing_helper::cid_num</a></div><div class="ttdeci">const char * cid_num</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01110">channel.h:1110</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ada620aba450c2a60eb096001f2361741"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ada620aba450c2a60eb096001f2361741">AST_FRAME_TEXT_DATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00137">include/asterisk/frame.h:137</a></div></div>
<div class="ttc" id="channel_8c_html_a9107a83365cbf327cc0d12cb0dbd28d8"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a9107a83365cbf327cc0d12cb0dbd28d8">ast_set_read_format</a></div><div class="ttdeci">int ast_set_read_format(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdoc">Sets read format on channel chan. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05849">channel.c:5849</a></div></div>
<div class="ttc" id="cli_8h_html_a5c4130cf8f1e93acfdd84416cebf1aef"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a></div><div class="ttdeci">#define AST_CLI_DEFINE(fn, txt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00197">cli.h:197</a></div></div>
<div class="ttc" id="channel_8c_html_aa095ba128741aac1e9306e4956be8707"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aa095ba128741aac1e9306e4956be8707">ast_set_party_id_all</a></div><div class="ttdeci">void ast_set_party_id_all(struct ast_set_party_id *update_id)</div><div class="ttdoc">Set the update marker to update all information of a corresponding party id. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01750">channel.c:1750</a></div></div>
<div class="ttc" id="structast__datastore__info_html_aaa9f35a5b8f54b82195bd7766ac984a8"><div class="ttname"><a href="../../d9/dfb/structast__datastore__info.html#aaa9f35a5b8f54b82195bd7766ac984a8">ast_datastore_info::duplicate</a></div><div class="ttdeci">void *(* duplicate)(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00033">datastore.h:33</a></div></div>
<div class="ttc" id="structast__party__dialed_html_ad1f8db563cb99d404b72e02cf8f78cd1"><div class="ttname"><a href="../../d1/dd1/structast__party__dialed.html#ad1f8db563cb99d404b72e02cf8f78cd1">ast_party_dialed::plan</a></div><div class="ttdeci">int plan</div><div class="ttdoc">Q.931 Type-Of-Number and Numbering-Plan encoded fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00389">channel.h:389</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a417ee8a61074ec7570971202908e2c4f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a417ee8a61074ec7570971202908e2c4f">ast_frdup</a></div><div class="ttdeci">#define ast_frdup(fr)</div><div class="ttdoc">Copies a frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00585">include/asterisk/frame.h:585</a></div></div>
<div class="ttc" id="structast__secure__call__store_html_a50b104e0500301624bc5d0bc44d5fd5d"><div class="ttname"><a href="../../dd/d2a/structast__secure__call__store.html#a50b104e0500301624bc5d0bc44d5fd5d">ast_secure_call_store::signaling</a></div><div class="ttdeci">unsigned int signaling</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc3/global__datastores_8h_source.html#l00032">global_datastores.h:32</a></div></div>
<div class="ttc" id="channel_8c_html_a9746280ef520b85bc81bb0b668ee9a8c"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a9746280ef520b85bc81bb0b668ee9a8c">set_format_access_write</a></div><div class="ttdeci">static const struct set_format_access set_format_access_write</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05669">channel.c:5669</a></div></div>
<div class="ttc" id="chan__iax2_8c_html_ae91dad65f553f7afebe4af507803bc7f"><div class="ttname"><a href="../../d5/dff/chan__iax2_8c.html#ae91dad65f553f7afebe4af507803bc7f">cos</a></div><div class="ttdeci">unsigned int cos</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dff/chan__iax2_8c_source.html#l00352">chan_iax2.c:352</a></div></div>
<div class="ttc" id="structast__party__number_html_ab50d783982593ef993ea0b68f7ad8b80"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">ast_party_number::str</a></div><div class="ttdeci">char * str</div><div class="ttdoc">Subscriber phone number (Malloced) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00292">channel.h:292</a></div></div>
<div class="ttc" id="channel_8c_html_abf858a4aac3ad8e1f87236611fce8db6"><div class="ttname"><a href="../../d4/d28/channel_8c.html#abf858a4aac3ad8e1f87236611fce8db6">ast_channel_get_up_time</a></div><div class="ttdeci">int ast_channel_get_up_time(struct ast_channel *chan)</div><div class="ttdoc">Obtain how long it has been since the channel was answered. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02854">channel.c:2854</a></div></div>
<div class="ttc" id="structgroups_html"><div class="ttname"><a href="../../d9/d28/structgroups.html">groups</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00123">main/app.c:123</a></div></div>
<div class="ttc" id="channel_8c_html_afdaf014aa17389de35cba4df16860b0d"><div class="ttname"><a href="../../d4/d28/channel_8c.html#afdaf014aa17389de35cba4df16860b0d">ast_party_caller_init</a></div><div class="ttdeci">void ast_party_caller_init(struct ast_party_caller *init)</div><div class="ttdoc">Initialize the given caller structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01978">channel.c:1978</a></div></div>
<div class="ttc" id="structast__channel__tech_html_a13cd795c048a930f2b391b9e44cb9538"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#a13cd795c048a930f2b391b9e44cb9538">ast_channel_tech::transfer</a></div><div class="ttdeci">int(*const transfer)(struct ast_channel *chan, const char *newdest)</div><div class="ttdoc">Blind transfer other side (see app_transfer.c and ast_transfer() </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00784">channel.h:784</a></div></div>
<div class="ttc" id="transcap_8h_html"><div class="ttname"><a href="../../d7/d86/transcap_8h.html">transcap.h</a></div><div class="ttdoc">General Asterisk channel transcoding definitions. </div></div>
<div class="ttc" id="channel_8h_html_ac13c3b096520bacd17e9c023280e580f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac13c3b096520bacd17e9c023280e580f">ast_channel_hold_state</a></div><div class="ttdeci">int ast_channel_hold_state(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00485">channel_internal_api.c:485</a></div></div>
<div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="structtonepair__state_html_accaedd1ffb93951a317101d3c9340769"><div class="ttname"><a href="../../d6/d63/structtonepair__state.html#accaedd1ffb93951a317101d3c9340769">tonepair_state::v3_1</a></div><div class="ttdeci">int v3_1</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07574">channel.c:7574</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a902377dfc1e6013af292a6f98ce86bd3"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a902377dfc1e6013af292a6f98ce86bd3">AST_REDIRECTING_PRIV_FROM_NUMBER_PLAN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09296">channel.c:9296</a></div></div>
<div class="ttc" id="structast__channel_html_a5023e29d4234076952bfecfff178b566"><div class="ttname"><a href="../../df/d3c/structast__channel.html#a5023e29d4234076952bfecfff178b566">ast_channel::connected</a></div><div class="ttdeci">struct ast_party_connected_line connected</div><div class="ttdoc">Channel Connected Line ID information. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00140">channel_internal_api.c:140</a></div></div>
<div class="ttc" id="structast__channel__tech_html_a753bd4ae57b6128ac98a2d76aed21f28"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#a753bd4ae57b6128ac98a2d76aed21f28">ast_channel_tech::setoption</a></div><div class="ttdeci">int(*const setoption)(struct ast_channel *chan, int option, void *data, int datalen)</div><div class="ttdoc">Set a given option. Called with chan locked. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00778">channel.h:778</a></div></div>
<div class="ttc" id="format_8h_html_a0aba6e17ced3e85e838ea097baa5ddc7"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a></div><div class="ttdeci">enum ast_media_type ast_format_get_type(const struct ast_format *format)</div><div class="ttdoc">Get the media type of a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00354">format.c:354</a></div></div>
<div class="ttc" id="causes_8h_html_a9dee3650d0fcf0f2d7a0c218cbf35821"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a9dee3650d0fcf0f2d7a0c218cbf35821">AST_CAUSE_SUBSCRIBER_ABSENT</a></div><div class="ttdeci">#define AST_CAUSE_SUBSCRIBER_ABSENT</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00109">causes.h:109</a></div></div>
<div class="ttc" id="structast__channel__tech_html_a8ff938fb2f815be425fd2859a21e6d61"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#a8ff938fb2f815be425fd2859a21e6d61">ast_channel_tech::type</a></div><div class="ttdeci">const char *const type</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00630">channel.h:630</a></div></div>
<div class="ttc" id="causes_8h_html_a2f438eadf07706f40ddcf20f94bc2a4e"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a2f438eadf07706f40ddcf20f94bc2a4e">AST_CAUSE_OUTGOING_CALL_BARRED</a></div><div class="ttdeci">#define AST_CAUSE_OUTGOING_CALL_BARRED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00126">causes.h:126</a></div></div>
<div class="ttc" id="channel_8c_html_a7a410e1008c361f6ea2bd89b41c4be5c"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a7a410e1008c361f6ea2bd89b41c4be5c">ast_party_caller_set</a></div><div class="ttdeci">void ast_party_caller_set(struct ast_party_caller *dest, const struct ast_party_caller *src, const struct ast_set_party_caller *update)</div><div class="ttdoc">Set the caller information based on another caller source. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02007">channel.c:2007</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_gga44ac88ed1b656e254dcad5cf0dbd2a22a0f0f211998e9727566ad340464c66070"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a0f0f211998e9727566ad340464c66070">AST_MSG_DATA_ATTR_BODY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00458">message.h:458</a></div></div>
<div class="ttc" id="causes_8h_html_a4c378d6f7b9d40dee77d74fa7c5d91e4"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a4c378d6f7b9d40dee77d74fa7c5d91e4">AST_CAUSE_INCOMPATIBLE_DESTINATION</a></div><div class="ttdeci">#define AST_CAUSE_INCOMPATIBLE_DESTINATION</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00134">causes.h:134</a></div></div>
<div class="ttc" id="lock_8h_html"><div class="ttname"><a href="../../dd/d42/lock_8h.html">lock.h</a></div><div class="ttdoc">Asterisk locking-related definitions: </div></div>
<div class="ttc" id="timing_8h_html_a1d143d561876cec8843bce227c06fed2"><div class="ttname"><a href="../../db/d41/timing_8h.html#a1d143d561876cec8843bce227c06fed2">ast_timer_get_max_rate</a></div><div class="ttdeci">unsigned int ast_timer_get_max_rate(const struct ast_timer *handle)</div><div class="ttdoc">Get maximum rate supported for a timer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d62/timing_8c_source.html#l00191">timing.c:191</a></div></div>
<div class="ttc" id="channel_8c_html_a99e5311ec38b1b7a01530176130bd995"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a99e5311ec38b1b7a01530176130bd995">adjust_frame_for_plc</a></div><div class="ttdeci">static void adjust_frame_for_plc(struct ast_channel *chan, struct ast_frame *frame, struct ast_datastore *datastore)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05098">channel.c:5098</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5a668ac945c84f50becaca2a6134e64058"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a668ac945c84f50becaca2a6134e64058">AST_FLAG_END_DTMF_ONLY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01008">channel.h:1008</a></div></div>
<div class="ttc" id="stasis__channels_8h_html"><div class="ttname"><a href="../../d9/d4a/stasis__channels_8h.html">stasis_channels.h</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaa247523a680e6e57a3478b7f992ab3a5"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaa247523a680e6e57a3478b7f992ab3a5">ast_channel_dtmf_end_type</a></div><div class="ttdeci">struct stasis_message_type * ast_channel_dtmf_end_type(void)</div><div class="ttdoc">Message type for when DTMF ends on a channel. </div></div>
<div class="ttc" id="asterisk_8h_html"><div class="ttname"><a href="../../db/db2/asterisk_8h.html">asterisk.h</a></div><div class="ttdoc">Asterisk main include file. File version handling, generic pbx functions. </div></div>
<div class="ttc" id="asterisk_8h_html_a6b112b17aed018d85c397e7591948793"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#a6b112b17aed018d85c397e7591948793">ast_shutting_down</a></div><div class="ttdeci">int ast_shutting_down(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01834">asterisk.c:1834</a></div></div>
<div class="ttc" id="linkedlists_8h_html_adf1959c5c03a3a706da97ad2f49617e5"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a></div><div class="ttdeci">#define AST_LIST_FIRST(head)</div><div class="ttdoc">Returns the first entry contained in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00420">linkedlists.h:420</a></div></div>
<div class="ttc" id="channel_8c_html_aad1e09cd7c79237d05cffb45d6cdfd7c"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aad1e09cd7c79237d05cffb45d6cdfd7c">ast_channel_datastore_find</a></div><div class="ttdeci">struct ast_datastore * ast_channel_datastore_find(struct ast_channel *chan, const struct ast_datastore_info *info, const char *uid)</div><div class="ttdoc">Find a datastore on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02404">channel.c:2404</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a10624bc470a4ac2634221dfa74bdb17fa74b94669f324ba10f5bfb979f54e636c"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a10624bc470a4ac2634221dfa74bdb17fa74b94669f324ba10f5bfb979f54e636c">AST_GETDATA_INTERRUPTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01158">include/asterisk/app.h:1158</a></div></div>
<div class="ttc" id="channel_8h_html_a784b9642d6e2862b04b7f970b337549fa57aa76a632aa16d12a92e43b81c32a68"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a784b9642d6e2862b04b7f970b337549fa57aa76a632aa16d12a92e43b81c32a68">AST_AMA_DOCUMENTATION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01182">channel.h:1182</a></div></div>
<div class="ttc" id="callerid_8h_html_a84c18283fee396ec5947fc497dd39169a1cf63751ca0805657b57f0ca36069f41"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a84c18283fee396ec5947fc497dd39169a1cf63751ca0805657b57f0ca36069f41">AST_REDIRECTING_REASON_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00391">callerid.h:391</a></div></div>
<div class="ttc" id="channel_8h_html_a164fc108bc4b6a69ebef6acee330f8c8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a164fc108bc4b6a69ebef6acee330f8c8">ast_channel_visible_indication_set</a></div><div class="ttdeci">void ast_channel_visible_indication_set(struct ast_channel *chan, int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00481">channel_internal_api.c:481</a></div></div>
<div class="ttc" id="astobj2_8h_html_a512cc40ce96c63b3d5c78040baa4c9cd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a></div><div class="ttdeci">int ao2_container_count(struct ao2_container *c)</div><div class="ttdoc">Returns the number of elements in a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00034">astobj2_container.c:34</a></div></div>
<div class="ttc" id="say_8h_html_aa29035b1516bf16f471ece5e5adc052a"><div class="ttname"><a href="../../db/dce/say_8h.html#aa29035b1516bf16f471ece5e5adc052a">ast_say_enumeration_full</a></div><div class="ttdeci">SAY_EXTERN int(* ast_say_enumeration_full)(struct ast_channel *chan, int num, const char *ints, const char *lang, const char *options, int audiofd, int ctrlfd) SAY_INIT(ast_say_enumeration_full)</div><div class="ttdoc">Same as ast_say_enumeration() with audiofd for received audio and returns 1 on ctrlfd being readable...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dce/say_8h_source.html#l00106">say.h:106</a></div></div>
<div class="ttc" id="structast__party__redirecting_html_a99c02430b9b95b394cc2eb49ece959ad"><div class="ttname"><a href="../../df/d44/structast__party__redirecting.html#a99c02430b9b95b394cc2eb49ece959ad">ast_party_redirecting::priv_to</a></div><div class="ttdeci">struct ast_party_id priv_to</div><div class="ttdoc">Call is redirecting to a new party (Sent to the caller) - private representation. ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00540">channel.h:540</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="structast__frame_html_aed7ea92f45bd273dde380a45ddced592"><div class="ttname"><a href="../../d0/d99/structast__frame.html#aed7ea92f45bd273dde380a45ddced592">ast_frame::offset</a></div><div class="ttdeci">int offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00179">include/asterisk/frame.h:179</a></div></div>
<div class="ttc" id="structast__party__dialed_html_ab50d783982593ef993ea0b68f7ad8b80"><div class="ttname"><a href="../../d1/dd1/structast__party__dialed.html#ab50d783982593ef993ea0b68f7ad8b80">ast_party_dialed::str</a></div><div class="ttdeci">char * str</div><div class="ttdoc">Subscriber phone number (Malloced) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00387">channel.h:387</a></div></div>
<div class="ttc" id="structast__control__pvt__cause__code_html_a933d9bf113023b81a5bc4820f617c068"><div class="ttname"><a href="../../d9/d2d/structast__control__pvt__cause__code.html#a933d9bf113023b81a5bc4820f617c068">ast_control_pvt_cause_code::chan_name</a></div><div class="ttdeci">char chan_name[AST_CHANNEL_NAME]</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00414">include/asterisk/frame.h:414</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="channel_8h_html_a907e3b6538d521f90e402efe3c522b6d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a907e3b6538d521f90e402efe3c522b6d">ast_channel_timer_set</a></div><div class="ttdeci">void ast_channel_timer_set(struct ast_channel *chan, struct ast_timer *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00741">channel_internal_api.c:741</a></div></div>
<div class="ttc" id="structset__format__access_html_a730ad8a560a949aed53fcb661abeaabf"><div class="ttname"><a href="../../d0/d0f/structset__format__access.html#a730ad8a560a949aed53fcb661abeaabf">set_format_access::get_rawformat</a></div><div class="ttdeci">struct ast_format *(* get_rawformat)(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05653">channel.c:5653</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gacdff76704ce4ee5c18b5656592886c78"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gacdff76704ce4ee5c18b5656592886c78">ast_channel_unhold_type</a></div><div class="ttdeci">struct stasis_message_type * ast_channel_unhold_type(void)</div><div class="ttdoc">Message type for when a channel is removed from hold. </div></div>
<div class="ttc" id="channel_8h_html_aa62371d642974c67a0c0efa77d54fcbda23a252d7e5f2a10c8fef224843728264"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa62371d642974c67a0c0efa77d54fcbda23a252d7e5f2a10c8fef224843728264">AST_CHAN_TP_SEND_TEXT_DATA</a></div><div class="ttdoc">Channels have this property if they implement send_text_data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00976">channel.h:976</a></div></div>
<div class="ttc" id="structast__channel_html_aff76880df6a5121f2eb36109c79c28a2"><div class="ttname"><a href="../../df/d3c/structast__channel.html#aff76880df6a5121f2eb36109c79c28a2">ast_channel::caller</a></div><div class="ttdeci">struct ast_party_caller caller</div><div class="ttdoc">Channel Caller ID information. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00133">channel_internal_api.c:133</a></div></div>
<div class="ttc" id="channel_8c_html_a89fca3b0f0aae97b9c96e1da30e59d8f"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a89fca3b0f0aae97b9c96e1da30e59d8f">channel_move_lock</a></div><div class="ttdeci">static ast_mutex_t channel_move_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10865">channel.c:10865</a></div></div>
<div class="ttc" id="channel_8h_html_a8b8f9e299537c8eee7cb67de52f44c8d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a8b8f9e299537c8eee7cb67de52f44c8d">ast_channel_vstream</a></div><div class="ttdeci">struct ast_filestream * ast_channel_vstream(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00629">channel_internal_api.c:629</a></div></div>
<div class="ttc" id="channel_8h_html_afb86bdd7fa42b7bf8ac2fbfab01f67ef"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#afb86bdd7fa42b7bf8ac2fbfab01f67ef">ast_channel_generatordata</a></div><div class="ttdeci">void * ast_channel_generatordata(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00549">channel_internal_api.c:549</a></div></div>
<div class="ttc" id="structast__set__party__caller_html_a273deff24b36cce96822975f2326ad7d"><div class="ttname"><a href="../../d7/d91/structast__set__party__caller.html#a273deff24b36cce96822975f2326ad7d">ast_set_party_caller::ani</a></div><div class="ttdeci">struct ast_set_party_id ani</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00445">channel.h:445</a></div></div>
<div class="ttc" id="channel_8h_html_ae7cc45ab2e1d083100bedc5c62a1977b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae7cc45ab2e1d083100bedc5c62a1977b">ast_channel_whentohangup_set</a></div><div class="ttdeci">void ast_channel_whentohangup_set(struct ast_channel *chan, struct timeval *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00968">channel_internal_api.c:968</a></div></div>
<div class="ttc" id="channel_8h_html_aee89f8031cb348efd3a20be962e7eefb"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aee89f8031cb348efd3a20be962e7eefb">ast_channel_is_multistream</a></div><div class="ttdeci">int ast_channel_is_multistream(struct ast_channel *chan)</div><div class="ttdoc">Determine if a channel is multi-stream capable. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01643">channel_internal_api.c:1643</a></div></div>
<div class="ttc" id="threadstorage_8h_html_ab6ff44d2acf6ea45090177cd3141da03"><div class="ttname"><a href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a></div><div class="ttdeci">void * ast_threadstorage_get(struct ast_threadstorage *ts, size_t init_size)</div><div class="ttdoc">Retrieve thread storage. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/threadstorage_8h_source.html#l00197">threadstorage.h:197</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a10624bc470a4ac2634221dfa74bdb17fa76a0cf0f0ca1c3000e227686d7de7d9c"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a10624bc470a4ac2634221dfa74bdb17fa76a0cf0f0ca1c3000e227686d7de7d9c">AST_GETDATA_COMPLETE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01156">include/asterisk/app.h:1156</a></div></div>
<div class="ttc" id="structset__format__access_html_ae495ce4d65a6f5391715f97994829da1"><div class="ttname"><a href="../../d0/d0f/structset__format__access.html#ae495ce4d65a6f5391715f97994829da1">set_format_access::direction</a></div><div class="ttdeci">const char * direction</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05648">channel.c:5648</a></div></div>
<div class="ttc" id="channel_8c_html_ade95e66d7c53181894de1d3569aee2b8"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ade95e66d7c53181894de1d3569aee2b8">ast_party_connected_line_set_init</a></div><div class="ttdeci">void ast_party_connected_line_set_init(struct ast_party_connected_line *init, const struct ast_party_connected_line *guide)</div><div class="ttdoc">Initialize the given connected line structure using the given guide for a set update operation...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02045">channel.c:2045</a></div></div>
<div class="ttc" id="json_8h_html_a99715667e822b2ad409b34ca041e535d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a></div><div class="ttdeci">struct ast_json * ast_json_pack(char const *format,...)</div><div class="ttdoc">Helper for creating complex JSON values. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00591">json.c:591</a></div></div>
<div class="ttc" id="chan__iax2_8c_html_ad2cfb0f821c065261382a9298bb5a16b"><div class="ttname"><a href="../../d5/dff/chan__iax2_8c.html#ad2cfb0f821c065261382a9298bb5a16b">amaflags</a></div><div class="ttdeci">static int amaflags</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dff/chan__iax2_8c_source.html#l00431">chan_iax2.c:431</a></div></div>
<div class="ttc" id="channel_8h_html_a30f1b71b332a19f98f8d14a736699a03"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a30f1b71b332a19f98f8d14a736699a03">ast_channel_internal_alert_readfd</a></div><div class="ttdeci">int ast_channel_internal_alert_readfd(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01150">channel_internal_api.c:1150</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00036">channelstate.h:36</a></div></div>
<div class="ttc" id="channel_8c_html_a3212119ca5acac4c9ec6051987380876a898aa5bd4f67835872f001534a5d0161"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a898aa5bd4f67835872f001534a5d0161">AST_CONNECTED_LINE_PRIV_NAME_PRESENTATION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08785">channel.c:8785</a></div></div>
<div class="ttc" id="channel_8c_html_ae5b763a23d35fc0b721adc3df8724712"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ae5b763a23d35fc0b721adc3df8724712">__ast_queue_frame</a></div><div class="ttdeci">static int __ast_queue_frame(struct ast_channel *chan, struct ast_frame *fin, int head, struct ast_frame *after)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01015">channel.c:1015</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ae8f2cd460fdc81e0a774434fa002e4bf"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae8f2cd460fdc81e0a774434fa002e4bf">AST_CONTROL_FLASH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00286">include/asterisk/frame.h:286</a></div></div>
<div class="ttc" id="channel_8c_html_ad06e1b83ea6a33e096035c7ac0be5a20"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ad06e1b83ea6a33e096035c7ac0be5a20">is_visible_indication</a></div><div class="ttdeci">static int attribute_const is_visible_indication(enum ast_control_frame_type condition)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04327">channel.c:4327</a></div></div>
<div class="ttc" id="channel_8h_html_a2730f9c6fc0d433ab49f62faa8f87909"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a2730f9c6fc0d433ab49f62faa8f87909">ast_channel_insmpl_set</a></div><div class="ttdeci">void ast_channel_insmpl_set(struct ast_channel *chan, unsigned long value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00537">channel_internal_api.c:537</a></div></div>
<div class="ttc" id="indications_8h_html_ae4e735983064b7fe22ffc0fc046d700e"><div class="ttname"><a href="../../d2/d0f/indications_8h.html#ae4e735983064b7fe22ffc0fc046d700e">ast_tone_zone_unref</a></div><div class="ttdeci">static struct ast_tone_zone * ast_tone_zone_unref(struct ast_tone_zone *tz)</div><div class="ttdoc">Release a reference to an ast_tone_zone. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0f/indications_8h_source.html#l00205">indications.h:205</a></div></div>
<div class="ttc" id="channel_8c_html_a1c6e57f04f1e4d23dcd27c2bac717aa0"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a1c6e57f04f1e4d23dcd27c2bac717aa0">ast_channel_get_ari_vars</a></div><div class="ttdeci">struct varshead * ast_channel_get_ari_vars(struct ast_channel *chan)</div><div class="ttdoc">Gets the variables for a given channel, as specified by ast_channel_set_ari_vars(). </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08090">channel.c:8090</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a39918fd433ac42184b152c86016ef139"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a39918fd433ac42184b152c86016ef139">AST_RWLIST_HEAD_STATIC</a></div><div class="ttdeci">#define AST_RWLIST_HEAD_STATIC(name, type)</div><div class="ttdoc">Defines a structure to be used to hold a read/write list of specified type, statically initialized...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00332">linkedlists.h:332</a></div></div>
<div class="ttc" id="channel_8c_html_a8c78bb458956af6d70a53681ec24a3d6"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8c78bb458956af6d70a53681ec24a3d6">channel_feature_hooks_set_full</a></div><div class="ttdeci">static int channel_feature_hooks_set_full(struct ast_channel *chan, struct ast_bridge_features *features, int replace)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l11115">channel.c:11115</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a4c11b286f8baee30d3b56a2c31fe26a6"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a4c11b286f8baee30d3b56a2c31fe26a6">AST_REDIRECTING_ORIG_NAME_CHAR_SET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09274">channel.c:9274</a></div></div>
<div class="ttc" id="structast__channel__tech_html_a1d28421a1284e27e17a1177523c88472"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#a1d28421a1284e27e17a1177523c88472">ast_channel_tech::write_video</a></div><div class="ttdeci">int(*const write_video)(struct ast_channel *chan, struct ast_frame *frame)</div><div class="ttdoc">Write a frame, in standard format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00787">channel.h:787</a></div></div>
<div class="ttc" id="channel_8h_html_aba3f5f98138ce51792c44388a8d3ddcc"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aba3f5f98138ce51792c44388a8d3ddcc">ast_channel_cdr</a></div><div class="ttdeci">struct ast_cdr * ast_channel_cdr(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00589">channel_internal_api.c:589</a></div></div>
<div class="ttc" id="channel_8c_html_a388b1ab04ed52109917914ac73662d0a"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a388b1ab04ed52109917914ac73662d0a">ast_channel_set_connected_line</a></div><div class="ttdeci">void ast_channel_set_connected_line(struct ast_channel *chan, const struct ast_party_connected_line *connected, const struct ast_set_party_connected_line *update)</div><div class="ttdoc">Set the connected line information in the Asterisk channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08404">channel.c:8404</a></div></div>
<div class="ttc" id="group__main__options_html_gac4f0ffd69871cc47ad3dc030127b8719"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gac4f0ffd69871cc47ad3dc030127b8719">option_dtmfminduration</a></div><div class="ttdeci">unsigned int option_dtmfminduration</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00083">options.c:83</a></div></div>
<div class="ttc" id="channel_8c_html_addfef2a83e18a52fc90d60fc6183be80"><div class="ttname"><a href="../../d4/d28/channel_8c.html#addfef2a83e18a52fc90d60fc6183be80">ast_channel_get_duration</a></div><div class="ttdeci">int ast_channel_get_duration(struct ast_channel *chan)</div><div class="ttdoc">Obtain how long the channel since the channel was created. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02839">channel.c:2839</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga5c533cb6116415f52f137ea431afe9e3"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga5c533cb6116415f52f137ea431afe9e3">ast_channel_snapshot_invalidate_segment</a></div><div class="ttdeci">void ast_channel_snapshot_invalidate_segment(struct ast_channel *chan, enum ast_channel_snapshot_segment_invalidation segment)</div><div class="ttdoc">Invalidate a channel snapshot segment from being reused. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01049">stasis_channels.c:1049</a></div></div>
<div class="ttc" id="structast__party__number__ies_html_aba03208f197d75b6e355ba9b2ae08ab5"><div class="ttname"><a href="../../d1/dbe/structast__party__number__ies.html#aba03208f197d75b6e355ba9b2ae08ab5">ast_party_number_ies::str</a></div><div class="ttdeci">int str</div><div class="ttdoc">Subscriber phone number ie. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08495">channel.c:8495</a></div></div>
<div class="ttc" id="channel_8h_html_ae35174b33cb8d9b4c1424448b21e50d2"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae35174b33cb8d9b4c1424448b21e50d2">ast_channel_get_stream_topology</a></div><div class="ttdeci">struct ast_stream_topology * ast_channel_get_stream_topology(const struct ast_channel *chan)</div><div class="ttdoc">Retrieve the topology of streams on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01583">channel_internal_api.c:1583</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a777afaccdfee5a46245cedbb2e859acd"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a777afaccdfee5a46245cedbb2e859acd">AST_REDIRECTING_TO_NUMBER_VALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09266">channel.c:9266</a></div></div>
<div class="ttc" id="channel_8h_html_a2011c630205057fb4b67eb06145e4a7f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a2011c630205057fb4b67eb06145e4a7f">DEBUGCHAN_FLAG</a></div><div class="ttdeci">#define DEBUGCHAN_FLAG</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00858">channel.h:858</a></div></div>
<div class="ttc" id="channel_8c_html_afff08c156c66142b562578cf64722575"><div class="ttname"><a href="../../d4/d28/channel_8c.html#afff08c156c66142b562578cf64722575">ast_dummy_channel_destructor</a></div><div class="ttdeci">static void ast_dummy_channel_destructor(void *obj)</div><div class="ttdoc">Free a dummy channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02338">channel.c:2338</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a05cc70ee1519ce1ffb687121f68df1a7"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a05cc70ee1519ce1ffb687121f68df1a7">AST_REDIRECTING_PRIV_FROM_NAME_VALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09300">channel.c:9300</a></div></div>
<div class="ttc" id="channel_8c_html_a8b9ce6cb64a68f2ab30fccff6999c869"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8b9ce6cb64a68f2ab30fccff6999c869">cc_channel_datastore_info</a></div><div class="ttdeci">static const struct ast_datastore_info cc_channel_datastore_info</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10646">channel.c:10646</a></div></div>
<div class="ttc" id="channel_8h_html_a9e9505a91a84992d04ba4e85217fb4e4ac8ccf95208e43ea045531ab97697b58a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4ac8ccf95208e43ea045531ab97697b58a">AST_SOFTHANGUP_SHUTDOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01132">channel.h:1132</a></div></div>
<div class="ttc" id="structast__party__id__ies_html_a1539e4414e5e28ec19b215615770be90"><div class="ttname"><a href="../../d5/d23/structast__party__id__ies.html#a1539e4414e5e28ec19b215615770be90">ast_party_id_ies::subaddress</a></div><div class="ttdeci">struct ast_party_subaddress_ies subaddress</div><div class="ttdoc">Subscriber subaddress ies. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08648">channel.c:8648</a></div></div>
<div class="ttc" id="structchanlist_html_ac63015216493201b57cc78bd32d004e2"><div class="ttname"><a href="../../dd/d6f/structchanlist.html#ac63015216493201b57cc78bd32d004e2">chanlist::tech</a></div><div class="ttdeci">const char * tech</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d12/app__dial_8c_source.html#l00802">app_dial.c:802</a></div></div>
<div class="ttc" id="structast__party__number_html_a3df9119032baa1743f2db71344bd7cac"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#a3df9119032baa1743f2db71344bd7cac">ast_party_number::presentation</a></div><div class="ttdeci">int presentation</div><div class="ttdoc">Q.931 presentation-indicator and screening-indicator encoded fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00296">channel.h:296</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a52d63717311388ffc67543a1106fe101a74b12266f6488477e272388b8cb81864"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a52d63717311388ffc67543a1106fe101a74b12266f6488477e272388b8cb81864">AST_TRANSFER_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00409">include/asterisk/frame.h:409</a></div></div>
<div class="ttc" id="channel_8h_html_a31a465197a7766c3d0bb9f65f0a4418f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a31a465197a7766c3d0bb9f65f0a4418f">ast_channel_requestor_relationship</a></div><div class="ttdeci">ast_channel_requestor_relationship</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01477">channel.h:1477</a></div></div>
<div class="ttc" id="structast__msg__data__attribute_html_a7274332d005eb44504af2efd26ed54dc"><div class="ttname"><a href="../../d7/d04/structast__msg__data__attribute.html#a7274332d005eb44504af2efd26ed54dc">ast_msg_data_attribute::type</a></div><div class="ttdeci">enum ast_msg_data_attribute_type type</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00463">message.h:463</a></div></div>
<div class="ttc" id="ccss_8h_html_a239279c104563561034f7988b78ae685"><div class="ttname"><a href="../../de/dc8/ccss_8h.html#a239279c104563561034f7988b78ae685">ast_cc_config_params_destroy</a></div><div class="ttdeci">void ast_cc_config_params_destroy(struct ast_cc_config_params *params)</div><div class="ttdoc">Free memory from CCSS configuration params. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/ccss_8c_source.html#l00693">ccss.c:693</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a6a1b17f93a20f21bf186af1b5994ab00"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a6a1b17f93a20f21bf186af1b5994ab00">AST_REDIRECTING_FROM_NAME_CHAR_SET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09259">channel.c:9259</a></div></div>
<div class="ttc" id="channel_8c_html_a8195bba43b7c08b3063bd19b28291b55"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8195bba43b7c08b3063bd19b28291b55">ast_channel_queue_redirecting_update</a></div><div class="ttdeci">void ast_channel_queue_redirecting_update(struct ast_channel *chan, const struct ast_party_redirecting *redirecting, const struct ast_set_party_redirecting *update)</div><div class="ttdoc">Queue a redirecting update frame on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10392">channel.c:10392</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078">AST_FRAME_TEXT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00114">include/asterisk/frame.h:114</a></div></div>
<div class="ttc" id="callerid_8h_html"><div class="ttname"><a href="../../de/d47/callerid_8h.html">callerid.h</a></div><div class="ttdoc">CallerID (and other GR30) management and generation Includes code and algorithms from the Zapata libr...</div></div>
<div class="ttc" id="channel_8h_html_afac6d7d115c1edfe3ad8a8c7fa5d59d1"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#afac6d7d115c1edfe3ad8a8c7fa5d59d1">ast_channel_set_writeformat</a></div><div class="ttdeci">void ast_channel_set_writeformat(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00840">channel_internal_api.c:840</a></div></div>
<div class="ttc" id="structval_html"><div class="ttname"><a href="../../d5/d85/structval.html">val</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd1/ast__expr2_8c_source.html#l00325">ast_expr2.c:325</a></div></div>
<div class="ttc" id="causes_8h_html_ab709d98c2b05c8927df81a1504e5715f"><div class="ttname"><a href="../../d4/da3/causes_8h.html#ab709d98c2b05c8927df81a1504e5715f">AST_CAUSE_INCOMING_CALL_BARRED</a></div><div class="ttdeci">#define AST_CAUSE_INCOMING_CALL_BARRED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00127">causes.h:127</a></div></div>
<div class="ttc" id="structast__party__subaddress__ies_html"><div class="ttname"><a href="../../d3/d05/structast__party__subaddress__ies.html">ast_party_subaddress_ies</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08567">channel.c:8567</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a34ac3ccebc219c59daa7eb0275fcd54d"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a34ac3ccebc219c59daa7eb0275fcd54d">AST_CONTROL_RADIO_UNKEY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00290">include/asterisk/frame.h:290</a></div></div>
<div class="ttc" id="channel_8c_html_afd4de5975fd2bcaa99390ba19d28f990"><div class="ttname"><a href="../../d4/d28/channel_8c.html#afd4de5975fd2bcaa99390ba19d28f990">STATE2STR_BUFSIZE</a></div><div class="ttdeci">#define STATE2STR_BUFSIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00098">channel.c:98</a></div></div>
<div class="ttc" id="channel_8h_html_a280e1c50d97a83e4e3053dc1fb9597eb"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a280e1c50d97a83e4e3053dc1fb9597eb">ast_channel_set_oldwriteformat</a></div><div class="ttdeci">void ast_channel_set_oldwriteformat(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00824">channel_internal_api.c:824</a></div></div>
<div class="ttc" id="structoutgoing__helper_html_aa4cddc3382d2056a04f09429ea360703"><div class="ttname"><a href="../../d9/dc0/structoutgoing__helper.html#aa4cddc3382d2056a04f09429ea360703">outgoing_helper::parent_channel</a></div><div class="ttdeci">struct ast_channel * parent_channel</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01114">channel.h:1114</a></div></div>
<div class="ttc" id="structast__channel__monitor_html_abc0b62e2d888c1814c531d5e2c456e49"><div class="ttname"><a href="../../d9/daf/structast__channel__monitor.html#abc0b62e2d888c1814c531d5e2c456e49">ast_channel_monitor::stop</a></div><div class="ttdeci">int(* stop)(struct ast_channel *chan, int need_lock)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04250">channel.h:4250</a></div></div>
<div class="ttc" id="channel_8c_html_aaaa09144f0468d0d5f98f1753a6de952"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aaaa09144f0468d0d5f98f1753a6de952">ast_softhangup</a></div><div class="ttdeci">int ast_softhangup(struct ast_channel *chan, int cause)</div><div class="ttdoc">Softly hangup a channel, lock. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02476">channel.c:2476</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792ae4c88e98038cbcde758114eb2b3bc805"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ae4c88e98038cbcde758114eb2b3bc805">AST_REDIRECTING_ORIG_NUMBER_PLAN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09270">channel.c:9270</a></div></div>
<div class="ttc" id="channel_8c_html_a957dc9b91c22dc15b2a41adb46f1d177"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a957dc9b91c22dc15b2a41adb46f1d177">ast_party_dialed_copy</a></div><div class="ttdeci">void ast_party_dialed_copy(struct ast_party_dialed *dest, const struct ast_party_dialed *src)</div><div class="ttdoc">Copy the source dialed party information to the destination dialed party. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01936">channel.c:1936</a></div></div>
<div class="ttc" id="structast__party__connected__line_html_a8791d240f8a9c2dc271a1c8542cfe8cc"><div class="ttname"><a href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">ast_party_connected_line::id</a></div><div class="ttdeci">struct ast_party_id id</div><div class="ttdoc">Connected party ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00459">channel.h:459</a></div></div>
<div class="ttc" id="channel_8c_html_a25ec12c3abdc7ad6d7971f4ad3737d94"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a25ec12c3abdc7ad6d7971f4ad3737d94">ast_channel_reason2str</a></div><div class="ttdeci">const char * ast_channel_reason2str(int reason)</div><div class="ttdoc">return an english explanation of the code returned thru __ast_request_and_dial&amp;#39;s &amp;#39;outstate&amp;#39; argument ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05913">channel.c:5913</a></div></div>
<div class="ttc" id="structast__generator_html_a77c293dc8108e06e2a81a1fdafc8fd97"><div class="ttname"><a href="../../de/d2a/structast__generator.html#a77c293dc8108e06e2a81a1fdafc8fd97">ast_generator::alloc</a></div><div class="ttdeci">void *(* alloc)(struct ast_channel *chan, void *params)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00227">channel.h:227</a></div></div>
<div class="ttc" id="db_8h_html_aa343fa3b3d06292b959ffdd4c4703b06"><div class="ttname"><a href="../../da/d4e/db_8h.html#aa343fa3b3d06292b959ffdd4c4703b06">int16_t</a></div><div class="ttdeci">short int16_t</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4e/db_8h_source.html#l00059">db.h:59</a></div></div>
<div class="ttc" id="structast__silence__generator_html"><div class="ttname"><a href="../../d9/da1/structast__silence__generator.html">ast_silence_generator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08262">channel.c:8262</a></div></div>
<div class="ttc" id="channel_8c_html_a18bb2370e871662cae50dd848da8ca2b"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a18bb2370e871662cae50dd848da8ca2b">set_format</a></div><div class="ttdeci">static int set_format(struct ast_channel *chan, struct ast_format_cap *cap_set, const int direction, int interleaved_stereo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05680">channel.c:5680</a></div></div>
<div class="ttc" id="channel_8c_html_a2679f53f358ce4d56596c511afab764b"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a2679f53f358ce4d56596c511afab764b">calc_monitor_jump</a></div><div class="ttdeci">static int calc_monitor_jump(int samples, int sample_rate, int seek_rate)</div><div class="ttdoc">calculates the number of samples to jump forward with in a monitor stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03516">channel.c:3516</a></div></div>
<div class="ttc" id="file_8h_html_afa92b0106fb7a918ea994c2867ac0a04"><div class="ttname"><a href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a></div><div class="ttdeci">#define AST_DIGIT_ANY</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00048">file.h:48</a></div></div>
<div class="ttc" id="structcauses__map_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../db/ddc/structcauses__map.html#a8f8f80d37794cde9472343e4487ba3eb">causes_map::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00132">channel.c:132</a></div></div>
<div class="ttc" id="structast__datastore__info_html_aa2b1ed933a027724ee0467c5af78bfb8"><div class="ttname"><a href="../../d9/dfb/structast__datastore__info.html#aa2b1ed933a027724ee0467c5af78bfb8">ast_datastore_info::chan_breakdown</a></div><div class="ttdeci">void(* chan_breakdown)(void *data, struct ast_channel *old_chan, struct ast_channel *new_chan)</div><div class="ttdoc">Fix up channel references on the channel being masqueraded into. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00064">datastore.h:64</a></div></div>
<div class="ttc" id="structast__bridge__features_html"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a></div><div class="ttdoc">Structure that contains features information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00263">bridge_features.h:263</a></div></div>
<div class="ttc" id="stream_8h_html_ac027a9684ada5477ddc7f64142b5338d"><div class="ttname"><a href="../../d8/d95/stream_8h.html#ac027a9684ada5477ddc7f64142b5338d">ast_stream_topology_get_formats</a></div><div class="ttdeci">struct ast_format_cap * ast_stream_topology_get_formats(struct ast_stream_topology *topology)</div><div class="ttdoc">Create a format capabilities structure representing the topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00930">stream.c:930</a></div></div>
<div class="ttc" id="cli_8h_html_a56b6b59ee2eaa994597a5b0f4e9f9d09"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a></div><div class="ttdeci">int ast_cli_unregister_multiple(struct ast_cli_entry *e, int len)</div><div class="ttdoc">Unregister multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00030">clicompat.c:30</a></div></div>
<div class="ttc" id="channel_8c_html_a2ead08f6d731f739b40787f79d2a64ef"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a2ead08f6d731f739b40787f79d2a64ef">ast_readstring</a></div><div class="ttdeci">int ast_readstring(struct ast_channel *c, char *s, int len, int timeout, int ftimeout, char *enders)</div><div class="ttdoc">Reads multiple digits. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06655">channel.c:6655</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390af699fa9e173afdd4c1fea90ee892330e"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af699fa9e173afdd4c1fea90ee892330e">AST_CONTROL_MASQUERADE_NOTIFY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00311">include/asterisk/frame.h:311</a></div></div>
<div class="ttc" id="logger_8h_html_acc9016dd0252e330dccb25552afd3b43"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#acc9016dd0252e330dccb25552afd3b43">ast_log_callid</a></div><div class="ttdeci">void ast_log_callid(int level, const char *file, int line, const char *function, ast_callid callid, const char *fmt,...)</div><div class="ttdoc">Used for sending a log message with a known call_id This is a modified logger function which is funct...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/logger_8c_source.html#l02149">logger.c:2149</a></div></div>
<div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="causes_8h_html_a554ad1e279785609a381c194f770f554"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a554ad1e279785609a381c194f770f554">AST_CAUSE_NORMAL_TEMPORARY_FAILURE</a></div><div class="ttdeci">#define AST_CAUSE_NORMAL_TEMPORARY_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00121">causes.h:121</a></div></div>
<div class="ttc" id="channel_8c_html_ab2e0a6897707b1102ad453ea0963999f"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ab2e0a6897707b1102ad453ea0963999f">ast_queue_hold</a></div><div class="ttdeci">int ast_queue_hold(struct ast_channel *chan, const char *musicclass)</div><div class="ttdoc">Queue a hold frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01191">channel.c:1191</a></div></div>
<div class="ttc" id="channel_8c_html_ac5e2e0f98fbfb9a8cd4dcb101b6bdac7"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ac5e2e0f98fbfb9a8cd4dcb101b6bdac7">suppress_framehook_destroy_cb</a></div><div class="ttdeci">static void suppress_framehook_destroy_cb(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10915">channel.c:10915</a></div></div>
<div class="ttc" id="channel_8c_html_a55feca0a002a792f1cc680e79b3d2739"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a55feca0a002a792f1cc680e79b3d2739">ast_party_subaddress_set</a></div><div class="ttdeci">void ast_party_subaddress_set(struct ast_party_subaddress *dest, const struct ast_party_subaddress *src)</div><div class="ttdoc">Set the source party subaddress information into the destination party subaddress. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01727">channel.c:1727</a></div></div>
<div class="ttc" id="structast__channel__tech_html_a00128f99123ef7844d506e8939bb1786"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#a00128f99123ef7844d506e8939bb1786">ast_channel_tech::write</a></div><div class="ttdeci">int(*const write)(struct ast_channel *chan, struct ast_frame *frame)</div><div class="ttdoc">Write a frame, in standard format (see frame.h) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00751">channel.h:751</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="audiohook_8h_html_aee985c02a01f9cbd475bf4481f5f66f9"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#aee985c02a01f9cbd475bf4481f5f66f9">ast_audiohook_move_all</a></div><div class="ttdeci">void ast_audiohook_move_all(struct ast_channel *old_chan, struct ast_channel *new_chan)</div><div class="ttdoc">Move all audiohooks from one channel to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00700">audiohook.c:700</a></div></div>
<div class="ttc" id="callerid_8h_html_a5cdbc47cd18e7f41d450e9caea186b1ba0906ea9abc50f46868edd0a1bdc66940"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a5cdbc47cd18e7f41d450e9caea186b1ba0906ea9abc50f46868edd0a1bdc66940">AST_CONNECTED_LINE_UPDATE_SOURCE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00444">callerid.h:444</a></div></div>
<div class="ttc" id="causes_8h_html_abad444ced4d61293c95114d7104d204c"><div class="ttname"><a href="../../d4/da3/causes_8h.html#abad444ced4d61293c95114d7104d204c">AST_CAUSE_NOSUCHDRIVER</a></div><div class="ttdeci">#define AST_CAUSE_NOSUCHDRIVER</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00155">causes.h:155</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="channel_8c_html_a3212119ca5acac4c9ec6051987380876a3194894c8e61c579deb4a7403f358a39"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a3194894c8e61c579deb4a7403f358a39">AST_CONNECTED_LINE_NAME_CHAR_SET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08774">channel.c:8774</a></div></div>
<div class="ttc" id="channel_8c_html_a1f333b8dc2771604a8cdb3f42c6b3643"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a1f333b8dc2771604a8cdb3f42c6b3643">send_dtmf_begin_event</a></div><div class="ttdeci">static void send_dtmf_begin_event(struct ast_channel *chan, enum DtmfDirection direction, const char digit)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03378">channel.c:3378</a></div></div>
<div class="ttc" id="channel_8h_html_adfb1957995e60f6711ae15b8b77a0ba6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#adfb1957995e60f6711ae15b8b77a0ba6">ast_channel_sending_dtmf_digit</a></div><div class="ttdeci">char ast_channel_sending_dtmf_digit(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00388">channel_internal_api.c:388</a></div></div>
<div class="ttc" id="causes_8h_html_a02b3785262e0be6843e8e9d235d8d78d"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a02b3785262e0be6843e8e9d235d8d78d">AST_CAUSE_SWITCH_CONGESTION</a></div><div class="ttdeci">#define AST_CAUSE_SWITCH_CONGESTION</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00122">causes.h:122</a></div></div>
<div class="ttc" id="channel_8c_html_acd23f45d08b4bfadd20c9d82e8060e50"><div class="ttname"><a href="../../d4/d28/channel_8c.html#acd23f45d08b4bfadd20c9d82e8060e50">ast_softhangup_nolock</a></div><div class="ttdeci">int ast_softhangup_nolock(struct ast_channel *chan, int cause)</div><div class="ttdoc">Softly hangup a channel, don&amp;#39;t lock. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02463">channel.c:2463</a></div></div>
<div class="ttc" id="channel_8h_html_a9bcf283b2c7f3a62e77ed10e02efc23a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9bcf283b2c7f3a62e77ed10e02efc23a">ast_channel_fout</a></div><div class="ttdeci">unsigned int ast_channel_fout(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00525">channel_internal_api.c:525</a></div></div>
<div class="ttc" id="structast__party__redirecting_html_adf35ee8c2640d03e5c0d311d3e76fd45"><div class="ttname"><a href="../../df/d44/structast__party__redirecting.html#adf35ee8c2640d03e5c0d311d3e76fd45">ast_party_redirecting::priv_orig</a></div><div class="ttdeci">struct ast_party_id priv_orig</div><div class="ttdoc">Who originally redirected the call (Sent to the party the call is redirected toward) - private repres...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00534">channel.h:534</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a2c9fb351572d62a917f8eb85752478bc"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a2c9fb351572d62a917f8eb85752478bc">AST_OPTION_DEVICE_NAME</a></div><div class="ttdeci">#define AST_OPTION_DEVICE_NAME</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00506">include/asterisk/frame.h:506</a></div></div>
<div class="ttc" id="audiohook_8h_html_a5da9cb8531c18cbae0c703a57acbf0f3"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a5da9cb8531c18cbae0c703a57acbf0f3">ast_audiohook_detach_list</a></div><div class="ttdeci">void ast_audiohook_detach_list(struct ast_audiohook_list *audiohook_list)</div><div class="ttdoc">Detach audiohooks from list and destroy said list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l00594">audiohook.c:594</a></div></div>
<div class="ttc" id="devicestate_8h_html"><div class="ttname"><a href="../../da/da2/devicestate_8h.html">devicestate.h</a></div><div class="ttdoc">Device state management. </div></div>
<div class="ttc" id="codec__g726_8c_html_a8c58a1d1fd9436ff5145385d3ef7a430"><div class="ttname"><a href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a></div><div class="ttdeci">static void update(int code_size, int y, int wi, int fi, int dq, int sr, int dqsez, struct g726_state *state_ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/codec__g726_8c_source.html#l00367">codec_g726.c:367</a></div></div>
<div class="ttc" id="structast__control__t38__parameters_html"><div class="ttname"><a href="../../d5/def/structast__control__t38__parameters.html">ast_control_t38_parameters</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00397">include/asterisk/frame.h:397</a></div></div>
<div class="ttc" id="translate_8h_html"><div class="ttname"><a href="../../db/d39/translate_8h.html">translate.h</a></div><div class="ttdoc">Support for translation of data formats. translate.c. </div></div>
<div class="ttc" id="channel_8c_html_a3212119ca5acac4c9ec6051987380876a7663d3f77bce64344e57586b48ac46a2"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a7663d3f77bce64344e57586b48ac46a2">AST_CONNECTED_LINE_PRIV_NUMBER_PLAN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08779">channel.c:8779</a></div></div>
<div class="ttc" id="channel_8c_html_ac9d4d03c20c48d15d9e91a85c5e35d67"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ac9d4d03c20c48d15d9e91a85c5e35d67">free_translation</a></div><div class="ttdeci">static void free_translation(struct ast_channel *clonechan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02492">channel.c:2492</a></div></div>
<div class="ttc" id="channel_8c_html_a6cd21b1843ef2c21455fd943549e8781"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a6cd21b1843ef2c21455fd943549e8781">ast_namedgroups_intersect</a></div><div class="ttdeci">int ast_namedgroups_intersect(struct ast_namedgroups *a, struct ast_namedgroups *b)</div><div class="ttdoc">Return TRUE if group a and b contain at least one common groupname. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08192">channel.c:8192</a></div></div>
<div class="ttc" id="channel_8c_html_aa0e2e9dce49bf7ff2a3a497ecd0487cd"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aa0e2e9dce49bf7ff2a3a497ecd0487cd">ast_party_dialed_set</a></div><div class="ttdeci">void ast_party_dialed_set(struct ast_party_dialed *dest, const struct ast_party_dialed *src)</div><div class="ttdoc">Set the dialed information based on another dialed source. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01958">channel.c:1958</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a2fdf117969c2c1d8e1f0044d7c3ecd3b"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a2fdf117969c2c1d8e1f0044d7c3ecd3b">ast_app_run_macro</a></div><div class="ttdeci">int ast_app_run_macro(struct ast_channel *autoservice_chan, struct ast_channel *macro_chan, const char *macro_name, const char *macro_args)</div><div class="ttdoc">Run a macro on a channel, placing an optional second channel into autoservice. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00320">main/app.c:320</a></div></div>
<div class="ttc" id="channel_8c_html_abb288b8b026537180b25447a967064d1"><div class="ttname"><a href="../../d4/d28/channel_8c.html#abb288b8b026537180b25447a967064d1">ast_party_number_set_init</a></div><div class="ttdeci">void ast_party_number_set_init(struct ast_party_number *init, const struct ast_party_number *guide)</div><div class="ttdoc">Initialize the given party number structure using the given guide for a set update operation...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01666">channel.c:1666</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a8339363342c936dff645699b6018ee61"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a8339363342c936dff645699b6018ee61">AST_REDIRECTING_FROM_SUBADDRESS_TYPE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09244">channel.c:9244</a></div></div>
<div class="ttc" id="channel_8c_html_a39aac47fef1240391fd97e055522fd83"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a39aac47fef1240391fd97e055522fd83">ast_party_id_presentation</a></div><div class="ttdeci">int ast_party_id_presentation(const struct ast_party_id *id)</div><div class="ttdoc">Determine the overall presentation value for the given party. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01821">channel.c:1821</a></div></div>
<div class="ttc" id="chanvars_8h_html_a8e0081172db71c5021d20706c50d959c"><div class="ttname"><a href="../../d9/de7/chanvars_8h.html#a8e0081172db71c5021d20706c50d959c">ast_var_value</a></div><div class="ttdeci">const char * ast_var_value(const struct ast_var_t *var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df9/chanvars_8c_source.html#l00080">chanvars.c:80</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433">AST_STATE_RING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00040">channelstate.h:40</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="structast__party__id_html_aab4036618469f3fa9ab26a22726ba2db"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">ast_party_id::name</a></div><div class="ttdeci">struct ast_party_name name</div><div class="ttdoc">Subscriber name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00341">channel.h:341</a></div></div>
<div class="ttc" id="astobj2_8h_html_a22f40c733a085f259af94e864ebaa09a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a></div><div class="ttdeci">#define OBJ_KEY</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01155">astobj2.h:1155</a></div></div>
<div class="ttc" id="structast__party__redirecting_html_acf09e8312b8b4396ec42c5147cdf9b5b"><div class="ttname"><a href="../../df/d44/structast__party__redirecting.html#acf09e8312b8b4396ec42c5147cdf9b5b">ast_party_redirecting::from</a></div><div class="ttdeci">struct ast_party_id from</div><div class="ttdoc">Who is redirecting the call (Sent to the party the call is redirected toward) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00528">channel.h:528</a></div></div>
<div class="ttc" id="channel_8c_html_a3212119ca5acac4c9ec6051987380876abf320d7c90ab6439b6e4e6c214a9c30c"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876abf320d7c90ab6439b6e4e6c214a9c30c">AST_CONNECTED_LINE_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08767">channel.c:8767</a></div></div>
<div class="ttc" id="structtonepair__def_html_ae484cbecf50a6913f24356fc00e34d8e"><div class="ttname"><a href="../../dd/d61/structtonepair__def.html#ae484cbecf50a6913f24356fc00e34d8e">tonepair_def::freq2</a></div><div class="ttdeci">int freq2</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07564">channel.c:7564</a></div></div>
<div class="ttc" id="channel_8c_html_a6f075826bf02742269bf7484e4ef481d"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a6f075826bf02742269bf7484e4ef481d">__ast_request_and_dial</a></div><div class="ttdeci">struct ast_channel * __ast_request_and_dial(const char *type, struct ast_format_cap *cap, const struct ast_assigned_ids *assignedids, const struct ast_channel *requestor, const char *addr, int timeout, int *outstate, const char *cid_num, const char *cid_name, struct outgoing_helper *oh)</div><div class="ttdoc">Request a channel of a given type, with data as optional information used by the low level module and...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06066">channel.c:6066</a></div></div>
<div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="structast__party__number__ies_html"><div class="ttname"><a href="../../d1/dbe/structast__party__number__ies.html">ast_party_number_ies</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08493">channel.c:8493</a></div></div>
<div class="ttc" id="causes_8h_html_a131d8780af378d0c4ef5075949902785"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a131d8780af378d0c4ef5075949902785">AST_CAUSE_UNALLOCATED</a></div><div class="ttdeci">#define AST_CAUSE_UNALLOCATED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00097">causes.h:97</a></div></div>
<div class="ttc" id="channel_8h_html_ae6b4b7ba458e88fdbb2df9f39d935337"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae6b4b7ba458e88fdbb2df9f39d935337">ast_channel_hangupcause_set</a></div><div class="ttdeci">void ast_channel_hangupcause_set(struct ast_channel *chan, int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00431">channel_internal_api.c:431</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a5cbaa6e72ca2e17b3339e7031d113dc1"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a5cbaa6e72ca2e17b3339e7031d113dc1">agent_type</a></div><div class="ttdeci">static struct aco_type agent_type</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00465">app_agent_pool.c:465</a></div></div>
<div class="ttc" id="structplc__ds_html_ae15ed5326596f5f0aab67e52b23640a0"><div class="ttname"><a href="../../d0/d8a/structplc__ds.html#ae15ed5326596f5f0aab67e52b23640a0">plc_ds::plc_state</a></div><div class="ttdeci">plc_state_t plc_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05083">channel.c:5083</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a586c5b85860b6b141d950b7927b85d0a"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a586c5b85860b6b141d950b7927b85d0a">AST_REDIRECTING_FROM_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09251">channel.c:9251</a></div></div>
<div class="ttc" id="structast__party__name__ies_html_a3df9119032baa1743f2db71344bd7cac"><div class="ttname"><a href="../../df/d8e/structast__party__name__ies.html#a3df9119032baa1743f2db71344bd7cac">ast_party_name_ies::presentation</a></div><div class="ttdeci">int presentation</div><div class="ttdoc">presentation-indicator ie </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08425">channel.c:8425</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01048">astobj2.h:1048</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a7baecd23e0e111ddbc23ce2c4f3d92da"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a7baecd23e0e111ddbc23ce2c4f3d92da">AST_REDIRECTING_PRIV_TO_NAME_CHAR_SET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09288">channel.c:9288</a></div></div>
<div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="channel_8c_html_a2a2e0ff24c57491a877cac39cb670024"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a2a2e0ff24c57491a877cac39cb670024">ast_channel_start_silence_generator</a></div><div class="ttdeci">struct ast_silence_generator * ast_channel_start_silence_generator(struct ast_channel *chan)</div><div class="ttdoc">Starts a silence generator on the given channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08266">channel.c:8266</a></div></div>
<div class="ttc" id="pbx_8h_html_a9c74b2f5ba8be6e351d35c1b97803e1e"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a9c74b2f5ba8be6e351d35c1b97803e1e">ast_func_read2</a></div><div class="ttdeci">int ast_func_read2(struct ast_channel *chan, const char *function, struct ast_str **str, ssize_t maxlen)</div><div class="ttdoc">executes a read operation on a function </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d70/pbx__functions_8c_source.html#l00642">pbx_functions.c:642</a></div></div>
<div class="ttc" id="channel_8c_html_a4a1bcc0fd8b14e9bbff17b963969bcab"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a4a1bcc0fd8b14e9bbff17b963969bcab">AST_DEFAULT_EMULATE_DTMF_DURATION</a></div><div class="ttdeci">#define AST_DEFAULT_EMULATE_DTMF_DURATION</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00102">channel.c:102</a></div></div>
<div class="ttc" id="channel_8c_html_af10e3bd01602095e1908d3926afc3b76"><div class="ttname"><a href="../../d4/d28/channel_8c.html#af10e3bd01602095e1908d3926afc3b76">ast_safe_sleep</a></div><div class="ttdeci">int ast_safe_sleep(struct ast_channel *chan, int ms)</div><div class="ttdoc">Wait, look for hangups. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01574">channel.c:1574</a></div></div>
<div class="ttc" id="chanvars_8h_html"><div class="ttname"><a href="../../d9/de7/chanvars_8h.html">chanvars.h</a></div><div class="ttdoc">Channel Variables. </div></div>
<div class="ttc" id="structast__channel__tech_html_a2560a7b7c510a4438bb215de6613cab3"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#a2560a7b7c510a4438bb215de6613cab3">ast_channel_tech::send_digit_end</a></div><div class="ttdeci">int(*const send_digit_end)(struct ast_channel *chan, char digit, unsigned int duration)</div><div class="ttdoc">Stop sending a literal DTMF digit. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00691">channel.h:691</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="channel_8c_html_a9b09f889da3c4aa25ce350e3239e29d2"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a9b09f889da3c4aa25ce350e3239e29d2">ast_channels_init</a></div><div class="ttdeci">int ast_channels_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08109">channel.c:8109</a></div></div>
<div class="ttc" id="timing_8h_html_aa21078cc57057eeda614cb7780bdc60aa6338cdd939adbc65d20e3412bf11fc3c"><div class="ttname"><a href="../../db/d41/timing_8h.html#aa21078cc57057eeda614cb7780bdc60aa6338cdd939adbc65d20e3412bf11fc3c">AST_TIMING_EVENT_EXPIRED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d41/timing_8h_source.html#l00058">timing.h:58</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2448088751e4d494d1981c7f4b84e8d0"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2448088751e4d494d1981c7f4b84e8d0">OBJ_POINTER</a></div><div class="ttdeci">#define OBJ_POINTER</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01154">astobj2.h:1154</a></div></div>
<div class="ttc" id="causes_8h_html_ae221e0d7fcd8907bd90e203e60553317"><div class="ttname"><a href="../../d4/da3/causes_8h.html#ae221e0d7fcd8907bd90e203e60553317">AST_CAUSE_INVALID_MSG_UNSPECIFIED</a></div><div class="ttdeci">#define AST_CAUSE_INVALID_MSG_UNSPECIFIED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00135">causes.h:135</a></div></div>
<div class="ttc" id="structchanlist_html_aa6880648b159c5b2441129417c94048d"><div class="ttname"><a href="../../dd/d6f/structchanlist.html#aa6880648b159c5b2441129417c94048d">chanlist::list</a></div><div class="ttdeci">struct chanlist::@369 list</div></div>
<div class="ttc" id="channel_8c_html_a6644e72f9f643891538eca452ed2993a"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a6644e72f9f643891538eca452ed2993a">ast_settimeout_full</a></div><div class="ttdeci">int ast_settimeout_full(struct ast_channel *c, unsigned int rate, int(*func)(const void *data), void *data, unsigned int is_ao2_obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03194">channel.c:3194</a></div></div>
<div class="ttc" id="channel_8c_html_a30be1777fb18ec4f193e957e3b21d941"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a30be1777fb18ec4f193e957e3b21d941">ast_channel_by_exten_cb</a></div><div class="ttdeci">static int ast_channel_by_exten_cb(void *obj, void *arg, void *data, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01306">channel.c:1306</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a47d957ec421660fd81a6f52940bc9945"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a47d957ec421660fd81a6f52940bc9945">AST_REDIRECTING_PRIV_TO_SUBADDRESS_ODD_EVEN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09292">channel.c:9292</a></div></div>
<div class="ttc" id="causes_8h_html_a9e3ffd481d41079a4ed1700464c9a42a"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a9e3ffd481d41079a4ed1700464c9a42a">AST_CAUSE_NETWORK_OUT_OF_ORDER</a></div><div class="ttdeci">#define AST_CAUSE_NETWORK_OUT_OF_ORDER</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00120">causes.h:120</a></div></div>
<div class="ttc" id="chanvars_8h_html_a356a31cd608ec07d3668dcd589be49d8"><div class="ttname"><a href="../../d9/de7/chanvars_8h.html#a356a31cd608ec07d3668dcd589be49d8">ast_var_name</a></div><div class="ttdeci">const char * ast_var_name(const struct ast_var_t *var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df9/chanvars_8c_source.html#l00060">chanvars.c:60</a></div></div>
<div class="ttc" id="channel_8h_html_aa2df58e77751b741b6891afe210b5b8c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa2df58e77751b741b6891afe210b5b8c">ast_channel_set_rawwriteformat</a></div><div class="ttdeci">void ast_channel_set_rawwriteformat(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00832">channel_internal_api.c:832</a></div></div>
<div class="ttc" id="audiohook_8h_html_a46613f6e1524089bf8c4b2a7880f716d"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a46613f6e1524089bf8c4b2a7880f716d">ast_audiohook_write_list_empty</a></div><div class="ttdeci">int ast_audiohook_write_list_empty(struct ast_audiohook_list *audiohook_list)</div><div class="ttdoc">Determine if a audiohook_list is empty or not. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l01112">audiohook.c:1112</a></div></div>
<div class="ttc" id="stream_8h_html_a86319542b92fb0dc6b2ed337d83cf8ce"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a86319542b92fb0dc6b2ed337d83cf8ce">ast_stream_get_type</a></div><div class="ttdeci">enum ast_media_type ast_stream_get_type(const struct ast_stream *stream)</div><div class="ttdoc">Get the media type of a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00316">stream.c:316</a></div></div>
<div class="ttc" id="channel_8c_html_a93d3e245d714d1ab18c5fb2ecb5cbf0e"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a93d3e245d714d1ab18c5fb2ecb5cbf0e">ast_connected_line_parse_data</a></div><div class="ttdeci">int ast_connected_line_parse_data(const unsigned char *data, size_t datalen, struct ast_party_connected_line *connected)</div><div class="ttdoc">Parse connected line indication frame data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08881">channel.c:8881</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a188aabe2f4692c9d4426d6bec1b8202f"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a188aabe2f4692c9d4426d6bec1b8202f">AST_REDIRECTING_ORIG_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09280">channel.c:9280</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="channel_8h_html_aff1f86598b895f0346b701570e266ba2"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aff1f86598b895f0346b701570e266ba2">ast_channel_framehooks</a></div><div class="ttdeci">struct ast_framehook_list * ast_channel_framehooks(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00705">channel_internal_api.c:705</a></div></div>
<div class="ttc" id="channel_8c_html_a3212119ca5acac4c9ec6051987380876a976c12acdeab4bbcaa5dd70e9856b256"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a976c12acdeab4bbcaa5dd70e9856b256">AST_CONNECTED_LINE_PRIV_NAME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08782">channel.c:8782</a></div></div>
<div class="ttc" id="structast__party__id__ies_html_aa93f6a3848b7e7fef23a3429211460fe"><div class="ttname"><a href="../../d5/d23/structast__party__id__ies.html#aa93f6a3848b7e7fef23a3429211460fe">ast_party_id_ies::number</a></div><div class="ttdeci">struct ast_party_number_ies number</div><div class="ttdoc">Subscriber phone number ies. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08646">channel.c:8646</a></div></div>
<div class="ttc" id="framehook_8h_html_abb1dd86caa0f1e14ffca8579a7b18d07"><div class="ttname"><a href="../../db/d3c/framehook_8h.html#abb1dd86caa0f1e14ffca8579a7b18d07">ast_framehook_list_is_empty</a></div><div class="ttdeci">int ast_framehook_list_is_empty(struct ast_framehook_list *framehooks)</div><div class="ttdoc">Determine if an framehook list is empty or not. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dac/framehook_8c_source.html#l00274">framehook.c:274</a></div></div>
<div class="ttc" id="channel_8h_html_a1d97a054133db260e25368ca9f4432f6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1d97a054133db260e25368ca9f4432f6">ast_channel_dialed_set</a></div><div class="ttdeci">void ast_channel_dialed_set(struct ast_channel *chan, struct ast_party_dialed *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00954">channel_internal_api.c:954</a></div></div>
<div class="ttc" id="structast__cli__entry_html"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a></div><div class="ttdoc">descriptor for a cli entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00171">cli.h:171</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="channel_8h_html_a711f973f0ab1756bb2d1af2bd06f67a7"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a711f973f0ab1756bb2d1af2bd06f67a7">ast_channel_insmpl</a></div><div class="ttdeci">unsigned long ast_channel_insmpl(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00533">channel_internal_api.c:533</a></div></div>
<div class="ttc" id="timing_8h_html_aa21078cc57057eeda614cb7780bdc60a"><div class="ttname"><a href="../../db/d41/timing_8h.html#aa21078cc57057eeda614cb7780bdc60a">ast_timer_event</a></div><div class="ttdeci">ast_timer_event</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d41/timing_8h_source.html#l00057">timing.h:57</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a700f5f786d7e5a985387e5ce40c47a6a"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a700f5f786d7e5a985387e5ce40c47a6a">AST_MALLOCD_DATA</a></div><div class="ttdeci">#define AST_MALLOCD_DATA</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00235">include/asterisk/frame.h:235</a></div></div>
<div class="ttc" id="audiohook_8h_html"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html">audiohook.h</a></div><div class="ttdoc">Audiohooks Architecture. </div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="format__cap_8h_html_a035f4aa78f172a18311bfa15dd232c6f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a></div><div class="ttdeci">#define AST_FORMAT_CAP_NAMES_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00326">format_cap.h:326</a></div></div>
<div class="ttc" id="channel_8c_html_a57c9b9b79de9d0c22e404169fc836e9f"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a57c9b9b79de9d0c22e404169fc836e9f">ast_channel_stream_topology_changed</a></div><div class="ttdeci">int ast_channel_stream_topology_changed(struct ast_channel *chan, struct ast_stream_topology *topology)</div><div class="ttdoc">Provide notice to a channel that the stream topology has changed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l11197">channel.c:11197</a></div></div>
<div class="ttc" id="json_8h_html_ae2cc29409ec389e8feaf38ec3a585d83"><div class="ttname"><a href="../../d4/d05/json_8h.html#ae2cc29409ec389e8feaf38ec3a585d83">ast_json_int_t</a></div><div class="ttdeci">AST_JSON_INT_T ast_json_int_t</div><div class="ttdoc">Primarily used to cast when packing to an &quot;I&quot; type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d05/json_8h_source.html#l00087">json.h:87</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792ae132d231e169ff864606c416bf2b5b25"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ae132d231e169ff864606c416bf2b5b25">AST_REDIRECTING_TO_NUMBER_PRESENTATION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09267">channel.c:9267</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa28206b97fb0795e1fa681248fd0d97f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa28206b97fb0795e1fa681248fd0d97f">AST_FRAME_BRIDGE_ACTION_SYNC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00133">include/asterisk/frame.h:133</a></div></div>
<div class="ttc" id="framehook_8h_html_a54250544f50efde9156d2341e8da0614"><div class="ttname"><a href="../../db/d3c/framehook_8h.html#a54250544f50efde9156d2341e8da0614">ast_framehook_event</a></div><div class="ttdeci">ast_framehook_event</div><div class="ttdoc">These are the types of events that the framehook&amp;#39;s event callback can receive. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d3c/framehook_8h_source.html#l00151">framehook.h:151</a></div></div>
<div class="ttc" id="pbx_8h_html_aabba812de5650c13f20fee47dffbed8b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#aabba812de5650c13f20fee47dffbed8b">ast_pbx_hangup_handler_init</a></div><div class="ttdeci">void ast_pbx_hangup_handler_init(struct ast_channel *chan)</div><div class="ttdoc">Init the hangup handler container on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d53/pbx__hangup__handler_8c_source.html#l00095">pbx_hangup_handler.c:95</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a156f09c32102fa036620ad75c3ee4fbf"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a156f09c32102fa036620ad75c3ee4fbf">d</a></div><div class="ttdeci">static struct test_val d</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00049">test_linkedlists.c:49</a></div></div>
<div class="ttc" id="astobj2_8h_html_a47857055118a703ae87ea5ebaf4842ed"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a></div><div class="ttdeci">#define ao2_callback(c, flags, cb_fn, arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01716">astobj2.h:1716</a></div></div>
<div class="ttc" id="channel_8c_html_a52fead32f69533450f3c05b2e6960149"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a52fead32f69533450f3c05b2e6960149">ast_moh_stop</a></div><div class="ttdeci">void ast_moh_stop(struct ast_channel *chan)</div><div class="ttdoc">Turn off music on hold on a given channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07876">channel.c:7876</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a3128b52009fb3dd764dce90ea377fce1"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a3128b52009fb3dd764dce90ea377fce1">ast_bridge_features_init</a></div><div class="ttdeci">int ast_bridge_features_init(struct ast_bridge_features *features)</div><div class="ttdoc">Initialize bridge features structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03687">bridge.c:3687</a></div></div>
<div class="ttc" id="channel_8c_html_a7cf9dcf6ae6fcedb7752d0deac683b3b"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a7cf9dcf6ae6fcedb7752d0deac683b3b">ast_say_digits</a></div><div class="ttdeci">int ast_say_digits(struct ast_channel *chan, int num, const char *ints, const char *lang)</div><div class="ttdoc">says digits </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08349">channel.c:8349</a></div></div>
<div class="ttc" id="channel_8h_html_a0a4982173c52a4b65b581ce52070a414"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a0a4982173c52a4b65b581ce52070a414">ast_channel_answertime</a></div><div class="ttdeci">struct timeval ast_channel_answertime(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00986">channel_internal_api.c:986</a></div></div>
<div class="ttc" id="channel__internal_8h_html_a00ad4a65cfee8217c28d8359538e0c40"><div class="ttname"><a href="../../d5/de4/channel__internal_8h.html#a00ad4a65cfee8217c28d8359538e0c40">ast_channel_internal_set_stream_topology_change_source</a></div><div class="ttdeci">void ast_channel_internal_set_stream_topology_change_source(struct ast_channel *chan, void *change_source)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00666">channel_internal_api.c:666</a></div></div>
<div class="ttc" id="structast__party__number__ies_html_ad1f8db563cb99d404b72e02cf8f78cd1"><div class="ttname"><a href="../../d1/dbe/structast__party__number__ies.html#ad1f8db563cb99d404b72e02cf8f78cd1">ast_party_number_ies::plan</a></div><div class="ttdeci">int plan</div><div class="ttdoc">Type-Of-Number and Numbering-Plan ie. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08497">channel.c:8497</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a19de60b6d2aae3f71433113ee02dbdf7"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a19de60b6d2aae3f71433113ee02dbdf7">AST_REDIRECTING_REASON_CODE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09241">channel.c:9241</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe">AST_CONTROL_ANSWER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00281">include/asterisk/frame.h:281</a></div></div>
<div class="ttc" id="channel_8c_html_a3212119ca5acac4c9ec6051987380876ac32bb54a3d7c59eb047ec4a278eef693"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876ac32bb54a3d7c59eb047ec4a278eef693">AST_CONNECTED_LINE_PRIV_NUMBER_VALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08780">channel.c:8780</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a00675bfb8c64b2be86297fe4cba51fa2"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a00675bfb8c64b2be86297fe4cba51fa2">AST_CONTROL_RING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00279">include/asterisk/frame.h:279</a></div></div>
<div class="ttc" id="channel_8c_html_a6f5a723ce82b8f608b25a36b4df38e46"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a6f5a723ce82b8f608b25a36b4df38e46">tonepair_alloc</a></div><div class="ttdeci">static void * tonepair_alloc(struct ast_channel *chan, void *params)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07598">channel.c:7598</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="structast__party__redirecting_html_ac1e6e2d7f1a76e125a3c2361607afc18"><div class="ttname"><a href="../../df/d44/structast__party__redirecting.html#ac1e6e2d7f1a76e125a3c2361607afc18">ast_party_redirecting::priv_from</a></div><div class="ttdeci">struct ast_party_id priv_from</div><div class="ttdoc">Who is redirecting the call (Sent to the party the call is redirected toward) - private representatio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00537">channel.h:537</a></div></div>
<div class="ttc" id="channel_8c_html_a21882e640e01106e62bdab88849a17c5"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a21882e640e01106e62bdab88849a17c5">AST_MIN_DTMF_GAP</a></div><div class="ttdeci">#define AST_MIN_DTMF_GAP</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00112">channel.c:112</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="channel_8c_html_aada21a9f55151c285a1537613ff9197a"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aada21a9f55151c285a1537613ff9197a">ast_queue_unhold</a></div><div class="ttdeci">int ast_queue_unhold(struct ast_channel *chan)</div><div class="ttdoc">Queue an unhold frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01216">channel.c:1216</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660addb60fd97b55a4aea24f992e30fe3c84">AST_STATE_RESERVED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00037">channelstate.h:37</a></div></div>
<div class="ttc" id="channel_8h_html_ad375082fcf73a6a755d611a64cac2659"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ad375082fcf73a6a755d611a64cac2659">ast_add_fd</a></div><div class="ttdeci">static int ast_add_fd(struct pollfd *pfd, int fd)</div><div class="ttdoc">if fd is a valid descriptor, set *pfd with the descriptor </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02842">channel.h:2842</a></div></div>
<div class="ttc" id="causes_8h_html_aa49742b6e084d7a25a0994beba1fa9ea"><div class="ttname"><a href="../../d4/da3/causes_8h.html#aa49742b6e084d7a25a0994beba1fa9ea">AST_CAUSE_FACILITY_REJECTED</a></div><div class="ttdeci">#define AST_CAUSE_FACILITY_REJECTED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00116">causes.h:116</a></div></div>
<div class="ttc" id="causes_8h_html_abcbed92e41a50dd87902bc7bf97c704b"><div class="ttname"><a href="../../d4/da3/causes_8h.html#abcbed92e41a50dd87902bc7bf97c704b">AST_CAUSE_ACCESS_INFO_DISCARDED</a></div><div class="ttdeci">#define AST_CAUSE_ACCESS_INFO_DISCARDED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00123">causes.h:123</a></div></div>
<div class="ttc" id="channel_8c_html_abb507e6b148bf773fb546ac5c931f264"><div class="ttname"><a href="../../d4/d28/channel_8c.html#abb507e6b148bf773fb546ac5c931f264">ast_recvtext</a></div><div class="ttdeci">char * ast_recvtext(struct ast_channel *chan, int timeout)</div><div class="ttdoc">Receives a text string from a channel Read a string of text from a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04762">channel.c:4762</a></div></div>
<div class="ttc" id="channel_8c_html_aadab345df706e0ae1c1efec1f4809de3"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aadab345df706e0ae1c1efec1f4809de3">destroy_hooks</a></div><div class="ttdeci">static void destroy_hooks(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02537">channel.c:2537</a></div></div>
<div class="ttc" id="channel_8c_html_a3212119ca5acac4c9ec6051987380876acc43c58cebca3c782099a590cf07ddab"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876acc43c58cebca3c782099a590cf07ddab">AST_CONNECTED_LINE_PRIV_NAME_CHAR_SET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08784">channel.c:8784</a></div></div>
<div class="ttc" id="causes_8h_html_abe4368acff74514c171c3bd705340529"><div class="ttname"><a href="../../d4/da3/causes_8h.html#abe4368acff74514c171c3bd705340529">AST_CAUSE_RECOVERY_ON_TIMER_EXPIRE</a></div><div class="ttdeci">#define AST_CAUSE_RECOVERY_ON_TIMER_EXPIRE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00142">causes.h:142</a></div></div>
<div class="ttc" id="channel_8c_html_afef5134a6fb69fdd9492981dcf52b31a"><div class="ttname"><a href="../../d4/d28/channel_8c.html#afef5134a6fb69fdd9492981dcf52b31a">ast_tonepair_stop</a></div><div class="ttdeci">void ast_tonepair_stop(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07695">channel.c:7695</a></div></div>
<div class="ttc" id="channel_8c_html_a40263dbf8fc7b0a72bb50541b306d6d6"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a40263dbf8fc7b0a72bb50541b306d6d6">ast_channel_has_hook_requiring_audio</a></div><div class="ttdeci">int ast_channel_has_hook_requiring_audio(struct ast_channel *chan)</div><div class="ttdoc">Check if the channel has any active hooks that require audio. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02530">channel.c:2530</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="channel_8c_html_af3ca35d45450375fc04a2e5af45def4b"><div class="ttname"><a href="../../d4/d28/channel_8c.html#af3ca35d45450375fc04a2e5af45def4b">ast_moh_start_ptr</a></div><div class="ttdeci">static int(* ast_moh_start_ptr)(struct ast_channel *, const char *, const char *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07846">channel.c:7846</a></div></div>
<div class="ttc" id="channel_8h_html_a673d53e20b8ac75477469442f51314e1"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a673d53e20b8ac75477469442f51314e1">ast_channel_zone</a></div><div class="ttdeci">struct ast_tone_zone * ast_channel_zone(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00745">channel_internal_api.c:745</a></div></div>
<div class="ttc" id="structast__generator_html"><div class="ttname"><a href="../../de/d2a/structast__generator.html">ast_generator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00226">channel.h:226</a></div></div>
<div class="ttc" id="channel_8c_html_a9a1bf5906ede80cab6b57627fea47272"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a9a1bf5906ede80cab6b57627fea47272">ast_uninstall_music_functions</a></div><div class="ttdeci">void ast_uninstall_music_functions(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07859">channel.c:7859</a></div></div>
<div class="ttc" id="structoutgoing__helper_html"><div class="ttname"><a href="../../d9/dc0/structoutgoing__helper.html">outgoing_helper</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01105">channel.h:1105</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a52d63717311388ffc67543a1106fe101"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a52d63717311388ffc67543a1106fe101">ast_control_transfer</a></div><div class="ttdeci">ast_control_transfer</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00408">include/asterisk/frame.h:408</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="channel_8c_html_a3212119ca5acac4c9ec6051987380876acdafbb2b3516258a19998f47a3df5f1b"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876acdafbb2b3516258a19998f47a3df5f1b">AST_CONNECTED_LINE_NAME_PRESENTATION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08775">channel.c:8775</a></div></div>
<div class="ttc" id="channel_8h_html_a2bd2be6e172c846d7162a753be148eb9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a2bd2be6e172c846d7162a753be148eb9">ast_channel_generator_set</a></div><div class="ttdeci">void ast_channel_generator_set(struct ast_channel *chan, struct ast_generator *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00717">channel_internal_api.c:717</a></div></div>
<div class="ttc" id="structtonepair__def_html_a0865f919827121ede94c816e460e4857"><div class="ttname"><a href="../../dd/d61/structtonepair__def.html#a0865f919827121ede94c816e460e4857">tonepair_def::vol</a></div><div class="ttdeci">int vol</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07566">channel.c:7566</a></div></div>
<div class="ttc" id="channel_8h_html_a9b57685a45dd0700625ea8ba83a868dface918b901d180f5ea85f8a941fc8cbdb"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9b57685a45dd0700625ea8ba83a868dface918b901d180f5ea85f8a941fc8cbdb">AST_MONITOR_RUNNING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04234">channel.h:4234</a></div></div>
<div class="ttc" id="structset__format__access_html_add68d9488e9ecb2a49cc308c26658b32"><div class="ttname"><a href="../../d0/d0f/structset__format__access.html#add68d9488e9ecb2a49cc308c26658b32">set_format_access::set_format</a></div><div class="ttdeci">void(* set_format)(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05652">channel.c:5652</a></div></div>
<div class="ttc" id="structast__channel__tech_html_acc23c0bbf303a26450afb09ab0939577"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#acc23c0bbf303a26450afb09ab0939577">ast_channel_tech::read_stream</a></div><div class="ttdeci">struct ast_frame *(*const read_stream)(struct ast_channel *chan)</div><div class="ttdoc">Read a frame (or chain of frames from the same stream), in standard format (see frame.h), with stream num. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00748">channel.h:748</a></div></div>
<div class="ttc" id="structnamedgroup__member_html"><div class="ttname"><a href="../../db/d9c/structnamedgroup__member.html">namedgroup_member</a></div><div class="ttdoc">Named group member structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07751">channel.c:7751</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a3ec117aa2243c795905553454c5d114b"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a3ec117aa2243c795905553454c5d114b">AST_REDIRECTING_ORIG_SUBADDRESS_ODD_EVEN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09278">channel.c:9278</a></div></div>
<div class="ttc" id="channel_8h_html_a9e9505a91a84992d04ba4e85217fb4e4a2b3b711afc65059c4b51008c9fbc7aee"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2b3b711afc65059c4b51008c9fbc7aee">AST_SOFTHANGUP_EXPLICIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01149">channel.h:1149</a></div></div>
<div class="ttc" id="causes_8h_html_af4a2ab0a1d6178835389d50b2b2e3f80"><div class="ttname"><a href="../../d4/da3/causes_8h.html#af4a2ab0a1d6178835389d50b2b2e3f80">AST_CAUSE_MISDIALLED_TRUNK_PREFIX</a></div><div class="ttdeci">#define AST_CAUSE_MISDIALLED_TRUNK_PREFIX</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00100">causes.h:100</a></div></div>
<div class="ttc" id="framehook_8h_html_a6e116259cae8c1e5cca074d05f0a3475"><div class="ttname"><a href="../../db/d3c/framehook_8h.html#a6e116259cae8c1e5cca074d05f0a3475">ast_framehook_detach</a></div><div class="ttdeci">int ast_framehook_detach(struct ast_channel *chan, int framehook_id)</div><div class="ttdoc">Detach an framehook from a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dac/framehook_8c_source.html#l00177">framehook.c:177</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0af36653b08c00f5d824ed6046e9233ef9"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af36653b08c00f5d824ed6046e9233ef9">AST_FRAME_BRIDGE_ACTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00127">include/asterisk/frame.h:127</a></div></div>
<div class="ttc" id="structtonepair__state_html_ac6e4b2a3cf932b33832d4e4e4e7cd0de"><div class="ttname"><a href="../../d6/d63/structtonepair__state.html#ac6e4b2a3cf932b33832d4e4e4e7cd0de">tonepair_state::duration</a></div><div class="ttdeci">int duration</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07580">channel.c:7580</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a168d496bdac09ece3ce49cf473bbdb4bafdb1ca68d683c64301c4cf07463a9975"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4bafdb1ca68d683c64301c4cf07463a9975">AST_T38_REQUEST_NEGOTIATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00371">include/asterisk/frame.h:371</a></div></div>
<div class="ttc" id="global__datastores_8h_html"><div class="ttname"><a href="../../d2/dc3/global__datastores_8h.html">global_datastores.h</a></div><div class="ttdoc">globally accessible channel datastores </div></div>
<div class="ttc" id="time_8h_html_a4e7b3508884147c7991a68361ac781a2"><div class="ttname"><a href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a></div><div class="ttdeci">int ast_tvzero(const struct timeval t)</div><div class="ttdoc">Returns true if the argument is 0,0. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00108">time.h:108</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5af342fb5a757280799be80248e898d14a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5af342fb5a757280799be80248e898d14a">AST_FLAG_MOH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00992">channel.h:992</a></div></div>
<div class="ttc" id="structchanlist_html_a899a76dc5f03f0d4ea3793c339e07ee9"><div class="ttname"><a href="../../dd/d6f/structchanlist.html#a899a76dc5f03f0d4ea3793c339e07ee9">chanlist::flags</a></div><div class="ttdeci">uint64_t flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d12/app__dial_8c_source.html#l00807">app_dial.c:807</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">include/asterisk/frame.h:101</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792abec9b47588bcb77c6ce5878e2bba53b3"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792abec9b47588bcb77c6ce5878e2bba53b3">AST_REDIRECTING_PRIV_ORIG_NUMBER_PRESENTATION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09311">channel.c:9311</a></div></div>
<div class="ttc" id="structast__set__party__redirecting_html_a54ed2019cbce2f838acaba40717b787b"><div class="ttname"><a href="../../de/df8/structast__set__party__redirecting.html#a54ed2019cbce2f838acaba40717b787b">ast_set_party_redirecting::priv_orig</a></div><div class="ttdeci">struct ast_set_party_id priv_orig</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00564">channel.h:564</a></div></div>
<div class="ttc" id="channel_8h_html_afafaea2cd08a0d993f5d667f4cfefd9e"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#afafaea2cd08a0d993f5d667f4cfefd9e">ast_channel_vstream_set</a></div><div class="ttdeci">void ast_channel_vstream_set(struct ast_channel *chan, struct ast_filestream *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00633">channel_internal_api.c:633</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ae234825bcb65b88c0554b995ff1b8ba6"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a></div><div class="ttdeci">#define AST_LIST_NEXT(elm, field)</div><div class="ttdoc">Returns the next entry in the list after the given entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00438">linkedlists.h:438</a></div></div>
<div class="ttc" id="test_8h_html"><div class="ttname"><a href="../../d2/ddc/test_8h.html">test.h</a></div><div class="ttdoc">Test Framework API. </div></div>
<div class="ttc" id="group__ast__msg__data_html_gga8e03c05d9a579130cae1af412fb6c580a711186ed6f4afa0cccc12908e40c511d"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gga8e03c05d9a579130cae1af412fb6c580a711186ed6f4afa0cccc12908e40c511d">AST_MSG_DATA_SOURCE_TYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00447">message.h:447</a></div></div>
<div class="ttc" id="structast__channel__tech_html_a0f437c620ae3347d3b5ff82ffc19d37a"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#a0f437c620ae3347d3b5ff82ffc19d37a">ast_channel_tech::answer</a></div><div class="ttdeci">int(*const answer)(struct ast_channel *chan)</div><div class="ttdoc">Answer the channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00708">channel.h:708</a></div></div>
<div class="ttc" id="channel_8c_html_a4d76f322ccd9bb1c0b8d3eee8881a22d"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a4d76f322ccd9bb1c0b8d3eee8881a22d">AST_THREADSTORAGE_RAW</a></div><div class="ttdeci">AST_THREADSTORAGE_RAW(in_intercept_routine)</div></div>
<div class="ttc" id="format__ogg__vorbis_8c_html_aa07752a32d3d4fa9eac743a1d7daf16f"><div class="ttname"><a href="../../db/d9b/format__ogg__vorbis_8c.html#aa07752a32d3d4fa9eac743a1d7daf16f">write_stream</a></div><div class="ttdeci">static void write_stream(struct ogg_vorbis_desc *s, FILE *f)</div><div class="ttdoc">Write out any pending encoded data. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d9b/format__ogg__vorbis_8c_source.html#l00203">format_ogg_vorbis.c:203</a></div></div>
<div class="ttc" id="structast__channel_html_ab9ba3b6c1a314a533dad7b61ed0be35e"><div class="ttname"><a href="../../df/d3c/structast__channel.html#ab9ba3b6c1a314a533dad7b61ed0be35e">ast_channel::redirecting</a></div><div class="ttdeci">struct ast_party_redirecting redirecting</div><div class="ttdoc">Redirecting/Diversion information. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00148">channel_internal_api.c:148</a></div></div>
<div class="ttc" id="channel_8c_html_a5b6038c1b5aeb272bcb35c937088984c"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a5b6038c1b5aeb272bcb35c937088984c">silence_generator_release</a></div><div class="ttdeci">static void silence_generator_release(struct ast_channel *chan, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08232">channel.c:8232</a></div></div>
<div class="ttc" id="structast__control__t38__parameters_html_adb36822366e10ce64ca8337c512732a6"><div class="ttname"><a href="../../d5/def/structast__control__t38__parameters.html#adb36822366e10ce64ca8337c512732a6">ast_control_t38_parameters::request_response</a></div><div class="ttdeci">enum ast_control_t38 request_response</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00398">include/asterisk/frame.h:398</a></div></div>
<div class="ttc" id="manager_8h_html_ab5db3cc603d7e798d61cb4cd94fbb4e2"><div class="ttname"><a href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a></div><div class="ttdeci">#define EVENT_FLAG_CALL</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00072">manager.h:72</a></div></div>
<div class="ttc" id="structchanlist_html_aa8f6a3233b196d1a6b727edc83063a63"><div class="ttname"><a href="../../dd/d6f/structchanlist.html#aa8f6a3233b196d1a6b727edc83063a63">chanlist::tech</a></div><div class="ttdeci">const struct ast_channel_tech * tech</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00116">channel.c:116</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="structast__party__name_html_a1fb9f03e5de01bf0a8f221e627fa9a7b"><div class="ttname"><a href="../../d8/d6f/structast__party__name.html#a1fb9f03e5de01bf0a8f221e627fa9a7b">ast_party_name::char_set</a></div><div class="ttdeci">int char_set</div><div class="ttdoc">Character set the name is using. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00273">channel.h:273</a></div></div>
<div class="ttc" id="timing_8h_html_a2a5968baf9962dedeeda855fd5ed9c75"><div class="ttname"><a href="../../db/d41/timing_8h.html#a2a5968baf9962dedeeda855fd5ed9c75">ast_timer_close</a></div><div class="ttdeci">void ast_timer_close(struct ast_timer *handle)</div><div class="ttdoc">Close an opened timing handle. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d62/timing_8c_source.html#l00154">timing.c:154</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a></div><div class="ttdoc">Assume that the ao2_container is already locked. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01067">astobj2.h:1067</a></div></div>
<div class="ttc" id="structast__assigned__ids_html"><div class="ttname"><a href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a></div><div class="ttdoc">Structure to pass both assignedid values to channel drivers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00605">channel.h:605</a></div></div>
<div class="ttc" id="structtonepair__state_html_a6bce5bf91aef7c67ff71a69f437f25c3"><div class="ttname"><a href="../../d6/d63/structtonepair__state.html#a6bce5bf91aef7c67ff71a69f437f25c3">tonepair_state::v1_2</a></div><div class="ttdeci">int v1_2</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07575">channel.c:7575</a></div></div>
<div class="ttc" id="channel_8c_html_aec583a3e25358ee552a4f3df53914cd0"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aec583a3e25358ee552a4f3df53914cd0">ast_answer</a></div><div class="ttdeci">int ast_answer(struct ast_channel *chan)</div><div class="ttdoc">Answer a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02814">channel.c:2814</a></div></div>
<div class="ttc" id="channel_8h_html_a9424ffc5c566def29ef0b1d1937e9054"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9424ffc5c566def29ef0b1d1937e9054">ast_channel_readtrans_set</a></div><div class="ttdeci">void ast_channel_readtrans_set(struct ast_channel *chan, struct ast_trans_pvt *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00757">channel_internal_api.c:757</a></div></div>
<div class="ttc" id="channel_8c_html_ae4d600d2004c8f16bed8ca00bedd18dd"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ae4d600d2004c8f16bed8ca00bedd18dd">kill_fixup</a></div><div class="ttdeci">static int kill_fixup(struct ast_channel *oldchan, struct ast_channel *newchan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00413">channel.c:413</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792ab6192c2ae240ba9e051951dba6b85da0"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ab6192c2ae240ba9e051951dba6b85da0">AST_REDIRECTING_PRIV_TO_SUBADDRESS_TYPE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09291">channel.c:9291</a></div></div>
<div class="ttc" id="channel_8c_html_a5399dc7357197254794b990b263a2b7b"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a5399dc7357197254794b990b263a2b7b">ast_party_id_free</a></div><div class="ttdeci">void ast_party_id_free(struct ast_party_id *doomed)</div><div class="ttdoc">Destroy the party id contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01811">channel.c:1811</a></div></div>
<div class="ttc" id="structast__datastore__info_html"><div class="ttname"><a href="../../d9/dfb/structast__datastore__info.html">ast_datastore_info</a></div><div class="ttdoc">Structure for a data store type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00031">datastore.h:31</a></div></div>
<div class="ttc" id="structast__msg__data_html"><div class="ttname"><a href="../../d9/d44/structast__msg__data.html">ast_msg_data</a></div><div class="ttdoc">Structure used to transport a message through the frame core. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01406">message.c:1406</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a></div><div class="ttdeci">ast_channel_state</div><div class="ttdoc">ast_channel states </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00035">channelstate.h:35</a></div></div>
<div class="ttc" id="channel_8h_html_a9e9505a91a84992d04ba4e85217fb4e4a2e185ce313026e13ed90ae3a319c9cb7"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2e185ce313026e13ed90ae3a319c9cb7">AST_SOFTHANGUP_DEV</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01122">channel.h:1122</a></div></div>
<div class="ttc" id="channel_8h_html_a8dec5f0bd378a1c23bbd9dba03b213fb"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a8dec5f0bd378a1c23bbd9dba03b213fb">ast_channel_audiohooks_set</a></div><div class="ttdeci">void ast_channel_audiohooks_set(struct ast_channel *chan, struct ast_audiohook_list *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00585">channel_internal_api.c:585</a></div></div>
<div class="ttc" id="timing_8h_html_aacc341f127efc0dc0d62f6415694174a"><div class="ttname"><a href="../../db/d41/timing_8h.html#aacc341f127efc0dc0d62f6415694174a">ast_timer_open</a></div><div class="ttdeci">struct ast_timer * ast_timer_open(void)</div><div class="ttdoc">Open a timer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d62/timing_8c_source.html#l00122">timing.c:122</a></div></div>
<div class="ttc" id="channel_8c_html_a21d6a634f2f99c44233e6c734aadc233"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a21d6a634f2f99c44233e6c734aadc233">clone_variables</a></div><div class="ttdeci">static void clone_variables(struct ast_channel *original, struct ast_channel *clonechan)</div><div class="ttdoc">Clone channel variables from &amp;#39;clone&amp;#39; channel into &amp;#39;original&amp;#39; channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06917">channel.c:6917</a></div></div>
<div class="ttc" id="structast__party__name_html_ab50d783982593ef993ea0b68f7ad8b80"><div class="ttname"><a href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">ast_party_name::str</a></div><div class="ttdeci">char * str</div><div class="ttdoc">Subscriber name (Malloced) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00265">channel.h:265</a></div></div>
<div class="ttc" id="channel_8c_html_ac6ae24f259d33ae591e76eac023e8b21"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ac6ae24f259d33ae591e76eac023e8b21">ast_transfer</a></div><div class="ttdeci">int ast_transfer(struct ast_channel *chan, char *dest)</div><div class="ttdoc">Transfer a call to dest, if the channel supports transfer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06577">channel.c:6577</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga55a45e7abb3232774a1e2d1aceaf3491"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga55a45e7abb3232774a1e2d1aceaf3491">ast_channel_flash_type</a></div><div class="ttdeci">struct stasis_message_type * ast_channel_flash_type(void)</div><div class="ttdoc">Message type for when a hook flash occurs on a channel. </div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a192282f4ac45366cf94839e59e4659c2"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a192282f4ac45366cf94839e59e4659c2">AST_CONTROL_RECORD_CANCEL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00339">include/asterisk/frame.h:339</a></div></div>
<div class="ttc" id="channel_8c_html_a30bcf0418189567bc84ff32034f79f28"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a30bcf0418189567bc84ff32034f79f28">ast_queue_hangup</a></div><div class="ttdeci">int ast_queue_hangup(struct ast_channel *chan)</div><div class="ttdoc">Queue a hangup frame for channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01150">channel.c:1150</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a35641692b96e9e81da06d8d36e677cb8"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a35641692b96e9e81da06d8d36e677cb8">ast_frame_dump</a></div><div class="ttdeci">void ast_frame_dump(const char *name, struct ast_frame *f, char *prefix)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d55/main_2frame_8c_source.html#l00731">main/frame.c:731</a></div></div>
<div class="ttc" id="structevent_html"><div class="ttname"><a href="../../df/d7d/structevent.html">event</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/astman_8c_source.html#l00222">astman.c:222</a></div></div>
<div class="ttc" id="channel_8c_html_a9f39a2015f32baf67cc21f36cce6f009"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a9f39a2015f32baf67cc21f36cce6f009">ast_say_character_str</a></div><div class="ttdeci">int ast_say_character_str(struct ast_channel *chan, const char *str, const char *ints, const char *lang, enum ast_say_case_sensitivity sensitivity)</div><div class="ttdoc">function to pronounce character and phonetic strings </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08367">channel.c:8367</a></div></div>
<div class="ttc" id="channel_8h_html_aa0358ea3ad40c705e5bd7c391374238a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa0358ea3ad40c705e5bd7c391374238a">AST_NUM_CHANNEL_BUCKETS</a></div><div class="ttdeci">#define AST_NUM_CHANNEL_BUCKETS</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00156">channel.h:156</a></div></div>
<div class="ttc" id="structtonepair__state_html_ad4af51433f84565e04fa49a753e08b64"><div class="ttname"><a href="../../d6/d63/structtonepair__state.html#ad4af51433f84565e04fa49a753e08b64">tonepair_state::v3_2</a></div><div class="ttdeci">int v3_2</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07577">channel.c:7577</a></div></div>
<div class="ttc" id="channel_8c_html_a7c9b8255907176a405dd0c071df12632"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a7c9b8255907176a405dd0c071df12632">channel_cc_params_copy</a></div><div class="ttdeci">static void * channel_cc_params_copy(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10629">channel.c:10629</a></div></div>
<div class="ttc" id="channel_8h_html_a450d6ccafe271f50f62d67e1f764b01c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a450d6ccafe271f50f62d67e1f764b01c">ast_channel_answertime_set</a></div><div class="ttdeci">void ast_channel_answertime_set(struct ast_channel *chan, struct timeval *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00991">channel_internal_api.c:991</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a5a24176e8066b727463907da4903bb8e"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a5a24176e8066b727463907da4903bb8e">AST_CONTROL_TAKEOFFHOOK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00283">include/asterisk/frame.h:283</a></div></div>
<div class="ttc" id="channel_8c_html_a38f90349e730b6556cfe8b99b134d574"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a38f90349e730b6556cfe8b99b134d574">ast_senddigit_begin</a></div><div class="ttdeci">int ast_senddigit_begin(struct ast_channel *chan, char digit)</div><div class="ttdoc">Send a DTMF digit to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04919">channel.c:4919</a></div></div>
<div class="ttc" id="structast__format_html"><div class="ttname"><a href="../../d0/d98/structast__format.html">ast_format</a></div><div class="ttdoc">Definition of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00043">format.c:43</a></div></div>
<div class="ttc" id="channel_8c_html_a5d6470615a8701722e9d3c6c6fca01d0"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a5d6470615a8701722e9d3c6c6fca01d0">ast_recvchar</a></div><div class="ttdeci">int ast_recvchar(struct ast_channel *chan, int timeout)</div><div class="ttdoc">Receives a text character from a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04751">channel.c:4751</a></div></div>
<div class="ttc" id="channel_8c_html_abbf5c9830dd3533f3a6d5d35f941effb"><div class="ttname"><a href="../../d4/d28/channel_8c.html#abbf5c9830dd3533f3a6d5d35f941effb">ast_party_id_copy</a></div><div class="ttdeci">void ast_party_id_copy(struct ast_party_id *dest, const struct ast_party_id *src)</div><div class="ttdoc">Copy the source party id information to the destination party id. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01765">channel.c:1765</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ae8e6b1d91a861c33a3de923b24f54dec"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae8e6b1d91a861c33a3de923b24f54dec">AST_CONTROL_STREAM_FORWARD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00337">include/asterisk/frame.h:337</a></div></div>
<div class="ttc" id="channel_8c_html_abf514b9d96a1821a33fec8c64ee4e26f"><div class="ttname"><a href="../../d4/d28/channel_8c.html#abf514b9d96a1821a33fec8c64ee4e26f">ast_party_connected_line_init</a></div><div class="ttdeci">void ast_party_connected_line_init(struct ast_party_connected_line *init)</div><div class="ttdoc">Initialize the given connected line structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02022">channel.c:2022</a></div></div>
<div class="ttc" id="channel_8c_html_a9a479c867a7632fb3bc0767a9893b288"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a9a479c867a7632fb3bc0767a9893b288">channel_set_intercept_mode</a></div><div class="ttdeci">static void channel_set_intercept_mode(int in_intercept_mode)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10419">channel.c:10419</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a168d496bdac09ece3ce49cf473bbdb4bab75e46d3212a2a886143d874c78a1e3c"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4bab75e46d3212a2a886143d874c78a1e3c">AST_T38_REQUEST_TERMINATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00372">include/asterisk/frame.h:372</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="cli_8h_html_aea8910ed9e301e7f741f87942c244eac"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a></div><div class="ttdeci">#define ast_cli_register_multiple(e, len)</div><div class="ttdoc">Register multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00265">cli.h:265</a></div></div>
<div class="ttc" id="channel_8h_html_a0d78cf79bf535beab2c8928f68632c2e"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a0d78cf79bf535beab2c8928f68632c2e">ast_channel_named_pickupgroups_set</a></div><div class="ttdeci">void ast_channel_named_pickupgroups_set(struct ast_channel *chan, struct ast_namedgroups *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01103">channel_internal_api.c:1103</a></div></div>
<div class="ttc" id="structast__channel__tech_html_acfe4f6b08d60eb03a38be717e6291a46"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#acfe4f6b08d60eb03a38be717e6291a46">ast_channel_tech::hangup</a></div><div class="ttdeci">int(*const hangup)(struct ast_channel *chan)</div><div class="ttdoc">Hangup (and possibly destroy) the channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00705">channel.h:705</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a9c09b93677bac821db85f7e194d3ea89"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a9c09b93677bac821db85f7e194d3ea89">AST_REDIRECTING_PRIV_FROM_NAME_PRESENTATION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09302">channel.c:9302</a></div></div>
<div class="ttc" id="structast__party__subaddress_html_aaa04218f9e3a9065afa8be2491da8904"><div class="ttname"><a href="../../d7/d41/structast__party__subaddress.html#aaa04218f9e3a9065afa8be2491da8904">ast_party_subaddress::valid</a></div><div class="ttdeci">unsigned char valid</div><div class="ttdoc">TRUE if the subaddress information is valid/present. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00329">channel.h:329</a></div></div>
<div class="ttc" id="structset__format__access_html_a38ddc8fcab687302219f13d5587c5801"><div class="ttname"><a href="../../d0/d0f/structset__format__access.html#a38ddc8fcab687302219f13d5587c5801">set_format_access::get_format</a></div><div class="ttdeci">struct ast_format *(* get_format)(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05651">channel.c:5651</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a95721650e26cbcb734ce91616e63ca68"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a95721650e26cbcb734ce91616e63ca68">AST_REDIRECTING_PRIV_FROM_NUMBER_PRESENTATION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09298">channel.c:9298</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="channel_8c_html_a4a3691a88a747dd6ceec6cc17628402f"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a4a3691a88a747dd6ceec6cc17628402f">ast_party_redirecting_set</a></div><div class="ttdeci">void ast_party_redirecting_set(struct ast_party_redirecting *dest, const struct ast_party_redirecting *src, const struct ast_set_party_redirecting *update)</div><div class="ttdoc">Set the redirecting information based on another redirecting source. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02166">channel.c:2166</a></div></div>
<div class="ttc" id="channel_8c_html_ad14ff1aee3e9bd8ce15ea24bbb6d528e"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ad14ff1aee3e9bd8ce15ea24bbb6d528e">party_number_build_data</a></div><div class="ttdeci">static int party_number_build_data(unsigned char *data, size_t datalen, const struct ast_party_number *number, const char *label, const struct ast_party_number_ies *ies)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08518">channel.c:8518</a></div></div>
<div class="ttc" id="channel_8c_html_a9f51bdb4c307684913cf295526a48d06"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a9f51bdb4c307684913cf295526a48d06">ami_vars</a></div><div class="ttdeci">static struct external_vars ami_vars</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07933">channel.c:7933</a></div></div>
<div class="ttc" id="structoutgoing__helper_html_a4b69ca27319212bb6fade39a869c83d1"><div class="ttname"><a href="../../d9/dc0/structoutgoing__helper.html#a4b69ca27319212bb6fade39a869c83d1">outgoing_helper::connect_on_early_media</a></div><div class="ttdeci">int connect_on_early_media</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01109">channel.h:1109</a></div></div>
<div class="ttc" id="channel_8h_html_a420613770272535a0234c2bc370514b7"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a420613770272535a0234c2bc370514b7">ast_channel_internal_alertpipe_close</a></div><div class="ttdeci">void ast_channel_internal_alertpipe_close(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01140">channel_internal_api.c:1140</a></div></div>
<div class="ttc" id="structmanager__channel__variable_html_a635b950b2ddb0f18644a528dbdd60dfe"><div class="ttname"><a href="../../d7/d07/structmanager__channel__variable.html#a635b950b2ddb0f18644a528dbdd60dfe">manager_channel_variable::name</a></div><div class="ttdeci">char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07928">channel.c:7928</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a9fccbbe7d7045408dee32c1d31575485"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a9fccbbe7d7045408dee32c1d31575485">AST_OPTION_CC_AGENT_TYPE</a></div><div class="ttdeci">#define AST_OPTION_CC_AGENT_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00510">include/asterisk/frame.h:510</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390">ast_control_frame_type</a></div><div class="ttdeci">ast_control_frame_type</div><div class="ttdoc">Internal control frame subtype field values. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00277">include/asterisk/frame.h:277</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a08db21d22ff20b8c694ab486c9330603"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a08db21d22ff20b8c694ab486c9330603">AST_STATE_MUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00047">channelstate.h:47</a></div></div>
<div class="ttc" id="channel_8c_html_a94a57b3cc709269b05735021f33f106e"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a94a57b3cc709269b05735021f33f106e">suppress_get_datastore_information</a></div><div class="ttdeci">static const struct ast_datastore_info * suppress_get_datastore_information(enum ast_frame_type frametype)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10968">channel.c:10968</a></div></div>
<div class="ttc" id="plc_8h_html_a1d67d861ec6d5a43808697001e51425e"><div class="ttname"><a href="../../d2/d66/plc_8h.html#a1d67d861ec6d5a43808697001e51425e">plc_fillin</a></div><div class="ttdeci">int plc_fillin(plc_state_t *s, int16_t amp[], int len)</div><div class="ttdoc">Fill-in a block of missing audio samples. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1f/plc_8c_source.html#l00175">plc.c:175</a></div></div>
<div class="ttc" id="channel_8c_html_a6757eb73bc4592a9e935d6a66380d565"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a6757eb73bc4592a9e935d6a66380d565">ast_channel_connected_line_macro</a></div><div class="ttdeci">int ast_channel_connected_line_macro(struct ast_channel *autoservice_chan, struct ast_channel *macro_chan, const void *connected_info, int is_caller, int is_frame)</div><div class="ttdoc">Run a connected line interception macro and update a channel&amp;#39;s connected line information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10435">channel.c:10435</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="stream_8h_html_ab57b837e53f8ea2335ec9dc00cdc0c0c"><div class="ttname"><a href="../../d8/d95/stream_8h.html#ab57b837e53f8ea2335ec9dc00cdc0c0c">ast_stream_topology_create_from_format_cap</a></div><div class="ttdeci">struct ast_stream_topology * ast_stream_topology_create_from_format_cap(struct ast_format_cap *cap)</div><div class="ttdoc">A helper function that, given a format capabilities structure, creates a topology and separates the m...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00848">stream.c:848</a></div></div>
<div class="ttc" id="channel_8c_html_aaabd7223505285d5f470bcd30400cb47"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aaabd7223505285d5f470bcd30400cb47">send_flash_event</a></div><div class="ttdeci">static void send_flash_event(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03411">channel.c:3411</a></div></div>
<div class="ttc" id="channel_8c_html_a892b6550a4f90b70ad92198c9d05cedc"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a892b6550a4f90b70ad92198c9d05cedc">ast_channel_inherit_variables</a></div><div class="ttdeci">void ast_channel_inherit_variables(const struct ast_channel *parent, struct ast_channel *child)</div><div class="ttdoc">Inherits channel variable from parent to child channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06866">channel.c:6866</a></div></div>
<div class="ttc" id="logger_8h_html_a6db44a7e26f0bc42801fc7225817c6a1"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6db44a7e26f0bc42801fc7225817c6a1">ast_callid</a></div><div class="ttdeci">unsigned int ast_callid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00087">logger.h:87</a></div></div>
<div class="ttc" id="channel_8h_html_a2e46e4da6a025dfe7c64c4f1a480967b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a2e46e4da6a025dfe7c64c4f1a480967b">ast_channel_internal_bridge</a></div><div class="ttdeci">struct ast_bridge * ast_channel_internal_bridge(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01240">channel_internal_api.c:1240</a></div></div>
<div class="ttc" id="structtonepair__state_html_ab34934db2556aa36bf2a30c33313f911"><div class="ttname"><a href="../../d6/d63/structtonepair__state.html#ab34934db2556aa36bf2a30c33313f911">tonepair_state::v2_2</a></div><div class="ttdeci">int v2_2</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07576">channel.c:7576</a></div></div>
<div class="ttc" id="channel_8c_html_a673ed25d2c254caadf6b68f1c64c84f5"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a673ed25d2c254caadf6b68f1c64c84f5">should_skip_dtmf</a></div><div class="ttdeci">static int should_skip_dtmf(struct ast_channel *chan)</div><div class="ttdoc">Determine whether or not we should ignore DTMF in the readq. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03489">channel.c:3489</a></div></div>
<div class="ttc" id="structast__party__connected__line_html_ad3bdbbc7177d5ac309bc72f9fc3c4bee"><div class="ttname"><a href="../../dc/d9e/structast__party__connected__line.html#ad3bdbbc7177d5ac309bc72f9fc3c4bee">ast_party_connected_line::ani2</a></div><div class="ttdeci">int ani2</div><div class="ttdoc">Automatic Number Identification 2 (Info Digits) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00476">channel.h:476</a></div></div>
<div class="ttc" id="structast__generator_html_a3022be24de5fabbccff620c25841f738"><div class="ttname"><a href="../../de/d2a/structast__generator.html#a3022be24de5fabbccff620c25841f738">ast_generator::generate</a></div><div class="ttdeci">int(* generate)(struct ast_channel *chan, void *data, int len, int samples)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00234">channel.h:234</a></div></div>
<div class="ttc" id="format__cap_8h_html_aa9da4b15be2b49c8f511a579c4c44b63"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aa9da4b15be2b49c8f511a579c4c44b63">ast_format_cap_get_best_by_type</a></div><div class="ttdeci">struct ast_format * ast_format_cap_get_best_by_type(const struct ast_format_cap *cap, enum ast_media_type type)</div><div class="ttdoc">Get the most preferred format for a particular media type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00417">format_cap.c:417</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a5344deefcbdcca938001314e81ea195a"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a5344deefcbdcca938001314e81ea195a">AST_CONTROL_REDIRECTING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00300">include/asterisk/frame.h:300</a></div></div>
<div class="ttc" id="structast__party__number__ies_html_a3df9119032baa1743f2db71344bd7cac"><div class="ttname"><a href="../../d1/dbe/structast__party__number__ies.html#a3df9119032baa1743f2db71344bd7cac">ast_party_number_ies::presentation</a></div><div class="ttdeci">int presentation</div><div class="ttdoc">presentation-indicator ie </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08499">channel.c:8499</a></div></div>
<div class="ttc" id="channel_8c_html_a53b708b7fc71dcbcd33acae0ad4d7ef8"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a53b708b7fc71dcbcd33acae0ad4d7ef8">ast_channel_unregister</a></div><div class="ttdeci">void ast_channel_unregister(const struct ast_channel_tech *tech)</div><div class="ttdoc">Unregister channel driver. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00570">channel.c:570</a></div></div>
<div class="ttc" id="structset__format__access_html"><div class="ttname"><a href="../../d0/d0f/structset__format__access.html">set_format_access</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05647">channel.c:5647</a></div></div>
<div class="ttc" id="channel_8c_html_aa216353e87c4c8cc931a4017f990c5e7"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aa216353e87c4c8cc931a4017f990c5e7">ast_channel_get_duration_ms</a></div><div class="ttdeci">int64_t ast_channel_get_duration_ms(struct ast_channel *chan)</div><div class="ttdoc">Obtain how long it&amp;#39;s been, in milliseconds, since the channel was created. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02829">channel.c:2829</a></div></div>
<div class="ttc" id="channel_8c_html_a8d715844337b07f950bf2ff0eb4c5b90"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8d715844337b07f950bf2ff0eb4c5b90">ast_channel_sendhtml</a></div><div class="ttdeci">int ast_channel_sendhtml(struct ast_channel *chan, int subclass, const char *data, int datalen)</div><div class="ttdoc">Sends HTML on given channel Send HTML or URL on link. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06725">channel.c:6725</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4a1884cde93e53bef32ca85c194a1d05"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a></div><div class="ttdeci">#define AST_LIST_EMPTY(head)</div><div class="ttdoc">Checks whether the specified list contains any entries. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00449">linkedlists.h:449</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab3c44e28d661616129b7819069effe61"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a></div><div class="ttdeci">#define ao2_alloc_options(data_size, destructor_fn, options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00406">astobj2.h:406</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="astobj2_8h_html_a7ce8563daf84a18540a86504d165b444"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a7ce8563daf84a18540a86504d165b444">ao2_link_flags</a></div><div class="ttdeci">#define ao2_link_flags(container, obj, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01572">astobj2.h:1572</a></div></div>
<div class="ttc" id="structsuppress__data_html"><div class="ttname"><a href="../../d1/dac/structsuppress__data.html">suppress_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10920">channel.c:10920</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_ga0f7d3a1a337b48830c3531ed90594b3a"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#ga0f7d3a1a337b48830c3531ed90594b3a">ast_msg_data_alloc</a></div><div class="ttdeci">struct ast_msg_data * ast_msg_data_alloc(enum ast_msg_data_source_type source, struct ast_msg_data_attribute attributes[], size_t count)</div><div class="ttdoc">Allocates an ast_msg_data structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01418">message.c:1418</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875">AST_CONTROL_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00282">include/asterisk/frame.h:282</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00042">channelstate.h:42</a></div></div>
<div class="ttc" id="structsuppress__data_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d1/dac/structsuppress__data.html#a6937b93c56cb473b547eda454dca7b4c">suppress_data::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10921">channel.c:10921</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a10624bc470a4ac2634221dfa74bdb17fa94425459ee6ac7993c6289fde4d4ea8c"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a10624bc470a4ac2634221dfa74bdb17fa94425459ee6ac7993c6289fde4d4ea8c">AST_GETDATA_EMPTY_END_TERMINATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01161">include/asterisk/app.h:1161</a></div></div>
<div class="ttc" id="translate_8h_html_ab09d3ccb95d1f828d2871530226f9456"><div class="ttname"><a href="../../db/d39/translate_8h.html#ab09d3ccb95d1f828d2871530226f9456">ast_translate</a></div><div class="ttdeci">struct ast_frame * ast_translate(struct ast_trans_pvt *tr, struct ast_frame *f, int consume)</div><div class="ttdoc">translates one or more frames Apply an input frame into the translator and receive zero or one output...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00565">translate.c:565</a></div></div>
<div class="ttc" id="options_8h_html_afe8795c4ec744506a9300700fc0813dc"><div class="ttname"><a href="../../d7/d5b/options_8h.html#afe8795c4ec744506a9300700fc0813dc">ast_opt_transmit_silence</a></div><div class="ttdeci">#define ast_opt_transmit_silence</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00124">options.h:124</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aacda7851474c2c67e1a959b2d82d672f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aacda7851474c2c67e1a959b2d82d672f">AST_OPTION_SECURE_MEDIA</a></div><div class="ttdeci">#define AST_OPTION_SECURE_MEDIA</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00515">include/asterisk/frame.h:515</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="channel__internal_8h_html_ae6d131fd5ccddf3f7f2fb18366096c83"><div class="ttname"><a href="../../d5/de4/channel__internal_8h.html#ae6d131fd5ccddf3f7f2fb18366096c83">ast_channel_internal_errno_set</a></div><div class="ttdeci">void ast_channel_internal_errno_set(enum ast_channel_error error)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01563">channel_internal_api.c:1563</a></div></div>
<div class="ttc" id="chan__iax2_8c_html_a7dd0190efe1c61151a9dbab078bdb263"><div class="ttname"><a href="../../d5/dff/chan__iax2_8c.html#a7dd0190efe1c61151a9dbab078bdb263">match</a></div><div class="ttdeci">static int match(struct ast_sockaddr *addr, unsigned short callno, unsigned short dcallno, const struct chan_iax2_pvt *cur, int check_dcallno)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dff/chan__iax2_8c_source.html#l02315">chan_iax2.c:2315</a></div></div>
<div class="ttc" id="app__queue_8c_html_a5633b1433389cec21ade3811bbe9ca5b"><div class="ttname"><a href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a></div><div class="ttdeci">char * text</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/app__queue_8c_source.html#l01508">app_queue.c:1508</a></div></div>
<div class="ttc" id="channel_8h_html_a1372ab0cb362b409af61330d2edf2cb5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1372ab0cb362b409af61330d2edf2cb5">ast_channel_blocker_tid</a></div><div class="ttdeci">int ast_channel_blocker_tid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01222">channel_internal_api.c:1222</a></div></div>
<div class="ttc" id="channel_8c_html_a483a9d187ae7c3036225586009b04e8a"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a483a9d187ae7c3036225586009b04e8a">ast_read_stream</a></div><div class="ttdeci">struct ast_frame * ast_read_stream(struct ast_channel *chan)</div><div class="ttdoc">Reads a frame, but does not filter to just the default streams. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04307">channel.c:4307</a></div></div>
<div class="ttc" id="strings_8h_html_a7fc844c12b769ccded05e7514036e241"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a></div><div class="ttdeci">#define ast_str_alloca(init_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00800">strings.h:800</a></div></div>
<div class="ttc" id="format_8h_html_a082f0fca94b18ba466f6e28d3ccb2fc8"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a></div><div class="ttdeci">const char * ast_format_get_name(const struct ast_format *format)</div><div class="ttdoc">Get the name associated with a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00334">format.c:334</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390af4cf96fe3cc13c2a1b4d539fcb1adaed"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af4cf96fe3cc13c2a1b4d539fcb1adaed">_XXX_AST_CONTROL_T38</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00296">include/asterisk/frame.h:296</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_acc941e909d1ca6a0997028d9562d78da"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#acc941e909d1ca6a0997028d9562d78da">call</a></div><div class="ttdeci">static int call(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02358">chan_pjsip.c:2358</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df">CMP_STOP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01032">astobj2.h:1032</a></div></div>
<div class="ttc" id="structast__datastore_html"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html">ast_datastore</a></div><div class="ttdoc">Structure for a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00068">datastore.h:68</a></div></div>
<div class="ttc" id="utils_8h_html_aac9153aee4bdb92701df902e06a74eb3"><div class="ttname"><a href="../../d5/d60/utils_8h.html#aac9153aee4bdb92701df902e06a74eb3">SWAP</a></div><div class="ttdeci">#define SWAP(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00230">utils.h:230</a></div></div>
<div class="ttc" id="app__jack_8c_html_af25d6dc49269fa2003ac7c7fa6f13915"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00147">app_jack.c:147</a></div></div>
<div class="ttc" id="channel_8h_html_add6255866ea1651a90cf70d963c4920a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#add6255866ea1651a90cf70d963c4920a">ast_channel_varshead</a></div><div class="ttdeci">struct varshead * ast_channel_varshead(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00932">channel_internal_api.c:932</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_aae28b3b590d6f2c84e472625c81ae2bb"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#aae28b3b590d6f2c84e472625c81ae2bb">hangup</a></div><div class="ttdeci">static int hangup(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02483">chan_pjsip.c:2483</a></div></div>
<div class="ttc" id="file_8h_html"><div class="ttname"><a href="../../d2/d4d/file_8h.html">file.h</a></div><div class="ttdoc">Generic File Format Support. Should be included by clients of the file handling routines. File service providers should instead include mod_format.h. </div></div>
<div class="ttc" id="channel_8c_html_ae5039a62fbb5dc1ecb217f10940d19df"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ae5039a62fbb5dc1ecb217f10940d19df">ast_channeltype_list</a></div><div class="ttdeci">struct ast_variable * ast_channeltype_list(void)</div><div class="ttdoc">return an ast_variable list of channeltypes </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00188">channel.c:188</a></div></div>
<div class="ttc" id="channel_8c_html_ae4bed10845e16e1cbde4bb46d4b1d679"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ae4bed10845e16e1cbde4bb46d4b1d679">ast_unref_namedgroups</a></div><div class="ttdeci">struct ast_namedgroups * ast_unref_namedgroups(struct ast_namedgroups *groups)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07832">channel.c:7832</a></div></div>
<div class="ttc" id="structast__timer_html"><div class="ttname"><a href="../../da/def/structast__timer.html">ast_timer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d62/timing_8c_source.html#l00054">timing.c:54</a></div></div>
<div class="ttc" id="channel_8c_html_ade57349a78b2f32d3a7d1bc01fb3bf96"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ade57349a78b2f32d3a7d1bc01fb3bf96">ast_channel_queue_connected_line_update</a></div><div class="ttdeci">void ast_channel_queue_connected_line_update(struct ast_channel *chan, const struct ast_party_connected_line *connected, const struct ast_set_party_connected_line *update)</div><div class="ttdoc">Queue a connected line update frame on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09202">channel.c:9202</a></div></div>
<div class="ttc" id="indications_8h_html_a9d5be069b7060d326a213f5d60b8dc77"><div class="ttname"><a href="../../d2/d0f/indications_8h.html#a9d5be069b7060d326a213f5d60b8dc77">ast_playtones_stop</a></div><div class="ttdeci">void ast_playtones_stop(struct ast_channel *chan)</div><div class="ttdoc">Stop playing tones on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d6e/indications_8c_source.html#l00393">indications.c:393</a></div></div>
<div class="ttc" id="stream_8h_html_aa4a9c0de95417c5db8eda8544cd1631d"><div class="ttname"><a href="../../d8/d95/stream_8h.html#aa4a9c0de95417c5db8eda8544cd1631d">ast_stream_topology_get_stream</a></div><div class="ttdeci">struct ast_stream * ast_stream_topology_get_stream(const struct ast_stream_topology *topology, unsigned int position)</div><div class="ttdoc">Get a specific stream from the topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00788">stream.c:788</a></div></div>
<div class="ttc" id="channel_8c_html_a3212119ca5acac4c9ec6051987380876a011704f0946d51ed30001afcce2f7f3d"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a011704f0946d51ed30001afcce2f7f3d">AST_CONNECTED_LINE_NUMBER_VALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08776">channel.c:8776</a></div></div>
<div class="ttc" id="channel_8h_html_a6c0dd56eedc72a6b0b871436d55443f5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6c0dd56eedc72a6b0b871436d55443f5">ast_channel_softhangup_internal_flag_set</a></div><div class="ttdeci">void ast_channel_softhangup_internal_flag_set(struct ast_channel *chan, int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01001">channel_internal_api.c:1001</a></div></div>
<div class="ttc" id="structast__party__subaddress_html_ab50d783982593ef993ea0b68f7ad8b80"><div class="ttname"><a href="../../d7/d41/structast__party__subaddress.html#ab50d783982593ef993ea0b68f7ad8b80">ast_party_subaddress::str</a></div><div class="ttdeci">char * str</div><div class="ttdoc">Malloced subaddress string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00314">channel.h:314</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a389aaa73318087dfed0cdd11e1d3090b"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a389aaa73318087dfed0cdd11e1d3090b">AST_RWLIST_HEAD_INIT</a></div><div class="ttdeci">#define AST_RWLIST_HEAD_INIT(head)</div><div class="ttdoc">Initializes an rwlist head structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00638">linkedlists.h:638</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a2457835b26aa09c41c6ecf633f95f775a363c133e333ad8893b2f722a40fac35f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a2457835b26aa09c41c6ecf633f95f775a363c133e333ad8893b2f722a40fac35f">AST_FRAME_READ_ACTION_CONNECTED_LINE_MACRO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00352">include/asterisk/frame.h:352</a></div></div>
<div class="ttc" id="structast__channel_html_a8f64897c7ccc5c13f276d1d07c4e7095"><div class="ttname"><a href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">ast_channel::data</a></div><div class="ttdeci">const char * data</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00083">channel_internal_api.c:83</a></div></div>
<div class="ttc" id="channel_8c_html_adba01eb648735ee5fc46ab1437e2f35b"><div class="ttname"><a href="../../d4/d28/channel_8c.html#adba01eb648735ee5fc46ab1437e2f35b">set_channel_answer_time</a></div><div class="ttdeci">static void set_channel_answer_time(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02637">channel.c:2637</a></div></div>
<div class="ttc" id="structast__channel__iterator_html_a4e19899740b00333d77ffdda2a33e8ce"><div class="ttname"><a href="../../d9/d97/structast__channel__iterator.html#a4e19899740b00333d77ffdda2a33e8ce">ast_channel_iterator::simple_iterator</a></div><div class="ttdeci">struct ao2_iterator simple_iterator</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01353">channel.c:1353</a></div></div>
<div class="ttc" id="causes_8h_html_a5310fd2a65b78fb6840b0e3e883a2470"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a5310fd2a65b78fb6840b0e3e883a2470">AST_CAUSE_NO_USER_RESPONSE</a></div><div class="ttdeci">#define AST_CAUSE_NO_USER_RESPONSE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00107">causes.h:107</a></div></div>
<div class="ttc" id="channel_8c_html_ae166e74521547a7d8390b8b154b236be"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ae166e74521547a7d8390b8b154b236be">should_trigger_dtmf_emulating</a></div><div class="ttdeci">static int should_trigger_dtmf_emulating(struct ast_channel *chan)</div><div class="ttdoc">Determine whether or not we have to trigger dtmf emulating using 50 fps timer events especially when ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02864">channel.c:2864</a></div></div>
<div class="ttc" id="global__datastores_8h_html_af4da5160f63d90557d809a967409af24"><div class="ttname"><a href="../../d2/dc3/global__datastores_8h.html#af4da5160f63d90557d809a967409af24">secure_call_info</a></div><div class="ttdeci">const struct ast_datastore_info secure_call_info</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dec/global__datastores_8c_source.html#l00054">global_datastores.c:54</a></div></div>
<div class="ttc" id="channel_8c_html_a6c7bcf106faf8924034c45a1164be05f"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a6c7bcf106faf8924034c45a1164be05f">ast_party_redirecting_reason_set</a></div><div class="ttdeci">void ast_party_redirecting_reason_set(struct ast_party_redirecting_reason *dest, const struct ast_party_redirecting_reason *src)</div><div class="ttdoc">Set the redirecting reason information based on another redirecting reason source. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02102">channel.c:2102</a></div></div>
<div class="ttc" id="channel_8c_html_a3212119ca5acac4c9ec6051987380876a8614a42368ac70310dc91d345af2e4e3"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a8614a42368ac70310dc91d345af2e4e3">AST_CONNECTED_LINE_ID_PRESENTATION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08761">channel.c:8761</a></div></div>
<div class="ttc" id="channel_8c_html_a71a13fe57a67ccea63da4e31b9d18794"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a71a13fe57a67ccea63da4e31b9d18794">ast_party_id_merge_copy</a></div><div class="ttdeci">void ast_party_id_merge_copy(struct ast_party_id *dest, struct ast_party_id *base, struct ast_party_id *overlay)</div><div class="ttdoc">Copy a merge of a given party id into another given party id to a given destination party id...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01920">channel.c:1920</a></div></div>
<div class="ttc" id="threadstorage_8h_html"><div class="ttname"><a href="../../dc/d7d/threadstorage_8h.html">threadstorage.h</a></div><div class="ttdoc">Definitions to aid in the use of thread local storage. </div></div>
<div class="ttc" id="channel_8c_html_a3212119ca5acac4c9ec6051987380876ac36f6c6286e5e2522901d6e86e7745ab"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876ac36f6c6286e5e2522901d6e86e7745ab">AST_CONNECTED_LINE_NUMBER_PRESENTATION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08777">channel.c:8777</a></div></div>
<div class="ttc" id="channel_8c_html_afe51cdc5487699d03bd8bdf03f097ae0"><div class="ttname"><a href="../../d4/d28/channel_8c.html#afe51cdc5487699d03bd8bdf03f097ae0">ast_request_and_dial</a></div><div class="ttdeci">struct ast_channel * ast_request_and_dial(const char *type, struct ast_format_cap *cap, const struct ast_assigned_ids *assignedids, const struct ast_channel *requestor, const char *addr, int timeout, int *outstate, const char *cidnum, const char *cidname)</div><div class="ttdoc">Request a channel of a given type, with data as optional information used by the low level module and...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06264">channel.c:6264</a></div></div>
<div class="ttc" id="message_8h_html"><div class="ttname"><a href="../../d2/d0d/message_8h.html">message.h</a></div><div class="ttdoc">Out-of-call text message support. </div></div>
<div class="ttc" id="structtonepair__state_html_ac1c4127983f79b8c09b4f1610d1c1021"><div class="ttname"><a href="../../d6/d63/structtonepair__state.html#ac1c4127983f79b8c09b4f1610d1c1021">tonepair_state::modulate</a></div><div class="ttdeci">int modulate</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07581">channel.c:7581</a></div></div>
<div class="ttc" id="channel_8c_html_a78bf5d424a74b12893b177fbaf07ec90"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a78bf5d424a74b12893b177fbaf07ec90">ast_set_write_format_interleaved_stereo</a></div><div class="ttdeci">int ast_set_write_format_interleaved_stereo(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdoc">Sets write format for a channel. All internal data will than be handled in an interleaved format...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05872">channel.c:5872</a></div></div>
<div class="ttc" id="causes_8h_html_a84f3380611feeec35bb25319b26f92fd"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a84f3380611feeec35bb25319b26f92fd">AST_CAUSE_NORMAL_CIRCUIT_CONGESTION</a></div><div class="ttdeci">#define AST_CAUSE_NORMAL_CIRCUIT_CONGESTION</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00119">causes.h:119</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="channel_8h_html_ad9a1e9a11b74fd9adb280df1a6bc251f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ad9a1e9a11b74fd9adb280df1a6bc251f">ast_channel_zone_set</a></div><div class="ttdeci">void ast_channel_zone_set(struct ast_channel *chan, struct ast_tone_zone *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00749">channel_internal_api.c:749</a></div></div>
<div class="ttc" id="ccss_8h_html_a1419c77d2c40064d442ae794175ca879"><div class="ttname"><a href="../../de/dc8/ccss_8h.html#a1419c77d2c40064d442ae794175ca879">ast_cc_config_params_init</a></div><div class="ttdeci">#define ast_cc_config_params_init()</div><div class="ttdoc">Allocate and initialize an ast_cc_config_params structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc8/ccss_8h_source.html#l00135">ccss.h:135</a></div></div>
<div class="ttc" id="channel_8h_html_a3fd653bf72b897400f2e3f5c0ad480da"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3fd653bf72b897400f2e3f5c0ad480da">ast_channel_internal_fd_clear_all</a></div><div class="ttdeci">void ast_channel_internal_fd_clear_all(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01182">channel_internal_api.c:1182</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa36e72b77f1b80881cd0a9fcca66ce19"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa36e72b77f1b80881cd0a9fcca66ce19">AST_LIST_REMOVE</a></div><div class="ttdeci">#define AST_LIST_REMOVE(head, elm, field)</div><div class="ttdoc">Removes a specific entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00855">linkedlists.h:855</a></div></div>
<div class="ttc" id="channel_8c_html_a8404d49d2a2f73d4f066a87063fcff9f"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8404d49d2a2f73d4f066a87063fcff9f">kill_exception</a></div><div class="ttdeci">static struct ast_frame * kill_exception(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00401">channel.c:401</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a4e5d21d1ab20653e36109919d6ea72e1"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a4e5d21d1ab20653e36109919d6ea72e1">AST_STATE_DIALING_OFFHOOK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00044">channelstate.h:44</a></div></div>
<div class="ttc" id="channel_8c_html_a3df7007b550647c63a1b211181b55814"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3df7007b550647c63a1b211181b55814">ast_queue_frame</a></div><div class="ttdeci">int ast_queue_frame(struct ast_channel *chan, struct ast_frame *fin)</div><div class="ttdoc">Queue one or more frames to a channel&amp;#39;s frame queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01139">channel.c:1139</a></div></div>
<div class="ttc" id="causes_8h_html_a29549b982646ee60f116fc4f55c711e5"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a29549b982646ee60f116fc4f55c711e5">AST_CAUSE_INVALID_NUMBER_FORMAT</a></div><div class="ttdeci">#define AST_CAUSE_INVALID_NUMBER_FORMAT</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00115">causes.h:115</a></div></div>
<div class="ttc" id="channel__internal_8h_html_a5c65bfe78b97d78dbd987b24928c04c7"><div class="ttname"><a href="../../d5/de4/channel__internal_8h.html#a5c65bfe78b97d78dbd987b24928c04c7">ast_channel_internal_swap_stream_topology</a></div><div class="ttdeci">void ast_channel_internal_swap_stream_topology(struct ast_channel *chan1, struct ast_channel *chan2)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01628">channel_internal_api.c:1628</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a195b2c39c09113953814aa800dd06e7f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a195b2c39c09113953814aa800dd06e7f">AST_CONTROL_WINK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00287">include/asterisk/frame.h:287</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5af2e72cd75713b921e156f19bb0c22371"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5af2e72cd75713b921e156f19bb0c22371">AST_FLAG_TIMINGDATA_IS_AO2_OBJ</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01055">channel.h:1055</a></div></div>
<div class="ttc" id="framehook_8h_html_aa0b8b734a826e26f1fe65630b0a6bcbe"><div class="ttname"><a href="../../db/d3c/framehook_8h.html#aa0b8b734a826e26f1fe65630b0a6bcbe">ast_framehook_list_destroy</a></div><div class="ttdeci">int ast_framehook_list_destroy(struct ast_channel *chan)</div><div class="ttdoc">This is used by the channel API to detach and destroy all framehooks on a channel during channel dest...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dac/framehook_8c_source.html#l00206">framehook.c:206</a></div></div>
<div class="ttc" id="cdr__beanstalkd_8c_html_acec9ce2df15222151ad66fcb1d74eb9f"><div class="ttname"><a href="../../d9/d47/cdr__beanstalkd_8c.html#acec9ce2df15222151ad66fcb1d74eb9f">priority</a></div><div class="ttdeci">static int priority</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d47/cdr__beanstalkd_8c_source.html#l00076">cdr_beanstalkd.c:76</a></div></div>
<div class="ttc" id="channel_8h_html_ace039a8191c129d7e16589790868210e"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ace039a8191c129d7e16589790868210e">AST_MUTE_DIRECTION_WRITE</a></div><div class="ttdeci">#define AST_MUTE_DIRECTION_WRITE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04938">channel.h:4938</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a712c04b4493919a7052399cd30ee8fb9"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_END</div><div class="ttdoc">Closes a safe loop traversal block. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00614">linkedlists.h:614</a></div></div>
<div class="ttc" id="callerid_8h_html_af01ad9e215f9e9941b68f1ff1559d409"><div class="ttname"><a href="../../de/d47/callerid_8h.html#af01ad9e215f9e9941b68f1ff1559d409">AST_PRES_ALLOWED_USER_NUMBER_NOT_SCREENED</a></div><div class="ttdeci">#define AST_PRES_ALLOWED_USER_NUMBER_NOT_SCREENED</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00329">callerid.h:329</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792ae0e76bbbf85849ec57854baf6209d9dc"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ae0e76bbbf85849ec57854baf6209d9dc">AST_REDIRECTING_PRIV_ORIG_NAME_PRESENTATION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09315">channel.c:9315</a></div></div>
<div class="ttc" id="channel_8h_html_af2f955678d93e76be4776d66154b5fdc"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af2f955678d93e76be4776d66154b5fdc">ast_channel_call_forward</a></div><div class="ttdeci">const char * ast_channel_call_forward(const struct ast_channel *chan)</div></div>
<div class="ttc" id="chan__mgcp_8c_html_a29e973bd94bfbaf59d939bd1bc988c32"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a29e973bd94bfbaf59d939bd1bc988c32">cid_num</a></div><div class="ttdeci">static char cid_num[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00164">chan_mgcp.c:164</a></div></div>
<div class="ttc" id="channel_8h_html_a6610c8171ced0a69738622c11736ff5e"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6610c8171ced0a69738622c11736ff5e">ast_channel_priority</a></div><div class="ttdeci">int ast_channel_priority(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00444">channel_internal_api.c:444</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a4e7a7b87975e192e7b0e52a3da89b5b6"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a4e7a7b87975e192e7b0e52a3da89b5b6">AST_REDIRECTING_TO_NUMBER_PLAN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09239">channel.c:9239</a></div></div>
<div class="ttc" id="structast__party__redirecting__reason_html_a45a5b7c00a796a23f01673cef1dbe0a9"><div class="ttname"><a href="../../d1/dee/structast__party__redirecting__reason.html#a45a5b7c00a796a23f01673cef1dbe0a9">ast_party_redirecting_reason::code</a></div><div class="ttdeci">int code</div><div class="ttdoc">enum AST_REDIRECTING_REASON value for redirection </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00511">channel.h:511</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45">OBJ_UNLINK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01043">astobj2.h:1043</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad57135cf854d84f871a6269dbd881131"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad57135cf854d84f871a6269dbd881131">ao2_callback_data_fn</a></div><div class="ttdeci">int() ao2_callback_data_fn(void *obj, void *arg, void *data, int flags)</div><div class="ttdoc">Type of a generic callback function. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01248">astobj2.h:1248</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a8ee7de1f9dc8459b1e5bfb4c8cbd8b1a"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a8ee7de1f9dc8459b1e5bfb4c8cbd8b1a">AST_REDIRECTING_TO_ID_PRESENTATION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09240">channel.c:9240</a></div></div>
<div class="ttc" id="channel_8c_html_a2e63eaa5b4d94f214edf99838ef7e7e4"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a2e63eaa5b4d94f214edf99838ef7e7e4">ast_waitfor_nandfds</a></div><div class="ttdeci">struct ast_channel * ast_waitfor_nandfds(struct ast_channel **c, int n, int *fds, int nfds, int *exception, int *outfd, int *ms)</div><div class="ttdoc">Wait for x amount of time on a file descriptor to have input. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02997">channel.c:2997</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792aec8bf7b5a59cb1e1f66144d23f637135"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aec8bf7b5a59cb1e1f66144d23f637135">AST_REDIRECTING_FROM_SUBADDRESS_ODD_EVEN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09245">channel.c:9245</a></div></div>
<div class="ttc" id="structset__format__access_html_aa7d4a9c07bac6b02adae2c3867804af4"><div class="ttname"><a href="../../d0/d0f/structset__format__access.html#aa7d4a9c07bac6b02adae2c3867804af4">set_format_access::setoption</a></div><div class="ttdeci">int setoption</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05655">channel.c:5655</a></div></div>
<div class="ttc" id="structast__party__subaddress_html_a141590e40aa10259d3c0bc722725e7ad"><div class="ttname"><a href="../../d7/d41/structast__party__subaddress.html#a141590e40aa10259d3c0bc722725e7ad">ast_party_subaddress::odd_even_indicator</a></div><div class="ttdeci">unsigned char odd_even_indicator</div><div class="ttdoc">TRUE if odd number of address signals. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00327">channel.h:327</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390acb9fefa4f5e5e4b3f7f12c3483b33ee6"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390acb9fefa4f5e5e4b3f7f12c3483b33ee6">AST_CONTROL_END_OF_Q</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00306">include/asterisk/frame.h:306</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a9caa677def8fa97666646d9e2e607b7c"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a9caa677def8fa97666646d9e2e607b7c">transfer</a></div><div class="ttdeci">static int transfer</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00194">chan_mgcp.c:194</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a32e9dbe9416e847668084be16d4698c9"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a32e9dbe9416e847668084be16d4698c9">AST_CONTROL_STREAM_SUSPEND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00334">include/asterisk/frame.h:334</a></div></div>
<div class="ttc" id="bridge__features_8h_html_ad3debd15062b4b9463e5703724dd9a1f"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#ad3debd15062b4b9463e5703724dd9a1f">ast_bridge_features_destroy</a></div><div class="ttdeci">void ast_bridge_features_destroy(struct ast_bridge_features *features)</div><div class="ttdoc">Destroy an allocated bridge features struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03741">bridge.c:3741</a></div></div>
<div class="ttc" id="structast__party__id__ies_html_a5d80ef8e2a5b2b25e104da6f43fd1ce0"><div class="ttname"><a href="../../d5/d23/structast__party__id__ies.html#a5d80ef8e2a5b2b25e104da6f43fd1ce0">ast_party_id_ies::name</a></div><div class="ttdeci">struct ast_party_name_ies name</div><div class="ttdoc">Subscriber name ies. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08644">channel.c:8644</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ac6bea760bc75e449a80b8cc28bf9a2feaf48b0f9659597810ecc30d7ce73fa5e8"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ac6bea760bc75e449a80b8cc28bf9a2feaf48b0f9659597810ecc30d7ce73fa5e8">AST_FRFLAG_REQUEUED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00145">include/asterisk/frame.h:145</a></div></div>
<div class="ttc" id="channel_8h_html_a6b4548259e61f691c654aed0025e5502"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6b4548259e61f691c654aed0025e5502">ast_channel_readtrans</a></div><div class="ttdeci">struct ast_trans_pvt * ast_channel_readtrans(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00753">channel_internal_api.c:753</a></div></div>
<div class="ttc" id="bridge_8h_html_a08a41371fb4f020d645a0e6f50434005"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a08a41371fb4f020d645a0e6f50434005">ast_bridge_peer</a></div><div class="ttdeci">struct ast_channel * ast_bridge_peer(struct ast_bridge *bridge, struct ast_channel *chan)</div><div class="ttdoc">Get the channel&amp;#39;s bridge peer only if the bridge is two-party. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l04142">bridge.c:4142</a></div></div>
<div class="ttc" id="channel_8h_html_a31a465197a7766c3d0bb9f65f0a4418fa0e613bbe5c524be8c225eff98782e3a8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a31a465197a7766c3d0bb9f65f0a4418fa0e613bbe5c524be8c225eff98782e3a8">AST_CHANNEL_REQUESTOR_BRIDGE_PEER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01479">channel.h:1479</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a08b21da6da6f41c2b10d83a84fa2e016"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a08b21da6da6f41c2b10d83a84fa2e016">AST_REDIRECTING_PRIV_FROM_SUBADDRESS_ODD_EVEN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09305">channel.c:9305</a></div></div>
<div class="ttc" id="channel_8c_html_a3212119ca5acac4c9ec6051987380876adaaecd6294b07e9205d24b19beb69ebf"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876adaaecd6294b07e9205d24b19beb69ebf">AST_CONNECTED_LINE_NAME_VALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08773">channel.c:8773</a></div></div>
<div class="ttc" id="format__cache_8h_html_a7c28268f53182d9b82ddd6a4e7c91fa2"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a7c28268f53182d9b82ddd6a4e7c91fa2">ast_format_none</a></div><div class="ttdeci">struct ast_format * ast_format_none</div><div class="ttdoc">Built-in &quot;null&quot; format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00251">format_cache.c:251</a></div></div>
<div class="ttc" id="structast__set__party__caller_html"><div class="ttname"><a href="../../d7/d91/structast__set__party__caller.html">ast_set_party_caller</a></div><div class="ttdoc">Indicate what information in ast_party_caller should be set. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00441">channel.h:441</a></div></div>
<div class="ttc" id="channel_8c_html_a2da3b985de9a2d15f794d499bf94a184"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a2da3b985de9a2d15f794d499bf94a184">ast_raw_answer_with_stream_topology</a></div><div class="ttdeci">int ast_raw_answer_with_stream_topology(struct ast_channel *chan, struct ast_stream_topology *topology)</div><div class="ttdoc">Answer a channel passing in a stream topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02648">channel.c:2648</a></div></div>
<div class="ttc" id="channel_8h_html_a26f2d5034ef36d4d140781529f1f6f6b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a26f2d5034ef36d4d140781529f1f6f6b">ast_channel_callid_cleanup</a></div><div class="ttdeci">void ast_channel_callid_cleanup(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01068">channel_internal_api.c:1068</a></div></div>
<div class="ttc" id="channel_8h_html_a5cb3a7bfd21b59042d33965a87164bdb"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a5cb3a7bfd21b59042d33965a87164bdb">ast_stream_topology_changed_external</a></div><div class="ttdeci">static const char ast_stream_topology_changed_external[]</div><div class="ttdoc">Set as the change source reason when a channel stream topology has been changed externally as a resul...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00222">channel.h:222</a></div></div>
<div class="ttc" id="channel_8h_html_a84fb9b8eb7be6f162fec6779e250c27b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a84fb9b8eb7be6f162fec6779e250c27b">AST_ALERT_FD</a></div><div class="ttdeci">#define AST_ALERT_FD</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00201">channel.h:201</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390af9665e40f4c9ef6fcfc3e179c6986c41"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af9665e40f4c9ef6fcfc3e179c6986c41">AST_CONTROL_PVT_CAUSE_CODE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00310">include/asterisk/frame.h:310</a></div></div>
<div class="ttc" id="structtonepair__def_html"><div class="ttname"><a href="../../dd/d61/structtonepair__def.html">tonepair_def</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07562">channel.c:7562</a></div></div>
<div class="ttc" id="lock_8h_html_a8a3bd496edfec04a95683ace66676200"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a></div><div class="ttdeci">int ast_atomic_fetchadd_int(volatile int *p, int v)</div><div class="ttdoc">Atomically add v to *p and return the previous value of *p. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00755">lock.h:755</a></div></div>
<div class="ttc" id="datastore_8h_html_aee27286888b30c6448a9bce928040a14"><div class="ttname"><a href="../../d9/db6/datastore_8h.html#aee27286888b30c6448a9bce928040a14">ast_datastore_free</a></div><div class="ttdeci">int ast_datastore_free(struct ast_datastore *datastore)</div><div class="ttdoc">Free a data store object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d7a/datastore_8c_source.html#l00068">datastore.c:68</a></div></div>
<div class="ttc" id="structoutgoing__helper_html_a134fe67053d035e763d6cf99916c1bf8"><div class="ttname"><a href="../../d9/dc0/structoutgoing__helper.html#a134fe67053d035e763d6cf99916c1bf8">outgoing_helper::vars</a></div><div class="ttdeci">struct ast_variable * vars</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01113">channel.h:1113</a></div></div>
<div class="ttc" id="channel_8c_html_a7457a2311fc74cc4a5b0aa0d2001835c"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a7457a2311fc74cc4a5b0aa0d2001835c">global_fin</a></div><div class="ttdeci">unsigned long global_fin</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00095">channel.c:95</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a11a85e8e51317d5b57317a761c8e6921"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a11a85e8e51317d5b57317a761c8e6921">AST_REDIRECTING_FROM_NUMBER_PLAN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09235">channel.c:9235</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792ae45642d62d251e74f63046bef953c5c9"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ae45642d62d251e74f63046bef953c5c9">AST_REDIRECTING_FROM_NUMBER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09233">channel.c:9233</a></div></div>
<div class="ttc" id="structplc__ds_html"><div class="ttname"><a href="../../d0/d8a/structplc__ds.html">plc_ds</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05073">channel.c:5073</a></div></div>
<div class="ttc" id="translate_8h_html_a67f43da0468e888ba70f0d001499e3e7"><div class="ttname"><a href="../../db/d39/translate_8h.html#a67f43da0468e888ba70f0d001499e3e7">ast_translator_best_choice</a></div><div class="ttdeci">int ast_translator_best_choice(struct ast_format_cap *dst_cap, struct ast_format_cap *src_cap, struct ast_format **dst_fmt_out, struct ast_format **src_fmt_out)</div><div class="ttdoc">Chooses the best translation path. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l01385">translate.c:1385</a></div></div>
<div class="ttc" id="structbackends_html"><div class="ttname"><a href="../../d3/da8/structbackends.html">backends</a></div><div class="ttdoc">the list of registered channel types </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00121">channel.c:121</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a69e90e401aa3da48a6eef5139727cbb3"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a69e90e401aa3da48a6eef5139727cbb3">ast_app_group_update</a></div><div class="ttdeci">int ast_app_group_update(struct ast_channel *oldchan, struct ast_channel *newchan)</div><div class="ttdoc">Update all group counting for a channel to a new one. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02143">main/app.c:2143</a></div></div>
<div class="ttc" id="say_8h_html_a3c16ca1c3b98ecbc423b7cb84bab09fc"><div class="ttname"><a href="../../db/dce/say_8h.html#a3c16ca1c3b98ecbc423b7cb84bab09fc">ast_say_money_str_full</a></div><div class="ttdeci">SAY_EXTERN int(* ast_say_money_str_full)(struct ast_channel *chan, const char *num, const char *ints, const char *lang, int audiofd, int ctrlfd) SAY_INIT(ast_say_money_str_full)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dce/say_8h_source.html#l00151">say.h:151</a></div></div>
<div class="ttc" id="pbx_8h_html_a98c5425b90ec7c5e136a40f529170b1b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a></div><div class="ttdeci">const char * pbx_builtin_getvar_helper(struct ast_channel *chan, const char *name)</div><div class="ttdoc">Return a pointer to the value of the corresponding channel variable. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_variables.c:1000</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a542fff7c60e1adb2cfdb8ec7374f405a"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a542fff7c60e1adb2cfdb8ec7374f405a">AST_REDIRECTING_ORIG_NAME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09272">channel.c:9272</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="mod__format_8h_html"><div class="ttname"><a href="../../d7/d5d/mod__format_8h.html">mod_format.h</a></div><div class="ttdoc">Header for providers of file and format handling routines. Clients of these routines should include &quot;...</div></div>
<div class="ttc" id="channel_8c_html_aed0df108a26552c41985e4762e4993d8"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aed0df108a26552c41985e4762e4993d8">ast_change_name</a></div><div class="ttdeci">void ast_change_name(struct ast_channel *chan, const char *newname)</div><div class="ttdoc">Change channel name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06854">channel.c:6854</a></div></div>
<div class="ttc" id="stream_8h_html"><div class="ttname"><a href="../../d8/d95/stream_8h.html">stream.h</a></div><div class="ttdoc">Media Stream API. </div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390aef1bbb9ea8c75f2833076b583f99cdec"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aef1bbb9ea8c75f2833076b583f99cdec">AST_CONTROL_RECORD_SUSPEND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00341">include/asterisk/frame.h:341</a></div></div>
<div class="ttc" id="channel_8c_html_a6ce892974f59537bda03a71319b452e2"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a6ce892974f59537bda03a71319b452e2">ast_channel_datastore_inherit</a></div><div class="ttdeci">int ast_channel_datastore_inherit(struct ast_channel *from, struct ast_channel *to)</div><div class="ttdoc">Inherit datastores from a parent to a child. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02373">channel.c:2373</a></div></div>
<div class="ttc" id="structast__datastore_html_a2daadcdbac635c83b7bfc6375b4c9be4"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html#a2daadcdbac635c83b7bfc6375b4c9be4">ast_datastore::uid</a></div><div class="ttdeci">const char * uid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00069">datastore.h:69</a></div></div>
<div class="ttc" id="channel_8c_html_a2997bb4d30b2f5111f3f94e394c667ff"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a2997bb4d30b2f5111f3f94e394c667ff">ast_channel_set_caller</a></div><div class="ttdeci">void ast_channel_set_caller(struct ast_channel *chan, const struct ast_party_caller *caller, const struct ast_set_party_caller *update)</div><div class="ttdoc">Set the caller id information in the Asterisk channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07459">channel.c:7459</a></div></div>
<div class="ttc" id="channel_8c_html_a68c37ab24b0213bf4489d9fb30fd1517"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a68c37ab24b0213bf4489d9fb30fd1517">ast_party_dialed_init</a></div><div class="ttdeci">void ast_party_dialed_init(struct ast_party_dialed *init)</div><div class="ttdoc">Initialize the given dialed structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01928">channel.c:1928</a></div></div>
<div class="ttc" id="channel_8c_html_a34868a75370184c282bea3a780a5b020"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a34868a75370184c282bea3a780a5b020">does_id_conflict</a></div><div class="ttdeci">static int does_id_conflict(const char *uniqueid)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00717">channel.c:717</a></div></div>
<div class="ttc" id="channel_8h_html_a6634543669b0cd08b6699a8d56fbd2f0"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6634543669b0cd08b6699a8d56fbd2f0">ast_channel_writetrans_set</a></div><div class="ttdeci">void ast_channel_writetrans_set(struct ast_channel *chan, struct ast_trans_pvt *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00765">channel_internal_api.c:765</a></div></div>
<div class="ttc" id="channel_8h_html_a65123e0ee89c498bdade937bdfb66edea2ff910f90238d015ce4b2f43247f7bed"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a65123e0ee89c498bdade937bdfb66edea2ff910f90238d015ce4b2f43247f7bed">AST_CHANNEL_ERROR_ID_EXISTS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l05024">channel.h:5024</a></div></div>
<div class="ttc" id="stringfields_8h_html"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html">stringfields.h</a></div></div>
<div class="ttc" id="utils_8h_html"><div class="ttname"><a href="../../d5/d60/utils_8h.html">utils.h</a></div><div class="ttdoc">Utility functions. </div></div>
<div class="ttc" id="channel_8c_html_a1ff1c62b6d50823da93a920575c9c0c9"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a1ff1c62b6d50823da93a920575c9c0c9">ast_channel_datastore_remove</a></div><div class="ttdeci">int ast_channel_datastore_remove(struct ast_channel *chan, struct ast_datastore *datastore)</div><div class="ttdoc">Remove a datastore from a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02399">channel.c:2399</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a50b7fe33bba67b74dd7b746539e81000"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a50b7fe33bba67b74dd7b746539e81000">AST_CONTROL_PROCEEDING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00292">include/asterisk/frame.h:292</a></div></div>
<div class="ttc" id="callerid_8h_html_a405736564654ff0e5a98d4be4c57b16c"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a405736564654ff0e5a98d4be4c57b16c">AST_PRES_RESTRICTED</a></div><div class="ttdeci">#define AST_PRES_RESTRICTED</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00325">callerid.h:325</a></div></div>
<div class="ttc" id="channel_8c_html_aef2af15a597c948e97628da6c5c84f28"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a></div><div class="ttdeci">int ast_indicate(struct ast_channel *chan, int condition)</div><div class="ttdoc">Indicates condition of channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04322">channel.c:4322</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a54e6485c076a37a2ecf781ddebc662ff"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a54e6485c076a37a2ecf781ddebc662ff">AST_OPTION_FORMAT_WRITE</a></div><div class="ttdeci">#define AST_OPTION_FORMAT_WRITE</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00488">include/asterisk/frame.h:488</a></div></div>
<div class="ttc" id="channel_8c_html_afc48c9639130c291aa835543e0ae1398"><div class="ttname"><a href="../../d4/d28/channel_8c.html#afc48c9639130c291aa835543e0ae1398">ast_party_redirecting_reason_free</a></div><div class="ttdeci">void ast_party_redirecting_reason_free(struct ast_party_redirecting_reason *doomed)</div><div class="ttdoc">Destroy the redirecting reason contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02116">channel.c:2116</a></div></div>
<div class="ttc" id="channel_8c_html_a33c67949956a67dc911ddca7acc4158e"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a33c67949956a67dc911ddca7acc4158e">set_security_requirements</a></div><div class="ttdeci">static int set_security_requirements(const struct ast_channel *requestor, struct ast_channel *out)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06269">channel.c:6269</a></div></div>
<div class="ttc" id="channel_8c_html_ae578b94d61d4c2aed2c960c8ac288f2b"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ae578b94d61d4c2aed2c960c8ac288f2b">state2str_threadbuf</a></div><div class="ttdeci">static struct ast_threadstorage state2str_threadbuf</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00097">channel.c:97</a></div></div>
<div class="ttc" id="channel_8c_html_a0dd78a3af30f7a1bfe9a89e3f806dd8c"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a0dd78a3af30f7a1bfe9a89e3f806dd8c">ast_call_forward</a></div><div class="ttdeci">struct ast_channel * ast_call_forward(struct ast_channel *caller, struct ast_channel *orig, int *timeout, struct ast_format_cap *cap, struct outgoing_helper *oh, int *outstate)</div><div class="ttdoc">Forwards a call to a new channel specified by the original channel&amp;#39;s call_forward str...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05988">channel.c:5988</a></div></div>
<div class="ttc" id="astobj2_8h_html_af236ed10cd1eddcbad0579ed0cf9f4c5"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#af236ed10cd1eddcbad0579ed0cf9f4c5">ao2_prnt_fn</a></div><div class="ttdeci">void() ao2_prnt_fn(void *where, const char *fmt,...)</div><div class="ttdoc">Print output. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01442">astobj2.h:1442</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="channel_8c_html_a84a85d871e634a86b2421ac9354b50c6"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a84a85d871e634a86b2421ac9354b50c6">ast_party_caller_set_init</a></div><div class="ttdeci">void ast_party_caller_set_init(struct ast_party_caller *init, const struct ast_party_caller *guide)</div><div class="ttdoc">Initialize the given caller structure using the given guide for a set update operation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01999">channel.c:1999</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a2457835b26aa09c41c6ecf633f95f775a4b2dcef6c6da53104278190e521d7b1c"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a2457835b26aa09c41c6ecf633f95f775a4b2dcef6c6da53104278190e521d7b1c">AST_FRAME_READ_ACTION_SEND_TEXT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00353">include/asterisk/frame.h:353</a></div></div>
<div class="ttc" id="structast__party__id__ies_html"><div class="ttname"><a href="../../d5/d23/structast__party__id__ies.html">ast_party_id_ies</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08642">channel.c:8642</a></div></div>
<div class="ttc" id="channel_8c_html_a40dbdd9febe439782b273c41c14560c3"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a40dbdd9febe439782b273c41c14560c3">suppress_datastore_voice</a></div><div class="ttdeci">static const struct ast_datastore_info suppress_datastore_voice</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10910">channel.c:10910</a></div></div>
<div class="ttc" id="channel_8h_html_ae616309e9eba6a1b009a0466bada50cc"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae616309e9eba6a1b009a0466bada50cc">ast_channel_whentohangup</a></div><div class="ttdeci">struct timeval * ast_channel_whentohangup(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00928">channel_internal_api.c:928</a></div></div>
<div class="ttc" id="channel_8h_html_aaced431562223538a94e0e69cf94151a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a></div><div class="ttdeci">struct ast_format * ast_channel_readformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00856">channel_internal_api.c:856</a></div></div>
<div class="ttc" id="manager_8h_html_ad6a2ad9ec5b951d49f796d1534c70b5e"><div class="ttname"><a href="../../db/d45/manager_8h.html#ad6a2ad9ec5b951d49f796d1534c70b5e">ast_manager_event</a></div><div class="ttdeci">#define ast_manager_event(chan, category, event, contents,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00250">manager.h:250</a></div></div>
<div class="ttc" id="structast__set__party__redirecting_html_a45899db729b8fd0b9193505a58b3baa8"><div class="ttname"><a href="../../de/df8/structast__set__party__redirecting.html#a45899db729b8fd0b9193505a58b3baa8">ast_set_party_redirecting::from</a></div><div class="ttdeci">struct ast_set_party_id from</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00560">channel.h:560</a></div></div>
<div class="ttc" id="channel_8c_html_a7a6a6c2ccad3e3fb8a4a9e242568b408"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a7a6a6c2ccad3e3fb8a4a9e242568b408">ast_channel_suppress</a></div><div class="ttdeci">int ast_channel_suppress(struct ast_channel *chan, unsigned int direction, enum ast_frame_type frametype)</div><div class="ttdoc">Suppress passing of a frame type on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10978">channel.c:10978</a></div></div>
<div class="ttc" id="structast__party__redirecting_html_ad91368b8b243737d0a7fb6644f35809e"><div class="ttname"><a href="../../df/d44/structast__party__redirecting.html#ad91368b8b243737d0a7fb6644f35809e">ast_party_redirecting::orig</a></div><div class="ttdeci">struct ast_party_id orig</div><div class="ttdoc">Who originally redirected the call (Sent to the party the call is redirected toward) ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00525">channel.h:525</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a7334c9d27a6d70fe7c85b60b864788fc"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a7334c9d27a6d70fe7c85b60b864788fc">AST_CONTROL_T38_PARAMETERS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00301">include/asterisk/frame.h:301</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5ab5b2bec9425dd0cfc789d96ef229cb3a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ab5b2bec9425dd0cfc789d96ef229cb3a">AST_FLAG_BLOCKING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00986">channel.h:986</a></div></div>
<div class="ttc" id="channel_8h_html_a1460c260bdadfa226b95598a7d9d44a7"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1460c260bdadfa226b95598a7d9d44a7">ast_channel_stream_set</a></div><div class="ttdeci">void ast_channel_stream_set(struct ast_channel *chan, struct ast_filestream *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00625">channel_internal_api.c:625</a></div></div>
<div class="ttc" id="channel_8h_html_af0566a4937a5bb1323825e4ef89c0e5a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af0566a4937a5bb1323825e4ef89c0e5a">ast_channel_tech_set</a></div><div class="ttdeci">void ast_channel_tech_set(struct ast_channel *chan, const struct ast_channel_tech *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00773">channel_internal_api.c:773</a></div></div>
<div class="ttc" id="test__amihooks_8c_html_a5992b274cfdcacdbc1fa8347fd01ebde"><div class="ttname"><a href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a></div><div class="ttdeci">int done</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbf/test__amihooks_8c_source.html#l00048">test_amihooks.c:48</a></div></div>
<div class="ttc" id="structast__channel__tech_html_a87d560c307b0736b475f5893299db06e"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#a87d560c307b0736b475f5893299db06e">ast_channel_tech::call</a></div><div class="ttdeci">int(*const call)(struct ast_channel *chan, const char *addr, int timeout)</div><div class="ttdoc">Make a call. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00702">channel.h:702</a></div></div>
<div class="ttc" id="channel_8c_html_aee83e23058d0a4111fda1f506cbda107"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aee83e23058d0a4111fda1f506cbda107">ast_get_group</a></div><div class="ttdeci">ast_group_t ast_get_group(const char *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07718">channel.c:7718</a></div></div>
<div class="ttc" id="channel_8c_html_a4fa5db2ad03751a0d3bca7b200536115"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a4fa5db2ad03751a0d3bca7b200536115">ast_channel_hash_cb</a></div><div class="ttdeci">static int ast_channel_hash_cb(const void *obj, const int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07888">channel.c:7888</a></div></div>
<div class="ttc" id="framehook_8h_html_a311b1ae4fd0c1c11f2bb14814183c08b"><div class="ttname"><a href="../../db/d3c/framehook_8h.html#a311b1ae4fd0c1c11f2bb14814183c08b">ast_framehook_list_contains_no_active_of_type</a></div><div class="ttdeci">int ast_framehook_list_contains_no_active_of_type(struct ast_framehook_list *framehooks, enum ast_frame_type type)</div><div class="ttdoc">Determine if a framehook list is free of active framehooks consuming a specific type of frame...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dac/framehook_8c_source.html#l00287">framehook.c:287</a></div></div>
<div class="ttc" id="structchanlist_html_a65027657e37836ff7a5b1013cbbc7895"><div class="ttname"><a href="../../dd/d6f/structchanlist.html#a65027657e37836ff7a5b1013cbbc7895">chanlist::next</a></div><div class="ttdeci">struct chanlist * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d12/app__dial_8c_source.html#l00797">app_dial.c:797</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="channel_8c_html_a739f3fa9beceb4dbb98043e3c1acda46"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a739f3fa9beceb4dbb98043e3c1acda46">plc_ds_destroy</a></div><div class="ttdeci">static void plc_ds_destroy(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05086">channel.c:5086</a></div></div>
<div class="ttc" id="compiler_8h_html_ad1d7bd3ef291aecd510650e37670e001"><div class="ttname"><a href="../../d4/dd1/compiler_8h.html#ad1d7bd3ef291aecd510650e37670e001">attribute_const</a></div><div class="ttdeci">#define attribute_const</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd1/compiler_8h_source.html#l00041">compiler.h:41</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="channel_8h_html_a00f1b53d822255e76aaa4c3694fbbc89"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a00f1b53d822255e76aaa4c3694fbbc89">ast_channel_internal_alertpipe_swap</a></div><div class="ttdeci">void ast_channel_internal_alertpipe_swap(struct ast_channel *chan1, struct ast_channel *chan2)</div><div class="ttdoc">Swap the interal alertpipe between two channels. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01155">channel_internal_api.c:1155</a></div></div>
<div class="ttc" id="channel_8c_html_abb8e171cc4703cbc7f4fbc7b18b626a1"><div class="ttname"><a href="../../d4/d28/channel_8c.html#abb8e171cc4703cbc7f4fbc7b18b626a1">surrogate_tech</a></div><div class="ttdeci">static const struct ast_channel_tech surrogate_tech</div><div class="ttdoc">Channel technology used to extract a channel from a running application. The channel created with thi...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00702">channel.c:702</a></div></div>
<div class="ttc" id="channel_8c_html_a50330bce9fe31e3191fbaad479054bb7"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a50330bce9fe31e3191fbaad479054bb7">deactivate_silence_generator</a></div><div class="ttdeci">static int deactivate_silence_generator(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08289">channel.c:8289</a></div></div>
<div class="ttc" id="structast__endpoint_html"><div class="ttname"><a href="../../d4/df2/structast__endpoint.html">ast_endpoint</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00054">main/endpoints.c:54</a></div></div>
<div class="ttc" id="audiohook_8h_html_a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a56916f7012e7fe0ec9b6dd4e4c0e2a65">AST_AUDIOHOOK_DIRECTION_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00049">audiohook.h:49</a></div></div>
<div class="ttc" id="framehook_8h_html_a3ca711dc98d26e881936c855f0ae3d77"><div class="ttname"><a href="../../db/d3c/framehook_8h.html#a3ca711dc98d26e881936c855f0ae3d77">ast_framehook_attach</a></div><div class="ttdeci">int ast_framehook_attach(struct ast_channel *chan, struct ast_framehook_interface *i)</div><div class="ttdoc">Attach an framehook onto a channel for frame interception. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dac/framehook_8c_source.html#l00132">framehook.c:132</a></div></div>
<div class="ttc" id="channel_8c_html_ac238a36ed985c6476418329fcdbb7475"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ac238a36ed985c6476418329fcdbb7475">indicate_data_internal</a></div><div class="ttdeci">static int indicate_data_internal(struct ast_channel *chan, int _condition, const void *data, size_t datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04515">channel.c:4515</a></div></div>
<div class="ttc" id="channel_8c_html_a940e8f4562c127096b0f4ba7d25387bd"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a940e8f4562c127096b0f4ba7d25387bd">ast_party_caller_free</a></div><div class="ttdeci">void ast_party_caller_free(struct ast_party_caller *doomed)</div><div class="ttdoc">Destroy the caller party contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02015">channel.c:2015</a></div></div>
<div class="ttc" id="structast__party__caller_html_a8791d240f8a9c2dc271a1c8542cfe8cc"><div class="ttname"><a href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">ast_party_caller::id</a></div><div class="ttdeci">struct ast_party_id id</div><div class="ttdoc">Caller party ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00421">channel.h:421</a></div></div>
<div class="ttc" id="channel_8c_html_a28f99b0e719f64be0550301a70a40936"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a28f99b0e719f64be0550301a70a40936">suppress_framehook_fixup_cb</a></div><div class="ttdeci">static void suppress_framehook_fixup_cb(void *data, int framehook_id, struct ast_channel *old_chan, struct ast_channel *new_chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10926">channel.c:10926</a></div></div>
<div class="ttc" id="channel_8c_html_a0fe98273fc14eb880f4cfdc71cdec1b7"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a0fe98273fc14eb880f4cfdc71cdec1b7">ast_party_name_init</a></div><div class="ttdeci">void ast_party_name_init(struct ast_party_name *init)</div><div class="ttdoc">Initialize the given name structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01591">channel.c:1591</a></div></div>
<div class="ttc" id="structast__generator_html_aff59cfcef45fdeaffbe4ab20e2089ffd"><div class="ttname"><a href="../../de/d2a/structast__generator.html#aff59cfcef45fdeaffbe4ab20e2089ffd">ast_generator::write_format_change</a></div><div class="ttdeci">void(* write_format_change)(struct ast_channel *chan, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00239">channel.h:239</a></div></div>
<div class="ttc" id="channel_8c_html_aa9a1d01546e0fc0047e56ba589790b6f"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aa9a1d01546e0fc0047e56ba589790b6f">ast_set_hangupsource</a></div><div class="ttdeci">void ast_set_hangupsource(struct ast_channel *chan, const char *source, int force)</div><div class="ttdoc">Set the source of the hangup in this channel and it&amp;#39;s bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02504">channel.c:2504</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a3d91bab33583f560197e21532a02a895"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a3d91bab33583f560197e21532a02a895">AST_FRAME_HTML</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00118">include/asterisk/frame.h:118</a></div></div>
<div class="ttc" id="structast__control__read__action__payload_html"><div class="ttname"><a href="../../d6/d4b/structast__control__read__action__payload.html">ast_control_read_action_payload</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00357">include/asterisk/frame.h:357</a></div></div>
<div class="ttc" id="causes_8h_html_ac9e231ce7c9b95a3671a78a1549e913f"><div class="ttname"><a href="../../d4/da3/causes_8h.html#ac9e231ce7c9b95a3671a78a1549e913f">AST_CAUSE_RESPONSE_TO_STATUS_ENQUIRY</a></div><div class="ttdeci">#define AST_CAUSE_RESPONSE_TO_STATUS_ENQUIRY</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00117">causes.h:117</a></div></div>
<div class="ttc" id="channel_8c_html_a2acec01f2fddd8ca494d874003815cf7"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a2acec01f2fddd8ca494d874003815cf7">ast_moh_start</a></div><div class="ttdeci">int ast_moh_start(struct ast_channel *chan, const char *mclass, const char *interpclass)</div><div class="ttdoc">Turn on music on hold on a given channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07866">channel.c:7866</a></div></div>
<div class="ttc" id="channel_8c_html_a5998887722302a1008c0a705cbeb5eaf"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a5998887722302a1008c0a705cbeb5eaf">ast_set_write_format_from_cap</a></div><div class="ttdeci">int ast_set_write_format_from_cap(struct ast_channel *chan, struct ast_format_cap *cap)</div><div class="ttdoc">Sets write format on channel chan Set write format for channel to whichever component of &quot;format&quot; is ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05908">channel.c:5908</a></div></div>
<div class="ttc" id="structtonepair__def_html_ac6e4b2a3cf932b33832d4e4e4e7cd0de"><div class="ttname"><a href="../../dd/d61/structtonepair__def.html#ac6e4b2a3cf932b33832d4e4e4e7cd0de">tonepair_def::duration</a></div><div class="ttdeci">int duration</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07565">channel.c:7565</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="structmanager__channel__variable_html"><div class="ttname"><a href="../../d7/d07/structmanager__channel__variable.html">manager_channel_variable</a></div><div class="ttdoc">List of channel variables to append to all channel-related events. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07925">channel.c:7925</a></div></div>
<div class="ttc" id="astobj2_8h_html_a4b8c1cca9dace1cf1bbadc5039f3dedf"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a4b8c1cca9dace1cf1bbadc5039f3dedf">ao2_container_unregister</a></div><div class="ttdeci">void ao2_container_unregister(const char *name)</div><div class="ttdoc">Unregister a container for CLI stats and integrity check. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00985">astobj2_container.c:985</a></div></div>
<div class="ttc" id="channel_8c_html_a40230121458bf94386b685b2e3270880"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a40230121458bf94386b685b2e3270880">ast_party_subaddress_init</a></div><div class="ttdeci">void ast_party_subaddress_init(struct ast_party_subaddress *init)</div><div class="ttdoc">Initialize the given subaddress structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01697">channel.c:1697</a></div></div>
<div class="ttc" id="strings_8h_html_a68ab38eef5d5958cae536ba7589093cc"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a68ab38eef5d5958cae536ba7589093cc">ast_str_tmp</a></div><div class="ttdeci">#define ast_str_tmp(init_len, __expr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01136">strings.h:1136</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a70a2b40aa2ec0f6f0e7378df7a0810db"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a70a2b40aa2ec0f6f0e7378df7a0810db">AST_STATE_PRERING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00045">channelstate.h:45</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ggae4d6df086e192d70f732e3ce8a5a2210ac744bafb6ef5c6a5369e15ef08810016"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ggae4d6df086e192d70f732e3ce8a5a2210ac744bafb6ef5c6a5369e15ef08810016">AST_CHANNEL_SNAPSHOT_INVALIDATE_CONNECTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00041">stasis_channels.h:41</a></div></div>
<div class="ttc" id="channel_8c_html_abc7ac58271a860c92fee033afb031e8d"><div class="ttname"><a href="../../d4/d28/channel_8c.html#abc7ac58271a860c92fee033afb031e8d">ast_party_number_free</a></div><div class="ttdeci">void ast_party_number_free(struct ast_party_number *doomed)</div><div class="ttdoc">Destroy the party number contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01691">channel.c:1691</a></div></div>
<div class="ttc" id="channel_8h_html_ad89ab3133d87a496f63da917148d02be"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ad89ab3133d87a496f63da917148d02be">ast_channel_readq</a></div><div class="ttdeci">struct ast_readq_list * ast_channel_readq(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00876">channel_internal_api.c:876</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aacc5f6b7c25e361d11d40137fd55a8e8"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aacc5f6b7c25e361d11d40137fd55a8e8">AST_RWLIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_HEAD</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00717">linkedlists.h:717</a></div></div>
<div class="ttc" id="channel_8c_html_a9c63fff1d736568d1ee332dd7ea502bd"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a></div><div class="ttdeci">int ast_check_hangup(struct ast_channel *chan)</div><div class="ttdoc">Checks to see if a channel is needing hang up. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00445">channel.c:445</a></div></div>
<div class="ttc" id="channel_8c_html_a092d4e67b0bda0f99b02a1534ee75408"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a092d4e67b0bda0f99b02a1534ee75408">ast_print_group</a></div><div class="ttdeci">char * ast_print_group(char *buf, int buflen, ast_group_t group)</div><div class="ttdoc">Print call group and pickup group . </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08133">channel.c:8133</a></div></div>
<div class="ttc" id="channel_8h_html_a3c54600ed92c29ddb3c9c7abb1418063"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3c54600ed92c29ddb3c9c7abb1418063">ast_channel_internal_swap_endpoint_forward</a></div><div class="ttdeci">void ast_channel_internal_swap_endpoint_forward(struct ast_channel *a, struct ast_channel *b)</div><div class="ttdoc">Swap endpoint_forward between two channels. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01447">channel_internal_api.c:1447</a></div></div>
<div class="ttc" id="structast__datastore__info_html_a330ef558cb83d02af90a40e01fc83e6b"><div class="ttname"><a href="../../d9/dfb/structast__datastore__info.html#a330ef558cb83d02af90a40e01fc83e6b">ast_datastore_info::chan_fixup</a></div><div class="ttdeci">void(* chan_fixup)(void *data, struct ast_channel *old_chan, struct ast_channel *new_chan)</div><div class="ttdoc">Fix up channel references on the masquerading channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00050">datastore.h:50</a></div></div>
<div class="ttc" id="channel_8c_html_aa0aa3114b7071c705751cdf91827a8b3"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aa0aa3114b7071c705751cdf91827a8b3">kill_hangup</a></div><div class="ttdeci">static int kill_hangup(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00419">channel.c:419</a></div></div>
<div class="ttc" id="channel_8c_html_acea4077a84f9d8ffac3c41bf660e3219"><div class="ttname"><a href="../../d4/d28/channel_8c.html#acea4077a84f9d8ffac3c41bf660e3219">ast_indicate_data</a></div><div class="ttdeci">int ast_indicate_data(struct ast_channel *chan, int _condition, const void *data, size_t datalen)</div><div class="ttdoc">Indicates condition of channel, with payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04698">channel.c:4698</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_adece183191b0e700e039e59101e06105"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">ast_frame_subclass::integer</a></div><div class="ttdeci">int integer</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">include/asterisk/frame.h:152</a></div></div>
<div class="ttc" id="astobj2_8h_html_abdb952d2373503555d96f02f130c5770"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#abdb952d2373503555d96f02f130c5770">ao2_container_register</a></div><div class="ttdeci">int ao2_container_register(const char *name, struct ao2_container *self, ao2_prnt_obj_fn *prnt_obj)</div><div class="ttdoc">Register a container for CLI stats and integrity check. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00958">astobj2_container.c:958</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="channel_8c_html_a81c6495eb2b18bfd179ca7282f77e66e"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a81c6495eb2b18bfd179ca7282f77e66e">ast_party_redirecting_reason_init</a></div><div class="ttdeci">void ast_party_redirecting_reason_init(struct ast_party_redirecting_reason *init)</div><div class="ttdoc">Initialize the given redirecting reason structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02079">channel.c:2079</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structoutgoing__helper_html_a762fadb5a38f004f5f4adf71176448e9"><div class="ttname"><a href="../../d9/dc0/structoutgoing__helper.html#a762fadb5a38f004f5f4adf71176448e9">outgoing_helper::exten</a></div><div class="ttdeci">const char * exten</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01107">channel.h:1107</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a28cd8e9f9005e25624f993d6edd46755"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a28cd8e9f9005e25624f993d6edd46755">AST_CONTROL_OFFHOOK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00284">include/asterisk/frame.h:284</a></div></div>
<div class="ttc" id="channel_8h_html_af4d1b140188a723edd8c3c34ba18d8a9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af4d1b140188a723edd8c3c34ba18d8a9">ast_channel_masq_set</a></div><div class="ttdeci">void ast_channel_masq_set(struct ast_channel *chan, struct ast_channel *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00601">channel_internal_api.c:601</a></div></div>
<div class="ttc" id="channel_8h_html_a921a2d48faa9ed99a59d33e7aefa7888"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a921a2d48faa9ed99a59d33e7aefa7888">ast_channel_set_rawreadformat</a></div><div class="ttdeci">void ast_channel_set_rawreadformat(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00828">channel_internal_api.c:828</a></div></div>
<div class="ttc" id="channel_8c_html_ad8aa1e0753aff7c104f4f4cf134eab68"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ad8aa1e0753aff7c104f4f4cf134eab68">ast_channel_supports_html</a></div><div class="ttdeci">int ast_channel_supports_html(struct ast_channel *chan)</div><div class="ttdoc">Checks for HTML support on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06720">channel.c:6720</a></div></div>
<div class="ttc" id="channel_8c_html_a91c054f75fcf111f208a9fa185e8cd94"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a91c054f75fcf111f208a9fa185e8cd94">ast_say_enumeration</a></div><div class="ttdeci">int ast_say_enumeration(struct ast_channel *chan, int num, const char *ints, const char *language, const char *options)</div><div class="ttdoc">says an enumeration </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08343">channel.c:8343</a></div></div>
<div class="ttc" id="structtonepair__state_html_aaaea89b24922f3b6099fd0185acb3142"><div class="ttname"><a href="../../d6/d63/structtonepair__state.html#aaaea89b24922f3b6099fd0185acb3142">tonepair_state::data</a></div><div class="ttdeci">short data[4000]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07584">channel.c:7584</a></div></div>
<div class="ttc" id="causes_8h_html_ac4b4141fb57b00f56083307b3e5fe9f8"><div class="ttname"><a href="../../d4/da3/causes_8h.html#ac4b4141fb57b00f56083307b3e5fe9f8">AST_CAUSE_NO_ROUTE_TRANSIT_NET</a></div><div class="ttdeci">#define AST_CAUSE_NO_ROUTE_TRANSIT_NET</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00098">causes.h:98</a></div></div>
<div class="ttc" id="utils_8h_html_afa99ec4acc4ecb2dc3c2d05da15d0e3f"><div class="ttname"><a href="../../d5/d60/utils_8h.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a></div><div class="ttdeci">#define MAX(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00228">utils.h:228</a></div></div>
<div class="ttc" id="channel_8h_html_ac7fb938d952d8a97cbfcc0897d6656e1"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7fb938d952d8a97cbfcc0897d6656e1">ast_channel_cdr_set</a></div><div class="ttdeci">void ast_channel_cdr_set(struct ast_channel *chan, struct ast_cdr *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00593">channel_internal_api.c:593</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00297">include/asterisk/frame.h:297</a></div></div>
<div class="ttc" id="structtonepair__state_html_a735f764b1095611ace084e7c6c06857d"><div class="ttname"><a href="../../d6/d63/structtonepair__state.html#a735f764b1095611ace084e7c6c06857d">tonepair_state::f</a></div><div class="ttdeci">struct ast_frame f</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07582">channel.c:7582</a></div></div>
<div class="ttc" id="channel_8h_html_ad35b4f533481ec376df7be1073addf46"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ad35b4f533481ec376df7be1073addf46">ast_channel_emulate_dtmf_duration</a></div><div class="ttdeci">unsigned int ast_channel_emulate_dtmf_duration(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00509">channel_internal_api.c:509</a></div></div>
<div class="ttc" id="channel_8h_html_a24ce7f9c0758a05023ecc65301461300"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a24ce7f9c0758a05023ecc65301461300">ast_channel_fin</a></div><div class="ttdeci">unsigned int ast_channel_fin(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00517">channel_internal_api.c:517</a></div></div>
<div class="ttc" id="structplc__ds_html_a0aefc000efd9c98b13b7b5855d2d60c5"><div class="ttname"><a href="../../d0/d8a/structplc__ds.html#a0aefc000efd9c98b13b7b5855d2d60c5">plc_ds::samples_buf</a></div><div class="ttdeci">int16_t * samples_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05078">channel.c:5078</a></div></div>
<div class="ttc" id="channel_8c_html_acde3e8b33bfcbd2e77f66e5270a58724"><div class="ttname"><a href="../../d4/d28/channel_8c.html#acde3e8b33bfcbd2e77f66e5270a58724">redirecting_reason_build_data</a></div><div class="ttdeci">static int redirecting_reason_build_data(unsigned char *data, size_t datalen, const struct ast_party_redirecting_reason *reason, const char *label, const struct ast_party_redirecting_reason_ies *ies)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09330">channel.c:9330</a></div></div>
<div class="ttc" id="channel_8c_html_a40fc421536e02d30fecaa51a255b4144"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a40fc421536e02d30fecaa51a255b4144">ast_party_connected_line_free</a></div><div class="ttdeci">void ast_party_connected_line_free(struct ast_party_connected_line *doomed)</div><div class="ttdoc">Destroy the connected line information contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02072">channel.c:2072</a></div></div>
<div class="ttc" id="channel_8c_html_a455d5a7a2207ea5dd10ec7306fcdadb4"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a455d5a7a2207ea5dd10ec7306fcdadb4">ast_set_read_format_from_cap</a></div><div class="ttdeci">int ast_set_read_format_from_cap(struct ast_channel *chan, struct ast_format_cap *cap)</div><div class="ttdoc">Sets read format on channel chan from capabilities Set read format for channel to whichever component...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05867">channel.c:5867</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212acab76c9fe8b00719aa5276d92922f2ca"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212acab76c9fe8b00719aa5276d92922f2ca">AST_MEDIA_TYPE_IMAGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00034">codec.h:34</a></div></div>
<div class="ttc" id="structoutgoing__helper_html_a556b8c8508e4a08eb0b212664622306c"><div class="ttname"><a href="../../d9/dc0/structoutgoing__helper.html#a556b8c8508e4a08eb0b212664622306c">outgoing_helper::cid_name</a></div><div class="ttdeci">const char * cid_name</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01111">channel.h:1111</a></div></div>
<div class="ttc" id="structmanager__channel__variable_html_a8c1450d4026368bfc9530c2d59255457"><div class="ttname"><a href="../../d7/d07/structmanager__channel__variable.html#a8c1450d4026368bfc9530c2d59255457">manager_channel_variable::isfunc</a></div><div class="ttdeci">unsigned int isfunc</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07927">channel.c:7927</a></div></div>
<div class="ttc" id="channel_8h_html_a833298ae10beaad5b8ad6de2d6ce0467"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a833298ae10beaad5b8ad6de2d6ce0467">ast_channel_internal_swap_topics</a></div><div class="ttdeci">void ast_channel_internal_swap_topics(struct ast_channel *a, struct ast_channel *b)</div><div class="ttdoc">Swap topics beteween two channels. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01433">channel_internal_api.c:1433</a></div></div>
<div class="ttc" id="stream_8h_html_a3da8d8e63718c47d43b9e738c7f6e55a"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a3da8d8e63718c47d43b9e738c7f6e55a">ast_stream_topology_to_str</a></div><div class="ttdeci">const char * ast_stream_topology_to_str(const struct ast_stream_topology *topology, struct ast_str **buf)</div><div class="ttdoc">Get a string representing the topology for debugging/display purposes. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00936">stream.c:936</a></div></div>
<div class="ttc" id="format_8h_html_a738c58eca291b71de4422e95bff27400"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a></div><div class="ttdeci">enum ast_format_cmp_res ast_format_cmp(const struct ast_format *format1, const struct ast_format *format2)</div><div class="ttdoc">Compare two formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00201">format.c:201</a></div></div>
<div class="ttc" id="channel_8c_html_aa76c1a69c71dfa9bb4b40766043e673e"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aa76c1a69c71dfa9bb4b40766043e673e">ast_channel_softhangup_cb</a></div><div class="ttdeci">static int ast_channel_softhangup_cb(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00484">channel.c:484</a></div></div>
<div class="ttc" id="channel_8c_html_a3212119ca5acac4c9ec6051987380876a18f6cfd24ab8b44292cfd879eafa564a"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a18f6cfd24ab8b44292cfd879eafa564a">AST_CONNECTED_LINE_PRIV_SUBADDRESS_TYPE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08787">channel.c:8787</a></div></div>
<div class="ttc" id="format_8h_html_a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0a/format_8h_source.html#l00038">format.h:38</a></div></div>
<div class="ttc" id="channel_8c_html_a88fe9ad417e869049cb359030f06cab4"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a88fe9ad417e869049cb359030f06cab4">ast_channel_redirecting_sub</a></div><div class="ttdeci">int ast_channel_redirecting_sub(struct ast_channel *autoservice_chan, struct ast_channel *sub_chan, const void *redirecting_info, int is_frame)</div><div class="ttdoc">Run a redirecting interception subroutine and update a channel&amp;#39;s redirecting information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10584">channel.c:10584</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a81210231d9c339ed4486e64243381cf7"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a81210231d9c339ed4486e64243381cf7">AST_REDIRECTING_PRIV_ORIG_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09320">channel.c:9320</a></div></div>
<div class="ttc" id="translate_8h_html_a08790d6e05056f38fe9194134332cfef"><div class="ttname"><a href="../../db/d39/translate_8h.html#a08790d6e05056f38fe9194134332cfef">ast_translator_build_path</a></div><div class="ttdeci">struct ast_trans_pvt * ast_translator_build_path(struct ast_format *dest, struct ast_format *source)</div><div class="ttdoc">Builds a translator path Build a path (possibly NULL) from source to dest. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00485">translate.c:485</a></div></div>
<div class="ttc" id="channel_8c_html_a59a1c2f9f692d5b3dbb213ae454f7718"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a59a1c2f9f692d5b3dbb213ae454f7718">ast_party_id_set</a></div><div class="ttdeci">void ast_party_id_set(struct ast_party_id *dest, const struct ast_party_id *src, const struct ast_set_party_id *update)</div><div class="ttdoc">Set the source party id information into the destination party id. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01788">channel.c:1788</a></div></div>
<div class="ttc" id="channel_8h_html_a74da52aac47a277801349e8577978a83"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a74da52aac47a277801349e8577978a83">AST_MUTE_DIRECTION_READ</a></div><div class="ttdeci">#define AST_MUTE_DIRECTION_READ</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04937">channel.h:4937</a></div></div>
<div class="ttc" id="channel_8c_html_a1677fd1f6e2cab646aeb76db8a044c2e"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a1677fd1f6e2cab646aeb76db8a044c2e">ast_channel_get_device_name</a></div><div class="ttdeci">int ast_channel_get_device_name(struct ast_channel *chan, char *device_name, size_t name_buffer_length)</div><div class="ttdoc">Get a device name given its channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10697">channel.c:10697</a></div></div>
<div class="ttc" id="channel_8c_html_a2bfbbbb8be5c8a13ec5a054bbc9f25b1"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a2bfbbbb8be5c8a13ec5a054bbc9f25b1">ast_moh_cleanup</a></div><div class="ttdeci">void ast_moh_cleanup(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07882">channel.c:7882</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a8ce72111eb5b123e60d20805d5fec33a"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a8ce72111eb5b123e60d20805d5fec33a">AST_REDIRECTING_ORIG_NAME_VALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09273">channel.c:9273</a></div></div>
<div class="ttc" id="channel_8h_html_a03cad86bc84ad7a0de6c70fef09e9dde"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a03cad86bc84ad7a0de6c70fef09e9dde">ast_channel_latest_musicclass</a></div><div class="ttdeci">const char * ast_channel_latest_musicclass(const struct ast_channel *chan)</div></div>
<div class="ttc" id="structast__party__caller_html_aeeb8c05290fd113bd0d1a3129898fd49"><div class="ttname"><a href="../../d4/d77/structast__party__caller.html#aeeb8c05290fd113bd0d1a3129898fd49">ast_party_caller::ani</a></div><div class="ttdeci">struct ast_party_id ani</div><div class="ttdoc">Automatic Number Identification (ANI) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00428">channel.h:428</a></div></div>
<div class="ttc" id="channel_8c_html_aef0540461d88daff61e411841ae264ae"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aef0540461d88daff61e411841ae264ae">ast_channel_early_bridge</a></div><div class="ttdeci">int ast_channel_early_bridge(struct ast_channel *c0, struct ast_channel *c1)</div><div class="ttdoc">Bridge two channels together (early) </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07512">channel.c:7512</a></div></div>
<div class="ttc" id="channel_8c_html_aced094e288cd6edb779e1794afc57946"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aced094e288cd6edb779e1794afc57946">request_channel</a></div><div class="ttdeci">static struct ast_channel * request_channel(const char *type, struct ast_format_cap *request_cap, struct ast_stream_topology *topology, const struct ast_assigned_ids *assignedids, const struct ast_channel *requestor, const char *addr, int *cause)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06309">channel.c:6309</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a9855dee70443fe646113126fdf38e25a"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9855dee70443fe646113126fdf38e25a">AST_CONTROL_CC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00302">include/asterisk/frame.h:302</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792ac249420ccee43b9f681e103696c54fd9"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ac249420ccee43b9f681e103696c54fd9">AST_REDIRECTING_PRIV_ORIG_SUBADDRESS_VALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09319">channel.c:9319</a></div></div>
<div class="ttc" id="channel_8c_html_a1b732eb4ed203140b1a3aae9e7dec2c1"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a1b732eb4ed203140b1a3aae9e7dec2c1">ast_call</a></div><div class="ttdeci">int ast_call(struct ast_channel *chan, const char *addr, int timeout)</div><div class="ttdoc">Make a call. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06553">channel.c:6553</a></div></div>
<div class="ttc" id="channel_8h_html"><div class="ttname"><a href="../../d5/d7b/channel_8h.html">channel.h</a></div><div class="ttdoc">General Asterisk PBX channel definitions. </div></div>
<div class="ttc" id="channel_8c_html_a77aaa8f695ceea7db331fad92a4ff633"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a77aaa8f695ceea7db331fad92a4ff633">varshead_dtor</a></div><div class="ttdeci">static void varshead_dtor(void *obj)</div><div class="ttdoc">Destructor for lists of variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08003">channel.c:8003</a></div></div>
<div class="ttc" id="callerid_8h_html_a24813a6a337abb76e92c7f226f68c3cd"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a24813a6a337abb76e92c7f226f68c3cd">AST_PRES_USER_NUMBER_UNSCREENED</a></div><div class="ttdeci">#define AST_PRES_USER_NUMBER_UNSCREENED</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00318">callerid.h:318</a></div></div>
<div class="ttc" id="lock_8h_html_ab13590ad27fac3b9c7c7b792c603c9b3"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a></div><div class="ttdeci">#define SCOPED_MUTEX(varname, lock)</div><div class="ttdoc">scoped lock specialization for mutexes </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00587">lock.h:587</a></div></div>
<div class="ttc" id="asterisk_8h_html_a412442e1beffe5bec07ed2e9ea72afc3"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a></div><div class="ttdeci">int ast_register_cleanup(void(*func)(void))</div><div class="ttdoc">Register a function to be executed before Asterisk gracefully exits. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00019">clicompat.c:19</a></div></div>
<div class="ttc" id="channel_8h_html_a1d6833a829f7402bbf9cf0383ae3ca00"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1d6833a829f7402bbf9cf0383ae3ca00">ast_channel_accountcode</a></div><div class="ttdeci">const char * ast_channel_accountcode(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channel_8c_html_a3212119ca5acac4c9ec6051987380876a049542394a05e2be28526008e8f1eb78"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a049542394a05e2be28526008e8f1eb78">AST_CONNECTED_LINE_SOURCE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08762">channel.c:8762</a></div></div>
<div class="ttc" id="paths_8h_html"><div class="ttname"><a href="../../dd/df2/paths_8h.html">paths.h</a></div><div class="ttdoc">Asterisk file paths, configured in asterisk.conf. </div></div>
<div class="ttc" id="structast__channel__tech_html_a82adcb6335ced70bf32beb1290079878"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#a82adcb6335ced70bf32beb1290079878">ast_channel_tech::send_html</a></div><div class="ttdeci">int(*const send_html)(struct ast_channel *chan, int subclass, const char *data, int len)</div><div class="ttdoc">Send HTML data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00763">channel.h:763</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ac8f7380b8620c80443286b44481f641c"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a></div><div class="ttdeci">#define AST_FRIENDLY_OFFSET</div><div class="ttdoc">Offset into a frame&amp;#39;s data buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00229">include/asterisk/frame.h:229</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a32b72bba20e26bcd2d5a299c5d939bce"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a32b72bba20e26bcd2d5a299c5d939bce">AST_CONTROL_STREAM_RESTART</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00335">include/asterisk/frame.h:335</a></div></div>
<div class="ttc" id="threadstorage_8h_html_a10886a1187bdffd95a266d04e0739b60"><div class="ttname"><a href="../../dc/d7d/threadstorage_8h.html#a10886a1187bdffd95a266d04e0739b60">ast_threadstorage_set_ptr</a></div><div class="ttdeci">int ast_threadstorage_set_ptr(struct ast_threadstorage *ts, void *ptr)</div><div class="ttdoc">Set a raw pointer from threadstorage. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/threadstorage_8h_source.html#l00260">threadstorage.h:260</a></div></div>
<div class="ttc" id="structast__frame_html_af51e37c9331049b1e3d250a7c8bc3c26"><div class="ttname"><a href="../../d0/d99/structast__frame.html#af51e37c9331049b1e3d250a7c8bc3c26">ast_frame::src</a></div><div class="ttdeci">const char * src</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00181">include/asterisk/frame.h:181</a></div></div>
<div class="ttc" id="channel_8c_html_a756671fc7041ac4e1bd415d4348aeae3"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a756671fc7041ac4e1bd415d4348aeae3">handle_cli_core_show_channeltype</a></div><div class="ttdeci">static char * handle_cli_core_show_channeltype(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdoc">Show details about a channel driver - CLI command. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00326">channel.c:326</a></div></div>
<div class="ttc" id="channel_8c_html_ac754e486b4049b91252697533275ac89"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ac754e486b4049b91252697533275ac89">ast_channel_by_uniqueid_cb</a></div><div class="ttdeci">static int ast_channel_by_uniqueid_cb(void *obj, void *arg, void *data, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01329">channel.c:1329</a></div></div>
<div class="ttc" id="structchanlist_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../dd/d6f/structchanlist.html#a84d1435c5b8d387806714ea7079304b7">chanlist::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d12/app__dial_8c_source.html#l00798">app_dial.c:798</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5a337e8daae5bac4e9e0601410e1e8577f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a337e8daae5bac4e9e0601410e1e8577f">AST_FLAG_SNAPSHOT_STAGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01051">channel.h:1051</a></div></div>
<div class="ttc" id="channel_8c_html_a6643cbe766a051d2d06750ab5b3e933d"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a6643cbe766a051d2d06750ab5b3e933d">ast_channel_stop_silence_generator</a></div><div class="ttdeci">void ast_channel_stop_silence_generator(struct ast_channel *chan, struct ast_silence_generator *state)</div><div class="ttdoc">Stops a previously-started silence generator on the given channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08312">channel.c:8312</a></div></div>
<div class="ttc" id="say_8h_html_ab05d3e2a245fb9a199d6b628f901c221"><div class="ttname"><a href="../../db/dce/say_8h.html#ab05d3e2a245fb9a199d6b628f901c221">ast_say_digit_str_full</a></div><div class="ttdeci">SAY_EXTERN int(* ast_say_digit_str_full)(struct ast_channel *chan, const char *num, const char *ints, const char *lang, int audiofd, int ctrlfd) SAY_INIT(ast_say_digit_str_full)</div><div class="ttdoc">Same as ast_say_digit_str() with audiofd for received audio and returns 1 on ctrlfd being readable...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dce/say_8h_source.html#l00143">say.h:143</a></div></div>
<div class="ttc" id="channel_8c_html_a662ceda1ee4acd7a6f24331ab20836ee"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a662ceda1ee4acd7a6f24331ab20836ee">ast_write_stream</a></div><div class="ttdeci">int ast_write_stream(struct ast_channel *chan, int stream_num, struct ast_frame *fr)</div><div class="ttdoc">Write a frame to a stream This function writes the given frame to the indicated stream on the channel...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05194">channel.c:5194</a></div></div>
<div class="ttc" id="channel_8c_html_aeee785b39fca76b9e7b3155105de76cb"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aeee785b39fca76b9e7b3155105de76cb">set_format_access_read</a></div><div class="ttdeci">static const struct set_format_access set_format_access_read</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05658">channel.c:5658</a></div></div>
<div class="ttc" id="channel_8h_html_acf35101c44db296b56c86c9ed4e8e54b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#acf35101c44db296b56c86c9ed4e8e54b">ast_channel_get_default_stream</a></div><div class="ttdeci">struct ast_stream * ast_channel_get_default_stream(struct ast_channel *chan, enum ast_media_type type)</div><div class="ttdoc">Retrieve the default stream of a specific media type on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01619">channel_internal_api.c:1619</a></div></div>
<div class="ttc" id="structtonepair__state_html_a6a19249508791678eec714f6ba20dcf5"><div class="ttname"><a href="../../d6/d63/structtonepair__state.html#a6a19249508791678eec714f6ba20dcf5">tonepair_state::v2_1</a></div><div class="ttdeci">int v2_1</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07573">channel.c:7573</a></div></div>
<div class="ttc" id="channel_8c_html_a3212119ca5acac4c9ec6051987380876a47c82e5bb9a7c433ff3083dc6e1cf6a3"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a47c82e5bb9a7c433ff3083dc6e1cf6a3">AST_CONNECTED_LINE_SUBADDRESS_VALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08766">channel.c:8766</a></div></div>
<div class="ttc" id="channel_8c_html_afd7c527ec74e66bcc02de0aeb361d804"><div class="ttname"><a href="../../d4/d28/channel_8c.html#afd7c527ec74e66bcc02de0aeb361d804">ast_get_namedgroups</a></div><div class="ttdeci">struct ast_namedgroups * ast_get_namedgroups(const char *s)</div><div class="ttdoc">Create an ast_namedgroups set with group names from comma separated string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07775">channel.c:7775</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="framehook_8h_html_a54250544f50efde9156d2341e8da0614a8e96ab8d6971c2abf694c55ed52653d9"><div class="ttname"><a href="../../db/d3c/framehook_8h.html#a54250544f50efde9156d2341e8da0614a8e96ab8d6971c2abf694c55ed52653d9">AST_FRAMEHOOK_EVENT_WRITE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d3c/framehook_8h_source.html#l00153">framehook.h:153</a></div></div>
<div class="ttc" id="structtonepair__def_html_aef0a8374190702d825cd5be4f7c3d16f"><div class="ttname"><a href="../../dd/d61/structtonepair__def.html#aef0a8374190702d825cd5be4f7c3d16f">tonepair_def::freq1</a></div><div class="ttdeci">int freq1</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07563">channel.c:7563</a></div></div>
<div class="ttc" id="channel_8h_html_a6858fa4ed2eb8036713a0dacd04b7da9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6858fa4ed2eb8036713a0dacd04b7da9">ast_channel_generatordata_set</a></div><div class="ttdeci">void ast_channel_generatordata_set(struct ast_channel *chan, void *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00553">channel_internal_api.c:553</a></div></div>
<div class="ttc" id="structast__control__read__action__payload_html_a21fb327bb05e95f14a13ff193882f32b"><div class="ttname"><a href="../../d6/d4b/structast__control__read__action__payload.html#a21fb327bb05e95f14a13ff193882f32b">ast_control_read_action_payload::payload_size</a></div><div class="ttdeci">size_t payload_size</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00364">include/asterisk/frame.h:364</a></div></div>
<div class="ttc" id="utils_8h_html_a78ce13d749925cbdaa7625e8dbdcbf7f"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a78ce13d749925cbdaa7625e8dbdcbf7f">ast_get_tid</a></div><div class="ttdeci">int ast_get_tid(void)</div><div class="ttdoc">Get current thread ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02504">main/utils.c:2504</a></div></div>
<div class="ttc" id="channel_8c_html_a1d9fcff85d7adbe0bd54f88eb927998c"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a1d9fcff85d7adbe0bd54f88eb927998c">ast_channel_clear_flag</a></div><div class="ttdeci">void ast_channel_clear_flag(struct ast_channel *chan, unsigned int flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l11235">channel.c:11235</a></div></div>
<div class="ttc" id="app__externalivr_8c_html_abe143f1bae4445e9b3798e1dec3bda60"><div class="ttname"><a href="../../de/d26/app__externalivr_8c.html#abe143f1bae4445e9b3798e1dec3bda60">gen</a></div><div class="ttdeci">static struct ast_generator gen</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/app__externalivr_8c_source.html#l00297">app_externalivr.c:297</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="channel_8c_html_ae69ce2895f55de598da0103481d82b95"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ae69ce2895f55de598da0103481d82b95">ast_connected_line_copy_to_caller</a></div><div class="ttdeci">void ast_connected_line_copy_to_caller(struct ast_party_caller *dest, const struct ast_party_connected_line *src)</div><div class="ttdoc">Copy the connected line information to the caller information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08396">channel.c:8396</a></div></div>
<div class="ttc" id="channel_8h_html_a3c9c29fb2bc2b715fee335c1ffa50449"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3c9c29fb2bc2b715fee335c1ffa50449">ast_channel_nativeformats_set</a></div><div class="ttdeci">void ast_channel_nativeformats_set(struct ast_channel *chan, struct ast_format_cap *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00677">channel_internal_api.c:677</a></div></div>
<div class="ttc" id="structast__party__redirecting_html_aa17ec85399145e14c9f08d81a2261231"><div class="ttname"><a href="../../df/d44/structast__party__redirecting.html#aa17ec85399145e14c9f08d81a2261231">ast_party_redirecting::orig_reason</a></div><div class="ttdeci">struct ast_party_redirecting_reason orig_reason</div><div class="ttdoc">Reason for the redirection by the original party. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00546">channel.h:546</a></div></div>
<div class="ttc" id="channel_8h_html_ab5c41a2130385cadf78c64cacea7e3f9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab5c41a2130385cadf78c64cacea7e3f9">ast_channel_writetrans</a></div><div class="ttdeci">struct ast_trans_pvt * ast_channel_writetrans(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00761">channel_internal_api.c:761</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga920b9d3e484257c7e593452a8e36d8d4"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga920b9d3e484257c7e593452a8e36d8d4">ast_channel_stage_snapshot_done</a></div><div class="ttdeci">void ast_channel_stage_snapshot_done(struct ast_channel *chan)</div><div class="ttdoc">Clear flag to indicate channel snapshot is being staged, and publish snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01043">stasis_channels.c:1043</a></div></div>
<div class="ttc" id="transcap_8h_html_a9c47e33087516f67f183da4540ee60a3"><div class="ttname"><a href="../../d7/d86/transcap_8h.html#a9c47e33087516f67f183da4540ee60a3">AST_TRANS_CAP_DIGITAL_W_TONES</a></div><div class="ttdeci">#define AST_TRANS_CAP_DIGITAL_W_TONES</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d86/transcap_8h_source.html#l00039">transcap.h:39</a></div></div>
<div class="ttc" id="parser_8c_html_a61217d5bc9d5b446d9c08e7ca401b733"><div class="ttname"><a href="../../d2/d72/parser_8c.html#a61217d5bc9d5b446d9c08e7ca401b733">frames</a></div><div class="ttdeci">static int frames</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d72/parser_8c_source.html#l00051">parser.c:51</a></div></div>
<div class="ttc" id="channel_8h_html_a10f23f1907b804485f62973f66cd9aef"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a></div><div class="ttdeci">struct ast_party_connected_line * ast_channel_connected(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00892">channel_internal_api.c:892</a></div></div>
<div class="ttc" id="structast__control__pvt__cause__code_html_a9f49ca84424b69a07af7d0d8c84e612f"><div class="ttname"><a href="../../d9/d2d/structast__control__pvt__cause__code.html#a9f49ca84424b69a07af7d0d8c84e612f">ast_control_pvt_cause_code::code</a></div><div class="ttdeci">char code[1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00417">include/asterisk/frame.h:417</a></div></div>
<div class="ttc" id="structoutgoing__helper_html_a54735dbbeb30eacadc7e823d15cf03c6"><div class="ttname"><a href="../../d9/dc0/structoutgoing__helper.html#a54735dbbeb30eacadc7e823d15cf03c6">outgoing_helper::account</a></div><div class="ttdeci">const char * account</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01112">channel.h:1112</a></div></div>
<div class="ttc" id="channel_8h_html_adfe39dc3611c6eda03b3dd3fbde10892"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#adfe39dc3611c6eda03b3dd3fbde10892">ast_channel_visible_indication</a></div><div class="ttdeci">int ast_channel_visible_indication(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00477">channel_internal_api.c:477</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a6b3add43c84e8c9d1c420c46786d6600"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a6b3add43c84e8c9d1c420c46786d6600">AST_REDIRECTING_PRIV_FROM_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09307">channel.c:9307</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ggae4d6df086e192d70f732e3ce8a5a2210a06fc3d57de686a0838563fb1cd0c25d8"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ggae4d6df086e192d70f732e3ce8a5a2210a06fc3d57de686a0838563fb1cd0c25d8">AST_CHANNEL_SNAPSHOT_INVALIDATE_CALLER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00043">stasis_channels.h:43</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a168d496bdac09ece3ce49cf473bbdb4baa02b30f25621f20396d06f5ac8aa7a2e"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4baa02b30f25621f20396d06f5ac8aa7a2e">AST_T38_REFUSED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00375">include/asterisk/frame.h:375</a></div></div>
<div class="ttc" id="structast__set__party__id_html_a220f288903c39eb8673e61c90a842c33"><div class="ttname"><a href="../../df/dcf/structast__set__party__id.html#a220f288903c39eb8673e61c90a842c33">ast_set_party_id::subaddress</a></div><div class="ttdeci">unsigned char subaddress</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00368">channel.h:368</a></div></div>
<div class="ttc" id="channel_8c_html_a1d6e6458df4bfcb132a6934bafdb7fcc"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a1d6e6458df4bfcb132a6934bafdb7fcc">handle_cause</a></div><div class="ttdeci">static void handle_cause(int cause, int *outstate)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05936">channel.c:5936</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00031">codec.h:31</a></div></div>
<div class="ttc" id="timing_8h_html_a8cbf7ad0aadeb93e300c809c8babef27"><div class="ttname"><a href="../../db/d41/timing_8h.html#a8cbf7ad0aadeb93e300c809c8babef27">ast_timer_disable_continuous</a></div><div class="ttdeci">int ast_timer_disable_continuous(const struct ast_timer *handle)</div><div class="ttdoc">Disable continuous mode. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d62/timing_8c_source.html#l00181">timing.c:181</a></div></div>
<div class="ttc" id="resample_8c_html_ae71449b1cc6e6250b91f539153a7a0d3"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a></div><div class="ttdeci">#define M_PI</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00083">resample.c:83</a></div></div>
<div class="ttc" id="poll-compat_8h_html_a5a0c58fa8311e94cd0ed34382aa822f9"><div class="ttname"><a href="../../d4/dfb/poll-compat_8h.html#a5a0c58fa8311e94cd0ed34382aa822f9">ast_poll</a></div><div class="ttdeci">#define ast_poll(a, b, c)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/poll-compat_8h_source.html#l00088">poll-compat.h:88</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a7ac0a7bfda5149c11a42afc070d8b39a"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a7ac0a7bfda5149c11a42afc070d8b39a">AST_REDIRECTING_FROM_NAME_VALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09258">channel.c:9258</a></div></div>
<div class="ttc" id="channel_8h_html_a488b7d6f7488bedc53be45d4ef4471c9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a488b7d6f7488bedc53be45d4ef4471c9">ast_channel_pbx</a></div><div class="ttdeci">struct ast_pbx * ast_channel_pbx(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00721">channel_internal_api.c:721</a></div></div>
<div class="ttc" id="causes_8h_html_aa71419a0c598e31312477c5a644e7440"><div class="ttname"><a href="../../d4/da3/causes_8h.html#aa71419a0c598e31312477c5a644e7440">AST_CAUSE_ANSWERED_ELSEWHERE</a></div><div class="ttdeci">#define AST_CAUSE_ANSWERED_ELSEWHERE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00113">causes.h:113</a></div></div>
<div class="ttc" id="structast__channel__tech_html_a5ffa977dd3498d03795b1f9da7288311"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#a5ffa977dd3498d03795b1f9da7288311">ast_channel_tech::write_text</a></div><div class="ttdeci">int(*const write_text)(struct ast_channel *chan, struct ast_frame *frame)</div><div class="ttdoc">Write a text frame, in standard format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00790">channel.h:790</a></div></div>
<div class="ttc" id="transcap_8h_html_ae4b5e973bbe6b7bc710345ca183e6bda"><div class="ttname"><a href="../../d7/d86/transcap_8h.html#ae4b5e973bbe6b7bc710345ca183e6bda">AST_TRANS_CAP_3_1K_AUDIO</a></div><div class="ttdeci">#define AST_TRANS_CAP_3_1K_AUDIO</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d86/transcap_8h_source.html#l00037">transcap.h:37</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00053">devicestate.h:53</a></div></div>
<div class="ttc" id="channel_8c_html_a557663006d52a9cdc11f42602bf48326"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a557663006d52a9cdc11f42602bf48326">ast_channel_get_bridge</a></div><div class="ttdeci">struct ast_bridge * ast_channel_get_bridge(const struct ast_channel *chan)</div><div class="ttdoc">Get the bridge associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10735">channel.c:10735</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="channel_8c_html_ab0eadbfdcbdad2c0e8927900ec9b98d5"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ab0eadbfdcbdad2c0e8927900ec9b98d5">ast_channel_iterator_next</a></div><div class="ttdeci">struct ast_channel * ast_channel_iterator_next(struct ast_channel_iterator *i)</div><div class="ttdoc">Get the next channel for a channel iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01422">channel.c:1422</a></div></div>
<div class="ttc" id="channel_8c_html_aa9d8ea64f1c03ccc844f630bb59b9466"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aa9d8ea64f1c03ccc844f630bb59b9466">ast_channel_set_flag</a></div><div class="ttdeci">void ast_channel_set_flag(struct ast_channel *chan, unsigned int flag)</div><div class="ttdoc">Set a flag on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l11228">channel.c:11228</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01090">app_meetme.c:1090</a></div></div>
<div class="ttc" id="options_8h_html_afe3489254f2f498c33e974ae8ead8bb3"><div class="ttname"><a href="../../d7/d5b/options_8h.html#afe3489254f2f498c33e974ae8ead8bb3">ast_defaultlanguage</a></div><div class="ttdeci">char ast_defaultlanguage[]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00098">options.c:98</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="strings_8h_html_ac92713b8d07a45720b2664be70810e55"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac92713b8d07a45720b2664be70810e55">ast_strip</a></div><div class="ttdeci">char * ast_strip(char *s)</div><div class="ttdoc">Strip leading/trailing whitespace from a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00219">strings.h:219</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="causes_8h_html_af2235eb1c27925e4020ce286255d165f"><div class="ttname"><a href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a></div><div class="ttdeci">#define AST_CAUSE_NORMAL_CLEARING</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00105">causes.h:105</a></div></div>
<div class="ttc" id="sched_8h_html"><div class="ttname"><a href="../../d7/d00/sched_8h.html">sched.h</a></div><div class="ttdoc">Scheduler Routines (derived from cheops) </div></div>
<div class="ttc" id="causes_8h_html_a33da602c4e2bb5f5060453878dbeb1f6"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a33da602c4e2bb5f5060453878dbeb1f6">AST_CAUSE_CHAN_NOT_IMPLEMENTED</a></div><div class="ttdeci">#define AST_CAUSE_CHAN_NOT_IMPLEMENTED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00131">causes.h:131</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a6c9398ee8989239124295d096a87bf32"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a6c9398ee8989239124295d096a87bf32">AST_FRAME_IMAGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00116">include/asterisk/frame.h:116</a></div></div>
<div class="ttc" id="structast__party__caller_html"><div class="ttname"><a href="../../d4/d77/structast__party__caller.html">ast_party_caller</a></div><div class="ttdoc">Caller Party information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00419">channel.h:419</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa8ac496fa9c717d5afb99a02e1e2760c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_LIST_REMOVE_CURRENT(field)</div><div class="ttdoc">Removes the current entry from a list during a traversal. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00556">linkedlists.h:556</a></div></div>
<div class="ttc" id="channel_8c_html_a0fe52ba970cf712f168cdf79e7609606"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a0fe52ba970cf712f168cdf79e7609606">indicate_connected_line</a></div><div class="ttdeci">static int indicate_connected_line(struct ast_channel *chan, const void *data, size_t datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04446">channel.c:4446</a></div></div>
<div class="ttc" id="channel_8h_html_ae93ebb3372a2d9495ae3c5417dd95cd5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a></div><div class="ttdeci">#define ast_channel_cleanup(c)</div><div class="ttdoc">Cleanup a channel reference. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02992">channel.h:2992</a></div></div>
<div class="ttc" id="structmember_html"><div class="ttname"><a href="../../d7/dd6/structmember.html">member</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/app__queue_8c_source.html#l01592">app_queue.c:1592</a></div></div>
<div class="ttc" id="channel_8h_html_ab9dd406367e3638a37019b1f7f9bbff8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab9dd406367e3638a37019b1f7f9bbff8">ast_channel_internal_alert_read</a></div><div class="ttdeci">ast_alert_status_t ast_channel_internal_alert_read(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01120">channel_internal_api.c:1120</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html">frame.h</a></div><div class="ttdoc">Asterisk internal frame definitions. </div></div>
<div class="ttc" id="channel_8c_html_acb7ada7c7705b3a88262b38d825b476b"><div class="ttname"><a href="../../d4/d28/channel_8c.html#acb7ada7c7705b3a88262b38d825b476b">tech_write</a></div><div class="ttdeci">static int tech_write(struct ast_channel *chan, struct ast_stream *stream, struct ast_stream *default_stream, struct ast_frame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05177">channel.c:5177</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="channel_8h_html_ab3786cbbff7a03241fc75dafa0c8a1c1"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab3786cbbff7a03241fc75dafa0c8a1c1">ast_channel_set_readformat</a></div><div class="ttdeci">void ast_channel_set_readformat(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00836">channel_internal_api.c:836</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01031">astobj2.h:1031</a></div></div>
<div class="ttc" id="strings_8h_html_a38a896048b2ca84076864505f0aa8f01"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a></div><div class="ttdeci">#define S_COR(a, b, c)</div><div class="ttdoc">returns the equivalent of logic or for strings, with an additional boolean check: second one if not e...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00085">strings.h:85</a></div></div>
<div class="ttc" id="channel_8c_html_a3aae98f83e7365f6c692f3706579ead1"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3aae98f83e7365f6c692f3706579ead1">ast_party_number_copy</a></div><div class="ttdeci">void ast_party_number_copy(struct ast_party_number *dest, const struct ast_party_number *src)</div><div class="ttdoc">Copy the source party number information to the destination party number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01652">channel.c:1652</a></div></div>
<div class="ttc" id="abstract__jb_8h_html_aa94fd3c228854f8ac519da8218d5c032"><div class="ttname"><a href="../../dc/d14/abstract__jb_8h.html#aa94fd3c228854f8ac519da8218d5c032">ast_jb_destroy</a></div><div class="ttdeci">void ast_jb_destroy(struct ast_channel *chan)</div><div class="ttdoc">Destroys jitterbuffer on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1d/abstract__jb_8c_source.html#l00502">abstract_jb.c:502</a></div></div>
<div class="ttc" id="channel_8h_html_aae56765bab2eed7bd11d8dca29b2975c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aae56765bab2eed7bd11d8dca29b2975c">ast_channel_datastores</a></div><div class="ttdeci">struct ast_datastore_list * ast_channel_datastores(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00868">channel_internal_api.c:868</a></div></div>
<div class="ttc" id="structast__generator_html_aa96806155cfb0c00eb81eb748a4088a3"><div class="ttname"><a href="../../de/d2a/structast__generator.html#aa96806155cfb0c00eb81eb748a4088a3">ast_generator::release</a></div><div class="ttdeci">void(* release)(struct ast_channel *chan, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00229">channel.h:229</a></div></div>
<div class="ttc" id="channel_8c_html_ac16b3b36606ee9db374e8d9f2b7dea88"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ac16b3b36606ee9db374e8d9f2b7dea88">ast_redirecting_parse_data</a></div><div class="ttdeci">int ast_redirecting_parse_data(const unsigned char *data, size_t datalen, struct ast_party_redirecting *redirecting)</div><div class="ttdoc">Parse redirecting indication frame data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09574">channel.c:9574</a></div></div>
<div class="ttc" id="channel_8c_html_a7df9da0e99e443d7ae13dc07bbc57dcd"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a7df9da0e99e443d7ae13dc07bbc57dcd">ast_channel_get_cc_config_params</a></div><div class="ttdeci">struct ast_cc_config_params * ast_channel_get_cc_config_params(struct ast_channel *chan)</div><div class="ttdoc">Get the CCSS parameters from a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10675">channel.c:10675</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5ab05edf1bf82b02f5987de92a6960a9bd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ab05edf1bf82b02f5987de92a6960a9bd">AST_FLAG_DEFER_DTMF</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00982">channel.h:982</a></div></div>
<div class="ttc" id="structast__datastore_html_a03ea21247b5d39b165343431b44131f1"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html#a03ea21247b5d39b165343431b44131f1">ast_datastore::info</a></div><div class="ttdeci">const struct ast_datastore_info * info</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00071">datastore.h:71</a></div></div>
<div class="ttc" id="structast__party__caller_html_a7f68ab7a4fa155c8db1cda1565864c58"><div class="ttname"><a href="../../d4/d77/structast__party__caller.html#a7f68ab7a4fa155c8db1cda1565864c58">ast_party_caller::priv</a></div><div class="ttdeci">struct ast_party_id priv</div><div class="ttdoc">Private caller party ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00431">channel.h:431</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structplc__state__t_html"><div class="ttname"><a href="../../d8/dc7/structplc__state__t.html">plc_state_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d66/plc_8h_source.html#l00105">plc.h:105</a></div></div>
<div class="ttc" id="channel_8c_html_aae1445ed63630123081206e3de5b7b1a"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aae1445ed63630123081206e3de5b7b1a">ast_channel_iterator_all_new</a></div><div class="ttdeci">struct ast_channel_iterator * ast_channel_iterator_all_new(void)</div><div class="ttdoc">Create a new channel iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01408">channel.c:1408</a></div></div>
<div class="ttc" id="channel_8c_html_a6e558e6f257935744c3c7f9cd79b169a"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a6e558e6f257935744c3c7f9cd79b169a">ast_channel_undefer_dtmf</a></div><div class="ttdeci">void ast_channel_undefer_dtmf(struct ast_channel *chan)</div><div class="ttdoc">Unset defer DTMF flag on channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01271">channel.c:1271</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="indications_8h_html_a8b52ace68f21c0ac24414f038471647d"><div class="ttname"><a href="../../d2/d0f/indications_8h.html#a8b52ace68f21c0ac24414f038471647d">ast_tone_zone_sound_unref</a></div><div class="ttdeci">static struct ast_tone_zone_sound * ast_tone_zone_sound_unref(struct ast_tone_zone_sound *ts)</div><div class="ttdoc">Release a reference to an ast_tone_zone_sound. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0f/indications_8h_source.html#l00227">indications.h:227</a></div></div>
<div class="ttc" id="channel_8c_html_a196556ea463d5aa7e7672d673a2f688f"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a196556ea463d5aa7e7672d673a2f688f">silence_generator_generate</a></div><div class="ttdeci">static int silence_generator_generate(struct ast_channel *chan, void *data, int len, int samples)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08237">channel.c:8237</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a248688621fd1a4822c9b36d05b761e4a"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a248688621fd1a4822c9b36d05b761e4a">AST_CONTROL_STREAM_TOPOLOGY_SOURCE_CHANGED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00314">include/asterisk/frame.h:314</a></div></div>
<div class="ttc" id="structchanlist_html"><div class="ttname"><a href="../../dd/d6f/structchanlist.html">chanlist</a></div><div class="ttdoc">List of channel drivers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d12/app__dial_8c_source.html#l00796">app_dial.c:796</a></div></div>
<div class="ttc" id="channel__internal_8h_html_a83ba19e491ec5789d402d44ce4cc7d91"><div class="ttname"><a href="../../d5/de4/channel__internal_8h.html#a83ba19e491ec5789d402d44ce4cc7d91">ast_channel_internal_cleanup</a></div><div class="ttdeci">void ast_channel_internal_cleanup(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01471">channel_internal_api.c:1471</a></div></div>
<div class="ttc" id="channel_8h_html_a34c26382160debe3411987ec0df1f927"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a34c26382160debe3411987ec0df1f927">AST_GENERATOR_FD</a></div><div class="ttdeci">#define AST_GENERATOR_FD</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00204">channel.h:204</a></div></div>
<div class="ttc" id="channel_8c_html_aed8efcc0048d18a845e16c02c7e21ae6"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aed8efcc0048d18a845e16c02c7e21ae6">ast_channel_cmp_cb</a></div><div class="ttdeci">static int ast_channel_cmp_cb(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01428">channel.c:1428</a></div></div>
<div class="ttc" id="channel_8h_html_a5e41daaa81df59fc1e8eea2796029c31"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a5e41daaa81df59fc1e8eea2796029c31">ast_channel_internal_bridge_channel</a></div><div class="ttdeci">struct ast_bridge_channel * ast_channel_internal_bridge_channel(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01251">channel_internal_api.c:1251</a></div></div>
<div class="ttc" id="structast__set__party__caller_html_aa7845dae2adff27b0da13c58b16ca805"><div class="ttname"><a href="../../d7/d91/structast__set__party__caller.html#aa7845dae2adff27b0da13c58b16ca805">ast_set_party_caller::id</a></div><div class="ttdeci">struct ast_set_party_id id</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00443">channel.h:443</a></div></div>
<div class="ttc" id="structcauses__map_html"><div class="ttname"><a href="../../db/ddc/structcauses__map.html">causes_map</a></div><div class="ttdoc">map AST_CAUSE&amp;#39;s to readable string representations </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00130">channel.c:130</a></div></div>
<div class="ttc" id="channel_8c_html_adaa84a3e1b57ef0c912b57699fc0ddc9"><div class="ttname"><a href="../../d4/d28/channel_8c.html#adaa84a3e1b57ef0c912b57699fc0ddc9">ast_party_subaddress_free</a></div><div class="ttdeci">void ast_party_subaddress_free(struct ast_party_subaddress *doomed)</div><div class="ttdoc">Destroy the party subaddress contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01744">channel.c:1744</a></div></div>
<div class="ttc" id="format__cap_8h_html_ab4d69f2179ed5ca138c9b3d85334217f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a></div><div class="ttdeci">#define ast_format_cap_append(cap, format, framing)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00103">format_cap.h:103</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_gga44ac88ed1b656e254dcad5cf0dbd2a22a34d60938c22ee31e3eafa756c016020d"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a34d60938c22ee31e3eafa756c016020d">AST_MSG_DATA_ATTR_TO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00455">message.h:455</a></div></div>
<div class="ttc" id="channel_8h_html_ac264c5bfc7884724c7d289662dd6e8ad"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac264c5bfc7884724c7d289662dd6e8ad">ast_channel_amaflags_set</a></div><div class="ttdeci">void ast_channel_amaflags_set(struct ast_channel *chan, enum ama_flags value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00411">channel_internal_api.c:411</a></div></div>
<div class="ttc" id="structast__framehook__interface_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../d3/d7b/structast__framehook__interface.html#a735984d41155bc1032e09bece8f8d66d">ast_framehook_interface::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d3c/framehook_8h_source.html#l00255">framehook.h:255</a></div></div>
<div class="ttc" id="lock_8h_html_a8b9d9f2f2c41ecf3c70587c2510dddfc"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8b9d9f2f2c41ecf3c70587c2510dddfc">SCOPED_LOCK</a></div><div class="ttdeci">#define SCOPED_LOCK(varname, lock, lockfunc, unlockfunc)</div><div class="ttdoc">Scoped Locks. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00581">lock.h:581</a></div></div>
<div class="ttc" id="linkedlists_8h_html"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html">linkedlists.h</a></div><div class="ttdoc">A set of macros to manage forward-linked lists. </div></div>
<div class="ttc" id="chan__alsa_8c_html_adf416dc058363e2fd5750c77e2d78bee"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#adf416dc058363e2fd5750c77e2d78bee">language</a></div><div class="ttdeci">static char language[MAX_LANGUAGE]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00117">chan_alsa.c:117</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="channel_8c_html_a857e0317fcefc59c7a21c1f08ea7be73"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a857e0317fcefc59c7a21c1f08ea7be73">ast_party_name_free</a></div><div class="ttdeci">void ast_party_name_free(struct ast_party_name *doomed)</div><div class="ttdoc">Destroy the party name contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01638">channel.c:1638</a></div></div>
<div class="ttc" id="channel_8c_html_ab45db8cf33a706a5831d553d5199c143"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ab45db8cf33a706a5831d553d5199c143">ast_senddigit_end</a></div><div class="ttdeci">int ast_senddigit_end(struct ast_channel *chan, char digit, unsigned int duration)</div><div class="ttdoc">Send a DTMF digit to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04969">channel.c:4969</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a6eba7d36a20eb665e7680cdbf0c834c2"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a6eba7d36a20eb665e7680cdbf0c834c2">AST_REDIRECTING_PRIV_FROM_NUMBER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09295">channel.c:9295</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="structnamedgroup__member_html_a09f9a9ce240560b1d191b42ed56af642"><div class="ttname"><a href="../../db/d9c/structnamedgroup__member.html#a09f9a9ce240560b1d191b42ed56af642">namedgroup_member::hash</a></div><div class="ttdeci">unsigned int hash</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07753">channel.c:7753</a></div></div>
<div class="ttc" id="structast__sched__context_html"><div class="ttname"><a href="../../d7/de8/structast__sched__context.html">ast_sched_context</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00109">sched.c:109</a></div></div>
<div class="ttc" id="channel_8h_html_abccd7e584530bf477182f2a5286c4d88"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abccd7e584530bf477182f2a5286c4d88">ast_channel_internal_swap_uniqueid_and_linkedid</a></div><div class="ttdeci">void ast_channel_internal_swap_uniqueid_and_linkedid(struct ast_channel *a, struct ast_channel *b)</div><div class="ttdoc">Swap uniqueid and linkedid beteween two channels. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01416">channel_internal_api.c:1416</a></div></div>
<div class="ttc" id="channel_8c_html_a43edfff9df1530b0ae33259e346a32ad"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a43edfff9df1530b0ae33259e346a32ad">ast_sendtext_data</a></div><div class="ttdeci">int ast_sendtext_data(struct ast_channel *chan, struct ast_msg_data *msg)</div><div class="ttdoc">Sends text to a channel in an ast_msg_data structure wrapper with ast_sendtext as fallback...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04796">channel.c:4796</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a4e1f998aacd5c878a02040883b846bd7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a4e1f998aacd5c878a02040883b846bd7">AST_CONTROL_STREAM_REVERSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00336">include/asterisk/frame.h:336</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a66581086d34dfe7ea86b0644bacef239"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a></div><div class="ttdeci">#define ast_variable_new(name, value, filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">include/asterisk/config.h:914</a></div></div>
<div class="ttc" id="channel_8c_html_ad2e95ec12060b842aa4250de56a25c27"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ad2e95ec12060b842aa4250de56a25c27">ast_channel_get_vars</a></div><div class="ttdeci">struct varshead * ast_channel_get_vars(struct ast_channel *chan)</div><div class="ttdoc">Gets the variables for a given channel, as set using pbx_builtin_setvar_helper(). ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08013">channel.c:8013</a></div></div>
<div class="ttc" id="channel_8c_html_ac4fb3b333021e26b0305fe4949f5f254"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ac4fb3b333021e26b0305fe4949f5f254">silence_generator</a></div><div class="ttdeci">static struct ast_generator silence_generator</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08256">channel.c:8256</a></div></div>
<div class="ttc" id="structast__channel__tech_html_ac91397d55cb2705d87acf0518d7f10f4"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#ac91397d55cb2705d87acf0518d7f10f4">ast_channel_tech::send_text</a></div><div class="ttdeci">int(*const send_text)(struct ast_channel *chan, const char *text)</div><div class="ttdoc">Display or transmit text. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00757">channel.h:757</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="causes_8h_html_af03fc9fe2f0ecc69330e014aff8d0f73"><div class="ttname"><a href="../../d4/da3/causes_8h.html#af03fc9fe2f0ecc69330e014aff8d0f73">AST_CAUSE_NO_ANSWER</a></div><div class="ttdeci">#define AST_CAUSE_NO_ANSWER</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00108">causes.h:108</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00365">astobj2.h:365</a></div></div>
<div class="ttc" id="options_8h_html_aec9ad52a51bdb17fb149b63bfb9244bf"><div class="ttname"><a href="../../d7/d5b/options_8h.html#aec9ad52a51bdb17fb149b63bfb9244bf">ast_opt_generic_plc</a></div><div class="ttdeci">#define ast_opt_generic_plc</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00134">options.h:134</a></div></div>
<div class="ttc" id="channel_8c_html_a72cb69dc8edd533347b2f851230e863d"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a72cb69dc8edd533347b2f851230e863d">causes</a></div><div class="ttdeci">static const struct causes_map causes[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00136">channel.c:136</a></div></div>
<div class="ttc" id="channel_8c_html_abb39926813ff8874f8e453ca04307e53"><div class="ttname"><a href="../../d4/d28/channel_8c.html#abb39926813ff8874f8e453ca04307e53">ast_settimeout</a></div><div class="ttdeci">int ast_settimeout(struct ast_channel *c, unsigned int rate, int(*func)(const void *data), void *data)</div><div class="ttdoc">Enable or disable timer ticks for a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03189">channel.c:3189</a></div></div>
<div class="ttc" id="reqresp__parser_8h_html_a7e4aa55331b8292eff94249de72b807d"><div class="ttname"><a href="../../d1/d8f/reqresp__parser_8h.html#a7e4aa55331b8292eff94249de72b807d">AST_LIST_HEAD_NOLOCK</a></div><div class="ttdeci">AST_LIST_HEAD_NOLOCK(contactliststruct, contact)</div></div>
<div class="ttc" id="channel_8h_html_aafb009a6e137076234f66440eb48ac5e"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aafb009a6e137076234f66440eb48ac5e">ast_channel_timingdata</a></div><div class="ttdeci">void * ast_channel_timingdata(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00573">channel_internal_api.c:573</a></div></div>
<div class="ttc" id="channel_8c_html_a3212119ca5acac4c9ec6051987380876af70cefebc95cfb5681aa190d04a57ea9"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876af70cefebc95cfb5681aa190d04a57ea9">AST_CONNECTED_LINE_PRIV_NUMBER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08778">channel.c:8778</a></div></div>
<div class="ttc" id="channel_8c_html_ac84af9a704746d20211e0e02045ffecd"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ac84af9a704746d20211e0e02045ffecd">ast_channel_unsuppress</a></div><div class="ttdeci">int ast_channel_unsuppress(struct ast_channel *chan, unsigned int direction, enum ast_frame_type frametype)</div><div class="ttdoc">Stop suppressing of a frame type on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l11040">channel.c:11040</a></div></div>
<div class="ttc" id="structast__party__connected__line_html_aeeb8c05290fd113bd0d1a3129898fd49"><div class="ttname"><a href="../../dc/d9e/structast__party__connected__line.html#aeeb8c05290fd113bd0d1a3129898fd49">ast_party_connected_line::ani</a></div><div class="ttdeci">struct ast_party_id ani</div><div class="ttdoc">Automatic Number Identification (ANI) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00466">channel.h:466</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ac2b2b163b29fde967531b8bf92966c97"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ac2b2b163b29fde967531b8bf92966c97">AST_FRAME_RTCP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00135">include/asterisk/frame.h:135</a></div></div>
<div class="ttc" id="channel_8c_html_a18bf8971a91555e64544ba63880c0bbb"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a18bf8971a91555e64544ba63880c0bbb">ast_auto_answer</a></div><div class="ttdeci">int ast_auto_answer(struct ast_channel *chan)</div><div class="ttdoc">Answer a channel, if it&amp;#39;s not already answered. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02820">channel.c:2820</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_ab8dde573cc3974acd626c5626fae14b4"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a></div><div class="ttdeci">static int answer(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00682">chan_pjsip.c:682</a></div></div>
<div class="ttc" id="channel_8h_html_aa62371d642974c67a0c0efa77d54fcbda1cec91607109bb73e86c4fa1c2ae9344"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa62371d642974c67a0c0efa77d54fcbda1cec91607109bb73e86c4fa1c2ae9344">AST_CHAN_TP_INTERNAL</a></div><div class="ttdoc">Channels with this particular technology are an implementation detail of Asterisk and should generall...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00972">channel.h:972</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a18cf70ed9355f9f7ed5b1ec5615752f1"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a18cf70ed9355f9f7ed5b1ec5615752f1">AST_REDIRECTING_PRIV_ORIG_SUBADDRESS_ODD_EVEN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09318">channel.c:9318</a></div></div>
<div class="ttc" id="channel_8c_html_ab1c04d237cea67fefadaacc3f79497fa"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ab1c04d237cea67fefadaacc3f79497fa">ast_party_id_reset</a></div><div class="ttdeci">void ast_party_id_reset(struct ast_party_id *id)</div><div class="ttdoc">Destroy and initialize the given party id structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01896">channel.c:1896</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="structast__party__subaddress__ies_html_abdb47e1d1ee801bd19a649e8f556c641"><div class="ttname"><a href="../../d3/d05/structast__party__subaddress__ies.html#abdb47e1d1ee801bd19a649e8f556c641">ast_party_subaddress_ies::odd_even_indicator</a></div><div class="ttdeci">int odd_even_indicator</div><div class="ttdoc">odd/even indicator ie </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08573">channel.c:8573</a></div></div>
<div class="ttc" id="channel_8c_html_a5dd820022b230cab3e008926e1496b59"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a5dd820022b230cab3e008926e1496b59">ast_state2str</a></div><div class="ttdeci">const char * ast_state2str(enum ast_channel_state state)</div><div class="ttdoc">Gives the string form of a given channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00642">channel.c:642</a></div></div>
<div class="ttc" id="channel_8h_html_a16ef76c1e3a076b0daffda589ed8ab1a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a16ef76c1e3a076b0daffda589ed8ab1a">ast_channel_caller_set</a></div><div class="ttdeci">void ast_channel_caller_set(struct ast_channel *chan, struct ast_party_caller *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00944">channel_internal_api.c:944</a></div></div>
<div class="ttc" id="channel_8c_html_ad5963dfda0d2c9bcff0b32ed8fc1bd0a"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ad5963dfda0d2c9bcff0b32ed8fc1bd0a">apply_plc</a></div><div class="ttdeci">static void apply_plc(struct ast_channel *chan, struct ast_frame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05151">channel.c:5151</a></div></div>
<div class="ttc" id="alertpipe_8h_html_a8b0f1871693fb6fffd5f0a7b8d9e6ed3a35e526325a03e771cb524619341f7642"><div class="ttname"><a href="../../dc/d4d/alertpipe_8h.html#a8b0f1871693fb6fffd5f0a7b8d9e6ed3a35e526325a03e771cb524619341f7642">AST_ALERT_READ_FATAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4d/alertpipe_8h_source.html#l00028">alertpipe.h:28</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a83603fdcfd14d19e521ce76a53feb588"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a83603fdcfd14d19e521ce76a53feb588">AST_REDIRECTING_PRIV_TO_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09294">channel.c:9294</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a2bc1562da560648c0471d7d8e74ce7ff"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a2bc1562da560648c0471d7d8e74ce7ff">AST_REDIRECTING_FROM_NUMBER_PRESENTATION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09262">channel.c:9262</a></div></div>
<div class="ttc" id="causes_8h_html_a0a1f47a998dce290a36a1871f6f3b8bd"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a0a1f47a998dce290a36a1871f6f3b8bd">AST_CAUSE_NUMBER_PORTED_NOT_HERE</a></div><div class="ttdeci">#define AST_CAUSE_NUMBER_PORTED_NOT_HERE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00104">causes.h:104</a></div></div>
<div class="ttc" id="causes_8h_html_ab4fe7bb5c29ba772e6a52aeeb9dc5548"><div class="ttname"><a href="../../d4/da3/causes_8h.html#ab4fe7bb5c29ba772e6a52aeeb9dc5548">AST_CAUSE_FACILITY_NOT_IMPLEMENTED</a></div><div class="ttdeci">#define AST_CAUSE_FACILITY_NOT_IMPLEMENTED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00132">causes.h:132</a></div></div>
<div class="ttc" id="causes_8h_html_a9462c5c03560a909199202e6e2dbad3f"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a9462c5c03560a909199202e6e2dbad3f">AST_CAUSE_NOTDEFINED</a></div><div class="ttdeci">#define AST_CAUSE_NOTDEFINED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00154">causes.h:154</a></div></div>
<div class="ttc" id="structast__channel__tech_html"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html">ast_channel_tech</a></div><div class="ttdoc">Structure to describe a channel &quot;technology&quot;, ie a channel driver See for examples: ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00629">channel.h:629</a></div></div>
<div class="ttc" id="channel_8h_html_aed40a28831fcb5791cd63c1b8761d659"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aed40a28831fcb5791cd63c1b8761d659">ast_channel_adsicpe_set</a></div><div class="ttdeci">void ast_channel_adsicpe_set(struct ast_channel *chan, enum ast_channel_adsicpe value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00785">channel_internal_api.c:785</a></div></div>
<div class="ttc" id="channel_8h_html_aa8b52fbc8168e939bc5553502367d46a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a></div><div class="ttdeci">const char * ast_channel_exten(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00353">channel_internal_api.c:353</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a29ff71f9d5c7927906ebd437fe372056"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a29ff71f9d5c7927906ebd437fe372056">AST_FRAME_NULL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00107">include/asterisk/frame.h:107</a></div></div>
<div class="ttc" id="channel_8h_html_a0def826adf4c20a4d185426b25ca15b6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a0def826adf4c20a4d185426b25ca15b6">ast_timing_func_t</a></div><div class="ttdeci">int(* ast_timing_func_t)(const void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00900">channel.h:900</a></div></div>
<div class="ttc" id="pbx_8h_html"><div class="ttname"><a href="../../db/de0/pbx_8h.html">pbx.h</a></div><div class="ttdoc">Core PBX routines and definitions. </div></div>
<div class="ttc" id="endpoints_8h_html_a906684cda6f8960885faf9564809cfe4"><div class="ttname"><a href="../../d4/d61/endpoints_8h.html#a906684cda6f8960885faf9564809cfe4">ast_endpoint_add_channel</a></div><div class="ttdeci">int ast_endpoint_add_channel(struct ast_endpoint *endpoint, struct ast_channel *chan)</div><div class="ttdoc">Adds a channel to the given endpoint. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d4b/main_2endpoints_8c_source.html#l00164">main/endpoints.c:164</a></div></div>
<div class="ttc" id="channel_8c_html_a5db46ecae7f0dd58545cd8b98cc7491b"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a5db46ecae7f0dd58545cd8b98cc7491b">ari_vars</a></div><div class="ttdeci">static struct external_vars ari_vars</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07934">channel.c:7934</a></div></div>
<div class="ttc" id="channel_8c_html_a005ef840127571c2018c6383c5fe18ac"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a005ef840127571c2018c6383c5fe18ac">ast_party_subaddress_copy</a></div><div class="ttdeci">void ast_party_subaddress_copy(struct ast_party_subaddress *dest, const struct ast_party_subaddress *src)</div><div class="ttdoc">Copy the source party subaddress information to the destination party subaddress. ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01705">channel.c:1705</a></div></div>
<div class="ttc" id="format__cache_8h_html_a309515067d94f11b99659093c5beefee"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a309515067d94f11b99659093c5beefee">ast_format_cache_is_slinear</a></div><div class="ttdeci">int ast_format_cache_is_slinear(struct ast_format *format)</div><div class="ttdoc">Determines if a format is one of the cached slin formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00542">format_cache.c:542</a></div></div>
<div class="ttc" id="structast__channel__tech_html_ad58ac369cd858333170a0a21e4a5307c"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#ad58ac369cd858333170a0a21e4a5307c">ast_channel_tech::pre_call</a></div><div class="ttdeci">int(* pre_call)(struct ast_channel *chan, const char *sub_args)</div><div class="ttdoc">Execute a Gosub call on the channel in a technology specific way before a call is placed...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00842">channel.h:842</a></div></div>
<div class="ttc" id="channel_8h_html_a37dd62f9ca2a7d263997319902554bf0"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a37dd62f9ca2a7d263997319902554bf0">ast_channel_dtmf_tv_set</a></div><div class="ttdeci">void ast_channel_dtmf_tv_set(struct ast_channel *chan, struct timeval *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00964">channel_internal_api.c:964</a></div></div>
<div class="ttc" id="channel_8h_html_a08bde7d8cf72457fc8c519a4443b413b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a></div><div class="ttdeci">int ast_autoservice_stop(struct ast_channel *chan)</div><div class="ttdoc">Stop servicing a channel for us... </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00266">autoservice.c:266</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a01a4aa5b3dc6e6ebadb3c7b93a313668"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a01a4aa5b3dc6e6ebadb3c7b93a313668">AST_REDIRECTING_FROM_NAME_PRESENTATION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09260">channel.c:9260</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="format__cap_8h_html_a4dc6fa9191c19396cfaa57113f5b4af2"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a4dc6fa9191c19396cfaa57113f5b4af2">ast_format_cap_remove_by_type</a></div><div class="ttdeci">void ast_format_cap_remove_by_type(struct ast_format_cap *cap, enum ast_media_type type)</div><div class="ttdoc">Remove all formats matching a specific format type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00525">format_cap.c:525</a></div></div>
<div class="ttc" id="structchanlist_html_a5023e29d4234076952bfecfff178b566"><div class="ttname"><a href="../../dd/d6f/structchanlist.html#a5023e29d4234076952bfecfff178b566">chanlist::connected</a></div><div class="ttdeci">struct ast_party_connected_line connected</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d12/app__dial_8c_source.html#l00809">app_dial.c:809</a></div></div>
<div class="ttc" id="channel_8c_html_afbb24da777f6a7ca9b24918a63e048da"><div class="ttname"><a href="../../d4/d28/channel_8c.html#afbb24da777f6a7ca9b24918a63e048da">ast_channel_get_cc_agent_type</a></div><div class="ttdeci">int ast_channel_get_cc_agent_type(struct ast_channel *chan, char *agent_type, size_t size)</div><div class="ttdoc">Find the appropriate CC agent type to use given a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10714">channel.c:10714</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a913527aea7faf5dde5462bd05d51b0eb"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a913527aea7faf5dde5462bd05d51b0eb">AST_REDIRECTING_PRIV_TO_NAME_PRESENTATION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09289">channel.c:9289</a></div></div>
<div class="ttc" id="structast__set__party__connected__line_html_a1ad0a1732e669f57e5b6e609affdd1db"><div class="ttname"><a href="../../d4/dc9/structast__set__party__connected__line.html#a1ad0a1732e669f57e5b6e609affdd1db">ast_set_party_connected_line::priv</a></div><div class="ttdeci">struct ast_set_party_id priv</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00496">channel.h:496</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a21be6da4b2146b04b4868c2be5cae750"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00544">linkedlists.h:544</a></div></div>
<div class="ttc" id="channel_8c_html_a0f5bbcd11fd11047a7bc2312328b3694"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a0f5bbcd11fd11047a7bc2312328b3694">channel_req_accountcodes</a></div><div class="ttdeci">static void channel_req_accountcodes(struct ast_channel *chan, const struct ast_channel *requestor, enum ast_channel_requestor_relationship relationship, int precious)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06468">channel.c:6468</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a20b9655c65064608e5a64eb4d905260b"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a20b9655c65064608e5a64eb4d905260b">AST_REDIRECTING_PRIV_TO_NUMBER_PRESENTATION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09285">channel.c:9285</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">include/asterisk/frame.h:105</a></div></div>
<div class="ttc" id="say_8h_html_ab73ba7bbfc3824448a2cd4f0c6d050c6"><div class="ttname"><a href="../../db/dce/say_8h.html#ab73ba7bbfc3824448a2cd4f0c6d050c6">ast_say_case_sensitivity</a></div><div class="ttdeci">ast_say_case_sensitivity</div><div class="ttdoc">Controls how ast_say_character_str denotes the case of characters in a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dce/say_8h_source.html#l00162">say.h:162</a></div></div>
<div class="ttc" id="causes_8h_html_a51ccdf5c6aa26375323fd14cfef02618"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a51ccdf5c6aa26375323fd14cfef02618">AST_CAUSE_DESTINATION_OUT_OF_ORDER</a></div><div class="ttdeci">#define AST_CAUSE_DESTINATION_OUT_OF_ORDER</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00114">causes.h:114</a></div></div>
<div class="ttc" id="channel_8c_html_a69e15b8ba1fce7a1b72e8bae1acaee37"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a69e15b8ba1fce7a1b72e8bae1acaee37">ast_channel_amaflags2string</a></div><div class="ttdeci">const char * ast_channel_amaflags2string(enum ama_flags flag)</div><div class="ttdoc">Convert the enum representation of an AMA flag to a string representation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04418">channel.c:4418</a></div></div>
<div class="ttc" id="sched_8h_html_a5baecc149aeabdbef9b3ed6780c1c4a6"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a5baecc149aeabdbef9b3ed6780c1c4a6">ast_sched_context_create</a></div><div class="ttdeci">struct ast_sched_context * ast_sched_context_create(void)</div><div class="ttdoc">Create a scheduler context. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00236">sched.c:236</a></div></div>
<div class="ttc" id="structast__stream__topology_html"><div class="ttname"><a href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00123">stream.c:123</a></div></div>
<div class="ttc" id="test_8h_html_a9482d93ea3931853331bdbc745ce7cb4"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a></div><div class="ttdeci">#define ast_test_suite_event_notify(s, f,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00196">test.h:196</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="channel_8h_html_a3e3e7e66e65ad9cdba2299e36b13e173"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3e3e7e66e65ad9cdba2299e36b13e173">ast_channel_fdno</a></div><div class="ttdeci">int ast_channel_fdno(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00419">channel_internal_api.c:419</a></div></div>
<div class="ttc" id="channel_8h_html_ae38736e53a58aceb4fb010b61905edba"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae38736e53a58aceb4fb010b61905edba">ast_channel_masqr_set</a></div><div class="ttdeci">void ast_channel_masqr_set(struct ast_channel *chan, struct ast_channel *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00609">channel_internal_api.c:609</a></div></div>
<div class="ttc" id="channel_8h_html_a5cf408e716fdcb9c5e303c2998a3237b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a5cf408e716fdcb9c5e303c2998a3237b">ast_channel_timingdata_set</a></div><div class="ttdeci">void ast_channel_timingdata_set(struct ast_channel *chan, void *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00577">channel_internal_api.c:577</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="structframe__list_html"><div class="ttname"><a href="../../d9/d42/structframe__list.html">frame_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00590">res_rtp_asterisk.c:590</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0">ast_frame_type</a></div><div class="ttdeci">ast_frame_type</div><div class="ttdoc">Frame types. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00097">include/asterisk/frame.h:97</a></div></div>
<div class="ttc" id="channel_8c_html_a03c5d60f7e6977f549939972c1503271"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a03c5d60f7e6977f549939972c1503271">ast_senddigit_mf_begin</a></div><div class="ttdeci">int ast_senddigit_mf_begin(struct ast_channel *chan, char digit)</div><div class="ttdoc">Send an MF digit to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04880">channel.c:4880</a></div></div>
<div class="ttc" id="channel_8c_html_ac8bce0bf79829c59a7671c4eff83a31f"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ac8bce0bf79829c59a7671c4eff83a31f">ast_party_redirecting_free</a></div><div class="ttdeci">void ast_party_redirecting_free(struct ast_party_redirecting *doomed)</div><div class="ttdoc">Destroy the redirecting information contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02179">channel.c:2179</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="channel_8c_html_a01a29e89df22b89cd98b70914d1aa40c"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a01a29e89df22b89cd98b70914d1aa40c">channel_do_masquerade</a></div><div class="ttdeci">static void channel_do_masquerade(struct ast_channel *original, struct ast_channel *clonechan)</div><div class="ttdoc">Masquerade a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06952">channel.c:6952</a></div></div>
<div class="ttc" id="channel_8c_html_a5d3c15fe1dffda82e6dc03ca7b26526a"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a5d3c15fe1dffda82e6dc03ca7b26526a">ast_party_connected_line_copy</a></div><div class="ttdeci">void ast_party_connected_line_copy(struct ast_party_connected_line *dest, const struct ast_party_connected_line *src)</div><div class="ttdoc">Copy the source connected line information to the destination connected line. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02031">channel.c:2031</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a91794e42131b7edc3119b92d789f8268"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a91794e42131b7edc3119b92d789f8268">ast_bridge_features_merge</a></div><div class="ttdeci">void ast_bridge_features_merge(struct ast_bridge_features *into, const struct ast_bridge_features *from)</div><div class="ttdoc">Merge one ast_bridge_features into another. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03662">bridge.c:3662</a></div></div>
<div class="ttc" id="channel_8h_html_aa1a82c77c44469cd524ebb00357f673b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa1a82c77c44469cd524ebb00357f673b">ast_channel_timingfd</a></div><div class="ttdeci">int ast_channel_timingfd(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00469">channel_internal_api.c:469</a></div></div>
<div class="ttc" id="structast__channel_html_abe3b191f9529aba5e60447f982310648"><div class="ttname"><a href="../../df/d3c/structast__channel.html#abe3b191f9529aba5e60447f982310648">ast_channel::dialed</a></div><div class="ttdeci">struct ast_party_dialed dialed</div><div class="ttdoc">Dialed/Called information. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00126">channel_internal_api.c:126</a></div></div>
<div class="ttc" id="channel_8c_html_a4aff0f5358bdc107a92320b4c4631834"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a4aff0f5358bdc107a92320b4c4631834">ast_channel_make_compatible</a></div><div class="ttdeci">int ast_channel_make_compatible(struct ast_channel *chan, struct ast_channel *peer)</div><div class="ttdoc">Make the frame formats of two channels compatible. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06817">channel.c:6817</a></div></div>
<div class="ttc" id="channel_8c_html_af42ae38a2ed095a74cd2a8c7f65a7749"><div class="ttname"><a href="../../d4/d28/channel_8c.html#af42ae38a2ed095a74cd2a8c7f65a7749">DEFAULT_AMA_FLAGS</a></div><div class="ttdeci">#define DEFAULT_AMA_FLAGS</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00108">channel.c:108</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a86383247bc5ded6d5522d25139a71f4e"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a86383247bc5ded6d5522d25139a71f4e">AST_REDIRECTING_COUNT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09242">channel.c:9242</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5a67415c9cab64152013f660deee6acef6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a67415c9cab64152013f660deee6acef6">AST_FLAG_DEAD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01046">channel.h:1046</a></div></div>
<div class="ttc" id="channel_8c_html_a3212119ca5acac4c9ec6051987380876ad395bd248b37cc85f35d206c73a7c802"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876ad395bd248b37cc85f35d206c73a7c802">AST_CONNECTED_LINE_SUBADDRESS_TYPE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08764">channel.c:8764</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a10624bc470a4ac2634221dfa74bdb17fa79554349b620ac61794e76cb70eef322"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a10624bc470a4ac2634221dfa74bdb17fa79554349b620ac61794e76cb70eef322">AST_GETDATA_TIMEOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01157">include/asterisk/app.h:1157</a></div></div>
<div class="ttc" id="channel_8c_html_a3212119ca5acac4c9ec6051987380876acc93a99a2ec2485a955b9dface8ebf86"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876acc93a99a2ec2485a955b9dface8ebf86">AST_CONNECTED_LINE_NAME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08759">channel.c:8759</a></div></div>
<div class="ttc" id="channel_8c_html_a4029626a4c61de707ff021b7af7c3767"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a4029626a4c61de707ff021b7af7c3767">ast_readstring_full</a></div><div class="ttdeci">int ast_readstring_full(struct ast_channel *c, char *s, int len, int timeout, int ftimeout, char *enders, int audiofd, int ctrlfd)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06660">channel.c:6660</a></div></div>
<div class="ttc" id="structast__party__redirecting__reason_html"><div class="ttname"><a href="../../d1/dee/structast__party__redirecting__reason.html">ast_party_redirecting_reason</a></div><div class="ttdoc">Redirecting reason information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00502">channel.h:502</a></div></div>
<div class="ttc" id="manager_8h_html"><div class="ttname"><a href="../../db/d45/manager_8h.html">manager.h</a></div><div class="ttdoc">The AMI - Asterisk Manager Interface - is a TCP protocol created to manage Asterisk with third-party ...</div></div>
<div class="ttc" id="framehook_8h_html_aa169f02b832ec449533552ec590ed54d"><div class="ttname"><a href="../../db/d3c/framehook_8h.html#aa169f02b832ec449533552ec590ed54d">ast_framehook_list_fixup</a></div><div class="ttdeci">void ast_framehook_list_fixup(struct ast_channel *old_chan, struct ast_channel *new_chan)</div><div class="ttdoc">This is used by the channel API during a masquerade operation to move all mobile framehooks from the ...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dac/framehook_8c_source.html#l00223">framehook.c:223</a></div></div>
<div class="ttc" id="structast__party__id__ies_html_aab34f2fc02b4a86bea93c68e1ec09d75"><div class="ttname"><a href="../../d5/d23/structast__party__id__ies.html#aab34f2fc02b4a86bea93c68e1ec09d75">ast_party_id_ies::tag</a></div><div class="ttdeci">int tag</div><div class="ttdoc">User party id tag ie. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08650">channel.c:8650</a></div></div>
<div class="ttc" id="channel_8c_html_a9b4476ddb41746948476b2ac7a9875a4"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a9b4476ddb41746948476b2ac7a9875a4">ast_waitfordigit_full</a></div><div class="ttdeci">int ast_waitfordigit_full(struct ast_channel *c, int timeout_ms, const char *breakon, int audiofd, int cmdfd)</div><div class="ttdoc">Wait for a digit Same as ast_waitfordigit() with audio fd for outputting read audio and ctrlfd to mon...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03248">channel.c:3248</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ad99b86353343f422bda01163898b2eea"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ad99b86353343f422bda01163898b2eea">AST_FRAME_MODEM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00123">include/asterisk/frame.h:123</a></div></div>
<div class="ttc" id="structast__party__id_html_a10023f503341f2b8c82117b31a0cc531"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#a10023f503341f2b8c82117b31a0cc531">ast_party_id::subaddress</a></div><div class="ttdeci">struct ast_party_subaddress subaddress</div><div class="ttdoc">Subscriber subaddress. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00345">channel.h:345</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaf195fcf1686408b5e52ad76996653cea"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaf195fcf1686408b5e52ad76996653cea">ast_channel_stage_snapshot</a></div><div class="ttdeci">void ast_channel_stage_snapshot(struct ast_channel *chan)</div><div class="ttdoc">Set flag to indicate channel snapshot is being staged. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01038">stasis_channels.c:1038</a></div></div>
<div class="ttc" id="autochan_8h_html"><div class="ttname"><a href="../../d8/d6c/autochan_8h.html">autochan.h</a></div><div class="ttdoc">&quot;smart&quot; channels that update automatically if a channel is masqueraded </div></div>
<div class="ttc" id="structast__party__dialed_html"><div class="ttname"><a href="../../d1/dd1/structast__party__dialed.html">ast_party_dialed</a></div><div class="ttdoc">Dialed/Called Party information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00379">channel.h:379</a></div></div>
<div class="ttc" id="dsp_8c_html_a91a715aad7eb8bd2f4cd29197fc6b24a"><div class="ttname"><a href="../../d5/d3b/dsp_8c.html#a91a715aad7eb8bd2f4cd29197fc6b24a">mf_tones</a></div><div class="ttdeci">static const float mf_tones[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l00323">dsp.c:323</a></div></div>
<div class="ttc" id="channel_8c_html_a5b86e78e2398f42198590bf33c28ef40"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a5b86e78e2398f42198590bf33c28ef40">namedgroup_hash_cb</a></div><div class="ttdeci">static int namedgroup_hash_cb(const void *obj, const int flags)</div><div class="ttdoc">Hashing function used for named group container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07768">channel.c:7768</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792ac17c7d55ca7591ced257a733db5e551f"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ac17c7d55ca7591ced257a733db5e551f">AST_REDIRECTING_TO_SUBADDRESS_VALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09250">channel.c:9250</a></div></div>
<div class="ttc" id="channel_8c_html_a4553faa9cf1e184164ebb526693585f0"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a4553faa9cf1e184164ebb526693585f0">DtmfDirection</a></div><div class="ttdeci">DtmfDirection</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03361">channel.c:3361</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="causes_8h_html_a66e303e9085c143381179b613490fa58"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a66e303e9085c143381179b613490fa58">AST_CAUSE_FACILITY_NOT_SUBSCRIBED</a></div><div class="ttdeci">#define AST_CAUSE_FACILITY_NOT_SUBSCRIBED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00125">causes.h:125</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a39596e00e2981e5823aba4c98f6d16da"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a39596e00e2981e5823aba4c98f6d16da">AST_REDIRECTING_PRIV_FROM_NAME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09299">channel.c:9299</a></div></div>
<div class="ttc" id="structast__trans__pvt_html_a86b8aa56638c94a9119b2dab1f006d45"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html#a86b8aa56638c94a9119b2dab1f006d45">ast_trans_pvt::interleaved_stereo</a></div><div class="ttdeci">int interleaved_stereo</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00238">translate.h:238</a></div></div>
<div class="ttc" id="timing_8h_html_a338edb7e927b891ef4aba288d9c07e56"><div class="ttname"><a href="../../db/d41/timing_8h.html#a338edb7e927b891ef4aba288d9c07e56">ast_timer_ack</a></div><div class="ttdeci">int ast_timer_ack(const struct ast_timer *handle, unsigned int quantity)</div><div class="ttdoc">Acknowledge a timer event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d62/timing_8c_source.html#l00171">timing.c:171</a></div></div>
<div class="ttc" id="channel_8c_html_a65d86fdffdd9c52b17b79b069cd0c6cb"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a65d86fdffdd9c52b17b79b069cd0c6cb">ast_party_connected_line_set</a></div><div class="ttdeci">void ast_party_connected_line_set(struct ast_party_connected_line *dest, const struct ast_party_connected_line *src, const struct ast_set_party_connected_line *update)</div><div class="ttdoc">Set the connected line information based on another connected line source. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02054">channel.c:2054</a></div></div>
<div class="ttc" id="structast__set__party__id_html"><div class="ttname"><a href="../../df/dcf/structast__set__party__id.html">ast_set_party_id</a></div><div class="ttdoc">Indicate what information in ast_party_id should be set. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00362">channel.h:362</a></div></div>
<div class="ttc" id="channel_8h_html_aa6ceb6b9067d793c4d00c566ae585f0b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa6ceb6b9067d793c4d00c566ae585f0b">ast_channel_rawreadformat</a></div><div class="ttdeci">struct ast_format * ast_channel_rawreadformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00848">channel_internal_api.c:848</a></div></div>
<div class="ttc" id="framehook_8h_html_a54250544f50efde9156d2341e8da0614ab652eafa2595533d8c065a6ac426aa8a"><div class="ttname"><a href="../../db/d3c/framehook_8h.html#a54250544f50efde9156d2341e8da0614ab652eafa2595533d8c065a6ac426aa8a">AST_FRAMEHOOK_EVENT_READ</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d3c/framehook_8h_source.html#l00152">framehook.h:152</a></div></div>
<div class="ttc" id="channel_8c_html_a3212119ca5acac4c9ec6051987380876a28c6714cf6b9fc587d16be9b3800c354"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a28c6714cf6b9fc587d16be9b3800c354">AST_CONNECTED_LINE_PRIV_NUMBER_PRESENTATION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08781">channel.c:8781</a></div></div>
<div class="ttc" id="channel_8c_html_a6f3f42365ac84d888b55e35e1309f067"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a6f3f42365ac84d888b55e35e1309f067">ast_channel_req_accountcodes</a></div><div class="ttdeci">void ast_channel_req_accountcodes(struct ast_channel *chan, const struct ast_channel *requestor, enum ast_channel_requestor_relationship relationship)</div><div class="ttdoc">Setup new channel accountcodes from the requestor channel after ast_request(). </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06526">channel.c:6526</a></div></div>
<div class="ttc" id="structast__var__t_html_a2a7f851274ec18e17d38114c39b8511a"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html#a2a7f851274ec18e17d38114c39b8511a">ast_var_t::name</a></div><div class="ttdeci">char name[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00031">chanvars.h:31</a></div></div>
<div class="ttc" id="channel_8c_html_a83631e0dc02a50802cf857caa3fdc1d7"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a83631e0dc02a50802cf857caa3fdc1d7">ast_sendtext</a></div><div class="ttdeci">int ast_sendtext(struct ast_channel *chan, const char *text)</div><div class="ttdoc">Sends text to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04854">channel.c:4854</a></div></div>
<div class="ttc" id="channel_8c_html_ab7c03b95bdfaed8f38ecd45e93c868d3"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ab7c03b95bdfaed8f38ecd45e93c868d3">ast_say_phonetic_str</a></div><div class="ttdeci">int ast_say_phonetic_str(struct ast_channel *chan, const char *str, const char *ints, const char *lang)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08373">channel.c:8373</a></div></div>
<div class="ttc" id="causes_8h_html_a6028a36269ddc097d8fec02832c6c489"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a6028a36269ddc097d8fec02832c6c489">AST_CAUSE_REDIRECTED_TO_NEW_DESTINATION</a></div><div class="ttdeci">#define AST_CAUSE_REDIRECTED_TO_NEW_DESTINATION</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00112">causes.h:112</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a11d7be890d1517ea33fc69f3d07353d9"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a11d7be890d1517ea33fc69f3d07353d9">AST_REDIRECTING_PRIV_TO_NAME_VALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09287">channel.c:9287</a></div></div>
<div class="ttc" id="channel_8h_html_acd3470664b6a002c9a379a69ddad4cb2"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#acd3470664b6a002c9a379a69ddad4cb2">ast_channel_sched</a></div><div class="ttdeci">struct ast_sched_context * ast_channel_sched(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00729">channel_internal_api.c:729</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="time_8h_html_a6daa33e2052acd094bb63e78aba29733"><div class="ttname"><a href="../../de/df7/time_8h.html#a6daa33e2052acd094bb63e78aba29733">ast_tvcmp</a></div><div class="ttdeci">int ast_tvcmp(struct timeval _a, struct timeval _b)</div><div class="ttdoc">Compres two struct timeval instances returning -1, 0, 1 if the first arg is smaller, equal or greater to the second. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00128">time.h:128</a></div></div>
<div class="ttc" id="channel_8c_html_a1a5760823cd16fd0343e489efd9c8f89"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a1a5760823cd16fd0343e489efd9c8f89">ast_party_redirecting_init</a></div><div class="ttdeci">void ast_party_redirecting_init(struct ast_party_redirecting *init)</div><div class="ttdoc">Initialize the given redirecting structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02122">channel.c:2122</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4d258b4525e63c435d7de579d3f46960"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_LIST_INSERT_TAIL(head, elm, field)</div><div class="ttdoc">Appends a list entry to the tail of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00730">linkedlists.h:730</a></div></div>
<div class="ttc" id="channel_8h_html_a6fa8e680c963b66575d1950c19493b40"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6fa8e680c963b66575d1950c19493b40">ast_channel_generator</a></div><div class="ttdeci">struct ast_generator * ast_channel_generator(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00713">channel_internal_api.c:713</a></div></div>
<div class="ttc" id="astobj2_8h_html_aefc16f8aa9087cbc5c55c70cf1dd41b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a></div><div class="ttdeci">#define ao2_container_alloc_hash(ao2_options, container_options, n_buckets, hash_fn, sort_fn, cmp_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01310">astobj2.h:1310</a></div></div>
<div class="ttc" id="channel_8c_html_a6a3c72ab1f5f7853b391f2c53fa292bd"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a6a3c72ab1f5f7853b391f2c53fa292bd">ast_party_caller_copy</a></div><div class="ttdeci">void ast_party_caller_copy(struct ast_party_caller *dest, const struct ast_party_caller *src)</div><div class="ttdoc">Copy the source caller information to the destination caller. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01986">channel.c:1986</a></div></div>
<div class="ttc" id="audiohook_8h_html_a6351c89eb98b1832e85fa9c0fca7383f"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a6351c89eb98b1832e85fa9c0fca7383f">ast_audiohook_write_list</a></div><div class="ttdeci">struct ast_frame * ast_audiohook_write_list(struct ast_channel *chan, struct ast_audiohook_list *audiohook_list, enum ast_audiohook_direction direction, struct ast_frame *frame)</div><div class="ttdoc">Pass a frame off to be handled by the audiohook core. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l01127">audiohook.c:1127</a></div></div>
<div class="ttc" id="channel_8c_html_a7842ee71c0bc94136702ae1517a6ba2c"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a7842ee71c0bc94136702ae1517a6ba2c">ast_party_redirecting_reason_set_init</a></div><div class="ttdeci">void ast_party_redirecting_reason_set_init(struct ast_party_redirecting_reason *init, const struct ast_party_redirecting_reason *guide)</div><div class="ttdoc">Initialize the given redirecting reason structure using the given guide for a set update operation...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02096">channel.c:2096</a></div></div>
<div class="ttc" id="options_8h_html_a48887ee8724c584209e55362bc887b43"><div class="ttname"><a href="../../d7/d5b/options_8h.html#a48887ee8724c584209e55362bc887b43">ast_opt_transcode_via_slin</a></div><div class="ttdeci">#define ast_opt_transcode_via_slin</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00116">options.h:116</a></div></div>
<div class="ttc" id="structast__channel__tech_html_afa7782a9f08ff818e7ba3d3fe730f028"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#afa7782a9f08ff818e7ba3d3fe730f028">ast_channel_tech::write_stream</a></div><div class="ttdeci">int(*const write_stream)(struct ast_channel *chan, int stream_num, struct ast_frame *frame)</div><div class="ttdoc">Write a frame on a specific stream, in standard format (see frame.h) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00754">channel.h:754</a></div></div>
<div class="ttc" id="channel_8c_html_aeb3a7f0b3a2ac940aefeacc2a3843d0c"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aeb3a7f0b3a2ac940aefeacc2a3843d0c">__ast_dummy_channel_alloc</a></div><div class="ttdeci">struct ast_channel * __ast_dummy_channel_alloc(const char *file, int line, const char *function)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00981">channel.c:981</a></div></div>
<div class="ttc" id="channel_8c_html_ab49e5db54f7c4f193c7e1ae4a8eb7cf5"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ab49e5db54f7c4f193c7e1ae4a8eb7cf5">ast_channel_has_ari_vars</a></div><div class="ttdeci">int ast_channel_has_ari_vars(void)</div><div class="ttdoc">Return whether or not any ARI variables have been set. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07962">channel.c:7962</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00099">include/asterisk/frame.h:99</a></div></div>
<div class="ttc" id="channel_8c_html_a23323032f4b0fbab003874dd2c74d1e4"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a23323032f4b0fbab003874dd2c74d1e4">ast_channel_callback</a></div><div class="ttdeci">struct ast_channel * ast_channel_callback(ao2_callback_data_fn *cb_fn, void *arg, void *data, int ao2_flags)</div><div class="ttdoc">Call a function with every active channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01278">channel.c:1278</a></div></div>
<div class="ttc" id="channel_8h_html_a70d5efd26b6272df04b33acc2a810ca7"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a70d5efd26b6272df04b33acc2a810ca7">ast_channel_dtmf_tv</a></div><div class="ttdeci">struct timeval * ast_channel_dtmf_tv(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00924">channel_internal_api.c:924</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="ccss_8h_html_a4ddce85b8dc1ffed466880d7f2a92a2a"><div class="ttname"><a href="../../de/dc8/ccss_8h.html#a4ddce85b8dc1ffed466880d7f2a92a2a">ast_cc_offer</a></div><div class="ttdeci">int ast_cc_offer(struct ast_channel *caller_chan)</div><div class="ttdoc">Offer CC to a caller. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/ccss_8c_source.html#l03751">ccss.c:3751</a></div></div>
<div class="ttc" id="app__fax_8c_html_a36aeb2eb01afb248bad64a309d743636"><div class="ttname"><a href="../../df/dde/app__fax_8c.html#a36aeb2eb01afb248bad64a309d743636">generator</a></div><div class="ttdeci">static struct ast_generator generator</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dde/app__fax_8c_source.html#l00359">app_fax.c:359</a></div></div>
<div class="ttc" id="structast__format__cap_html"><div class="ttname"><a href="../../d8/d69/structast__format__cap.html">ast_format_cap</a></div><div class="ttdoc">Format capabilities structure, holds formats + preference order + etc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00054">format_cap.c:54</a></div></div>
<div class="ttc" id="structast__trans__pvt_html"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a></div><div class="ttdoc">Default structure for translators, with the basic fields and buffers, all allocated as part of the sa...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00213">translate.h:213</a></div></div>
<div class="ttc" id="channel_8c_html_a256993c64e12e420aa141c07363db3ef"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a256993c64e12e420aa141c07363db3ef">ast_channel_iterator_destroy</a></div><div class="ttdeci">struct ast_channel_iterator * ast_channel_iterator_destroy(struct ast_channel_iterator *i)</div><div class="ttdoc">Destroy a channel iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01360">channel.c:1360</a></div></div>
<div class="ttc" id="causes_8h_html_a289abb4f85a690f73b6ad6612f186adc"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a289abb4f85a690f73b6ad6612f186adc">AST_CAUSE_CALL_AWARDED_DELIVERED</a></div><div class="ttdeci">#define AST_CAUSE_CALL_AWARDED_DELIVERED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00102">causes.h:102</a></div></div>
<div class="ttc" id="channel_8c_html_ac7ca5a25b9aad3ecedef29c3725ef112"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ac7ca5a25b9aad3ecedef29c3725ef112">ast_waitfor_n</a></div><div class="ttdeci">struct ast_channel * ast_waitfor_n(struct ast_channel **c, int n, int *ms)</div><div class="ttdoc">Waits for input on a group of channels Wait for input on an array of channels for a given # of millis...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03166">channel.c:3166</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba">AST_CONTROL_HANGUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00278">include/asterisk/frame.h:278</a></div></div>
<div class="ttc" id="channel__internal_8h_html"><div class="ttname"><a href="../../d5/de4/channel__internal_8h.html">channel_internal.h</a></div><div class="ttdoc">Internal channel functions for channel.c to use. </div></div>
<div class="ttc" id="stream_8h_html_ae0d846e650b6d3e654c01d61a991c82c"><div class="ttname"><a href="../../d8/d95/stream_8h.html#ae0d846e650b6d3e654c01d61a991c82c">ast_stream_topology_equal</a></div><div class="ttdeci">int ast_stream_topology_equal(const struct ast_stream_topology *left, const struct ast_stream_topology *right)</div><div class="ttdoc">Compare two stream topologies to see if they are equal. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00696">stream.c:696</a></div></div>
<div class="ttc" id="channel_8h_html_aef2286af98791d3c4495df23c3bfb9d6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aef2286af98791d3c4495df23c3bfb9d6">ast_channel_internal_alertpipe_init</a></div><div class="ttdeci">int ast_channel_internal_alertpipe_init(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01145">channel_internal_api.c:1145</a></div></div>
<div class="ttc" id="channel_8c_html_a672dfa5a82df9cc312b1990d348f44e7"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a672dfa5a82df9cc312b1990d348f44e7">suppress_framehook_event_cb</a></div><div class="ttdeci">static struct ast_frame * suppress_framehook_event_cb(struct ast_channel *chan, struct ast_frame *frame, enum ast_framehook_event event, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10933">channel.c:10933</a></div></div>
<div class="ttc" id="channel_8h_html_a784b9642d6e2862b04b7f970b337549fa57ba8ad197fc6c0839e2984226bb84a8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a784b9642d6e2862b04b7f970b337549fa57ba8ad197fc6c0839e2984226bb84a8">AST_AMA_OMIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01180">channel.h:1180</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a4cc3a70dcfd5c3a977cfdcf2a75d8527"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a4cc3a70dcfd5c3a977cfdcf2a75d8527">AST_REDIRECTING_PRIV_FROM_SUBADDRESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09303">channel.c:9303</a></div></div>
<div class="ttc" id="structast__set__party__redirecting_html_a68de1269d7d668b5fc16c5247f65f9ac"><div class="ttname"><a href="../../de/df8/structast__set__party__redirecting.html#a68de1269d7d668b5fc16c5247f65f9ac">ast_set_party_redirecting::priv_from</a></div><div class="ttdeci">struct ast_set_party_id priv_from</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00566">channel.h:566</a></div></div>
<div class="ttc" id="channel_8c_html_a0a4128eb4aaa22a9efdae8b22649f792"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a0a4128eb4aaa22a9efdae8b22649f792">__ast_channel_alloc_ap</a></div><div class="ttdeci">static struct ast_channel * __ast_channel_alloc_ap(int needqueue, int state, const char *cid_num, const char *cid_name, const char *acctcode, const char *exten, const char *context, const struct ast_assigned_ids *assignedids, const struct ast_channel *requestor, enum ama_flags amaflag, struct ast_endpoint *endpoint, const char *file, int line, const char *function, const char *name_fmt, va_list ap)</div><div class="ttdoc">Create a new channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00739">channel.c:739</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5a919680ef9fe22e78b9b1e718d3b9a745"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a919680ef9fe22e78b9b1e718d3b9a745">AST_FLAG_IN_DTMF</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01002">channel.h:1002</a></div></div>
<div class="ttc" id="astobj2_8h_html_a64f51be4bee35c38dbe59b0a788b5ce8"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a></div><div class="ttdeci">#define ao2_unlink(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01598">astobj2.h:1598</a></div></div>
<div class="ttc" id="structast__var__t_html"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html">ast_var_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00028">chanvars.h:28</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="stream_8h_html_ad225f95d1de536ba61f43150cfe3bd06"><div class="ttname"><a href="../../d8/d95/stream_8h.html#ad225f95d1de536ba61f43150cfe3bd06">ast_stream_topology_alloc</a></div><div class="ttdeci">struct ast_stream_topology * ast_stream_topology_alloc(void)</div><div class="ttdoc">Create a stream topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00650">stream.c:650</a></div></div>
<div class="ttc" id="channel_8c_html_adbc20a2fd50bb1376a3c6094e96a31e3"><div class="ttname"><a href="../../d4/d28/channel_8c.html#adbc20a2fd50bb1376a3c6094e96a31e3">channels</a></div><div class="ttdeci">static struct ao2_container * channels</div><div class="ttdoc">All active channels on the system. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00124">channel.c:124</a></div></div>
<div class="ttc" id="channel_8c_html_a3212119ca5acac4c9ec6051987380876ad5aff16f5c624f934038fafb747e0d01"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876ad5aff16f5c624f934038fafb747e0d01">AST_CONNECTED_LINE_PRIV_SUBADDRESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08786">channel.c:8786</a></div></div>
<div class="ttc" id="channel_8c_html_afa107fa2b9ac80bf88c67a9deab70d42"><div class="ttname"><a href="../../d4/d28/channel_8c.html#afa107fa2b9ac80bf88c67a9deab70d42">ast_party_name_copy</a></div><div class="ttdeci">void ast_party_name_copy(struct ast_party_name *dest, const struct ast_party_name *src)</div><div class="ttdoc">Copy the source party name information to the destination party name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01599">channel.c:1599</a></div></div>
<div class="ttc" id="structast__set__party__id_html_aa6787fc6eb732987040b1f378489db54"><div class="ttname"><a href="../../df/dcf/structast__set__party__id.html#aa6787fc6eb732987040b1f378489db54">ast_set_party_id::number</a></div><div class="ttdeci">unsigned char number</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00366">channel.h:366</a></div></div>
<div class="ttc" id="causes_8h_html_aadcc0ede679137ef3a3ed4472b974ee8"><div class="ttname"><a href="../../d4/da3/causes_8h.html#aadcc0ede679137ef3a3ed4472b974ee8">AST_CAUSE_NORMAL_UNSPECIFIED</a></div><div class="ttdeci">#define AST_CAUSE_NORMAL_UNSPECIFIED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00118">causes.h:118</a></div></div>
<div class="ttc" id="structast__party__number_html_ad1f8db563cb99d404b72e02cf8f78cd1"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#ad1f8db563cb99d404b72e02cf8f78cd1">ast_party_number::plan</a></div><div class="ttdeci">int plan</div><div class="ttdoc">Q.931 Type-Of-Number and Numbering-Plan encoded fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00294">channel.h:294</a></div></div>
<div class="ttc" id="channel_8h_html_aac93557ad0a1e7bcf861c208e1d8fdc4"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aac93557ad0a1e7bcf861c208e1d8fdc4">ast_channel_named_callgroups_set</a></div><div class="ttdeci">void ast_channel_named_callgroups_set(struct ast_channel *chan, struct ast_namedgroups *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01094">channel_internal_api.c:1094</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792ac5112be19c8d91662fe0004f75f617d8"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ac5112be19c8d91662fe0004f75f617d8">AST_REDIRECTING_FROM_NAME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09234">channel.c:9234</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ac976c01c12ae70e36b99b16dbfa3dda7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac976c01c12ae70e36b99b16dbfa3dda7">AST_CONTROL_CONNECTED_LINE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00299">include/asterisk/frame.h:299</a></div></div>
<div class="ttc" id="time_8h_html_a904a6933b710e14c7fa2029a0f0cc91a"><div class="ttname"><a href="../../de/df7/time_8h.html#a904a6933b710e14c7fa2029a0f0cc91a">ast_remaining_ms</a></div><div class="ttdeci">int ast_remaining_ms(struct timeval start, int max_ms)</div><div class="ttdoc">Calculate remaining milliseconds given a starting timestamp and upper bound. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02033">main/utils.c:2033</a></div></div>
<div class="ttc" id="causes_8h_html_a8cfd0925ffb2f0902bc177d799e2622d"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a8cfd0925ffb2f0902bc177d799e2622d">AST_CAUSE_CHANNEL_UNACCEPTABLE</a></div><div class="ttdeci">#define AST_CAUSE_CHANNEL_UNACCEPTABLE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00101">causes.h:101</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga17518a82a3bc958cfb53d954dc14d630"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga17518a82a3bc958cfb53d954dc14d630">ast_channel_publish_varset</a></div><div class="ttdeci">void ast_channel_publish_varset(struct ast_channel *chan, const char *variable, const char *value)</div><div class="ttdoc">Publish a ast_channel_varset for a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01150">stasis_channels.c:1150</a></div></div>
<div class="ttc" id="channel_8c_html_acd7d6e4cf3615bf47af84d2e3e47c302"><div class="ttname"><a href="../../d4/d28/channel_8c.html#acd7d6e4cf3615bf47af84d2e3e47c302">ast_channel_string2amaflag</a></div><div class="ttdeci">enum ama_flags ast_channel_string2amaflag(const char *flag)</div><div class="ttdoc">Convert a string to a detail record AMA flag. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04405">channel.c:4405</a></div></div>
<div class="ttc" id="callerid_8h_html_aa2dfb2ae7af41bd00f62156828f885d4"><div class="ttname"><a href="../../de/d47/callerid_8h.html#aa2dfb2ae7af41bd00f62156828f885d4">AST_PRES_NUMBER_TYPE</a></div><div class="ttdeci">#define AST_PRES_NUMBER_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00317">callerid.h:317</a></div></div>
<div class="ttc" id="channel_8c_html_ad50d5b0a589b3fb8464c97d40548c102"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ad50d5b0a589b3fb8464c97d40548c102">ast_set_write_format_path</a></div><div class="ttdeci">int ast_set_write_format_path(struct ast_channel *chan, struct ast_format *core_format, struct ast_format *raw_format)</div><div class="ttdoc">Set specific write path on channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05611">channel.c:5611</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a2aaaaeed05df585c75e3930a51e63e65"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a2aaaaeed05df585c75e3930a51e63e65">AST_REDIRECTING_ORIG_NUMBER_VALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09269">channel.c:9269</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_gga44ac88ed1b656e254dcad5cf0dbd2a22a7e8412f5b805e70e50a66150bad4d292"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a7e8412f5b805e70e50a66150bad4d292">AST_MSG_DATA_ATTR_FROM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00456">message.h:456</a></div></div>
<div class="ttc" id="channel_8c_html_a88d833a56ea7de33e230281c5c12b75d"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a88d833a56ea7de33e230281c5c12b75d">ast_set_callerid</a></div><div class="ttdeci">void ast_set_callerid(struct ast_channel *chan, const char *cid_num, const char *cid_name, const char *cid_ani)</div><div class="ttdoc">Set caller ID number, name and ANI and generate AMI event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07434">channel.c:7434</a></div></div>
<div class="ttc" id="channel_8c_html_ab5571bd5fd71f1c9c3b68af4082b2c73"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ab5571bd5fd71f1c9c3b68af4082b2c73">ast_channel_feature_hooks_get</a></div><div class="ttdeci">struct ast_bridge_features * ast_channel_feature_hooks_get(struct ast_channel *chan)</div><div class="ttdoc">Gets the channel-attached features a channel has access to upon being bridged. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l11104">channel.c:11104</a></div></div>
<div class="ttc" id="timing_8h_html_aa21078cc57057eeda614cb7780bdc60aa2f1a45286f54b8f415b28dc072b931e6"><div class="ttname"><a href="../../db/d41/timing_8h.html#aa21078cc57057eeda614cb7780bdc60aa2f1a45286f54b8f415b28dc072b931e6">AST_TIMING_EVENT_CONTINUOUS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d41/timing_8h_source.html#l00059">timing.h:59</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga83e4b9493ba37c5052e722fad015503b"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga83e4b9493ba37c5052e722fad015503b">ast_channel_publish_final_snapshot</a></div><div class="ttdeci">void ast_channel_publish_final_snapshot(struct ast_channel *chan)</div><div class="ttdoc">Send the final channel snapshot for a channel, thus removing it from cache. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00917">stasis_channels.c:917</a></div></div>
<div class="ttc" id="framehook_8h_html_ae3b6fa28df6c8608d05936efaf929f32"><div class="ttname"><a href="../../db/d3c/framehook_8h.html#ae3b6fa28df6c8608d05936efaf929f32">AST_FRAMEHOOK_INTERFACE_VERSION</a></div><div class="ttdeci">#define AST_FRAMEHOOK_INTERFACE_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d3c/framehook_8h_source.html#l00227">framehook.h:227</a></div></div>
<div class="ttc" id="channel_8h_html_a66789713c3657752cc9f502c4cf1d2ea"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a66789713c3657752cc9f502c4cf1d2ea">ast_channel_streamid_set</a></div><div class="ttdeci">void ast_channel_streamid_set(struct ast_channel *chan, int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00465">channel_internal_api.c:465</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a325c1d3b34c0636fe2dcf4a7224515de"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a325c1d3b34c0636fe2dcf4a7224515de">AST_REDIRECTING_ORIG_SUBADDRESS_VALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09279">channel.c:9279</a></div></div>
<div class="ttc" id="chanvars_8h_html_ae19fa022349aa0481f982ccced85d7ba"><div class="ttname"><a href="../../d9/de7/chanvars_8h.html#ae19fa022349aa0481f982ccced85d7ba">ast_var_delete</a></div><div class="ttdeci">void ast_var_delete(struct ast_var_t *var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02473">extconf.c:2473</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="channel_8c_html_ad91f43b38ac42d7099b89a5b5268e41a"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ad91f43b38ac42d7099b89a5b5268e41a">ast_queue_answer</a></div><div class="ttdeci">int ast_queue_answer(struct ast_channel *chan, const struct ast_stream_topology *topology)</div><div class="ttdoc">Queue an ANSWER control frame with topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01246">channel.c:1246</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00032">codec.h:32</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5a7aeded1dc9df91dee01bb7af719880c1"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a7aeded1dc9df91dee01bb7af719880c1">AST_FLAG_EMULATE_DTMF</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01005">channel.h:1005</a></div></div>
<div class="ttc" id="structast__var__t_html_a325611b97f57f55a57b2a7cf3238ef54"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html#a325611b97f57f55a57b2a7cf3238ef54">ast_var_t::value</a></div><div class="ttdeci">char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00030">chanvars.h:30</a></div></div>
<div class="ttc" id="structast__party__caller_html_ad3bdbbc7177d5ac309bc72f9fc3c4bee"><div class="ttname"><a href="../../d4/d77/structast__party__caller.html#ad3bdbbc7177d5ac309bc72f9fc3c4bee">ast_party_caller::ani2</a></div><div class="ttdeci">int ani2</div><div class="ttdoc">Automatic Number Identification 2 (Info Digits) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00434">channel.h:434</a></div></div>
<div class="ttc" id="channel_8h_html_a96d7e5eca937b7e71f27acc4360c3ee1"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a96d7e5eca937b7e71f27acc4360c3ee1">ast_channel_masq</a></div><div class="ttdeci">struct ast_channel * ast_channel_masq(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00597">channel_internal_api.c:597</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_ga4edd2c0456a7d3f1658e48e2150c9665"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#ga4edd2c0456a7d3f1658e48e2150c9665">ast_msg_data_get_attribute</a></div><div class="ttdeci">const char * ast_msg_data_get_attribute(struct ast_msg_data *msg, enum ast_msg_data_attribute_type attribute_type)</div><div class="ttdoc">Get attribute from ast_msg_data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01533">message.c:1533</a></div></div>
<div class="ttc" id="channel_8h_html_aa2c87e87fcb0c34e45f4596448dea70e"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa2c87e87fcb0c34e45f4596448dea70e">AST_TIMING_FD</a></div><div class="ttdeci">#define AST_TIMING_FD</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00202">channel.h:202</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a5d643c7233f1c4f3c3780ab92b68fc38"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a5d643c7233f1c4f3c3780ab92b68fc38">AST_REDIRECTING_PRIV_ORIG_NUMBER_PLAN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09310">channel.c:9310</a></div></div>
<div class="ttc" id="channel_8h_html_a828f537544a2ad2352c56c078390a0bd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a828f537544a2ad2352c56c078390a0bd">ast_channel_adsicpe</a></div><div class="ttdeci">ast_channel_adsicpe</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00869">channel.h:869</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="structast__tone__zone__sound_html"><div class="ttname"><a href="../../d5/dab/structast__tone__zone__sound.html">ast_tone_zone_sound</a></div><div class="ttdoc">Description of a tone. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0f/indications_8h_source.html#l00035">indications.h:35</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792aef98a6b6c42a63441c640308a23b8dc6"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aef98a6b6c42a63441c640308a23b8dc6">AST_REDIRECTING_PRIV_ORIG_SUBADDRESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09316">channel.c:9316</a></div></div>
<div class="ttc" id="indications_8h_html_a516be2823557000dcd4be685a44d1d09"><div class="ttname"><a href="../../d2/d0f/indications_8h.html#a516be2823557000dcd4be685a44d1d09">ast_get_indication_tone</a></div><div class="ttdeci">struct ast_tone_zone_sound * ast_get_indication_tone(const struct ast_tone_zone *zone, const char *indication)</div><div class="ttdoc">Locate a tone zone sound. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d6e/indications_8c_source.html#l00455">indications.c:455</a></div></div>
<div class="ttc" id="astobj2_8h_html_a63fd831fe48aed32d3ef992ad8e45293"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a63fd831fe48aed32d3ef992ad8e45293">ao2_callback_data</a></div><div class="ttdeci">#define ao2_callback_data(container, flags, cb_fn, arg, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01743">astobj2.h:1743</a></div></div>
<div class="ttc" id="channel_8c_html_af37d463736669d2f0b5de3d1d668abf2"><div class="ttname"><a href="../../d4/d28/channel_8c.html#af37d463736669d2f0b5de3d1d668abf2">ast_channel_get_by_exten</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_exten(const char *exten, const char *context)</div><div class="ttdoc">Find a channel by extension and context. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01459">channel.c:1459</a></div></div>
<div class="ttc" id="transcap_8h_html_aebd89c1e90b2497984dd29b4608aaa87"><div class="ttname"><a href="../../d7/d86/transcap_8h.html#aebd89c1e90b2497984dd29b4608aaa87">AST_TRANS_CAP_VIDEO</a></div><div class="ttdeci">#define AST_TRANS_CAP_VIDEO</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d86/transcap_8h_source.html#l00040">transcap.h:40</a></div></div>
<div class="ttc" id="time_8h_html_a97e1bb8fbd7a103212789e87e7ed6073"><div class="ttname"><a href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a></div><div class="ttdeci">struct timeval ast_tvadd(struct timeval a, struct timeval b)</div><div class="ttdoc">Returns the sum of two timevals a + b. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02283">extconf.c:2283</a></div></div>
<div class="ttc" id="channel_8h_html_a77fb68157dff2a7004641cb8c3bc7e3c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a77fb68157dff2a7004641cb8c3bc7e3c">ast_channel_blocker</a></div><div class="ttdeci">pthread_t ast_channel_blocker(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01213">channel_internal_api.c:1213</a></div></div>
<div class="ttc" id="structast__party__connected__line_html"><div class="ttname"><a href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a></div><div class="ttdoc">Connected Line/Party information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00457">channel.h:457</a></div></div>
<div class="ttc" id="channel_8c_html_a65b548fdac14462497431eb07bc45d63"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a65b548fdac14462497431eb07bc45d63">ast_channel_get_intercept_mode</a></div><div class="ttdeci">int ast_channel_get_intercept_mode(void)</div><div class="ttdoc">Am I currently running an intercept dialplan routine. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10430">channel.c:10430</a></div></div>
<div class="ttc" id="channel_8c_html_a7ef6737309dc9e8b6c4a7cb4800638b1"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a7ef6737309dc9e8b6c4a7cb4800638b1">ast_read</a></div><div class="ttdeci">struct ast_frame * ast_read(struct ast_channel *chan)</div><div class="ttdoc">Reads a frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04302">channel.c:4302</a></div></div>
<div class="ttc" id="structast__channel_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../df/d3c/structast__channel.html#ace9168767fc3707cf5f0a7d049682ba3">ast_channel::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00113">channel_internal_api.c:113</a></div></div>
<div class="ttc" id="structvarshead_html"><div class="ttname"><a href="../../dd/de6/structvarshead.html">varshead</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00034">chanvars.h:34</a></div></div>
<div class="ttc" id="channel_8c_html_a44fd3f84c18c4751cdc56196b0471ead"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a44fd3f84c18c4751cdc56196b0471ead">party_name_build_data</a></div><div class="ttdeci">static int party_name_build_data(unsigned char *data, size_t datalen, const struct ast_party_name *name, const char *label, const struct ast_party_name_ies *ies)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08444">channel.c:8444</a></div></div>
<div class="ttc" id="channel_8h_html_a63732831df3e7a0999b0900ec85c626a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a63732831df3e7a0999b0900ec85c626a">ast_channel_dialed</a></div><div class="ttdeci">struct ast_party_dialed * ast_channel_dialed(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00904">channel_internal_api.c:904</a></div></div>
<div class="ttc" id="channel_8c_html_aaacf12a6a5826c53e7e55b17d1afc3da"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aaacf12a6a5826c53e7e55b17d1afc3da">ast_write_video</a></div><div class="ttdeci">int ast_write_video(struct ast_channel *chan, struct ast_frame *fr)</div><div class="ttdoc">Write video frame to a channel This function writes the given frame to the indicated channel...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05062">channel.c:5062</a></div></div>
<div class="ttc" id="strings_8h_html_af5693da955fa3bc73bc49c47b601fc7a"><div class="ttname"><a href="../../d6/d90/strings_8h.html#af5693da955fa3bc73bc49c47b601fc7a">ast_skip_blanks</a></div><div class="ttdeci">char * ast_skip_blanks(const char *str)</div><div class="ttdoc">Gets a pointer to the first non-whitespace character in a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00157">strings.h:157</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a18b6f1cf748d864dd085819a7d4e6680"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a18b6f1cf748d864dd085819a7d4e6680">first</a></div><div class="ttdeci">struct sla_ringing_trunk * first</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01092">app_meetme.c:1092</a></div></div>
<div class="ttc" id="channel_8h_html_a9e9505a91a84992d04ba4e85217fb4e4a90cd950abc1c22b0701a476bdd6cc246"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a90cd950abc1c22b0701a476bdd6cc246">AST_SOFTHANGUP_TIMEOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01139">channel.h:1139</a></div></div>
<div class="ttc" id="astmm_8h_html_aa1202a8277cd3013d22535bf5bfe85fc"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#aa1202a8277cd3013d22535bf5bfe85fc">ast_strndup</a></div><div class="ttdeci">#define ast_strndup(str, len)</div><div class="ttdoc">A wrapper for strndup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00258">astmm.h:258</a></div></div>
<div class="ttc" id="structoutgoing__helper_html_acec9ce2df15222151ad66fcb1d74eb9f"><div class="ttname"><a href="../../d9/dc0/structoutgoing__helper.html#acec9ce2df15222151ad66fcb1d74eb9f">outgoing_helper::priority</a></div><div class="ttdeci">int priority</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01108">channel.h:1108</a></div></div>
<div class="ttc" id="channel_8h_html_ad6d58614c0340ae49d165977b965c9f3"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ad6d58614c0340ae49d165977b965c9f3">ast_channel_fout_set</a></div><div class="ttdeci">void ast_channel_fout_set(struct ast_channel *chan, unsigned int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00529">channel_internal_api.c:529</a></div></div>
<div class="ttc" id="causes_8h_html_a3ed29f9cca140067f36c9793aa1409f1"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a3ed29f9cca140067f36c9793aa1409f1">AST_CAUSE_WRONG_MESSAGE</a></div><div class="ttdeci">#define AST_CAUSE_WRONG_MESSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00138">causes.h:138</a></div></div>
<div class="ttc" id="structast__control__read__action__payload_html_ade8a15adbed15f8060da2d7004133948"><div class="ttname"><a href="../../d6/d4b/structast__control__read__action__payload.html#ade8a15adbed15f8060da2d7004133948">ast_control_read_action_payload::action</a></div><div class="ttdeci">enum ast_frame_read_action action</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00361">include/asterisk/frame.h:361</a></div></div>
<div class="ttc" id="channel_8c_html_aac59b275abb3611bd20074c54bf093df"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aac59b275abb3611bd20074c54bf093df">ast_channel_name_to_dial_string</a></div><div class="ttdeci">void ast_channel_name_to_dial_string(char *channel_name)</div><div class="ttdoc">Removes the trailing identifiers from a channel name string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06934">channel.c:6934</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="channel_8c_html_ac8dc47e3b39c930caed4bfd05b4ba805"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ac8dc47e3b39c930caed4bfd05b4ba805">FORMAT</a></div><div class="ttdeci">#define FORMAT</div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="callerid_8h_html_a69574f5c1e9be59b1d2eb727d4209bce"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a69574f5c1e9be59b1d2eb727d4209bce">AST_PRES_NUMBER_NOT_AVAILABLE</a></div><div class="ttdeci">#define AST_PRES_NUMBER_NOT_AVAILABLE</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00353">callerid.h:353</a></div></div>
<div class="ttc" id="channel_8h_html_a8873859a4dbc3d0d053d696667e49012"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a8873859a4dbc3d0d053d696667e49012">ast_channel_creationtime</a></div><div class="ttdeci">struct timeval ast_channel_creationtime(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00976">channel_internal_api.c:976</a></div></div>
<div class="ttc" id="channel_8h_html_a65123e0ee89c498bdade937bdfb66ede"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a65123e0ee89c498bdade937bdfb66ede">ast_channel_error</a></div><div class="ttdeci">ast_channel_error</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l05020">channel.h:5020</a></div></div>
<div class="ttc" id="channel_8c_html_ac67e18bdd7cbf0e603e7b209812a000e"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ac67e18bdd7cbf0e603e7b209812a000e">channel_set_external_vars</a></div><div class="ttdeci">static void channel_set_external_vars(struct external_vars *channelvars, size_t varc, char **vars)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07967">channel.c:7967</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a1e37109bb72d95999821eb45f28c261c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a1e37109bb72d95999821eb45f28c261c">AST_LIST_LAST</a></div><div class="ttdeci">#define AST_LIST_LAST(head)</div><div class="ttdoc">Returns the last entry contained in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00428">linkedlists.h:428</a></div></div>
<div class="ttc" id="structast__party__redirecting_html"><div class="ttname"><a href="../../df/d44/structast__party__redirecting.html">ast_party_redirecting</a></div><div class="ttdoc">Redirecting Line information. RDNIS (Redirecting Directory Number Information Service) Where a call d...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00523">channel.h:523</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="channel_8c_html_a7b4442ac5fb6820df03e3a660b8e8344"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a7b4442ac5fb6820df03e3a660b8e8344">__ast_change_name_nolink</a></div><div class="ttdeci">static void __ast_change_name_nolink(struct ast_channel *chan, const char *newname)</div><div class="ttdoc">this function simply changes the name of the channel and issues a manager_event with out unlinking an...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06839">channel.c:6839</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a437a314deb7eb7260014426c55e8289c"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a437a314deb7eb7260014426c55e8289c">ast_app_run_sub</a></div><div class="ttdeci">int ast_app_run_sub(struct ast_channel *autoservice_chan, struct ast_channel *sub_chan, const char *sub_location, const char *sub_args, int ignore_hangup)</div><div class="ttdoc">Run a subroutine on a channel, placing an optional second channel into autoservice. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00401">main/app.c:401</a></div></div>
<div class="ttc" id="format__cap_8h_html_a4dff925fc9e3bb805b926d18447eb3eb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a></div><div class="ttdeci">const char * ast_format_cap_get_names(const struct ast_format_cap *cap, struct ast_str **buf)</div><div class="ttdoc">Get the names of codecs of a set of formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00736">format_cap.c:736</a></div></div>
<div class="ttc" id="strings_8h_html_abe38193be148775f7559f8fff6e0c17e"><div class="ttname"><a href="../../d6/d90/strings_8h.html#abe38193be148775f7559f8fff6e0c17e">ast_trim_blanks</a></div><div class="ttdeci">char * ast_trim_blanks(char *str)</div><div class="ttdoc">Trims trailing whitespace characters from a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00182">strings.h:182</a></div></div>
<div class="ttc" id="framehook_8h_html_abff6e8c56467d7e9465b453b42630f20"><div class="ttname"><a href="../../db/d3c/framehook_8h.html#abff6e8c56467d7e9465b453b42630f20">ast_framehook_list_write_event</a></div><div class="ttdeci">struct ast_frame * ast_framehook_list_write_event(struct ast_framehook_list *framehooks, struct ast_frame *frame)</div><div class="ttdoc">This is used by the channel API push a frame write event to a channel&amp;#39;s framehook list...</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dac/framehook_8c_source.html#l00313">framehook.c:313</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a02797e73caf534e0d40baa6f03e3d3f4"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a02797e73caf534e0d40baa6f03e3d3f4">AST_REDIRECTING_TO_NAME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09238">channel.c:9238</a></div></div>
<div class="ttc" id="file_8h_html_a36f6bba05952162d5d1ee7fb9819bd07"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a36f6bba05952162d5d1ee7fb9819bd07">ast_seekstream</a></div><div class="ttdeci">int ast_seekstream(struct ast_filestream *fs, off_t sample_offset, int whence)</div><div class="ttdoc">Seeks into stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01038">file.c:1038</a></div></div>
<div class="ttc" id="channel_8h_html_a806bfcbe038d762c950ad76f0269ebd4"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a806bfcbe038d762c950ad76f0269ebd4">ast_channel_peeraccount</a></div><div class="ttdeci">const char * ast_channel_peeraccount(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channel_8c_html_a0b5ab7d69d45eb506f08997ccaddcf3b"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a0b5ab7d69d45eb506f08997ccaddcf3b">ast_channel_end_dtmf</a></div><div class="ttdeci">void ast_channel_end_dtmf(struct ast_channel *chan, char digit, struct timeval start, const char *why)</div><div class="ttdoc">Simulate a DTMF end on a broken bridge channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l11070">channel.c:11070</a></div></div>
<div class="ttc" id="structtonepair__state_html"><div class="ttname"><a href="../../d6/d63/structtonepair__state.html">tonepair_state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07569">channel.c:7569</a></div></div>
<div class="ttc" id="chanvars_8h_html_a37f22870d234aefac66dafb58f8b86fd"><div class="ttname"><a href="../../d9/de7/chanvars_8h.html#a37f22870d234aefac66dafb58f8b86fd">ast_var_full_name</a></div><div class="ttdeci">const char * ast_var_full_name(const struct ast_var_t *var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df9/chanvars_8c_source.html#l00075">chanvars.c:75</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="channel_8c_html_a1284a91696129ddcb1bf805adf769e0e"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a1284a91696129ddcb1bf805adf769e0e">ast_channel_errno</a></div><div class="ttdeci">enum ast_channel_error ast_channel_errno(void)</div><div class="ttdoc">Get error code for latest channel operation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l11162">channel.c:11162</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5a5ff4f7a94a36fcc2b8628186cb643d4b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a5ff4f7a94a36fcc2b8628186cb643d4b">AST_FLAG_IN_AUTOLOOP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00998">channel.h:998</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a67508a613c8f337732e35d9367b43ae7"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a67508a613c8f337732e35d9367b43ae7">AST_LIST_ENTRY</a></div><div class="ttdeci">#define AST_LIST_ENTRY(type)</div><div class="ttdoc">Declare a forward link structure inside a list entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00409">linkedlists.h:409</a></div></div>
<div class="ttc" id="channel_8c_html_aec0fd025bfdf11852ceca62636006141"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aec0fd025bfdf11852ceca62636006141">ast_tonepair</a></div><div class="ttdeci">int ast_tonepair(struct ast_channel *chan, int freq1, int freq2, int duration, int vol)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07700">channel.c:7700</a></div></div>
<div class="ttc" id="structast__generator_html_a1e3850d814c3f9856a35e8eb782c5ba4"><div class="ttname"><a href="../../de/d2a/structast__generator.html#a1e3850d814c3f9856a35e8eb782c5ba4">ast_generator::digit</a></div><div class="ttdeci">void(* digit)(struct ast_channel *chan, char digit)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00236">channel.h:236</a></div></div>
<div class="ttc" id="f2c_8h_html_abf5d144da384425ae6cb542ce6eec8d3"><div class="ttname"><a href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a></div><div class="ttdeci">long int flag</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc2/f2c_8h_source.html#l00083">f2c.h:83</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a5bf03bd84f434acaeefdacb0096e1baa">AST_STATE_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00041">channelstate.h:41</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa2ded2af046bb513f77056c27c083307"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_LIST_INSERT_HEAD(head, elm, field)</div><div class="ttdoc">Inserts a list entry at the head of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00710">linkedlists.h:710</a></div></div>
<div class="ttc" id="structast__party__redirecting__reason_html_ab50d783982593ef993ea0b68f7ad8b80"><div class="ttname"><a href="../../d1/dee/structast__party__redirecting__reason.html#ab50d783982593ef993ea0b68f7ad8b80">ast_party_redirecting_reason::str</a></div><div class="ttdeci">char * str</div><div class="ttdoc">a string value for the redirecting reason </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00508">channel.h:508</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792aca60d67300bbb8a4c85a0b61c597bed6"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aca60d67300bbb8a4c85a0b61c597bed6">AST_REDIRECTING_PRIV_ORIG_NUMBER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09308">channel.c:9308</a></div></div>
<div class="ttc" id="channel_8c_html_a7a6c7334e6dbd91a2bffb826a338a922"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a7a6c7334e6dbd91a2bffb826a338a922">ast_channel_feature_hooks_append</a></div><div class="ttdeci">int ast_channel_feature_hooks_append(struct ast_channel *chan, struct ast_bridge_features *features)</div><div class="ttdoc">Appends to the channel-attached features a channel has access to upon being bridged. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l11152">channel.c:11152</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a870806e047987e8783b016efc0b89d7d"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a870806e047987e8783b016efc0b89d7d">AST_REDIRECTING_FROM_SUBADDRESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09243">channel.c:9243</a></div></div>
<div class="ttc" id="channel_8c_html_a6234217363fb618938c53f7b8169f29b"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a6234217363fb618938c53f7b8169f29b">ast_channel_cc_params_init</a></div><div class="ttdeci">int ast_channel_cc_params_init(struct ast_channel *chan, const struct ast_cc_config_params *base_params)</div><div class="ttdoc">Set up datastore with CCSS parameters for a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10652">channel.c:10652</a></div></div>
<div class="ttc" id="options_8h_html_a64fcc3bad029c5b4230fc58638ed4652"><div class="ttname"><a href="../../d7/d5b/options_8h.html#a64fcc3bad029c5b4230fc58638ed4652">ast_opt_generic_plc_on_equal_codecs</a></div><div class="ttdeci">#define ast_opt_generic_plc_on_equal_codecs</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00136">options.h:136</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="channel_8c_html_a82a0d60133ec689b693bcbe296914c75"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a82a0d60133ec689b693bcbe296914c75">ast_senddigit_external</a></div><div class="ttdeci">int ast_senddigit_external(struct ast_channel *chan, char digit, unsigned int duration)</div><div class="ttdoc">Send a DTMF digit to a channel from an external thread. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05032">channel.c:5032</a></div></div>
<div class="ttc" id="channel_8c_html_a1b4c335490f5170c1f9e2c7c6781003f"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a1b4c335490f5170c1f9e2c7c6781003f">ast_write</a></div><div class="ttdeci">int ast_write(struct ast_channel *chan, struct ast_frame *fr)</div><div class="ttdoc">Write a frame to a channel This function writes the given frame to the indicated channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05189">channel.c:5189</a></div></div>
<div class="ttc" id="cli_8h_html_ae47751901c430ebb833e59291a5e0b3f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a></div><div class="ttdeci">#define CLI_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00046">cli.h:46</a></div></div>
<div class="ttc" id="slinfactory_8h_html"><div class="ttname"><a href="../../da/d7d/slinfactory_8h.html">slinfactory.h</a></div><div class="ttdoc">A machine to gather up arbitrary frames and convert them to raw slinear on demand. </div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a6265e05e606bb17be5cd81a309cf98a2"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a6265e05e606bb17be5cd81a309cf98a2">AST_CONTROL_MCID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00308">include/asterisk/frame.h:308</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a748b91a64b30f68c8f3bd4b587c9367a"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a748b91a64b30f68c8f3bd4b587c9367a">AST_REDIRECTING_PRIV_TO_NUMBER_PLAN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09283">channel.c:9283</a></div></div>
<div class="ttc" id="channel_8c_html_af9e27ecd92ff5aa897c9e058dfbd6510"><div class="ttname"><a href="../../d4/d28/channel_8c.html#af9e27ecd92ff5aa897c9e058dfbd6510">ast_channel_bridge_peer</a></div><div class="ttdeci">struct ast_channel * ast_channel_bridge_peer(struct ast_channel *chan)</div><div class="ttdoc">Get the channel&amp;#39;s bridge peer only if the bridge is two-party. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10765">channel.c:10765</a></div></div>
<div class="ttc" id="channel_8c_html_ad40fc1b99391aa22b9f46444bee27bd4"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ad40fc1b99391aa22b9f46444bee27bd4">ast_channel_iterator_by_exten_new</a></div><div class="ttdeci">struct ast_channel_iterator * ast_channel_iterator_by_exten_new(const char *exten, const char *context)</div><div class="ttdoc">Create a new channel iterator based on extension. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01368">channel.c:1368</a></div></div>
<div class="ttc" id="file_8h_html_abd4aebd901cf2e2251920acfbe22fa22"><div class="ttname"><a href="../../d2/d4d/file_8h.html#abd4aebd901cf2e2251920acfbe22fa22">SEEK_FORCECUR</a></div><div class="ttdeci">#define SEEK_FORCECUR</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00051">file.h:51</a></div></div>
<div class="ttc" id="structast__channel__tech_html_aee12d234ffbeab489b533f0974e6f23e"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#aee12d234ffbeab489b533f0974e6f23e">ast_channel_tech::exception</a></div><div class="ttdeci">struct ast_frame *(*const exception)(struct ast_channel *chan)</div><div class="ttdoc">Handle an exception, reading a frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00766">channel.h:766</a></div></div>
<div class="ttc" id="channel_8c_html_a3212119ca5acac4c9ec6051987380876a08d8232b0bb99f13647a9ce5e0d11ed4"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a08d8232b0bb99f13647a9ce5e0d11ed4">AST_CONNECTED_LINE_PRIV_SUBADDRESS_VALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08789">channel.c:8789</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="channel_8h_html_a7f1aac8d8ed115097063ae6922ec4029"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7f1aac8d8ed115097063ae6922ec4029">ast_channel_hangup_handlers</a></div><div class="ttdeci">struct ast_hangup_handler_list * ast_channel_hangup_handlers(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00864">channel_internal_api.c:864</a></div></div>
<div class="ttc" id="structast__party__connected__line_html_a07a87b2e6ed927503e2f95f119c9fc23"><div class="ttname"><a href="../../dc/d9e/structast__party__connected__line.html#a07a87b2e6ed927503e2f95f119c9fc23">ast_party_connected_line::source</a></div><div class="ttdeci">int source</div><div class="ttdoc">Information about the source of an update. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00483">channel.h:483</a></div></div>
<div class="ttc" id="channel_8c_html_a377ded8d56517db5d4b991a44ae88843"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a377ded8d56517db5d4b991a44ae88843">ast_party_subaddress_set_init</a></div><div class="ttdeci">void ast_party_subaddress_set_init(struct ast_party_subaddress *init, const struct ast_party_subaddress *guide)</div><div class="ttdoc">Initialize the given party subaddress structure using the given guide for a set update operation...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01719">channel.c:1719</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__party__subaddress__ies_html_ac63b1f168765a53e565a8ba27f5469d1"><div class="ttname"><a href="../../d3/d05/structast__party__subaddress__ies.html#ac63b1f168765a53e565a8ba27f5469d1">ast_party_subaddress_ies::valid</a></div><div class="ttdeci">int valid</div><div class="ttdoc">valid/present ie </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08575">channel.c:8575</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a2a6d2953d32856d91573ff12343be620"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a2a6d2953d32856d91573ff12343be620">AST_REDIRECTING_PRIV_ORIG_NAME_VALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09313">channel.c:9313</a></div></div>
<div class="ttc" id="causes_8h_html_a698ffe8a4d78a549b6ccb868ac1dbade"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a698ffe8a4d78a549b6ccb868ac1dbade">AST_CAUSE_BEARERCAPABILITY_NOTIMPL</a></div><div class="ttdeci">#define AST_CAUSE_BEARERCAPABILITY_NOTIMPL</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00130">causes.h:130</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a698ba152c9d2f83238f68027489fec8a"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a698ba152c9d2f83238f68027489fec8a">AST_REDIRECTING_ORIG_SUBADDRESS_TYPE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09277">channel.c:9277</a></div></div>
<div class="ttc" id="structsuppress__data_html_a23e0c5bd3b431b6527456cab2f745066"><div class="ttname"><a href="../../d1/dac/structsuppress__data.html#a23e0c5bd3b431b6527456cab2f745066">suppress_data::framehook_id</a></div><div class="ttdeci">int framehook_id</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10923">channel.c:10923</a></div></div>
<div class="ttc" id="channel_8c_html_a856b99dd45a814e8eca602541936c484"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a856b99dd45a814e8eca602541936c484">ast_party_id_set_init</a></div><div class="ttdeci">void ast_party_id_set_init(struct ast_party_id *init, const struct ast_party_id *guide)</div><div class="ttdoc">Initialize the given party id structure using the given guide for a set update operation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01780">channel.c:1780</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a8089c2a7198a1063db9e6c3f904482a4"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a8089c2a7198a1063db9e6c3f904482a4">AST_FRAME_CNG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00121">include/asterisk/frame.h:121</a></div></div>
<div class="ttc" id="channel_8c_html_a8b42faf0887d5d592b2ac859e629e0a2"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8b42faf0887d5d592b2ac859e629e0a2">complete_channeltypes</a></div><div class="ttdeci">static char * complete_channeltypes(struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00303">channel.c:303</a></div></div>
<div class="ttc" id="autochan_8h_html_a7c71b7d2333439b3822440ac14654026"><div class="ttname"><a href="../../d8/d6c/autochan_8h.html#a7c71b7d2333439b3822440ac14654026">ast_autochan_new_channel</a></div><div class="ttdeci">void ast_autochan_new_channel(struct ast_channel *old_chan, struct ast_channel *new_chan)</div><div class="ttdoc">Switch what channel autochans point to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d4d/autochan_8c_source.html#l00086">autochan.c:86</a></div></div>
<div class="ttc" id="structplc__ds_html_a697044b41fae96bc51a76ff759ad08d4"><div class="ttname"><a href="../../d0/d8a/structplc__ds.html#a697044b41fae96bc51a76ff759ad08d4">plc_ds::num_samples</a></div><div class="ttdeci">size_t num_samples</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05082">channel.c:5082</a></div></div>
<div class="ttc" id="channel_8c_html_a918cf4d5af55e140f5c38bf93347116b"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a918cf4d5af55e140f5c38bf93347116b">ast_party_name_set_init</a></div><div class="ttdeci">void ast_party_name_set_init(struct ast_party_name *init, const struct ast_party_name *guide)</div><div class="ttdoc">Initialize the given party name structure using the given guide for a set update operation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01613">channel.c:1613</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ad712464e42606f08900cf2057a10ba08"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ad712464e42606f08900cf2057a10ba08">AST_OPTION_SECURE_SIGNALING</a></div><div class="ttdeci">#define AST_OPTION_SECURE_SIGNALING</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00514">include/asterisk/frame.h:514</a></div></div>
<div class="ttc" id="structgroup_html"><div class="ttname"><a href="../../d3/d08/structgroup.html">group</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d35/func__dialgroup_8c_source.html#l00084">func_dialgroup.c:84</a></div></div>
<div class="ttc" id="structast__var__t_html_a55d5c7988e3164d7310d88c67d97a1db"><div class="ttname"><a href="../../d0/d7d/structast__var__t.html#a55d5c7988e3164d7310d88c67d97a1db">ast_var_t::entries</a></div><div class="ttdeci">struct ast_var_t::@249 entries</div></div>
<div class="ttc" id="channel_8c_html_a51d19fd5d03e845c18b7826c9f74a3ae"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a51d19fd5d03e845c18b7826c9f74a3ae">ast_channel_setoption</a></div><div class="ttdeci">int ast_channel_setoption(struct ast_channel *chan, int option, void *data, int datalen, int block)</div><div class="ttdoc">Sets an option on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07522">channel.c:7522</a></div></div>
<div class="ttc" id="structast__party__number__ies_html_ac63b1f168765a53e565a8ba27f5469d1"><div class="ttname"><a href="../../d1/dbe/structast__party__number__ies.html#ac63b1f168765a53e565a8ba27f5469d1">ast_party_number_ies::valid</a></div><div class="ttdeci">int valid</div><div class="ttdoc">valid/present ie </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08501">channel.c:8501</a></div></div>
<div class="ttc" id="channel_8h_html_ab57c278099ea5f8d7cedbb41eba58b56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab57c278099ea5f8d7cedbb41eba58b56">AST_CHANNEL_NAME</a></div><div class="ttdeci">#define AST_CHANNEL_NAME</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00172">channel.h:172</a></div></div>
<div class="ttc" id="channel_8c_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a9cfe7eb77fd0a8715633cc805b680e4b"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a9cfe7eb77fd0a8715633cc805b680e4b">AST_REDIRECTING_PRIV_ORIG_SUBADDRESS_TYPE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09317">channel.c:9317</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5a9deec175d13a40a6a5fdb527b13c6878"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a9deec175d13a40a6a5fdb527b13c6878">AST_FLAG_WRITE_INT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00984">channel.h:984</a></div></div>
<div class="ttc" id="channel_8c_html_a7b12ac20312638de5f8381b633b412f2"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a7b12ac20312638de5f8381b633b412f2">safe_sleep_conditional</a></div><div class="ttdeci">static int safe_sleep_conditional(struct ast_channel *chan, int timeout_ms, int(*cond)(void *), void *data, unsigned int generate_silence)</div><div class="ttdoc">Wait, look for hangups and condition arg. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01498">channel.c:1498</a></div></div>
<div class="ttc" id="structast__party__subaddress__ies_html_aba03208f197d75b6e355ba9b2ae08ab5"><div class="ttname"><a href="../../d3/d05/structast__party__subaddress__ies.html#aba03208f197d75b6e355ba9b2ae08ab5">ast_party_subaddress_ies::str</a></div><div class="ttdeci">int str</div><div class="ttdoc">subaddress ie. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08569">channel.c:8569</a></div></div>
<div class="ttc" id="channel_8c_html_ad8f2b1a2388ba06a23641a9f6fc34573"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ad8f2b1a2388ba06a23641a9f6fc34573">ast_channel_by_name_cb</a></div><div class="ttdeci">static int ast_channel_by_name_cb(void *obj, void *arg, void *data, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01284">channel.c:1284</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ac4106406e269667ff84ee49e0a634f94"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac4106406e269667ff84ee49e0a634f94">AST_CONTROL_OPTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00288">include/asterisk/frame.h:288</a></div></div>
<div class="ttc" id="channel_8c_html_a2ac659c4031230f671a2c94eb7f6e806"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a2ac659c4031230f671a2c94eb7f6e806">tonepair_generator</a></div><div class="ttdeci">static int tonepair_generator(struct ast_channel *chan, void *data, int len, int samples)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07629">channel.c:7629</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5a26796fa52cc5857446eec8d16a4b718d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a26796fa52cc5857446eec8d16a4b718d">AST_FLAG_ZOMBIE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00988">channel.h:988</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a667da7258b9fb30232ba5371a691aa9b"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a667da7258b9fb30232ba5371a691aa9b">AST_REDIRECTING_TO_NUMBER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09237">channel.c:9237</a></div></div>
<div class="ttc" id="structtonepair__state_html_a1910d262855b71da353ed0d07a6c7823"><div class="ttname"><a href="../../d6/d63/structtonepair__state.html#a1910d262855b71da353ed0d07a6c7823">tonepair_state::pos</a></div><div class="ttdeci">int pos</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07579">channel.c:7579</a></div></div>
<div class="ttc" id="utils_8h_html_afb8683b4d96960d7a82a86a974a57599"><div class="ttname"><a href="../../d5/d60/utils_8h.html#afb8683b4d96960d7a82a86a974a57599">AST_FLAGS_ALL</a></div><div class="ttdeci">#define AST_FLAGS_ALL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00196">utils.h:196</a></div></div>
<div class="ttc" id="chanvars_8h_html_a78deeb18e93b145e9895346cef766577"><div class="ttname"><a href="../../d9/de7/chanvars_8h.html#a78deeb18e93b145e9895346cef766577">ast_var_assign</a></div><div class="ttdeci">#define ast_var_assign(name, value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de7/chanvars_8h_source.html#l00040">chanvars.h:40</a></div></div>
<div class="ttc" id="bridge_8h_html_aeb11f378e45f0beb05de964b3af9a6bc"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#aeb11f378e45f0beb05de964b3af9a6bc">ast_bridge_notify_masquerade</a></div><div class="ttdeci">void ast_bridge_notify_masquerade(struct ast_channel *chan)</div><div class="ttdoc">Notify bridging that this channel was just masqueraded. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l01482">bridge.c:1482</a></div></div>
<div class="ttc" id="lock_8h_html_a7b1d6c8183a6f6f42a98239da3d1c7ca"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a7b1d6c8183a6f6f42a98239da3d1c7ca">CHANNEL_DEADLOCK_AVOIDANCE</a></div><div class="ttdeci">#define CHANNEL_DEADLOCK_AVOIDANCE(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00352">lock.h:352</a></div></div>
<div class="ttc" id="file_8h_html_ab53bd2c3c55d509790c7f7620aac6373"><div class="ttname"><a href="../../d2/d4d/file_8h.html#ab53bd2c3c55d509790c7f7620aac6373">ast_closestream</a></div><div class="ttdeci">int ast_closestream(struct ast_filestream *f)</div><div class="ttdoc">Closes a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01068">file.c:1068</a></div></div>
<div class="ttc" id="channel_8c_html_a25f0f3d4471989438adf2cad14f76233"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a25f0f3d4471989438adf2cad14f76233">__ast_answer</a></div><div class="ttdeci">int __ast_answer(struct ast_channel *chan, unsigned int delay)</div><div class="ttdoc">Answer a channel, with a selectable delay before returning. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02704">channel.c:2704</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390afa94175de1fafa29c027294f1e5a2aee"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390afa94175de1fafa29c027294f1e5a2aee">AST_CONTROL_UPDATE_RTP_PEER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00309">include/asterisk/frame.h:309</a></div></div>
<div class="ttc" id="channel_8c_html_ab973166b1c061782085c2ca9fd87cb5c"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ab973166b1c061782085c2ca9fd87cb5c">ast_channel_stream_topology_changed_externally</a></div><div class="ttdeci">int ast_channel_stream_topology_changed_externally(struct ast_channel *chan)</div><div class="ttdoc">Provide notice from a channel that the topology has changed on it as a result of the remote party ren...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l11209">channel.c:11209</a></div></div>
<div class="ttc" id="channel_8h_html_a043ef90a065fe177af7b21a6045b6506"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a043ef90a065fe177af7b21a6045b6506">ast_channel_stream</a></div><div class="ttdeci">struct ast_filestream * ast_channel_stream(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00621">channel_internal_api.c:621</a></div></div>
<div class="ttc" id="channel_8c_html_a11d5324d900ad89c46441038649b3dd9"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a11d5324d900ad89c46441038649b3dd9">generator_write_format_change</a></div><div class="ttdeci">static void generator_write_format_change(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02913">channel.c:2913</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5a29df923fcf5fe2c681eaa2114f1c41a6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a29df923fcf5fe2c681eaa2114f1c41a6">AST_FLAG_DISABLE_DEVSTATE_CACHE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01030">channel.h:1030</a></div></div>
<div class="ttc" id="channel_8c_html_af040cd3070189adb70454717407a4315"><div class="ttname"><a href="../../d4/d28/channel_8c.html#af040cd3070189adb70454717407a4315">ast_is_deferrable_frame</a></div><div class="ttdeci">int ast_is_deferrable_frame(const struct ast_frame *frame)</div><div class="ttdoc">Should we keep this frame for later? </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01467">channel.c:1467</a></div></div>
<div class="ttc" id="causes_8h_html_a19c43722b8b1260faa56227e481479c6"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a19c43722b8b1260faa56227e481479c6">AST_CAUSE_NUMBER_CHANGED</a></div><div class="ttdeci">#define AST_CAUSE_NUMBER_CHANGED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00111">causes.h:111</a></div></div>
<div class="ttc" id="channel_8c_html_a9b6409c38af733c46eead884d86dd284"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a9b6409c38af733c46eead884d86dd284">ast_channel_get_bridge_channel</a></div><div class="ttdeci">struct ast_bridge_channel * ast_channel_get_bridge_channel(struct ast_channel *chan)</div><div class="ttdoc">Get a reference to the channel&amp;#39;s bridge pointer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10783">channel.c:10783</a></div></div>
<div class="ttc" id="channel_8c_html_a2458f1412e300412e53d86fe94e19002"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a2458f1412e300412e53d86fe94e19002">ast_prod</a></div><div class="ttdeci">int ast_prod(struct ast_channel *chan)</div><div class="ttdoc">Send empty audio to prime a channel driver. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05045">channel.c:5045</a></div></div>
<div class="ttc" id="channel_8c_html_a27c4f1a52c8a53bc9e7122dc04e81344"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a27c4f1a52c8a53bc9e7122dc04e81344">ast_party_number_init</a></div><div class="ttdeci">void ast_party_number_init(struct ast_party_number *init)</div><div class="ttdoc">Initialize the given number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01644">channel.c:1644</a></div></div>
<div class="ttc" id="channel_8c_html_a5cfd27f9a26831fec121ba1c78a40466"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a5cfd27f9a26831fec121ba1c78a40466">ast_moh_stop_ptr</a></div><div class="ttdeci">static void(* ast_moh_stop_ptr)(struct ast_channel *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07847">channel.c:7847</a></div></div>
<div class="ttc" id="channel_8c_html_a2f152a294b4dd2561b0da2325421aead"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a2f152a294b4dd2561b0da2325421aead">ast_channel_sendurl</a></div><div class="ttdeci">int ast_channel_sendurl(struct ast_channel *chan, const char *url)</div><div class="ttdoc">Sends a URL on a given link Send URL on link. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06732">channel.c:6732</a></div></div>
<div class="ttc" id="max__forwards_8h_html"><div class="ttname"><a href="../../d3/d93/max__forwards_8h.html">max_forwards.h</a></div></div>
<div class="ttc" id="channel_8c_html_a3a450363be09968f1328dd900c7ab2ca"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3a450363be09968f1328dd900c7ab2ca">party_subaddress_build_data</a></div><div class="ttdeci">static int party_subaddress_build_data(unsigned char *data, size_t datalen, const struct ast_party_subaddress *subaddress, const char *label, const struct ast_party_subaddress_ies *ies)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08592">channel.c:8592</a></div></div>
<div class="ttc" id="structast__cli__args_html_adc1f34651f7bbfa3ba5af27db5f53817"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">ast_cli_args::word</a></div><div class="ttdeci">const char * word</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00163">cli.h:163</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3d3aa4fb3b4ba38ad8d6d255d97e037c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3d3aa4fb3b4ba38ad8d6d255d97e037c">AST_RWLIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE_HEAD</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00843">linkedlists.h:843</a></div></div>
<div class="ttc" id="channel_8c_html_a6fc05c8a1a68f5cd18017fc125ca2acd"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a6fc05c8a1a68f5cd18017fc125ca2acd">ast_get_channel_tech</a></div><div class="ttdeci">const struct ast_channel_tech * ast_get_channel_tech(const char *name)</div><div class="ttdoc">Get handle to channel driver based on name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00592">channel.c:592</a></div></div>
<div class="ttc" id="__private_8h_html"><div class="ttname"><a href="../../d4/d78/__private_8h.html">_private.h</a></div><div class="ttdoc">Prototypes for public functions only of internal interest,. </div></div>
<div class="ttc" id="channel_8c_html_affc167c91eb29d524a3dda826715a695"><div class="ttname"><a href="../../d4/d28/channel_8c.html#affc167c91eb29d524a3dda826715a695">ast_channel_has_audio_frame_or_monitor</a></div><div class="ttdeci">int ast_channel_has_audio_frame_or_monitor(struct ast_channel *chan)</div><div class="ttdoc">Check if the channel has active audiohooks, active framehooks, or a monitor. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02523">channel.c:2523</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a6eada13200d55b88ef01b68c5d62a43a"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a6eada13200d55b88ef01b68c5d62a43a">AST_HTML_URL</a></div><div class="ttdeci">#define AST_HTML_URL</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00247">include/asterisk/frame.h:247</a></div></div>
<div class="ttc" id="channel_8h_html_ae02cd8717fa5e5be15080386639ebb2c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae02cd8717fa5e5be15080386639ebb2c">FRAMECOUNT_INC</a></div><div class="ttdeci">#define FRAMECOUNT_INC(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00861">channel.h:861</a></div></div>
<div class="ttc" id="structast__party__redirecting__reason__ies_html_aba03208f197d75b6e355ba9b2ae08ab5"><div class="ttname"><a href="../../d0/dbd/structast__party__redirecting__reason__ies.html#aba03208f197d75b6e355ba9b2ae08ab5">ast_party_redirecting_reason_ies::str</a></div><div class="ttdeci">int str</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09327">channel.c:9327</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792ac4425cf0f406dd0bf341beb87c8e8b5f"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ac4425cf0f406dd0bf341beb87c8e8b5f">AST_REDIRECTING_TO_SUBADDRESS_TYPE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09248">channel.c:9248</a></div></div>
<div class="ttc" id="structast__channel__iterator_html"><div class="ttname"><a href="../../d9/d97/structast__channel__iterator.html">ast_channel_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01351">channel.c:1351</a></div></div>
<div class="ttc" id="structast__channel__iterator_html_abeae476b40b8f8431464a8d5854f38f6"><div class="ttname"><a href="../../d9/d97/structast__channel__iterator.html#abeae476b40b8f8431464a8d5854f38f6">ast_channel_iterator::active_iterator</a></div><div class="ttdeci">struct ao2_iterator * active_iterator</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01357">channel.c:1357</a></div></div>
<div class="ttc" id="channel_8c_html_a7c3d40097bb8c0da518564d38ab49506"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a7c3d40097bb8c0da518564d38ab49506">ast_channel_softhangup_withcause_locked</a></div><div class="ttdeci">void ast_channel_softhangup_withcause_locked(struct ast_channel *chan, int causecode)</div><div class="ttdoc">Lock the given channel, then request softhangup on the channel with the given causecode. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00468">channel.c:468</a></div></div>
<div class="ttc" id="structast__channel__monitor_html_a5407a229a5e1a319d75fb29542c83eae"><div class="ttname"><a href="../../d9/daf/structast__channel__monitor.html#a5407a229a5e1a319d75fb29542c83eae">ast_channel_monitor::format</a></div><div class="ttdeci">char * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04247">channel.h:4247</a></div></div>
<div class="ttc" id="channel_8c_html_a48a8b376caf908979e96af8641591c92"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a48a8b376caf908979e96af8641591c92">ast_senddigit</a></div><div class="ttdeci">int ast_senddigit(struct ast_channel *chan, char digit, unsigned int duration)</div><div class="ttdoc">Send a DTMF digit to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05019">channel.c:5019</a></div></div>
<div class="ttc" id="channel_8c_html_ab400aad1c2ca55d35effa1e633030407"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ab400aad1c2ca55d35effa1e633030407">ast_read_stream_noaudio</a></div><div class="ttdeci">struct ast_frame * ast_read_stream_noaudio(struct ast_channel *chan)</div><div class="ttdoc">Reads a frame, but does not filter to just the default streams, returning AST_FRAME_NULL frame if aud...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04317">channel.c:4317</a></div></div>
<div class="ttc" id="structast__cc__config__params_html"><div class="ttname"><a href="../../d4/d2e/structast__cc__config__params.html">ast_cc_config_params</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/ccss_8c_source.html#l00161">ccss.c:161</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390af10845d12981bce4e141a5b0ed431494"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af10845d12981bce4e141a5b0ed431494">AST_CONTROL_AOC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00305">include/asterisk/frame.h:305</a></div></div>
<div class="ttc" id="channel_8h_html_a3a32e3014998d0066281c4dd8e278ae9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3a32e3014998d0066281c4dd8e278ae9">DATASTORE_INHERIT_FOREVER</a></div><div class="ttdeci">#define DATASTORE_INHERIT_FOREVER</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00193">channel.h:193</a></div></div>
<div class="ttc" id="channel_8h_html_a5dd07a6bd1ef3c199e15b8312ab41109"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a5dd07a6bd1ef3c199e15b8312ab41109">ast_channel_hangupsource</a></div><div class="ttdeci">const char * ast_channel_hangupsource(const struct ast_channel *chan)</div></div>
<div class="ttc" id="structast__msg__data__attribute_html"><div class="ttname"><a href="../../d7/d04/structast__msg__data__attribute.html">ast_msg_data_attribute</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00462">message.h:462</a></div></div>
<div class="ttc" id="causes_8h_html_a5de204957046b5d124eded03c101c6ba"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a5de204957046b5d124eded03c101c6ba">AST_CAUSE_MANDATORY_IE_LENGTH_ERROR</a></div><div class="ttdeci">#define AST_CAUSE_MANDATORY_IE_LENGTH_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00143">causes.h:143</a></div></div>
<div class="ttc" id="structtonepair__state_html_a346af58f2d4bbe53004ec9ef0cdabfa4"><div class="ttname"><a href="../../d6/d63/structtonepair__state.html#a346af58f2d4bbe53004ec9ef0cdabfa4">tonepair_state::fac2</a></div><div class="ttdeci">int fac2</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07571">channel.c:7571</a></div></div>
<div class="ttc" id="devicestate_8h_html_a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00070">devicestate.h:70</a></div></div>
<div class="ttc" id="channel_8c_html_aace0c1f41b57a6599775d0f704234eaf"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aace0c1f41b57a6599775d0f704234eaf">ast_channel_hangupcause_hash_set</a></div><div class="ttdeci">void ast_channel_hangupcause_hash_set(struct ast_channel *chan, const struct ast_control_pvt_cause_code *cause_code, int datalen)</div><div class="ttdoc">Sets the HANGUPCAUSE hash and optionally the SIP_CAUSE hash on the given channel. ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04391">channel.c:4391</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a314496ce1d74ed7fdb9c5319c5e2e953"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a314496ce1d74ed7fdb9c5319c5e2e953">ast_frisolate</a></div><div class="ttdeci">#define ast_frisolate(fr)</div><div class="ttdoc">Makes a frame independent of any static storage. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00577">include/asterisk/frame.h:577</a></div></div>
<div class="ttc" id="channel_8h_html_a6ca2ac36e55b1064c66d2a0c90d3c4e0"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6ca2ac36e55b1064c66d2a0c90d3c4e0">ast_channel_autochans</a></div><div class="ttdeci">struct ast_autochan_list * ast_channel_autochans(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00872">channel_internal_api.c:872</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="structast__party__redirecting__reason__ies_html"><div class="ttname"><a href="../../d0/dbd/structast__party__redirecting__reason__ies.html">ast_party_redirecting_reason_ies</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09325">channel.c:9325</a></div></div>
<div class="ttc" id="threadstorage_8h_html_a273e9e038c879199c4192156b9349169"><div class="ttname"><a href="../../dc/d7d/threadstorage_8h.html#a273e9e038c879199c4192156b9349169">ast_threadstorage_get_ptr</a></div><div class="ttdeci">void * ast_threadstorage_get_ptr(struct ast_threadstorage *ts)</div><div class="ttdoc">Retrieve a raw pointer from threadstorage. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/threadstorage_8h_source.html#l00241">threadstorage.h:241</a></div></div>
<div class="ttc" id="channel_8h_html_a7343470869d125280cc142d7d47d86a2"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7343470869d125280cc142d7d47d86a2">ast_channel_timingfd_set</a></div><div class="ttdeci">void ast_channel_timingfd_set(struct ast_channel *chan, int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00473">channel_internal_api.c:473</a></div></div>
<div class="ttc" id="structast__datastore_html_a79d869daa2e63a92b3e5f542446031bb"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html#a79d869daa2e63a92b3e5f542446031bb">ast_datastore::inheritance</a></div><div class="ttdeci">unsigned int inheritance</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00073">datastore.h:73</a></div></div>
<div class="ttc" id="ccss_8h_html_a6f6f8fffb6cf0856d5cf953c5f51b74b"><div class="ttname"><a href="../../de/dc8/ccss_8h.html#a6f6f8fffb6cf0856d5cf953c5f51b74b">ast_cc_copy_config_params</a></div><div class="ttdeci">void ast_cc_copy_config_params(struct ast_cc_config_params *dest, const struct ast_cc_config_params *src)</div><div class="ttdoc">copy CCSS configuration parameters from one structure to another </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/ccss_8c_source.html#l00861">ccss.c:861</a></div></div>
<div class="ttc" id="channel_8c_html_a3212119ca5acac4c9ec6051987380876a70db77169415300aa82d2ec95028bd0b"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a70db77169415300aa82d2ec95028bd0b">AST_CONNECTED_LINE_SUBADDRESS_ODD_EVEN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08765">channel.c:8765</a></div></div>
<div class="ttc" id="channel_8c_html_a3c27a399ee6a32bd294b78e659a0763f"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3c27a399ee6a32bd294b78e659a0763f">namedgroup_cmp_cb</a></div><div class="ttdeci">static int namedgroup_cmp_cb(void *obj, void *arg, int flags)</div><div class="ttdoc">Comparison function used for named group container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07759">channel.c:7759</a></div></div>
<div class="ttc" id="channel_8c_html_ac7f590f6fdd261fc2ab76a9ff97247e8"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ac7f590f6fdd261fc2ab76a9ff97247e8">party_id_build_data</a></div><div class="ttdeci">static int party_id_build_data(unsigned char *data, size_t datalen, const struct ast_party_id *id, const char *label, const struct ast_party_id_ies *ies, const struct ast_set_party_id *update)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08673">channel.c:8673</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a1a461c5e737ed6ed7c8cb0f78557a6fd"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a1a461c5e737ed6ed7c8cb0f78557a6fd">AST_CONTROL_PROGRESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00291">include/asterisk/frame.h:291</a></div></div>
<div class="ttc" id="channel_8c_html_a7160355005776732fba88cc020f4a45b"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a7160355005776732fba88cc020f4a45b">ast_deactivate_generator</a></div><div class="ttdeci">void ast_deactivate_generator(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02902">channel.c:2902</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
<div class="ttc" id="structast__secure__call__store_html_ac5b7f0f9a2b172ba668e03fb737038e5"><div class="ttname"><a href="../../dd/d2a/structast__secure__call__store.html#ac5b7f0f9a2b172ba668e03fb737038e5">ast_secure_call_store::media</a></div><div class="ttdeci">unsigned int media</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc3/global__datastores_8h_source.html#l00033">global_datastores.h:33</a></div></div>
<div class="ttc" id="timing_8h_html_aa3aa7580d76e1d3f7927b3f34764dec2"><div class="ttname"><a href="../../db/d41/timing_8h.html#aa3aa7580d76e1d3f7927b3f34764dec2">ast_timer_fd</a></div><div class="ttdeci">int ast_timer_fd(const struct ast_timer *handle)</div><div class="ttdoc">Get a poll()-able file descriptor for a timer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d62/timing_8c_source.html#l00161">timing.c:161</a></div></div>
<div class="ttc" id="timing_8h_html_a4dae39fb5fb680a48a05d7567053eb03"><div class="ttname"><a href="../../db/d41/timing_8h.html#a4dae39fb5fb680a48a05d7567053eb03">ast_timer_set_rate</a></div><div class="ttdeci">int ast_timer_set_rate(const struct ast_timer *handle, unsigned int rate)</div><div class="ttdoc">Set the timing tick rate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d62/timing_8c_source.html#l00166">timing.c:166</a></div></div>
<div class="ttc" id="channel_8c_html_a010c8169fd7c857d615a4195e932d928"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a010c8169fd7c857d615a4195e932d928">channels_shutdown</a></div><div class="ttdeci">static void channels_shutdown(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08095">channel.c:8095</a></div></div>
<div class="ttc" id="channel_8c_html_a509aeb7d4b65232ad296813f674e90dd"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a509aeb7d4b65232ad296813f674e90dd">tonepair_release</a></div><div class="ttdeci">static void tonepair_release(struct ast_channel *chan, void *params)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07587">channel.c:7587</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a7c6096b70aeb9e6b2b4f9ee5cfccbf7a"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a7c6096b70aeb9e6b2b4f9ee5cfccbf7a">AST_CONTROL_READ_ACTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00304">include/asterisk/frame.h:304</a></div></div>
<div class="ttc" id="causes_8h_html_a13666e22c99b4ccda92e6e1431368474"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a13666e22c99b4ccda92e6e1431368474">AST_CAUSE_INTERWORKING</a></div><div class="ttdeci">#define AST_CAUSE_INTERWORKING</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00145">causes.h:145</a></div></div>
<div class="ttc" id="structast__party__redirecting_html_aa961ad9bce0cf7679c5d938519ff1885"><div class="ttname"><a href="../../df/d44/structast__party__redirecting.html#aa961ad9bce0cf7679c5d938519ff1885">ast_party_redirecting::reason</a></div><div class="ttdeci">struct ast_party_redirecting_reason reason</div><div class="ttdoc">Reason for the redirection. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00543">channel.h:543</a></div></div>
<div class="ttc" id="structast__party__dialed_html_a10023f503341f2b8c82117b31a0cc531"><div class="ttname"><a href="../../d1/dd1/structast__party__dialed.html#a10023f503341f2b8c82117b31a0cc531">ast_party_dialed::subaddress</a></div><div class="ttdeci">struct ast_party_subaddress subaddress</div><div class="ttdoc">Dialed/Called subaddress. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00392">channel.h:392</a></div></div>
<div class="ttc" id="channel_8c_html_a99698cbdfd9c1a86f36e0a226076e69f"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a99698cbdfd9c1a86f36e0a226076e69f">generator_force</a></div><div class="ttdeci">static int generator_force(const void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02925">channel.c:2925</a></div></div>
<div class="ttc" id="stream_8h_html_a5eb43440630db819220df97b01f48922"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a5eb43440630db819220df97b01f48922">ast_stream_topology_get_count</a></div><div class="ttdeci">int ast_stream_topology_get_count(const struct ast_stream_topology *topology)</div><div class="ttdoc">Get the number of streams in a topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00765">stream.c:765</a></div></div>
<div class="ttc" id="timing_8h_html_a5d6bdd95ef88176d055961ce353fcfdf"><div class="ttname"><a href="../../db/d41/timing_8h.html#a5d6bdd95ef88176d055961ce353fcfdf">ast_timer_enable_continuous</a></div><div class="ttdeci">int ast_timer_enable_continuous(const struct ast_timer *handle)</div><div class="ttdoc">Enable continuous mode. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d62/timing_8c_source.html#l00176">timing.c:176</a></div></div>
<div class="ttc" id="framehook_8h_html_aaf78d3daa82363bca63031668de97260"><div class="ttname"><a href="../../db/d3c/framehook_8h.html#aaf78d3daa82363bca63031668de97260">ast_framehook_list_contains_no_active</a></div><div class="ttdeci">int ast_framehook_list_contains_no_active(struct ast_framehook_list *framehooks)</div><div class="ttdoc">Determine if a framehook list is free of active framehooks or not. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dac/framehook_8c_source.html#l00282">framehook.c:282</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga9de7fcf34407ccef0f56764ecfa1f7a4"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga9de7fcf34407ccef0f56764ecfa1f7a4">ast_channel_dtmf_begin_type</a></div><div class="ttdeci">struct stasis_message_type * ast_channel_dtmf_begin_type(void)</div><div class="ttdoc">Message type for when DTMF begins on a channel. </div></div>
<div class="ttc" id="channel_8c_html_a3212119ca5acac4c9ec6051987380876a0d3f08aab70c15ca65cafceda937166f"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a0d3f08aab70c15ca65cafceda937166f">AST_CONNECTED_LINE_PRIV_NAME_VALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08783">channel.c:8783</a></div></div>
<div class="ttc" id="channel__internal_8h_html_a51c2bdaad6a3acef5089f6a29bdc7164"><div class="ttname"><a href="../../d5/de4/channel__internal_8h.html#a51c2bdaad6a3acef5089f6a29bdc7164">ast_channel_internal_errno</a></div><div class="ttdeci">enum ast_channel_error ast_channel_internal_errno(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01573">channel_internal_api.c:1573</a></div></div>
<div class="ttc" id="channel_8c_html_af6f0b2102f29f86914e10a7787f0d536"><div class="ttname"><a href="../../d4/d28/channel_8c.html#af6f0b2102f29f86914e10a7787f0d536">ast_party_redirecting_copy</a></div><div class="ttdeci">void ast_party_redirecting_copy(struct ast_party_redirecting *dest, const struct ast_party_redirecting *src)</div><div class="ttdoc">Copy the source redirecting information to the destination redirecting. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02135">channel.c:2135</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660aa00d313d1a4f4502932f1c10bd619591"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa00d313d1a4f4502932f1c10bd619591">AST_STATE_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00043">channelstate.h:43</a></div></div>
<div class="ttc" id="channel_8c_html_ab025bba87d1757aa28e1a837596b1ead"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ab025bba87d1757aa28e1a837596b1ead">ast_channel_update_redirecting</a></div><div class="ttdeci">void ast_channel_update_redirecting(struct ast_channel *chan, const struct ast_party_redirecting *redirecting, const struct ast_set_party_redirecting *update)</div><div class="ttdoc">Indicate that the redirecting id has changed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10379">channel.c:10379</a></div></div>
<div class="ttc" id="channel_8c_html_a436cc7c95daa0d292aeb73b9e88d99e4"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a436cc7c95daa0d292aeb73b9e88d99e4">ast_channel_get_up_time_ms</a></div><div class="ttdeci">int64_t ast_channel_get_up_time_ms(struct ast_channel *chan)</div><div class="ttdoc">Obtain how long it has been since the channel was answered in ms. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02844">channel.c:2844</a></div></div>
<div class="ttc" id="utils_8h_html_a7b260320610a09017a9416398acd0a70"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a></div><div class="ttdeci">#define ast_clear_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00077">utils.h:77</a></div></div>
<div class="ttc" id="channel_8c_html_a742eebbd38e247bf75ecc419683fa784"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a742eebbd38e247bf75ecc419683fa784">ast_channel_cmpwhentohangup_tv</a></div><div class="ttdeci">int ast_channel_cmpwhentohangup_tv(struct ast_channel *chan, struct timeval offset)</div><div class="ttdoc">Compare a offset with when to hangup channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00523">channel.c:523</a></div></div>
<div class="ttc" id="channel_8h_html_ad2334e69c466aec25ba3cbba53b7201b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ad2334e69c466aec25ba3cbba53b7201b">ast_channel_redirecting</a></div><div class="ttdeci">struct ast_party_redirecting * ast_channel_redirecting(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00908">channel_internal_api.c:908</a></div></div>
<div class="ttc" id="channel_8c_html_a39b24ee9bbee67cd9e4ceb2626a4eda3"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a39b24ee9bbee67cd9e4ceb2626a4eda3">ast_print_namedgroups</a></div><div class="ttdeci">char * ast_print_namedgroups(struct ast_str **buf, struct ast_namedgroups *group)</div><div class="ttdoc">Print named call groups and named pickup groups. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08158">channel.c:8158</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_ade5a89f9bee15a492c760ec1765a292d"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#ade5a89f9bee15a492c760ec1765a292d">cid_name</a></div><div class="ttdeci">static char cid_name[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00165">chan_mgcp.c:165</a></div></div>
<div class="ttc" id="structast__channel__tech_html_aa37c9a8963e5e72cddde51a44a0fde38"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#aa37c9a8963e5e72cddde51a44a0fde38">ast_channel_tech::read</a></div><div class="ttdeci">struct ast_frame *(*const read)(struct ast_channel *chan)</div><div class="ttdoc">Read a frame (or chain of frames from the same stream), in standard format (see frame.h) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00735">channel.h:735</a></div></div>
<div class="ttc" id="channel_8h_html_ae3d06c28b4dc8cb2830aa16c8913e6d9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae3d06c28b4dc8cb2830aa16c8913e6d9">ast_channel_callid_set</a></div><div class="ttdeci">void ast_channel_callid_set(struct ast_channel *chan, ast_callid value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00797">channel_internal_api.c:797</a></div></div>
<div class="ttc" id="structast__set__party__connected__line_html"><div class="ttname"><a href="../../d4/dc9/structast__set__party__connected__line.html">ast_set_party_connected_line</a></div><div class="ttdoc">Indicate what information in ast_party_connected_line should be set. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00490">channel.h:490</a></div></div>
<div class="ttc" id="structnamedgroup__member_html_ac8b44a387cf3da062c4a32316b43962c"><div class="ttname"><a href="../../db/d9c/structnamedgroup__member.html#ac8b44a387cf3da062c4a32316b43962c">namedgroup_member::name</a></div><div class="ttdeci">char name[1]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07755">channel.c:7755</a></div></div>
<div class="ttc" id="chan__unistim_8c_html_a31a1d6096182df0a096b7315145cc291"><div class="ttname"><a href="../../d1/d6d/chan__unistim_8c.html#a31a1d6096182df0a096b7315145cc291">send_text</a></div><div class="ttdeci">static void send_text(unsigned char pos, unsigned char inverse, struct unistimsession *pte, const char *text)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6d/chan__unistim_8c_source.html#l01578">chan_unistim.c:1578</a></div></div>
<div class="ttc" id="structast__frame_html_aed16590d48f41d89f31e0cf347f5cd99"><div class="ttname"><a href="../../d0/d99/structast__frame.html#aed16590d48f41d89f31e0cf347f5cd99">ast_frame::mallocd</a></div><div class="ttdeci">int mallocd</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00175">include/asterisk/frame.h:175</a></div></div>
<div class="ttc" id="channel_8h_html_a3a5d847510a477edda3d0bc1459709f4"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3a5d847510a477edda3d0bc1459709f4">CHECK_BLOCKING</a></div><div class="ttdeci">#define CHECK_BLOCKING(c)</div><div class="ttdoc">Set the blocking indication on the channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02894">channel.h:2894</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a3458c569979f7c11bb5a8a638748c128"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a3458c569979f7c11bb5a8a638748c128">AST_REDIRECTING_FROM_NUMBER_VALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09261">channel.c:9261</a></div></div>
<div class="ttc" id="channel_8c_html_af558043411edede3b5fda44a08da589f"><div class="ttname"><a href="../../d4/d28/channel_8c.html#af558043411edede3b5fda44a08da589f">ast_raw_answer</a></div><div class="ttdeci">int ast_raw_answer(struct ast_channel *chan)</div><div class="ttdoc">Answer a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02699">channel.c:2699</a></div></div>
<div class="ttc" id="pbx_8h_html_adc4d340f4e9d60ef5fbfd93a0e6f9c33"><div class="ttname"><a href="../../db/de0/pbx_8h.html#adc4d340f4e9d60ef5fbfd93a0e6f9c33">ast_pbx_hangup_handler_run</a></div><div class="ttdeci">int ast_pbx_hangup_handler_run(struct ast_channel *chan)</div><div class="ttdoc">Run all hangup handlers on the channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d53/pbx__hangup__handler_8c_source.html#l00058">pbx_hangup_handler.c:58</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660aa70881e902c6c29f27ffba80bb43554f"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa70881e902c6c29f27ffba80bb43554f">AST_STATE_DIALING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00039">channelstate.h:39</a></div></div>
<div class="ttc" id="channel_8c_html_a7f947d997e2f6c1a995d2e093240cbc9"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a7f947d997e2f6c1a995d2e093240cbc9">ast_senddigit_mf_end</a></div><div class="ttdeci">int ast_senddigit_mf_end(struct ast_channel *chan)</div><div class="ttdoc">End sending an MF digit to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04988">channel.c:4988</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="func__strings_8c_html_a7f763283c27da5574f6f8d1b2a2b9288"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#a7f763283c27da5574f6f8d1b2a2b9288">replace</a></div><div class="ttdeci">static int replace(struct ast_channel *chan, const char *cmd, char *data, struct ast_str **buf, ssize_t len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l00790">func_strings.c:790</a></div></div>
<div class="ttc" id="channel_8h_html_a018b7a29cef2d62074dc46e9aaad0d1a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a018b7a29cef2d62074dc46e9aaad0d1a">ast_channel_exten_set</a></div><div class="ttdeci">void ast_channel_exten_set(struct ast_channel *chan, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00357">channel_internal_api.c:357</a></div></div>
<div class="ttc" id="channel_8h_html_a4a5bc2ea394aace55ea3809e53365ea9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a></div><div class="ttdeci">struct ast_format_cap * ast_channel_nativeformats(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00637">channel_internal_api.c:637</a></div></div>
<div class="ttc" id="channel_8c_html_a5f72bc09af81d17c4ecebf77cea38508"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a5f72bc09af81d17c4ecebf77cea38508">ast_channel_get_manager_vars</a></div><div class="ttdeci">struct varshead * ast_channel_get_manager_vars(struct ast_channel *chan)</div><div class="ttdoc">Gets the variables for a given channel, as specified by ast_channel_set_manager_vars(). </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08085">channel.c:8085</a></div></div>
<div class="ttc" id="channel_8c_html_ab1f348349b5df2d0b662fb9eed5afcce"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ab1f348349b5df2d0b662fb9eed5afcce">ast_party_id_invalidate</a></div><div class="ttdeci">void ast_party_id_invalidate(struct ast_party_id *id)</div><div class="ttdoc">Invalidate all components of the given party id. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01889">channel.c:1889</a></div></div>
<div class="ttc" id="structcauses__map_html_a710bce51374aba96ab04912897666c35"><div class="ttname"><a href="../../db/ddc/structcauses__map.html#a710bce51374aba96ab04912897666c35">causes_map::desc</a></div><div class="ttdeci">const char * desc</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00133">channel.c:133</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="channel_8c_html_ad75b575faec0b9bac758d6a373ee762f"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ad75b575faec0b9bac758d6a373ee762f">ast_pre_call</a></div><div class="ttdeci">int ast_pre_call(struct ast_channel *chan, const char *sub_args)</div><div class="ttdoc">Execute a Gosub call on the channel before a call is placed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06536">channel.c:6536</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a9ed4c9cba00cfa3b18500f56d6210523"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9ed4c9cba00cfa3b18500f56d6210523">AST_CONTROL_RECORD_MUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00342">include/asterisk/frame.h:342</a></div></div>
<div class="ttc" id="channel_8h_html_a9e9505a91a84992d04ba4e85217fb4e4a085c0c603de12dc2474a17a92e1cb5a4"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a085c0c603de12dc2474a17a92e1cb5a4">AST_SOFTHANGUP_ASYNCGOTO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01127">channel.h:1127</a></div></div>
<div class="ttc" id="causes_8h_html_a108b5a1677d352e094dbc6b2b0cf53f4"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a108b5a1677d352e094dbc6b2b0cf53f4">AST_CAUSE_INVALID_IE_CONTENTS</a></div><div class="ttdeci">#define AST_CAUSE_INVALID_IE_CONTENTS</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00140">causes.h:140</a></div></div>
<div class="ttc" id="structast__set__party__redirecting_html_aa15d132882ae125c346da6ab687a8d59"><div class="ttname"><a href="../../de/df8/structast__set__party__redirecting.html#aa15d132882ae125c346da6ab687a8d59">ast_set_party_redirecting::orig</a></div><div class="ttdeci">struct ast_set_party_id orig</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00558">channel.h:558</a></div></div>
<div class="ttc" id="channel_8h_html_a792260bb54b287fbde2336c162973ecf"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a792260bb54b287fbde2336c162973ecf">ast_channel_sending_dtmf_tv_set</a></div><div class="ttdeci">void ast_channel_sending_dtmf_tv_set(struct ast_channel *chan, struct timeval value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00401">channel_internal_api.c:401</a></div></div>
<div class="ttc" id="channel_8h_html_a705c75fc3efd10c77342754f49044eb6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a705c75fc3efd10c77342754f49044eb6">ast_channel_dtmf_digit_to_emulate</a></div><div class="ttdeci">char ast_channel_dtmf_digit_to_emulate(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00379">channel_internal_api.c:379</a></div></div>
<div class="ttc" id="callerid_8h_html_aec2d69e281c81503bc532e107ca26f66"><div class="ttname"><a href="../../de/d47/callerid_8h.html#aec2d69e281c81503bc532e107ca26f66">AST_PRES_RESTRICTION</a></div><div class="ttdeci">#define AST_PRES_RESTRICTION</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00323">callerid.h:323</a></div></div>
<div class="ttc" id="bridge__features_8h_html_abf9e5d393615c63d27e0bd530301a1ed"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#abf9e5d393615c63d27e0bd530301a1ed">ast_bridge_features_new</a></div><div class="ttdeci">struct ast_bridge_features * ast_bridge_features_new(void)</div><div class="ttdoc">Allocate a new bridge features struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03750">bridge.c:3750</a></div></div>
<div class="ttc" id="channel_8c_html_a391b1236902630a3cb9ac5b6d381c6dd"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a391b1236902630a3cb9ac5b6d381c6dd">channel_has_external_vars</a></div><div class="ttdeci">static int channel_has_external_vars(struct external_vars *channelvars)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07946">channel.c:7946</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ae177c145d03ff05a54e1d0547a239005"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae177c145d03ff05a54e1d0547a239005">AST_CONTROL_TRANSFER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00298">include/asterisk/frame.h:298</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_af203379aca2fd704fe8d86a9445596b6"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a></div><div class="ttdeci">struct ast_frame ast_null_frame</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d55/main_2frame_8c_source.html#l00079">main/frame.c:79</a></div></div>
<div class="ttc" id="channel_8h_html_a4ebd6b7a4ee77aad814080881a495dc9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4ebd6b7a4ee77aad814080881a495dc9">ast_channel_sending_dtmf_tv</a></div><div class="ttdeci">struct timeval ast_channel_sending_dtmf_tv(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00397">channel_internal_api.c:397</a></div></div>
<div class="ttc" id="channel_8c_html_a7197eea912710dca220f38dbec9e618d"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a7197eea912710dca220f38dbec9e618d">channel_cc_params_destroy</a></div><div class="ttdeci">static void channel_cc_params_destroy(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10640">channel.c:10640</a></div></div>
<div class="ttc" id="channel_8h_html_aa7ace5b23c1d6c753dec9477efcb09b7"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa7ace5b23c1d6c753dec9477efcb09b7">ast_channel_creationtime_set</a></div><div class="ttdeci">void ast_channel_creationtime_set(struct ast_channel *chan, struct timeval *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00980">channel_internal_api.c:980</a></div></div>
<div class="ttc" id="structast__party__id__ies_html_a8993e50df9b0cec283d52de46d949283"><div class="ttname"><a href="../../d5/d23/structast__party__id__ies.html#a8993e50df9b0cec283d52de46d949283">ast_party_id_ies::combined_presentation</a></div><div class="ttdeci">int combined_presentation</div><div class="ttdoc">Combined name and number presentation ie. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08655">channel.c:8655</a></div></div>
<div class="ttc" id="channel_8c_html_abfe7d902da46e372034cda92b5c13c4f"><div class="ttname"><a href="../../d4/d28/channel_8c.html#abfe7d902da46e372034cda92b5c13c4f">ast_channel_is_leaving_bridge</a></div><div class="ttdeci">int ast_channel_is_leaving_bridge(struct ast_channel *chan)</div><div class="ttdoc">Determine if a channel is leaving a bridge, but not hung up. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10751">channel.c:10751</a></div></div>
<div class="ttc" id="channel_8h_html_a695e5b4fcf983db6451b583fbd647424"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a695e5b4fcf983db6451b583fbd647424">ast_channel_lock_both</a></div><div class="ttdeci">#define ast_channel_lock_both(chan1, chan2)</div><div class="ttdoc">Lock two channels. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02952">channel.h:2952</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a2457835b26aa09c41c6ecf633f95f775a9e8b2eb87931f7565311b556a32e6993"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a2457835b26aa09c41c6ecf633f95f775a9e8b2eb87931f7565311b556a32e6993">AST_FRAME_READ_ACTION_SEND_TEXT_DATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00354">include/asterisk/frame.h:354</a></div></div>
<div class="ttc" id="framehook_8h_html"><div class="ttname"><a href="../../db/d3c/framehook_8h.html">framehook.h</a></div><div class="ttdoc">FrameHook Architecture. </div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="channel_8c_html_a71d89dbc5107b1f851dcbf1686a0d9d9"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a71d89dbc5107b1f851dcbf1686a0d9d9">ast_channel_get_by_name_prefix</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name_prefix(const char *name, size_t name_len)</div><div class="ttdoc">Find a channel by a name prefix. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01434">channel.c:1434</a></div></div>
<div class="ttc" id="logger_8h_html_af360dd5e7b67cff6cb747d1aa2ac3db8"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#af360dd5e7b67cff6cb747d1aa2ac3db8">LOG_DTMF</a></div><div class="ttdeci">#define LOG_DTMF</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00307">logger.h:307</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a417bc8ac5817cc1525a3b530abfc1528"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a417bc8ac5817cc1525a3b530abfc1528">AST_CONTROL_VIDUPDATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00295">include/asterisk/frame.h:295</a></div></div>
<div class="ttc" id="structast__party__id_html_a7bb5e40c10df6a41df64bda1f4bb3e26"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#a7bb5e40c10df6a41df64bda1f4bb3e26">ast_party_id::tag</a></div><div class="ttdeci">char * tag</div><div class="ttdoc">User-set &quot;tag&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00355">channel.h:355</a></div></div>
<div class="ttc" id="channel_8h_html_a8e5cf0a066beee895cfd9048e4abdbb3"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a8e5cf0a066beee895cfd9048e4abdbb3">ast_channel_fd</a></div><div class="ttdeci">int ast_channel_fd(const struct ast_channel *chan, int which)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01186">channel_internal_api.c:1186</a></div></div>
<div class="ttc" id="structast__set__party__connected__line_html_aa7845dae2adff27b0da13c58b16ca805"><div class="ttname"><a href="../../d4/dc9/structast__set__party__connected__line.html#aa7845dae2adff27b0da13c58b16ca805">ast_set_party_connected_line::id</a></div><div class="ttdeci">struct ast_set_party_id id</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00492">channel.h:492</a></div></div>
<div class="ttc" id="channel_8c_html_a2161934659b4d81f8e225d107d5e91e8"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a2161934659b4d81f8e225d107d5e91e8">ast_set_read_format_path</a></div><div class="ttdeci">int ast_set_read_format_path(struct ast_channel *chan, struct ast_format *raw_format, struct ast_format *core_format)</div><div class="ttdoc">Set specific read path on channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05575">channel.c:5575</a></div></div>
<div class="ttc" id="structast__party__subaddress_html_ac765329451135abec74c45e1897abf26"><div class="ttname"><a href="../../d7/d41/structast__party__subaddress.html#ac765329451135abec74c45e1897abf26">ast_party_subaddress::type</a></div><div class="ttdeci">int type</div><div class="ttdoc">Q.931 subaddress type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00321">channel.h:321</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a4e7df166afca82e85b8faa06d74c68f5"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a4e7df166afca82e85b8faa06d74c68f5">AST_REDIRECTING_PRIV_TO_NUMBER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09282">channel.c:9282</a></div></div>
<div class="ttc" id="channel_8h_html_adac99999f1e55833e7f903979d67b48b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#adac99999f1e55833e7f903979d67b48b">ast_channel_softhangup_internal_flag</a></div><div class="ttdeci">int ast_channel_softhangup_internal_flag(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00997">channel_internal_api.c:997</a></div></div>
<div class="ttc" id="channel_8c_html_a39fc055500e09810d0afd0bff87407c5"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a39fc055500e09810d0afd0bff87407c5">ast_request</a></div><div class="ttdeci">struct ast_channel * ast_request(const char *type, struct ast_format_cap *request_cap, const struct ast_assigned_ids *assignedids, const struct ast_channel *requestor, const char *addr, int *cause)</div><div class="ttdoc">Requests a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06444">channel.c:6444</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="structast__datastore_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../d4/d5d/structast__datastore.html#a735984d41155bc1032e09bece8f8d66d">ast_datastore::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00070">datastore.h:70</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadda916488b2d151af4426e2f06ad332"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_TAIL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00740">linkedlists.h:740</a></div></div>
<div class="ttc" id="structast__set__party__caller_html_a1ad0a1732e669f57e5b6e609affdd1db"><div class="ttname"><a href="../../d7/d91/structast__set__party__caller.html#a1ad0a1732e669f57e5b6e609affdd1db">ast_set_party_caller::priv</a></div><div class="ttdeci">struct ast_set_party_id priv</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00447">channel.h:447</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792aaddd1dfb5bf6cb498482095157f30694"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aaddd1dfb5bf6cb498482095157f30694">AST_REDIRECTING_PRIV_ORIG_NAME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09312">channel.c:9312</a></div></div>
<div class="ttc" id="causes_8h_html_a7f49d27e9e3876fb4ccf1d139d31db73"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a7f49d27e9e3876fb4ccf1d139d31db73">AST_CAUSE_REQUESTED_CHAN_UNAVAIL</a></div><div class="ttdeci">#define AST_CAUSE_REQUESTED_CHAN_UNAVAIL</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00124">causes.h:124</a></div></div>
<div class="ttc" id="structtonepair__state_html_a0a65e151f23eb826acca0a6bee55edb5"><div class="ttname"><a href="../../d6/d63/structtonepair__state.html#a0a65e151f23eb826acca0a6bee55edb5">tonepair_state::v1_1</a></div><div class="ttdeci">int v1_1</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07572">channel.c:7572</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a3b3724a87f3c5bfd700091011e01e0df"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a3b3724a87f3c5bfd700091011e01e0df">AST_REDIRECTING_TO_SUBADDRESS_ODD_EVEN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09249">channel.c:9249</a></div></div>
<div class="ttc" id="channel_8c_html_a3212119ca5acac4c9ec6051987380876a7fa2503dc4dfb16153f519deeb2d47ec"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a7fa2503dc4dfb16153f519deeb2d47ec">AST_CONNECTED_LINE_NUMBER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08758">channel.c:8758</a></div></div>
<div class="ttc" id="structast__party__dialed_html_af1107092b9e5d7570605297a465ec766"><div class="ttname"><a href="../../d1/dd1/structast__party__dialed.html#af1107092b9e5d7570605297a465ec766">ast_party_dialed::transit_network_select</a></div><div class="ttdeci">int transit_network_select</div><div class="ttdoc">Transit Network Select. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00398">channel.h:398</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a168d496bdac09ece3ce49cf473bbdb4bad501e0d5fe272eaba466507a686a2df5"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4bad501e0d5fe272eaba466507a686a2df5">AST_T38_NEGOTIATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00373">include/asterisk/frame.h:373</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0d1f922e093ac18824a7863fe3f5fa27"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a></div><div class="ttdeci">#define AST_LIST_HEAD_INIT_NOLOCK(head)</div><div class="ttdoc">Initializes a list head structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00680">linkedlists.h:680</a></div></div>
<div class="ttc" id="file_8h_html_a3089874cd5223053f670c8499e911ec4"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a></div><div class="ttdeci">int ast_waitstream_full(struct ast_channel *c, const char *breakon, int audiofd, int monfd)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01785">file.c:1785</a></div></div>
<div class="ttc" id="channel_8c_html_a465c2ce577a0166ceca7e0880339184c"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a465c2ce577a0166ceca7e0880339184c">ast_transfercapability2str</a></div><div class="ttdeci">char * ast_transfercapability2str(int transfercapability)</div><div class="ttdoc">Gives the string form of a given transfer capability. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00678">channel.c:678</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390af3bdb353330f1908e9558180b5bb9e16"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af3bdb353330f1908e9558180b5bb9e16">AST_CONTROL_INCOMPLETE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00307">include/asterisk/frame.h:307</a></div></div>
<div class="ttc" id="causes_8h_html_a74216ee399855c096941fac24aed92cd"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a74216ee399855c096941fac24aed92cd">AST_CAUSE_PRE_EMPTED</a></div><div class="ttdeci">#define AST_CAUSE_PRE_EMPTED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00103">causes.h:103</a></div></div>
<div class="ttc" id="channel_8c_html_aeaeb784665c384163aefb975ddf8bbe8"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aeaeb784665c384163aefb975ddf8bbe8">ast_channel_defer_dtmf</a></div><div class="ttdeci">int ast_channel_defer_dtmf(struct ast_channel *chan)</div><div class="ttdoc">Set defer DTMF flag on channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01257">channel.c:1257</a></div></div>
<div class="ttc" id="structtonepair__state_html_a67c7e065450c2a224e067625e9cdaa0c"><div class="ttname"><a href="../../d6/d63/structtonepair__state.html#a67c7e065450c2a224e067625e9cdaa0c">tonepair_state::origwfmt</a></div><div class="ttdeci">struct ast_format * origwfmt</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07578">channel.c:7578</a></div></div>
<div class="ttc" id="structast__bridge__channel_html"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a></div><div class="ttdoc">Structure that contains information regarding a channel in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00084">bridge_channel.h:84</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e">AST_CONTROL_UNHOLD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00294">include/asterisk/frame.h:294</a></div></div>
<div class="ttc" id="structast__set__party__redirecting_html_afe0af5d5745eaa2d86a2d34f6f36d53e"><div class="ttname"><a href="../../de/df8/structast__set__party__redirecting.html#afe0af5d5745eaa2d86a2d34f6f36d53e">ast_set_party_redirecting::to</a></div><div class="ttdeci">struct ast_set_party_id to</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00562">channel.h:562</a></div></div>
<div class="ttc" id="causes_8h_html_ace4ceec464072bb9e269b6a52e7a6631"><div class="ttname"><a href="../../d4/da3/causes_8h.html#ace4ceec464072bb9e269b6a52e7a6631">AST_CAUSE_NO_ROUTE_DESTINATION</a></div><div class="ttdeci">#define AST_CAUSE_NO_ROUTE_DESTINATION</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00099">causes.h:99</a></div></div>
<div class="ttc" id="channel_8c_html_aab3dd86fc48e9fb02b9a00732a5ce88d"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aab3dd86fc48e9fb02b9a00732a5ce88d">send_dtmf_end_event</a></div><div class="ttdeci">static void send_dtmf_end_event(struct ast_channel *chan, enum DtmfDirection direction, const char digit, long duration_ms)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03394">channel.c:3394</a></div></div>
<div class="ttc" id="channel_8h_html_aac7951cc0db90f1b1f7841b9d8f87c5b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aac7951cc0db90f1b1f7841b9d8f87c5b">ast_channel_dialed_causes_add</a></div><div class="ttdeci">int ast_channel_dialed_causes_add(const struct ast_channel *chan, const struct ast_control_pvt_cause_code *cause_code, int datalen)</div><div class="ttdoc">Add cause code information to the channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01292">channel_internal_api.c:1292</a></div></div>
<div class="ttc" id="max__forwards_8h_html_a63b977e0cb5f350171fed9dffd4fabe5"><div class="ttname"><a href="../../d3/d93/max__forwards_8h.html#a63b977e0cb5f350171fed9dffd4fabe5">ast_max_forwards_decrement</a></div><div class="ttdeci">int ast_max_forwards_decrement(struct ast_channel *chan)</div><div class="ttdoc">Decrement the max forwards count for a particular channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/ddd/max__forwards_8c_source.html#l00135">max_forwards.c:135</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a84c4783c63eaa92e3ae2230e7f506401"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a84c4783c63eaa92e3ae2230e7f506401">AST_CONTROL_RECORD_STOP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00340">include/asterisk/frame.h:340</a></div></div>
<div class="ttc" id="channel_8c_html_a4344f019a1681df88557f238c81ad5cc"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a4344f019a1681df88557f238c81ad5cc">plc_ds_info</a></div><div class="ttdeci">static const struct ast_datastore_info plc_ds_info</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05093">channel.c:5093</a></div></div>
<div class="ttc" id="structast__set__party__id_html_abbd32f02dc419af56bdf709336f6c33e"><div class="ttname"><a href="../../df/dcf/structast__set__party__id.html#abbd32f02dc419af56bdf709336f6c33e">ast_set_party_id::name</a></div><div class="ttdeci">unsigned char name</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00364">channel.h:364</a></div></div>
<div class="ttc" id="channel_8c_html_a331c5e69285107329a78ab1b2de00844"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a331c5e69285107329a78ab1b2de00844">ast_moh_cleanup_ptr</a></div><div class="ttdeci">static void(* ast_moh_cleanup_ptr)(struct ast_channel *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07848">channel.c:7848</a></div></div>
<div class="ttc" id="channel_8c_html_a129d99e9bb9aafd0f073df357975cb66"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a129d99e9bb9aafd0f073df357975cb66">ast_channel_iterator_by_name_new</a></div><div class="ttdeci">struct ast_channel_iterator * ast_channel_iterator_by_name_new(const char *name, size_t name_len)</div><div class="ttdoc">Create a new channel iterator based on name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01388">channel.c:1388</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a38eedeffc3b8c533b3d4d885a401fcf2"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a38eedeffc3b8c533b3d4d885a401fcf2">AST_REDIRECTING_TO_NAME_VALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09263">channel.c:9263</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a48bc11919b2752df9d14ce89557cfb25"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a></div><div class="ttdeci">FILE * out</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00033">utils/frame.c:33</a></div></div>
<div class="ttc" id="channel__internal_8h_html_a37e976e7736157fa23417a6648584186"><div class="ttname"><a href="../../d5/de4/channel__internal_8h.html#a37e976e7736157fa23417a6648584186">ast_channel_internal_is_finalized</a></div><div class="ttdeci">int ast_channel_internal_is_finalized(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01497">channel_internal_api.c:1497</a></div></div>
<div class="ttc" id="channel_8h_html_a6801c703e767d6f760c54c8b86a30024"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a></div><div class="ttdeci">#define ast_channel_ref(c)</div><div class="ttdoc">Increase channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02970">channel.h:2970</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa81c8462bd0574f4f9e09e71f2772f44"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa81c8462bd0574f4f9e09e71f2772f44">ao2_replace</a></div><div class="ttdeci">#define ao2_replace(dst, src)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00517">astobj2.h:517</a></div></div>
<div class="ttc" id="channel_8c_html_a5cb129ce1d580dbb22ec9573dcb62f7f"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a5cb129ce1d580dbb22ec9573dcb62f7f">chancount</a></div><div class="ttdeci">static int chancount</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00093">channel.c:93</a></div></div>
<div class="ttc" id="channel_8c_html_aa0a52e573af67cb0f29095177128d186"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aa0a52e573af67cb0f29095177128d186">ast_channel_is_bridged</a></div><div class="ttdeci">int ast_channel_is_bridged(const struct ast_channel *chan)</div><div class="ttdoc">Determine if a channel is in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10746">channel.c:10746</a></div></div>
<div class="ttc" id="structast__set__party__redirecting_html"><div class="ttname"><a href="../../de/df8/structast__set__party__redirecting.html">ast_set_party_redirecting</a></div><div class="ttdoc">Indicate what information in ast_party_redirecting should be set. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00556">channel.h:556</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="channel_8c_html_a0b705ba9b5df5720c20172876a67a2ad"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a0b705ba9b5df5720c20172876a67a2ad">ast_party_redirecting_reason_copy</a></div><div class="ttdeci">void ast_party_redirecting_reason_copy(struct ast_party_redirecting_reason *dest, const struct ast_party_redirecting_reason *src)</div><div class="ttdoc">Copy the source redirecting reason information to the destination redirecting reason. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02085">channel.c:2085</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__party__redirecting_html_ad43c3812e6d13e0518d9f8b8f463ffcf"><div class="ttname"><a href="../../df/d44/structast__party__redirecting.html#ad43c3812e6d13e0518d9f8b8f463ffcf">ast_party_redirecting::count</a></div><div class="ttdeci">int count</div><div class="ttdoc">Number of times the call was redirected. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00549">channel.h:549</a></div></div>
<div class="ttc" id="cli_8h_html"><div class="ttname"><a href="../../dc/db0/cli_8h.html">cli.h</a></div><div class="ttdoc">Standard Command Line Interface. </div></div>
<div class="ttc" id="channel_8c_html_aa4bcf718312eafc1e452aae97ef278a2"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aa4bcf718312eafc1e452aae97ef278a2">__ast_channel_alloc</a></div><div class="ttdeci">struct ast_channel * __ast_channel_alloc(int needqueue, int state, const char *cid_num, const char *cid_name, const char *acctcode, const char *exten, const char *context, const struct ast_assigned_ids *assignedids, const struct ast_channel *requestor, enum ama_flags amaflag, struct ast_endpoint *endpoint, const char *file, int line, const char *function, const char *name_fmt,...)</div><div class="ttdoc">Create a channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00960">channel.c:960</a></div></div>
<div class="ttc" id="channel_8c_html_a1ed3e98d33d5587948a0e2ef67a81f52"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a1ed3e98d33d5587948a0e2ef67a81f52">ast_channel_datastore_add</a></div><div class="ttdeci">int ast_channel_datastore_add(struct ast_channel *chan, struct ast_datastore *datastore)</div><div class="ttdoc">Add a datastore to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02390">channel.c:2390</a></div></div>
<div class="ttc" id="channel_8c_html_abf97a21c400858d15b0cd446887be88b"><div class="ttname"><a href="../../d4/d28/channel_8c.html#abf97a21c400858d15b0cd446887be88b">ast_ref_namedgroups</a></div><div class="ttdeci">struct ast_namedgroups * ast_ref_namedgroups(struct ast_namedgroups *groups)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07838">channel.c:7838</a></div></div>
<div class="ttc" id="channel_8c_html_a4ca17f6d1c390e88d53b4180dea5487b"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a4ca17f6d1c390e88d53b4180dea5487b">ast_channel_queryoption</a></div><div class="ttdeci">int ast_channel_queryoption(struct ast_channel *chan, int option, void *data, int *datalen, int block)</div><div class="ttdoc">Checks the value of an option. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07542">channel.c:7542</a></div></div>
<div class="ttc" id="logger_8h_html_ac7388257651bb6a92d3208512fab0ba6"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ac7388257651bb6a92d3208512fab0ba6">SCOPE_TRACE</a></div><div class="ttdeci">#define SCOPE_TRACE(level,...)</div><div class="ttdoc">Print a trace message with details when a scope is entered or existed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00749">logger.h:749</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5a36fa77a64746637c77c6b18a7999d0a2"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a36fa77a64746637c77c6b18a7999d0a2">AST_FLAG_OUTGOING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01000">channel.h:1000</a></div></div>
<div class="ttc" id="channel_8h_html_aa04afa262d7e1b211ee32d17c949a275"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa04afa262d7e1b211ee32d17c949a275">ast_channel_hangupcause</a></div><div class="ttdeci">int ast_channel_hangupcause(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00427">channel_internal_api.c:427</a></div></div>
<div class="ttc" id="channel_8h_html_aca211972dac7b8f3f08a283bfe0aa8bf"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aca211972dac7b8f3f08a283bfe0aa8bf">ast_channel_context_set</a></div><div class="ttdeci">void ast_channel_context_set(struct ast_channel *chan, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00348">channel_internal_api.c:348</a></div></div>
<div class="ttc" id="structcauses__map_html_aa4d0ccb9d0904892652f2f258c5ad225"><div class="ttname"><a href="../../db/ddc/structcauses__map.html#aa4d0ccb9d0904892652f2f258c5ad225">causes_map::cause</a></div><div class="ttdeci">int cause</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00131">channel.c:131</a></div></div>
<div class="ttc" id="structast__party__redirecting_html_ad6644f992fc696511eebf8732e98e74a"><div class="ttname"><a href="../../df/d44/structast__party__redirecting.html#ad6644f992fc696511eebf8732e98e74a">ast_party_redirecting::to</a></div><div class="ttdeci">struct ast_party_id to</div><div class="ttdoc">Call is redirecting to a new party (Sent to the caller) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00531">channel.h:531</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="channel_8c_html_a269e229318912967cf9c939d2b7b52e7"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a269e229318912967cf9c939d2b7b52e7">ast_channel_make_compatible_helper</a></div><div class="ttdeci">static int ast_channel_make_compatible_helper(struct ast_channel *from, struct ast_channel *to)</div><div class="ttdoc">Set up translation from one channel to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06738">channel.c:6738</a></div></div>
<div class="ttc" id="structast__control__pvt__cause__code_html_a47bc493181dff2372ba0b070e7400cd8"><div class="ttname"><a href="../../d9/d2d/structast__control__pvt__cause__code.html#a47bc493181dff2372ba0b070e7400cd8">ast_control_pvt_cause_code::emulate_sip_cause</a></div><div class="ttdeci">unsigned int emulate_sip_cause</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00415">include/asterisk/frame.h:415</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792aa5cd96e496cdbb109fe8c75f5b93b54d"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aa5cd96e496cdbb109fe8c75f5b93b54d">AST_REDIRECTING_ORIG_REASON_STR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09322">channel.c:9322</a></div></div>
<div class="ttc" id="structast__party__subaddress__ies_html_ac765329451135abec74c45e1897abf26"><div class="ttname"><a href="../../d3/d05/structast__party__subaddress__ies.html#ac765329451135abec74c45e1897abf26">ast_party_subaddress_ies::type</a></div><div class="ttdeci">int type</div><div class="ttdoc">subaddress type ie </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08571">channel.c:8571</a></div></div>
<div class="ttc" id="channel_8c_html_a43d96fc80c7e8289f1fac8d7b8fef3ec"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a43d96fc80c7e8289f1fac8d7b8fef3ec">ast_channel_set_manager_vars</a></div><div class="ttdeci">void ast_channel_set_manager_vars(size_t varc, char **vars)</div><div class="ttdoc">Sets the variables to be stored in the manager_vars field of all snapshots. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07989">channel.c:7989</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a5841e97e13068cfd2102214ba2ea123c"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a5841e97e13068cfd2102214ba2ea123c">AST_REDIRECTING_ORIG_SUBADDRESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09276">channel.c:9276</a></div></div>
<div class="ttc" id="structast__set__party__connected__line_html_a273deff24b36cce96822975f2326ad7d"><div class="ttname"><a href="../../d4/dc9/structast__set__party__connected__line.html#a273deff24b36cce96822975f2326ad7d">ast_set_party_connected_line::ani</a></div><div class="ttdeci">struct ast_set_party_id ani</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00494">channel.h:494</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="causes_8h_html_af67b1917cb55d9e32dc837038ff9bc6e"><div class="ttname"><a href="../../d4/da3/causes_8h.html#af67b1917cb55d9e32dc837038ff9bc6e">AST_CAUSE_IE_NONEXIST</a></div><div class="ttdeci">#define AST_CAUSE_IE_NONEXIST</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00139">causes.h:139</a></div></div>
<div class="ttc" id="structast__party__redirecting__reason__ies_html_a45a5b7c00a796a23f01673cef1dbe0a9"><div class="ttname"><a href="../../d0/dbd/structast__party__redirecting__reason__ies.html#a45a5b7c00a796a23f01673cef1dbe0a9">ast_party_redirecting_reason_ies::code</a></div><div class="ttdeci">int code</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09326">channel.c:9326</a></div></div>
<div class="ttc" id="file_8h_html_a3608386b919ef0949d2858cdeb02d12e"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a3608386b919ef0949d2858cdeb02d12e">ast_writestream</a></div><div class="ttdeci">int ast_writestream(struct ast_filestream *fs, struct ast_frame *f)</div><div class="ttdoc">Writes a frame to a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00209">file.c:209</a></div></div>
<div class="ttc" id="structset__format__access_html_a601e38d4371b671a64eaf12766760223"><div class="ttname"><a href="../../d0/d0f/structset__format__access.html#a601e38d4371b671a64eaf12766760223">set_format_access::set_rawformat</a></div><div class="ttdeci">void(* set_rawformat)(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05654">channel.c:5654</a></div></div>
<div class="ttc" id="channel_8h_html_acd38e0ed015ff8ee77f3eef0f425a85f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#acd38e0ed015ff8ee77f3eef0f425a85f">ast_channel_fd_count</a></div><div class="ttdeci">int ast_channel_fd_count(const struct ast_channel *chan)</div><div class="ttdoc">Retrieve the number of file decriptor positions present on the channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01195">channel_internal_api.c:1195</a></div></div>
<div class="ttc" id="structast__cli__args_html_a4b911d12699acbbb5a8b62355b35bae8"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">ast_cli_args::pos</a></div><div class="ttdeci">const int pos</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00164">cli.h:164</a></div></div>
<div class="ttc" id="structoutgoing__helper_html_a94f090d1fb5c71712726fcdf025b9ace"><div class="ttname"><a href="../../d9/dc0/structoutgoing__helper.html#a94f090d1fb5c71712726fcdf025b9ace">outgoing_helper::context</a></div><div class="ttdeci">const char * context</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01106">channel.h:1106</a></div></div>
<div class="ttc" id="channel_8c_html_a99a7ed1b6a0711bbc0810d15505620f3"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a99a7ed1b6a0711bbc0810d15505620f3">call_forward_inherit</a></div><div class="ttdeci">static void call_forward_inherit(struct ast_channel *new_chan, struct ast_channel *parent, struct ast_channel *orig)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05959">channel.c:5959</a></div></div>
<div class="ttc" id="causes_8h_html_aff0e956cb3ef657557fa468a17416c0b"><div class="ttname"><a href="../../d4/da3/causes_8h.html#aff0e956cb3ef657557fa468a17416c0b">AST_CAUSE_USER_BUSY</a></div><div class="ttdeci">#define AST_CAUSE_USER_BUSY</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00106">causes.h:106</a></div></div>
<div class="ttc" id="channel_8c_html_a86593f04dfd477de657ae185d74a8e52"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a86593f04dfd477de657ae185d74a8e52">ast_party_dialed_free</a></div><div class="ttdeci">void ast_party_dialed_free(struct ast_party_dialed *doomed)</div><div class="ttdoc">Destroy the dialed party contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01971">channel.c:1971</a></div></div>
<div class="ttc" id="channel_8h_html_acc7e03f08c0df9fe5f5ff801db51224d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#acc7e03f08c0df9fe5f5ff801db51224d">ast_channel_state_set</a></div><div class="ttdeci">void ast_channel_state_set(struct ast_channel *chan, enum ast_channel_state)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00820">channel_internal_api.c:820</a></div></div>
<div class="ttc" id="structexternal__vars_html"><div class="ttname"><a href="../../de/dc7/structexternal__vars.html">external_vars</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07931">channel.c:7931</a></div></div>
<div class="ttc" id="channel_8c_html_aed7cba5dd8c6d31600f50d4b3f68d9ca"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aed7cba5dd8c6d31600f50d4b3f68d9ca">ast_waitfor</a></div><div class="ttdeci">int ast_waitfor(struct ast_channel *c, int ms)</div><div class="ttdoc">Wait for input on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03171">channel.c:3171</a></div></div>
<div class="ttc" id="channel_8h_html_afe93416b5623248a31ade16d0f65c91c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#afe93416b5623248a31ade16d0f65c91c">ast_channel_alert_writable</a></div><div class="ttdeci">int ast_channel_alert_writable(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01125">channel_internal_api.c:1125</a></div></div>
<div class="ttc" id="structast__stream_html"><div class="ttname"><a href="../../d4/d17/structast__stream.html">ast_stream</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00081">stream.c:81</a></div></div>
<div class="ttc" id="channel_8c_html_a5b39e7d66ab86608026ed4c88e864da3"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a5b39e7d66ab86608026ed4c88e864da3">null_tech</a></div><div class="ttdeci">static const struct ast_channel_tech null_tech</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00708">channel.c:708</a></div></div>
<div class="ttc" id="channel_8h_html_a218345ed34c8f51672b579aac2d1df5f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a218345ed34c8f51672b579aac2d1df5f">ast_channel_music_state</a></div><div class="ttdeci">void * ast_channel_music_state(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00557">channel_internal_api.c:557</a></div></div>
<div class="ttc" id="structast__party__number_html"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html">ast_party_number</a></div><div class="ttdoc">Information needed to specify a number in a call. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00290">channel.h:290</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792abdf50828de27e42f1e70b612bb1003c5"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792abdf50828de27e42f1e70b612bb1003c5">AST_REDIRECTING_PRIV_ORIG_NUMBER_VALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09309">channel.c:9309</a></div></div>
<div class="ttc" id="pbx_8h_html_a4d655002901faaf06a9a891f17dcff83"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a4d655002901faaf06a9a891f17dcff83">ast_pbx_hangup_handler_destroy</a></div><div class="ttdeci">void ast_pbx_hangup_handler_destroy(struct ast_channel *chan)</div><div class="ttdoc">Destroy the hangup handler container on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d53/pbx__hangup__handler_8c_source.html#l00103">pbx_hangup_handler.c:103</a></div></div>
<div class="ttc" id="hsearch_8c_html_ad0f0f85b3cab490a81baa02c4b9edf45"><div class="ttname"><a href="../../db/d37/hsearch_8c.html#ad0f0f85b3cab490a81baa02c4b9edf45">retval</a></div><div class="ttdeci">static ENTRY retval</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d37/hsearch_8c_source.html#l00050">hsearch.c:50</a></div></div>
<div class="ttc" id="format_8h_html_a499e920008f775eebadd958a42e85862"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a></div><div class="ttdeci">unsigned int ast_format_get_sample_rate(const struct ast_format *format)</div><div class="ttdoc">Get the sample rate of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00379">format.c:379</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a6440d070425a2efe8e0aa71e8d9e47b7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a></div><div class="ttdeci">#define ast_frfree(fr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">include/asterisk/frame.h:556</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a168d496bdac09ece3ce49cf473bbdb4ba9df578b4287c86673d7f40f9abcdc86f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4ba9df578b4287c86673d7f40f9abcdc86f">AST_T38_TERMINATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00374">include/asterisk/frame.h:374</a></div></div>
<div class="ttc" id="channel_8c_html_aa8ee61afe088f1d67c6e27164cd91a37"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aa8ee61afe088f1d67c6e27164cd91a37">ast_redirecting_build_data</a></div><div class="ttdeci">int ast_redirecting_build_data(unsigned char *data, size_t datalen, const struct ast_party_redirecting *redirecting, const struct ast_set_party_redirecting *update)</div><div class="ttdoc">Build the redirecting id data frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09363">channel.c:9363</a></div></div>
<div class="ttc" id="callerid_8h_html_a4b8463f8be514e1134291b2a9ddaeb35"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a4b8463f8be514e1134291b2a9ddaeb35">AST_PRES_ALLOWED</a></div><div class="ttdeci">#define AST_PRES_ALLOWED</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00324">callerid.h:324</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="channel_8h_html_acab5d4332748c259f614751318d1f92c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#acab5d4332748c259f614751318d1f92c">ast_channel_connected_set</a></div><div class="ttdeci">void ast_channel_connected_set(struct ast_channel *chan, struct ast_party_connected_line *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00949">channel_internal_api.c:949</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ad3d549ef92bf608f8f2f7afccaa536fb"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ad3d549ef92bf608f8f2f7afccaa536fb">AST_OPTION_FORMAT_READ</a></div><div class="ttdeci">#define AST_OPTION_FORMAT_READ</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00484">include/asterisk/frame.h:484</a></div></div>
<div class="ttc" id="channel_8c_html_a29557c4823f5e9c02519a01daf6a289c"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a></div><div class="ttdeci">void ast_hangup(struct ast_channel *chan)</div><div class="ttdoc">Hangup a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02548">channel.c:2548</a></div></div>
<div class="ttc" id="structast__set__party__redirecting_html_a08184154ded9cea4d8c2b6667c69596e"><div class="ttname"><a href="../../de/df8/structast__set__party__redirecting.html#a08184154ded9cea4d8c2b6667c69596e">ast_set_party_redirecting::priv_to</a></div><div class="ttdeci">struct ast_set_party_id priv_to</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00568">channel.h:568</a></div></div>
<div class="ttc" id="channel_8h_html_aef6f152b358661987022a1d97d9eff39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aef6f152b358661987022a1d97d9eff39">ast_channel_sched_set</a></div><div class="ttdeci">void ast_channel_sched_set(struct ast_channel *chan, struct ast_sched_context *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00733">channel_internal_api.c:733</a></div></div>
<div class="ttc" id="causes_8h_html_ae009c193522491f7de7ea28b23f20868"><div class="ttname"><a href="../../d4/da3/causes_8h.html#ae009c193522491f7de7ea28b23f20868">AST_CAUSE_BUSY</a></div><div class="ttdeci">#define AST_CAUSE_BUSY</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00148">causes.h:148</a></div></div>
<div class="ttc" id="channel_8c_html_ade9bc8493de7d579e2f06b55379fc673"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ade9bc8493de7d579e2f06b55379fc673">global_fout</a></div><div class="ttdeci">unsigned long global_fout</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00095">channel.c:95</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390aa95eb913e6cbbac8a34e69905245fdf4"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa95eb913e6cbbac8a34e69905245fdf4">AST_CONTROL_STREAM_STOP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00333">include/asterisk/frame.h:333</a></div></div>
<div class="ttc" id="structast__control__pvt__cause__code_html"><div class="ttname"><a href="../../d9/d2d/structast__control__pvt__cause__code.html">ast_control_pvt_cause_code</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00413">include/asterisk/frame.h:413</a></div></div>
<div class="ttc" id="audiohook_8h_html_a34d75d3d5e7418b6a772e3d522a16899a8254a5b3fc181d3fe3f2af892010b586"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a34d75d3d5e7418b6a772e3d522a16899a8254a5b3fc181d3fe3f2af892010b586">AST_AUDIOHOOK_DIRECTION_WRITE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00050">audiohook.h:50</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a465958f253dbce8a201319658ca99750"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a465958f253dbce8a201319658ca99750">AST_REDIRECTING_PRIV_TO_SUBADDRESS_VALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09293">channel.c:9293</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a6e7abe0b2f38c10fc8291690362e1864"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a6e7abe0b2f38c10fc8291690362e1864">AST_REDIRECTING_FROM_ID_PRESENTATION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09236">channel.c:9236</a></div></div>
<div class="ttc" id="cdr_8h_html_a28b931d52c71271afd601186db95fec2"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a28b931d52c71271afd601186db95fec2">ast_cdr_free</a></div><div class="ttdeci">void ast_cdr_free(struct ast_cdr *cdr)</div><div class="ttdoc">Free a CDR record. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03411">cdr.c:3411</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="channel_8h_html_ac1a262ebb6e17bf3f885a8c194db37c9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac1a262ebb6e17bf3f885a8c194db37c9">ast_channel_emulate_dtmf_duration_set</a></div><div class="ttdeci">void ast_channel_emulate_dtmf_duration_set(struct ast_channel *chan, unsigned int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00513">channel_internal_api.c:513</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_aee5e20694b04eee43463fde6cf121d06"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#aee5e20694b04eee43463fde6cf121d06">ast_app_exec_sub</a></div><div class="ttdeci">int ast_app_exec_sub(struct ast_channel *autoservice_chan, struct ast_channel *sub_chan, const char *sub_args, int ignore_hangup)</div><div class="ttdoc">Run a subroutine on a channel, placing an optional second channel into autoservice. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00370">main/app.c:370</a></div></div>
<div class="ttc" id="causes_8h_html"><div class="ttname"><a href="../../d4/da3/causes_8h.html">causes.h</a></div><div class="ttdoc">Internal Asterisk hangup causes. </div></div>
<div class="ttc" id="channel_8c_html_a46837c158733334d2bb155bbd827ddb8"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a46837c158733334d2bb155bbd827ddb8">ast_channel_set_caller_event</a></div><div class="ttdeci">void ast_channel_set_caller_event(struct ast_channel *chan, const struct ast_party_caller *caller, const struct ast_set_party_caller *update)</div><div class="ttdoc">Set the caller id information in the Asterisk channel and generate an AMI event if the caller id name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07472">channel.c:7472</a></div></div>
<div class="ttc" id="strings_8h_html_ac51fa66c90ce950b248c9ff3e8c4e453"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac51fa66c90ce950b248c9ff3e8c4e453">ast_begins_with</a></div><div class="ttdeci">static int force_inline attribute_pure ast_begins_with(const char *str, const char *prefix)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00094">strings.h:94</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792ac4a794763603856469df065a36f2474e"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792ac4a794763603856469df065a36f2474e">AST_REDIRECTING_REASON_STR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09321">channel.c:9321</a></div></div>
<div class="ttc" id="channel_8h_html_ab683c21c4a34450c4bfb8b672a7b4045"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab683c21c4a34450c4bfb8b672a7b4045">ast_channel_softhangup_internal_flag_add</a></div><div class="ttdeci">void ast_channel_softhangup_internal_flag_add(struct ast_channel *chan, int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01005">channel_internal_api.c:1005</a></div></div>
<div class="ttc" id="channel_8c_html_a3fb18bea319dde30a703d63f6c9c36a8"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3fb18bea319dde30a703d63f6c9c36a8">ast_party_number_set</a></div><div class="ttdeci">void ast_party_number_set(struct ast_party_number *dest, const struct ast_party_number *src)</div><div class="ttdoc">Set the source party number information into the destination party number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01674">channel.c:1674</a></div></div>
<div class="ttc" id="channel_8h_html_a9abe31fe40dcd03cd2957e5309e32ac6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a></div><div class="ttdeci">const char * ast_channel_language(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channel_8c_html_a7176c4ba1352462039ef63412f425b00"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a7176c4ba1352462039ef63412f425b00">ast_channel_redirecting_macro</a></div><div class="ttdeci">int ast_channel_redirecting_macro(struct ast_channel *autoservice_chan, struct ast_channel *macro_chan, const void *redirecting_info, int is_caller, int is_frame)</div><div class="ttdoc">Run a redirecting interception macro and update a channel&amp;#39;s redirecting information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10487">channel.c:10487</a></div></div>
<div class="ttc" id="channel_8c_html_aeaeec32b2464fa191b04c0ec212969f1"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aeaeec32b2464fa191b04c0ec212969f1">bridge_features_info</a></div><div class="ttdeci">static const struct ast_datastore_info bridge_features_info</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l11099">channel.c:11099</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00280">include/asterisk/frame.h:280</a></div></div>
<div class="ttc" id="structast__secure__call__store_html"><div class="ttname"><a href="../../dd/d2a/structast__secure__call__store.html">ast_secure_call_store</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/dc3/global__datastores_8h_source.html#l00031">global_datastores.h:31</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ac4227fb216ecb8388d24e9d4776ad400"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac4227fb216ecb8388d24e9d4776ad400">AST_CONTROL_STREAM_TOPOLOGY_CHANGED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00313">include/asterisk/frame.h:313</a></div></div>
<div class="ttc" id="channel_8c_html_ad08e17bd1de822faef09173930f295b1"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ad08e17bd1de822faef09173930f295b1">ast_channel_destructor</a></div><div class="ttdeci">static void ast_channel_destructor(void *obj)</div><div class="ttdoc">Free a channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02192">channel.c:2192</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="indications_8h_html_a544e8a1dd4a986b00754103dda6a7d3b"><div class="ttname"><a href="../../d2/d0f/indications_8h.html#a544e8a1dd4a986b00754103dda6a7d3b">ast_playtones_start</a></div><div class="ttdeci">int ast_playtones_start(struct ast_channel *chan, int vol, const char *tonelist, int interruptible)</div><div class="ttdoc">Start playing a list of tones on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d6e/indications_8c_source.html#l00302">indications.c:302</a></div></div>
<div class="ttc" id="channel_8h_html_ac53c766578be61738c20d8ccd4f097ed"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac53c766578be61738c20d8ccd4f097ed">ast_channel_snapshot_segment_flags</a></div><div class="ttdeci">struct ast_flags * ast_channel_snapshot_segment_flags(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01659">channel_internal_api.c:1659</a></div></div>
<div class="ttc" id="structast__channel__tech_html_a421cacf4fd4453284268a895c09d579a"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#a421cacf4fd4453284268a895c09d579a">ast_channel_tech::send_text_data</a></div><div class="ttdeci">int(*const send_text_data)(struct ast_channel *chan, struct ast_msg_data *data)</div><div class="ttdoc">Display or transmit text with data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00845">channel.h:845</a></div></div>
<div class="ttc" id="structast__cli__args_html"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html">ast_cli_args</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00158">cli.h:158</a></div></div>
<div class="ttc" id="channel_8c_html_a4af87c03f9816bb32758ff5b4b8d7d84"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a4af87c03f9816bb32758ff5b4b8d7d84">ast_kill_tech</a></div><div class="ttdeci">const struct ast_channel_tech ast_kill_tech</div><div class="ttdoc">Kill the channel channel driver technology descriptor. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00434">channel.c:434</a></div></div>
<div class="ttc" id="structast__frame_html_a8383e75e786449dd2f4258b0819dd8f1"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">ast_frame::stream_num</a></div><div class="ttdeci">int stream_num</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00197">include/asterisk/frame.h:197</a></div></div>
<div class="ttc" id="channel_8h_html_abe3ed00598198643ab729c80896cb525"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abe3ed00598198643ab729c80896cb525">ast_channel_unbridged</a></div><div class="ttdeci">int ast_channel_unbridged(struct ast_channel *chan)</div><div class="ttdoc">This function will check if the bridge needs to be re-evaluated due to external changes. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01019">channel_internal_api.c:1019</a></div></div>
<div class="ttc" id="channel_8h_html_ad5ad19825a9563cf7d6fefb9bf4f5ffb"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ad5ad19825a9563cf7d6fefb9bf4f5ffb">AST_JITTERBUFFER_FD</a></div><div class="ttdeci">#define AST_JITTERBUFFER_FD</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00205">channel.h:205</a></div></div>
<div class="ttc" id="structast__channel__tech_html_a12ccc5affd0561ceee96f9245e208bff"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#a12ccc5affd0561ceee96f9245e208bff">ast_channel_tech::queryoption</a></div><div class="ttdeci">int(*const queryoption)(struct ast_channel *chan, int option, void *data, int *datalen)</div><div class="ttdoc">Query a given option. Called with chan locked. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00781">channel.h:781</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a20737f3984b4c9fec91da715ce4e22d5"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a20737f3984b4c9fec91da715ce4e22d5">AST_REDIRECTING_PRIV_TO_NUMBER_VALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09284">channel.c:9284</a></div></div>
<div class="ttc" id="channel_8c_html_a9fadaf671cfcb56c14d2253510a6afb3"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a9fadaf671cfcb56c14d2253510a6afb3">__ast_read</a></div><div class="ttdeci">static struct ast_frame * __ast_read(struct ast_channel *chan, int dropaudio, int dropnondefault)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03529">channel.c:3529</a></div></div>
<div class="ttc" id="transcap_8h_html_a4d6401921d25c164619e2ebe8fd8a47a"><div class="ttname"><a href="../../d7/d86/transcap_8h.html#a4d6401921d25c164619e2ebe8fd8a47a">AST_TRANS_CAP_RESTRICTED_DIGITAL</a></div><div class="ttdeci">#define AST_TRANS_CAP_RESTRICTED_DIGITAL</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d86/transcap_8h_source.html#l00036">transcap.h:36</a></div></div>
<div class="ttc" id="channel_8c_html_a17e5eed14e9256176bb685dc7bac620a"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a17e5eed14e9256176bb685dc7bac620a">ast_channel_yank</a></div><div class="ttdeci">struct ast_channel * ast_channel_yank(struct ast_channel *yankee)</div><div class="ttdoc">Gain control of a channel in the system. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10794">channel.c:10794</a></div></div>
<div class="ttc" id="plc_8h_html_af99c26d697c92e41dd6a83ada318ee4a"><div class="ttname"><a href="../../d2/d66/plc_8h.html#af99c26d697c92e41dd6a83ada318ee4a">plc_rx</a></div><div class="ttdeci">int plc_rx(plc_state_t *s, int16_t amp[], int len)</div><div class="ttdoc">Process a block of received audio samples. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d1f/plc_8c_source.html#l00132">plc.c:132</a></div></div>
<div class="ttc" id="structast__channel_html_a1245ce5e07d09b4eccf64f29f6d83664"><div class="ttname"><a href="../../df/d3c/structast__channel.html#a1245ce5e07d09b4eccf64f29f6d83664">ast_channel::uniqueid</a></div><div class="ttdeci">struct ast_channel_id uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00115">channel_internal_api.c:115</a></div></div>
<div class="ttc" id="channel_8c_html_a4553faa9cf1e184164ebb526693585f0a2b89309e770c7ce1d88fec73d1fef526"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a4553faa9cf1e184164ebb526693585f0a2b89309e770c7ce1d88fec73d1fef526">DTMF_SENT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03363">channel.c:3363</a></div></div>
<div class="ttc" id="say_8h_html_a7ef8984468db709b3a9a9d13a260177a"><div class="ttname"><a href="../../db/dce/say_8h.html#a7ef8984468db709b3a9a9d13a260177a">ast_say_character_str_full</a></div><div class="ttdeci">SAY_EXTERN int(* ast_say_character_str_full)(struct ast_channel *chan, const char *num, const char *ints, const char *lang, enum ast_say_case_sensitivity sensitivity, int audiofd, int ctrlfd) SAY_INIT(ast_say_character_str_full)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dce/say_8h_source.html#l00175">say.h:175</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a025ede890af287961d3a98d0e634a62b"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a></div><div class="ttdeci">static struct test_val b</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00047">test_linkedlists.c:47</a></div></div>
<div class="ttc" id="stasis__channels_8h_html_a746be4da8b0536018438640d2db14b8c"><div class="ttname"><a href="../../d9/d4a/stasis__channels_8h.html#a746be4da8b0536018438640d2db14b8c">ast_stasis_channels_init</a></div><div class="ttdeci">int ast_stasis_channels_init(void)</div><div class="ttdoc">Initialize the stasis channel topic and message types. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01666">stasis_channels.c:1666</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="channel_8h_html_a582dee4d5ea9b2ff6f309f0c5239f6bd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a></div><div class="ttdeci">const char * ast_channel_context(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00344">channel_internal_api.c:344</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792aabf14af13b81b7fe33a14afcf6ca2bf2"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aabf14af13b81b7fe33a14afcf6ca2bf2">AST_REDIRECTING_PRIV_FROM_NAME_CHAR_SET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09301">channel.c:9301</a></div></div>
<div class="ttc" id="time_8h_html_aa13b651c18bc6004cab21ac041d44dd8"><div class="ttname"><a href="../../de/df7/time_8h.html#aa13b651c18bc6004cab21ac041d44dd8">ast_tvsub</a></div><div class="ttdeci">struct timeval ast_tvsub(struct timeval a, struct timeval b)</div><div class="ttdoc">Returns the difference of two timevals a - b. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02298">extconf.c:2298</a></div></div>
<div class="ttc" id="channel_8c_html_a6ea5858ffa106c4991e43bed491293d9"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a6ea5858ffa106c4991e43bed491293d9">ast_cause2str</a></div><div class="ttdeci">const char * ast_cause2str(int cause)</div><div class="ttdoc">Gives the string form of a given hangup cause. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00612">channel.c:612</a></div></div>
<div class="ttc" id="structast__tone__zone__sound_html_a8f64897c7ccc5c13f276d1d07c4e7095"><div class="ttname"><a href="../../d5/dab/structast__tone__zone__sound.html#a8f64897c7ccc5c13f276d1d07c4e7095">ast_tone_zone_sound::data</a></div><div class="ttdeci">const char * data</div><div class="ttdoc">Description of a tone. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0f/indications_8h_source.html#l00052">indications.h:52</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaec5f1aaded97197250e063ed6c7ad857"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaec5f1aaded97197250e063ed6c7ad857">ast_channel_publish_snapshot</a></div><div class="ttdeci">void ast_channel_publish_snapshot(struct ast_channel *chan)</div><div class="ttdoc">Publish a ast_channel_snapshot for a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01055">stasis_channels.c:1055</a></div></div>
<div class="ttc" id="channel_8c_html_a2126ac3bbc1a14f6ed5ccdfcbb851776"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a2126ac3bbc1a14f6ed5ccdfcbb851776">ast_party_id_init</a></div><div class="ttdeci">void ast_party_id_init(struct ast_party_id *init)</div><div class="ttdoc">Initialize the given party id structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01757">channel.c:1757</a></div></div>
<div class="ttc" id="datastore_8h_html_a666afb07fd77d50782cc10f83e029159"><div class="ttname"><a href="../../d9/db6/datastore_8h.html#a666afb07fd77d50782cc10f83e029159">ast_datastore_alloc</a></div><div class="ttdeci">#define ast_datastore_alloc(info, uid)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db6/datastore_8h_source.html#l00089">datastore.h:89</a></div></div>
<div class="ttc" id="channel_8h_html_ae37612e98aa9daaa86ab62ab4f91938f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae37612e98aa9daaa86ab62ab4f91938f">ast_channel_outsmpl</a></div><div class="ttdeci">unsigned long ast_channel_outsmpl(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00541">channel_internal_api.c:541</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212">ast_media_type</a></div><div class="ttdeci">ast_media_type</div><div class="ttdoc">Types of media. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00030">codec.h:30</a></div></div>
<div class="ttc" id="structast__frame_html_a5ad776be1fb768f3399aafcd1b58b3a2"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a5ad776be1fb768f3399aafcd1b58b3a2">ast_frame::uint32</a></div><div class="ttdeci">uint32_t uint32</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="channel_8c_html_ada1321e35ae7c038a2018396a99abbed"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ada1321e35ae7c038a2018396a99abbed">handle_cli_core_show_channeltypes</a></div><div class="ttdeci">static char * handle_cli_core_show_channeltypes(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdoc">Show channel types - CLI command. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00261">channel.c:261</a></div></div>
<div class="ttc" id="channel_8c_html_ab5f3776fda943e52820ceeee5835c1b4"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ab5f3776fda943e52820ceeee5835c1b4">ast_channel_register</a></div><div class="ttdeci">int ast_channel_register(const struct ast_channel_tech *tech)</div><div class="ttdoc">Register a new telephony channel in Asterisk. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00539">channel.c:539</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa5be52067bf16bdc7e56ca19b5ba858d"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_BEGIN(head, var, field)</div><div class="ttdoc">Loops safely over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00528">linkedlists.h:528</a></div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="channel_8c_html_a329c4b1e75a8de592dd2a8a493b1d101"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a329c4b1e75a8de592dd2a8a493b1d101">ast_transfer_protocol</a></div><div class="ttdeci">int ast_transfer_protocol(struct ast_channel *chan, char *dest, int *protocol)</div><div class="ttdoc">Transfer a call to dest, if the channel supports transfer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06595">channel.c:6595</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792af1daee1466e8256b8ca40f3aaa44aae9"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792af1daee1466e8256b8ca40f3aaa44aae9">AST_REDIRECTING_TO_SUBADDRESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09247">channel.c:9247</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be">AST_FRAME_DTMF_BEGIN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00125">include/asterisk/frame.h:125</a></div></div>
<div class="ttc" id="format__cap_8h_html_a09809d02373dbc26b136f52cc98f7513"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a09809d02373dbc26b136f52cc98f7513">ast_format_cap_empty</a></div><div class="ttdeci">int ast_format_cap_empty(const struct ast_format_cap *cap)</div><div class="ttdoc">Determine if a format cap has no formats in it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00746">format_cap.c:746</a></div></div>
<div class="ttc" id="devicestate_8h_html_a26cbac580d3e86b529f90058f6e91ac7a4dbd4bd0c7bf0b9d8c3c2c800d39cfc1"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a4dbd4bd0c7bf0b9d8c3c2c800d39cfc1">AST_DEVSTATE_NOT_CACHABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00069">devicestate.h:69</a></div></div>
<div class="ttc" id="channel_8c_html_a0af1a0f8665f21a658864a731eea78c0"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a0af1a0f8665f21a658864a731eea78c0">ast_softhangup_all</a></div><div class="ttdeci">void ast_softhangup_all(void)</div><div class="ttdoc">Soft hangup all active channels. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00493">channel.c:493</a></div></div>
<div class="ttc" id="callerid_8h_html_a2981008d349635cf996bb8629d15a926"><div class="ttname"><a href="../../de/d47/callerid_8h.html#a2981008d349635cf996bb8629d15a926">AST_PRES_UNAVAILABLE</a></div><div class="ttdeci">#define AST_PRES_UNAVAILABLE</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/callerid_8h_source.html#l00326">callerid.h:326</a></div></div>
<div class="ttc" id="db_8h_html_a32f2e37ee053cf2ce8ca28d1f74630e5"><div class="ttname"><a href="../../da/d4e/db_8h.html#a32f2e37ee053cf2ce8ca28d1f74630e5">int32_t</a></div><div class="ttdeci">int int32_t</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4e/db_8h_source.html#l00060">db.h:60</a></div></div>
<div class="ttc" id="structsuppress__data_html_ac7e977c3f00d50b1cd332813fa428b4d"><div class="ttname"><a href="../../d1/dac/structsuppress__data.html#ac7e977c3f00d50b1cd332813fa428b4d">suppress_data::direction</a></div><div class="ttdeci">unsigned int direction</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10922">channel.c:10922</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="format__cap_8h_html_a70a1555431677c29824be37afa5112e2"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a70a1555431677c29824be37afa5112e2">ast_format_cap_append_from_cap</a></div><div class="ttdeci">int ast_format_cap_append_from_cap(struct ast_format_cap *dst, const struct ast_format_cap *src, enum ast_media_type type)</div><div class="ttdoc">Append the formats of provided type in src to dst. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00269">format_cap.c:269</a></div></div>
<div class="ttc" id="channel_8h_html_a7dc0d696d897c864c6f41a3a1795c82e"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7dc0d696d897c864c6f41a3a1795c82e">ast_channel_trylock</a></div><div class="ttdeci">#define ast_channel_trylock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02947">channel.h:2947</a></div></div>
<div class="ttc" id="channel_8h_html_a784b9642d6e2862b04b7f970b337549f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a784b9642d6e2862b04b7f970b337549f">ama_flags</a></div><div class="ttdeci">ama_flags</div><div class="ttdoc">Channel AMA Flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01178">channel.h:1178</a></div></div>
<div class="ttc" id="channel_8c_html_a0b1e57b68b6e4970d55a1ffe49baaaf1"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a0b1e57b68b6e4970d55a1ffe49baaaf1">ast_channel_request_stream_topology_change</a></div><div class="ttdeci">int ast_channel_request_stream_topology_change(struct ast_channel *chan, struct ast_stream_topology *topology, void *change_source)</div><div class="ttdoc">Request that the stream topology of a channel change. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l11167">channel.c:11167</a></div></div>
<div class="ttc" id="structast__party__name_html_aaa04218f9e3a9065afa8be2491da8904"><div class="ttname"><a href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">ast_party_name::valid</a></div><div class="ttdeci">unsigned char valid</div><div class="ttdoc">TRUE if the name information is valid/present. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00280">channel.h:280</a></div></div>
<div class="ttc" id="channel_8c_html_ac293bae3a692080477911e637dbf3463"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ac293bae3a692080477911e637dbf3463">ast_say_digits_full</a></div><div class="ttdeci">int ast_say_digits_full(struct ast_channel *chan, int num, const char *ints, const char *lang, int audiofd, int ctrlfd)</div><div class="ttdoc">Same as ast_say_digits() with audiofd for received audio and returns 1 on ctrlfd being readable...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08379">channel.c:8379</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_add0f96b4b815205f528f5248ccb3d515"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#add0f96b4b815205f528f5248ccb3d515">ast_app_group_discard</a></div><div class="ttdeci">int ast_app_group_discard(struct ast_channel *chan)</div><div class="ttdoc">Discard all group counting for a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02162">main/app.c:2162</a></div></div>
<div class="ttc" id="channel_8c_html_ae57d3e85bdfbbc16a265919f7854bfe8"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ae57d3e85bdfbbc16a265919f7854bfe8">ast_safe_sleep_without_silence</a></div><div class="ttdeci">int ast_safe_sleep_without_silence(struct ast_channel *chan, int ms)</div><div class="ttdoc">Wait for a specified amount of time, looking for hangups, and do not generate silence. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01579">channel.c:1579</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaf03b8daa7784a26648db90614add6caa"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaf03b8daa7784a26648db90614add6caa">ast_channel_publish_blob</a></div><div class="ttdeci">void ast_channel_publish_blob(struct ast_channel *chan, struct stasis_message_type *type, struct ast_json *blob)</div><div class="ttdoc">Publish a channel blob message. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01135">stasis_channels.c:1135</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="transcap_8h_html_ac93f64d6735cd701ca6f439121ca49c6"><div class="ttname"><a href="../../d7/d86/transcap_8h.html#ac93f64d6735cd701ca6f439121ca49c6">AST_TRANS_CAP_SPEECH</a></div><div class="ttdeci">#define AST_TRANS_CAP_SPEECH</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d86/transcap_8h_source.html#l00034">transcap.h:34</a></div></div>
<div class="ttc" id="features_8h_html"><div class="ttname"><a href="../../de/d47/features_8h.html">features.h</a></div><div class="ttdoc">Call Parking and Pickup API Includes code and algorithms from the Zapata library. ...</div></div>
<div class="ttc" id="channel_8h_html_a91de92158876186d28ba1773877f2732"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a></div><div class="ttdeci">struct ast_flags * ast_channel_flags(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01260">channel_internal_api.c:1260</a></div></div>
<div class="ttc" id="structast__party__subaddress_html"><div class="ttname"><a href="../../d7/d41/structast__party__subaddress.html">ast_party_subaddress</a></div><div class="ttdoc">Information needed to specify a subaddress in a call. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00308">channel.h:308</a></div></div>
<div class="ttc" id="structset__format__access_html_a376b4a90ab7c0055d9529a665936ce94"><div class="ttname"><a href="../../d0/d0f/structset__format__access.html#a376b4a90ab7c0055d9529a665936ce94">set_format_access::get_trans</a></div><div class="ttdeci">struct ast_trans_pvt *(* get_trans)(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05649">channel.c:5649</a></div></div>
<div class="ttc" id="channel_8c_html_a9b25e6d6b996635d7fb5fc6e000e71c9"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a9b25e6d6b996635d7fb5fc6e000e71c9">silence_generator_alloc</a></div><div class="ttdeci">static void * silence_generator_alloc(struct ast_channel *chan, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08226">channel.c:8226</a></div></div>
<div class="ttc" id="channel_8c_html_a07cb08cdf297fa40c6eac0b2101f3764"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a07cb08cdf297fa40c6eac0b2101f3764">kill_write</a></div><div class="ttdeci">static int kill_write(struct ast_channel *chan, struct ast_frame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00407">channel.c:407</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792adadd765c09505110715245dd132a7eb9"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792adadd765c09505110715245dd132a7eb9">AST_REDIRECTING_ORIG_NUMBER_PRESENTATION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09271">channel.c:9271</a></div></div>
<div class="ttc" id="structast__control__read__action__payload_html_ad2d69e61752c24ad7723c9a89add4a7c"><div class="ttname"><a href="../../d6/d4b/structast__control__read__action__payload.html#ad2d69e61752c24ad7723c9a89add4a7c">ast_control_read_action_payload::payload</a></div><div class="ttdeci">unsigned char payload[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00367">include/asterisk/frame.h:367</a></div></div>
<div class="ttc" id="channel_8c_html_ac48cc3fb7a20c85c97950b685e756ef7"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ac48cc3fb7a20c85c97950b685e756ef7">ast_senddigit_mf</a></div><div class="ttdeci">int ast_senddigit_mf(struct ast_channel *chan, char digit, unsigned int duration, unsigned int durationkp, unsigned int durationst, int is_external)</div><div class="ttdoc">Send an MF digit to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04997">channel.c:4997</a></div></div>
<div class="ttc" id="channel_8h_html_a915f6bcc0c9f9a9c214fcb8a400c3063"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a915f6bcc0c9f9a9c214fcb8a400c3063">ast_channel_internal_fd_set</a></div><div class="ttdeci">void ast_channel_internal_fd_set(struct ast_channel *chan, int which, int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01161">channel_internal_api.c:1161</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792add63ae196eae92e71526f2d49fbd4721"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792add63ae196eae92e71526f2d49fbd4721">AST_REDIRECTING_PRIV_TO_SUBADDRESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09290">channel.c:9290</a></div></div>
<div class="ttc" id="channel_8h_html_a481a937b729c7b65d4c3508b1e8c86a8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a481a937b729c7b65d4c3508b1e8c86a8">ast_channel_hold_state_set</a></div><div class="ttdeci">void ast_channel_hold_state_set(struct ast_channel *chan, int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00489">channel_internal_api.c:489</a></div></div>
<div class="ttc" id="channel_8h_html_ad046e99c98cdb295c85c81b39884c879"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ad046e99c98cdb295c85c81b39884c879">ast_channel_internal_swap_snapshots</a></div><div class="ttdeci">void ast_channel_internal_swap_snapshots(struct ast_channel *a, struct ast_channel *b)</div><div class="ttdoc">Swap snapshots beteween two channels. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01456">channel_internal_api.c:1456</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">ast_frame_subclass::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">include/asterisk/frame.h:155</a></div></div>
<div class="ttc" id="channel_8c_html_a8043e35bcff5fb2d410dd161ac6e4360"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8043e35bcff5fb2d410dd161ac6e4360">ast_channel_move</a></div><div class="ttdeci">int ast_channel_move(struct ast_channel *dest, struct ast_channel *source)</div><div class="ttdoc">Move a channel from its current location to a new location. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10867">channel.c:10867</a></div></div>
<div class="ttc" id="channel_8c_html_a050bec9a4abc1a599b6573a6091b080c"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a050bec9a4abc1a599b6573a6091b080c">ast_waitfordigit</a></div><div class="ttdeci">int ast_waitfordigit(struct ast_channel *c, int ms)</div><div class="ttdoc">Waits for a digit. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03184">channel.c:3184</a></div></div>
<div class="ttc" id="channel_8h_html_a91ac88815c2b2561dd8fe646163c67d5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a91ac88815c2b2561dd8fe646163c67d5">ast_channel_fin_set</a></div><div class="ttdeci">void ast_channel_fin_set(struct ast_channel *chan, unsigned int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00521">channel_internal_api.c:521</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30">AST_FRAME_VIDEO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00103">include/asterisk/frame.h:103</a></div></div>
<div class="ttc" id="channel_8c_html_a913ff7afa12007ae9da62636da1bb9b4"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a913ff7afa12007ae9da62636da1bb9b4">free_external_channelvars</a></div><div class="ttdeci">static void free_external_channelvars(struct external_vars *channelvars)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07936">channel.c:7936</a></div></div>
<div class="ttc" id="devicestate_8h_html_acb74555f2a796e00cd26bd866c52e7b6"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#acb74555f2a796e00cd26bd866c52e7b6">ast_devstate_changed_literal</a></div><div class="ttdeci">int ast_devstate_changed_literal(enum ast_device_state state, enum ast_devstate_cache cachable, const char *device)</div><div class="ttdoc">Tells Asterisk the State for Device is changed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00471">devicestate.c:471</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a282adacfb7cb1cd3c0ce2eb63bbf282f"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a282adacfb7cb1cd3c0ce2eb63bbf282f">AST_REDIRECTING_PRIV_TO_NAME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09286">channel.c:9286</a></div></div>
<div class="ttc" id="channel_8c_html_aba4a2fe640be077614d89793846d9ef2"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aba4a2fe640be077614d89793846d9ef2">DEFAULT_EMULATE_MF_DURATION</a></div><div class="ttdeci">#define DEFAULT_EMULATE_MF_DURATION</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00106">channel.c:106</a></div></div>
<div class="ttc" id="channel_8c_html_a4efcbb7271ae141197a4ec6fa0c834c2"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a4efcbb7271ae141197a4ec6fa0c834c2">queue_dtmf_readq</a></div><div class="ttdeci">static void queue_dtmf_readq(struct ast_channel *chan, struct ast_frame *f)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03470">channel.c:3470</a></div></div>
<div class="ttc" id="timing_8h_html_a5b0e054f083f10b9f0b2ac7701dddbed"><div class="ttname"><a href="../../db/d41/timing_8h.html#a5b0e054f083f10b9f0b2ac7701dddbed">ast_timer_get_event</a></div><div class="ttdeci">enum ast_timer_event ast_timer_get_event(const struct ast_timer *handle)</div><div class="ttdoc">Retrieve timing event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d62/timing_8c_source.html#l00186">timing.c:186</a></div></div>
<div class="ttc" id="channel_8h_html_a4f07a6a4e7d95fcbb8f75a8d4fdf398d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a></div><div class="ttdeci">struct ast_audiohook_list * ast_channel_audiohooks(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00581">channel_internal_api.c:581</a></div></div>
<div class="ttc" id="channel_8c_html_ad92341a4a7c70ec0d99fc410dab9b07a"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ad92341a4a7c70ec0d99fc410dab9b07a">ast_str2cause</a></div><div class="ttdeci">int ast_str2cause(const char *name)</div><div class="ttdoc">Convert a symbolic hangup cause to number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00625">channel.c:625</a></div></div>
<div class="ttc" id="stream_8h_html_a88eca139ded2d5bbc6cdcf793febc265"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a88eca139ded2d5bbc6cdcf793febc265">ast_stream_topology_free</a></div><div class="ttdeci">void ast_stream_topology_free(struct ast_stream_topology *topology)</div><div class="ttdoc">Unreference and destroy a stream topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00743">stream.c:743</a></div></div>
<div class="ttc" id="cli_8h_html_a6f5f6c330757d980065d3f887c62237f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a6f5f6c330757d980065d3f887c62237f">ast_cli_completion_add</a></div><div class="ttdeci">int ast_cli_completion_add(char *value)</div><div class="ttdoc">Add a result to a request for completion options. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd3/main_2cli_8c_source.html#l02726">main/cli.c:2726</a></div></div>
<div class="ttc" id="channel_8h_html_adf593d68a333075c1fcae8a73b68c069"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#adf593d68a333075c1fcae8a73b68c069">ast_channel_macrocontext</a></div><div class="ttdeci">const char * ast_channel_macrocontext(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00362">channel_internal_api.c:362</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a791a8bb58907175482ac845835c0c678"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a791a8bb58907175482ac845835c0c678">AST_REDIRECTING_FROM_SUBADDRESS_VALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09246">channel.c:9246</a></div></div>
<div class="ttc" id="channel_8c_html_ab380c81e4514ab48ca8402f7950a354a"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ab380c81e4514ab48ca8402f7950a354a">ast_connected_line_build_data</a></div><div class="ttdeci">int ast_connected_line_build_data(unsigned char *data, size_t datalen, const struct ast_party_connected_line *connected, const struct ast_set_party_connected_line *update)</div><div class="ttdoc">Build the connected line information data frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08793">channel.c:8793</a></div></div>
<div class="ttc" id="timing_8h_html_a9e065bbee0a56922d61b4b74fce18b57"><div class="ttname"><a href="../../db/d41/timing_8h.html#a9e065bbee0a56922d61b4b74fce18b57">ast_timer_get_name</a></div><div class="ttdeci">const char * ast_timer_get_name(const struct ast_timer *handle)</div><div class="ttdoc">Get name of timer in use. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d62/timing_8c_source.html#l00196">timing.c:196</a></div></div>
<div class="ttc" id="structast__silence__generator_html_a771d124f2b2c7a869c7eeae94f965b53"><div class="ttname"><a href="../../d9/da1/structast__silence__generator.html#a771d124f2b2c7a869c7eeae94f965b53">ast_silence_generator::old_write_format</a></div><div class="ttdeci">struct ast_format * old_write_format</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08263">channel.c:8263</a></div></div>
<div class="ttc" id="stream_8h_html_a35dd19cc6a6f0310d45e181398095463"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a35dd19cc6a6f0310d45e181398095463">ast_stream_get_position</a></div><div class="ttdeci">int ast_stream_get_position(const struct ast_stream *stream)</div><div class="ttdoc">Get the position of the stream in the topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00500">stream.c:500</a></div></div>
<div class="ttc" id="res__config__ldap_8c_html_a75e4590043edf35241d30fabe2eda546"><div class="ttname"><a href="../../dc/d12/res__config__ldap_8c.html#a75e4590043edf35241d30fabe2eda546">url</a></div><div class="ttdeci">static char url[512]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d12/res__config__ldap_8c_source.html#l00074">res_config_ldap.c:74</a></div></div>
<div class="ttc" id="channel_8h_html_a2a098f55377d125e8346655f5a50612d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a2a098f55377d125e8346655f5a50612d">ast_channel_name_set</a></div><div class="ttdeci">void ast_channel_name_set(struct ast_channel *chan, const char *name)</div><div class="ttdoc">Set the channel name. </div></div>
<div class="ttc" id="channel_8c_html_a3f32294cdf04b80a2f7a49cd134be090"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3f32294cdf04b80a2f7a49cd134be090">ast_request_with_stream_topology</a></div><div class="ttdeci">struct ast_channel * ast_request_with_stream_topology(const char *type, struct ast_stream_topology *topology, const struct ast_assigned_ids *assignedids, const struct ast_channel *requestor, const char *addr, int *cause)</div><div class="ttdoc">Requests a channel (specifying stream topology) </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06449">channel.c:6449</a></div></div>
<div class="ttc" id="channel__internal_8h_html_a21c921632695fd815a3aebf27e44ea6a"><div class="ttname"><a href="../../d5/de4/channel__internal_8h.html#a21c921632695fd815a3aebf27e44ea6a">__ast_channel_internal_alloc</a></div><div class="ttdeci">struct ast_channel * __ast_channel_internal_alloc(void(*destructor)(void *obj), const struct ast_assigned_ids *assignedids, const struct ast_channel *requestor, const char *file, int line, const char *function)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01331">channel_internal_api.c:1331</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gab7e251e9a467cda68d93a47184fe0727"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gab7e251e9a467cda68d93a47184fe0727">ast_channel_hangup_request_type</a></div><div class="ttdeci">struct stasis_message_type * ast_channel_hangup_request_type(void)</div><div class="ttdoc">Message type for when a hangup is requested on a channel. </div></div>
<div class="ttc" id="say_8h_html"><div class="ttname"><a href="../../db/dce/say_8h.html">say.h</a></div><div class="ttdoc">Say numbers and dates (maybe words one day too) </div></div>
<div class="ttc" id="channel__internal_8h_html_acbc10a9cd9cb3e54ddb954c2572e6444"><div class="ttname"><a href="../../d5/de4/channel__internal_8h.html#acbc10a9cd9cb3e54ddb954c2572e6444">ast_channel_internal_setup_topics</a></div><div class="ttdeci">int ast_channel_internal_setup_topics(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01527">channel_internal_api.c:1527</a></div></div>
<div class="ttc" id="translate_8h_html_afc08e849ba68be7952acb64a3beef620"><div class="ttname"><a href="../../db/d39/translate_8h.html#afc08e849ba68be7952acb64a3beef620">ast_translate_path_steps</a></div><div class="ttdeci">unsigned int ast_translate_path_steps(struct ast_format *dest, struct ast_format *src)</div><div class="ttdoc">Returns the number of steps required to convert from &amp;#39;src&amp;#39; to &amp;#39;dest&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l01491">translate.c:1491</a></div></div>
<div class="ttc" id="channel_8c_html_a8608dc790ac2ad371c5e8e8550dfe110"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8608dc790ac2ad371c5e8e8550dfe110">ast_channel_set_ari_vars</a></div><div class="ttdeci">void ast_channel_set_ari_vars(size_t varc, char **vars)</div><div class="ttdoc">Sets the variables to be stored in the ari_vars field of all snapshots. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07994">channel.c:7994</a></div></div>
<div class="ttc" id="channel_8c_html_a1cb98e78f1231d96dad09ddaeaf0981d"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a1cb98e78f1231d96dad09ddaeaf0981d">ast_channel_set_redirecting</a></div><div class="ttdeci">void ast_channel_set_redirecting(struct ast_channel *chan, const struct ast_party_redirecting *redirecting, const struct ast_set_party_redirecting *update)</div><div class="ttdoc">Set the redirecting id information in the Asterisk channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09215">channel.c:9215</a></div></div>
<div class="ttc" id="causes_8h_html_a9900b24b261c275bb54631f16d4d38cc"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a9900b24b261c275bb54631f16d4d38cc">AST_CAUSE_CALL_REJECTED</a></div><div class="ttdeci">#define AST_CAUSE_CALL_REJECTED</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00110">causes.h:110</a></div></div>
<div class="ttc" id="func__frame__drop_8c_html_a99f26e6ee9fcd62f75203b5402df8098"><div class="ttname"><a href="../../d4/d8b/func__frame__drop_8c.html#a99f26e6ee9fcd62f75203b5402df8098">direction</a></div><div class="ttdeci">direction</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d8b/func__frame__drop_8c_source.html#l00137">func_frame_drop.c:137</a></div></div>
<div class="ttc" id="channel_8h_html_ae56cab679c0cda6436b930bc74297895"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae56cab679c0cda6436b930bc74297895">ast_channel_priority_set</a></div><div class="ttdeci">void ast_channel_priority_set(struct ast_channel *chan, int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00448">channel_internal_api.c:448</a></div></div>
<div class="ttc" id="bridge_8h_html"><div class="ttname"><a href="../../d4/d56/bridge_8h.html">bridge.h</a></div><div class="ttdoc">Bridging API. </div></div>
<div class="ttc" id="chan__iax2_8c_html_a9aed6490b63794e6c9c00af4533f255f"><div class="ttname"><a href="../../d5/dff/chan__iax2_8c.html#a9aed6490b63794e6c9c00af4533f255f">timer</a></div><div class="ttdeci">static struct ast_timer * timer</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dff/chan__iax2_8c_source.html#l00360">chan_iax2.c:360</a></div></div>
<div class="ttc" id="channel_8h_html_a2f18aafad0442206e71033ac6676dbb5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a2f18aafad0442206e71033ac6676dbb5">ast_channel_alloc</a></div><div class="ttdeci">#define ast_channel_alloc(needqueue, state, cid_num, cid_name, acctcode, exten, context, assignedids, requestor, amaflag,...)</div><div class="ttdoc">Create a channel structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01259">channel.h:1259</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a217ddb753acbccd09362ef45581906ce"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a217ddb753acbccd09362ef45581906ce">AST_REDIRECTING_ORIG_REASON_CODE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09281">channel.c:9281</a></div></div>
<div class="ttc" id="format__cache_8h_html_adbb2a7346ad99c0a41cd6c43548835ba"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#adbb2a7346ad99c0a41cd6c43548835ba">ast_format_t140</a></div><div class="ttdeci">struct ast_format * ast_format_t140</div><div class="ttdoc">Built-in cached t140 format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00236">format_cache.c:236</a></div></div>
<div class="ttc" id="channel_8h_html_ad3ec5f6d1ca18a54981a446176c9af1d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ad3ec5f6d1ca18a54981a446176c9af1d">ast_channel_connected_indicated</a></div><div class="ttdeci">struct ast_party_connected_line * ast_channel_connected_indicated(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00896">channel_internal_api.c:896</a></div></div>
<div class="ttc" id="format__cache_8h_html_a771d7c34570e8e492c25a0c2eb41889d"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a></div><div class="ttdeci">struct ast_format * ast_format_slin</div><div class="ttdoc">Built-in cached signed linear 8kHz format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00041">format_cache.c:41</a></div></div>
<div class="ttc" id="causes_8h_html_a208e4fc34932b91fc9e90d9008329e87"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a208e4fc34932b91fc9e90d9008329e87">AST_CAUSE_BEARERCAPABILITY_NOTAVAIL</a></div><div class="ttdeci">#define AST_CAUSE_BEARERCAPABILITY_NOTAVAIL</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00129">causes.h:129</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5ae9c1c04502304018b62d1e5383ccacb3"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5ae9c1c04502304018b62d1e5383ccacb3">AST_FLAG_ORIGINATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01040">channel.h:1040</a></div></div>
<div class="ttc" id="channel_8c_html_abbdfb98077180544657b2d16c5d25f74"><div class="ttname"><a href="../../d4/d28/channel_8c.html#abbdfb98077180544657b2d16c5d25f74">ast_set_write_format</a></div><div class="ttdeci">int ast_set_write_format(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdoc">Sets write format on channel chan. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05890">channel.c:5890</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a41dadfb835cc19fb7a62c63f2fe18d3e"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a41dadfb835cc19fb7a62c63f2fe18d3e">AST_REDIRECTING_PRIV_FROM_SUBADDRESS_TYPE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09304">channel.c:9304</a></div></div>
<div class="ttc" id="structtonepair__state_html_a78be16714343e05c92280423d7b8c049"><div class="ttname"><a href="../../d6/d63/structtonepair__state.html#a78be16714343e05c92280423d7b8c049">tonepair_state::fac1</a></div><div class="ttdeci">int fac1</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07570">channel.c:7570</a></div></div>
<div class="ttc" id="channel_8h_html_a1dc625bd14a7875b04bfe0c388858929"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a></div><div class="ttdeci">struct ast_format * ast_channel_writeformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00860">channel_internal_api.c:860</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212acdcfb16791fa00269621e51c42f5a4c3"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212acdcfb16791fa00269621e51c42f5a4c3">AST_MEDIA_TYPE_TEXT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00035">codec.h:35</a></div></div>
<div class="ttc" id="channel_8h_html_abdebed775647544929616b09a8487817"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a></div><div class="ttdeci">struct ast_channel_monitor * ast_channel_monitor(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00613">channel_internal_api.c:613</a></div></div>
<div class="ttc" id="channel__internal_8h_html_ae3be812c17deaa771d50ef45d8788c3b"><div class="ttname"><a href="../../d5/de4/channel__internal_8h.html#ae3be812c17deaa771d50ef45d8788c3b">ast_channel_internal_finalize</a></div><div class="ttdeci">void ast_channel_internal_finalize(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01492">channel_internal_api.c:1492</a></div></div>
<div class="ttc" id="channel_8c_html_a7d555920d6a7169e88251888010bf4de"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a7d555920d6a7169e88251888010bf4de">ast_undestroyed_channels</a></div><div class="ttdeci">int ast_undestroyed_channels(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00504">channel.c:504</a></div></div>
<div class="ttc" id="say_8h_html_a25da3fe3eff6311e1b56eba1283c3c71"><div class="ttname"><a href="../../db/dce/say_8h.html#a25da3fe3eff6311e1b56eba1283c3c71">ast_say_phonetic_str_full</a></div><div class="ttdeci">SAY_EXTERN int(* ast_say_phonetic_str_full)(struct ast_channel *chan, const char *num, const char *ints, const char *lang, int audiofd, int ctrlfd) SAY_INIT(ast_say_phonetic_str_full)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dce/say_8h_source.html#l00180">say.h:180</a></div></div>
<div class="ttc" id="channel_8h_html_ab23fb6dcd2315d22d59b5101b8ca5417"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab23fb6dcd2315d22d59b5101b8ca5417">ast_channel_timingfunc</a></div><div class="ttdeci">ast_timing_func_t ast_channel_timingfunc(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01231">channel_internal_api.c:1231</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga793b849e5b7c9257e92fe30621de5b74"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga793b849e5b7c9257e92fe30621de5b74">ast_channel_masquerade_type</a></div><div class="ttdeci">struct stasis_message_type * ast_channel_masquerade_type(void)</div><div class="ttdoc">Message type for when a channel is being masqueraded. </div></div>
<div class="ttc" id="channel_8h_html_a33ca8f4f979f8a920a1832d509f24a1a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a33ca8f4f979f8a920a1832d509f24a1a">ast_channel_dtmff</a></div><div class="ttdeci">struct ast_frame * ast_channel_dtmff(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00880">channel_internal_api.c:880</a></div></div>
<div class="ttc" id="channel_8c_html_a8a0919eb0f17e51d9bbf9de280950a65"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8a0919eb0f17e51d9bbf9de280950a65">namedgroup_match</a></div><div class="ttdeci">static int namedgroup_match(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08182">channel.c:8182</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5a75202bcfa58fce5d40e2daddc73b8d11"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a75202bcfa58fce5d40e2daddc73b8d11">AST_FLAG_EXCEPTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00990">channel.h:990</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a98f5e70e98f6dc48e3c5ba316066d540"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a></div><div class="ttdeci">static snd_pcm_format_t format</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00102">chan_alsa.c:102</a></div></div>
<div class="ttc" id="channel_8c_html_a015abb5b26bfba6ca64f10fd9e0468ba"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a015abb5b26bfba6ca64f10fd9e0468ba">ast_channel_release</a></div><div class="ttdeci">struct ast_channel * ast_channel_release(struct ast_channel *chan)</div><div class="ttdoc">Unlink and release reference to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01584">channel.c:1584</a></div></div>
<div class="ttc" id="pbx_8h_html_ae70e64cdf669396c88ea8eda900b0b3b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#ae70e64cdf669396c88ea8eda900b0b3b">ast_func_write</a></div><div class="ttdeci">int ast_func_write(struct ast_channel *chan, const char *function, const char *value)</div><div class="ttdoc">executes a write operation on a function </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d70/pbx__functions_8c_source.html#l00692">pbx_functions.c:692</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a5170789fcd157d0315387dbef005e043"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a5170789fcd157d0315387dbef005e043">AST_REDIRECTING_PRIV_FROM_NUMBER_VALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09297">channel.c:9297</a></div></div>
<div class="ttc" id="channel_8h_html_a9adf7d6f53f03e6497ab36b6e3130910"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9adf7d6f53f03e6497ab36b6e3130910">ast_channel_set_is_t38_active_nolock</a></div><div class="ttdeci">void ast_channel_set_is_t38_active_nolock(struct ast_channel *chan, int is_t38_active)</div><div class="ttdoc">Variant of ast_channel_set_is_t38_active. Use this if the channel is already locked prior to calling...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01056">channel_internal_api.c:1056</a></div></div>
<div class="ttc" id="causes_8h_html_a5a243f60ca2571ed2d6e3f540b4a1453"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a5a243f60ca2571ed2d6e3f540b4a1453">AST_CAUSE_MESSAGE_TYPE_NONEXIST</a></div><div class="ttdeci">#define AST_CAUSE_MESSAGE_TYPE_NONEXIST</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00137">causes.h:137</a></div></div>
<div class="ttc" id="channel_8c_html_a9eb0c4d08672bea641ad9d28b0ac36b7"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a9eb0c4d08672bea641ad9d28b0ac36b7">prnt_channel_key</a></div><div class="ttdeci">static void prnt_channel_key(void *v_obj, void *where, ao2_prnt_fn *prnt)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07912">channel.c:7912</a></div></div>
<div class="ttc" id="channel_8c_html_aa43d4fbec4e8ff45c5fd3aa87c885928"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aa43d4fbec4e8ff45c5fd3aa87c885928">suppress_datastore_destroy_cb</a></div><div class="ttdeci">static void suppress_datastore_destroy_cb(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10905">channel.c:10905</a></div></div>
<div class="ttc" id="channel_8h_html_a938863dd527bbcac399636661623baf9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a938863dd527bbcac399636661623baf9">ast_channel_amaflags</a></div><div class="ttdeci">enum ama_flags ast_channel_amaflags(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00406">channel_internal_api.c:406</a></div></div>
<div class="ttc" id="channel_8h_html_a784b9642d6e2862b04b7f970b337549faa8cfb82b7d2c279f848fc8197b9c3d82"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a784b9642d6e2862b04b7f970b337549faa8cfb82b7d2c279f848fc8197b9c3d82">AST_AMA_BILLING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01181">channel.h:1181</a></div></div>
<div class="ttc" id="channel_8c_html_a3212119ca5acac4c9ec6051987380876a765889201caaff09b8cf5ee36f45f7d0"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876a765889201caaff09b8cf5ee36f45f7d0">AST_CONNECTED_LINE_SUBADDRESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08763">channel.c:8763</a></div></div>
<div class="ttc" id="structast__party__name_html"><div class="ttname"><a href="../../d8/d6f/structast__party__name.html">ast_party_name</a></div><div class="ttdoc">Information needed to specify a name in a call. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00263">channel.h:263</a></div></div>
<div class="ttc" id="structast__channel__tech_html_aace25b48cb97266e6482721f5772af24"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#aace25b48cb97266e6482721f5772af24">ast_channel_tech::indicate</a></div><div class="ttdeci">int(*const indicate)(struct ast_channel *c, int condition, const void *data, size_t datalen)</div><div class="ttdoc">Indicate a particular condition (e.g. AST_CONTROL_BUSY or AST_CONTROL_RINGING or AST_CONTROL_CONGESTI...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00772">channel.h:772</a></div></div>
<div class="ttc" id="channel_8h_html_a929b8b2cb36308e5cf4e51ed880bfcba"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a929b8b2cb36308e5cf4e51ed880bfcba">ast_channel_tech_pvt_set</a></div><div class="ttdeci">void ast_channel_tech_pvt_set(struct ast_channel *chan, void *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00569">channel_internal_api.c:569</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390aacb7ddf1a95fa544fdecada68213f3c7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aacb7ddf1a95fa544fdecada68213f3c7">AST_CONTROL_RADIO_KEY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00289">include/asterisk/frame.h:289</a></div></div>
<div class="ttc" id="structast__channel__tech_html_a27558a663de94fa3b37bf537bed61c3c"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#a27558a663de94fa3b37bf537bed61c3c">ast_channel_tech::early_bridge</a></div><div class="ttdeci">enum ast_bridge_result(*const early_bridge)(struct ast_channel *c0, struct ast_channel *c1)</div><div class="ttdoc">Bridge two channels of the same type together (early) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00769">channel.h:769</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html">app.h</a></div><div class="ttdoc">Application convenience functions, designed to give consistent look and feel to Asterisk apps...</div></div>
<div class="ttc" id="channel_8c_html_accf4e9753bd5d7316f4988e74486552b"><div class="ttname"><a href="../../d4/d28/channel_8c.html#accf4e9753bd5d7316f4988e74486552b">ast_connected_line_copy_from_caller</a></div><div class="ttdeci">void ast_connected_line_copy_from_caller(struct ast_party_connected_line *dest, const struct ast_party_caller *src)</div><div class="ttdoc">Copy the caller information to the connected line information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08389">channel.c:8389</a></div></div>
<div class="ttc" id="structast__party__connected__line_html_a7f68ab7a4fa155c8db1cda1565864c58"><div class="ttname"><a href="../../dc/d9e/structast__party__connected__line.html#a7f68ab7a4fa155c8db1cda1565864c58">ast_party_connected_line::priv</a></div><div class="ttdeci">struct ast_party_id priv</div><div class="ttdoc">Private connected party ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00469">channel.h:469</a></div></div>
<div class="ttc" id="channel_8c_html_a88cc3634f7d59b6a65586c32c65e6eac"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a88cc3634f7d59b6a65586c32c65e6eac">ast_say_money_str</a></div><div class="ttdeci">int ast_say_money_str(struct ast_channel *chan, const char *str, const char *ints, const char *lang)</div><div class="ttdoc">function to pronounce monetary amounts </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08361">channel.c:8361</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a10624bc470a4ac2634221dfa74bdb17fa447a1a659574cde67aa71538c804206f"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a10624bc470a4ac2634221dfa74bdb17fa447a1a659574cde67aa71538c804206f">AST_GETDATA_FAILED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01155">include/asterisk/app.h:1155</a></div></div>
<div class="ttc" id="channel_8h_html_ad27c52cda6e6435a121900661ad5bdce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ad27c52cda6e6435a121900661ad5bdce">ast_channel_rawwriteformat</a></div><div class="ttdeci">struct ast_format * ast_channel_rawwriteformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00852">channel_internal_api.c:852</a></div></div>
<div class="ttc" id="channel_8c_html_a83c5bf4ddb3ed43a3c03e2f8e2962333"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a83c5bf4ddb3ed43a3c03e2f8e2962333">kill_read</a></div><div class="ttdeci">static struct ast_frame * kill_read(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00395">channel.c:395</a></div></div>
<div class="ttc" id="structast__party__number_html_aaa04218f9e3a9065afa8be2491da8904"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">ast_party_number::valid</a></div><div class="ttdeci">unsigned char valid</div><div class="ttdoc">TRUE if the number information is valid/present. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00298">channel.h:298</a></div></div>
<div class="ttc" id="channel_8h_html_a2f3ba4ef24824995a3b11fd54aada35e"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a2f3ba4ef24824995a3b11fd54aada35e">ast_channel_sending_dtmf_digit_set</a></div><div class="ttdeci">void ast_channel_sending_dtmf_digit_set(struct ast_channel *chan, char value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00392">channel_internal_api.c:392</a></div></div>
<div class="ttc" id="structast__frame_html_aaccba9d5adc3f6c39aad767db95ba484"><div class="ttname"><a href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">ast_frame::len</a></div><div class="ttdeci">long len</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00193">include/asterisk/frame.h:193</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47">OBJ_MULTIPLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01053">astobj2.h:1053</a></div></div>
<div class="ttc" id="channel_8h_html_af5dee96d4dcc88a95fce391c22d4d21f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a></div><div class="ttdeci">const struct ast_channel_tech * ast_channel_tech(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00769">channel_internal_api.c:769</a></div></div>
<div class="ttc" id="channel_8h_html_a6c2c406bdebd477029e61774cc300abd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6c2c406bdebd477029e61774cc300abd">ast_channel_callid</a></div><div class="ttdeci">ast_callid ast_channel_callid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00793">channel_internal_api.c:793</a></div></div>
<div class="ttc" id="channel_8c_html_a34c65699645170a1168e9177ad8aebd4"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a34c65699645170a1168e9177ad8aebd4">ast_read_generator_actions</a></div><div class="ttdeci">static void ast_read_generator_actions(struct ast_channel *chan, struct ast_frame *f)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03416">channel.c:3416</a></div></div>
<div class="ttc" id="channel_8h_html_a58ac5000cfdf1493ae0e8ca02a04faf7"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a58ac5000cfdf1493ae0e8ca02a04faf7">ast_channel_vstreamid_set</a></div><div class="ttdeci">void ast_channel_vstreamid_set(struct ast_channel *chan, int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00497">channel_internal_api.c:497</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
<div class="ttc" id="channel_8h_html_a954acd75e9468e701f656d60c8f374b0"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a954acd75e9468e701f656d60c8f374b0">ast_channel_masqr</a></div><div class="ttdeci">struct ast_channel * ast_channel_masqr(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00605">channel_internal_api.c:605</a></div></div>
<div class="ttc" id="structast__channel_html_abe7876f86e249ea3db5fbacd2231389c"><div class="ttname"><a href="../../df/d3c/structast__channel.html#abe7876f86e249ea3db5fbacd2231389c">ast_channel::generatordata</a></div><div class="ttdeci">void * generatordata</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00077">channel_internal_api.c:77</a></div></div>
<div class="ttc" id="channel_8c_html_a91e78b15da3244307ffd749fa85f4db7"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a91e78b15da3244307ffd749fa85f4db7">ast_queue_hangup_with_cause</a></div><div class="ttdeci">int ast_queue_hangup_with_cause(struct ast_channel *chan, int cause)</div><div class="ttdoc">Queue a hangup frame for channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01166">channel.c:1166</a></div></div>
<div class="ttc" id="sched_8h_html_a862f869d056628b38e09042f21b54413"><div class="ttname"><a href="../../d7/d00/sched_8h.html#a862f869d056628b38e09042f21b54413">ast_sched_context_destroy</a></div><div class="ttdeci">void ast_sched_context_destroy(struct ast_sched_context *c)</div><div class="ttdoc">destroys a schedule context </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dbe/sched_8c_source.html#l00269">sched.c:269</a></div></div>
<div class="ttc" id="channel_8h_html_abdaf681794561f17c4598cb2f16f06b0"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abdaf681794561f17c4598cb2f16f06b0">ast_channel_parkinglot</a></div><div class="ttdeci">const char * ast_channel_parkinglot(const struct ast_channel *chan)</div></div>
<div class="ttc" id="structast__party__name__ies_html_aba03208f197d75b6e355ba9b2ae08ab5"><div class="ttname"><a href="../../df/d8e/structast__party__name__ies.html#aba03208f197d75b6e355ba9b2ae08ab5">ast_party_name_ies::str</a></div><div class="ttdeci">int str</div><div class="ttdoc">Subscriber name ie. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08421">channel.c:8421</a></div></div>
<div class="ttc" id="channel_8c_html_a7ee3ff7bf7773329e9e20143f0ba2f69"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a7ee3ff7bf7773329e9e20143f0ba2f69">ast_channel_update_connected_line</a></div><div class="ttdeci">void ast_channel_update_connected_line(struct ast_channel *chan, const struct ast_party_connected_line *connected, const struct ast_set_party_connected_line *update)</div><div class="ttdoc">Indicate that the connected line information has changed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09189">channel.c:9189</a></div></div>
<div class="ttc" id="framehook_8h_html_af5ad720b09a5d67104fabb76ffd46769"><div class="ttname"><a href="../../db/d3c/framehook_8h.html#af5ad720b09a5d67104fabb76ffd46769">ast_framehook_list_read_event</a></div><div class="ttdeci">struct ast_frame * ast_framehook_list_read_event(struct ast_framehook_list *framehooks, struct ast_frame *frame)</div><div class="ttdoc">This is used by the channel API push a frame read event to a channel&amp;#39;s framehook list. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dac/framehook_8c_source.html#l00318">framehook.c:318</a></div></div>
<div class="ttc" id="channel_8c_html_a6e65df0ab5f6ce5e0c7292e91ec86254"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a6e65df0ab5f6ce5e0c7292e91ec86254">deactivate_generator_nolock</a></div><div class="ttdeci">static void deactivate_generator_nolock(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02886">channel.c:2886</a></div></div>
<div class="ttc" id="causes_8h_html_a9ede7aed1c7ce865ad98617c60c8da22"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a9ede7aed1c7ce865ad98617c60c8da22">AST_CAUSE_INVALID_CALL_REFERENCE</a></div><div class="ttdeci">#define AST_CAUSE_INVALID_CALL_REFERENCE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00133">causes.h:133</a></div></div>
<div class="ttc" id="causes_8h_html_a0a35518d7b448a53da368cf57f354fba"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a0a35518d7b448a53da368cf57f354fba">AST_CAUSE_CONGESTION</a></div><div class="ttdeci">#define AST_CAUSE_CONGESTION</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00152">causes.h:152</a></div></div>
<div class="ttc" id="channel_8h_html_ac967e3cfb7640aa743eb1c4811d46be0"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac967e3cfb7640aa743eb1c4811d46be0">ast_channel_macroexten</a></div><div class="ttdeci">const char * ast_channel_macroexten(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00370">channel_internal_api.c:370</a></div></div>
<div class="ttc" id="transcap_8h_html_a70df930118839f3fc035fc9f15dfa621"><div class="ttname"><a href="../../d7/d86/transcap_8h.html#a70df930118839f3fc035fc9f15dfa621">AST_TRANS_CAP_DIGITAL</a></div><div class="ttdeci">#define AST_TRANS_CAP_DIGITAL</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d86/transcap_8h_source.html#l00035">transcap.h:35</a></div></div>
<div class="ttc" id="channel_8h_html_a9d32bd3ed0bec428aeae54ad80dfd45e"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9d32bd3ed0bec428aeae54ad80dfd45e">ast_channel_outsmpl_set</a></div><div class="ttdeci">void ast_channel_outsmpl_set(struct ast_channel *chan, unsigned long value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00545">channel_internal_api.c:545</a></div></div>
<div class="ttc" id="channel_8c_html_ad74ec6057ffa0240c8dde77284958fbe"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ad74ec6057ffa0240c8dde77284958fbe">cli_channel</a></div><div class="ttdeci">static struct ast_cli_entry cli_channel[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00390">channel.c:390</a></div></div>
<div class="ttc" id="channel_8h_html_a292f100fd06d3d05129b9c879f6c6e91"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a292f100fd06d3d05129b9c879f6c6e91">ast_channel_softhangup_internal_flag_clear</a></div><div class="ttdeci">void ast_channel_softhangup_internal_flag_clear(struct ast_channel *chan, int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01009">channel_internal_api.c:1009</a></div></div>
<div class="ttc" id="channel_8c_html_a6b869988b7ee213be11a0e45ee3ba09f"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a6b869988b7ee213be11a0e45ee3ba09f">ast_setstate</a></div><div class="ttdeci">int ast_setstate(struct ast_channel *chan, enum ast_channel_state state)</div><div class="ttdoc">Change the state of a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07486">channel.c:7486</a></div></div>
<div class="ttc" id="timing_8h_html"><div class="ttname"><a href="../../db/d41/timing_8h.html">timing.h</a></div><div class="ttdoc">Timing source management. </div></div>
<div class="ttc" id="lock_8h_html_ac840092853644cea0a186efdc58985f5"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac840092853644cea0a186efdc58985f5">AST_MUTEX_DEFINE_STATIC</a></div><div class="ttdeci">#define AST_MUTEX_DEFINE_STATIC(mutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00518">lock.h:518</a></div></div>
<div class="ttc" id="causes_8h_html_a6f3f8a6a53b0b7d5646433b4fde44cc9"><div class="ttname"><a href="../../d4/da3/causes_8h.html#a6f3f8a6a53b0b7d5646433b4fde44cc9">AST_CAUSE_WRONG_CALL_STATE</a></div><div class="ttdeci">#define AST_CAUSE_WRONG_CALL_STATE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00141">causes.h:141</a></div></div>
<div class="ttc" id="file_8h_html_a3092bf11d4bba66f646562759608b1bc"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a></div><div class="ttdeci">int ast_stopstream(struct ast_channel *c)</div><div class="ttdoc">Stops a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00187">file.c:187</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792aa69ffee94d2e9d2e61ffc6001b6d21cb"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aa69ffee94d2e9d2e61ffc6001b6d21cb">AST_REDIRECTING_ORIG_NAME_PRESENTATION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09275">channel.c:9275</a></div></div>
<div class="ttc" id="channel_8c_html_a7e0d09c05bb1927d56134b33ed784dfd"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a7e0d09c05bb1927d56134b33ed784dfd">ast_party_connected_line_collect_caller</a></div><div class="ttdeci">void ast_party_connected_line_collect_caller(struct ast_party_connected_line *connected, struct ast_party_caller *caller)</div><div class="ttdoc">Collect the caller party information into a connected line structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02063">channel.c:2063</a></div></div>
<div class="ttc" id="format__cap_8h_html_a9b2d6490b222d436f5f6a8296d36c13f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a9b2d6490b222d436f5f6a8296d36c13f">ast_format_cap_has_type</a></div><div class="ttdeci">int ast_format_cap_has_type(const struct ast_format_cap *cap, enum ast_media_type type)</div><div class="ttdoc">Find out if the capabilities structure has any formats of a specific type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00615">format_cap.c:615</a></div></div>
<div class="ttc" id="channel_8c_html_af539c9dd9e24b90fd050dcf8931199c3"><div class="ttname"><a href="../../d4/d28/channel_8c.html#af539c9dd9e24b90fd050dcf8931199c3">dtmf_direction_to_string</a></div><div class="ttdeci">static const char * dtmf_direction_to_string(enum DtmfDirection direction)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03366">channel.c:3366</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a850bb06a1702741c93a3fd67cc9637ab"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a850bb06a1702741c93a3fd67cc9637ab">AST_CONTROL_CONGESTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00285">include/asterisk/frame.h:285</a></div></div>
<div class="ttc" id="channel_8c_html_a7e5e15c22564fd66351d332ad10658b5"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a7e5e15c22564fd66351d332ad10658b5">ast_queue_control_data</a></div><div class="ttdeci">int ast_queue_control_data(struct ast_channel *chan, enum ast_control_frame_type control, const void *data, size_t datalen)</div><div class="ttdoc">Queue a control frame with payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01238">channel.c:1238</a></div></div>
<div class="ttc" id="channel_8c_html_a76c8f293c2dacf853b96314157f3421b"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a76c8f293c2dacf853b96314157f3421b">ast_install_music_functions</a></div><div class="ttdeci">void ast_install_music_functions(int(*start_ptr)(struct ast_channel *, const char *, const char *), void(*stop_ptr)(struct ast_channel *), void(*cleanup_ptr)(struct ast_channel *))</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07850">channel.c:7850</a></div></div>
<div class="ttc" id="main_2app_8c_html_a4c64cde04fcdfadca23c715d24981888"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a4c64cde04fcdfadca23c715d24981888">groups</a></div><div class="ttdeci">static struct groups groups</div></div>
<div class="ttc" id="strings_8h_html_ab08f8db2a7258e538a0da7417f58db58"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ab08f8db2a7258e538a0da7417f58db58">ast_str_case_hash</a></div><div class="ttdeci">static force_inline int attribute_pure ast_str_case_hash(const char *str)</div><div class="ttdoc">Compute a hash value on a case-insensitive string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01250">strings.h:1250</a></div></div>
<div class="ttc" id="channel_8c_html_aafebfefd067ebab73fd66e7c008a8353"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aafebfefd067ebab73fd66e7c008a8353">ast_channel_connected_line_sub</a></div><div class="ttdeci">int ast_channel_connected_line_sub(struct ast_channel *autoservice_chan, struct ast_channel *sub_chan, const void *connected_info, int is_frame)</div><div class="ttdoc">Run a connected line interception subroutine and update a channel&amp;#39;s connected line information...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10539">channel.c:10539</a></div></div>
<div class="ttc" id="format__cache_8h_html_ab660f51155ceeabb4abd0e25cd3a11a6"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#ab660f51155ceeabb4abd0e25cd3a11a6">ast_format_cache_get_slin_by_rate</a></div><div class="ttdeci">struct ast_format * ast_format_cache_get_slin_by_rate(unsigned int rate)</div><div class="ttdoc">Retrieve the best signed linear format given a sample rate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00520">format_cache.c:520</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a93a29f1537444303ac1707e50b1a841d"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a93a29f1537444303ac1707e50b1a841d">AST_RWLIST_HEAD</a></div><div class="ttdeci">#define AST_RWLIST_HEAD(name, type)</div><div class="ttdoc">Defines a structure to be used to hold a read/write list of specified type. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00198">linkedlists.h:198</a></div></div>
<div class="ttc" id="channel_8c_html_aca37ca2f3d55a223d26617329ed48a3e"><div class="ttname"><a href="../../d4/d28/channel_8c.html#aca37ca2f3d55a223d26617329ed48a3e">ast_channel_set_fd</a></div><div class="ttdeci">void ast_channel_set_fd(struct ast_channel *chan, int which, int fd)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02431">channel.c:2431</a></div></div>
<div class="ttc" id="translate_8h_html_a8f767bf5c2095f182e7cbaa73e391207"><div class="ttname"><a href="../../db/d39/translate_8h.html#a8f767bf5c2095f182e7cbaa73e391207">ast_translator_free_path</a></div><div class="ttdeci">void ast_translator_free_path(struct ast_trans_pvt *tr)</div><div class="ttdoc">Frees a translator path Frees the given translator path structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00475">translate.c:475</a></div></div>
<div class="ttc" id="channel_8h_html_aaca68f142e039bcb3c69cc7524b958a8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aaca68f142e039bcb3c69cc7524b958a8">ast_channel_alert_write</a></div><div class="ttdeci">int ast_channel_alert_write(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01110">channel_internal_api.c:1110</a></div></div>
<div class="ttc" id="channel_8h_html_a9b745a6d0e3d7af90d2708dca5b5e069"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9b745a6d0e3d7af90d2708dca5b5e069">ast_channel_musicclass</a></div><div class="ttdeci">const char * ast_channel_musicclass(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a9d7b264ddca4b05135add5d9d48e6271"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a9d7b264ddca4b05135add5d9d48e6271">AST_STATE_OFFHOOK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00038">channelstate.h:38</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
<div class="ttc" id="channel_8c_html_a3212119ca5acac4c9ec6051987380876ad8f108076857ba3a2944b7a63883f89f"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a3212119ca5acac4c9ec6051987380876ad8f108076857ba3a2944b7a63883f89f">AST_CONNECTED_LINE_PRIV_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08790">channel.c:8790</a></div></div>
<div class="ttc" id="channel_8c_html_a982bf142a56c626e34f9d4c3f1a16d15"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a982bf142a56c626e34f9d4c3f1a16d15">tonepair</a></div><div class="ttdeci">static struct ast_generator tonepair</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07676">channel.c:7676</a></div></div>
<div class="ttc" id="channel_8h_html_a1e930e0e331c7e82a1bf297addfc5a34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1e930e0e331c7e82a1bf297addfc5a34">ast_channel_timer</a></div><div class="ttdeci">struct ast_timer * ast_channel_timer(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00737">channel_internal_api.c:737</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792aad9cb668db1da7081ab78c0fe126e1fa"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792aad9cb668db1da7081ab78c0fe126e1fa">AST_REDIRECTING_ORIG_NUMBER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09268">channel.c:9268</a></div></div>
<div class="ttc" id="channel_8c_html_a8ec95c9df838fdfbb514995efb96bf82"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8ec95c9df838fdfbb514995efb96bf82">ast_party_redirecting_set_init</a></div><div class="ttdeci">void ast_party_redirecting_set_init(struct ast_party_redirecting *init, const struct ast_party_redirecting *guide)</div><div class="ttdoc">Initialize the given redirecting id structure using the given guide for a set update operation...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02153">channel.c:2153</a></div></div>
<div class="ttc" id="structast__frame_html_a37672e6b906143604cefd3e959777b31"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">ast_frame::samples</a></div><div class="ttdeci">int samples</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">include/asterisk/frame.h:173</a></div></div>
<div class="ttc" id="channel_8c_html_a9704ae96ab849e9e5a20040c13d29705"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a9704ae96ab849e9e5a20040c13d29705">ast_active_channels</a></div><div class="ttdeci">int ast_active_channels(void)</div><div class="ttdoc">returns number of active/allocated channels </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00499">channel.c:499</a></div></div>
<div class="ttc" id="channel__internal_8h_html_a1714d1f18af28b90a1021f52b781150a"><div class="ttname"><a href="../../d5/de4/channel__internal_8h.html#a1714d1f18af28b90a1021f52b781150a">ast_channel_internal_set_stream_topology</a></div><div class="ttdeci">void ast_channel_internal_set_stream_topology(struct ast_channel *chan, struct ast_stream_topology *topology)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00658">channel_internal_api.c:658</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a7f7e5bdc9f8a8ef45c4d078f96b52624"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a7f7e5bdc9f8a8ef45c4d078f96b52624">AST_FRAME_IAX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00109">include/asterisk/frame.h:109</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
<div class="ttc" id="channel_8h_html_a63332f4790afb1a01cfcbf7df16b2dbc"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a63332f4790afb1a01cfcbf7df16b2dbc">ast_channel_redirecting_set</a></div><div class="ttdeci">void ast_channel_redirecting_set(struct ast_channel *chan, struct ast_party_redirecting *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00959">channel_internal_api.c:959</a></div></div>
<div class="ttc" id="channel_8h_html_aa52fe100a9952fc355bfa6a0582d87dd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa52fe100a9952fc355bfa6a0582d87dd">ast_channel_monitor_set</a></div><div class="ttdeci">void ast_channel_monitor_set(struct ast_channel *chan, struct ast_channel_monitor *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00617">channel_internal_api.c:617</a></div></div>
<div class="ttc" id="channel_8c_html_a5b3b9f54f49649a311d281745b4fe79b"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a5b3b9f54f49649a311d281745b4fe79b">ast_channel_feature_hooks_replace</a></div><div class="ttdeci">int ast_channel_feature_hooks_replace(struct ast_channel *chan, struct ast_bridge_features *features)</div><div class="ttdoc">Sets the channel-attached features a channel has access to upon being bridged. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l11157">channel.c:11157</a></div></div>
<div class="ttc" id="structast__hangup__handler__list_html"><div class="ttname"><a href="../../d5/d49/structast__hangup__handler__list.html">ast_hangup_handler_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00895">channel.h:895</a></div></div>
<div class="ttc" id="channel_8c_html_a32f8597d013d4be037be3ad71f08d3c1"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a32f8597d013d4be037be3ad71f08d3c1">indicate_redirecting</a></div><div class="ttdeci">static int indicate_redirecting(struct ast_channel *chan, const void *data, size_t datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04501">channel.c:4501</a></div></div>
<div class="ttc" id="channel_8c_html_ad1107e82de7494c8a10f19179e75b1fb"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ad1107e82de7494c8a10f19179e75b1fb">ast_channel_req_accountcodes_precious</a></div><div class="ttdeci">void ast_channel_req_accountcodes_precious(struct ast_channel *chan, const struct ast_channel *requestor, enum ast_channel_requestor_relationship relationship)</div><div class="ttdoc">Setup new channel accountcodes from the requestor channel after ast_request(). </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06531">channel.c:6531</a></div></div>
<div class="ttc" id="channel_8c_html_a1950f7fe77c02d233de02d299bab8c15"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a1950f7fe77c02d233de02d299bab8c15">ast_read_noaudio</a></div><div class="ttdeci">struct ast_frame * ast_read_noaudio(struct ast_channel *chan)</div><div class="ttdoc">Reads a frame, returning AST_FRAME_NULL frame if audio. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04312">channel.c:4312</a></div></div>
<div class="ttc" id="channel_8c_html_a5b14bfe21364dd8f73d45f15cf313524"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a5b14bfe21364dd8f73d45f15cf313524">ast_set_variables</a></div><div class="ttdeci">void ast_set_variables(struct ast_channel *chan, struct ast_variable *vars)</div><div class="ttdoc">adds a list of channel variables to a channel </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08217">channel.c:8217</a></div></div>
<div class="ttc" id="channel_8c_html_ac59e7b9936ede40b0af01a4b67408052"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ac59e7b9936ede40b0af01a4b67408052">ast_safe_sleep_conditional</a></div><div class="ttdeci">int ast_safe_sleep_conditional(struct ast_channel *chan, int timeout_ms, int(*cond)(void *), void *data)</div><div class="ttdoc">Wait for a specified amount of time, looking for hangups and a condition argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01568">channel.c:1568</a></div></div>
<div class="ttc" id="strings_8h_html_a33ab7fa091d5513d8507d3bd33ef5b55"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a33ab7fa091d5513d8507d3bd33ef5b55">ast_str_hash</a></div><div class="ttdeci">static force_inline int attribute_pure ast_str_hash(const char *str)</div><div class="ttdoc">Compute a hash value on a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01206">strings.h:1206</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ad66405f1d0b9e1fb484643d9a36e94ed"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ad66405f1d0b9e1fb484643d9a36e94ed">AST_LIST_APPEND_LIST</a></div><div class="ttdeci">#define AST_LIST_APPEND_LIST(head, list, field)</div><div class="ttdoc">Appends a whole list to the tail of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00782">linkedlists.h:782</a></div></div>
<div class="ttc" id="channel_8c_html_ab0286d19e506f9557c567e7e3a076b2f"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ab0286d19e506f9557c567e7e3a076b2f">ast_channel_has_manager_vars</a></div><div class="ttdeci">int ast_channel_has_manager_vars(void)</div><div class="ttdoc">Return whether or not any manager variables have been set. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07957">channel.c:7957</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a44656a284fb1f50d225d2634ede69171"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a44656a284fb1f50d225d2634ede69171">AST_CONTROL_STREAM_TOPOLOGY_REQUEST_CHANGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00312">include/asterisk/frame.h:312</a></div></div>
<div class="ttc" id="channel_8h_html_aa36854cfee90c77c4124e94273e42dffae83dea89fd3ea1272aca35be3e9767e9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa36854cfee90c77c4124e94273e42dffae83dea89fd3ea1272aca35be3e9767e9">AST_PARTY_CHAR_SET_ISO8859_1</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00245">channel.h:245</a></div></div>
<div class="ttc" id="channel_8c_html_a9b9a1f0865d838fd0104c433f3a408b2"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a9b9a1f0865d838fd0104c433f3a408b2">channel_get_external_vars</a></div><div class="ttdeci">static struct varshead * channel_get_external_vars(struct external_vars *channelvars, struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08038">channel.c:8038</a></div></div>
<div class="ttc" id="channel_8c_html_ac03c2ec5ac8e7a6ef9c5d92f91880927"><div class="ttname"><a href="../../d4/d28/channel_8c.html#ac03c2ec5ac8e7a6ef9c5d92f91880927">ast_channel_setwhentohangup_tv</a></div><div class="ttdeci">void ast_channel_setwhentohangup_tv(struct ast_channel *chan, struct timeval offset)</div><div class="ttdoc">Set when to hangup channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00510">channel.c:510</a></div></div>
<div class="ttc" id="channel_8c_html_a12a58dda74a19f383f6b77cf7fa88b54"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a12a58dda74a19f383f6b77cf7fa88b54">ast_activate_generator</a></div><div class="ttdeci">int ast_activate_generator(struct ast_channel *chan, struct ast_generator *gen, void *params)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02960">channel.c:2960</a></div></div>
<div class="ttc" id="channel_8c_html_a8bf906b38ec44b03c056f10441660792a09aa0e37716fdb65f50ee1c33c48093a"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8bf906b38ec44b03c056f10441660792a09aa0e37716fdb65f50ee1c33c48093a">AST_REDIRECTING_TO_TAG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09252">channel.c:9252</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a13dd15487fee89a002d17ef3aff62d02"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a></div><div class="ttdeci">static struct test_val a</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00046">test_linkedlists.c:46</a></div></div>
<div class="ttc" id="structast__party__id_html_aca2d7de6c89f201dc8bd0a2642d2a352"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">ast_party_id::number</a></div><div class="ttdeci">struct ast_party_number number</div><div class="ttdoc">Subscriber phone number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00343">channel.h:343</a></div></div>
<div class="ttc" id="channel_8c_html_a45670e7ba068c0e69745fc44e2084046"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a45670e7ba068c0e69745fc44e2084046">ast_tonepair_start</a></div><div class="ttdeci">int ast_tonepair_start(struct ast_channel *chan, int freq1, int freq2, int duration, int vol)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07682">channel.c:7682</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1ad9f122bcae95a470639402faa3d2ee"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a></div><div class="ttdeci">#define ao2_link(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01549">astobj2.h:1549</a></div></div>
<div class="ttc" id="channel_8h_html_a31a465197a7766c3d0bb9f65f0a4418fac3861dd1a26771778606b7aacdfb4048"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a31a465197a7766c3d0bb9f65f0a4418fac3861dd1a26771778606b7aacdfb4048">AST_CHANNEL_REQUESTOR_REPLACEMENT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01481">channel.h:1481</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390af334ccaa958af9b049d6bfcaa41549b8"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af334ccaa958af9b049d6bfcaa41549b8">AST_CONTROL_SRCCHANGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00303">include/asterisk/frame.h:303</a></div></div>
<div class="ttc" id="channel_8c_html_a8b8c37c2fb7bb32b302635f257982271"><div class="ttname"><a href="../../d4/d28/channel_8c.html#a8b8c37c2fb7bb32b302635f257982271">ast_queue_frame_head</a></div><div class="ttdeci">int ast_queue_frame_head(struct ast_channel *chan, struct ast_frame *fin)</div><div class="ttdoc">Queue one or more frames to the head of a channel&amp;#39;s frame queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01144">channel.c:1144</a></div></div>
<div class="ttc" id="f2c_8h_html_affe776513b24d84b39af8ab0930fef7f"><div class="ttname"><a href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a></div><div class="ttdeci">#define max(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc2/f2c_8h_source.html#l00198">f2c.h:198</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:43:37 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
