<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: netsock2.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">netsock2.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Network socket handling.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html">asterisk/config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/df1/netsock2_8h_source.html">asterisk/netsock2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d60/utils_8h_source.html">asterisk/utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d7d/threadstorage_8h_source.html">asterisk/threadstorage.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for netsock2.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/d75/netsock2_8c__incl.png" border="0" usemap="#netsock2_8c" alt=""/></div>
<map name="netsock2_8c" id="netsock2_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="919,155,1003,181"/>
<area shape="rect" id="node22" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="1861,80,1988,107"/>
<area shape="rect" id="node23" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1614,155,1729,181"/>
<area shape="rect" id="node34" href="../../dc/d7d/threadstorage_8h.html" title="Definitions to aid in the use of thread local storage. " alt="" coords="1706,304,1885,331"/>
<area shape="rect" id="node35" href="../../db/df1/netsock2_8h.html" title="Network socket handling. " alt="" coords="2042,229,2189,256"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="1357,379,1511,405"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="747,229,884,256"/>
<area shape="rect" id="node21" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="588,229,723,256"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="1361,453,1507,480"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="1309,304,1452,331"/>
<area shape="rect" id="node28" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="1722,379,1869,405"/>
<area shape="rect" id="node24" href="../../d9/d94/network_8h.html" title="Wrapper for network related headers, masking differences between various operating systems..." alt="" coords="2213,229,2351,256"/>
<area shape="rect" id="node27" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="1568,304,1631,331"/>
<area shape="rect" id="node29" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1520,229,1633,256"/>
<area shape="rect" id="node30" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="1909,304,2036,331"/>
<area shape="rect" id="node31" href="../../d5/deb/localtime_8h.html" title="Custom localtime functions for multiple timezones. " alt="" coords="1194,229,1341,256"/>
<area shape="rect" id="node32" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="1861,229,2018,256"/>
<area shape="rect" id="node33" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="1365,229,1495,256"/>
</map>
</div>
</div>
<p><a href="../../d4/d27/netsock2_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a956d0f44ad4de570a8d1afc36bfa8350"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d27/netsock2_8c.html#a956d0f44ad4de570a8d1afc36bfa8350">__init_ast_sockaddr_stringify_buf</a> (void)</td></tr>
<tr class="separator:a956d0f44ad4de570a8d1afc36bfa8350"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd3e7685146ebfffa6aec77e8d850808"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d27/netsock2_8c.html#afd3e7685146ebfffa6aec77e8d850808">_ast_sockaddr_from_sin</a> (struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr, const struct sockaddr_in *sin, const char *file, int line, const char *func)</td></tr>
<tr class="separator:afd3e7685146ebfffa6aec77e8d850808"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bd879c8da9923435743afa1d69609a7"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d27/netsock2_8c.html#a2bd879c8da9923435743afa1d69609a7">_ast_sockaddr_port</a> (const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr, const char *file, int line, const char *func)</td></tr>
<tr class="separator:a2bd879c8da9923435743afa1d69609a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f38ddafc2f72ac7465b0713d3e03218"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d27/netsock2_8c.html#a3f38ddafc2f72ac7465b0713d3e03218">_ast_sockaddr_set_port</a> (struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr, uint16_t port, const char *file, int line, const char *func)</td></tr>
<tr class="separator:a3f38ddafc2f72ac7465b0713d3e03218"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b102cf537a66e0d7686288bbfc5c7b5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d27/netsock2_8c.html#a5b102cf537a66e0d7686288bbfc5c7b5">_ast_sockaddr_to_sin</a> (const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr, struct sockaddr_in *sin, const char *file, int line, const char *func)</td></tr>
<tr class="separator:a5b102cf537a66e0d7686288bbfc5c7b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84c24a7f016faea067015e805ef6e57b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d27/netsock2_8c.html#a84c24a7f016faea067015e805ef6e57b">ast_accept</a> (int sockfd, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr)</td></tr>
<tr class="memdesc:a84c24a7f016faea067015e805ef6e57b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper around accept(2) that uses struct <a class="el" href="../../d3/db3/structast__sockaddr.html" title="Socket address structure. ">ast_sockaddr</a>.  <a href="#a84c24a7f016faea067015e805ef6e57b">More...</a><br /></td></tr>
<tr class="separator:a84c24a7f016faea067015e805ef6e57b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58f856feeaf684b7d5353357e85a0dd5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d27/netsock2_8c.html#a58f856feeaf684b7d5353357e85a0dd5">ast_bind</a> (int sockfd, const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr)</td></tr>
<tr class="memdesc:a58f856feeaf684b7d5353357e85a0dd5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper around bind(2) that uses struct <a class="el" href="../../d3/db3/structast__sockaddr.html" title="Socket address structure. ">ast_sockaddr</a>.  <a href="#a58f856feeaf684b7d5353357e85a0dd5">More...</a><br /></td></tr>
<tr class="separator:a58f856feeaf684b7d5353357e85a0dd5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16d4f77ca9af75e4afb60accca62e819"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d27/netsock2_8c.html#a16d4f77ca9af75e4afb60accca62e819">ast_connect</a> (int sockfd, const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr)</td></tr>
<tr class="memdesc:a16d4f77ca9af75e4afb60accca62e819"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper around connect(2) that uses struct <a class="el" href="../../d3/db3/structast__sockaddr.html" title="Socket address structure. ">ast_sockaddr</a>.  <a href="#a16d4f77ca9af75e4afb60accca62e819">More...</a><br /></td></tr>
<tr class="separator:a16d4f77ca9af75e4afb60accca62e819"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13c172d0480d5cfa48bfef5d38cb5091"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d27/netsock2_8c.html#a13c172d0480d5cfa48bfef5d38cb5091">ast_getsockname</a> (int sockfd, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr)</td></tr>
<tr class="memdesc:a13c172d0480d5cfa48bfef5d38cb5091"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper around getsockname(2) that uses struct <a class="el" href="../../d3/db3/structast__sockaddr.html" title="Socket address structure. ">ast_sockaddr</a>.  <a href="#a13c172d0480d5cfa48bfef5d38cb5091">More...</a><br /></td></tr>
<tr class="separator:a13c172d0480d5cfa48bfef5d38cb5091"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8b4d30461c0683ce147322c790d11db"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d27/netsock2_8c.html#ab8b4d30461c0683ce147322c790d11db">ast_recvfrom</a> (int sockfd, void *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size_t <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, int flags, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *src_addr)</td></tr>
<tr class="memdesc:ab8b4d30461c0683ce147322c790d11db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper around recvfrom(2) that uses struct <a class="el" href="../../d3/db3/structast__sockaddr.html" title="Socket address structure. ">ast_sockaddr</a>.  <a href="#ab8b4d30461c0683ce147322c790d11db">More...</a><br /></td></tr>
<tr class="separator:ab8b4d30461c0683ce147322c790d11db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71fb241d0d6b6ef1c73eaeb1d6d07ac6"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d27/netsock2_8c.html#a71fb241d0d6b6ef1c73eaeb1d6d07ac6">ast_sendto</a> (int sockfd, const void *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size_t <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, int flags, const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *dest_addr)</td></tr>
<tr class="memdesc:a71fb241d0d6b6ef1c73eaeb1d6d07ac6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper around sendto(2) that uses <a class="el" href="../../d3/db3/structast__sockaddr.html" title="Socket address structure. ">ast_sockaddr</a>.  <a href="#a71fb241d0d6b6ef1c73eaeb1d6d07ac6">More...</a><br /></td></tr>
<tr class="separator:a71fb241d0d6b6ef1c73eaeb1d6d07ac6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e06776a6cd2ae9f2780a445053a6864"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d27/netsock2_8c.html#a9e06776a6cd2ae9f2780a445053a6864">ast_set_qos</a> (int sockfd, int <a class="el" href="../../d1/dc0/pbx__dundi_8c.html#a25a9305efab3b493ca2519562fcec3d5">tos</a>, int <a class="el" href="../../d1/d6d/chan__unistim_8c.html#ae91dad65f553f7afebe4af507803bc7f">cos</a>, const char *<a class="el" href="../../d5/dd1/cdr__sqlite3__custom_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a>)</td></tr>
<tr class="memdesc:a9e06776a6cd2ae9f2780a445053a6864"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set type of service.  <a href="#a9e06776a6cd2ae9f2780a445053a6864">More...</a><br /></td></tr>
<tr class="separator:a9e06776a6cd2ae9f2780a445053a6864"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d6080466e41d97c3b02c043b19039ab"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d27/netsock2_8c.html#a5d6080466e41d97c3b02c043b19039ab">ast_sockaddr_apply_netmask</a> (const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr, const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *netmask, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *<a class="el" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>)</td></tr>
<tr class="memdesc:a5d6080466e41d97c3b02c043b19039ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply a netmask to an address and store the result in a separate structure.  <a href="#a5d6080466e41d97c3b02c043b19039ab">More...</a><br /></td></tr>
<tr class="separator:a5d6080466e41d97c3b02c043b19039ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32aa436e84f750f70e27f326e2515666"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d27/netsock2_8c.html#a32aa436e84f750f70e27f326e2515666">ast_sockaddr_cidr_bits</a> (const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *sa)</td></tr>
<tr class="memdesc:a32aa436e84f750f70e27f326e2515666"><td class="mdescLeft">&#160;</td><td class="mdescRight">Count the 1 bits in a netmask.  <a href="#a32aa436e84f750f70e27f326e2515666">More...</a><br /></td></tr>
<tr class="separator:a32aa436e84f750f70e27f326e2515666"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abae1b903c8f5b7639235b579a267aaab"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d27/netsock2_8c.html#abae1b903c8f5b7639235b579a267aaab">ast_sockaddr_cmp</a> (const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>, const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>)</td></tr>
<tr class="memdesc:abae1b903c8f5b7639235b579a267aaab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compares two <a class="el" href="../../d3/db3/structast__sockaddr.html" title="Socket address structure. ">ast_sockaddr</a> structures.  <a href="#abae1b903c8f5b7639235b579a267aaab">More...</a><br /></td></tr>
<tr class="separator:abae1b903c8f5b7639235b579a267aaab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fb3221004de6004d4c1f04c816eaac8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d27/netsock2_8c.html#a5fb3221004de6004d4c1f04c816eaac8">ast_sockaddr_cmp_addr</a> (const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>, const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>)</td></tr>
<tr class="memdesc:a5fb3221004de6004d4c1f04c816eaac8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compares the addresses of two <a class="el" href="../../d3/db3/structast__sockaddr.html" title="Socket address structure. ">ast_sockaddr</a> structures.  <a href="#a5fb3221004de6004d4c1f04c816eaac8">More...</a><br /></td></tr>
<tr class="separator:a5fb3221004de6004d4c1f04c816eaac8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff38b13b74ac4fa58cbac36e6bdaf111"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d27/netsock2_8c.html#aff38b13b74ac4fa58cbac36e6bdaf111">ast_sockaddr_hash</a> (const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr)</td></tr>
<tr class="memdesc:aff38b13b74ac4fa58cbac36e6bdaf111"><td class="mdescLeft">&#160;</td><td class="mdescRight">Computes a hash value from the address. The port is ignored.  <a href="#aff38b13b74ac4fa58cbac36e6bdaf111">More...</a><br /></td></tr>
<tr class="separator:aff38b13b74ac4fa58cbac36e6bdaf111"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cf5eccca6dd710689d29f8ecc3c362d"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d27/netsock2_8c.html#a5cf5eccca6dd710689d29f8ecc3c362d">ast_sockaddr_ipv4</a> (const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr)</td></tr>
<tr class="memdesc:a5cf5eccca6dd710689d29f8ecc3c362d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get an IPv4 address of an <a class="el" href="../../d3/db3/structast__sockaddr.html" title="Socket address structure. ">ast_sockaddr</a>.  <a href="#a5cf5eccca6dd710689d29f8ecc3c362d">More...</a><br /></td></tr>
<tr class="separator:a5cf5eccca6dd710689d29f8ecc3c362d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42e610962ef06c151aad8260af428e3d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d27/netsock2_8c.html#a42e610962ef06c151aad8260af428e3d">ast_sockaddr_ipv4_mapped</a> (const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr, struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *ast_mapped)</td></tr>
<tr class="memdesc:a42e610962ef06c151aad8260af428e3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert an IPv4-mapped IPv6 address into an IPv4 address.  <a href="#a42e610962ef06c151aad8260af428e3d">More...</a><br /></td></tr>
<tr class="separator:a42e610962ef06c151aad8260af428e3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7704d67f19f3ca91198d8cc6e6445c3f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d27/netsock2_8c.html#a7704d67f19f3ca91198d8cc6e6445c3f">ast_sockaddr_is_any</a> (const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr)</td></tr>
<tr class="memdesc:a7704d67f19f3ca91198d8cc6e6445c3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if the address type is unspecified, or "any" address.  <a href="#a7704d67f19f3ca91198d8cc6e6445c3f">More...</a><br /></td></tr>
<tr class="separator:a7704d67f19f3ca91198d8cc6e6445c3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbbb5a3382be0925c292a4933ce5b63d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d27/netsock2_8c.html#adbbb5a3382be0925c292a4933ce5b63d">ast_sockaddr_is_ipv4</a> (const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr)</td></tr>
<tr class="memdesc:adbbb5a3382be0925c292a4933ce5b63d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if the address is an IPv4 address.  <a href="#adbbb5a3382be0925c292a4933ce5b63d">More...</a><br /></td></tr>
<tr class="separator:adbbb5a3382be0925c292a4933ce5b63d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2625d0652cf8a306d99072aedd7c6ad"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d27/netsock2_8c.html#af2625d0652cf8a306d99072aedd7c6ad">ast_sockaddr_is_ipv4_mapped</a> (const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr)</td></tr>
<tr class="memdesc:af2625d0652cf8a306d99072aedd7c6ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if this is an IPv4-mapped IPv6 address.  <a href="#af2625d0652cf8a306d99072aedd7c6ad">More...</a><br /></td></tr>
<tr class="separator:af2625d0652cf8a306d99072aedd7c6ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeeb6eeb492def0d5aa95602b74808b85"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d27/netsock2_8c.html#aeeb6eeb492def0d5aa95602b74808b85">ast_sockaddr_is_ipv4_multicast</a> (const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr)</td></tr>
<tr class="memdesc:aeeb6eeb492def0d5aa95602b74808b85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if an IPv4 address is a multicast address.  <a href="#aeeb6eeb492def0d5aa95602b74808b85">More...</a><br /></td></tr>
<tr class="separator:aeeb6eeb492def0d5aa95602b74808b85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a579748bd6ceddd06b1cc6eb3578e8acc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d27/netsock2_8c.html#a579748bd6ceddd06b1cc6eb3578e8acc">ast_sockaddr_is_ipv6</a> (const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr)</td></tr>
<tr class="memdesc:a579748bd6ceddd06b1cc6eb3578e8acc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if this is an IPv6 address.  <a href="#a579748bd6ceddd06b1cc6eb3578e8acc">More...</a><br /></td></tr>
<tr class="separator:a579748bd6ceddd06b1cc6eb3578e8acc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed3802161165adffc644184508e5ae43"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d27/netsock2_8c.html#aed3802161165adffc644184508e5ae43">ast_sockaddr_is_ipv6_link_local</a> (const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr)</td></tr>
<tr class="memdesc:aed3802161165adffc644184508e5ae43"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if this is a link-local IPv6 address.  <a href="#aed3802161165adffc644184508e5ae43">More...</a><br /></td></tr>
<tr class="separator:aed3802161165adffc644184508e5ae43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad98818272870e12d48fe4347aaa46d0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d27/netsock2_8c.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a> (struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr, const char *<a class="el" href="../../d8/d30/main_2security__events_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, int flags)</td></tr>
<tr class="memdesc:aad98818272870e12d48fe4347aaa46d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse an IPv4 or IPv6 address string.  <a href="#aad98818272870e12d48fe4347aaa46d0">More...</a><br /></td></tr>
<tr class="separator:aad98818272870e12d48fe4347aaa46d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ba6f5b5a9de09137dd18fe2d9592880"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d27/netsock2_8c.html#a8ba6f5b5a9de09137dd18fe2d9592880">ast_sockaddr_resolve</a> (struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> **addrs, const char *<a class="el" href="../../d8/d30/main_2security__events_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, int flags, int family)</td></tr>
<tr class="memdesc:a8ba6f5b5a9de09137dd18fe2d9592880"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses a string with an IPv4 or IPv6 address and place results into an array.  <a href="#a8ba6f5b5a9de09137dd18fe2d9592880">More...</a><br /></td></tr>
<tr class="separator:a8ba6f5b5a9de09137dd18fe2d9592880"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02d40ab39a395d3c81ab876ed67d55cd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d27/netsock2_8c.html#a02d40ab39a395d3c81ab876ed67d55cd">ast_sockaddr_resolve_first_af</a> (struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addr, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, int <a class="el" href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>, int family)</td></tr>
<tr class="memdesc:a02d40ab39a395d3c81ab876ed67d55cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pulls first resolved address and returns it.  <a href="#a02d40ab39a395d3c81ab876ed67d55cd">More...</a><br /></td></tr>
<tr class="separator:a02d40ab39a395d3c81ab876ed67d55cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a774d22af00b04d5bc0c9e3456ac44ad2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d27/netsock2_8c.html#a774d22af00b04d5bc0c9e3456ac44ad2">ast_sockaddr_split_hostport</a> (char *<a class="el" href="../../d8/d30/main_2security__events_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, char **<a class="el" href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a>, char **port, int flags)</td></tr>
<tr class="memdesc:a774d22af00b04d5bc0c9e3456ac44ad2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Splits a string into its host and port components.  <a href="#a774d22af00b04d5bc0c9e3456ac44ad2">More...</a><br /></td></tr>
<tr class="separator:a774d22af00b04d5bc0c9e3456ac44ad2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebfb0bdf1d93584cbc399147bd1590d1"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d27/netsock2_8c.html#aebfb0bdf1d93584cbc399147bd1590d1">ast_sockaddr_stringify_fmt</a> (const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *sa, int <a class="el" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>)</td></tr>
<tr class="memdesc:aebfb0bdf1d93584cbc399147bd1590d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a socket address to a string.  <a href="#aebfb0bdf1d93584cbc399147bd1590d1">More...</a><br /></td></tr>
<tr class="separator:aebfb0bdf1d93584cbc399147bd1590d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3d0d919156705232cf9006ffd8707cf"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d27/netsock2_8c.html#ae3d0d919156705232cf9006ffd8707cf">ast_transport2str</a> (enum <a class="el" href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3">ast_transport</a> transport)</td></tr>
<tr class="memdesc:ae3d0d919156705232cf9006ffd8707cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a string representation of an ast_transport.  <a href="#ae3d0d919156705232cf9006ffd8707cf">More...</a><br /></td></tr>
<tr class="separator:ae3d0d919156705232cf9006ffd8707cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a6383a184bcee63cb7d24a182f433004d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d27/netsock2_8c.html#a6383a184bcee63cb7d24a182f433004d">ast_sockaddr_stringify_buf</a> = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../d4/d27/netsock2_8c.html#a956d0f44ad4de570a8d1afc36bfa8350">__init_ast_sockaddr_stringify_buf</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td></tr>
<tr class="separator:a6383a184bcee63cb7d24a182f433004d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Network socket handling. </p>
<dl class="section author"><dt>Author</dt><dd>Viagénie <a href="#" onclick="location.href='mai'+'lto:'+'ast'+'er'+'isk'+'v6'+'@vi'+'ag'+'eni'+'e.'+'ca'; return false;">aster<span style="display: none;">.nosp@m.</span>iskv<span style="display: none;">.nosp@m.</span>6@via<span style="display: none;">.nosp@m.</span>geni<span style="display: none;">.nosp@m.</span>e.ca</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a956d0f44ad4de570a8d1afc36bfa8350"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a956d0f44ad4de570a8d1afc36bfa8350">&#9670;&nbsp;</a></span>__init_ast_sockaddr_stringify_buf()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __init_ast_sockaddr_stringify_buf </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00063">63</a> of file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;{</div></div><!-- fragment -->
</div>
</div>
<a id="afd3e7685146ebfffa6aec77e8d850808"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd3e7685146ebfffa6aec77e8d850808">&#9670;&nbsp;</a></span>_ast_sockaddr_from_sin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _ast_sockaddr_from_sin </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct sockaddr_in *&#160;</td>
          <td class="paramname"><em>sin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00689">689</a> of file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00240">__LOG_DEBUG</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00441">DEBUG_ATLEAST</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00099">ast_sockaddr::len</a>, and <a class="el" href="../../db/df1/netsock2_8h_source.html#l00098">ast_sockaddr::ss</a>.</p>
<div class="fragment"><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;{</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;   memcpy(&amp;addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>, sin, <span class="keyword">sizeof</span>(*sin));</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;   <span class="keywordflow">if</span> (addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>.ss_family != AF_INET &amp;&amp; <a class="code" href="../../d1/d8c/logger_8h.html#a33f6031de4ab6d1406465a7a3ee18e86">DEBUG_ATLEAST</a>(1)) {</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aaecc0363c3e5c2798fb8ed372c9a3d56">__LOG_DEBUG</a>, <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, line, func, <span class="stringliteral">&quot;Address family is not AF_INET\n&quot;</span>);</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;   }</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;   addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">len</a> = <span class="keyword">sizeof</span>(*sin);</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;}</div><div class="ttc" id="structast__sockaddr_html_aceb44bfc6a3800d7f419367afb25fe79"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ast_sockaddr::ss</a></div><div class="ttdeci">struct sockaddr_storage ss</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00098">netsock2.h:98</a></div></div>
<div class="ttc" id="logger_8h_html_aaecc0363c3e5c2798fb8ed372c9a3d56"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aaecc0363c3e5c2798fb8ed372c9a3d56">__LOG_DEBUG</a></div><div class="ttdeci">#define __LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00240">logger.h:240</a></div></div>
<div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="structast__sockaddr_html_ad04e8181049f819e1df2c7cac72a53ce"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">ast_sockaddr::len</a></div><div class="ttdeci">socklen_t len</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00099">netsock2.h:99</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_a33f6031de4ab6d1406465a7a3ee18e86"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a33f6031de4ab6d1406465a7a3ee18e86">DEBUG_ATLEAST</a></div><div class="ttdeci">#define DEBUG_ATLEAST(level)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00441">logger.h:441</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2bd879c8da9923435743afa1d69609a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bd879c8da9923435743afa1d69609a7">&#9670;&nbsp;</a></span>_ast_sockaddr_port()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t _ast_sockaddr_port </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00453">453</a> of file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00240">__LOG_DEBUG</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00441">DEBUG_ATLEAST</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00099">ast_sockaddr::len</a>, and <a class="el" href="../../db/df1/netsock2_8h_source.html#l00098">ast_sockaddr::ss</a>.</p>
<div class="fragment"><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;{</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment">    * Test addr-&gt;len first to be tolerant of an ast_sockaddr_setnull()</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment">    * addr.  In that case addr-&gt;len might be the only value initialized.</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;   <span class="keywordflow">if</span> (addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">len</a> == <span class="keyword">sizeof</span>(<span class="keyword">struct</span> sockaddr_in)</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;      &amp;&amp; addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>.ss_family == AF_INET) {</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      <span class="keywordflow">return</span> ntohs(((<span class="keyword">struct</span> sockaddr_in *)&amp;addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>)-&gt;sin_port);</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;   }</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;   <span class="keywordflow">if</span> (addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">len</a> == <span class="keyword">sizeof</span>(<span class="keyword">struct</span> sockaddr_in6)</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      &amp;&amp; addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>.ss_family == AF_INET6) {</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <span class="keywordflow">return</span> ntohs(((<span class="keyword">struct</span> sockaddr_in6 *)&amp;addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>)-&gt;sin6_port);</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;   }</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/d8c/logger_8h.html#a33f6031de4ab6d1406465a7a3ee18e86">DEBUG_ATLEAST</a>(1)) {</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aaecc0363c3e5c2798fb8ed372c9a3d56">__LOG_DEBUG</a>, <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, line, func, <span class="stringliteral">&quot;Not an IPv4 nor IPv6 address, cannot get port.\n&quot;</span>);</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   }</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;}</div><div class="ttc" id="structast__sockaddr_html_aceb44bfc6a3800d7f419367afb25fe79"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ast_sockaddr::ss</a></div><div class="ttdeci">struct sockaddr_storage ss</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00098">netsock2.h:98</a></div></div>
<div class="ttc" id="logger_8h_html_aaecc0363c3e5c2798fb8ed372c9a3d56"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aaecc0363c3e5c2798fb8ed372c9a3d56">__LOG_DEBUG</a></div><div class="ttdeci">#define __LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00240">logger.h:240</a></div></div>
<div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="structast__sockaddr_html_ad04e8181049f819e1df2c7cac72a53ce"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">ast_sockaddr::len</a></div><div class="ttdeci">socklen_t len</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00099">netsock2.h:99</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_a33f6031de4ab6d1406465a7a3ee18e86"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a33f6031de4ab6d1406465a7a3ee18e86">DEBUG_ATLEAST</a></div><div class="ttdeci">#define DEBUG_ATLEAST(level)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00441">logger.h:441</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3f38ddafc2f72ac7465b0713d3e03218"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f38ddafc2f72ac7465b0713d3e03218">&#9670;&nbsp;</a></span>_ast_sockaddr_set_port()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _ast_sockaddr_set_port </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00473">473</a> of file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00240">__LOG_DEBUG</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00441">DEBUG_ATLEAST</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00099">ast_sockaddr::len</a>, and <a class="el" href="../../db/df1/netsock2_8h_source.html#l00098">ast_sockaddr::ss</a>.</p>
<div class="fragment"><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;{</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment">    * Test addr-&gt;len first to be tolerant of an ast_sockaddr_setnull()</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment">    * addr.  In that case addr-&gt;len might be the only value initialized.</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;   <span class="keywordflow">if</span> (addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">len</a> == <span class="keyword">sizeof</span>(<span class="keyword">struct</span> sockaddr_in)</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      &amp;&amp; addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>.ss_family == AF_INET) {</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      ((<span class="keyword">struct </span>sockaddr_in *)&amp;addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>)-&gt;sin_port = htons(port);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">len</a> == <span class="keyword">sizeof</span>(<span class="keyword">struct</span> sockaddr_in6)</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      &amp;&amp; addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>.ss_family == AF_INET6) {</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      ((<span class="keyword">struct </span>sockaddr_in6 *)&amp;addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>)-&gt;sin6_port = htons(port);</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d1/d8c/logger_8h.html#a33f6031de4ab6d1406465a7a3ee18e86">DEBUG_ATLEAST</a>(1)) {</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aaecc0363c3e5c2798fb8ed372c9a3d56">__LOG_DEBUG</a>, <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, line, func,</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;         <span class="stringliteral">&quot;Not an IPv4 nor IPv6 address, cannot set port.\n&quot;</span>);</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;   }</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;}</div><div class="ttc" id="structast__sockaddr_html_aceb44bfc6a3800d7f419367afb25fe79"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ast_sockaddr::ss</a></div><div class="ttdeci">struct sockaddr_storage ss</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00098">netsock2.h:98</a></div></div>
<div class="ttc" id="logger_8h_html_aaecc0363c3e5c2798fb8ed372c9a3d56"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aaecc0363c3e5c2798fb8ed372c9a3d56">__LOG_DEBUG</a></div><div class="ttdeci">#define __LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00240">logger.h:240</a></div></div>
<div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="structast__sockaddr_html_ad04e8181049f819e1df2c7cac72a53ce"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">ast_sockaddr::len</a></div><div class="ttdeci">socklen_t len</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00099">netsock2.h:99</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_a33f6031de4ab6d1406465a7a3ee18e86"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a33f6031de4ab6d1406465a7a3ee18e86">DEBUG_ATLEAST</a></div><div class="ttdeci">#define DEBUG_ATLEAST(level)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00441">logger.h:441</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5b102cf537a66e0d7686288bbfc5c7b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b102cf537a66e0d7686288bbfc5c7b5">&#9670;&nbsp;</a></span>_ast_sockaddr_to_sin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int _ast_sockaddr_to_sin </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct sockaddr_in *&#160;</td>
          <td class="paramname"><em>sin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00668">668</a> of file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00240">__LOG_DEBUG</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00284">__LOG_ERROR</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00441">DEBUG_ATLEAST</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00099">ast_sockaddr::len</a>, and <a class="el" href="../../db/df1/netsock2_8h_source.html#l00098">ast_sockaddr::ss</a>.</p>
<div class="fragment"><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;{</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(addr)) {</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      memset(sin, 0, <span class="keyword">sizeof</span>(*sin));</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;   }</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;   <span class="keywordflow">if</span> (addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">len</a> != <span class="keyword">sizeof</span>(*sin)) {</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a0fcdc410e3e9fbb251fd0c4f8581d96c">__LOG_ERROR</a>, <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, line, func, <span class="stringliteral">&quot;Bad address cast to IPv4\n&quot;</span>);</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;   }</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;   <span class="keywordflow">if</span> (addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>.ss_family != AF_INET &amp;&amp; <a class="code" href="../../d1/d8c/logger_8h.html#a33f6031de4ab6d1406465a7a3ee18e86">DEBUG_ATLEAST</a>(1)) {</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aaecc0363c3e5c2798fb8ed372c9a3d56">__LOG_DEBUG</a>, <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, line, func, <span class="stringliteral">&quot;Address family is not AF_INET\n&quot;</span>);</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;   }</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;   *sin = *(<span class="keyword">struct </span>sockaddr_in *)&amp;addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;}</div><div class="ttc" id="structast__sockaddr_html_aceb44bfc6a3800d7f419367afb25fe79"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ast_sockaddr::ss</a></div><div class="ttdeci">struct sockaddr_storage ss</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00098">netsock2.h:98</a></div></div>
<div class="ttc" id="logger_8h_html_aaecc0363c3e5c2798fb8ed372c9a3d56"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aaecc0363c3e5c2798fb8ed372c9a3d56">__LOG_DEBUG</a></div><div class="ttdeci">#define __LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00240">logger.h:240</a></div></div>
<div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="structast__sockaddr_html_ad04e8181049f819e1df2c7cac72a53ce"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">ast_sockaddr::len</a></div><div class="ttdeci">socklen_t len</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00099">netsock2.h:99</a></div></div>
<div class="ttc" id="logger_8h_html_a0fcdc410e3e9fbb251fd0c4f8581d96c"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a0fcdc410e3e9fbb251fd0c4f8581d96c">__LOG_ERROR</a></div><div class="ttdeci">#define __LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00284">logger.h:284</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_a33f6031de4ab6d1406465a7a3ee18e86"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a33f6031de4ab6d1406465a7a3ee18e86">DEBUG_ATLEAST</a></div><div class="ttdeci">#define DEBUG_ATLEAST(level)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00441">logger.h:441</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a84c24a7f016faea067015e805ef6e57b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84c24a7f016faea067015e805ef6e57b">&#9670;&nbsp;</a></span>ast_accept()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_accept </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sockfd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wrapper around accept(2) that uses struct <a class="el" href="../../d3/db3/structast__sockaddr.html" title="Socket address structure. ">ast_sockaddr</a>. </p>
<dl class="section since"><dt>Since</dt><dd>1.8</dd></dl>
<p>For parameter and return information, see the man page for accept(2). </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00584">584</a> of file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/df1/netsock2_8h_source.html#l00099">ast_sockaddr::len</a>, and <a class="el" href="../../db/df1/netsock2_8h_source.html#l00098">ast_sockaddr::ss</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d9b/tcptls_8c_source.html#l00280">ast_tcptls_server_root()</a>.</p>
<div class="fragment"><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;{</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;   addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">len</a> = <span class="keyword">sizeof</span>(addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>);</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;   <span class="keywordflow">return</span> accept(sockfd, (<span class="keyword">struct</span> sockaddr *)&amp;addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>, &amp;addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">len</a>);</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;}</div><div class="ttc" id="structast__sockaddr_html_aceb44bfc6a3800d7f419367afb25fe79"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ast_sockaddr::ss</a></div><div class="ttdeci">struct sockaddr_storage ss</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00098">netsock2.h:98</a></div></div>
<div class="ttc" id="structast__sockaddr_html_ad04e8181049f819e1df2c7cac72a53ce"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">ast_sockaddr::len</a></div><div class="ttdeci">socklen_t len</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00099">netsock2.h:99</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a58f856feeaf684b7d5353357e85a0dd5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58f856feeaf684b7d5353357e85a0dd5">&#9670;&nbsp;</a></span>ast_bind()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bind </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sockfd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wrapper around bind(2) that uses struct <a class="el" href="../../d3/db3/structast__sockaddr.html" title="Socket address structure. ">ast_sockaddr</a>. </p>
<dl class="section since"><dt>Since</dt><dd>1.8</dd></dl>
<p>For parameter and return information, see the man page for bind(2). </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00590">590</a> of file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/df1/netsock2_8h_source.html#l00099">ast_sockaddr::len</a>, and <a class="el" href="../../db/df1/netsock2_8h_source.html#l00098">ast_sockaddr::ss</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d79/netsock_8c_source.html#l00109">ast_netsock_bindaddr()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08303">ast_rtp_prop_set()</a>, <a class="el" href="../../dc/d9b/tcptls_8c_source.html#l00615">ast_tcptls_client_create()</a>, <a class="el" href="../../dc/d9b/tcptls_8c_source.html#l00685">ast_tcptls_server_start()</a>, <a class="el" href="../../d2/dce/udptl_8c_source.html#l01028">ast_udptl_new_with_bindaddr()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l12673">check_srcaddr()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l05169">load_module()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l32514">reload_config()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03828">rtp_allocate_transport()</a>.</p>
<div class="fragment"><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;{</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;   <span class="keywordflow">return</span> bind(sockfd, (<span class="keyword">const</span> <span class="keyword">struct</span> sockaddr *)&amp;addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>, addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">len</a>);</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;}</div><div class="ttc" id="structast__sockaddr_html_aceb44bfc6a3800d7f419367afb25fe79"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ast_sockaddr::ss</a></div><div class="ttdeci">struct sockaddr_storage ss</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00098">netsock2.h:98</a></div></div>
<div class="ttc" id="structast__sockaddr_html_ad04e8181049f819e1df2c7cac72a53ce"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">ast_sockaddr::len</a></div><div class="ttdeci">socklen_t len</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00099">netsock2.h:99</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a16d4f77ca9af75e4afb60accca62e819"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16d4f77ca9af75e4afb60accca62e819">&#9670;&nbsp;</a></span>ast_connect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_connect </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sockfd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wrapper around connect(2) that uses struct <a class="el" href="../../d3/db3/structast__sockaddr.html" title="Socket address structure. ">ast_sockaddr</a>. </p>
<dl class="section since"><dt>Since</dt><dd>1.8</dd></dl>
<p>For parameter and return information, see the man page for connect(2). </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00595">595</a> of file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/df1/netsock2_8h_source.html#l00099">ast_sockaddr::len</a>, and <a class="el" href="../../db/df1/netsock2_8h_source.html#l00098">ast_sockaddr::ss</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/ddd/res__audiosocket_8c_source.html#l00099">ast_audiosocket_connect()</a>, <a class="el" href="../../d9/db8/acl_8c_source.html#l01005">ast_ouraddrfor()</a>, <a class="el" href="../../dc/d9b/tcptls_8c_source.html#l00585">ast_tcptls_client_start()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02053">launch_netscript()</a>, and <a class="el" href="../../db/dd3/res__stun__monitor_8c_source.html#l00085">stun_monitor_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;{</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;   <span class="keywordflow">return</span> connect(sockfd, (<span class="keyword">const</span> <span class="keyword">struct</span> sockaddr *)&amp;addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>, addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">len</a>);</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;}</div><div class="ttc" id="structast__sockaddr_html_aceb44bfc6a3800d7f419367afb25fe79"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ast_sockaddr::ss</a></div><div class="ttdeci">struct sockaddr_storage ss</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00098">netsock2.h:98</a></div></div>
<div class="ttc" id="structast__sockaddr_html_ad04e8181049f819e1df2c7cac72a53ce"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">ast_sockaddr::len</a></div><div class="ttdeci">socklen_t len</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00099">netsock2.h:99</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a13c172d0480d5cfa48bfef5d38cb5091"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13c172d0480d5cfa48bfef5d38cb5091">&#9670;&nbsp;</a></span>ast_getsockname()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_getsockname </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sockfd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wrapper around getsockname(2) that uses struct <a class="el" href="../../d3/db3/structast__sockaddr.html" title="Socket address structure. ">ast_sockaddr</a>. </p>
<dl class="section since"><dt>Since</dt><dd>1.8</dd></dl>
<p>For parameter and return information, see the man page for getsockname(2). </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00600">600</a> of file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/df1/netsock2_8h_source.html#l00099">ast_sockaddr::len</a>, and <a class="el" href="../../db/df1/netsock2_8h_source.html#l00098">ast_sockaddr::ss</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/db8/acl_8c_source.html#l01005">ast_ouraddrfor()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00621">ast_set_qos()</a>, and <a class="el" href="../../de/d4c/res__http__websocket_8c_source.html#l00790">ast_websocket_uri_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;{</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;   addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">len</a> = <span class="keyword">sizeof</span>(addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>);</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;   <span class="keywordflow">return</span> getsockname(sockfd, (<span class="keyword">struct</span> sockaddr *)&amp;addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>, &amp;addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">len</a>);</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;}</div><div class="ttc" id="structast__sockaddr_html_aceb44bfc6a3800d7f419367afb25fe79"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ast_sockaddr::ss</a></div><div class="ttdeci">struct sockaddr_storage ss</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00098">netsock2.h:98</a></div></div>
<div class="ttc" id="structast__sockaddr_html_ad04e8181049f819e1df2c7cac72a53ce"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">ast_sockaddr::len</a></div><div class="ttdeci">socklen_t len</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00099">netsock2.h:99</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab8b4d30461c0683ce147322c790d11db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8b4d30461c0683ce147322c790d11db">&#9670;&nbsp;</a></span>ast_recvfrom()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t ast_recvfrom </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sockfd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>src_addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wrapper around recvfrom(2) that uses struct <a class="el" href="../../d3/db3/structast__sockaddr.html" title="Socket address structure. ">ast_sockaddr</a>. </p>
<dl class="section since"><dt>Since</dt><dd>1.8</dd></dl>
<p>For parameter and return information, see the man page for recvfrom(2). </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00606">606</a> of file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/df1/netsock2_8h_source.html#l00099">ast_sockaddr::len</a>, and <a class="el" href="../../db/df1/netsock2_8h_source.html#l00098">ast_sockaddr::ss</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03084">__rtp_recvfrom()</a>, <a class="el" href="../../d2/dce/udptl_8c_source.html#l00762">ast_udptl_read()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l29380">sipsock_read()</a>, and <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l09773">socket_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;{</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;   src_addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">len</a> = <span class="keyword">sizeof</span>(src_addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>);</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;   <span class="keywordflow">return</span> recvfrom(sockfd, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, flags,</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;         (<span class="keyword">struct</span> sockaddr *)&amp;src_addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>, &amp;src_addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">len</a>);</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;}</div><div class="ttc" id="structast__sockaddr_html_aceb44bfc6a3800d7f419367afb25fe79"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ast_sockaddr::ss</a></div><div class="ttdeci">struct sockaddr_storage ss</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00098">netsock2.h:98</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="structast__sockaddr_html_ad04e8181049f819e1df2c7cac72a53ce"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">ast_sockaddr::len</a></div><div class="ttdeci">socklen_t len</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00099">netsock2.h:99</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a71fb241d0d6b6ef1c73eaeb1d6d07ac6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71fb241d0d6b6ef1c73eaeb1d6d07ac6">&#9670;&nbsp;</a></span>ast_sendto()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t ast_sendto </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sockfd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>dest_addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wrapper around sendto(2) that uses <a class="el" href="../../d3/db3/structast__sockaddr.html" title="Socket address structure. ">ast_sockaddr</a>. </p>
<dl class="section since"><dt>Since</dt><dd>1.8</dd></dl>
<p>For parameter and return information, see the man page for sendto(2) </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00614">614</a> of file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/df1/netsock2_8h_source.html#l00099">ast_sockaddr::len</a>, and <a class="el" href="../../db/df1/netsock2_8h_source.html#l00098">ast_sockaddr::ss</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03247">__rtp_sendto()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l03801">__sip_xmit()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01388">ast_rtp_on_turn_rx_rtcp_data()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01322">ast_rtp_on_turn_rx_rtp_data()</a>, <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00111">ast_statsd_log_string()</a>, <a class="el" href="../../d2/dce/udptl_8c_source.html#l01161">ast_udptl_write()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03169">dundi_xmit()</a>, <a class="el" href="../../db/d43/res__hep_8c_source.html#l00452">hep_queue_cb()</a>, <a class="el" href="../../d4/d6e/res__rtp__multicast_8c_source.html#l00348">multicast_send_control_packet()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l08018">raw_hangup()</a>, <a class="el" href="../../d4/d6e/res__rtp__multicast_8c_source.html#l00413">rtp_raw_write()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l04772">send_apathetic_reply()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l03402">send_packet()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l30469">sip_send_keepalive()</a>, and <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l03389">transmit_trunk()</a>.</p>
<div class="fragment"><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;{</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;   <span class="keywordflow">return</span> sendto(sockfd, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, flags,</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;            (<span class="keyword">const</span> <span class="keyword">struct</span> sockaddr *)&amp;dest_addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>, dest_addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">len</a>);</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;}</div><div class="ttc" id="structast__sockaddr_html_aceb44bfc6a3800d7f419367afb25fe79"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ast_sockaddr::ss</a></div><div class="ttdeci">struct sockaddr_storage ss</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00098">netsock2.h:98</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="structast__sockaddr_html_ad04e8181049f819e1df2c7cac72a53ce"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">ast_sockaddr::len</a></div><div class="ttdeci">socklen_t len</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00099">netsock2.h:99</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9e06776a6cd2ae9f2780a445053a6864"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e06776a6cd2ae9f2780a445053a6864">&#9670;&nbsp;</a></span>ast_set_qos()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_set_qos </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sockfd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>tos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>desc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set type of service. </p>
<dl class="section since"><dt>Since</dt><dd>1.8</dd></dl>
<p>Set ToS ("Type of Service for IPv4 and "Traffic Class for IPv6) and CoS (Linux's SO_PRIORITY)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sockfd</td><td>File descriptor for socket on which to set the parameters </td></tr>
    <tr><td class="paramname">tos</td><td>The type of service for the socket </td></tr>
    <tr><td class="paramname">cos</td><td>The cost of service for the socket </td></tr>
    <tr><td class="paramname">desc</td><td>A text description of the socket in question. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Error, with errno set to an appropriate value </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00621">621</a> of file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00600">ast_getsockname()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00534">ast_sockaddr_is_any()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00524">ast_sockaddr_is_ipv6()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d79/netsock_8c_source.html#l00109">ast_netsock_bindaddr()</a>, <a class="el" href="../../de/d79/netsock_8c_source.html#l00162">ast_netsock_set_qos()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08804">ast_rtp_qos_set()</a>, <a class="el" href="../../d2/dce/udptl_8c_source.html#l01125">ast_udptl_setqos()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l08443">config_load()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l05169">load_module()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04683">reload_config()</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l29578">sip_prepare_socket()</a>.</p>
<div class="fragment"><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;{</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;   <span class="keywordtype">int</span> set_tos;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;   <span class="keywordtype">int</span> set_tclass;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> addr;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;   <span class="comment">/* If the sock address is IPv6, the TCLASS field must be set. */</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;   set_tclass = !<a class="code" href="../../d4/d27/netsock2_8c.html#a13c172d0480d5cfa48bfef5d38cb5091">ast_getsockname</a>(sockfd, &amp;addr) &amp;&amp; <a class="code" href="../../d4/d27/netsock2_8c.html#a579748bd6ceddd06b1cc6eb3578e8acc">ast_sockaddr_is_ipv6</a>(&amp;addr) ? 1 : 0;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;   <span class="comment">/* If the sock address is IPv4 or (IPv6 set to any address [::]) set TOS bits */</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;   set_tos = (!set_tclass || (set_tclass &amp;&amp; <a class="code" href="../../d4/d27/netsock2_8c.html#a7704d67f19f3ca91198d8cc6e6445c3f">ast_sockaddr_is_any</a>(&amp;addr))) ? 1 : 0;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;   <span class="keywordflow">if</span> (set_tos) {</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      <span class="keywordflow">if</span> ((res = setsockopt(sockfd, IPPROTO_IP, IP_TOS, &amp;<a class="code" href="../../d5/dff/chan__iax2_8c.html#a25a9305efab3b493ca2519562fcec3d5">tos</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d5/dff/chan__iax2_8c.html#a25a9305efab3b493ca2519562fcec3d5">tos</a>)))) {</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to set %s DSCP TOS value to %d (may be you have no &quot;</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            <span class="stringliteral">&quot;root privileges): %s\n&quot;</span>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a>, <a class="code" href="../../d5/dff/chan__iax2_8c.html#a25a9305efab3b493ca2519562fcec3d5">tos</a>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/dff/chan__iax2_8c.html#a25a9305efab3b493ca2519562fcec3d5">tos</a>) {</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;Using %s TOS bits %d\n&quot;</span>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a>, <a class="code" href="../../d5/dff/chan__iax2_8c.html#a25a9305efab3b493ca2519562fcec3d5">tos</a>);</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;      }</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;   }</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;<span class="preprocessor">#if defined(IPV6_TCLASS) &amp;&amp; defined(IPPROTO_IPV6)</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;   <span class="keywordflow">if</span> (set_tclass) {</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d27/netsock2_8c.html#a13c172d0480d5cfa48bfef5d38cb5091">ast_getsockname</a>(sockfd, &amp;addr) &amp;&amp; <a class="code" href="../../d4/d27/netsock2_8c.html#a579748bd6ceddd06b1cc6eb3578e8acc">ast_sockaddr_is_ipv6</a>(&amp;addr)) {</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;         <span class="keywordflow">if</span> ((res = setsockopt(sockfd, IPPROTO_IPV6, IPV6_TCLASS, &amp;<a class="code" href="../../d5/dff/chan__iax2_8c.html#a25a9305efab3b493ca2519562fcec3d5">tos</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d5/dff/chan__iax2_8c.html#a25a9305efab3b493ca2519562fcec3d5">tos</a>)))) {</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to set %s DSCP TCLASS field to %d (may be you have no &quot;</span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;               <span class="stringliteral">&quot;root privileges): %s\n&quot;</span>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a>, <a class="code" href="../../d5/dff/chan__iax2_8c.html#a25a9305efab3b493ca2519562fcec3d5">tos</a>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/dff/chan__iax2_8c.html#a25a9305efab3b493ca2519562fcec3d5">tos</a>) {</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;Using %s TOS bits %d in TCLASS field.\n&quot;</span>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a>, <a class="code" href="../../d5/dff/chan__iax2_8c.html#a25a9305efab3b493ca2519562fcec3d5">tos</a>);</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;         }</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      }</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;   }</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="preprocessor">#ifdef linux</span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;   <span class="keywordflow">if</span> (setsockopt(sockfd, SOL_SOCKET, SO_PRIORITY, &amp;<a class="code" href="../../d5/dff/chan__iax2_8c.html#ae91dad65f553f7afebe4af507803bc7f">cos</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d5/dff/chan__iax2_8c.html#ae91dad65f553f7afebe4af507803bc7f">cos</a>))) {</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to set %s CoS to %d: %s\n&quot;</span>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a>, <a class="code" href="../../d5/dff/chan__iax2_8c.html#ae91dad65f553f7afebe4af507803bc7f">cos</a>,</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;         strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/dff/chan__iax2_8c.html#ae91dad65f553f7afebe4af507803bc7f">cos</a>) {</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;Using %s CoS mark %d\n&quot;</span>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a>, <a class="code" href="../../d5/dff/chan__iax2_8c.html#ae91dad65f553f7afebe4af507803bc7f">cos</a>);</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;   }</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;}</div><div class="ttc" id="chan__iax2_8c_html_ae91dad65f553f7afebe4af507803bc7f"><div class="ttname"><a href="../../d5/dff/chan__iax2_8c.html#ae91dad65f553f7afebe4af507803bc7f">cos</a></div><div class="ttdeci">unsigned int cos</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dff/chan__iax2_8c_source.html#l00352">chan_iax2.c:352</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a787f82faccb7c1f40a2539a14855601b"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a></div><div class="ttdeci">static const char desc[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00073">cdr_mysql.c:73</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="chan__iax2_8c_html_a25a9305efab3b493ca2519562fcec3d5"><div class="ttname"><a href="../../d5/dff/chan__iax2_8c.html#a25a9305efab3b493ca2519562fcec3d5">tos</a></div><div class="ttdeci">unsigned int tos</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dff/chan__iax2_8c_source.html#l00351">chan_iax2.c:351</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="netsock2_8c_html_a13c172d0480d5cfa48bfef5d38cb5091"><div class="ttname"><a href="../../d4/d27/netsock2_8c.html#a13c172d0480d5cfa48bfef5d38cb5091">ast_getsockname</a></div><div class="ttdeci">int ast_getsockname(int sockfd, struct ast_sockaddr *addr)</div><div class="ttdoc">Wrapper around getsockname(2) that uses struct ast_sockaddr. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00600">netsock2.c:600</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="netsock2_8c_html_a7704d67f19f3ca91198d8cc6e6445c3f"><div class="ttname"><a href="../../d4/d27/netsock2_8c.html#a7704d67f19f3ca91198d8cc6e6445c3f">ast_sockaddr_is_any</a></div><div class="ttdeci">int ast_sockaddr_is_any(const struct ast_sockaddr *addr)</div><div class="ttdoc">Determine if the address type is unspecified, or &quot;any&quot; address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00534">netsock2.c:534</a></div></div>
<div class="ttc" id="netsock2_8c_html_a579748bd6ceddd06b1cc6eb3578e8acc"><div class="ttname"><a href="../../d4/d27/netsock2_8c.html#a579748bd6ceddd06b1cc6eb3578e8acc">ast_sockaddr_is_ipv6</a></div><div class="ttdeci">int ast_sockaddr_is_ipv6(const struct ast_sockaddr *addr)</div><div class="ttdoc">Determine if this is an IPv6 address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00524">netsock2.c:524</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5d6080466e41d97c3b02c043b19039ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d6080466e41d97c3b02c043b19039ab">&#9670;&nbsp;</a></span>ast_sockaddr_apply_netmask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sockaddr_apply_netmask </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>netmask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Apply a netmask to an address and store the result in a separate structure. </p>
<p>When dealing with IPv6 addresses, one cannot apply a netmask with a simple logical AND operation. Futhermore, the incoming address may be an IPv4 address and needs to be mapped properly before attempting to apply a rule.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>The IP address to apply the mask to. </td></tr>
    <tr><td class="paramname">netmask</td><td>The netmask configured in the host access rule. </td></tr>
    <tr><td class="paramname">result</td><td>The resultant address after applying the netmask to the given address </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Successfully applied netmask </td></tr>
    <tr><td class="paramname">-1</td><td>Failed to apply netmask </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00357">357</a> of file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/df1/netsock2_8h_source.html#l00782">ast_sockaddr_from_sin</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00497">ast_sockaddr_is_ipv4()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00524">ast_sockaddr_is_ipv6()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00099">ast_sockaddr::len</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00098">ast_sockaddr::ss</a>, and <a class="el" href="../../db/df1/netsock2_8h_source.html#l00077">V6_WORD</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l02475">addr_range_match_address_cb()</a>, <a class="el" href="../../d9/db8/acl_8c_source.html#l00576">append_ha_core()</a>, <a class="el" href="../../d9/db8/acl_8c_source.html#l00808">ast_apply_ha()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00362">ast_sockaddr_stringify_port()</a>, and <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l08411">authenticate_reply()</a>.</p>
<div class="fragment"><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;{</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d27/netsock2_8c.html#adbbb5a3382be0925c292a4933ce5b63d">ast_sockaddr_is_ipv4</a>(addr)) {</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      <span class="keyword">struct </span>sockaddr_in result4 = { 0, };</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      <span class="keyword">struct </span>sockaddr_in *addr4 = (<span class="keyword">struct </span>sockaddr_in *) &amp;addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      <span class="keyword">struct</span> sockaddr_in *mask4 = (<span class="keyword">struct</span> sockaddr_in *) &amp;netmask-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      result4.sin_family = AF_INET;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      result4.sin_addr.s_addr = addr4-&gt;sin_addr.s_addr &amp; mask4-&gt;sin_addr.s_addr;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <a class="code" href="../../db/df1/netsock2_8h.html#ad68264a6784dc22570eda3cb447307f8">ast_sockaddr_from_sin</a>(result, &amp;result4);</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/d27/netsock2_8c.html#a579748bd6ceddd06b1cc6eb3578e8acc">ast_sockaddr_is_ipv6</a>(addr)) {</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      <span class="keyword">struct </span>sockaddr_in6 result6 = { 0, };</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <span class="keyword">struct </span>sockaddr_in6 *addr6 = (<span class="keyword">struct </span>sockaddr_in6 *) &amp;addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      <span class="keyword">struct</span> sockaddr_in6 *mask6 = (<span class="keyword">struct</span> sockaddr_in6 *) &amp;netmask-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      result6.sin6_family = AF_INET6;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; 4; ++i) {</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;         <a class="code" href="../../db/df1/netsock2_8h.html#a852cefdb97546e12263c5b1a01b570ff">V6_WORD</a>(&amp;result6, i) = <a class="code" href="../../db/df1/netsock2_8h.html#a852cefdb97546e12263c5b1a01b570ff">V6_WORD</a>(addr6, i) &amp; <a class="code" href="../../db/df1/netsock2_8h.html#a852cefdb97546e12263c5b1a01b570ff">V6_WORD</a>(mask6, i);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      }</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      memcpy(&amp;result-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>, &amp;result6, <span class="keyword">sizeof</span>(result6));</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      result-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">len</a> = <span class="keyword">sizeof</span>(result6);</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      <span class="comment">/* Unsupported address scheme */</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;      res = -1;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;   }</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;}</div><div class="ttc" id="structast__sockaddr_html_aceb44bfc6a3800d7f419367afb25fe79"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ast_sockaddr::ss</a></div><div class="ttdeci">struct sockaddr_storage ss</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00098">netsock2.h:98</a></div></div>
<div class="ttc" id="structast__sockaddr_html_ad04e8181049f819e1df2c7cac72a53ce"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">ast_sockaddr::len</a></div><div class="ttdeci">socklen_t len</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00099">netsock2.h:99</a></div></div>
<div class="ttc" id="netsock2_8h_html_ad68264a6784dc22570eda3cb447307f8"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ad68264a6784dc22570eda3cb447307f8">ast_sockaddr_from_sin</a></div><div class="ttdeci">#define ast_sockaddr_from_sin(addr, sin)</div><div class="ttdoc">Converts a struct sockaddr_in to a struct ast_sockaddr. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00782">netsock2.h:782</a></div></div>
<div class="ttc" id="netsock2_8c_html_adbbb5a3382be0925c292a4933ce5b63d"><div class="ttname"><a href="../../d4/d27/netsock2_8c.html#adbbb5a3382be0925c292a4933ce5b63d">ast_sockaddr_is_ipv4</a></div><div class="ttdeci">int ast_sockaddr_is_ipv4(const struct ast_sockaddr *addr)</div><div class="ttdoc">Determine if the address is an IPv4 address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00497">netsock2.c:497</a></div></div>
<div class="ttc" id="netsock2_8c_html_a579748bd6ceddd06b1cc6eb3578e8acc"><div class="ttname"><a href="../../d4/d27/netsock2_8c.html#a579748bd6ceddd06b1cc6eb3578e8acc">ast_sockaddr_is_ipv6</a></div><div class="ttdeci">int ast_sockaddr_is_ipv6(const struct ast_sockaddr *addr)</div><div class="ttdoc">Determine if this is an IPv6 address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00524">netsock2.c:524</a></div></div>
<div class="ttc" id="netsock2_8h_html_a852cefdb97546e12263c5b1a01b570ff"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a852cefdb97546e12263c5b1a01b570ff">V6_WORD</a></div><div class="ttdeci">#define V6_WORD(sin6, index)</div><div class="ttdoc">Isolate a 32-bit section of an IPv6 address. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00077">netsock2.h:77</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a32aa436e84f750f70e27f326e2515666"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32aa436e84f750f70e27f326e2515666">&#9670;&nbsp;</a></span>ast_sockaddr_cidr_bits()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sockaddr_cidr_bits </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>sa</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Count the 1 bits in a netmask. </p>
<dl class="section since"><dt>Since</dt><dd>12.4</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>number of 1 bits </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00130">130</a> of file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00037">ast_sockaddr_ipv4_mapped()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00099">ast_sockaddr::len</a>, and <a class="el" href="../../db/df1/netsock2_8h_source.html#l00098">ast_sockaddr::ss</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/db8/acl_8c_source.html#l00745">ast_ha_join_cidr()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00290">ast_sockaddr_stringify_addr()</a>, and <a class="el" href="../../df/d91/res__pjsip__endpoint__identifier__ip_8c_source.html#l00754">cli_print_body()</a>.</p>
<div class="fragment"><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;{</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> sa_ipv4;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *sa_tmp;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;   <span class="keywordtype">int</span> bits = 0;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;   <span class="keywordtype">int</span> bytes;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;   <span class="keywordtype">int</span> j;</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;   <span class="keywordtype">char</span> *addr;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(sa)) {</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;   }</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d27/netsock2_8c.html#a42e610962ef06c151aad8260af428e3d">ast_sockaddr_ipv4_mapped</a>(sa, &amp;sa_ipv4)) {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      sa_tmp = &amp;sa_ipv4;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;      sa_tmp = sa;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;   }</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;   bytes = sa_tmp-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">len</a>;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;   addr = ((<span class="keyword">struct </span>sockaddr *)&amp;sa_tmp-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>)-&gt;sa_data;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; bytes ; ++i) {</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <span class="keywordflow">for</span> (j = 0; j &lt; 8; ++j) {</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;         <span class="keywordflow">if</span> ((addr[i] &gt;&gt; j) &amp; 1) {</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            bits++;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;         }</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      }</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;   }</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;   <span class="keywordflow">return</span> bits;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;}</div><div class="ttc" id="structast__sockaddr_html_aceb44bfc6a3800d7f419367afb25fe79"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ast_sockaddr::ss</a></div><div class="ttdeci">struct sockaddr_storage ss</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00098">netsock2.h:98</a></div></div>
<div class="ttc" id="structast__sockaddr_html_ad04e8181049f819e1df2c7cac72a53ce"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">ast_sockaddr::len</a></div><div class="ttdeci">socklen_t len</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00099">netsock2.h:99</a></div></div>
<div class="ttc" id="netsock2_8c_html_a42e610962ef06c151aad8260af428e3d"><div class="ttname"><a href="../../d4/d27/netsock2_8c.html#a42e610962ef06c151aad8260af428e3d">ast_sockaddr_ipv4_mapped</a></div><div class="ttdeci">int ast_sockaddr_ipv4_mapped(const struct ast_sockaddr *addr, struct ast_sockaddr *ast_mapped)</div><div class="ttdoc">Convert an IPv4-mapped IPv6 address into an IPv4 address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00037">netsock2.c:37</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abae1b903c8f5b7639235b579a267aaab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abae1b903c8f5b7639235b579a267aaab">&#9670;&nbsp;</a></span>ast_sockaddr_cmp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sockaddr_cmp </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compares two <a class="el" href="../../d3/db3/structast__sockaddr.html" title="Socket address structure. ">ast_sockaddr</a> structures. </p>
<dl class="section since"><dt>Since</dt><dd>1.8</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td><em>a</em> is lexicographically smaller than <em>b</em> </td></tr>
    <tr><td class="paramname">0</td><td><em>a</em> is equal to <em>b</em> </td></tr>
    <tr><td class="paramname">1</td><td><em>b</em> is lexicographically smaller than <em>a</em> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00388">388</a> of file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00046">a</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00037">ast_sockaddr_ipv4_mapped()</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00047">b</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00099">ast_sockaddr::len</a>, and <a class="el" href="../../db/df1/netsock2_8h_source.html#l00098">ast_sockaddr::ss</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03084">__rtp_recvfrom()</a>, <a class="el" href="../../de/d79/netsock_8c_source.html#l00094">ast_netsock_find()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06100">ast_rtcp_interpret()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00629">ast_rtp_instance_get_and_cmp_local_address()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l00651">ast_rtp_instance_get_and_cmp_requested_target_address()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08497">ast_rtp_remote_address_set()</a>, <a class="el" href="../../df/d0a/io_8c_source.html#l00392">ast_sd_notify()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00171">ast_sockaddr_copy()</a>, <a class="el" href="../../dc/d9b/tcptls_8c_source.html#l00615">ast_tcptls_client_create()</a>, <a class="el" href="../../dc/d9b/tcptls_8c_source.html#l00685">ast_tcptls_server_start()</a>, <a class="el" href="../../d8/d4f/test__config_8c_source.html#l01482">AST_TEST_DEFINE()</a>, <a class="el" href="../../d2/dce/udptl_8c_source.html#l00762">ast_udptl_read()</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00204">dnsmgr_refresh()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l06246">find_tpeer()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00412">find_transaction()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01586">handle_command_response()</a>, <a class="el" href="../../d3/d17/config__transport_8c_source.html#l00580">has_state_changed()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l08716">iax2_ack_registry()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l02045">iax2_getpeername()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l05807">iax2_getpeertrunk()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00806">ice_candidate_cmp()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l02315">match()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l16961">parse_register_contact()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l05509">realtime_peer_by_name()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l09228">registry_rerequest()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l32514">reload_config()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02762">rtcp_debug_test_addr()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03522">rtp_add_candidates_to_ice()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02746">rtp_debug_test_addr()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07583">should_drop_packets()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l03610">sip_debug_test_addr()</a>, <a class="el" href="../../d5/d85/reqresp__parser_8c_source.html#l02115">sip_uri_domain_cmp()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l10083">socket_process_helper()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l29523">threadinfo_locate_cb()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l16106">transmit_register()</a>, <a class="el" href="../../d2/dce/udptl_8c_source.html#l00258">udptl_debug_test_addr()</a>, and <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l09002">update_registry()</a>.</p>
<div class="fragment"><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;{</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *a_tmp, *b_tmp;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> ipv4_mapped;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;   a_tmp = <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;   b_tmp = <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;   <span class="keywordflow">if</span> (a_tmp-&gt;len != b_tmp-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">len</a>) {</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d4/d27/netsock2_8c.html#a42e610962ef06c151aad8260af428e3d">ast_sockaddr_ipv4_mapped</a>(a, &amp;ipv4_mapped)) {</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;         a_tmp = &amp;ipv4_mapped;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/d27/netsock2_8c.html#a42e610962ef06c151aad8260af428e3d">ast_sockaddr_ipv4_mapped</a>(b, &amp;ipv4_mapped)) {</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;         b_tmp = &amp;ipv4_mapped;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      }</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;   }</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;   <span class="keywordflow">if</span> (a_tmp-&gt;len &lt; b_tmp-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">len</a>) {</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a_tmp-&gt;len &gt; b_tmp-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">len</a>) {</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;   }</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;   <span class="keywordflow">return</span> memcmp(&amp;a_tmp-&gt;ss, &amp;b_tmp-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>, a_tmp-&gt;len);</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;}</div><div class="ttc" id="structast__sockaddr_html_aceb44bfc6a3800d7f419367afb25fe79"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ast_sockaddr::ss</a></div><div class="ttdeci">struct sockaddr_storage ss</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00098">netsock2.h:98</a></div></div>
<div class="ttc" id="structast__sockaddr_html_ad04e8181049f819e1df2c7cac72a53ce"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">ast_sockaddr::len</a></div><div class="ttdeci">socklen_t len</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00099">netsock2.h:99</a></div></div>
<div class="ttc" id="netsock2_8c_html_a42e610962ef06c151aad8260af428e3d"><div class="ttname"><a href="../../d4/d27/netsock2_8c.html#a42e610962ef06c151aad8260af428e3d">ast_sockaddr_ipv4_mapped</a></div><div class="ttdeci">int ast_sockaddr_ipv4_mapped(const struct ast_sockaddr *addr, struct ast_sockaddr *ast_mapped)</div><div class="ttdoc">Convert an IPv4-mapped IPv6 address into an IPv4 address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00037">netsock2.c:37</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a025ede890af287961d3a98d0e634a62b"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a></div><div class="ttdeci">static struct test_val b</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00047">test_linkedlists.c:47</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a13dd15487fee89a002d17ef3aff62d02"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a></div><div class="ttdeci">static struct test_val a</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00046">test_linkedlists.c:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5fb3221004de6004d4c1f04c816eaac8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fb3221004de6004d4c1f04c816eaac8">&#9670;&nbsp;</a></span>ast_sockaddr_cmp_addr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sockaddr_cmp_addr </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compares the addresses of two <a class="el" href="../../d3/db3/structast__sockaddr.html" title="Socket address structure. ">ast_sockaddr</a> structures. </p>
<dl class="section since"><dt>Since</dt><dd>1.8</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td><em>a</em> is lexicographically smaller than <em>b</em> </td></tr>
    <tr><td class="paramname">0</td><td><em>a</em> is equal to <em>b</em> </td></tr>
    <tr><td class="paramname">1</td><td><em>b</em> is lexicographically smaller than <em>a</em> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00413">413</a> of file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00046">a</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00037">ast_sockaddr_ipv4_mapped()</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00047">b</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00099">ast_sockaddr::len</a>, and <a class="el" href="../../db/df1/netsock2_8h_source.html#l00098">ast_sockaddr::ss</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l13542">add_sdp()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l02451">addr_range_cmp_cb()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l02475">addr_range_match_address_cb()</a>, <a class="el" href="../../d9/db8/acl_8c_source.html#l00808">ast_apply_ha()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00171">ast_sockaddr_copy()</a>, <a class="el" href="../../de/d4a/test__netsock2_8c_source.html#l00044">AST_TEST_DEFINE()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l08411">authenticate_reply()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l19134">check_for_nat()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l13410">get_our_media_address()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l01179">iax_outputframe()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l34543">peer_ipcmp_cb_full()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l02469">peercnt_cmp_cb()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l04359">realtime_peer()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l04491">realtime_user()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l32514">reload_config()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02762">rtcp_debug_test_addr()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03522">rtp_add_candidates_to_ice()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l02746">rtp_debug_test_addr()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07583">should_drop_packets()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l03610">sip_debug_test_addr()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l09773">socket_read()</a>, and <a class="el" href="../../d2/dce/udptl_8c_source.html#l00258">udptl_debug_test_addr()</a>.</p>
<div class="fragment"><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;{</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *a_tmp, *b_tmp;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> ipv4_mapped;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span>in_addr *ip4a, *ip4b;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span>in6_addr *ip6a, *ip6b;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;   <span class="keywordtype">int</span> ret = -1;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;   a_tmp = <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;   b_tmp = <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;   <span class="keywordflow">if</span> (a_tmp-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">len</a> != b_tmp-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">len</a>) {</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d4/d27/netsock2_8c.html#a42e610962ef06c151aad8260af428e3d">ast_sockaddr_ipv4_mapped</a>(a, &amp;ipv4_mapped)) {</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;         a_tmp = &amp;ipv4_mapped;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d4/d27/netsock2_8c.html#a42e610962ef06c151aad8260af428e3d">ast_sockaddr_ipv4_mapped</a>(b, &amp;ipv4_mapped)) {</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;         b_tmp = &amp;ipv4_mapped;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;      }</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;   }</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">len</a> &lt; b-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">len</a>) {</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      ret = -1;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">len</a> &gt; b-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">len</a>) {</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      ret = 1;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;   }</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;   <span class="keywordflow">switch</span> (a_tmp-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>.ss_family) {</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;   <span class="keywordflow">case</span> AF_INET:</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      ip4a = &amp;((<span class="keyword">const</span> <span class="keyword">struct </span>sockaddr_in*)&amp;a_tmp-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>)-&gt;sin_addr;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      ip4b = &amp;((<span class="keyword">const</span> <span class="keyword">struct </span>sockaddr_in*)&amp;b_tmp-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>)-&gt;sin_addr;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      ret = memcmp(ip4a, ip4b, <span class="keyword">sizeof</span>(*ip4a));</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;   <span class="keywordflow">case</span> AF_INET6:</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      ip6a = &amp;((<span class="keyword">const</span> <span class="keyword">struct </span>sockaddr_in6*)&amp;a_tmp-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>)-&gt;sin6_addr;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      ip6b = &amp;((<span class="keyword">const</span> <span class="keyword">struct </span>sockaddr_in6*)&amp;b_tmp-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>)-&gt;sin6_addr;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      ret = memcmp(ip6a, ip6b, <span class="keyword">sizeof</span>(*ip6a));</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;   }</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;}</div><div class="ttc" id="structast__sockaddr_html_aceb44bfc6a3800d7f419367afb25fe79"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ast_sockaddr::ss</a></div><div class="ttdeci">struct sockaddr_storage ss</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00098">netsock2.h:98</a></div></div>
<div class="ttc" id="structast__sockaddr_html_ad04e8181049f819e1df2c7cac72a53ce"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">ast_sockaddr::len</a></div><div class="ttdeci">socklen_t len</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00099">netsock2.h:99</a></div></div>
<div class="ttc" id="netsock2_8c_html_a42e610962ef06c151aad8260af428e3d"><div class="ttname"><a href="../../d4/d27/netsock2_8c.html#a42e610962ef06c151aad8260af428e3d">ast_sockaddr_ipv4_mapped</a></div><div class="ttdeci">int ast_sockaddr_ipv4_mapped(const struct ast_sockaddr *addr, struct ast_sockaddr *ast_mapped)</div><div class="ttdoc">Convert an IPv4-mapped IPv6 address into an IPv4 address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00037">netsock2.c:37</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a025ede890af287961d3a98d0e634a62b"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a></div><div class="ttdeci">static struct test_val b</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00047">test_linkedlists.c:47</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a13dd15487fee89a002d17ef3aff62d02"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a></div><div class="ttdeci">static struct test_val a</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00046">test_linkedlists.c:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aff38b13b74ac4fa58cbac36e6bdaf111"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff38b13b74ac4fa58cbac36e6bdaf111">&#9670;&nbsp;</a></span>ast_sockaddr_hash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sockaddr_hash </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Computes a hash value from the address. The port is ignored. </p>
<dl class="section since"><dt>Since</dt><dd>1.8</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Unknown address family </td></tr>
    <tr><td class="paramname">other</td><td>A 32-bit hash derived from the address </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00548">548</a> of file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, and <a class="el" href="../../db/df1/netsock2_8h_source.html#l00098">ast_sockaddr::ss</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l02445">addr_range_hash_cb()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l34510">peer_iphash_cb()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l02459">peercnt_hash_cb()</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l34606">threadt_hash_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;{</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment">    * For IPv4, return the IP address as-is. For IPv6, return the last 32</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment">    * bits.</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;   <span class="keywordflow">switch</span> (addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>.ss_family) {</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;   <span class="keywordflow">case</span> AF_INET:</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      <span class="keywordflow">return</span> ((<span class="keyword">const</span> <span class="keyword">struct</span> sockaddr_in *)&amp;addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>)-&gt;sin_addr.s_addr;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;   <span class="keywordflow">case</span> AF_INET6:</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      <span class="keywordflow">return</span> ((uint32_t *)&amp;((<span class="keyword">const</span> <span class="keyword">struct</span> sockaddr_in6 *)&amp;addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>)-&gt;sin6_addr)[3];</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unknown address family &#39;%d&#39;.\n&quot;</span>,</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;         addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>.ss_family);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;   }</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;}</div><div class="ttc" id="structast__sockaddr_html_aceb44bfc6a3800d7f419367afb25fe79"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ast_sockaddr::ss</a></div><div class="ttdeci">struct sockaddr_storage ss</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00098">netsock2.h:98</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5cf5eccca6dd710689d29f8ecc3c362d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cf5eccca6dd710689d29f8ecc3c362d">&#9670;&nbsp;</a></span>ast_sockaddr_ipv4()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t ast_sockaddr_ipv4 </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get an IPv4 address of an <a class="el" href="../../d3/db3/structast__sockaddr.html" title="Socket address structure. ">ast_sockaddr</a>. </p>
<dl class="section since"><dt>Since</dt><dd>1.8</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>You should rarely need this function. Only use if you know what you're doing. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>IPv4 address in network byte order </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00491">491</a> of file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/df1/netsock2_8h_source.html#l00098">ast_sockaddr::ss</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00513">ast_sockaddr_is_ipv4_multicast()</a>, and <a class="el" href="../../d4/d6e/res__rtp__multicast_8c_source.html#l00348">multicast_send_control_packet()</a>.</p>
<div class="fragment"><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;{</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span>sockaddr_in *sin = (<span class="keyword">struct </span>sockaddr_in *)&amp;addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;   <span class="keywordflow">return</span> ntohl(sin-&gt;sin_addr.s_addr);</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;}</div><div class="ttc" id="structast__sockaddr_html_aceb44bfc6a3800d7f419367afb25fe79"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ast_sockaddr::ss</a></div><div class="ttdeci">struct sockaddr_storage ss</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00098">netsock2.h:98</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a42e610962ef06c151aad8260af428e3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42e610962ef06c151aad8260af428e3d">&#9670;&nbsp;</a></span>ast_sockaddr_ipv4_mapped()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sockaddr_ipv4_mapped </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>ast_mapped</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert an IPv4-mapped IPv6 address into an IPv4 address. </p>
<dl class="section warning"><dt>Warning</dt><dd>You should rarely need this function. Only call this if you know what you're doing.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>The IPv4-mapped address to convert </td></tr>
    <tr><td class="paramname">ast_mapped</td><td>The resulting IPv4 address </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Unable to make the conversion </td></tr>
    <tr><td class="paramname">1</td><td>Successful conversion </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00037">37</a> of file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/df1/netsock2_8h_source.html#l00782">ast_sockaddr_from_sin</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00507">ast_sockaddr_is_ipv4_mapped()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00524">ast_sockaddr_is_ipv6()</a>, and <a class="el" href="../../db/df1/netsock2_8h_source.html#l00098">ast_sockaddr::ss</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/db8/acl_8c_source.html#l00576">append_ha_core()</a>, <a class="el" href="../../d9/db8/acl_8c_source.html#l00808">ast_apply_ha()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06590">ast_rtcp_read()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00130">ast_sockaddr_cidr_bits()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00388">ast_sockaddr_cmp()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00413">ast_sockaddr_cmp_addr()</a>, and <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00065">ast_sockaddr_stringify_fmt()</a>.</p>
<div class="fragment"><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;{</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span>sockaddr_in6 *sin6;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;   <span class="keyword">struct </span>sockaddr_in sin4;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d27/netsock2_8c.html#a579748bd6ceddd06b1cc6eb3578e8acc">ast_sockaddr_is_ipv6</a>(addr)) {</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;   }</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d27/netsock2_8c.html#af2625d0652cf8a306d99072aedd7c6ad">ast_sockaddr_is_ipv4_mapped</a>(addr)) {</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;   }</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;   sin6 = (<span class="keyword">const</span> <span class="keyword">struct </span>sockaddr_in6*)&amp;addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;   memset(&amp;sin4, 0, <span class="keyword">sizeof</span>(sin4));</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;   sin4.sin_family = AF_INET;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;   sin4.sin_port = sin6-&gt;sin6_port;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;   sin4.sin_addr.s_addr = ((uint32_t *)&amp;sin6-&gt;sin6_addr)[3];</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#ad68264a6784dc22570eda3cb447307f8">ast_sockaddr_from_sin</a>(ast_mapped, &amp;sin4);</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;}</div><div class="ttc" id="structast__sockaddr_html_aceb44bfc6a3800d7f419367afb25fe79"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ast_sockaddr::ss</a></div><div class="ttdeci">struct sockaddr_storage ss</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00098">netsock2.h:98</a></div></div>
<div class="ttc" id="netsock2_8c_html_af2625d0652cf8a306d99072aedd7c6ad"><div class="ttname"><a href="../../d4/d27/netsock2_8c.html#af2625d0652cf8a306d99072aedd7c6ad">ast_sockaddr_is_ipv4_mapped</a></div><div class="ttdeci">int ast_sockaddr_is_ipv4_mapped(const struct ast_sockaddr *addr)</div><div class="ttdoc">Determine if this is an IPv4-mapped IPv6 address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00507">netsock2.c:507</a></div></div>
<div class="ttc" id="netsock2_8h_html_ad68264a6784dc22570eda3cb447307f8"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ad68264a6784dc22570eda3cb447307f8">ast_sockaddr_from_sin</a></div><div class="ttdeci">#define ast_sockaddr_from_sin(addr, sin)</div><div class="ttdoc">Converts a struct sockaddr_in to a struct ast_sockaddr. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00782">netsock2.h:782</a></div></div>
<div class="ttc" id="netsock2_8c_html_a579748bd6ceddd06b1cc6eb3578e8acc"><div class="ttname"><a href="../../d4/d27/netsock2_8c.html#a579748bd6ceddd06b1cc6eb3578e8acc">ast_sockaddr_is_ipv6</a></div><div class="ttdeci">int ast_sockaddr_is_ipv6(const struct ast_sockaddr *addr)</div><div class="ttdoc">Determine if this is an IPv6 address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00524">netsock2.c:524</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7704d67f19f3ca91198d8cc6e6445c3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7704d67f19f3ca91198d8cc6e6445c3f">&#9670;&nbsp;</a></span>ast_sockaddr_is_any()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sockaddr_is_any </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine if the address type is unspecified, or "any" address. </p>
<dl class="section since"><dt>Since</dt><dd>1.8</dd></dl>
<p>For IPv4, this would be the address 0.0.0.0, and for IPv6, this would be the address ::. The port number is ignored.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>This is an "any" address </td></tr>
    <tr><td class="paramname">0</td><td>This is not an "any" address </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00534">534</a> of file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00497">ast_sockaddr_is_ipv4()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00524">ast_sockaddr_is_ipv6()</a>, and <a class="el" href="../../db/df1/netsock2_8h_source.html#l00098">ast_sockaddr::ss</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/db8/acl_8c_source.html#l01052">ast_find_ourip()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00621">ast_set_qos()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l03866">ast_sip_ouraddrfor()</a>, <a class="el" href="../../dc/d9b/tcptls_8c_source.html#l00615">ast_tcptls_client_create()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l29558">get_address_family_filter()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l13410">get_our_media_address()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01462">negotiate_incoming_sdp_stream()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l32514">reload_config()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03522">rtp_add_candidates_to_ice()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l21842">sip_show_settings()</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l10177">sockaddr_is_null_or_any()</a>.</p>
<div class="fragment"><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;{</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;   <span class="keyword">union </span>{</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      <span class="keyword">struct </span>sockaddr_storage ss;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      <span class="keyword">struct </span>sockaddr_in sin;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      <span class="keyword">struct </span>sockaddr_in6 sin6;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;   } tmp_addr = {</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      .ss = addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>,</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;   };</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;   <span class="keywordflow">return</span> (<a class="code" href="../../d4/d27/netsock2_8c.html#adbbb5a3382be0925c292a4933ce5b63d">ast_sockaddr_is_ipv4</a>(addr) &amp;&amp; (tmp_addr.sin.sin_addr.s_addr == INADDR_ANY)) ||</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;       (<a class="code" href="../../d4/d27/netsock2_8c.html#a579748bd6ceddd06b1cc6eb3578e8acc">ast_sockaddr_is_ipv6</a>(addr) &amp;&amp; IN6_IS_ADDR_UNSPECIFIED(&amp;tmp_addr.sin6.sin6_addr));</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;}</div><div class="ttc" id="structast__sockaddr_html_aceb44bfc6a3800d7f419367afb25fe79"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ast_sockaddr::ss</a></div><div class="ttdeci">struct sockaddr_storage ss</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00098">netsock2.h:98</a></div></div>
<div class="ttc" id="netsock2_8c_html_adbbb5a3382be0925c292a4933ce5b63d"><div class="ttname"><a href="../../d4/d27/netsock2_8c.html#adbbb5a3382be0925c292a4933ce5b63d">ast_sockaddr_is_ipv4</a></div><div class="ttdeci">int ast_sockaddr_is_ipv4(const struct ast_sockaddr *addr)</div><div class="ttdoc">Determine if the address is an IPv4 address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00497">netsock2.c:497</a></div></div>
<div class="ttc" id="netsock2_8c_html_a579748bd6ceddd06b1cc6eb3578e8acc"><div class="ttname"><a href="../../d4/d27/netsock2_8c.html#a579748bd6ceddd06b1cc6eb3578e8acc">ast_sockaddr_is_ipv6</a></div><div class="ttdeci">int ast_sockaddr_is_ipv6(const struct ast_sockaddr *addr)</div><div class="ttdoc">Determine if this is an IPv6 address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00524">netsock2.c:524</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adbbb5a3382be0925c292a4933ce5b63d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbbb5a3382be0925c292a4933ce5b63d">&#9670;&nbsp;</a></span>ast_sockaddr_is_ipv4()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sockaddr_is_ipv4 </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine if the address is an IPv4 address. </p>
<dl class="section since"><dt>Since</dt><dd>1.8</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>You should rarely need this function. Only use if you know what you're doing. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>This is an IPv4 address </td></tr>
    <tr><td class="paramname">0</td><td>This is an IPv6 or IPv4-mapped IPv6 address </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00497">497</a> of file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/df1/netsock2_8h_source.html#l00099">ast_sockaddr::len</a>, and <a class="el" href="../../db/df1/netsock2_8h_source.html#l00098">ast_sockaddr::ss</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/db8/acl_8c_source.html#l00576">append_ha_core()</a>, <a class="el" href="../../d9/db8/acl_8c_source.html#l00808">ast_apply_ha()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00661">ast_json_ipaddr()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l06590">ast_rtcp_read()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01577">ast_rtp_ice_turn_request()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08303">ast_rtp_prop_set()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07638">ast_rtp_read()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00357">ast_sockaddr_apply_netmask()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00534">ast_sockaddr_is_any()</a>, <a class="el" href="../../d2/d72/parser_8c_source.html#l00090">dump_addr()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03169">dundi_xmit()</a>, <a class="el" href="../../db/d43/res__hep_8c_source.html#l00452">hep_queue_cb()</a>, <a class="el" href="../../de/da4/chan__motif_8c_source.html#l02120">jingle_interpret_ice_udp_transport()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l05169">load_module()</a>, <a class="el" href="../../dc/d80/res__pjsip__t38_8c_source.html#l00818">negotiate_incoming_sdp_stream()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03522">rtp_add_candidates_to_ice()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03828">rtp_allocate_transport()</a>.</p>
<div class="fragment"><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;{</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment">    * Test addr-&gt;len first to be tolerant of an ast_sockaddr_setnull()</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment">    * addr.  In that case addr-&gt;len might be the only value initialized.</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;   <span class="keywordflow">return</span> addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">len</a> == <span class="keyword">sizeof</span>(<span class="keyword">struct </span>sockaddr_in)</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      &amp;&amp; addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>.ss_family == AF_INET;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;}</div><div class="ttc" id="structast__sockaddr_html_aceb44bfc6a3800d7f419367afb25fe79"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ast_sockaddr::ss</a></div><div class="ttdeci">struct sockaddr_storage ss</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00098">netsock2.h:98</a></div></div>
<div class="ttc" id="structast__sockaddr_html_ad04e8181049f819e1df2c7cac72a53ce"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">ast_sockaddr::len</a></div><div class="ttdeci">socklen_t len</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00099">netsock2.h:99</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af2625d0652cf8a306d99072aedd7c6ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2625d0652cf8a306d99072aedd7c6ad">&#9670;&nbsp;</a></span>ast_sockaddr_is_ipv4_mapped()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sockaddr_is_ipv4_mapped </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine if this is an IPv4-mapped IPv6 address. </p>
<dl class="section since"><dt>Since</dt><dd>1.8</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>You should rarely need this function. Only use if you know what you're doing.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>This is an IPv4-mapped IPv6 address. </td></tr>
    <tr><td class="paramname">0</td><td>This is not an IPv4-mapped IPv6 address. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00507">507</a> of file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/df1/netsock2_8h_source.html#l00099">ast_sockaddr::len</a>, and <a class="el" href="../../db/df1/netsock2_8h_source.html#l00098">ast_sockaddr::ss</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l13542">add_sdp()</a>, <a class="el" href="../../d9/db8/acl_8c_source.html#l00808">ast_apply_ha()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00661">ast_json_ipaddr()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l03866">ast_sip_ouraddrfor()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00037">ast_sockaddr_ipv4_mapped()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l12794">build_peer()</a>, and <a class="el" href="../../d2/d72/parser_8c_source.html#l00090">dump_addr()</a>.</p>
<div class="fragment"><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;{</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span>sockaddr_in6 *sin6 = (<span class="keyword">struct </span>sockaddr_in6 *)&amp;addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;   <span class="keywordflow">return</span> addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">len</a> &amp;&amp; IN6_IS_ADDR_V4MAPPED(&amp;sin6-&gt;sin6_addr);</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;}</div><div class="ttc" id="structast__sockaddr_html_aceb44bfc6a3800d7f419367afb25fe79"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ast_sockaddr::ss</a></div><div class="ttdeci">struct sockaddr_storage ss</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00098">netsock2.h:98</a></div></div>
<div class="ttc" id="structast__sockaddr_html_ad04e8181049f819e1df2c7cac72a53ce"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">ast_sockaddr::len</a></div><div class="ttdeci">socklen_t len</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00099">netsock2.h:99</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeeb6eeb492def0d5aa95602b74808b85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeeb6eeb492def0d5aa95602b74808b85">&#9670;&nbsp;</a></span>ast_sockaddr_is_ipv4_multicast()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sockaddr_is_ipv4_multicast </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine if an IPv4 address is a multicast address. </p>
<dl class="section since"><dt>Since</dt><dd>10.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>the address to check</td></tr>
  </table>
  </dd>
</dl>
<p>This function checks if an address is in the 224.0.0.0/4 network block.</p>
<dl class="section return"><dt>Returns</dt><dd>non-zero if this is a multicast address </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00513">513</a> of file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00491">ast_sockaddr_ipv4()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l09117">process_via()</a>.</p>
<div class="fragment"><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;{</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;   <span class="keywordflow">return</span> ((<a class="code" href="../../d4/d27/netsock2_8c.html#a5cf5eccca6dd710689d29f8ecc3c362d">ast_sockaddr_ipv4</a>(addr) &amp; 0xf0000000) == 0xe0000000);</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;}</div><div class="ttc" id="netsock2_8c_html_a5cf5eccca6dd710689d29f8ecc3c362d"><div class="ttname"><a href="../../d4/d27/netsock2_8c.html#a5cf5eccca6dd710689d29f8ecc3c362d">ast_sockaddr_ipv4</a></div><div class="ttdeci">uint32_t ast_sockaddr_ipv4(const struct ast_sockaddr *addr)</div><div class="ttdoc">Get an IPv4 address of an ast_sockaddr. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00491">netsock2.c:491</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a579748bd6ceddd06b1cc6eb3578e8acc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a579748bd6ceddd06b1cc6eb3578e8acc">&#9670;&nbsp;</a></span>ast_sockaddr_is_ipv6()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sockaddr_is_ipv6 </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine if this is an IPv6 address. </p>
<dl class="section since"><dt>Since</dt><dd>1.8</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>You should rarely need this function. Only use if you know what you're doing.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>This is an IPv6 or IPv4-mapped IPv6 address. </td></tr>
    <tr><td class="paramname">0</td><td>This is an IPv4 address. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00524">524</a> of file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/df1/netsock2_8h_source.html#l00099">ast_sockaddr::len</a>, and <a class="el" href="../../db/df1/netsock2_8h_source.html#l00098">ast_sockaddr::ss</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l13542">add_sdp()</a>, <a class="el" href="../../d9/db8/acl_8c_source.html#l00808">ast_apply_ha()</a>, <a class="el" href="../../de/d79/netsock_8c_source.html#l00109">ast_netsock_bindaddr()</a>, <a class="el" href="../../d9/db8/acl_8c_source.html#l01005">ast_ouraddrfor()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l08303">ast_rtp_prop_set()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00621">ast_set_qos()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l03866">ast_sip_ouraddrfor()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00357">ast_sockaddr_apply_netmask()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00037">ast_sockaddr_ipv4_mapped()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00534">ast_sockaddr_is_any()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00518">ast_sockaddr_is_ipv6_link_local()</a>, <a class="el" href="../../dc/d9b/tcptls_8c_source.html#l00615">ast_tcptls_client_create()</a>, <a class="el" href="../../dc/d9b/tcptls_8c_source.html#l00685">ast_tcptls_server_start()</a>, <a class="el" href="../../d2/dce/udptl_8c_source.html#l01028">ast_udptl_new_with_bindaddr()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l12794">build_peer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l29558">get_address_family_filter()</a>, <a class="el" href="../../db/d43/res__hep_8c_source.html#l00371">hepv3_data_alloc()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l05169">load_module()</a>, <a class="el" href="../../d4/d6e/res__rtp__multicast_8c_source.html#l00348">multicast_send_control_packet()</a>, <a class="el" href="../../dc/d80/res__pjsip__t38_8c_source.html#l00818">negotiate_incoming_sdp_stream()</a>, <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l02813">reload_config()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03828">rtp_allocate_transport()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04915">set_host_ipaddr()</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l21842">sip_show_settings()</a>.</p>
<div class="fragment"><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;{</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment">    * Test addr-&gt;len first to be tolerant of an ast_sockaddr_setnull()</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment">    * addr.  In that case addr-&gt;len might be the only value initialized.</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;   <span class="keywordflow">return</span> addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">len</a> == <span class="keyword">sizeof</span>(<span class="keyword">struct </span>sockaddr_in6)</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      &amp;&amp; addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>.ss_family == AF_INET6;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;}</div><div class="ttc" id="structast__sockaddr_html_aceb44bfc6a3800d7f419367afb25fe79"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ast_sockaddr::ss</a></div><div class="ttdeci">struct sockaddr_storage ss</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00098">netsock2.h:98</a></div></div>
<div class="ttc" id="structast__sockaddr_html_ad04e8181049f819e1df2c7cac72a53ce"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">ast_sockaddr::len</a></div><div class="ttdeci">socklen_t len</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00099">netsock2.h:99</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aed3802161165adffc644184508e5ae43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed3802161165adffc644184508e5ae43">&#9670;&nbsp;</a></span>ast_sockaddr_is_ipv6_link_local()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sockaddr_is_ipv6_link_local </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine if this is a link-local IPv6 address. </p>
<dl class="section since"><dt>Since</dt><dd>1.8</dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>You should rarely need this function. Only use if you know what you're doing.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>This is a link-local IPv6 address. </td></tr>
    <tr><td class="paramname">0</td><td>This is link-local IPv6 address. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00518">518</a> of file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00524">ast_sockaddr_is_ipv6()</a>, and <a class="el" href="../../db/df1/netsock2_8h_source.html#l00098">ast_sockaddr::ss</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00065">ast_sockaddr_stringify_fmt()</a>.</p>
<div class="fragment"><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;{</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span>sockaddr_in6 *sin6 = (<span class="keyword">struct </span>sockaddr_in6 *)&amp;addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d27/netsock2_8c.html#a579748bd6ceddd06b1cc6eb3578e8acc">ast_sockaddr_is_ipv6</a>(addr) &amp;&amp; IN6_IS_ADDR_LINKLOCAL(&amp;sin6-&gt;sin6_addr);</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;}</div><div class="ttc" id="structast__sockaddr_html_aceb44bfc6a3800d7f419367afb25fe79"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ast_sockaddr::ss</a></div><div class="ttdeci">struct sockaddr_storage ss</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00098">netsock2.h:98</a></div></div>
<div class="ttc" id="netsock2_8c_html_a579748bd6ceddd06b1cc6eb3578e8acc"><div class="ttname"><a href="../../d4/d27/netsock2_8c.html#a579748bd6ceddd06b1cc6eb3578e8acc">ast_sockaddr_is_ipv6</a></div><div class="ttdeci">int ast_sockaddr_is_ipv6(const struct ast_sockaddr *addr)</div><div class="ttdoc">Determine if this is an IPv6 address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00524">netsock2.c:524</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aad98818272870e12d48fe4347aaa46d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad98818272870e12d48fe4347aaa46d0">&#9670;&nbsp;</a></span>ast_sockaddr_parse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sockaddr_parse </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parse an IPv4 or IPv6 address string. </p>
<dl class="section since"><dt>Since</dt><dd>1.8</dd></dl>
<p>Parses a string containing an IPv4 or IPv6 address followed by an optional port (separated by a colon) into a struct <a class="el" href="../../d3/db3/structast__sockaddr.html" title="Socket address structure. ">ast_sockaddr</a>. The allowed formats are the following:</p>
<p>a.b.c.d a.b.c.d:port a:b:c:...:d [a:b:c:...:d]</p>
<p>Host names are NOT allowed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">addr</td><td>The resulting <a class="el" href="../../d3/db3/structast__sockaddr.html" title="Socket address structure. ">ast_sockaddr</a>. This MAY be NULL from functions that are performing validity checks only, e.g. <a class="el" href="../../d3/de6/include_2asterisk_2config_8h.html#a7e9aea581abeaae5d3799367d95284ac" title="The argument parsing routine. ">ast_parse_arg()</a>. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">str</td><td>The string to parse </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">flags</td><td>If set to zero, a port MAY be present. If set to PARSE_PORT_IGNORE, a port MAY be present but will be ignored. If set to PARSE_PORT_REQUIRE, a port MUST be present. If set to PARSE_PORT_FORBID, a port MUST NOT be present.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>Success </td></tr>
    <tr><td class="paramname">0</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00230">230</a> of file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00164">ast_sockaddr_split_hostport()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d0/d8a/muted_8c_source.html#l00077">host</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00099">ast_sockaddr::len</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, and <a class="el" href="../../db/df1/netsock2_8h_source.html#l00098">ast_sockaddr::ss</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>, <a class="el" href="../../d9/db8/acl_8c_source.html#l00576">append_ha_core()</a>, <a class="el" href="../../d5/d5e/res__pjsip__acl_8c_source.html#l00121">apply_acl()</a>, <a class="el" href="../../d7/dad/pjsip__distributor_8c_source.html#l00807">apply_endpoint_acl()</a>, <a class="el" href="../../de/d79/netsock_8c_source.html#l00167">ast_netsock_bind()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l03657">ast_parse_arg()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01239">ast_rtp_ice_add_cand()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01577">ast_rtp_ice_turn_request()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03762">ast_sip_get_transport_name()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00362">ast_sockaddr_stringify_port()</a>, <a class="el" href="../../de/deb/res__pjproject_8c_source.html#l00541">AST_TEST_DEFINE()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l12794">build_peer()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02226">change_outgoing_sdp_stream_media_address()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00097">corosync_node_alloc()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00228">create_rtp()</a>, <a class="el" href="../../d3/d70/test__security__events_8c_source.html#l00333">evt_gen_auth_method_not_allowed()</a>, <a class="el" href="../../d3/d70/test__security__events_8c_source.html#l00491">evt_gen_chal_resp_failed()</a>, <a class="el" href="../../d3/d70/test__security__events_8c_source.html#l00570">evt_gen_chal_sent()</a>, <a class="el" href="../../d3/d70/test__security__events_8c_source.html#l00074">evt_gen_failed_acl()</a>, <a class="el" href="../../d3/d70/test__security__events_8c_source.html#l00112">evt_gen_inval_acct_id()</a>, <a class="el" href="../../d3/d70/test__security__events_8c_source.html#l00531">evt_gen_inval_password()</a>, <a class="el" href="../../d3/d70/test__security__events_8c_source.html#l00607">evt_gen_inval_transport()</a>, <a class="el" href="../../d3/d70/test__security__events_8c_source.html#l00220">evt_gen_load_avg()</a>, <a class="el" href="../../d3/d70/test__security__events_8c_source.html#l00184">evt_gen_mem_limit()</a>, <a class="el" href="../../d3/d70/test__security__events_8c_source.html#l00371">evt_gen_req_bad_format()</a>, <a class="el" href="../../d3/d70/test__security__events_8c_source.html#l00256">evt_gen_req_no_support()</a>, <a class="el" href="../../d3/d70/test__security__events_8c_source.html#l00294">evt_gen_req_not_allowed()</a>, <a class="el" href="../../d3/d70/test__security__events_8c_source.html#l00148">evt_gen_session_limit()</a>, <a class="el" href="../../d3/d70/test__security__events_8c_source.html#l00410">evt_gen_successful_auth()</a>, <a class="el" href="../../d3/d70/test__security__events_8c_source.html#l00446">evt_gen_unexpected_addr()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09213">handle_cli_rtp_drop_incoming_packets()</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00151">internal_dnsmgr_lookup()</a>, <a class="el" href="../../df/d91/res__pjsip__endpoint__identifier__ip_8c_source.html#l00298">ip_identify()</a>, <a class="el" href="../../df/d91/res__pjsip__endpoint__identifier__ip_8c_source.html#l00387">ip_identify_match_handler()</a>, <a class="el" href="../../de/da4/chan__motif_8c_source.html#l00701">jingle_alloc()</a>, <a class="el" href="../../de/da4/chan__motif_8c_source.html#l00668">jingle_enable_video()</a>, <a class="el" href="../../de/da4/chan__motif_8c_source.html#l02201">jingle_interpret_google_transport()</a>, <a class="el" href="../../de/da4/chan__motif_8c_source.html#l02120">jingle_interpret_ice_udp_transport()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02347">load_module()</a>, <a class="el" href="../../d7/da2/res__hep__pjsip_8c_source.html#l00156">logging_on_rx_msg()</a>, <a class="el" href="../../d7/da2/res__hep__pjsip_8c_source.html#l00083">logging_on_tx_msg()</a>, <a class="el" href="../../d0/d2b/chan__rtp_8c_source.html#l00139">multicast_rtp_request()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l12696">peer_set_srcaddr()</a>, <a class="el" href="../../d0/d73/res__pjsip__logger_8c_source.html#l00351">pjsip_enable_logger_host()</a>, <a class="el" href="../../d0/d73/res__pjsip__logger_8c_source.html#l00152">pjsip_log_test_addr()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00814">process_ice_attributes()</a>, <a class="el" href="../../d4/dc3/res__pjsip__nat_8c_source.html#l00365">process_nat()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l11432">process_sdp_a_ice()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l03467">proxy_update()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l04359">realtime_peer()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l08948">reg_source_db()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l32514">reload_config()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09055">rtcp_do_debug_ip()</a>, <a class="el" href="../../d4/d8f/res__hep__rtcp_8c_source.html#l00085">rtcp_message_handler()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09038">rtp_do_debug_ip()</a>, <a class="el" href="../../d2/d63/res_2res__pjsip_2security__events_8c_source.html#l00054">security_event_populate()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l05457">session_outgoing_nat_hook()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l13476">set_config()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l16089">sip_sanitized_host()</a>, <a class="el" href="../../d5/d85/reqresp__parser_8c_source.html#l02115">sip_uri_domain_cmp()</a>, <a class="el" href="../../df/d98/test__res__rtp_8c_source.html#l00053">test_init_rtp_instances()</a>, <a class="el" href="../../d0/d2b/chan__rtp_8c_source.html#l00269">unicast_rtp_request()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00749">update_address_with_ice_candidate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;{</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;   <span class="keyword">struct </span>addrinfo <a class="code" href="../../de/d2c/structhints.html">hints</a>;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;   <span class="keyword">struct </span>addrinfo   *res;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;   <span class="keywordtype">char</span> *s;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a>;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;   <span class="keywordtype">char</span> *port;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;   <span class="keywordtype">int</span>   e;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;   s = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d27/netsock2_8c.html#a774d22af00b04d5bc0c9e3456ac44ad2">ast_sockaddr_split_hostport</a>(s, &amp;host, &amp;port, flags)) {</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;   }</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;   memset(&amp;<a class="code" href="../../de/d2c/structhints.html">hints</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../de/d2c/structhints.html">hints</a>));</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;   <span class="comment">/* Hint to get only one entry from getaddrinfo */</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;   <a class="code" href="../../de/d2c/structhints.html">hints</a>.ai_socktype = SOCK_DGRAM;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="preprocessor">#ifdef AI_NUMERICSERV</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;   <a class="code" href="../../de/d2c/structhints.html">hints</a>.ai_flags = AI_NUMERICHOST | AI_NUMERICSERV;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;   <a class="code" href="../../de/d2c/structhints.html">hints</a>.ai_flags = AI_NUMERICHOST;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;   <span class="keywordflow">if</span> ((e = getaddrinfo(host, port, &amp;<a class="code" href="../../de/d2c/structhints.html">hints</a>, &amp;res))) {</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      <span class="keywordflow">if</span> (e != EAI_NONAME) { <span class="comment">/* if this was just a host name rather than a ip address, don&#39;t print error */</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;getaddrinfo(\&quot;%s\&quot;, \&quot;%s\&quot;, ...): %s\n&quot;</span>,</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            host, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(port, <span class="stringliteral">&quot;(null)&quot;</span>), gai_strerror(e));</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      }</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;   }</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">    * I don&#39;t see how this could be possible since we&#39;re not resolving host</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">    * names. But let&#39;s be careful...</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;   <span class="keywordflow">if</span> (res-&gt;ai_next != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;getaddrinfo() returned multiple &quot;</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;         <span class="stringliteral">&quot;addresses. Ignoring all but the first.\n&quot;</span>);</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;   }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;   <span class="keywordflow">if</span> (addr) {</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">len</a> = res-&gt;ai_addrlen;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      memcpy(&amp;addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>, res-&gt;ai_addr, addr-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">len</a>);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;   }</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;   freeaddrinfo(res);</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;}</div><div class="ttc" id="structast__sockaddr_html_aceb44bfc6a3800d7f419367afb25fe79"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ast_sockaddr::ss</a></div><div class="ttdeci">struct sockaddr_storage ss</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00098">netsock2.h:98</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structast__sockaddr_html_ad04e8181049f819e1df2c7cac72a53ce"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">ast_sockaddr::len</a></div><div class="ttdeci">socklen_t len</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00099">netsock2.h:99</a></div></div>
<div class="ttc" id="app__jack_8c_html_af25d6dc49269fa2003ac7c7fa6f13915"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00147">app_jack.c:147</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="muted_8c_html_a41c3a180b50c6b2ddcc1b6843a48f205"><div class="ttname"><a href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a></div><div class="ttdeci">static char host[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00077">muted.c:77</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="netsock2_8c_html_a774d22af00b04d5bc0c9e3456ac44ad2"><div class="ttname"><a href="../../d4/d27/netsock2_8c.html#a774d22af00b04d5bc0c9e3456ac44ad2">ast_sockaddr_split_hostport</a></div><div class="ttdeci">int ast_sockaddr_split_hostport(char *str, char **host, char **port, int flags)</div><div class="ttdoc">Splits a string into its host and port components. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00164">netsock2.c:164</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structhints_html"><div class="ttname"><a href="../../de/d2c/structhints.html">hints</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l03624">extconf.c:3624</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8ba6f5b5a9de09137dd18fe2d9592880"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ba6f5b5a9de09137dd18fe2d9592880">&#9670;&nbsp;</a></span>ast_sockaddr_resolve()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sockaddr_resolve </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> **&#160;</td>
          <td class="paramname"><em>addrs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>family</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parses a string with an IPv4 or IPv6 address and place results into an array. </p>
<dl class="section since"><dt>Since</dt><dd>1.8</dd></dl>
<p>Parses a string containing a host name or an IPv4 or IPv6 address followed by an optional port (separated by a colon). The result is returned into a array of struct <a class="el" href="../../d3/db3/structast__sockaddr.html" title="Socket address structure. ">ast_sockaddr</a>. Allowed formats for str are the following:</p>
<p>hostname:port host.example.com:port a.b.c.d a.b.c.d:port a:b:c:...:d [a:b:c:...:d]</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">addrs</td><td>The resulting array of ast_sockaddrs </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">str</td><td>The string to parse </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">flags</td><td>If set to zero, a port MAY be present. If set to PARSE_PORT_IGNORE, a port MAY be present but will be ignored. If set to PARSE_PORT_REQUIRE, a port MUST be present. If set to PARSE_PORT_FORBID, a port MUST NOT be present.</td></tr>
    <tr><td class="paramdir"></td><td class="paramname">family</td><td>Only addresses of the given family will be returned. Use 0 or AST_AF_UNSPEC to get addresses of all families.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Failure </td></tr>
    <tr><td class="paramname">non-zero</td><td>The number of elements in addrs array. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00280">280</a> of file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00164">ast_sockaddr_split_hostport()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">cleanup()</a>, <a class="el" href="../../d0/d8a/muted_8c_source.html#l00077">host</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l02077">__ast_http_load()</a>, <a class="el" href="../../de/d26/app__externalivr_8c_source.html#l00392">app_exec()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02065">apply_negotiated_sdp_stream()</a>, <a class="el" href="../../df/ddd/res__audiosocket_8c_source.html#l00099">ast_audiosocket_connect()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00337">ast_sockaddr_resolve_first_af()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00362">ast_sockaddr_stringify_port()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04628">build_peer()</a>, <a class="el" href="../../d7/dad/pjsip__distributor_8c_source.html#l00827">extract_contact_addr()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04901">get_ipaddress()</a>, <a class="el" href="../../d2/dce/udptl_8c_source.html#l01215">handle_cli_udptl_set_debug()</a>, <a class="el" href="../../df/d91/res__pjsip__endpoint__identifier__ip_8c_source.html#l00322">ip_identify_match_host_lookup()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02053">launch_netscript()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01462">negotiate_incoming_sdp_stream()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04588">populate_addr()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l04359">realtime_peer()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l05509">realtime_peer_by_name()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l04491">realtime_user()</a>, <a class="el" href="../../d9/db8/acl_8c_source.html#l00876">resolve_first()</a>, and <a class="el" href="../../de/d4c/res__http__websocket_8c_source.html#l01139">websocket_client_args_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;{</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;   <span class="keyword">struct </span>addrinfo <a class="code" href="../../de/d2c/structhints.html">hints</a>, *res, *ai;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;   <span class="keywordtype">char</span> *s, *<a class="code" href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a>, *port;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;   <span class="keywordtype">int</span>   e, i, res_cnt;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>) {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      *addrs = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;   }</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;   s = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d4/d27/netsock2_8c.html#a774d22af00b04d5bc0c9e3456ac44ad2">ast_sockaddr_split_hostport</a>(s, &amp;host, &amp;port, flags)) {</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;      *addrs = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;   }</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;   memset(&amp;<a class="code" href="../../de/d2c/structhints.html">hints</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../de/d2c/structhints.html">hints</a>));</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;   <a class="code" href="../../de/d2c/structhints.html">hints</a>.ai_family = family;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;   <a class="code" href="../../de/d2c/structhints.html">hints</a>.ai_socktype = SOCK_DGRAM;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;   <span class="keywordflow">if</span> ((e = getaddrinfo(host, port, &amp;<a class="code" href="../../de/d2c/structhints.html">hints</a>, &amp;res))) {</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;getaddrinfo(\&quot;%s\&quot;, \&quot;%s\&quot;, ...): %s\n&quot;</span>,</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;         host, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(port, <span class="stringliteral">&quot;(null)&quot;</span>), gai_strerror(e));</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      *addrs = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;   }</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;   res_cnt = 0;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;   <span class="keywordflow">for</span> (ai = res; ai; ai = ai-&gt;ai_next) {</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      res_cnt++;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;   }</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;   <span class="keywordflow">if</span> (res_cnt == 0) {</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      *addrs = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   }</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;   <span class="keywordflow">if</span> ((*addrs = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(res_cnt * <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a>))) == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      res_cnt = 0;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;   }</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;   i = 0;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;   <span class="keywordflow">for</span> (ai = res; ai; ai = ai-&gt;ai_next) {</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      (*addrs)[i].len = ai-&gt;ai_addrlen;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      memcpy(&amp;(*addrs)[i].ss, ai-&gt;ai_addr, ai-&gt;ai_addrlen);</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      ++i;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;   }</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>:</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;   freeaddrinfo(res);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;   <span class="keywordflow">return</span> res_cnt;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;}</div><div class="ttc" id="app__jack_8c_html_af25d6dc49269fa2003ac7c7fa6f13915"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00147">app_jack.c:147</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="muted_8c_html_a41c3a180b50c6b2ddcc1b6843a48f205"><div class="ttname"><a href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a></div><div class="ttdeci">static char host[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00077">muted.c:77</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="netsock2_8c_html_a774d22af00b04d5bc0c9e3456ac44ad2"><div class="ttname"><a href="../../d4/d27/netsock2_8c.html#a774d22af00b04d5bc0c9e3456ac44ad2">ast_sockaddr_split_hostport</a></div><div class="ttdeci">int ast_sockaddr_split_hostport(char *str, char **host, char **port, int flags)</div><div class="ttdoc">Splits a string into its host and port components. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00164">netsock2.c:164</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structhints_html"><div class="ttname"><a href="../../de/d2c/structhints.html">hints</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l03624">extconf.c:3624</a></div></div>
<div class="ttc" id="pbx__realtime_8c_html_a10b51e1931bd03dd172cbfb9d3d67efb"><div class="ttname"><a href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a></div><div class="ttdeci">static void * cleanup(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">pbx_realtime.c:124</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a02d40ab39a395d3c81ab876ed67d55cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02d40ab39a395d3c81ab876ed67d55cd">&#9670;&nbsp;</a></span>ast_sockaddr_resolve_first_af()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sockaddr_resolve_first_af </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>family</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pulls first resolved address and returns it. </p>
<p>Return the first entry from ast_sockaddr_resolve filtered by address family. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00337">337</a> of file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00171">ast_sockaddr_copy()</a>, and <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00280">ast_sockaddr_resolve()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l03866">ast_sip_ouraddrfor()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l34469">ast_sockaddr_resolve_first()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l34479">ast_sockaddr_resolve_first_transport()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00362">ast_sockaddr_stringify_port()</a>, <a class="el" href="../../dd/d8a/chan__audiosocket_8c_source.html#l00139">audiosocket_request()</a>, <a class="el" href="../../db/d43/res__hep_8c_source.html#l00371">hepv3_data_alloc()</a>, <a class="el" href="../../d0/d73/res__pjsip__logger_8c_source.html#l00351">pjsip_enable_logger_host()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l11385">process_sdp_c()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l32514">reload_config()</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l22814">sip_do_debug_ip()</a>.</p>
<div class="fragment"><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;{</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *addrs;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;   <span class="keywordtype">int</span> addrs_cnt;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;   addrs_cnt = <a class="code" href="../../d4/d27/netsock2_8c.html#a8ba6f5b5a9de09137dd18fe2d9592880">ast_sockaddr_resolve</a>(&amp;addrs, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>, family);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;   <span class="keywordflow">if</span> (addrs_cnt &lt;= 0) {</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;   }</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;   <span class="keywordflow">if</span> (addrs_cnt &gt; 1) {</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Multiple addresses resolving %s, using the first one only\n&quot;</span>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;   }</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;   <a class="code" href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a>(addr, &amp;addrs[0]);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(addrs);</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;}</div><div class="ttc" id="netsock2_8c_html_a8ba6f5b5a9de09137dd18fe2d9592880"><div class="ttname"><a href="../../d4/d27/netsock2_8c.html#a8ba6f5b5a9de09137dd18fe2d9592880">ast_sockaddr_resolve</a></div><div class="ttdeci">int ast_sockaddr_resolve(struct ast_sockaddr **addrs, const char *str, int flags, int family)</div><div class="ttdoc">Parses a string with an IPv4 or IPv6 address and place results into an array. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00280">netsock2.c:280</a></div></div>
<div class="ttc" id="netsock2_8h_html_a56a46003c93bfd65111ea8ffc97af8f9"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a56a46003c93bfd65111ea8ffc97af8f9">ast_sockaddr_copy</a></div><div class="ttdeci">static void ast_sockaddr_copy(struct ast_sockaddr *dst, const struct ast_sockaddr *src)</div><div class="ttdoc">Copies the data from one ast_sockaddr to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00171">netsock2.h:171</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="f2c_8h_html_abf5d144da384425ae6cb542ce6eec8d3"><div class="ttname"><a href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a></div><div class="ttdeci">long int flag</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc2/f2c_8h_source.html#l00083">f2c.h:83</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a774d22af00b04d5bc0c9e3456ac44ad2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a774d22af00b04d5bc0c9e3456ac44ad2">&#9670;&nbsp;</a></span>ast_sockaddr_split_hostport()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sockaddr_split_hostport </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Splits a string into its host and port components. </p>
<dl class="section since"><dt>Since</dt><dd>1.8</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">str</td><td>The string to parse. May be modified by writing a NUL at the end of the host part. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">host</td><td>Pointer to the host component within <em>str</em>. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">port</td><td>Pointer to the port component within <em>str</em>. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">flags</td><td>If set to zero, a port MAY be present. If set to PARSE_PORT_IGNORE, a port MAY be present but will be ignored. If set to PARSE_PORT_REQUIRE, a port MUST be present. If set to PARSE_PORT_FORBID, a port MUST NOT be present.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>Success </td></tr>
    <tr><td class="paramname">0</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00164">164</a> of file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01135">PARSE_PORT_FORBID</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01133">PARSE_PORT_IGNORE</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01132">PARSE_PORT_MASK</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01134">PARSE_PORT_REQUIRE</a>, and <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00147">str</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d49/resource__channels_8c_source.html#l02176">ast_ari_channels_external_media()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00230">ast_sockaddr_parse()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00280">ast_sockaddr_resolve()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00362">ast_sockaddr_stringify_port()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l17831">extract_host_from_hostport()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l12696">peer_set_srcaddr()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09055">rtcp_do_debug_ip()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09038">rtp_do_debug_ip()</a>, <a class="el" href="../../db/dd3/res__stun__monitor_8c_source.html#l00273">setup_stunaddr()</a>, <a class="el" href="../../d8/d9c/config__parser_8c_source.html#l00647">sip_parse_host()</a>, and <a class="el" href="../../d0/d2b/chan__rtp_8c_source.html#l00269">unicast_rtp_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;{</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;   <span class="keywordtype">char</span> *s = <a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;   <span class="keywordtype">char</span> *orig_str = <a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>;<span class="comment">/* Original string in case the port presence is incorrect. */</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;   <span class="keywordtype">char</span> *host_end = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;<span class="comment">/* Delay terminating the host in case the port presence is incorrect. */</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;Splitting &#39;%s&#39; into...\n&quot;</span>, <a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;   *<a class="code" href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;   *port = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;   <span class="keywordflow">if</span> (*s == <span class="charliteral">&#39;[&#39;</span>) {</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      *<a class="code" href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a> = ++s;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      <span class="keywordflow">for</span> (; *s &amp;&amp; *s != <span class="charliteral">&#39;]&#39;</span>; ++s) {</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      }</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      <span class="keywordflow">if</span> (*s == <span class="charliteral">&#39;]&#39;</span>) {</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;         host_end = s;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;         ++s;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      }</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      <span class="keywordflow">if</span> (*s == <span class="charliteral">&#39;:&#39;</span>) {</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;         *port = s + 1;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      }</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      *<a class="code" href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a> = s;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      <span class="keywordflow">for</span> (; *s; ++s) {</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;         <span class="keywordflow">if</span> (*s == <span class="charliteral">&#39;:&#39;</span>) {</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            <span class="keywordflow">if</span> (*port) {</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;               *port = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;               *port = s;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            }</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;         }</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      }</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      <span class="keywordflow">if</span> (*port) {</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;         host_end = *port;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;         ++*port;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      }</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;   }</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;   <span class="keywordflow">switch</span> (flags &amp; <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa5f8a497855d42eba8c324516d21f8998">PARSE_PORT_MASK</a>) {</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa16f16657d9166eef98393fb8bfa5da8d">PARSE_PORT_IGNORE</a>:</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      *port = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569faf8734b2de041808f7ad5ce81ce4fcbcb">PARSE_PORT_REQUIRE</a>:</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      <span class="keywordflow">if</span> (*port == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Port missing in %s\n&quot;</span>, orig_str);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      }</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3">PARSE_PORT_FORBID</a>:</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      <span class="keywordflow">if</span> (*port != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Port disallowed in %s\n&quot;</span>, orig_str);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;   }</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;   <span class="comment">/* Can terminate the host string now if needed. */</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;   <span class="keywordflow">if</span> (host_end) {</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      *host_end = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;   }</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;...host &#39;%s&#39; and port &#39;%s&#39;.\n&quot;</span>, *<a class="code" href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a>, *port ? *port : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;}</div><div class="ttc" id="include_2asterisk_2config_8h_html_ad60d9d8c34b4f61493c1d85ae02d569fa16f16657d9166eef98393fb8bfa5da8d"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa16f16657d9166eef98393fb8bfa5da8d">PARSE_PORT_IGNORE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01133">include/asterisk/config.h:1133</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_ad60d9d8c34b4f61493c1d85ae02d569fa5f8a497855d42eba8c324516d21f8998"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa5f8a497855d42eba8c324516d21f8998">PARSE_PORT_MASK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01132">include/asterisk/config.h:1132</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3">PARSE_PORT_FORBID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01135">include/asterisk/config.h:1135</a></div></div>
<div class="ttc" id="app__jack_8c_html_af25d6dc49269fa2003ac7c7fa6f13915"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00147">app_jack.c:147</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_ad60d9d8c34b4f61493c1d85ae02d569faf8734b2de041808f7ad5ce81ce4fcbcb"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569faf8734b2de041808f7ad5ce81ce4fcbcb">PARSE_PORT_REQUIRE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01134">include/asterisk/config.h:1134</a></div></div>
<div class="ttc" id="muted_8c_html_a41c3a180b50c6b2ddcc1b6843a48f205"><div class="ttname"><a href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a></div><div class="ttdeci">static char host[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00077">muted.c:77</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aebfb0bdf1d93584cbc399147bd1590d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebfb0bdf1d93584cbc399147bd1590d1">&#9670;&nbsp;</a></span>ast_sockaddr_stringify_fmt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_sockaddr_stringify_fmt </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *&#160;</td>
          <td class="paramname"><em>addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>format</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert a socket address to a string. </p>
<dl class="section since"><dt>Since</dt><dd>1.8</dd></dl>
<p>This will be of the form a.b.c.d:xyz for IPv4 and [a:b:c:...:d]:xyz for IPv6.</p>
<p>This function is thread-safe. The returned string is on static thread-specific storage.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">addr</td><td>The input to be stringified </td></tr>
    <tr><td class="paramname">format</td><td>one of the following: AST_SOCKADDR_STR_DEFAULT: a.b.c.d:xyz for IPv4 [a:b:c:...:d]:xyz for IPv6. AST_SOCKADDR_STR_ADDR: address only a.b.c.d for IPv4 a:b:c:...:d for IPv6. AST_SOCKADDR_STR_HOST: address only, suitable for a URL a.b.c.d for IPv4 [a:b:c:...:d] for IPv6. AST_SOCKADDR_STR_PORT: port only</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The string pointer returned by this function will point to a string that will be changed whenever any form of ast_sockaddr_stringify_fmt is called on that thread. Because of this, it is important that if you use this function, you use the string before another use of this function is made elsewhere in the same thread. The easiest way to accomplish this is by immediately copying the string to a buffer with something like ast_strdupa.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">(null)</td><td><em>addr</em> is null </td></tr>
    <tr><td class="paramname">""</td><td>An error occurred during processing </td></tr>
    <tr><td class="paramname">string</td><td>The stringified form of the address </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00065">65</a> of file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00037">ast_sockaddr_ipv4_mapped()</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00518">ast_sockaddr_is_ipv6_link_local()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00127">ast_sockaddr_isnull()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00202">AST_SOCKADDR_STR_ADDR</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00207">AST_SOCKADDR_STR_DEFAULT</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00211">AST_SOCKADDR_STR_FORMAT_MASK</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00206">AST_SOCKADDR_STR_HOST</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00203">AST_SOCKADDR_STR_PORT</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00205">AST_SOCKADDR_STR_REMOTE</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00063">ast_sockaddr_stringify_buf</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00861">ast_str_thread_get()</a>, <a class="el" href="../../d0/d8a/muted_8c_source.html#l00077">host</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00099">ast_sockaddr::len</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00098">ast_sockaddr::ss</a>, and <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00147">str</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/df1/netsock2_8h_source.html#l00260">ast_sockaddr_stringify()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00290">ast_sockaddr_stringify_addr()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00317">ast_sockaddr_stringify_addr_remote()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00331">ast_sockaddr_stringify_host()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00349">ast_sockaddr_stringify_host_remote()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00362">ast_sockaddr_stringify_port()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00277">ast_sockaddr_stringify_remote()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01704">create_outgoing_sdp_stream()</a>, and <a class="el" href="../../d0/d0c/res__statsd_8c_source.html#l00294">statsd_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;{</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> sa_ipv4;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a> *sa_tmp;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a>[NI_MAXHOST];</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;   <span class="keywordtype">char</span> port[NI_MAXSERV];</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;   <span class="keywordtype">int</span> e;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> size = <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a>) - 1 + <span class="keyword">sizeof</span>(port) - 1 + 4;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a>(sa)) {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;(null)&quot;</span>;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;   }</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;   <span class="keywordflow">if</span> (!(str = <a class="code" href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a>(&amp;<a class="code" href="../../d4/d27/netsock2_8c.html#a6383a184bcee63cb7d24a182f433004d">ast_sockaddr_stringify_buf</a>, size))) {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;   }</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d27/netsock2_8c.html#a42e610962ef06c151aad8260af428e3d">ast_sockaddr_ipv4_mapped</a>(sa, &amp;sa_ipv4)) {</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      sa_tmp = &amp;sa_ipv4;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;      sa_tmp = sa;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;   }</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;   <span class="keywordflow">if</span> ((e = getnameinfo((<span class="keyword">struct</span> sockaddr *)&amp;sa_tmp-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>, sa_tmp-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">len</a>,</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;              <a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a> &amp; <a class="code" href="../../db/df1/netsock2_8h.html#a4d31b81f8c041f32492b7921a057e426">AST_SOCKADDR_STR_ADDR</a> ? host : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;              <a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a> &amp; <a class="code" href="../../db/df1/netsock2_8h.html#a4d31b81f8c041f32492b7921a057e426">AST_SOCKADDR_STR_ADDR</a> ? <span class="keyword">sizeof</span>(host) : 0,</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;              <a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a> &amp; <a class="code" href="../../db/df1/netsock2_8h.html#a329b7308c6ecacdb3c09337679206810">AST_SOCKADDR_STR_PORT</a> ? port : 0,</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;              <a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a> &amp; <a class="code" href="../../db/df1/netsock2_8h.html#a329b7308c6ecacdb3c09337679206810">AST_SOCKADDR_STR_PORT</a> ? <span class="keyword">sizeof</span>(port): 0,</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;              NI_NUMERICHOST | NI_NUMERICSERV))) {</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;getnameinfo(): %s\n&quot;</span>, gai_strerror(e));</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;   }</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;   <span class="keywordflow">if</span> ((<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a> &amp; <a class="code" href="../../db/df1/netsock2_8h.html#ae9434ae03c9b1cd40256018c2243b87e">AST_SOCKADDR_STR_REMOTE</a>) == AST_SOCKADDR_STR_REMOTE) {</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;      <span class="keywordtype">char</span> *p;</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d4/d27/netsock2_8c.html#aed3802161165adffc644184508e5ae43">ast_sockaddr_is_ipv6_link_local</a>(sa) &amp;&amp; (p = strchr(host, <span class="charliteral">&#39;%&#39;</span>))) {</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;         *p = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;      }</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;   }</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;   <span class="keywordflow">switch</span> ((<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a> &amp; <a class="code" href="../../db/df1/netsock2_8h.html#abdbcc0b2196c3b23d0f001a5c0404e41">AST_SOCKADDR_STR_FORMAT_MASK</a>))  {</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/df1/netsock2_8h.html#a66c24baffb112589545fb859cb507d22">AST_SOCKADDR_STR_DEFAULT</a>:</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;str, 0, sa_tmp-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>.ss_family == AF_INET6 ?</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            <span class="stringliteral">&quot;[%s]:%s&quot;</span> : <span class="stringliteral">&quot;%s:%s&quot;</span>, host, port);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/df1/netsock2_8h.html#a4d31b81f8c041f32492b7921a057e426">AST_SOCKADDR_STR_ADDR</a>:</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;str, 0, <span class="stringliteral">&quot;%s&quot;</span>, host);</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/df1/netsock2_8h.html#a1f2ebfd261939ef0d417cfdaebb497db">AST_SOCKADDR_STR_HOST</a>:</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;str, 0,</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;             sa_tmp-&gt;<a class="code" href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ss</a>.ss_family == AF_INET6 ? <span class="stringliteral">&quot;[%s]&quot;</span> : <span class="stringliteral">&quot;%s&quot;</span>, host);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/df1/netsock2_8h.html#a329b7308c6ecacdb3c09337679206810">AST_SOCKADDR_STR_PORT</a>:</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;str, 0, <span class="stringliteral">&quot;%s&quot;</span>, port);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid format\n&quot;</span>);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;   }</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(str);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;}</div><div class="ttc" id="structast__sockaddr_html_aceb44bfc6a3800d7f419367afb25fe79"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#aceb44bfc6a3800d7f419367afb25fe79">ast_sockaddr::ss</a></div><div class="ttdeci">struct sockaddr_storage ss</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00098">netsock2.h:98</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="structast__sockaddr_html_ad04e8181049f819e1df2c7cac72a53ce"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html#ad04e8181049f819e1df2c7cac72a53ce">ast_sockaddr::len</a></div><div class="ttdeci">socklen_t len</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00099">netsock2.h:99</a></div></div>
<div class="ttc" id="netsock2_8c_html_a42e610962ef06c151aad8260af428e3d"><div class="ttname"><a href="../../d4/d27/netsock2_8c.html#a42e610962ef06c151aad8260af428e3d">ast_sockaddr_ipv4_mapped</a></div><div class="ttdeci">int ast_sockaddr_ipv4_mapped(const struct ast_sockaddr *addr, struct ast_sockaddr *ast_mapped)</div><div class="ttdoc">Convert an IPv4-mapped IPv6 address into an IPv4 address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00037">netsock2.c:37</a></div></div>
<div class="ttc" id="app__jack_8c_html_af25d6dc49269fa2003ac7c7fa6f13915"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00147">app_jack.c:147</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__sockaddr_html"><div class="ttname"><a href="../../d3/db3/structast__sockaddr.html">ast_sockaddr</a></div><div class="ttdoc">Socket address structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00097">netsock2.h:97</a></div></div>
<div class="ttc" id="netsock2_8h_html_a66c24baffb112589545fb859cb507d22"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a66c24baffb112589545fb859cb507d22">AST_SOCKADDR_STR_DEFAULT</a></div><div class="ttdeci">#define AST_SOCKADDR_STR_DEFAULT</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00207">netsock2.h:207</a></div></div>
<div class="ttc" id="netsock2_8h_html_aae671446fa65b8f846efaf165872c683"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aae671446fa65b8f846efaf165872c683">ast_sockaddr_isnull</a></div><div class="ttdeci">static int ast_sockaddr_isnull(const struct ast_sockaddr *addr)</div><div class="ttdoc">Checks if the ast_sockaddr is null. &quot;null&quot; in this sense essentially means uninitialized, or having a 0 length. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00127">netsock2.h:127</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="muted_8c_html_a41c3a180b50c6b2ddcc1b6843a48f205"><div class="ttname"><a href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a></div><div class="ttdeci">static char host[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00077">muted.c:77</a></div></div>
<div class="ttc" id="netsock2_8c_html_aed3802161165adffc644184508e5ae43"><div class="ttname"><a href="../../d4/d27/netsock2_8c.html#aed3802161165adffc644184508e5ae43">ast_sockaddr_is_ipv6_link_local</a></div><div class="ttdeci">int ast_sockaddr_is_ipv6_link_local(const struct ast_sockaddr *addr)</div><div class="ttdoc">Determine if this is a link-local IPv6 address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00518">netsock2.c:518</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="netsock2_8h_html_a329b7308c6ecacdb3c09337679206810"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a329b7308c6ecacdb3c09337679206810">AST_SOCKADDR_STR_PORT</a></div><div class="ttdeci">#define AST_SOCKADDR_STR_PORT</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00203">netsock2.h:203</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="netsock2_8h_html_a1f2ebfd261939ef0d417cfdaebb497db"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a1f2ebfd261939ef0d417cfdaebb497db">AST_SOCKADDR_STR_HOST</a></div><div class="ttdeci">#define AST_SOCKADDR_STR_HOST</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00206">netsock2.h:206</a></div></div>
<div class="ttc" id="netsock2_8h_html_a4d31b81f8c041f32492b7921a057e426"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#a4d31b81f8c041f32492b7921a057e426">AST_SOCKADDR_STR_ADDR</a></div><div class="ttdeci">#define AST_SOCKADDR_STR_ADDR</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00202">netsock2.h:202</a></div></div>
<div class="ttc" id="strings_8h_html_afe8f5f844f2fd5f5bd5d0be5ef671481"><div class="ttname"><a href="../../d6/d90/strings_8h.html#afe8f5f844f2fd5f5bd5d0be5ef671481">ast_str_thread_get</a></div><div class="ttdeci">struct ast_str * ast_str_thread_get(struct ast_threadstorage *ts, size_t init_len)</div><div class="ttdoc">Retrieve a thread locally stored dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00861">strings.h:861</a></div></div>
<div class="ttc" id="netsock2_8h_html_abdbcc0b2196c3b23d0f001a5c0404e41"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#abdbcc0b2196c3b23d0f001a5c0404e41">AST_SOCKADDR_STR_FORMAT_MASK</a></div><div class="ttdeci">#define AST_SOCKADDR_STR_FORMAT_MASK</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00211">netsock2.h:211</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a98f5e70e98f6dc48e3c5ba316066d540"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a></div><div class="ttdeci">static snd_pcm_format_t format</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00102">chan_alsa.c:102</a></div></div>
<div class="ttc" id="netsock2_8c_html_a6383a184bcee63cb7d24a182f433004d"><div class="ttname"><a href="../../d4/d27/netsock2_8c.html#a6383a184bcee63cb7d24a182f433004d">ast_sockaddr_stringify_buf</a></div><div class="ttdeci">static struct ast_threadstorage ast_sockaddr_stringify_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00063">netsock2.c:63</a></div></div>
<div class="ttc" id="netsock2_8h_html_ae9434ae03c9b1cd40256018c2243b87e"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#ae9434ae03c9b1cd40256018c2243b87e">AST_SOCKADDR_STR_REMOTE</a></div><div class="ttdeci">#define AST_SOCKADDR_STR_REMOTE</div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00205">netsock2.h:205</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae3d0d919156705232cf9006ffd8707cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae3d0d919156705232cf9006ffd8707cf">&#9670;&nbsp;</a></span>ast_transport2str()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_transport2str </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3">ast_transport</a>&#160;</td>
          <td class="paramname"><em>transport</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a string representation of an ast_transport. </p>
<dl class="section since"><dt>Since</dt><dd>12.3</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Name</td><td>of the tranpsort if it is defined </td></tr>
    <tr><td class="paramname">Undefined</td><td>if the transport is undefined </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00566">566</a> of file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/df1/netsock2_8h_source.html#l00061">AST_TRANSPORT_TCP</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00062">AST_TRANSPORT_TLS</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00060">AST_TRANSPORT_UDP</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00063">AST_TRANSPORT_WS</a>, and <a class="el" href="../../db/df1/netsock2_8h_source.html#l00064">AST_TRANSPORT_WSS</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l22389">sip_show_channel()</a>.</p>
<div class="fragment"><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;{</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;   <span class="keywordflow">switch</span> (transport) {</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3ac5d05bd6daa774e40db98ff06a91bc0a">AST_TRANSPORT_TLS</a>:</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;TLS&quot;</span>;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3a806b187d5e4f7490e46a039792f850bc">AST_TRANSPORT_UDP</a>:</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;UDP&quot;</span>;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3acd1be5fd1357a3d7f56ec62fc01bdc20">AST_TRANSPORT_TCP</a>:</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;TCP&quot;</span>;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3a6d8ef74bba673bd5a95d9b2da8116b4f">AST_TRANSPORT_WS</a>:</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;WS&quot;</span>;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3a611d4a9fc154cea78fe3f7f768185c4d">AST_TRANSPORT_WSS</a>:</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;WSS&quot;</span>;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;   }</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;Undefined&quot;</span>;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;}</div><div class="ttc" id="netsock2_8h_html_aa2785c5990a086943fea750c980abbc3a611d4a9fc154cea78fe3f7f768185c4d"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3a611d4a9fc154cea78fe3f7f768185c4d">AST_TRANSPORT_WSS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00064">netsock2.h:64</a></div></div>
<div class="ttc" id="netsock2_8h_html_aa2785c5990a086943fea750c980abbc3acd1be5fd1357a3d7f56ec62fc01bdc20"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3acd1be5fd1357a3d7f56ec62fc01bdc20">AST_TRANSPORT_TCP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00061">netsock2.h:61</a></div></div>
<div class="ttc" id="netsock2_8h_html_aa2785c5990a086943fea750c980abbc3a806b187d5e4f7490e46a039792f850bc"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3a806b187d5e4f7490e46a039792f850bc">AST_TRANSPORT_UDP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00060">netsock2.h:60</a></div></div>
<div class="ttc" id="netsock2_8h_html_aa2785c5990a086943fea750c980abbc3ac5d05bd6daa774e40db98ff06a91bc0a"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3ac5d05bd6daa774e40db98ff06a91bc0a">AST_TRANSPORT_TLS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00062">netsock2.h:62</a></div></div>
<div class="ttc" id="netsock2_8h_html_aa2785c5990a086943fea750c980abbc3a6d8ef74bba673bd5a95d9b2da8116b4f"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3a6d8ef74bba673bd5a95d9b2da8116b4f">AST_TRANSPORT_WS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00063">netsock2.h:63</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a6383a184bcee63cb7d24a182f433004d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6383a184bcee63cb7d24a182f433004d">&#9670;&nbsp;</a></span>ast_sockaddr_stringify_buf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a> ast_sockaddr_stringify_buf = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../d4/d27/netsock2_8c.html#a956d0f44ad4de570a8d1afc36bfa8350">__init_ast_sockaddr_stringify_buf</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00063">63</a> of file <a class="el" href="../../d4/d27/netsock2_8c_source.html">netsock2.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00065">ast_sockaddr_stringify_fmt()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:09 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
