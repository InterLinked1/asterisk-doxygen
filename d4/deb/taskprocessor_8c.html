<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: taskprocessor.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">taskprocessor.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Maintain a container of uniquely-named taskprocessor threads that can be shared across modules.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d78/__private_8h_source.html">asterisk/_private.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/df7/time_8h_source.html">asterisk/time.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/da5/astobj2_8h_source.html">asterisk/astobj2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/db0/cli_8h_source.html">asterisk/cli.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/d1e/taskprocessor_8h_source.html">asterisk/taskprocessor.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d28/sem_8h_source.html">asterisk/sem.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for taskprocessor.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/d83/taskprocessor_8c__incl.png" border="0" usemap="#taskprocessor_8c" alt=""/></div>
<map name="taskprocessor_8c" id="taskprocessor_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="91,304,175,331"/>
<area shape="rect" id="node22" href="../../d4/d78/__private_8h.html" title="Prototypes for public functions only of internal interest,. " alt="" coords="137,80,275,107"/>
<area shape="rect" id="node23" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="919,80,1055,107"/>
<area shape="rect" id="node26" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="272,528,335,555"/>
<area shape="rect" id="node32" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="1141,304,1276,331"/>
<area shape="rect" id="node34" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="1257,155,1358,181"/>
<area shape="rect" id="node35" href="../../d0/d1e/taskprocessor_8h.html" title="An API for managing task processing threads that can be shared across modules. " alt="" coords="1308,80,1485,107"/>
<area shape="rect" id="node36" href="../../d2/d28/sem_8h.html" title="Asterisk semaphore API. " alt="" coords="1680,379,1796,405"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="129,603,283,629"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="933,379,1071,405"/>
<area shape="rect" id="node21" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="5,379,140,405"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="133,677,279,704"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="1603,528,1745,555"/>
<area shape="rect" id="node24" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="838,155,953,181"/>
<area shape="rect" id="node25" href="../../d9/d94/network_8h.html" title="Wrapper for network related headers, masking differences between various operating systems..." alt="" coords="669,229,807,256"/>
<area shape="rect" id="node27" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1621,453,1735,480"/>
<area shape="rect" id="node28" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="1852,528,1979,555"/>
<area shape="rect" id="node29" href="../../d5/deb/localtime_8h.html" title="Custom localtime functions for multiple timezones. " alt="" coords="266,229,413,256"/>
<area shape="rect" id="node30" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="437,229,594,256"/>
<area shape="rect" id="node31" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="1051,229,1182,256"/>
<area shape="rect" id="node33" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="1247,379,1397,405"/>
</map>
</div>
</div>
<p><a href="../../d4/deb/taskprocessor_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A <a class="el" href="../../db/d17/structast__taskprocessor.html" title="A ast_taskprocessor structure is a singleton by name. ">ast_taskprocessor</a> structure is a singleton by name.  <a href="../../db/d17/structast__taskprocessor.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A listener for taskprocessors.  <a href="../../d7/d52/structast__taskprocessor__listener.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html">default_taskprocessor_listener_pvt</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da5/structsubsystem__alert.html">subsystem_alert</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d82/structast__taskprocessor_1_1tps__queue.html">ast_taskprocessor::tps_queue</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Taskprocessor queue.  <a href="../../d5/d82/structast__taskprocessor_1_1tps__queue.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d60/structtps__task.html">tps_task</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../d3/d60/structtps__task.html" title="tps_task structure is queued to a taskprocessor ">tps_task</a> structure is queued to a taskprocessor  <a href="../../d3/d60/structtps__task.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d1c/structtps__taskprocessor__stats.html">tps_taskprocessor_stats</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="../../db/d1c/structtps__taskprocessor__stats.html" title="tps_taskprocessor_stats maintain statistics for a taskprocessor. ">tps_taskprocessor_stats</a> maintain statistics for a taskprocessor.  <a href="../../db/d1c/structtps__taskprocessor__stats.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a28e4a2cd5d9cefd5714c0a3ce2a35499"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a28e4a2cd5d9cefd5714c0a3ce2a35499">FMT_FIELDS</a>&#160;&#160;&#160;&quot;%-70s %10lu %10lu %10lu %10lu %10lu\n&quot;</td></tr>
<tr class="separator:a28e4a2cd5d9cefd5714c0a3ce2a35499"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed8c117feb31a243131f766855998d23"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#aed8c117feb31a243131f766855998d23">FMT_FIELDS_SUBSYSTEM</a>&#160;&#160;&#160;&quot;%-32s %12u\n&quot;</td></tr>
<tr class="separator:aed8c117feb31a243131f766855998d23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23b24e0f93569bfc937a4bc9143c21e3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a23b24e0f93569bfc937a4bc9143c21e3">FMT_HEADERS</a>&#160;&#160;&#160;&quot;%-70s %10s %10s %10s %10s %10s\n&quot;</td></tr>
<tr class="separator:a23b24e0f93569bfc937a4bc9143c21e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35d4f34f427c4aa9fd3e83349113d2ed"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a35d4f34f427c4aa9fd3e83349113d2ed">FMT_HEADERS_SUBSYSTEM</a>&#160;&#160;&#160;&quot;%-32s %12s\n&quot;</td></tr>
<tr class="separator:a35d4f34f427c4aa9fd3e83349113d2ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad673ddccb6db4af7af1cb47b3e97ee39"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#ad673ddccb6db4af7af1cb47b3e97ee39">SEQ_STR_SIZE</a>&#160;&#160;&#160;(1 + 8 + 1)	/* Dash plus 8 hex digits plus null terminator */</td></tr>
<tr class="separator:ad673ddccb6db4af7af1cb47b3e97ee39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a324cc9d868c635cb5bff2e559024b78b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a324cc9d868c635cb5bff2e559024b78b">TPS_MAX_BUCKETS</a>&#160;&#160;&#160;1567</td></tr>
<tr class="separator:a324cc9d868c635cb5bff2e559024b78b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2ef06a1672c6c7c3ac36cee03ab1a8ee"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a2ef06a1672c6c7c3ac36cee03ab1a8ee">__allocate_taskprocessor</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, struct <a class="el" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a> *<a class="el" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a>)</td></tr>
<tr class="separator:a2ef06a1672c6c7c3ac36cee03ab1a8ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1085e4adbfe31c0f31604b365543b84"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#af1085e4adbfe31c0f31604b365543b84">__start_taskprocessor</a> (struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *p)</td></tr>
<tr class="separator:af1085e4adbfe31c0f31604b365543b84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44bed16d2b07a7dc2bbb0134372acfb7"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a44bed16d2b07a7dc2bbb0134372acfb7">ast_taskprocessor_alert_get</a> (void)</td></tr>
<tr class="memdesc:a44bed16d2b07a7dc2bbb0134372acfb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current taskprocessor high water alert count.  <a href="#a44bed16d2b07a7dc2bbb0134372acfb7">More...</a><br /></td></tr>
<tr class="separator:a44bed16d2b07a7dc2bbb0134372acfb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4d9150df7126ae11064d38c755d0813"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#ad4d9150df7126ae11064d38c755d0813">ast_taskprocessor_alert_set_levels</a> (struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *tps, long low_water, long high_water)</td></tr>
<tr class="memdesc:ad4d9150df7126ae11064d38c755d0813"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the high and low alert water marks of the given taskprocessor queue.  <a href="#ad4d9150df7126ae11064d38c755d0813">More...</a><br /></td></tr>
<tr class="separator:ad4d9150df7126ae11064d38c755d0813"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab47623e207bf2cdd0edfa613d91894e5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#ab47623e207bf2cdd0edfa613d91894e5">ast_taskprocessor_build_name</a> (char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, unsigned int size, const char *<a class="el" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>,...)</td></tr>
<tr class="memdesc:ab47623e207bf2cdd0edfa613d91894e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a taskprocessor name with a sequence number on the end.  <a href="#ab47623e207bf2cdd0edfa613d91894e5">More...</a><br /></td></tr>
<tr class="separator:ab47623e207bf2cdd0edfa613d91894e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab79575eb73e817bd3afe77c87308e8be"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#ab79575eb73e817bd3afe77c87308e8be">ast_taskprocessor_create_with_listener</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, struct <a class="el" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a> *<a class="el" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a>)</td></tr>
<tr class="memdesc:ab79575eb73e817bd3afe77c87308e8be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a taskprocessor with a custom listener.  <a href="#ab79575eb73e817bd3afe77c87308e8be">More...</a><br /></td></tr>
<tr class="separator:ab79575eb73e817bd3afe77c87308e8be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9318e041c0564532581e864cda8f9426"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a9318e041c0564532581e864cda8f9426">ast_taskprocessor_execute</a> (struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *tps)</td></tr>
<tr class="memdesc:a9318e041c0564532581e864cda8f9426"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pop a task off the taskprocessor and execute it.  <a href="#a9318e041c0564532581e864cda8f9426">More...</a><br /></td></tr>
<tr class="separator:a9318e041c0564532581e864cda8f9426"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac999cc9523590a29dff6acbd9cad24a9"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#ac999cc9523590a29dff6acbd9cad24a9">ast_taskprocessor_get</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, enum <a class="el" href="../../d0/d1e/taskprocessor_8h.html#a42ae78df3dc5106c133bf2f7b72080f7">ast_tps_options</a> create)</td></tr>
<tr class="memdesc:ac999cc9523590a29dff6acbd9cad24a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a reference to a taskprocessor with the specified name and create the taskprocessor if necessary.  <a href="#ac999cc9523590a29dff6acbd9cad24a9">More...</a><br /></td></tr>
<tr class="separator:ac999cc9523590a29dff6acbd9cad24a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaee66f3c01dde2a5c3762c0f30581563"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#aaee66f3c01dde2a5c3762c0f30581563">ast_taskprocessor_get_subsystem_alert</a> (const char *subsystem)</td></tr>
<tr class="memdesc:aaee66f3c01dde2a5c3762c0f30581563"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current taskprocessor high water alert count by sybsystem.  <a href="#aaee66f3c01dde2a5c3762c0f30581563">More...</a><br /></td></tr>
<tr class="separator:aaee66f3c01dde2a5c3762c0f30581563"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37f9fcdd63017df32ddb3b2601d1e223"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a37f9fcdd63017df32ddb3b2601d1e223">ast_taskprocessor_is_suspended</a> (struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *tps)</td></tr>
<tr class="memdesc:a37f9fcdd63017df32ddb3b2601d1e223"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the task processor suspend status.  <a href="#a37f9fcdd63017df32ddb3b2601d1e223">More...</a><br /></td></tr>
<tr class="separator:a37f9fcdd63017df32ddb3b2601d1e223"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a66670abd8be00ab53bd9125a57574f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a4a66670abd8be00ab53bd9125a57574f">ast_taskprocessor_is_task</a> (struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *tps)</td></tr>
<tr class="memdesc:a4a66670abd8be00ab53bd9125a57574f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Am I the given taskprocessor's current task.  <a href="#a4a66670abd8be00ab53bd9125a57574f">More...</a><br /></td></tr>
<tr class="separator:a4a66670abd8be00ab53bd9125a57574f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7d5e40a1f7eac54dcad096b90d013bd"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#ad7d5e40a1f7eac54dcad096b90d013bd">ast_taskprocessor_listener_alloc</a> (const struct <a class="el" href="../../d0/d01/structast__taskprocessor__listener__callbacks.html">ast_taskprocessor_listener_callbacks</a> *callbacks, void *user_data)</td></tr>
<tr class="memdesc:ad7d5e40a1f7eac54dcad096b90d013bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a taskprocessor listener.  <a href="#ad7d5e40a1f7eac54dcad096b90d013bd">More...</a><br /></td></tr>
<tr class="separator:ad7d5e40a1f7eac54dcad096b90d013bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b19a24ebd6df46be8ab735226c7d6a3"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a6b19a24ebd6df46be8ab735226c7d6a3">ast_taskprocessor_listener_get_tps</a> (const struct <a class="el" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a> *<a class="el" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a>)</td></tr>
<tr class="memdesc:a6b19a24ebd6df46be8ab735226c7d6a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a reference to the listener's taskprocessor.  <a href="#a6b19a24ebd6df46be8ab735226c7d6a3">More...</a><br /></td></tr>
<tr class="separator:a6b19a24ebd6df46be8ab735226c7d6a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6906b13a7a37512e36dd1f5148589481"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a6906b13a7a37512e36dd1f5148589481">ast_taskprocessor_listener_get_user_data</a> (const struct <a class="el" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a> *<a class="el" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a>)</td></tr>
<tr class="memdesc:a6906b13a7a37512e36dd1f5148589481"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the user data from the listener.  <a href="#a6906b13a7a37512e36dd1f5148589481">More...</a><br /></td></tr>
<tr class="separator:a6906b13a7a37512e36dd1f5148589481"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa6541086de52447afa994cbfcb792ec"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#aaa6541086de52447afa994cbfcb792ec">ast_taskprocessor_name</a> (struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *tps)</td></tr>
<tr class="memdesc:aaa6541086de52447afa994cbfcb792ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the name of the taskprocessor singleton.  <a href="#aaa6541086de52447afa994cbfcb792ec">More...</a><br /></td></tr>
<tr class="separator:aaa6541086de52447afa994cbfcb792ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f0cc7cda2fe82f4c7df4dbdc57b1372"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a6f0cc7cda2fe82f4c7df4dbdc57b1372">ast_taskprocessor_name_append</a> (char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, unsigned int size, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="memdesc:a6f0cc7cda2fe82f4c7df4dbdc57b1372"><td class="mdescLeft">&#160;</td><td class="mdescRight">Append the next sequence number to the given string, and copy into the buffer.  <a href="#a6f0cc7cda2fe82f4c7df4dbdc57b1372">More...</a><br /></td></tr>
<tr class="separator:a6f0cc7cda2fe82f4c7df4dbdc57b1372"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a815e690b2db467f47655ebaa5d85fb69"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a815e690b2db467f47655ebaa5d85fb69">ast_taskprocessor_push</a> (struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *tps, int(*task_exe)(void *datap), void *datap)</td></tr>
<tr class="memdesc:a815e690b2db467f47655ebaa5d85fb69"><td class="mdescLeft">&#160;</td><td class="mdescRight">Push a task into the specified taskprocessor queue and signal the taskprocessor thread.  <a href="#a815e690b2db467f47655ebaa5d85fb69">More...</a><br /></td></tr>
<tr class="separator:a815e690b2db467f47655ebaa5d85fb69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43ab592c14d8bc446539b539a5d60e6b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a43ab592c14d8bc446539b539a5d60e6b">ast_taskprocessor_push_local</a> (struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *tps, int(*task_exe)(struct <a class="el" href="../../dc/ded/structast__taskprocessor__local.html">ast_taskprocessor_local</a> *datap), void *datap)</td></tr>
<tr class="separator:a43ab592c14d8bc446539b539a5d60e6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d17cb910ea569aa91235d174c126f55"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a6d17cb910ea569aa91235d174c126f55">ast_taskprocessor_seq_num</a> (void)</td></tr>
<tr class="memdesc:a6d17cb910ea569aa91235d174c126f55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the next sequence number to create a human friendly taskprocessor name.  <a href="#a6d17cb910ea569aa91235d174c126f55">More...</a><br /></td></tr>
<tr class="separator:a6d17cb910ea569aa91235d174c126f55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a208c9f9b930e83c7bdb833c66f13d5e8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a208c9f9b930e83c7bdb833c66f13d5e8">ast_taskprocessor_set_local</a> (struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *tps, void *local_data)</td></tr>
<tr class="memdesc:a208c9f9b930e83c7bdb833c66f13d5e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the local data associated with a taskprocessor.  <a href="#a208c9f9b930e83c7bdb833c66f13d5e8">More...</a><br /></td></tr>
<tr class="separator:a208c9f9b930e83c7bdb833c66f13d5e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83d09062fb3c84cf1c84a04174deb2bf"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a83d09062fb3c84cf1c84a04174deb2bf">ast_taskprocessor_size</a> (struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *tps)</td></tr>
<tr class="memdesc:a83d09062fb3c84cf1c84a04174deb2bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the current size of the taskprocessor queue.  <a href="#a83d09062fb3c84cf1c84a04174deb2bf">More...</a><br /></td></tr>
<tr class="separator:a83d09062fb3c84cf1c84a04174deb2bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeea7131da6b62d2e9b5d91c5de529d6c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#aeea7131da6b62d2e9b5d91c5de529d6c">ast_taskprocessor_suspend</a> (struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *tps)</td></tr>
<tr class="memdesc:aeea7131da6b62d2e9b5d91c5de529d6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicate the taskprocessor is suspended.  <a href="#aeea7131da6b62d2e9b5d91c5de529d6c">More...</a><br /></td></tr>
<tr class="separator:aeea7131da6b62d2e9b5d91c5de529d6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32492eb2480cb8c46ad669622cff8556"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a> (struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *tps)</td></tr>
<tr class="memdesc:a32492eb2480cb8c46ad669622cff8556"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unreference the specified taskprocessor and its reference count will decrement.  <a href="#a32492eb2480cb8c46ad669622cff8556">More...</a><br /></td></tr>
<tr class="separator:a32492eb2480cb8c46ad669622cff8556"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8460a4b877658e3c2a6abbafcfa4c54c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a8460a4b877658e3c2a6abbafcfa4c54c">ast_taskprocessor_unsuspend</a> (struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *tps)</td></tr>
<tr class="memdesc:a8460a4b877658e3c2a6abbafcfa4c54c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicate the taskprocessor is unsuspended.  <a href="#a8460a4b877658e3c2a6abbafcfa4c54c">More...</a><br /></td></tr>
<tr class="separator:a8460a4b877658e3c2a6abbafcfa4c54c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58f95b0d90cc7fe0d44ec5aae481c819"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a58f95b0d90cc7fe0d44ec5aae481c819">ast_tps_init</a> (void)</td></tr>
<tr class="separator:a58f95b0d90cc7fe0d44ec5aae481c819"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad520ee0eb492782ddeb5b48c73305caf"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#ad520ee0eb492782ddeb5b48c73305caf">AST_VECTOR_RW</a> (subsystem_alert_vector, struct <a class="el" href="../../d9/da5/structsubsystem__alert.html">subsystem_alert</a> *)</td></tr>
<tr class="memdesc:ad520ee0eb492782ddeb5b48c73305caf"><td class="mdescLeft">&#160;</td><td class="mdescRight">CLI taskprocessor ping &lt;blah&gt;operation requires a ping condition lock.  <a href="#ad520ee0eb492782ddeb5b48c73305caf">More...</a><br /></td></tr>
<tr class="separator:ad520ee0eb492782ddeb5b48c73305caf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2231d9f6c9381e33d920834a5cc0af4"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#af2231d9f6c9381e33d920834a5cc0af4">cli_subsystem_alert_report</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:af2231d9f6c9381e33d920834a5cc0af4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87122ffa2ccde0c8ee4cfee1cb898ba2"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a87122ffa2ccde0c8ee4cfee1cb898ba2">cli_tps_ping</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a87122ffa2ccde0c8ee4cfee1cb898ba2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7496467fecf5a17ededca8b03a4aa1f"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#af7496467fecf5a17ededca8b03a4aa1f">cli_tps_report</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:af7496467fecf5a17ededca8b03a4aa1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ce71f4e99a26647186ad0df4acab995"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a9ce71f4e99a26647186ad0df4acab995">cli_tps_reset_stats</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a9ce71f4e99a26647186ad0df4acab995"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1765245db29756bf7dfe2dd16f6f5119"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a1765245db29756bf7dfe2dd16f6f5119">cli_tps_reset_stats_all</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a1765245db29756bf7dfe2dd16f6f5119"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab42ce2663f8533519c8f7e4ff7248327"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#ab42ce2663f8533519c8f7e4ff7248327">default_listener_die</a> (void *data)</td></tr>
<tr class="separator:ab42ce2663f8533519c8f7e4ff7248327"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6314b05bebeaff91454d8ca7254472b8"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a6314b05bebeaff91454d8ca7254472b8">default_listener_pvt_alloc</a> (void)</td></tr>
<tr class="separator:a6314b05bebeaff91454d8ca7254472b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5ca68ce20aadfbc7e14071bf33a77ed"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#af5ca68ce20aadfbc7e14071bf33a77ed">default_listener_pvt_destroy</a> (struct <a class="el" href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html">default_taskprocessor_listener_pvt</a> *pvt)</td></tr>
<tr class="separator:af5ca68ce20aadfbc7e14071bf33a77ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c160b3769d82ca6aa9ef343d877ef2c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a3c160b3769d82ca6aa9ef343d877ef2c">default_listener_pvt_dtor</a> (struct <a class="el" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a> *<a class="el" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a>)</td></tr>
<tr class="separator:a3c160b3769d82ca6aa9ef343d877ef2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f4f599df1be87b1de304367a773c1b1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a4f4f599df1be87b1de304367a773c1b1">default_listener_shutdown</a> (struct <a class="el" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a> *<a class="el" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a>)</td></tr>
<tr class="separator:a4f4f599df1be87b1de304367a773c1b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94984044fce81d315bb69459ef6d6e46"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a94984044fce81d315bb69459ef6d6e46">default_listener_start</a> (struct <a class="el" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a> *<a class="el" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a>)</td></tr>
<tr class="separator:a94984044fce81d315bb69459ef6d6e46"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5194de8e24eb6c0eb1c7e52f5a605a2e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a5194de8e24eb6c0eb1c7e52f5a605a2e">default_task_pushed</a> (struct <a class="el" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a> *<a class="el" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a>, int was_empty)</td></tr>
<tr class="separator:a5194de8e24eb6c0eb1c7e52f5a605a2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab17b070cbedb009abf687d8cea55d006"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#ab17b070cbedb009abf687d8cea55d006">default_tps_processing_function</a> (void *data)</td></tr>
<tr class="memdesc:ab17b070cbedb009abf687d8cea55d006"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function that processes tasks in the taskprocessor.  <a href="#ab17b070cbedb009abf687d8cea55d006">More...</a><br /></td></tr>
<tr class="separator:ab17b070cbedb009abf687d8cea55d006"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57a0544f529b470405be3c2d1c209bd8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a57a0544f529b470405be3c2d1c209bd8">listener_shutdown</a> (struct <a class="el" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a> *<a class="el" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a>)</td></tr>
<tr class="separator:a57a0544f529b470405be3c2d1c209bd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86eb1ac443df93dbb344351880829b9e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a86eb1ac443df93dbb344351880829b9e">subsystem_alert_decrement</a> (const char *subsystem)</td></tr>
<tr class="separator:a86eb1ac443df93dbb344351880829b9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba5b6a0a46499bc6570527fb9361b212"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#aba5b6a0a46499bc6570527fb9361b212">subsystem_alert_increment</a> (const char *subsystem)</td></tr>
<tr class="separator:aba5b6a0a46499bc6570527fb9361b212"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7d37da42e257b24c6792515bf929f98"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#af7d37da42e257b24c6792515bf929f98">subsystem_cmp</a> (struct <a class="el" href="../../d9/da5/structsubsystem__alert.html">subsystem_alert</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>, struct <a class="el" href="../../d9/da5/structsubsystem__alert.html">subsystem_alert</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>)</td></tr>
<tr class="separator:af7d37da42e257b24c6792515bf929f98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65e4a8f7f8e6b84cdf6731b4cd62585f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a65e4a8f7f8e6b84cdf6731b4cd62585f">subsystem_copy</a> (struct <a class="el" href="../../d9/da5/structsubsystem__alert.html">subsystem_alert</a> *alert, struct subsystem_alert_vector *vector)</td></tr>
<tr class="separator:a65e4a8f7f8e6b84cdf6731b4cd62585f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd693356739cff532d6b8184215ace77"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#afd693356739cff532d6b8184215ace77">subsystem_match</a> (struct <a class="el" href="../../d9/da5/structsubsystem__alert.html">subsystem_alert</a> *alert, const char *subsystem)</td></tr>
<tr class="separator:afd693356739cff532d6b8184215ace77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adae19da477b734d7470b3013a761fb9c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#adae19da477b734d7470b3013a761fb9c">taskprocessor_listener_dtor</a> (void *obj)</td></tr>
<tr class="separator:adae19da477b734d7470b3013a761fb9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a458f3e603669bc087d571e28c6b23424"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a458f3e603669bc087d571e28c6b23424">taskprocessor_push</a> (struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *tps, struct <a class="el" href="../../d3/d60/structtps__task.html">tps_task</a> *t)</td></tr>
<tr class="separator:a458f3e603669bc087d571e28c6b23424"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addc1eaecfa48679c5b0c4efb5bd45534"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#addc1eaecfa48679c5b0c4efb5bd45534">tps_alert_add</a> (struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *tps, int delta)</td></tr>
<tr class="separator:addc1eaecfa48679c5b0c4efb5bd45534"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad12172ebca405a9600704348ac059ec2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#ad12172ebca405a9600704348ac059ec2">tps_cmp_cb</a> (void *obj, void *arg, int flags)</td></tr>
<tr class="memdesc:ad12172ebca405a9600704348ac059ec2"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="../../d3/dfb/structastobj2.html">astobj2</a> compare callback for taskprocessors.  <a href="#ad12172ebca405a9600704348ac059ec2">More...</a><br /></td></tr>
<tr class="separator:ad12172ebca405a9600704348ac059ec2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4e09c51f3627ca1091628718067ed7c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#ae4e09c51f3627ca1091628718067ed7c">tps_hash_cb</a> (const void *obj, const int flags)</td></tr>
<tr class="memdesc:ae4e09c51f3627ca1091628718067ed7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="../../d3/dfb/structastobj2.html">astobj2</a> hash callback for taskprocessors.  <a href="#ae4e09c51f3627ca1091628718067ed7c">More...</a><br /></td></tr>
<tr class="separator:ae4e09c51f3627ca1091628718067ed7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a445163d192c7b9fe8eca67679c19472c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a445163d192c7b9fe8eca67679c19472c">tps_ping_handler</a> (void *datap)</td></tr>
<tr class="memdesc:a445163d192c7b9fe8eca67679c19472c"><td class="mdescLeft">&#160;</td><td class="mdescRight">CLI taskprocessor ping &lt;blah&gt;handler function.  <a href="#a445163d192c7b9fe8eca67679c19472c">More...</a><br /></td></tr>
<tr class="separator:a445163d192c7b9fe8eca67679c19472c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d97246b005106981887b28595a2663d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a7d97246b005106981887b28595a2663d">tps_report_taskprocessor_list</a> (int fd, const char *like)</td></tr>
<tr class="separator:a7d97246b005106981887b28595a2663d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a552f2108b43f928be7529e15ff426fe1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a552f2108b43f928be7529e15ff426fe1">tps_report_taskprocessor_list_helper</a> (int fd, struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *tps)</td></tr>
<tr class="separator:a552f2108b43f928be7529e15ff426fe1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a066af12f04560a8f62daf5c13e5029c1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a066af12f04560a8f62daf5c13e5029c1">tps_reset_stats</a> (struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *tps)</td></tr>
<tr class="separator:a066af12f04560a8f62daf5c13e5029c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b0baeae7f77179e7864de00bb638608"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a1b0baeae7f77179e7864de00bb638608">tps_shutdown</a> (void)</td></tr>
<tr class="separator:a1b0baeae7f77179e7864de00bb638608"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1eed27e1b0af1736961f29abb083c994"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a1eed27e1b0af1736961f29abb083c994">tps_sort_cb</a> (const void *obj_left, const void *obj_right, int flags)</td></tr>
<tr class="separator:a1eed27e1b0af1736961f29abb083c994"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e47192322efd29dd1b30c9f1adc9f52"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d3/d60/structtps__task.html">tps_task</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a1e47192322efd29dd1b30c9f1adc9f52">tps_task_alloc</a> (int(*task_exe)(void *datap), void *datap)</td></tr>
<tr class="separator:a1e47192322efd29dd1b30c9f1adc9f52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc08ed07cfd43715ff560a0a4e19eb8c"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d3/d60/structtps__task.html">tps_task</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#acc08ed07cfd43715ff560a0a4e19eb8c">tps_task_alloc_local</a> (int(*task_exe)(struct <a class="el" href="../../dc/ded/structast__taskprocessor__local.html">ast_taskprocessor_local</a> *local), void *datap)</td></tr>
<tr class="separator:acc08ed07cfd43715ff560a0a4e19eb8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8f1469650cc0c4de3f74dc4ec515207"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#ab8f1469650cc0c4de3f74dc4ec515207">tps_task_free</a> (struct <a class="el" href="../../d3/d60/structtps__task.html">tps_task</a> *<a class="el" href="../../df/df7/test__taskprocessor_8c.html#a07d08fd44ac4a9f8e1319ce270f5d56a">task</a>)</td></tr>
<tr class="separator:ab8f1469650cc0c4de3f74dc4ec515207"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe5e9c0c054877963f85c121b0f6741b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#abe5e9c0c054877963f85c121b0f6741b">tps_taskprocessor_dtor</a> (void *tps)</td></tr>
<tr class="separator:abe5e9c0c054877963f85c121b0f6741b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af989d4cac357f8adb289a4f7bf4374cb"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d3/d60/structtps__task.html">tps_task</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#af989d4cac357f8adb289a4f7bf4374cb">tps_taskprocessor_pop</a> (struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *tps)</td></tr>
<tr class="separator:af989d4cac357f8adb289a4f7bf4374cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeca2901665160872eff5b7f98775822"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#afeca2901665160872eff5b7f98775822">tps_taskprocessor_tab_complete</a> (struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:afeca2901665160872eff5b7f98775822"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aad81e8feb180e9e5030db0143968b794"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../d0/d01/structast__taskprocessor__listener__callbacks.html">ast_taskprocessor_listener_callbacks</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#aad81e8feb180e9e5030db0143968b794">default_listener_callbacks</a></td></tr>
<tr class="separator:aad81e8feb180e9e5030db0143968b794"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f1ff5f2bf7938f6d216f04f0057486e"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a3f1ff5f2bf7938f6d216f04f0057486e">taskprocessor_clis</a> []</td></tr>
<tr class="separator:a3f1ff5f2bf7938f6d216f04f0057486e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4757bee5df8834ec0044fb999170a712"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#a4757bee5df8834ec0044fb999170a712">tps_alert_count</a></td></tr>
<tr class="separator:a4757bee5df8834ec0044fb999170a712"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeeef0590292628c276ac75209f531c3"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#a04e2a4450668b0cd2be05edd6259df19">ast_rwlock_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/deb/taskprocessor_8c.html#afeeef0590292628c276ac75209f531c3">tps_alert_lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td></tr>
<tr class="separator:afeeef0590292628c276ac75209f531c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Maintain a container of uniquely-named taskprocessor threads that can be shared across modules. </p>
<dl class="section author"><dt>Author</dt><dd>Dwayne Hubbard <a href="#" onclick="location.href='mai'+'lto:'+'dhu'+'bb'+'ard'+'@d'+'igi'+'um'+'.co'+'m'; return false;">dhubb<span style="display: none;">.nosp@m.</span>ard@<span style="display: none;">.nosp@m.</span>digiu<span style="display: none;">.nosp@m.</span>m.co<span style="display: none;">.nosp@m.</span>m</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a28e4a2cd5d9cefd5714c0a3ce2a35499"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28e4a2cd5d9cefd5714c0a3ce2a35499">&#9670;&nbsp;</a></span>FMT_FIELDS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FMT_FIELDS&#160;&#160;&#160;&quot;%-70s %10lu %10lu %10lu %10lu %10lu\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00511">511</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00521">tps_report_taskprocessor_list_helper()</a>.</p>

</div>
</div>
<a id="aed8c117feb31a243131f766855998d23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed8c117feb31a243131f766855998d23">&#9670;&nbsp;</a></span>FMT_FIELDS_SUBSYSTEM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FMT_FIELDS_SUBSYSTEM&#160;&#160;&#160;&quot;%-32s %12u\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00729">cli_subsystem_alert_report()</a>.</p>

</div>
</div>
<a id="a23b24e0f93569bfc937a4bc9143c21e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23b24e0f93569bfc937a4bc9143c21e3">&#9670;&nbsp;</a></span>FMT_HEADERS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FMT_HEADERS&#160;&#160;&#160;&quot;%-70s %10s %10s %10s %10s %10s\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00510">510</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00576">cli_tps_report()</a>.</p>

</div>
</div>
<a id="a35d4f34f427c4aa9fd3e83349113d2ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35d4f34f427c4aa9fd3e83349113d2ed">&#9670;&nbsp;</a></span>FMT_HEADERS_SUBSYSTEM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FMT_HEADERS_SUBSYSTEM&#160;&#160;&#160;&quot;%-32s %12s\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00729">cli_subsystem_alert_report()</a>.</p>

</div>
</div>
<a id="ad673ddccb6db4af7af1cb47b3e97ee39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad673ddccb6db4af7af1cb47b3e97ee39">&#9670;&nbsp;</a></span>SEQ_STR_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEQ_STR_SIZE&#160;&#160;&#160;(1 + 8 + 1)	/* Dash plus 8 hex digits plus null terminator */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01283">1283</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01295">ast_taskprocessor_build_name()</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01285">ast_taskprocessor_name_append()</a>.</p>

</div>
</div>
<a id="a324cc9d868c635cb5bff2e559024b78b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a324cc9d868c635cb5bff2e559024b78b">&#9670;&nbsp;</a></span>TPS_MAX_BUCKETS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TPS_MAX_BUCKETS&#160;&#160;&#160;1567</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00301">ast_tps_init()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a2ef06a1672c6c7c3ac36cee03ab1a8ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ef06a1672c6c7c3ac36cee03ab1a8ee">&#9670;&nbsp;</a></span>__allocate_taskprocessor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a>* __allocate_taskprocessor </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a> *&#160;</td>
          <td class="paramname"><em>listener</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00983">983</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01572">ao2_link_flags</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00066">AST_PTHREADT_NULL</a>, <a class="el" href="../../d0/d1e/taskprocessor_8h_source.html#l00063">AST_TASKPROCESSOR_HIGH_WATER_LEVEL</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00081">ast_taskprocessor::listener</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l01476">listener()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00097">ast_taskprocessor::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01067">OBJ_NOLOCK</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00093">ast_taskprocessor::subsystem</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00083">ast_taskprocessor::thread</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00114">ast_taskprocessor_listener::tps</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00078">ast_taskprocessor::tps_queue_high</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00076">ast_taskprocessor::tps_queue_low</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00866">tps_taskprocessor_dtor()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01083">ast_taskprocessor_create_with_listener()</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01044">ast_taskprocessor_get()</a>.</p>
<div class="fragment"><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;{</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *p;</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;   <span class="keywordtype">char</span> *subsystem_separator;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;   <span class="keywordtype">size_t</span> subsystem_length = 0;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;   <span class="keywordtype">size_t</span> name_length;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;   name_length = strlen(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;   subsystem_separator = strchr(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <span class="charliteral">&#39;/&#39;</span>);</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;   <span class="keywordflow">if</span> (subsystem_separator) {</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      subsystem_length = subsystem_separator - <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;   }</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;   p = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*p) + name_length + subsystem_length + 2, <a class="code" href="../../d4/deb/taskprocessor_8c.html#abe5e9c0c054877963f85c121b0f6741b">tps_taskprocessor_dtor</a>);</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;   <span class="keywordflow">if</span> (!p) {</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;failed to create taskprocessor &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;   }</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;   <span class="comment">/* Set default congestion water level alert triggers. */</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;   p-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a281a55644ba8295d14b5ad5c5935b6cc">tps_queue_low</a> = (<a class="code" href="../../d0/d1e/taskprocessor_8h.html#ad4a3db2b08877779bd481a649318be7d">AST_TASKPROCESSOR_HIGH_WATER_LEVEL</a> * 9) / 10;</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;   p-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a7421fed4da8332ef256efdfdb61bb563">tps_queue_high</a> = <a class="code" href="../../d0/d1e/taskprocessor_8h.html#ad4a3db2b08877779bd481a649318be7d">AST_TASKPROCESSOR_HIGH_WATER_LEVEL</a>;</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;   strcpy(p-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>); <span class="comment">/* Safe */</span></div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;   p-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#ae6d317216d283a76a7b07a63a181c9ad">subsystem</a> = p-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a> + name_length + 1;</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(p-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#ae6d317216d283a76a7b07a63a181c9ad">subsystem</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, subsystem_length + 1);</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(listener, +1);</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;   p-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a9dbaf508f8a891a7dfca0827ba489abc">listener</a> = <a class="code" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a>;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;   p-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a01f75a9ad916f63a94e06a27635ba278">thread</a> = <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(p, +1);</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;   listener-&gt;<a class="code" href="../../d7/d52/structast__taskprocessor__listener.html#a4c381cb1b5cf198fa3f260212e716c9a">tps</a> = p;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;   <span class="keywordflow">if</span> (!(<a class="code" href="../../d5/da5/astobj2_8h.html#a7ce8563daf84a18540a86504d165b444">ao2_link_flags</a>(tps_singletons, p, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a>))) {</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to add taskprocessor &#39;%s&#39; to container\n&quot;</span>, p-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>);</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;      listener-&gt;<a class="code" href="../../d7/d52/structast__taskprocessor__listener.html#a4c381cb1b5cf198fa3f260212e716c9a">tps</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(p, -2);</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;   }</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;   <span class="keywordflow">return</span> p;</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;}</div><div class="ttc" id="structast__taskprocessor_html_afd3f693e384b1ee0a0c44d58351eb87d"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#afd3f693e384b1ee0a0c44d58351eb87d">ast_taskprocessor::name</a></div><div class="ttdeci">char name[0]</div><div class="ttdoc">Friendly name of the taskprocessor. Subsystem is appended after the name&amp;#39;s NULL terminator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00097">taskprocessor.c:97</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_ad4a3db2b08877779bd481a649318be7d"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#ad4a3db2b08877779bd481a649318be7d">AST_TASKPROCESSOR_HIGH_WATER_LEVEL</a></div><div class="ttdeci">#define AST_TASKPROCESSOR_HIGH_WATER_LEVEL</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1e/taskprocessor_8h_source.html#l00063">taskprocessor.h:63</a></div></div>
<div class="ttc" id="structast__taskprocessor__listener_html_a4c381cb1b5cf198fa3f260212e716c9a"><div class="ttname"><a href="../../d7/d52/structast__taskprocessor__listener.html#a4c381cb1b5cf198fa3f260212e716c9a">ast_taskprocessor_listener::tps</a></div><div class="ttdeci">struct ast_taskprocessor * tps</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00114">taskprocessor.c:114</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a></div><div class="ttdoc">Assume that the ao2_container is already locked. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01067">astobj2.h:1067</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_a01f75a9ad916f63a94e06a27635ba278"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#a01f75a9ad916f63a94e06a27635ba278">ast_taskprocessor::thread</a></div><div class="ttdeci">pthread_t thread</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00083">taskprocessor.c:83</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_a9dbaf508f8a891a7dfca0827ba489abc"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#a9dbaf508f8a891a7dfca0827ba489abc">ast_taskprocessor::listener</a></div><div class="ttdeci">struct ast_taskprocessor_listener * listener</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00081">taskprocessor.c:81</a></div></div>
<div class="ttc" id="astobj2_8h_html_a7ce8563daf84a18540a86504d165b444"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a7ce8563daf84a18540a86504d165b444">ao2_link_flags</a></div><div class="ttdeci">#define ao2_link_flags(container, obj, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01572">astobj2.h:1572</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_a7421fed4da8332ef256efdfdb61bb563"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#a7421fed4da8332ef256efdfdb61bb563">ast_taskprocessor::tps_queue_high</a></div><div class="ttdeci">long tps_queue_high</div><div class="ttdoc">Taskprocessor high water alert trigger level. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00078">taskprocessor.c:78</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_a281a55644ba8295d14b5ad5c5935b6cc"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#a281a55644ba8295d14b5ad5c5935b6cc">ast_taskprocessor::tps_queue_low</a></div><div class="ttdeci">long tps_queue_low</div><div class="ttdoc">Taskprocessor low water clear alert level. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00076">taskprocessor.c:76</a></div></div>
<div class="ttc" id="asterisk_8c_html_adc01bca6281492dfec5ae217cf32fc34"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a></div><div class="ttdeci">static void * listener(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01476">asterisk.c:1476</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_ae6d317216d283a76a7b07a63a181c9ad"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#ae6d317216d283a76a7b07a63a181c9ad">ast_taskprocessor::subsystem</a></div><div class="ttdeci">char * subsystem</div><div class="ttdoc">Anything before the first &amp;#39;/&amp;#39; in the name (if there is one) </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00093">taskprocessor.c:93</a></div></div>
<div class="ttc" id="lock_8h_html_a6009440c7a72f8e2e3b1ec97641ad160"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></div><div class="ttdeci">#define AST_PTHREADT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00066">lock.h:66</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structast__taskprocessor_html"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a></div><div class="ttdoc">A ast_taskprocessor structure is a singleton by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00069">taskprocessor.c:69</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_abe5e9c0c054877963f85c121b0f6741b"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#abe5e9c0c054877963f85c121b0f6741b">tps_taskprocessor_dtor</a></div><div class="ttdeci">static void tps_taskprocessor_dtor(void *tps)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00866">taskprocessor.c:866</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af1085e4adbfe31c0f31604b365543b84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1085e4adbfe31c0f31604b365543b84">&#9670;&nbsp;</a></span>__start_taskprocessor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a>* __start_taskprocessor </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01028">1028</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01109">ast_taskprocessor_unreference()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00112">ast_taskprocessor_listener::callbacks</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00081">ast_taskprocessor::listener</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00097">ast_taskprocessor::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d0/d1e/taskprocessor_8h_source.html#l00091">ast_taskprocessor_listener_callbacks::start</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01083">ast_taskprocessor_create_with_listener()</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01044">ast_taskprocessor_get()</a>.</p>
<div class="fragment"><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;{</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;   <span class="keywordflow">if</span> (p &amp;&amp; p-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a9dbaf508f8a891a7dfca0827ba489abc">listener</a>-&gt;<a class="code" href="../../d7/d52/structast__taskprocessor__listener.html#addf12c55d68372c220c81f61e800a6c6">callbacks</a>-&gt;<a class="code" href="../../d0/d01/structast__taskprocessor__listener__callbacks.html#a2d408839d336837c67a8d409d80ae2de">start</a>(p-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a9dbaf508f8a891a7dfca0827ba489abc">listener</a>)) {</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to start taskprocessor listener for taskprocessor %s\n&quot;</span>,</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;         p-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>);</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;      <a class="code" href="../../d4/deb/taskprocessor_8c.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a>(p);</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;   }</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;   <span class="keywordflow">return</span> p;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;}</div><div class="ttc" id="structast__taskprocessor__listener_html_addf12c55d68372c220c81f61e800a6c6"><div class="ttname"><a href="../../d7/d52/structast__taskprocessor__listener.html#addf12c55d68372c220c81f61e800a6c6">ast_taskprocessor_listener::callbacks</a></div><div class="ttdeci">const struct ast_taskprocessor_listener_callbacks * callbacks</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00112">taskprocessor.c:112</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_afd3f693e384b1ee0a0c44d58351eb87d"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#afd3f693e384b1ee0a0c44d58351eb87d">ast_taskprocessor::name</a></div><div class="ttdeci">char name[0]</div><div class="ttdoc">Friendly name of the taskprocessor. Subsystem is appended after the name&amp;#39;s NULL terminator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00097">taskprocessor.c:97</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_a32492eb2480cb8c46ad669622cff8556"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a></div><div class="ttdeci">void * ast_taskprocessor_unreference(struct ast_taskprocessor *tps)</div><div class="ttdoc">Unreference the specified taskprocessor and its reference count will decrement. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01109">taskprocessor.c:1109</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_a9dbaf508f8a891a7dfca0827ba489abc"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#a9dbaf508f8a891a7dfca0827ba489abc">ast_taskprocessor::listener</a></div><div class="ttdeci">struct ast_taskprocessor_listener * listener</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00081">taskprocessor.c:81</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structast__taskprocessor__listener__callbacks_html_a2d408839d336837c67a8d409d80ae2de"><div class="ttname"><a href="../../d0/d01/structast__taskprocessor__listener__callbacks.html#a2d408839d336837c67a8d409d80ae2de">ast_taskprocessor_listener_callbacks::start</a></div><div class="ttdeci">int(* start)(struct ast_taskprocessor_listener *listener)</div><div class="ttdoc">The taskprocessor has started completely. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1e/taskprocessor_8h_source.html#l00091">taskprocessor.h:91</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a44bed16d2b07a7dc2bbb0134372acfb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44bed16d2b07a7dc2bbb0134372acfb7">&#9670;&nbsp;</a></span>ast_taskprocessor_alert_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int ast_taskprocessor_alert_get </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the current taskprocessor high water alert count. </p>
<dl class="section since"><dt>Since</dt><dd>13.10.0</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if no taskprocessors are in high water alert. </td></tr>
    <tr><td class="paramname">non-zero</td><td>if some task processors are in high water alert. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00819">819</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00233">ast_rwlock_rdlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00232">ast_rwlock_unlock</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00779">tps_alert_count</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00782">tps_alert_lock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00180">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d7/dad/pjsip__distributor_8c_source.html#l00485">distributor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;{</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a>(&amp;<a class="code" href="../../d4/deb/taskprocessor_8c.html#afeeef0590292628c276ac75209f531c3">tps_alert_lock</a>);</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;   count = <a class="code" href="../../d4/deb/taskprocessor_8c.html#a4757bee5df8834ec0044fb999170a712">tps_alert_count</a>;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d4/deb/taskprocessor_8c.html#afeeef0590292628c276ac75209f531c3">tps_alert_lock</a>);</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;   <span class="keywordflow">return</span> count;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;}</div><div class="ttc" id="lock_8h_html_a7330ac9d36b05bad68b188c2dcfa42d7"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a></div><div class="ttdeci">#define ast_rwlock_rdlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00233">lock.h:233</a></div></div>
<div class="ttc" id="lock_8h_html_ac2920a1db37313ec46bd91dc83bf9c8a"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a></div><div class="ttdeci">#define ast_rwlock_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00232">lock.h:232</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_afeeef0590292628c276ac75209f531c3"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#afeeef0590292628c276ac75209f531c3">tps_alert_lock</a></div><div class="ttdeci">static ast_rwlock_t tps_alert_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00782">taskprocessor.c:782</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_a4757bee5df8834ec0044fb999170a712"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a4757bee5df8834ec0044fb999170a712">tps_alert_count</a></div><div class="ttdeci">static unsigned int tps_alert_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00779">taskprocessor.c:779</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad4d9150df7126ae11064d38c755d0813"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4d9150df7126ae11064d38c755d0813">&#9670;&nbsp;</a></span>ast_taskprocessor_alert_set_levels()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_taskprocessor_alert_set_levels </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *&#160;</td>
          <td class="paramname"><em>tps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>low_water</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>high_water</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the high and low alert water marks of the given taskprocessor queue. </p>
<dl class="section since"><dt>Since</dt><dd>13.10.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tps</td><td>Taskprocessor to update queue water marks. </td></tr>
    <tr><td class="paramname">low_water</td><td>New queue low water mark. (-1 to set as 90% of high_water) </td></tr>
    <tr><td class="paramname">high_water</td><td>New queue high water mark.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error (water marks not changed). </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00830">830</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00089">ast_taskprocessor::high_water_alert</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00794">tps_alert_add()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00078">ast_taskprocessor::tps_queue_high</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00076">ast_taskprocessor::tps_queue_low</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00074">ast_taskprocessor::tps_queue_size</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l13680">actual_load_config()</a>, <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l02918">ast_res_pjsip_init_options_handling()</a>, <a class="el" href="../../d6/dd3/serializer_8c_source.html#l00156">ast_serializer_pool_set_alerts()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l01114">ast_sorcery_object_set_congestion_levels()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00180">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01013">stasis_subscription_set_congestion_limits()</a>.</p>
<div class="fragment"><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;{</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;   <span class="keywordflow">if</span> (!tps || high_water &lt; 0 || high_water &lt; low_water) {</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;   }</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;   <span class="keywordflow">if</span> (low_water &lt; 0) {</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      <span class="comment">/* Set low water level to 90% of high water level */</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      low_water = (high_water * 9) / 10;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;   }</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(tps);</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;   tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a281a55644ba8295d14b5ad5c5935b6cc">tps_queue_low</a> = low_water;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;   tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a7421fed4da8332ef256efdfdb61bb563">tps_queue_high</a> = high_water;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;   <span class="keywordflow">if</span> (tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a80e170193fe4d362e68c72e8deff70b4">high_water_alert</a>) {</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      <span class="keywordflow">if</span> (!tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#afe2dfc83eb5b460f39e9e5513023e74e">tps_queue_size</a> || tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#afe2dfc83eb5b460f39e9e5513023e74e">tps_queue_size</a> &lt; low_water) {</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;         <span class="comment">/* Update water mark alert immediately */</span></div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;         tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a80e170193fe4d362e68c72e8deff70b4">high_water_alert</a> = 0;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;         <a class="code" href="../../d4/deb/taskprocessor_8c.html#addc1eaecfa48679c5b0c4efb5bd45534">tps_alert_add</a>(tps, -1);</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;      }</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      <span class="keywordflow">if</span> (high_water &lt; tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#afe2dfc83eb5b460f39e9e5513023e74e">tps_queue_size</a>) {</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;         <span class="comment">/* Update water mark alert immediately */</span></div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;         tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a80e170193fe4d362e68c72e8deff70b4">high_water_alert</a> = 1;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;         <a class="code" href="../../d4/deb/taskprocessor_8c.html#addc1eaecfa48679c5b0c4efb5bd45534">tps_alert_add</a>(tps, +1);</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;      }</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;   }</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(tps);</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;}</div><div class="ttc" id="structast__taskprocessor_html_a80e170193fe4d362e68c72e8deff70b4"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#a80e170193fe4d362e68c72e8deff70b4">ast_taskprocessor::high_water_alert</a></div><div class="ttdeci">unsigned int high_water_alert</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00089">taskprocessor.c:89</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_a7421fed4da8332ef256efdfdb61bb563"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#a7421fed4da8332ef256efdfdb61bb563">ast_taskprocessor::tps_queue_high</a></div><div class="ttdeci">long tps_queue_high</div><div class="ttdoc">Taskprocessor high water alert trigger level. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00078">taskprocessor.c:78</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_addc1eaecfa48679c5b0c4efb5bd45534"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#addc1eaecfa48679c5b0c4efb5bd45534">tps_alert_add</a></div><div class="ttdeci">static void tps_alert_add(struct ast_taskprocessor *tps, int delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00794">taskprocessor.c:794</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_a281a55644ba8295d14b5ad5c5935b6cc"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#a281a55644ba8295d14b5ad5c5935b6cc">ast_taskprocessor::tps_queue_low</a></div><div class="ttdeci">long tps_queue_low</div><div class="ttdoc">Taskprocessor low water clear alert level. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00076">taskprocessor.c:76</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_afe2dfc83eb5b460f39e9e5513023e74e"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#afe2dfc83eb5b460f39e9e5513023e74e">ast_taskprocessor::tps_queue_size</a></div><div class="ttdeci">long tps_queue_size</div><div class="ttdoc">Taskprocessor current queue size. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00074">taskprocessor.c:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab47623e207bf2cdd0edfa613d91894e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab47623e207bf2cdd0edfa613d91894e5">&#9670;&nbsp;</a></span>ast_taskprocessor_build_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_taskprocessor_build_name </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build a taskprocessor name with a sequence number on the end. </p>
<dl class="section since"><dt>Since</dt><dd>13.8.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>Where to put the built taskprocessor name. </td></tr>
    <tr><td class="paramname">size</td><td>How large is buf including null terminator. </td></tr>
    <tr><td class="paramname">format</td><td>printf format to create the non-sequenced part of the name.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The user supplied part of the taskprocessor name is truncated to allow the full sequence number to be appended within the supplied buffer size.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01295">1295</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01276">ast_taskprocessor_seq_num()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01283">SEQ_STR_SIZE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l01496">alloc_playback_chan()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01405">allocate_subscription_tree()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02990">ast_sip_session_alloc()</a>, <a class="el" href="../../d2/db8/res__pjsip__transport__websocket_8c_source.html#l00349">create_websocket_serializer()</a>, <a class="el" href="../../d7/dad/pjsip__distributor_8c_source.html#l01243">distributor_pool_setup()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00858">internal_stasis_subscribe()</a>, <a class="el" href="../../d1/d75/res__pjsip__refer_8c_source.html#l00382">refer_progress_alloc()</a>, <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l00963">sip_options_aor_alloc()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01033">sip_outbound_publisher_alloc()</a>, <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l01314">sip_outbound_registration_state_alloc()</a>, and <a class="el" href="../../d7/d69/sorcery_8c_source.html#l00700">sorcery_object_type_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;{</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;   va_list ap;</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;   <span class="keywordtype">int</span> user_size;</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(<a class="code" href="../../d4/deb/taskprocessor_8c.html#ad673ddccb6db4af7af1cb47b3e97ee39">SEQ_STR_SIZE</a> &lt;= size);</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;   va_start(ap, <a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>);</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;   user_size = vsnprintf(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size - (<a class="code" href="../../d4/deb/taskprocessor_8c.html#ad673ddccb6db4af7af1cb47b3e97ee39">SEQ_STR_SIZE</a> - 1), <a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>, ap);</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;   va_end(ap);</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;   <span class="keywordflow">if</span> (user_size &lt; 0) {</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;<span class="comment">       * Wow!  We got an output error to a memory buffer.</span></div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;<span class="comment">       * Assume no user part of name written.</span></div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;      user_size = 0;</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (size &lt; user_size + <a class="code" href="../../d4/deb/taskprocessor_8c.html#ad673ddccb6db4af7af1cb47b3e97ee39">SEQ_STR_SIZE</a>) {</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;      <span class="comment">/* Truncate user part of name to make sequence number fit. */</span></div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;      user_size = size - <a class="code" href="../../d4/deb/taskprocessor_8c.html#ad673ddccb6db4af7af1cb47b3e97ee39">SEQ_STR_SIZE</a>;</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;   }</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;   <span class="comment">/* Append sequence number to end of user name. */</span></div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;   snprintf(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a> + user_size, <a class="code" href="../../d4/deb/taskprocessor_8c.html#ad673ddccb6db4af7af1cb47b3e97ee39">SEQ_STR_SIZE</a>, <span class="stringliteral">&quot;-%08x&quot;</span>, <a class="code" href="../../d4/deb/taskprocessor_8c.html#a6d17cb910ea569aa91235d174c126f55">ast_taskprocessor_seq_num</a>());</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;}</div><div class="ttc" id="taskprocessor_8c_html_a6d17cb910ea569aa91235d174c126f55"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a6d17cb910ea569aa91235d174c126f55">ast_taskprocessor_seq_num</a></div><div class="ttdeci">unsigned int ast_taskprocessor_seq_num(void)</div><div class="ttdoc">Get the next sequence number to create a human friendly taskprocessor name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01276">taskprocessor.c:1276</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_ad673ddccb6db4af7af1cb47b3e97ee39"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#ad673ddccb6db4af7af1cb47b3e97ee39">SEQ_STR_SIZE</a></div><div class="ttdeci">#define SEQ_STR_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01283">taskprocessor.c:1283</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a98f5e70e98f6dc48e3c5ba316066d540"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a></div><div class="ttdeci">static snd_pcm_format_t format</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00102">chan_alsa.c:102</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab79575eb73e817bd3afe77c87308e8be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab79575eb73e817bd3afe77c87308e8be">&#9670;&nbsp;</a></span>ast_taskprocessor_create_with_listener()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a>* ast_taskprocessor_create_with_listener </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a> *&#160;</td>
          <td class="paramname"><em>listener</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a taskprocessor with a custom listener. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<p>Note that when a taskprocessor is created in this way, it does not create any threads to execute the tasks. This job is left up to the listener. The listener's start() callback will be called during this function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The name of the taskprocessor to create </td></tr>
    <tr><td class="paramname">listener</td><td>The listener for operations on this taskprocessor </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>Failure  non-NULL success </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01083">1083</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00983">__allocate_taskprocessor()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01028">__start_taskprocessor()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01109">ast_taskprocessor_unreference()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01155">OBJ_KEY</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01067">OBJ_NOLOCK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00555">AST_TEST_DEFINE()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00915">ast_threadpool_create()</a>, and <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l01402">ast_threadpool_serializer_group()</a>.</p>
<div class="fragment"><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;{</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *p;</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(tps_singletons);</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;   p = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(tps_singletons, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a>);</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;   <span class="keywordflow">if</span> (p) {</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(tps_singletons);</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;      <a class="code" href="../../d4/deb/taskprocessor_8c.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a>(p);</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;   }</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;   p = <a class="code" href="../../d4/deb/taskprocessor_8c.html#a2ef06a1672c6c7c3ac36cee03ab1a8ee">__allocate_taskprocessor</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, listener);</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(tps_singletons);</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/deb/taskprocessor_8c.html#af1085e4adbfe31c0f31604b365543b84">__start_taskprocessor</a>(p);</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a22f40c733a085f259af94e864ebaa09a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a></div><div class="ttdeci">#define OBJ_KEY</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01155">astobj2.h:1155</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_af1085e4adbfe31c0f31604b365543b84"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#af1085e4adbfe31c0f31604b365543b84">__start_taskprocessor</a></div><div class="ttdeci">static struct ast_taskprocessor * __start_taskprocessor(struct ast_taskprocessor *p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01028">taskprocessor.c:1028</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_a32492eb2480cb8c46ad669622cff8556"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a></div><div class="ttdeci">void * ast_taskprocessor_unreference(struct ast_taskprocessor *tps)</div><div class="ttdoc">Unreference the specified taskprocessor and its reference count will decrement. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01109">taskprocessor.c:1109</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a></div><div class="ttdoc">Assume that the ao2_container is already locked. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01067">astobj2.h:1067</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_a2ef06a1672c6c7c3ac36cee03ab1a8ee"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a2ef06a1672c6c7c3ac36cee03ab1a8ee">__allocate_taskprocessor</a></div><div class="ttdeci">static struct ast_taskprocessor * __allocate_taskprocessor(const char *name, struct ast_taskprocessor_listener *listener)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00983">taskprocessor.c:983</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="structast__taskprocessor_html"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a></div><div class="ttdoc">A ast_taskprocessor structure is a singleton by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00069">taskprocessor.c:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9318e041c0564532581e864cda8f9426"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9318e041c0564532581e864cda8f9426">&#9670;&nbsp;</a></span>ast_taskprocessor_execute()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_taskprocessor_execute </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *&#160;</td>
          <td class="paramname"><em>tps</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pop a task off the taskprocessor and execute it. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tps</td><td>The taskprocessor from which to execute. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>There is no further work to be done. </td></tr>
    <tr><td class="paramname">1</td><td>Tasks still remain in the taskprocessor queue. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01212">1212</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00065">tps_taskprocessor_stats::_tasks_processed_count</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00066">AST_PTHREADT_NULL</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00900">ast_taskprocessor_size()</a>, <a class="el" href="../../d3/d60/structtps__task.html#acc9f473b491e7d8fb0a13f13924eaf88">tps_task::callback</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00112">ast_taskprocessor_listener::callbacks</a>, <a class="el" href="../../d0/d1e/taskprocessor_8h_source.html#l00224">ast_taskprocessor_local::data</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00054">tps_task::datap</a>, <a class="el" href="../../d0/d1e/taskprocessor_8h_source.html#l00104">ast_taskprocessor_listener_callbacks::emptied</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00050">tps_task::execute</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00051">tps_task::execute_local</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00085">ast_taskprocessor::executing</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00081">ast_taskprocessor::listener</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00072">ast_taskprocessor::local_data</a>, <a class="el" href="../../d0/d1e/taskprocessor_8h_source.html#l00222">ast_taskprocessor_local::local_data</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00063">tps_taskprocessor_stats::max_qsize</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00071">ast_taskprocessor::stats</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00083">ast_taskprocessor::thread</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00368">tps_task_free()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00886">tps_taskprocessor_pop()</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00057">tps_task::wants_local</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00555">AST_TEST_DEFINE()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00193">default_tps_processing_function()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l01349">execute_tasks()</a>, and <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00362">threadpool_execute()</a>.</p>
<div class="fragment"><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;{</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/ded/structast__taskprocessor__local.html">ast_taskprocessor_local</a> local;</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d60/structtps__task.html">tps_task</a> *t;</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;   <span class="keywordtype">long</span> size;</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(tps);</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;   t = <a class="code" href="../../d4/deb/taskprocessor_8c.html#af989d4cac357f8adb289a4f7bf4374cb">tps_taskprocessor_pop</a>(tps);</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;   <span class="keywordflow">if</span> (!t) {</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(tps);</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;   }</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;   tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a01f75a9ad916f63a94e06a27635ba278">thread</a> = pthread_self();</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;   tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a2d2a856d77bc4c98d58bfa0266bbddd8">executing</a> = 1;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;   <span class="keywordflow">if</span> (t-&gt;<a class="code" href="../../d3/d60/structtps__task.html#a49dc5ea84d90d2fe8c7afac643cf40b1">wants_local</a>) {</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;      local.local_data = tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#afac276564d7aa87eefe4fa4b0694001e">local_data</a>;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;      local.data = t-&gt;<a class="code" href="../../d3/d60/structtps__task.html#aeb5cadc7793d3e5ed0c725dbb3c04491">datap</a>;</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;   }</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(tps);</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;   <span class="keywordflow">if</span> (t-&gt;<a class="code" href="../../d3/d60/structtps__task.html#a49dc5ea84d90d2fe8c7afac643cf40b1">wants_local</a>) {</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;      t-&gt;<a class="code" href="../../d3/d60/structtps__task.html#acc9f473b491e7d8fb0a13f13924eaf88">callback</a>.<a class="code" href="../../d3/d60/structtps__task.html#a459b9081279633ec1f0a1f81bd0d8f24">execute_local</a>(&amp;local);</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;      t-&gt;<a class="code" href="../../d3/d60/structtps__task.html#acc9f473b491e7d8fb0a13f13924eaf88">callback</a>.<a class="code" href="../../d3/d60/structtps__task.html#a3715a7cb3d54e5b93b7085312cb02878">execute</a>(t-&gt;<a class="code" href="../../d3/d60/structtps__task.html#aeb5cadc7793d3e5ed0c725dbb3c04491">datap</a>);</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;   }</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;   <a class="code" href="../../d4/deb/taskprocessor_8c.html#ab8f1469650cc0c4de3f74dc4ec515207">tps_task_free</a>(t);</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(tps);</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;   tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a01f75a9ad916f63a94e06a27635ba278">thread</a> = <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>;</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;   <span class="comment">/* We need to check size in the same critical section where we reset the</span></div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;<span class="comment">    * executing bit. Avoids a race condition where a task is pushed right</span></div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;<span class="comment">    * after we pop an empty stack.</span></div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;   tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a2d2a856d77bc4c98d58bfa0266bbddd8">executing</a> = 0;</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;   size = <a class="code" href="../../d4/deb/taskprocessor_8c.html#a83d09062fb3c84cf1c84a04174deb2bf">ast_taskprocessor_size</a>(tps);</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;   <span class="comment">/* Update the stats */</span></div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;   ++tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#ad921b32ca4f51740507d2d8957116c61">stats</a>.<a class="code" href="../../db/d1c/structtps__taskprocessor__stats.html#acbba7f4a1f962091e9596c4eac481186">_tasks_processed_count</a>;</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;   <span class="comment">/* Include the task we just executed as part of the queue size. */</span></div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;   <span class="keywordflow">if</span> (size &gt;= tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#ad921b32ca4f51740507d2d8957116c61">stats</a>.<a class="code" href="../../db/d1c/structtps__taskprocessor__stats.html#a94e5638db41adecd198cf929e2990440">max_qsize</a>) {</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;      tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#ad921b32ca4f51740507d2d8957116c61">stats</a>.<a class="code" href="../../db/d1c/structtps__taskprocessor__stats.html#a94e5638db41adecd198cf929e2990440">max_qsize</a> = size + 1;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;   }</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(tps);</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;   <span class="comment">/* If we executed a task, check for the transition to empty */</span></div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;   <span class="keywordflow">if</span> (size == 0 &amp;&amp; tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a9dbaf508f8a891a7dfca0827ba489abc">listener</a>-&gt;<a class="code" href="../../d7/d52/structast__taskprocessor__listener.html#addf12c55d68372c220c81f61e800a6c6">callbacks</a>-&gt;<a class="code" href="../../d0/d01/structast__taskprocessor__listener__callbacks.html#a64d83267a2df9f4898f5bf8ef6afd4c6">emptied</a>) {</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;      tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a9dbaf508f8a891a7dfca0827ba489abc">listener</a>-&gt;<a class="code" href="../../d7/d52/structast__taskprocessor__listener.html#addf12c55d68372c220c81f61e800a6c6">callbacks</a>-&gt;<a class="code" href="../../d0/d01/structast__taskprocessor__listener__callbacks.html#a64d83267a2df9f4898f5bf8ef6afd4c6">emptied</a>(tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a9dbaf508f8a891a7dfca0827ba489abc">listener</a>);</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;   }</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;   <span class="keywordflow">return</span> size &gt; 0;</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;}</div><div class="ttc" id="structast__taskprocessor__listener_html_addf12c55d68372c220c81f61e800a6c6"><div class="ttname"><a href="../../d7/d52/structast__taskprocessor__listener.html#addf12c55d68372c220c81f61e800a6c6">ast_taskprocessor_listener::callbacks</a></div><div class="ttdeci">const struct ast_taskprocessor_listener_callbacks * callbacks</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00112">taskprocessor.c:112</a></div></div>
<div class="ttc" id="structast__taskprocessor__listener__callbacks_html_a64d83267a2df9f4898f5bf8ef6afd4c6"><div class="ttname"><a href="../../d0/d01/structast__taskprocessor__listener__callbacks.html#a64d83267a2df9f4898f5bf8ef6afd4c6">ast_taskprocessor_listener_callbacks::emptied</a></div><div class="ttdeci">void(* emptied)(struct ast_taskprocessor_listener *listener)</div><div class="ttdoc">Indicates the task processor has become empty. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1e/taskprocessor_8h_source.html#l00104">taskprocessor.h:104</a></div></div>
<div class="ttc" id="structtps__task_html_acc9f473b491e7d8fb0a13f13924eaf88"><div class="ttname"><a href="../../d3/d60/structtps__task.html#acc9f473b491e7d8fb0a13f13924eaf88">tps_task::callback</a></div><div class="ttdeci">union tps_task::@428 callback</div><div class="ttdoc">The execute() task callback function pointer. </div></div>
<div class="ttc" id="structast__taskprocessor_html_a01f75a9ad916f63a94e06a27635ba278"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#a01f75a9ad916f63a94e06a27635ba278">ast_taskprocessor::thread</a></div><div class="ttdeci">pthread_t thread</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00083">taskprocessor.c:83</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_a9dbaf508f8a891a7dfca0827ba489abc"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#a9dbaf508f8a891a7dfca0827ba489abc">ast_taskprocessor::listener</a></div><div class="ttdeci">struct ast_taskprocessor_listener * listener</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00081">taskprocessor.c:81</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_af989d4cac357f8adb289a4f7bf4374cb"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#af989d4cac357f8adb289a4f7bf4374cb">tps_taskprocessor_pop</a></div><div class="ttdeci">static struct tps_task * tps_taskprocessor_pop(struct ast_taskprocessor *tps)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00886">taskprocessor.c:886</a></div></div>
<div class="ttc" id="structtps__task_html_aeb5cadc7793d3e5ed0c725dbb3c04491"><div class="ttname"><a href="../../d3/d60/structtps__task.html#aeb5cadc7793d3e5ed0c725dbb3c04491">tps_task::datap</a></div><div class="ttdeci">void * datap</div><div class="ttdoc">The data pointer for the task execute() function. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00054">taskprocessor.c:54</a></div></div>
<div class="ttc" id="structtps__taskprocessor__stats_html_acbba7f4a1f962091e9596c4eac481186"><div class="ttname"><a href="../../db/d1c/structtps__taskprocessor__stats.html#acbba7f4a1f962091e9596c4eac481186">tps_taskprocessor_stats::_tasks_processed_count</a></div><div class="ttdeci">unsigned long _tasks_processed_count</div><div class="ttdoc">This is the current number of tasks processed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00065">taskprocessor.c:65</a></div></div>
<div class="ttc" id="structtps__task_html_a459b9081279633ec1f0a1f81bd0d8f24"><div class="ttname"><a href="../../d3/d60/structtps__task.html#a459b9081279633ec1f0a1f81bd0d8f24">tps_task::execute_local</a></div><div class="ttdeci">int(* execute_local)(struct ast_taskprocessor_local *local)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00051">taskprocessor.c:51</a></div></div>
<div class="ttc" id="lock_8h_html_a6009440c7a72f8e2e3b1ec97641ad160"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></div><div class="ttdeci">#define AST_PTHREADT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00066">lock.h:66</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_a83d09062fb3c84cf1c84a04174deb2bf"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a83d09062fb3c84cf1c84a04174deb2bf">ast_taskprocessor_size</a></div><div class="ttdeci">long ast_taskprocessor_size(struct ast_taskprocessor *tps)</div><div class="ttdoc">Return the current size of the taskprocessor queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00900">taskprocessor.c:900</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_a2d2a856d77bc4c98d58bfa0266bbddd8"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#a2d2a856d77bc4c98d58bfa0266bbddd8">ast_taskprocessor::executing</a></div><div class="ttdeci">unsigned int executing</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00085">taskprocessor.c:85</a></div></div>
<div class="ttc" id="structast__taskprocessor__local_html"><div class="ttname"><a href="../../dc/ded/structast__taskprocessor__local.html">ast_taskprocessor_local</a></div><div class="ttdoc">Local data parameter. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1e/taskprocessor_8h_source.html#l00220">taskprocessor.h:220</a></div></div>
<div class="ttc" id="structtps__task_html_a3715a7cb3d54e5b93b7085312cb02878"><div class="ttname"><a href="../../d3/d60/structtps__task.html#a3715a7cb3d54e5b93b7085312cb02878">tps_task::execute</a></div><div class="ttdeci">int(* execute)(void *datap)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00050">taskprocessor.c:50</a></div></div>
<div class="ttc" id="structtps__task_html"><div class="ttname"><a href="../../d3/d60/structtps__task.html">tps_task</a></div><div class="ttdoc">tps_task structure is queued to a taskprocessor </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00047">taskprocessor.c:47</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_afac276564d7aa87eefe4fa4b0694001e"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#afac276564d7aa87eefe4fa4b0694001e">ast_taskprocessor::local_data</a></div><div class="ttdeci">void * local_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00072">taskprocessor.c:72</a></div></div>
<div class="ttc" id="structtps__task_html_a49dc5ea84d90d2fe8c7afac643cf40b1"><div class="ttname"><a href="../../d3/d60/structtps__task.html#a49dc5ea84d90d2fe8c7afac643cf40b1">tps_task::wants_local</a></div><div class="ttdeci">unsigned int wants_local</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00057">taskprocessor.c:57</a></div></div>
<div class="ttc" id="structtps__taskprocessor__stats_html_a94e5638db41adecd198cf929e2990440"><div class="ttname"><a href="../../db/d1c/structtps__taskprocessor__stats.html#a94e5638db41adecd198cf929e2990440">tps_taskprocessor_stats::max_qsize</a></div><div class="ttdeci">unsigned long max_qsize</div><div class="ttdoc">This is the maximum number of tasks queued at any one time. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00063">taskprocessor.c:63</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_ab8f1469650cc0c4de3f74dc4ec515207"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#ab8f1469650cc0c4de3f74dc4ec515207">tps_task_free</a></div><div class="ttdeci">static void * tps_task_free(struct tps_task *task)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00368">taskprocessor.c:368</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_ad921b32ca4f51740507d2d8957116c61"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#ad921b32ca4f51740507d2d8957116c61">ast_taskprocessor::stats</a></div><div class="ttdeci">struct tps_taskprocessor_stats stats</div><div class="ttdoc">Taskprocessor statistics. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00071">taskprocessor.c:71</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac999cc9523590a29dff6acbd9cad24a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac999cc9523590a29dff6acbd9cad24a9">&#9670;&nbsp;</a></span>ast_taskprocessor_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a>* ast_taskprocessor_get </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d0/d1e/taskprocessor_8h.html#a42ae78df3dc5106c133bf2f7b72080f7">ast_tps_options</a>&#160;</td>
          <td class="paramname"><em>create</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a reference to a taskprocessor with the specified name and create the taskprocessor if necessary. </p>
<p>The default behavior of instantiating a taskprocessor if one does not already exist can be disabled by specifying the TPS_REF_IF_EXISTS ast_tps_options as the second argument to <a class="el" href="../../d0/d1e/taskprocessor_8h.html#ac999cc9523590a29dff6acbd9cad24a9" title="Get a reference to a taskprocessor with the specified name and create the taskprocessor if necessary...">ast_taskprocessor_get()</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The name of the taskprocessor </td></tr>
    <tr><td class="paramname">create</td><td>Use 0 by default or specify TPS_REF_IF_EXISTS to return NULL if the taskprocessor does not already exist return A pointer to a reference counted taskprocessor under normal conditions, or NULL if the TPS_REF_IF_EXISTS reference type is specified and the taskprocessor does not exist </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.6.1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01044">1044</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00983">__allocate_taskprocessor()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01028">__start_taskprocessor()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00930">ast_taskprocessor_listener_alloc()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00955">default_listener_pvt_alloc()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00173">default_listener_pvt_destroy()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l01476">listener()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01155">OBJ_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01067">OBJ_NOLOCK</a>, and <a class="el" href="../../d0/d1e/taskprocessor_8h_source.html#l00077">TPS_REF_IF_EXISTS</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l01496">alloc_playback_chan()</a>, <a class="el" href="../../df/d3a/dns__system__resolver_8c_source.html#l00243">ast_dns_system_resolver_init()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l01730">ast_msg_init()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00132">AST_TEST_DEFINE()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00411">cli_tps_ping()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01329">cli_tps_reset_stats()</a>, <a class="el" href="../../d7/dad/pjsip__distributor_8c_source.html#l00112">find_request_serializer()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00858">internal_stasis_subscribe()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l15123">load_module()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l14735">load_objects()</a>, and <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00404">threadpool_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;{</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *p;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a> *<a class="code" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a>;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html">default_taskprocessor_listener_pvt</a> *pvt;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>)) {</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;requesting a nameless taskprocessor!!!\n&quot;</span>);</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;   }</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(tps_singletons);</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;   p = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(tps_singletons, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a>);</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;   <span class="keywordflow">if</span> (p || (create &amp; <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a42ae78df3dc5106c133bf2f7b72080f7abe990199e3796a0f60ff62ab1e36e3c0">TPS_REF_IF_EXISTS</a>)) {</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      <span class="comment">/* calling function does not want a new taskprocessor to be created if it doesn&#39;t already exist */</span></div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(tps_singletons);</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;      <span class="keywordflow">return</span> p;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;   }</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;   <span class="comment">/* Create a new taskprocessor. Start by creating a default listener */</span></div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;   pvt = <a class="code" href="../../d4/deb/taskprocessor_8c.html#a6314b05bebeaff91454d8ca7254472b8">default_listener_pvt_alloc</a>();</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;   <span class="keywordflow">if</span> (!pvt) {</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(tps_singletons);</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;   }</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;   listener = <a class="code" href="../../d4/deb/taskprocessor_8c.html#ad7d5e40a1f7eac54dcad096b90d013bd">ast_taskprocessor_listener_alloc</a>(&amp;<a class="code" href="../../d4/deb/taskprocessor_8c.html#aad81e8feb180e9e5030db0143968b794">default_listener_callbacks</a>, pvt);</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;   <span class="keywordflow">if</span> (!listener) {</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(tps_singletons);</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      <a class="code" href="../../d4/deb/taskprocessor_8c.html#af5ca68ce20aadfbc7e14071bf33a77ed">default_listener_pvt_destroy</a>(pvt);</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;   }</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;   p = <a class="code" href="../../d4/deb/taskprocessor_8c.html#a2ef06a1672c6c7c3ac36cee03ab1a8ee">__allocate_taskprocessor</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, listener);</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(tps_singletons);</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;   p = <a class="code" href="../../d4/deb/taskprocessor_8c.html#af1085e4adbfe31c0f31604b365543b84">__start_taskprocessor</a>(p);</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(listener, -1);</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;   <span class="keywordflow">return</span> p;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;}</div><div class="ttc" id="structast__taskprocessor__listener_html"><div class="ttname"><a href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a></div><div class="ttdoc">A listener for taskprocessors. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00110">taskprocessor.c:110</a></div></div>
<div class="ttc" id="astobj2_8h_html_a22f40c733a085f259af94e864ebaa09a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a></div><div class="ttdeci">#define OBJ_KEY</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01155">astobj2.h:1155</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_af1085e4adbfe31c0f31604b365543b84"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#af1085e4adbfe31c0f31604b365543b84">__start_taskprocessor</a></div><div class="ttdeci">static struct ast_taskprocessor * __start_taskprocessor(struct ast_taskprocessor *p)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01028">taskprocessor.c:1028</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a></div><div class="ttdoc">Assume that the ao2_container is already locked. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01067">astobj2.h:1067</a></div></div>
<div class="ttc" id="structdefault__taskprocessor__listener__pvt_html"><div class="ttname"><a href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html">default_taskprocessor_listener_pvt</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00167">taskprocessor.c:167</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_ad7d5e40a1f7eac54dcad096b90d013bd"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#ad7d5e40a1f7eac54dcad096b90d013bd">ast_taskprocessor_listener_alloc</a></div><div class="ttdeci">struct ast_taskprocessor_listener * ast_taskprocessor_listener_alloc(const struct ast_taskprocessor_listener_callbacks *callbacks, void *user_data)</div><div class="ttdoc">Allocate a taskprocessor listener. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00930">taskprocessor.c:930</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="asterisk_8c_html_adc01bca6281492dfec5ae217cf32fc34"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a></div><div class="ttdeci">static void * listener(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01476">asterisk.c:1476</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_af5ca68ce20aadfbc7e14071bf33a77ed"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#af5ca68ce20aadfbc7e14071bf33a77ed">default_listener_pvt_destroy</a></div><div class="ttdeci">static void default_listener_pvt_destroy(struct default_taskprocessor_listener_pvt *pvt)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00173">taskprocessor.c:173</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_a2ef06a1672c6c7c3ac36cee03ab1a8ee"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a2ef06a1672c6c7c3ac36cee03ab1a8ee">__allocate_taskprocessor</a></div><div class="ttdeci">static struct ast_taskprocessor * __allocate_taskprocessor(const char *name, struct ast_taskprocessor_listener *listener)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00983">taskprocessor.c:983</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a42ae78df3dc5106c133bf2f7b72080f7abe990199e3796a0f60ff62ab1e36e3c0"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a42ae78df3dc5106c133bf2f7b72080f7abe990199e3796a0f60ff62ab1e36e3c0">TPS_REF_IF_EXISTS</a></div><div class="ttdoc">return a reference to a taskprocessor ONLY if it already exists </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1e/taskprocessor_8h_source.html#l00077">taskprocessor.h:77</a></div></div>
<div class="ttc" id="structast__taskprocessor_html"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a></div><div class="ttdoc">A ast_taskprocessor structure is a singleton by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00069">taskprocessor.c:69</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_a6314b05bebeaff91454d8ca7254472b8"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a6314b05bebeaff91454d8ca7254472b8">default_listener_pvt_alloc</a></div><div class="ttdeci">static void * default_listener_pvt_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00955">taskprocessor.c:955</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_aad81e8feb180e9e5030db0143968b794"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#aad81e8feb180e9e5030db0143968b794">default_listener_callbacks</a></div><div class="ttdeci">static const struct ast_taskprocessor_listener_callbacks default_listener_callbacks</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00280">taskprocessor.c:280</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaee66f3c01dde2a5c3762c0f30581563"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaee66f3c01dde2a5c3762c0f30581563">&#9670;&nbsp;</a></span>ast_taskprocessor_get_subsystem_alert()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int ast_taskprocessor_get_subsystem_alert </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>subsystem</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the current taskprocessor high water alert count by sybsystem. </p>
<dl class="section since"><dt>Since</dt><dd>13.26.0 </dd>
<dd>
16.3.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">subsystem</td><td>The subsystem name</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if no taskprocessors are in high water alert. </td></tr>
    <tr><td class="paramname">non-zero</td><td>if some task processors are in high water alert. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00637">637</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00124">subsystem_alert::alert_count</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00721">AST_VECTOR_GET_INDEX</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00880">AST_VECTOR_RW_RDLOCK</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00900">AST_VECTOR_RW_UNLOCK</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00627">subsystem_match()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00180">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d7/dad/pjsip__distributor_8c_source.html#l00485">distributor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;{</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/da5/structsubsystem__alert.html">subsystem_alert</a> *alert;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count = 0;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;   <span class="keywordtype">int</span> idx;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#ad414eae87431bad2a7fc4dffa9d06350">AST_VECTOR_RW_RDLOCK</a>(&amp;overloaded_subsystems);</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;   idx = <a class="code" href="../../d6/d68/vector_8h.html#a29d0c73e04da3effa371ce52848e4561">AST_VECTOR_GET_INDEX</a>(&amp;overloaded_subsystems, <a class="code" href="../../d9/da5/structsubsystem__alert.html#aefc476783822f8e838c9c0cdbeb24b25">subsystem</a>, <a class="code" href="../../d4/deb/taskprocessor_8c.html#afd693356739cff532d6b8184215ace77">subsystem_match</a>);</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;   <span class="keywordflow">if</span> (idx &gt;= 0) {</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      alert = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;overloaded_subsystems, idx);</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      count = alert-&gt;<a class="code" href="../../d9/da5/structsubsystem__alert.html#a1a3f5878055eb265ef3444bde78f5f84">alert_count</a>;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;   }</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a5ad3dd1d3da5d4ebf6a44d32e42c4c91">AST_VECTOR_RW_UNLOCK</a>(&amp;overloaded_subsystems);</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;   <span class="keywordflow">return</span> count;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;}</div><div class="ttc" id="vector_8h_html_a29d0c73e04da3effa371ce52848e4561"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a29d0c73e04da3effa371ce52848e4561">AST_VECTOR_GET_INDEX</a></div><div class="ttdeci">#define AST_VECTOR_GET_INDEX(vec, value, cmp)</div><div class="ttdoc">Get the 1st index from a vector that matches the given comparison. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00721">vector.h:721</a></div></div>
<div class="ttc" id="structsubsystem__alert_html"><div class="ttname"><a href="../../d9/da5/structsubsystem__alert.html">subsystem_alert</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00123">taskprocessor.c:123</a></div></div>
<div class="ttc" id="vector_8h_html_a5ad3dd1d3da5d4ebf6a44d32e42c4c91"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a5ad3dd1d3da5d4ebf6a44d32e42c4c91">AST_VECTOR_RW_UNLOCK</a></div><div class="ttdeci">#define AST_VECTOR_RW_UNLOCK(vec)</div><div class="ttdoc">Unlock vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00900">vector.h:900</a></div></div>
<div class="ttc" id="structsubsystem__alert_html_aefc476783822f8e838c9c0cdbeb24b25"><div class="ttname"><a href="../../d9/da5/structsubsystem__alert.html#aefc476783822f8e838c9c0cdbeb24b25">subsystem_alert::subsystem</a></div><div class="ttdeci">char subsystem[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00125">taskprocessor.c:125</a></div></div>
<div class="ttc" id="vector_8h_html_ad414eae87431bad2a7fc4dffa9d06350"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ad414eae87431bad2a7fc4dffa9d06350">AST_VECTOR_RW_RDLOCK</a></div><div class="ttdeci">#define AST_VECTOR_RW_RDLOCK(vec)</div><div class="ttdoc">Obtain read lock on vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00880">vector.h:880</a></div></div>
<div class="ttc" id="structsubsystem__alert_html_a1a3f5878055eb265ef3444bde78f5f84"><div class="ttname"><a href="../../d9/da5/structsubsystem__alert.html#a1a3f5878055eb265ef3444bde78f5f84">subsystem_alert::alert_count</a></div><div class="ttdeci">unsigned int alert_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00124">taskprocessor.c:124</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_afd693356739cff532d6b8184215ace77"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#afd693356739cff532d6b8184215ace77">subsystem_match</a></div><div class="ttdeci">static int subsystem_match(struct subsystem_alert *alert, const char *subsystem)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00627">taskprocessor.c:627</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a37f9fcdd63017df32ddb3b2601d1e223"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37f9fcdd63017df32ddb3b2601d1e223">&#9670;&nbsp;</a></span>ast_taskprocessor_is_suspended()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_taskprocessor_is_suspended </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *&#160;</td>
          <td class="paramname"><em>tps</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the task processor suspend status. </p>
<dl class="section since"><dt>Since</dt><dd>13.12.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tps</td><td>Task processor. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-zero</td><td>if the task processor is suspended </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01207">1207</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00091">ast_taskprocessor::suspended</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l03155">ast_sip_session_suspend()</a>.</p>
<div class="fragment"><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;{</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;   <span class="keywordflow">return</span> tps ? tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a2862ffde11c780129862e5549415a6f6">suspended</a> : -1;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;}</div><div class="ttc" id="structast__taskprocessor_html_a2862ffde11c780129862e5549415a6f6"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#a2862ffde11c780129862e5549415a6f6">ast_taskprocessor::suspended</a></div><div class="ttdeci">unsigned int suspended</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00091">taskprocessor.c:91</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4a66670abd8be00ab53bd9125a57574f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a66670abd8be00ab53bd9125a57574f">&#9670;&nbsp;</a></span>ast_taskprocessor_is_task()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_taskprocessor_is_task </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *&#160;</td>
          <td class="paramname"><em>tps</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Am I the given taskprocessor's current task. </p>
<dl class="section since"><dt>Since</dt><dd>12.7.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tps</td><td>Taskprocessor to check.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-zero</td><td>if current thread is the taskprocessor thread. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01266">1266</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00083">ast_taskprocessor::thread</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05218">ast_sip_push_task_wait_serializer()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l03155">ast_sip_session_suspend()</a>, and <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l04050">handle_new_invite_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;{</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;   <span class="keywordtype">int</span> is_task;</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(tps);</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;   is_task = pthread_equal(tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a01f75a9ad916f63a94e06a27635ba278">thread</a>, pthread_self());</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(tps);</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;   <span class="keywordflow">return</span> is_task;</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;}</div><div class="ttc" id="structast__taskprocessor_html_a01f75a9ad916f63a94e06a27635ba278"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#a01f75a9ad916f63a94e06a27635ba278">ast_taskprocessor::thread</a></div><div class="ttdeci">pthread_t thread</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00083">taskprocessor.c:83</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad7d5e40a1f7eac54dcad096b90d013bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7d5e40a1f7eac54dcad096b90d013bd">&#9670;&nbsp;</a></span>ast_taskprocessor_listener_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a>* ast_taskprocessor_listener_alloc </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d0/d01/structast__taskprocessor__listener__callbacks.html">ast_taskprocessor_listener_callbacks</a> *&#160;</td>
          <td class="paramname"><em>callbacks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate a taskprocessor listener. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<p>This will result in the listener being allocated with the specified callbacks.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">callbacks</td><td>The callbacks to assign to the listener </td></tr>
    <tr><td class="paramname">user_data</td><td>The user data for the listener </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>Failure </td></tr>
    <tr><td class="paramname">non-NULL</td><td>The newly allocated taskprocessor listener </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00930">930</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00112">ast_taskprocessor_listener::callbacks</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l01476">listener()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00921">taskprocessor_listener_dtor()</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00116">ast_taskprocessor_listener::user_data</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01044">ast_taskprocessor_get()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00555">AST_TEST_DEFINE()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00915">ast_threadpool_create()</a>, and <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l01402">ast_threadpool_serializer_group()</a>.</p>
<div class="fragment"><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;{</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a> *<a class="code" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a>;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;   listener = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*listener), <a class="code" href="../../d4/deb/taskprocessor_8c.html#adae19da477b734d7470b3013a761fb9c">taskprocessor_listener_dtor</a>);</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;   <span class="keywordflow">if</span> (!listener) {</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;   }</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;   listener-&gt;<a class="code" href="../../d7/d52/structast__taskprocessor__listener.html#addf12c55d68372c220c81f61e800a6c6">callbacks</a> = <a class="code" href="../../d7/d52/structast__taskprocessor__listener.html#addf12c55d68372c220c81f61e800a6c6">callbacks</a>;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;   listener-&gt;<a class="code" href="../../d7/d52/structast__taskprocessor__listener.html#a0f53d287ac7c064d1a49d4bd93ca1cb9">user_data</a> = <a class="code" href="../../d7/d52/structast__taskprocessor__listener.html#a0f53d287ac7c064d1a49d4bd93ca1cb9">user_data</a>;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a>;</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;}</div><div class="ttc" id="structast__taskprocessor__listener_html"><div class="ttname"><a href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a></div><div class="ttdoc">A listener for taskprocessors. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00110">taskprocessor.c:110</a></div></div>
<div class="ttc" id="structast__taskprocessor__listener_html_a0f53d287ac7c064d1a49d4bd93ca1cb9"><div class="ttname"><a href="../../d7/d52/structast__taskprocessor__listener.html#a0f53d287ac7c064d1a49d4bd93ca1cb9">ast_taskprocessor_listener::user_data</a></div><div class="ttdeci">void * user_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00116">taskprocessor.c:116</a></div></div>
<div class="ttc" id="structast__taskprocessor__listener_html_addf12c55d68372c220c81f61e800a6c6"><div class="ttname"><a href="../../d7/d52/structast__taskprocessor__listener.html#addf12c55d68372c220c81f61e800a6c6">ast_taskprocessor_listener::callbacks</a></div><div class="ttdeci">const struct ast_taskprocessor_listener_callbacks * callbacks</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00112">taskprocessor.c:112</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="asterisk_8c_html_adc01bca6281492dfec5ae217cf32fc34"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a></div><div class="ttdeci">static void * listener(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01476">asterisk.c:1476</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_adae19da477b734d7470b3013a761fb9c"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#adae19da477b734d7470b3013a761fb9c">taskprocessor_listener_dtor</a></div><div class="ttdeci">static void taskprocessor_listener_dtor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00921">taskprocessor.c:921</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6b19a24ebd6df46be8ab735226c7d6a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b19a24ebd6df46be8ab735226c7d6a3">&#9670;&nbsp;</a></span>ast_taskprocessor_listener_get_tps()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a>* ast_taskprocessor_listener_get_tps </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a> *&#160;</td>
          <td class="paramname"><em>listener</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a reference to the listener's taskprocessor. </p>
<p>This will return the taskprocessor with its reference count increased. Release the reference to this object by using <a class="el" href="../../d0/d1e/taskprocessor_8h.html#a32492eb2480cb8c46ad669622cff8556" title="Unreference the specified taskprocessor and its reference count will decrement. ">ast_taskprocessor_unreference()</a></p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">listener</td><td>The listener that has the taskprocessor </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The taskprocessor </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00944">944</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00114">ast_taskprocessor_listener::tps</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l01363">serializer_task_pushed()</a>.</p>
<div class="fragment"><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;{</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(listener-&gt;<a class="code" href="../../d7/d52/structast__taskprocessor__listener.html#a4c381cb1b5cf198fa3f260212e716c9a">tps</a>, +1);</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;   <span class="keywordflow">return</span> listener-&gt;<a class="code" href="../../d7/d52/structast__taskprocessor__listener.html#a4c381cb1b5cf198fa3f260212e716c9a">tps</a>;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;}</div><div class="ttc" id="structast__taskprocessor__listener_html_a4c381cb1b5cf198fa3f260212e716c9a"><div class="ttname"><a href="../../d7/d52/structast__taskprocessor__listener.html#a4c381cb1b5cf198fa3f260212e716c9a">ast_taskprocessor_listener::tps</a></div><div class="ttdeci">struct ast_taskprocessor * tps</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00114">taskprocessor.c:114</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6906b13a7a37512e36dd1f5148589481"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6906b13a7a37512e36dd1f5148589481">&#9670;&nbsp;</a></span>ast_taskprocessor_listener_get_user_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* ast_taskprocessor_listener_get_user_data </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a> *&#160;</td>
          <td class="paramname"><em>listener</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the user data from the listener. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">listener</td><td>The taskprocessor listener </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The listener's user data </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00950">950</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00116">ast_taskprocessor_listener::user_data</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l01381">serializer_shutdown()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l01363">serializer_task_pushed()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00480">test_emptied()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00489">test_shutdown()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00468">test_task_pushed()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00654">threadpool_tps_emptied()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00679">threadpool_tps_shutdown()</a>, and <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00610">threadpool_tps_task_pushed()</a>.</p>
<div class="fragment"><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;{</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;   <span class="keywordflow">return</span> listener-&gt;<a class="code" href="../../d7/d52/structast__taskprocessor__listener.html#a0f53d287ac7c064d1a49d4bd93ca1cb9">user_data</a>;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;}</div><div class="ttc" id="structast__taskprocessor__listener_html_a0f53d287ac7c064d1a49d4bd93ca1cb9"><div class="ttname"><a href="../../d7/d52/structast__taskprocessor__listener.html#a0f53d287ac7c064d1a49d4bd93ca1cb9">ast_taskprocessor_listener::user_data</a></div><div class="ttdeci">void * user_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00116">taskprocessor.c:116</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaa6541086de52447afa994cbfcb792ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa6541086de52447afa994cbfcb792ec">&#9670;&nbsp;</a></span>ast_taskprocessor_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_taskprocessor_name </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *&#160;</td>
          <td class="paramname"><em>tps</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the name of the taskprocessor singleton. </p>
<dl class="section since"><dt>Since</dt><dd>1.6.1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00906">906</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00097">ast_taskprocessor::name</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd3/serializer_8c_source.html#l00156">ast_serializer_pool_set_alerts()</a>, <a class="el" href="../../d7/dad/pjsip__distributor_8c_source.html#l00448">ast_sip_get_distributor_serializer()</a>, <a class="el" href="../../d7/dad/pjsip__distributor_8c_source.html#l00485">distributor()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00524">grow()</a>, <a class="el" href="../../d7/dad/pjsip__distributor_8c_source.html#l00077">record_serializer()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00775">shrink()</a>, <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l01240">sip_options_apply_aor_configuration()</a>, and <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l02094">sip_options_contact_add_task()</a>.</p>
<div class="fragment"><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;{</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;   <span class="keywordflow">if</span> (!tps) {</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;no taskprocessor specified!\n&quot;</span>);</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;   }</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;   <span class="keywordflow">return</span> tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;}</div><div class="ttc" id="structast__taskprocessor_html_afd3f693e384b1ee0a0c44d58351eb87d"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#afd3f693e384b1ee0a0c44d58351eb87d">ast_taskprocessor::name</a></div><div class="ttdeci">char name[0]</div><div class="ttdoc">Friendly name of the taskprocessor. Subsystem is appended after the name&amp;#39;s NULL terminator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00097">taskprocessor.c:97</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6f0cc7cda2fe82f4c7df4dbdc57b1372"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f0cc7cda2fe82f4c7df4dbdc57b1372">&#9670;&nbsp;</a></span>ast_taskprocessor_name_append()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_taskprocessor_name_append </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Append the next sequence number to the given string, and copy into the buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>Where to copy the appended taskprocessor name. </td></tr>
    <tr><td class="paramname">size</td><td>How large is buf including null terminator. </td></tr>
    <tr><td class="paramname">name</td><td>A name to append the sequence number to. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01285">1285</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01276">ast_taskprocessor_seq_num()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01283">SEQ_STR_SIZE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd3/serializer_8c_source.html#l00076">ast_serializer_pool_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;{</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;   <span class="keywordtype">int</span> final_size = strlen(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>) + <a class="code" href="../../d4/deb/taskprocessor_8c.html#ad673ddccb6db4af7af1cb47b3e97ee39">SEQ_STR_SIZE</a>;</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(final_size &lt;= size);</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;   snprintf(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, final_size, <span class="stringliteral">&quot;%s-%08x&quot;</span>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, <a class="code" href="../../d4/deb/taskprocessor_8c.html#a6d17cb910ea569aa91235d174c126f55">ast_taskprocessor_seq_num</a>());</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;}</div><div class="ttc" id="taskprocessor_8c_html_a6d17cb910ea569aa91235d174c126f55"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a6d17cb910ea569aa91235d174c126f55">ast_taskprocessor_seq_num</a></div><div class="ttdeci">unsigned int ast_taskprocessor_seq_num(void)</div><div class="ttdoc">Get the next sequence number to create a human friendly taskprocessor name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01276">taskprocessor.c:1276</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_ad673ddccb6db4af7af1cb47b3e97ee39"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#ad673ddccb6db4af7af1cb47b3e97ee39">SEQ_STR_SIZE</a></div><div class="ttdeci">#define SEQ_STR_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01283">taskprocessor.c:1283</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a815e690b2db467f47655ebaa5d85fb69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a815e690b2db467f47655ebaa5d85fb69">&#9670;&nbsp;</a></span>ast_taskprocessor_push()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_taskprocessor_push </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *&#160;</td>
          <td class="paramname"><em>tps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int(*)(void *datap)&#160;</td>
          <td class="paramname"><em>task_exe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>datap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Push a task into the specified taskprocessor queue and signal the taskprocessor thread. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tps</td><td>The taskprocessor structure </td></tr>
    <tr><td class="paramname">task_exe</td><td>The task handling function to push into the taskprocessor queue </td></tr>
    <tr><td class="paramname">datap</td><td>The data to be used by the task handling function </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">-1</td><td>failure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.6.1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01175">1175</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01139">taskprocessor_push()</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00326">tps_task_alloc()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d5a/ccss_8c_source.html#l04093">ast_cc_agent_status_response()</a>, <a class="el" href="../../d3/d5a/ccss_8c_source.html#l03941">ast_cc_monitor_failed()</a>, <a class="el" href="../../d3/d5a/ccss_8c_source.html#l04051">ast_cc_monitor_party_b_free()</a>, <a class="el" href="../../d3/d5a/ccss_8c_source.html#l03986">ast_cc_monitor_status_request()</a>, <a class="el" href="../../d3/d5a/ccss_8c_source.html#l04023">ast_cc_monitor_stop_ringing()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00958">ast_msg_queue()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05138">ast_sip_push_task()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l02057">ast_sorcery_create()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l02233">ast_sorcery_delete()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l02145">ast_sorcery_update()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00132">AST_TEST_DEFINE()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00956">ast_threadpool_push()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00874">ast_threadpool_set_size()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l02492">async_delete_name_rec()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l02248">async_play_sound_helper()</a>, <a class="el" href="../../d3/d5a/ccss_8c_source.html#l03328">cc_request_state_change()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00411">cli_tps_ping()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00250">default_listener_shutdown()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l01173">destroy_conference_bridge()</a>, <a class="el" href="../../df/d3a/dns__system__resolver_8c_source.html#l00180">dns_system_resolver_resolve()</a>, <a class="el" href="../../d3/d5a/ccss_8c_source.html#l01484">generic_monitor_devstate_cb()</a>, <a class="el" href="../../d3/d5a/ccss_8c_source.html#l04511">handle_cc_status()</a>, <a class="el" href="../../db/d43/res__hep_8c_source.html#l00581">hepv3_send_packet()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l04309">iax2_transmit()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l13181">mwi_handle_subscribe()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l13163">mwi_handle_unsubscribe()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l01997">play_sound_helper()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l01336">sorcery_object_load()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00973">stasis_unsubscribe()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00256">threadpool_active_thread_idle()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00332">threadpool_idle_thread_dead()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00654">threadpool_tps_emptied()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00610">threadpool_tps_task_pushed()</a>, and <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00301">threadpool_zombie_thread_dead()</a>.</p>
<div class="fragment"><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;{</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/deb/taskprocessor_8c.html#a458f3e603669bc087d571e28c6b23424">taskprocessor_push</a>(tps, <a class="code" href="../../d4/deb/taskprocessor_8c.html#a1e47192322efd29dd1b30c9f1adc9f52">tps_task_alloc</a>(task_exe, datap));</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;}</div><div class="ttc" id="taskprocessor_8c_html_a458f3e603669bc087d571e28c6b23424"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a458f3e603669bc087d571e28c6b23424">taskprocessor_push</a></div><div class="ttdeci">static int taskprocessor_push(struct ast_taskprocessor *tps, struct tps_task *t)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01139">taskprocessor.c:1139</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_a1e47192322efd29dd1b30c9f1adc9f52"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a1e47192322efd29dd1b30c9f1adc9f52">tps_task_alloc</a></div><div class="ttdeci">static struct tps_task * tps_task_alloc(int(*task_exe)(void *datap), void *datap)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00326">taskprocessor.c:326</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a43ab592c14d8bc446539b539a5d60e6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43ab592c14d8bc446539b539a5d60e6b">&#9670;&nbsp;</a></span>ast_taskprocessor_push_local()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_taskprocessor_push_local </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *&#160;</td>
          <td class="paramname"><em>tps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int(*)(struct <a class="el" href="../../dc/ded/structast__taskprocessor__local.html">ast_taskprocessor_local</a> *datap)&#160;</td>
          <td class="paramname"><em>task_exe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>datap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01180">1180</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01139">taskprocessor_push()</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00346">tps_task_alloc_local()</a>.</p>
<div class="fragment"><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;{</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/deb/taskprocessor_8c.html#a458f3e603669bc087d571e28c6b23424">taskprocessor_push</a>(tps, <a class="code" href="../../d4/deb/taskprocessor_8c.html#acc08ed07cfd43715ff560a0a4e19eb8c">tps_task_alloc_local</a>(task_exe, datap));</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;}</div><div class="ttc" id="taskprocessor_8c_html_a458f3e603669bc087d571e28c6b23424"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a458f3e603669bc087d571e28c6b23424">taskprocessor_push</a></div><div class="ttdeci">static int taskprocessor_push(struct ast_taskprocessor *tps, struct tps_task *t)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01139">taskprocessor.c:1139</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_acc08ed07cfd43715ff560a0a4e19eb8c"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#acc08ed07cfd43715ff560a0a4e19eb8c">tps_task_alloc_local</a></div><div class="ttdeci">static struct tps_task * tps_task_alloc_local(int(*task_exe)(struct ast_taskprocessor_local *local), void *datap)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00346">taskprocessor.c:346</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6d17cb910ea569aa91235d174c126f55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d17cb910ea569aa91235d174c126f55">&#9670;&nbsp;</a></span>ast_taskprocessor_seq_num()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int ast_taskprocessor_seq_num </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the next sequence number to create a human friendly taskprocessor name. </p>
<dl class="section since"><dt>Since</dt><dd>13.8.0</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Sequence number for use in creating human friendly taskprocessor names. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01276">1276</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00755">ast_atomic_fetchadd_int()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01295">ast_taskprocessor_build_name()</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01285">ast_taskprocessor_name_append()</a>.</p>
<div class="fragment"><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;{</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;   <span class="keyword">static</span> <span class="keywordtype">int</span> seq_num;</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;   <span class="keywordflow">return</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;seq_num, +1);</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;}</div><div class="ttc" id="lock_8h_html_a8a3bd496edfec04a95683ace66676200"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a></div><div class="ttdeci">int ast_atomic_fetchadd_int(volatile int *p, int v)</div><div class="ttdoc">Atomically add v to *p and return the previous value of *p. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00755">lock.h:755</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a208c9f9b930e83c7bdb833c66f13d5e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a208c9f9b930e83c7bdb833c66f13d5e8">&#9670;&nbsp;</a></span>ast_taskprocessor_set_local()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_taskprocessor_set_local </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *&#160;</td>
          <td class="paramname"><em>tps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>local_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the local data associated with a taskprocessor. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<p>See <a class="el" href="../../d0/d1e/taskprocessor_8h.html#a6d7049467cda8b796bff04ce8bba34b5" title="Push a task into the specified taskprocessor queue and signal the taskprocessor thread. ">ast_taskprocessor_push_local()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tps</td><td>Task processor. </td></tr>
    <tr><td class="paramname">local_data</td><td>Local data to associate with <em>tps</em>. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01101">1101</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00072">ast_taskprocessor::local_data</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, and <a class="el" href="../../dd/d42/lock_8h_source.html#l00602">SCOPED_AO2LOCK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00837">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l00858">internal_stasis_subscribe()</a>.</p>
<div class="fragment"><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;{</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, tps);</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;   tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#afac276564d7aa87eefe4fa4b0694001e">local_data</a> = local_data;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;}</div><div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="lock_8h_html_a2cfb325ed371eb6e629446bac4676e9f"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a2cfb325ed371eb6e629446bac4676e9f">SCOPED_AO2LOCK</a></div><div class="ttdeci">#define SCOPED_AO2LOCK(varname, obj)</div><div class="ttdoc">scoped lock specialization for ao2 mutexes. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00602">lock.h:602</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_afac276564d7aa87eefe4fa4b0694001e"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#afac276564d7aa87eefe4fa4b0694001e">ast_taskprocessor::local_data</a></div><div class="ttdeci">void * local_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00072">taskprocessor.c:72</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a83d09062fb3c84cf1c84a04174deb2bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83d09062fb3c84cf1c84a04174deb2bf">&#9670;&nbsp;</a></span>ast_taskprocessor_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long ast_taskprocessor_size </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *&#160;</td>
          <td class="paramname"><em>tps</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the current size of the taskprocessor queue. </p>
<dl class="section since"><dt>Since</dt><dd>13.7.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00900">900</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00074">ast_taskprocessor::tps_queue_size</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dd3/serializer_8c_source.html#l00127">ast_serializer_pool_get()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01212">ast_taskprocessor_execute()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00180">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l01437">ast_threadpool_queue_size()</a>.</p>
<div class="fragment"><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;{</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;   <span class="keywordflow">return</span> (tps) ? tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#afe2dfc83eb5b460f39e9e5513023e74e">tps_queue_size</a> : -1;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;}</div><div class="ttc" id="structast__taskprocessor_html_afe2dfc83eb5b460f39e9e5513023e74e"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#afe2dfc83eb5b460f39e9e5513023e74e">ast_taskprocessor::tps_queue_size</a></div><div class="ttdeci">long tps_queue_size</div><div class="ttdoc">Taskprocessor current queue size. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00074">taskprocessor.c:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeea7131da6b62d2e9b5d91c5de529d6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeea7131da6b62d2e9b5d91c5de529d6c">&#9670;&nbsp;</a></span>ast_taskprocessor_suspend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_taskprocessor_suspend </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *&#160;</td>
          <td class="paramname"><em>tps</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Indicate the taskprocessor is suspended. </p>
<dl class="section since"><dt>Since</dt><dd>13.12.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tps</td><td>Task processor. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">-1</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01185">1185</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00091">ast_taskprocessor::suspended</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l03155">ast_sip_session_suspend()</a>, and <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00180">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;{</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;   <span class="keywordflow">if</span> (tps) {</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(tps);</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;      tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a2862ffde11c780129862e5549415a6f6">suspended</a> = 1;</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(tps);</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;   }</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;}</div><div class="ttc" id="structast__taskprocessor_html_a2862ffde11c780129862e5549415a6f6"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#a2862ffde11c780129862e5549415a6f6">ast_taskprocessor::suspended</a></div><div class="ttdeci">unsigned int suspended</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00091">taskprocessor.c:91</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a32492eb2480cb8c46ad669622cff8556"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32492eb2480cb8c46ad669622cff8556">&#9670;&nbsp;</a></span>ast_taskprocessor_unreference()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* ast_taskprocessor_unreference </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *&#160;</td>
          <td class="paramname"><em>tps</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unreference the specified taskprocessor and its reference count will decrement. </p>
<p>Taskprocessors use <a class="el" href="../../d3/dfb/structastobj2.html">astobj2</a> and will unlink from the taskprocessor singleton container and destroy themself when the taskprocessor reference count reaches zero. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tps</td><td>taskprocessor to unreference </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NULL </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.6.1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01109">1109</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01622">ao2_unlink_flags</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00081">ast_taskprocessor::listener</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00915">listener_shutdown()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01067">OBJ_NOLOCK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01028">__start_taskprocessor()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l14601">__unload_module()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l01689">ast_msg_shutdown()</a>, <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l02835">ast_res_pjsip_cleanup_options_handling()</a>, <a class="el" href="../../d6/dd3/serializer_8c_source.html#l00039">ast_serializer_pool_destroy()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01083">ast_taskprocessor_create_with_listener()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00132">AST_TEST_DEFINE()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00965">ast_threadpool_shutdown()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00411">cli_tps_ping()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01329">cli_tps_reset_stats()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01363">cli_tps_reset_stats_all()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l01173">destroy_conference_bridge()</a>, <a class="el" href="../../d7/dad/pjsip__distributor_8c_source.html#l00485">distributor()</a>, <a class="el" href="../../d7/dad/pjsip__distributor_8c_source.html#l01225">distributor_pool_shutdown()</a>, <a class="el" href="../../df/d3a/dns__system__resolver_8c_source.html#l00120">dns_system_resolver_destroy()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l01349">execute_tasks()</a>, <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00170">exten_state_subscription_destructor()</a>, <a class="el" href="../../d1/d75/res__pjsip__refer_8c_source.html#l00349">refer_progress_destroy()</a>, <a class="el" href="../../dc/dce/test__res__pjsip__scheduler_8c_source.html#l00102">scheduler()</a>, <a class="el" href="../../de/dfa/pjsip__scheduler_8c_source.html#l00399">schtd_dtor()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l01363">serializer_task_pushed()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02900">session_destructor()</a>, <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l00941">sip_options_aor_dtor()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01015">sip_outbound_publisher_destroy()</a>, <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l01297">sip_outbound_registration_client_state_destroy()</a>, <a class="el" href="../../d4/d43/pjsip__resolver_8c_source.html#l00098">sip_resolve_destroy()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l00678">sorcery_object_type_destructor()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00715">subscription_dtor()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01684">subscription_persistence_recreate()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01367">subscription_tree_destructor()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00539">tps_report_taskprocessor_list()</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00742">tps_shutdown_thread()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00379">tps_taskprocessor_tab_complete()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l15050">unload_module()</a>, and <a class="el" href="../../d2/db8/res__pjsip__transport__websocket_8c_source.html#l00360">websocket_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;{</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;   <span class="keywordflow">if</span> (!tps) {</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;   }</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;   <span class="comment">/* To prevent another thread from finding and getting a reference to this</span></div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="comment">    * taskprocessor we hold the singletons lock. If we didn&#39;t do this then</span></div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;<span class="comment">    * they may acquire it and find that the listener has been shut down.</span></div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(tps_singletons);</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(tps, -1) &gt; 3) {</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(tps_singletons);</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;   }</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;   <span class="comment">/* If we&#39;re down to 3 references, then those must be:</span></div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;<span class="comment">    * 1. The reference we just got rid of</span></div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;<span class="comment">    * 2. The container</span></div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;<span class="comment">    * 3. The listener</span></div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a77df7775a2a8b6cbef307e211dbf045c">ao2_unlink_flags</a>(tps_singletons, tps, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a>);</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(tps_singletons);</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;   <a class="code" href="../../d4/deb/taskprocessor_8c.html#a57a0544f529b470405be3c2d1c209bd8">listener_shutdown</a>(tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a9dbaf508f8a891a7dfca0827ba489abc">listener</a>);</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca52efdf13b66ae502e2e20a5f49f068de">OBJ_NOLOCK</a></div><div class="ttdoc">Assume that the ao2_container is already locked. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01067">astobj2.h:1067</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_a9dbaf508f8a891a7dfca0827ba489abc"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#a9dbaf508f8a891a7dfca0827ba489abc">ast_taskprocessor::listener</a></div><div class="ttdeci">struct ast_taskprocessor_listener * listener</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00081">taskprocessor.c:81</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_a57a0544f529b470405be3c2d1c209bd8"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a57a0544f529b470405be3c2d1c209bd8">listener_shutdown</a></div><div class="ttdeci">static void listener_shutdown(struct ast_taskprocessor_listener *listener)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00915">taskprocessor.c:915</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="astobj2_8h_html_a77df7775a2a8b6cbef307e211dbf045c"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a77df7775a2a8b6cbef307e211dbf045c">ao2_unlink_flags</a></div><div class="ttdeci">#define ao2_unlink_flags(container, obj, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01622">astobj2.h:1622</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8460a4b877658e3c2a6abbafcfa4c54c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8460a4b877658e3c2a6abbafcfa4c54c">&#9670;&nbsp;</a></span>ast_taskprocessor_unsuspend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_taskprocessor_unsuspend </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *&#160;</td>
          <td class="paramname"><em>tps</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Indicate the taskprocessor is unsuspended. </p>
<dl class="section since"><dt>Since</dt><dd>13.12.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tps</td><td>Task processor. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">-1</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01196">1196</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00091">ast_taskprocessor::suspended</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l03200">ast_sip_session_unsuspend()</a>, and <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00180">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;{</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;   <span class="keywordflow">if</span> (tps) {</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(tps);</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;      tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a2862ffde11c780129862e5549415a6f6">suspended</a> = 0;</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(tps);</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;   }</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;}</div><div class="ttc" id="structast__taskprocessor_html_a2862ffde11c780129862e5549415a6f6"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#a2862ffde11c780129862e5549415a6f6">ast_taskprocessor::suspended</a></div><div class="ttdeci">unsigned int suspended</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00091">taskprocessor.c:91</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a58f95b0d90cc7fe0d44ec5aae481c819"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58f95b0d90cc7fe0d44ec5aae481c819">&#9670;&nbsp;</a></span>ast_tps_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_tps_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Provided by taskprocessor.c </p>

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00301">301</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00365">AO2_ALLOC_OPT_LOCK_MUTEX</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01310">ao2_container_alloc_hash</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00265">ast_cli_register_multiple</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00199">ast_cond_init</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00019">ast_register_cleanup()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00158">AST_VECTOR_RW_INIT</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00619">tps_cmp_cb()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00610">tps_hash_cb()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c.html#a324cc9d868c635cb5bff2e559024b78b">TPS_MAX_BUCKETS</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00291">tps_shutdown()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d03/asterisk_8c_source.html#l03947">asterisk_daemon()</a>.</p>
<div class="fragment"><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;{</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;   tps_singletons = <a class="code" href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a>, 0,</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      <a class="code" href="../../d4/deb/taskprocessor_8c.html#a324cc9d868c635cb5bff2e559024b78b">TPS_MAX_BUCKETS</a>, <a class="code" href="../../d4/deb/taskprocessor_8c.html#ae4e09c51f3627ca1091628718067ed7c">tps_hash_cb</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/deb/taskprocessor_8c.html#ad12172ebca405a9600704348ac059ec2">tps_cmp_cb</a>);</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;   <span class="keywordflow">if</span> (!tps_singletons) {</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;taskprocessor container failed to initialize!\n&quot;</span>);</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;   }</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#af82e9e2b45ad967329a74e88352d7973">AST_VECTOR_RW_INIT</a>(&amp;overloaded_subsystems, 10)) {</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(tps_singletons, -1);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;taskprocessor subsystems vector failed to initialize!\n&quot;</span>);</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;   }</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a>(&amp;cli_ping_cond, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a>(<a class="code" href="../../d4/deb/taskprocessor_8c.html#a3f1ff5f2bf7938f6d216f04f0057486e">taskprocessor_clis</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d4/deb/taskprocessor_8c.html#a3f1ff5f2bf7938f6d216f04f0057486e">taskprocessor_clis</a>));</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   <a class="code" href="../../db/db2/asterisk_8h.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a>(<a class="code" href="../../d4/deb/taskprocessor_8c.html#a1b0baeae7f77179e7864de00bb638608">tps_shutdown</a>);</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;}</div><div class="ttc" id="vector_8h_html_af82e9e2b45ad967329a74e88352d7973"><div class="ttname"><a href="../../d6/d68/vector_8h.html#af82e9e2b45ad967329a74e88352d7973">AST_VECTOR_RW_INIT</a></div><div class="ttdeci">#define AST_VECTOR_RW_INIT(vec, size)</div><div class="ttdoc">Initialize a vector with a read/write lock. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00158">vector.h:158</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_a1b0baeae7f77179e7864de00bb638608"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a1b0baeae7f77179e7864de00bb638608">tps_shutdown</a></div><div class="ttdeci">static void tps_shutdown(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00291">taskprocessor.c:291</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_ad12172ebca405a9600704348ac059ec2"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#ad12172ebca405a9600704348ac059ec2">tps_cmp_cb</a></div><div class="ttdeci">static int tps_cmp_cb(void *obj, void *arg, int flags)</div><div class="ttdoc">The astobj2 compare callback for taskprocessors. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00619">taskprocessor.c:619</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_ae4e09c51f3627ca1091628718067ed7c"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#ae4e09c51f3627ca1091628718067ed7c">tps_hash_cb</a></div><div class="ttdeci">static int tps_hash_cb(const void *obj, const int flags)</div><div class="ttdoc">The astobj2 hash callback for taskprocessors. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00610">taskprocessor.c:610</a></div></div>
<div class="ttc" id="lock_8h_html_a69e9591803d36f5683eb9b084442be9b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a></div><div class="ttdeci">#define ast_cond_init(cond, attr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00199">lock.h:199</a></div></div>
<div class="ttc" id="cli_8h_html_aea8910ed9e301e7f741f87942c244eac"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a></div><div class="ttdeci">#define ast_cli_register_multiple(e, len)</div><div class="ttdoc">Register multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00265">cli.h:265</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_a324cc9d868c635cb5bff2e559024b78b"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a324cc9d868c635cb5bff2e559024b78b">TPS_MAX_BUCKETS</a></div><div class="ttdeci">#define TPS_MAX_BUCKETS</div></div>
<div class="ttc" id="asterisk_8h_html_a412442e1beffe5bec07ed2e9ea72afc3"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a></div><div class="ttdeci">int ast_register_cleanup(void(*func)(void))</div><div class="ttdoc">Register a function to be executed before Asterisk gracefully exits. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00019">clicompat.c:19</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00365">astobj2.h:365</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="astobj2_8h_html_aefc16f8aa9087cbc5c55c70cf1dd41b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aefc16f8aa9087cbc5c55c70cf1dd41b2">ao2_container_alloc_hash</a></div><div class="ttdeci">#define ao2_container_alloc_hash(ao2_options, container_options, n_buckets, hash_fn, sort_fn, cmp_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01310">astobj2.h:1310</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_a3f1ff5f2bf7938f6d216f04f0057486e"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a3f1ff5f2bf7938f6d216f04f0057486e">taskprocessor_clis</a></div><div class="ttdeci">static struct ast_cli_entry taskprocessor_clis[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00159">taskprocessor.c:159</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad520ee0eb492782ddeb5b48c73305caf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad520ee0eb492782ddeb5b48c73305caf">&#9670;&nbsp;</a></span>AST_VECTOR_RW()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static AST_VECTOR_RW </td>
          <td>(</td>
          <td class="paramtype">subsystem_alert_vector&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/da5/structsubsystem__alert.html">subsystem_alert</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>CLI taskprocessor ping &lt;blah&gt;operation requires a ping condition lock. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00127">127</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                                                   {</div></div><!-- fragment -->
</div>
</div>
<a id="af2231d9f6c9381e33d920834a5cc0af4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2231d9f6c9381e33d920834a5cc0af4">&#9670;&nbsp;</a></span>cli_subsystem_alert_report()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char * cli_subsystem_alert_report </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00729">729</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00124">subsystem_alert::alert_count</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00185">ast_cli_entry::args</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00865">AST_VECTOR_CALLBACK_VOID</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00174">AST_VECTOR_FREE</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00113">AST_VECTOR_INIT</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00880">AST_VECTOR_RW_RDLOCK</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00900">AST_VECTOR_RW_UNLOCK</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00046">CLI_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d4/deb/taskprocessor_8c.html#aed8c117feb31a243131f766855998d23">FMT_FIELDS_SUBSYSTEM</a>, <a class="el" href="../../d4/deb/taskprocessor_8c.html#a35d4f34f427c4aa9fd3e83349113d2ed">FMT_HEADERS_SUBSYSTEM</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00125">subsystem_alert::subsystem</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00714">subsystem_copy()</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;{</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;   <span class="keyword">struct </span>subsystem_alert_vector sorted_subsystems;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="preprocessor">#define FMT_HEADERS_SUBSYSTEM    &quot;%-32s %12s\n&quot;</span></div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="preprocessor">#define FMT_FIELDS_SUBSYSTEM     &quot;%-32s %12u\n&quot;</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;core show taskprocessor alerted subsystems&quot;</span>;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;         <span class="stringliteral">&quot;Usage: core show taskprocessor alerted subsystems\n&quot;</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;         <span class="stringliteral">&quot;  Shows a list of task processor subsystems that are currently alerted\n&quot;</span>;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;   }</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>) {</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;   }</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a>(&amp;sorted_subsystems, <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;overloaded_subsystems))) {</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;   }</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#ad414eae87431bad2a7fc4dffa9d06350">AST_VECTOR_RW_RDLOCK</a>(&amp;overloaded_subsystems);</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;overloaded_subsystems); i++) {</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      <a class="code" href="../../d4/deb/taskprocessor_8c.html#a65e4a8f7f8e6b84cdf6731b4cd62585f">subsystem_copy</a>(<a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;overloaded_subsystems, i), &amp;sorted_subsystems);</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;   }</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a5ad3dd1d3da5d4ebf6a44d32e42c4c91">AST_VECTOR_RW_UNLOCK</a>(&amp;overloaded_subsystems);</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n&quot;</span> <a class="code" href="../../d4/deb/taskprocessor_8c.html#a35d4f34f427c4aa9fd3e83349113d2ed">FMT_HEADERS_SUBSYSTEM</a>, <span class="stringliteral">&quot;Subsystem&quot;</span>, <span class="stringliteral">&quot;Alert Count&quot;</span>);</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;sorted_subsystems); i++) {</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d9/da5/structsubsystem__alert.html">subsystem_alert</a> *alert = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;sorted_subsystems, i);</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../d4/deb/taskprocessor_8c.html#aed8c117feb31a243131f766855998d23">FMT_FIELDS_SUBSYSTEM</a>, alert-&gt;<a class="code" href="../../d9/da5/structsubsystem__alert.html#aefc476783822f8e838c9c0cdbeb24b25">subsystem</a>, alert-&gt;<a class="code" href="../../d9/da5/structsubsystem__alert.html#a1a3f5878055eb265ef3444bde78f5f84">alert_count</a>);</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;   }</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n%zu subsystems\n\n&quot;</span>, <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;sorted_subsystems));</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#aeb9853664dde8a7df8bc7ea180d73d54">AST_VECTOR_CALLBACK_VOID</a>(&amp;sorted_subsystems, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(&amp;sorted_subsystems);</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;}</div><div class="ttc" id="vector_8h_html_a66aaa4efda59c52384b03c38e781124d"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a></div><div class="ttdeci">#define AST_VECTOR_FREE(vec)</div><div class="ttdoc">Deallocates this vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00174">vector.h:174</a></div></div>
<div class="ttc" id="structsubsystem__alert_html"><div class="ttname"><a href="../../d9/da5/structsubsystem__alert.html">subsystem_alert</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00123">taskprocessor.c:123</a></div></div>
<div class="ttc" id="vector_8h_html_a5ad3dd1d3da5d4ebf6a44d32e42c4c91"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a5ad3dd1d3da5d4ebf6a44d32e42c4c91">AST_VECTOR_RW_UNLOCK</a></div><div class="ttdeci">#define AST_VECTOR_RW_UNLOCK(vec)</div><div class="ttdoc">Unlock vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00900">vector.h:900</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="structsubsystem__alert_html_aefc476783822f8e838c9c0cdbeb24b25"><div class="ttname"><a href="../../d9/da5/structsubsystem__alert.html#aefc476783822f8e838c9c0cdbeb24b25">subsystem_alert::subsystem</a></div><div class="ttdeci">char subsystem[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00125">taskprocessor.c:125</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_a65e4a8f7f8e6b84cdf6731b4cd62585f"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a65e4a8f7f8e6b84cdf6731b4cd62585f">subsystem_copy</a></div><div class="ttdeci">static void subsystem_copy(struct subsystem_alert *alert, struct subsystem_alert_vector *vector)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00714">taskprocessor.c:714</a></div></div>
<div class="ttc" id="vector_8h_html_ad414eae87431bad2a7fc4dffa9d06350"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ad414eae87431bad2a7fc4dffa9d06350">AST_VECTOR_RW_RDLOCK</a></div><div class="ttdeci">#define AST_VECTOR_RW_RDLOCK(vec)</div><div class="ttdoc">Obtain read lock on vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00880">vector.h:880</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_a35d4f34f427c4aa9fd3e83349113d2ed"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a35d4f34f427c4aa9fd3e83349113d2ed">FMT_HEADERS_SUBSYSTEM</a></div><div class="ttdeci">#define FMT_HEADERS_SUBSYSTEM</div></div>
<div class="ttc" id="structast__cli__entry_html_a1bd7a8575ca2650132d636d65dcda2f6"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">ast_cli_entry::args</a></div><div class="ttdeci">int args</div><div class="ttdoc">This gets set in ast_cli_register() </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00185">cli.h:185</a></div></div>
<div class="ttc" id="vector_8h_html_ad9d555fa89da1bfc691181993499f785"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a></div><div class="ttdeci">#define AST_VECTOR_INIT(vec, size)</div><div class="ttdoc">Initialize a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00113">vector.h:113</a></div></div>
<div class="ttc" id="structsubsystem__alert_html_a1a3f5878055eb265ef3444bde78f5f84"><div class="ttname"><a href="../../d9/da5/structsubsystem__alert.html#a1a3f5878055eb265ef3444bde78f5f84">subsystem_alert::alert_count</a></div><div class="ttdeci">unsigned int alert_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00124">taskprocessor.c:124</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="cli_8h_html_ae47751901c430ebb833e59291a5e0b3f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a></div><div class="ttdeci">#define CLI_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00046">cli.h:46</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_aed8c117feb31a243131f766855998d23"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#aed8c117feb31a243131f766855998d23">FMT_FIELDS_SUBSYSTEM</a></div><div class="ttdeci">#define FMT_FIELDS_SUBSYSTEM</div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
<div class="ttc" id="vector_8h_html_aeb9853664dde8a7df8bc7ea180d73d54"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aeb9853664dde8a7df8bc7ea180d73d54">AST_VECTOR_CALLBACK_VOID</a></div><div class="ttdeci">#define AST_VECTOR_CALLBACK_VOID(vec, callback,...)</div><div class="ttdoc">Execute a callback on every element in a vector disregarding callback return. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00865">vector.h:865</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a87122ffa2ccde0c8ee4cfee1cb898ba2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87122ffa2ccde0c8ee4cfee1cb898ba2">&#9670;&nbsp;</a></span>cli_tps_ping()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char * cli_tps_ping </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00411">411</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00204">ast_cond_timedwait</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00238">ast_samp2tv()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01044">ast_taskprocessor_get()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01175">ast_taskprocessor_push()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01109">ast_taskprocessor_unreference()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02283">ast_tvadd()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02298">ast_tvsub()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00046">CLI_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00164">ast_cli_args::pos</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00402">tps_ping_handler()</a>, <a class="el" href="../../d0/d1e/taskprocessor_8h_source.html#l00077">TPS_REF_IF_EXISTS</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00379">tps_taskprocessor_tab_complete()</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;{</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;   <span class="keyword">struct </span>timeval begin, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>, delta;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;   <span class="keyword">struct </span>timeval when;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;   <span class="keyword">struct </span>timespec ts;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *tps;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;core ping taskprocessor&quot;</span>;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;         <span class="stringliteral">&quot;Usage: core ping taskprocessor &lt;taskprocessor&gt;\n&quot;</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;         <span class="stringliteral">&quot;  Displays the time required for a task to be processed\n&quot;</span>;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> == 3) {</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d4/deb/taskprocessor_8c.html#afeca2901665160872eff5b7f98775822">tps_taskprocessor_tab_complete</a>(a);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      }</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;   }</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 4)</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;   name = a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3];</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;   <span class="keywordflow">if</span> (!(tps = <a class="code" href="../../d4/deb/taskprocessor_8c.html#ac999cc9523590a29dff6acbd9cad24a9">ast_taskprocessor_get</a>(name, <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a42ae78df3dc5106c133bf2f7b72080f7abe990199e3796a0f60ff62ab1e36e3c0">TPS_REF_IF_EXISTS</a>))) {</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\nping failed: %s not found\n\n&quot;</span>, name);</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;   }</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\npinging %s ...&quot;</span>, name);</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">    * Wait up to 5 seconds for a ping reply.</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">    * On a very busy system it could take awhile to get a</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment">    * ping response from some taskprocessors.</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;   begin = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;   when = <a class="code" href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a>(begin, <a class="code" href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a>(5000, 1000));</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;   ts.tv_sec = when.tv_sec;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;   ts.tv_nsec = when.tv_usec * 1000;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;cli_ping_cond_lock);</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/deb/taskprocessor_8c.html#a815e690b2db467f47655ebaa5d85fb69">ast_taskprocessor_push</a>(tps, <a class="code" href="../../d4/deb/taskprocessor_8c.html#a445163d192c7b9fe8eca67679c19472c">tps_ping_handler</a>, 0) &lt; 0) {</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;cli_ping_cond_lock);</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\nping failed: could not push task to %s\n\n&quot;</span>, name);</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      <a class="code" href="../../d4/deb/taskprocessor_8c.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a>(tps);</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;   }</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;cli_ping_cond, &amp;cli_ping_cond_lock, &amp;ts);</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;cli_ping_cond_lock);</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;   <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;   delta = <a class="code" href="../../de/df7/time_8h.html#aa13b651c18bc6004cab21ac041d44dd8">ast_tvsub</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>, begin);</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n\t%24s ping time: %.1ld.%.6ld sec\n\n&quot;</span>, name, (<span class="keywordtype">long</span>)delta.tv_sec, (<span class="keywordtype">long</span> <span class="keywordtype">int</span>)delta.tv_usec);</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;   <a class="code" href="../../d4/deb/taskprocessor_8c.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a>(tps);</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;}</div><div class="ttc" id="taskprocessor_8c_html_a815e690b2db467f47655ebaa5d85fb69"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a815e690b2db467f47655ebaa5d85fb69">ast_taskprocessor_push</a></div><div class="ttdeci">int ast_taskprocessor_push(struct ast_taskprocessor *tps, int(*task_exe)(void *datap), void *datap)</div><div class="ttdoc">Push a task into the specified taskprocessor queue and signal the taskprocessor thread. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01175">taskprocessor.c:1175</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_a32492eb2480cb8c46ad669622cff8556"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a></div><div class="ttdeci">void * ast_taskprocessor_unreference(struct ast_taskprocessor *tps)</div><div class="ttdoc">Unreference the specified taskprocessor and its reference count will decrement. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01109">taskprocessor.c:1109</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="time_8h_html_a1d774df72e3dbb623475783e06ce4f61"><div class="ttname"><a href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a></div><div class="ttdeci">struct timeval ast_samp2tv(unsigned int _nsamp, unsigned int _rate)</div><div class="ttdoc">Returns a timeval corresponding to the duration of n samples at rate r. Useful to convert samples to ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00238">time.h:238</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="time_8h_html_a97e1bb8fbd7a103212789e87e7ed6073"><div class="ttname"><a href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a></div><div class="ttdeci">struct timeval ast_tvadd(struct timeval a, struct timeval b)</div><div class="ttdoc">Returns the sum of two timevals a + b. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02283">extconf.c:2283</a></div></div>
<div class="ttc" id="cli_8h_html_ae47751901c430ebb833e59291a5e0b3f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a></div><div class="ttdeci">#define CLI_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00046">cli.h:46</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a42ae78df3dc5106c133bf2f7b72080f7abe990199e3796a0f60ff62ab1e36e3c0"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a42ae78df3dc5106c133bf2f7b72080f7abe990199e3796a0f60ff62ab1e36e3c0">TPS_REF_IF_EXISTS</a></div><div class="ttdoc">return a reference to a taskprocessor ONLY if it already exists </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1e/taskprocessor_8h_source.html#l00077">taskprocessor.h:77</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="structast__taskprocessor_html"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a></div><div class="ttdoc">A ast_taskprocessor structure is a singleton by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00069">taskprocessor.c:69</a></div></div>
<div class="ttc" id="structast__cli__args_html_a4b911d12699acbbb5a8b62355b35bae8"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">ast_cli_args::pos</a></div><div class="ttdeci">const int pos</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00164">cli.h:164</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_a445163d192c7b9fe8eca67679c19472c"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a445163d192c7b9fe8eca67679c19472c">tps_ping_handler</a></div><div class="ttdeci">static int tps_ping_handler(void *datap)</div><div class="ttdoc">CLI taskprocessor ping &lt;blah&gt;handler function. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00402">taskprocessor.c:402</a></div></div>
<div class="ttc" id="time_8h_html_aa13b651c18bc6004cab21ac041d44dd8"><div class="ttname"><a href="../../de/df7/time_8h.html#aa13b651c18bc6004cab21ac041d44dd8">ast_tvsub</a></div><div class="ttdeci">struct timeval ast_tvsub(struct timeval a, struct timeval b)</div><div class="ttdoc">Returns the difference of two timevals a - b. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02298">extconf.c:2298</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_afeca2901665160872eff5b7f98775822"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#afeca2901665160872eff5b7f98775822">tps_taskprocessor_tab_complete</a></div><div class="ttdeci">static char * tps_taskprocessor_tab_complete(struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00379">taskprocessor.c:379</a></div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_ac999cc9523590a29dff6acbd9cad24a9"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#ac999cc9523590a29dff6acbd9cad24a9">ast_taskprocessor_get</a></div><div class="ttdeci">struct ast_taskprocessor * ast_taskprocessor_get(const char *name, enum ast_tps_options create)</div><div class="ttdoc">Get a reference to a taskprocessor with the specified name and create the taskprocessor if necessary...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01044">taskprocessor.c:1044</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af7496467fecf5a17ededca8b03a4aa1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7496467fecf5a17ededca8b03a4aa1f">&#9670;&nbsp;</a></span>cli_tps_report()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char * cli_tps_report </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00576">576</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00185">ast_cli_entry::args</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00510">FMT_HEADERS</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00164">ast_cli_args::pos</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00539">tps_report_taskprocessor_list()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00379">tps_taskprocessor_tab_complete()</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;{</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *like;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;core show taskprocessors [like]&quot;</span>;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;         <span class="stringliteral">&quot;Usage: core show taskprocessors [like keyword]\n&quot;</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;         <span class="stringliteral">&quot;  Shows a list of instantiated task processors and their statistics\n&quot;</span>;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> == e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>) {</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d4/deb/taskprocessor_8c.html#afeca2901665160872eff5b7f98775822">tps_taskprocessor_tab_complete</a>(a);</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;      }</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;   }</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a> - 1) {</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      like = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a> + 1 &amp;&amp; !strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>-1], <span class="stringliteral">&quot;like&quot;</span>)) {</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      like = a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>];</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;   }</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n&quot;</span> <a class="code" href="../../d4/deb/taskprocessor_8c.html#a23b24e0f93569bfc937a4bc9143c21e3">FMT_HEADERS</a>, <span class="stringliteral">&quot;Processor&quot;</span>, <span class="stringliteral">&quot;Processed&quot;</span>, <span class="stringliteral">&quot;In Queue&quot;</span>, <span class="stringliteral">&quot;Max Depth&quot;</span>, <span class="stringliteral">&quot;Low water&quot;</span>, <span class="stringliteral">&quot;High water&quot;</span>);</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n%d taskprocessors\n\n&quot;</span>, <a class="code" href="../../d4/deb/taskprocessor_8c.html#a7d97246b005106981887b28595a2663d">tps_report_taskprocessor_list</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, like));</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;}</div><div class="ttc" id="taskprocessor_8c_html_a7d97246b005106981887b28595a2663d"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a7d97246b005106981887b28595a2663d">tps_report_taskprocessor_list</a></div><div class="ttdeci">static int tps_report_taskprocessor_list(int fd, const char *like)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00539">taskprocessor.c:539</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_a23b24e0f93569bfc937a4bc9143c21e3"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a23b24e0f93569bfc937a4bc9143c21e3">FMT_HEADERS</a></div><div class="ttdeci">#define FMT_HEADERS</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00510">taskprocessor.c:510</a></div></div>
<div class="ttc" id="structast__cli__entry_html_a1bd7a8575ca2650132d636d65dcda2f6"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">ast_cli_entry::args</a></div><div class="ttdeci">int args</div><div class="ttdoc">This gets set in ast_cli_register() </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00185">cli.h:185</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="structast__cli__args_html_a4b911d12699acbbb5a8b62355b35bae8"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">ast_cli_args::pos</a></div><div class="ttdeci">const int pos</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00164">cli.h:164</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_afeca2901665160872eff5b7f98775822"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#afeca2901665160872eff5b7f98775822">tps_taskprocessor_tab_complete</a></div><div class="ttdeci">static char * tps_taskprocessor_tab_complete(struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00379">taskprocessor.c:379</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9ce71f4e99a26647186ad0df4acab995"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ce71f4e99a26647186ad0df4acab995">&#9670;&nbsp;</a></span>cli_tps_reset_stats()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char * cli_tps_reset_stats </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01329">1329</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01044">ast_taskprocessor_get()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01109">ast_taskprocessor_unreference()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d1e/taskprocessor_8h_source.html#l00077">TPS_REF_IF_EXISTS</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01321">tps_reset_stats()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00379">tps_taskprocessor_tab_complete()</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;{</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>;</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *tps;</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;core reset taskprocessor&quot;</span>;</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;         <span class="stringliteral">&quot;Usage: core reset taskprocessor &lt;taskprocessor&gt;\n&quot;</span></div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;         <span class="stringliteral">&quot;    Resets stats for the specified taskprocessor\n&quot;</span>;</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d4/deb/taskprocessor_8c.html#afeca2901665160872eff5b7f98775822">tps_taskprocessor_tab_complete</a>(a);</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;   }</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 4) {</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;   }</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;   name = a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3];</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;   <span class="keywordflow">if</span> (!(tps = <a class="code" href="../../d4/deb/taskprocessor_8c.html#ac999cc9523590a29dff6acbd9cad24a9">ast_taskprocessor_get</a>(name, <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a42ae78df3dc5106c133bf2f7b72080f7abe990199e3796a0f60ff62ab1e36e3c0">TPS_REF_IF_EXISTS</a>))) {</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\nReset failed: %s not found\n\n&quot;</span>, name);</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;   }</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\nResetting %s\n\n&quot;</span>, name);</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;   <a class="code" href="../../d4/deb/taskprocessor_8c.html#a066af12f04560a8f62daf5c13e5029c1">tps_reset_stats</a>(tps);</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;   <a class="code" href="../../d4/deb/taskprocessor_8c.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a>(tps);</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_a32492eb2480cb8c46ad669622cff8556"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a></div><div class="ttdeci">void * ast_taskprocessor_unreference(struct ast_taskprocessor *tps)</div><div class="ttdoc">Unreference the specified taskprocessor and its reference count will decrement. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01109">taskprocessor.c:1109</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_a066af12f04560a8f62daf5c13e5029c1"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a066af12f04560a8f62daf5c13e5029c1">tps_reset_stats</a></div><div class="ttdeci">static void tps_reset_stats(struct ast_taskprocessor *tps)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01321">taskprocessor.c:1321</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a42ae78df3dc5106c133bf2f7b72080f7abe990199e3796a0f60ff62ab1e36e3c0"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a42ae78df3dc5106c133bf2f7b72080f7abe990199e3796a0f60ff62ab1e36e3c0">TPS_REF_IF_EXISTS</a></div><div class="ttdoc">return a reference to a taskprocessor ONLY if it already exists </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1e/taskprocessor_8h_source.html#l00077">taskprocessor.h:77</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="structast__taskprocessor_html"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a></div><div class="ttdoc">A ast_taskprocessor structure is a singleton by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00069">taskprocessor.c:69</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_afeca2901665160872eff5b7f98775822"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#afeca2901665160872eff5b7f98775822">tps_taskprocessor_tab_complete</a></div><div class="ttdeci">static char * tps_taskprocessor_tab_complete(struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00379">taskprocessor.c:379</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_ac999cc9523590a29dff6acbd9cad24a9"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#ac999cc9523590a29dff6acbd9cad24a9">ast_taskprocessor_get</a></div><div class="ttdeci">struct ast_taskprocessor * ast_taskprocessor_get(const char *name, enum ast_tps_options create)</div><div class="ttdoc">Get a reference to a taskprocessor with the specified name and create the taskprocessor if necessary...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01044">taskprocessor.c:1044</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1765245db29756bf7dfe2dd16f6f5119"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1765245db29756bf7dfe2dd16f6f5119">&#9670;&nbsp;</a></span>cli_tps_reset_stats_all()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char * cli_tps_reset_stats_all </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01363">1363</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00185">ast_cli_entry::args</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01109">ast_taskprocessor_unreference()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01321">tps_reset_stats()</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;{</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *tps;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> iter;</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;core reset taskprocessors&quot;</span>;</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;         <span class="stringliteral">&quot;Usage: core reset taskprocessors\n&quot;</span></div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;         <span class="stringliteral">&quot;    Resets stats for all taskprocessors\n&quot;</span>;</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;   }</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>) {</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;   }</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\nResetting stats for all taskprocessors\n\n&quot;</span>);</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;   iter = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(tps_singletons, 0);</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;   <span class="keywordflow">while</span> ((tps = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;iter))) {</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;      <a class="code" href="../../d4/deb/taskprocessor_8c.html#a066af12f04560a8f62daf5c13e5029c1">tps_reset_stats</a>(tps);</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;      <a class="code" href="../../d4/deb/taskprocessor_8c.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a>(tps);</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;   }</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;iter);</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_a32492eb2480cb8c46ad669622cff8556"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a></div><div class="ttdeci">void * ast_taskprocessor_unreference(struct ast_taskprocessor *tps)</div><div class="ttdoc">Unreference the specified taskprocessor and its reference count will decrement. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01109">taskprocessor.c:1109</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__entry_html_a1bd7a8575ca2650132d636d65dcda2f6"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">ast_cli_entry::args</a></div><div class="ttdeci">int args</div><div class="ttdoc">This gets set in ast_cli_register() </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00185">cli.h:185</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_a066af12f04560a8f62daf5c13e5029c1"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a066af12f04560a8f62daf5c13e5029c1">tps_reset_stats</a></div><div class="ttdeci">static void tps_reset_stats(struct ast_taskprocessor *tps)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01321">taskprocessor.c:1321</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="structast__taskprocessor_html"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a></div><div class="ttdoc">A ast_taskprocessor structure is a singleton by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00069">taskprocessor.c:69</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab42ce2663f8533519c8f7e4ff7248327"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab42ce2663f8533519c8f7e4ff7248327">&#9670;&nbsp;</a></span>default_listener_die()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int default_listener_die </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00243">243</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00169">default_taskprocessor_listener_pvt::dead</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00250">default_listener_shutdown()</a>.</p>
<div class="fragment"><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;{</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html">default_taskprocessor_listener_pvt</a> *pvt = data;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;   pvt-&gt;<a class="code" href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html#aeddb1df77f26fbe111539b1c4c0c1929">dead</a> = 1;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;}</div><div class="ttc" id="structdefault__taskprocessor__listener__pvt_html"><div class="ttname"><a href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html">default_taskprocessor_listener_pvt</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00167">taskprocessor.c:167</a></div></div>
<div class="ttc" id="structdefault__taskprocessor__listener__pvt_html_aeddb1df77f26fbe111539b1c4c0c1929"><div class="ttname"><a href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html#aeddb1df77f26fbe111539b1c4c0c1929">default_taskprocessor_listener_pvt::dead</a></div><div class="ttdeci">int dead</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00169">taskprocessor.c:169</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6314b05bebeaff91454d8ca7254472b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6314b05bebeaff91454d8ca7254472b8">&#9670;&nbsp;</a></span>default_listener_pvt_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* default_listener_pvt_alloc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00955">955</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00066">AST_PTHREADT_NULL</a>, <a class="el" href="../../d2/d28/sem_8h.html#a1ab41f813806a164b518257c5b6b6e30">ast_sem_init()</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00168">default_taskprocessor_listener_pvt::poll_thread</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00170">default_taskprocessor_listener_pvt::sem</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01044">ast_taskprocessor_get()</a>.</p>
<div class="fragment"><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;{</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html">default_taskprocessor_listener_pvt</a> *pvt;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;   pvt = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*pvt));</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;   <span class="keywordflow">if</span> (!pvt) {</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;   }</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;   pvt-&gt;<a class="code" href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html#a495591a348e5b9edcf4be80cb688ca89">poll_thread</a> = <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d2/d28/sem_8h.html#a1ab41f813806a164b518257c5b6b6e30">ast_sem_init</a>(&amp;pvt-&gt;<a class="code" href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html#a9684f7c550b6261d07efade48fcc3c8b">sem</a>, 0, 0) != 0) {</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;ast_sem_init(): %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(pvt);</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;   }</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;   <span class="keywordflow">return</span> pvt;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;}</div><div class="ttc" id="structdefault__taskprocessor__listener__pvt_html"><div class="ttname"><a href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html">default_taskprocessor_listener_pvt</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00167">taskprocessor.c:167</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="lock_8h_html_a6009440c7a72f8e2e3b1ec97641ad160"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></div><div class="ttdeci">#define AST_PTHREADT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00066">lock.h:66</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="sem_8h_html_a1ab41f813806a164b518257c5b6b6e30"><div class="ttname"><a href="../../d2/d28/sem_8h.html#a1ab41f813806a164b518257c5b6b6e30">ast_sem_init</a></div><div class="ttdeci">int ast_sem_init(struct ast_sem *sem, int pshared, unsigned int value)</div><div class="ttdoc">Initialize a semaphore. </div></div>
<div class="ttc" id="structdefault__taskprocessor__listener__pvt_html_a9684f7c550b6261d07efade48fcc3c8b"><div class="ttname"><a href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html#a9684f7c550b6261d07efade48fcc3c8b">default_taskprocessor_listener_pvt::sem</a></div><div class="ttdeci">struct ast_sem sem</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00170">taskprocessor.c:170</a></div></div>
<div class="ttc" id="structdefault__taskprocessor__listener__pvt_html_a495591a348e5b9edcf4be80cb688ca89"><div class="ttname"><a href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html#a495591a348e5b9edcf4be80cb688ca89">default_taskprocessor_listener_pvt::poll_thread</a></div><div class="ttdeci">pthread_t poll_thread</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00168">taskprocessor.c:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af5ca68ce20aadfbc7e14071bf33a77ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5ca68ce20aadfbc7e14071bf33a77ed">&#9670;&nbsp;</a></span>default_listener_pvt_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void default_listener_pvt_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html">default_taskprocessor_listener_pvt</a> *&#160;</td>
          <td class="paramname"><em>pvt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00173">173</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d2/d28/sem_8h.html#a89f01b37ab088385ad31c5d7f67b0ac0">ast_sem_destroy()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00169">default_taskprocessor_listener_pvt::dead</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00170">default_taskprocessor_listener_pvt::sem</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01044">ast_taskprocessor_get()</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00180">default_listener_pvt_dtor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;{</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(pvt-&gt;<a class="code" href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html#aeddb1df77f26fbe111539b1c4c0c1929">dead</a>);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;   <a class="code" href="../../d2/d28/sem_8h.html#a89f01b37ab088385ad31c5d7f67b0ac0">ast_sem_destroy</a>(&amp;pvt-&gt;<a class="code" href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html#a9684f7c550b6261d07efade48fcc3c8b">sem</a>);</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(pvt);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;}</div><div class="ttc" id="sem_8h_html_a89f01b37ab088385ad31c5d7f67b0ac0"><div class="ttname"><a href="../../d2/d28/sem_8h.html#a89f01b37ab088385ad31c5d7f67b0ac0">ast_sem_destroy</a></div><div class="ttdeci">int ast_sem_destroy(struct ast_sem *sem)</div><div class="ttdoc">Destroy a semaphore. </div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structdefault__taskprocessor__listener__pvt_html_aeddb1df77f26fbe111539b1c4c0c1929"><div class="ttname"><a href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html#aeddb1df77f26fbe111539b1c4c0c1929">default_taskprocessor_listener_pvt::dead</a></div><div class="ttdeci">int dead</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00169">taskprocessor.c:169</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structdefault__taskprocessor__listener__pvt_html_a9684f7c550b6261d07efade48fcc3c8b"><div class="ttname"><a href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html#a9684f7c550b6261d07efade48fcc3c8b">default_taskprocessor_listener_pvt::sem</a></div><div class="ttdeci">struct ast_sem sem</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00170">taskprocessor.c:170</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3c160b3769d82ca6aa9ef343d877ef2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c160b3769d82ca6aa9ef343d877ef2c">&#9670;&nbsp;</a></span>default_listener_pvt_dtor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void default_listener_pvt_dtor </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a> *&#160;</td>
          <td class="paramname"><em>listener</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00180">180</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00173">default_listener_pvt_destroy()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00116">ast_taskprocessor_listener::user_data</a>.</p>
<div class="fragment"><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;{</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html">default_taskprocessor_listener_pvt</a> *pvt = listener-&gt;<a class="code" href="../../d7/d52/structast__taskprocessor__listener.html#a0f53d287ac7c064d1a49d4bd93ca1cb9">user_data</a>;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;   <a class="code" href="../../d4/deb/taskprocessor_8c.html#af5ca68ce20aadfbc7e14071bf33a77ed">default_listener_pvt_destroy</a>(pvt);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;   listener-&gt;<a class="code" href="../../d7/d52/structast__taskprocessor__listener.html#a0f53d287ac7c064d1a49d4bd93ca1cb9">user_data</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;}</div><div class="ttc" id="structast__taskprocessor__listener_html_a0f53d287ac7c064d1a49d4bd93ca1cb9"><div class="ttname"><a href="../../d7/d52/structast__taskprocessor__listener.html#a0f53d287ac7c064d1a49d4bd93ca1cb9">ast_taskprocessor_listener::user_data</a></div><div class="ttdeci">void * user_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00116">taskprocessor.c:116</a></div></div>
<div class="ttc" id="structdefault__taskprocessor__listener__pvt_html"><div class="ttname"><a href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html">default_taskprocessor_listener_pvt</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00167">taskprocessor.c:167</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_af5ca68ce20aadfbc7e14071bf33a77ed"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#af5ca68ce20aadfbc7e14071bf33a77ed">default_listener_pvt_destroy</a></div><div class="ttdeci">static void default_listener_pvt_destroy(struct default_taskprocessor_listener_pvt *pvt)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00173">taskprocessor.c:173</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4f4f599df1be87b1de304367a773c1b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f4f599df1be87b1de304367a773c1b1">&#9670;&nbsp;</a></span>default_listener_shutdown()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void default_listener_shutdown </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a> *&#160;</td>
          <td class="paramname"><em>listener</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00250">250</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00463">ao2_t_ref</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00066">AST_PTHREADT_NULL</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01175">ast_taskprocessor_push()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00243">default_listener_die()</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00168">default_taskprocessor_listener_pvt::poll_thread</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00114">ast_taskprocessor_listener::tps</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00116">ast_taskprocessor_listener::user_data</a>.</p>
<div class="fragment"><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;{</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html">default_taskprocessor_listener_pvt</a> *pvt = listener-&gt;<a class="code" href="../../d7/d52/structast__taskprocessor__listener.html#a0f53d287ac7c064d1a49d4bd93ca1cb9">user_data</a>;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;   <span class="comment">/* Hold a reference during shutdown */</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>(listener-&gt;<a class="code" href="../../d7/d52/structast__taskprocessor__listener.html#a4c381cb1b5cf198fa3f260212e716c9a">tps</a>, +1, <span class="stringliteral">&quot;tps-shutdown&quot;</span>);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/deb/taskprocessor_8c.html#a815e690b2db467f47655ebaa5d85fb69">ast_taskprocessor_push</a>(listener-&gt;<a class="code" href="../../d7/d52/structast__taskprocessor__listener.html#a4c381cb1b5cf198fa3f260212e716c9a">tps</a>, <a class="code" href="../../d4/deb/taskprocessor_8c.html#ab42ce2663f8533519c8f7e4ff7248327">default_listener_die</a>, pvt)) {</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      <span class="comment">/* This will cause the thread to exit early without completing tasks already</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">       * in the queue.  This is probably the least bad option in this situation. */</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <a class="code" href="../../d4/deb/taskprocessor_8c.html#ab42ce2663f8533519c8f7e4ff7248327">default_listener_die</a>(pvt);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;   }</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(pvt-&gt;<a class="code" href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html#a495591a348e5b9edcf4be80cb688ca89">poll_thread</a> != <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;   <span class="keywordflow">if</span> (pthread_equal(pthread_self(), pvt-&gt;<a class="code" href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html#a495591a348e5b9edcf4be80cb688ca89">poll_thread</a>)) {</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      res = pthread_detach(pvt-&gt;<a class="code" href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html#a495591a348e5b9edcf4be80cb688ca89">poll_thread</a>);</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <span class="keywordflow">if</span> (res != 0) {</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;pthread_detach(): %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      }</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      res = pthread_join(pvt-&gt;<a class="code" href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html#a495591a348e5b9edcf4be80cb688ca89">poll_thread</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      <span class="keywordflow">if</span> (res != 0) {</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;pthread_join(): %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      }</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;   }</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;   pvt-&gt;<a class="code" href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html#a495591a348e5b9edcf4be80cb688ca89">poll_thread</a> = <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a14c61bcab109a520a96d30c56ba5fcde"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a></div><div class="ttdeci">#define ao2_t_ref(o, delta, tag)</div><div class="ttdoc">Reference/unreference an object and return the old refcount. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00463">astobj2.h:463</a></div></div>
<div class="ttc" id="structast__taskprocessor__listener_html_a0f53d287ac7c064d1a49d4bd93ca1cb9"><div class="ttname"><a href="../../d7/d52/structast__taskprocessor__listener.html#a0f53d287ac7c064d1a49d4bd93ca1cb9">ast_taskprocessor_listener::user_data</a></div><div class="ttdeci">void * user_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00116">taskprocessor.c:116</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_a815e690b2db467f47655ebaa5d85fb69"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a815e690b2db467f47655ebaa5d85fb69">ast_taskprocessor_push</a></div><div class="ttdeci">int ast_taskprocessor_push(struct ast_taskprocessor *tps, int(*task_exe)(void *datap), void *datap)</div><div class="ttdoc">Push a task into the specified taskprocessor queue and signal the taskprocessor thread. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01175">taskprocessor.c:1175</a></div></div>
<div class="ttc" id="structast__taskprocessor__listener_html_a4c381cb1b5cf198fa3f260212e716c9a"><div class="ttname"><a href="../../d7/d52/structast__taskprocessor__listener.html#a4c381cb1b5cf198fa3f260212e716c9a">ast_taskprocessor_listener::tps</a></div><div class="ttdeci">struct ast_taskprocessor * tps</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00114">taskprocessor.c:114</a></div></div>
<div class="ttc" id="structdefault__taskprocessor__listener__pvt_html"><div class="ttname"><a href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html">default_taskprocessor_listener_pvt</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00167">taskprocessor.c:167</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="lock_8h_html_a6009440c7a72f8e2e3b1ec97641ad160"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></div><div class="ttdeci">#define AST_PTHREADT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00066">lock.h:66</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_ab42ce2663f8533519c8f7e4ff7248327"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#ab42ce2663f8533519c8f7e4ff7248327">default_listener_die</a></div><div class="ttdeci">static int default_listener_die(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00243">taskprocessor.c:243</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="structdefault__taskprocessor__listener__pvt_html_a495591a348e5b9edcf4be80cb688ca89"><div class="ttname"><a href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html#a495591a348e5b9edcf4be80cb688ca89">default_taskprocessor_listener_pvt::poll_thread</a></div><div class="ttdeci">pthread_t poll_thread</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00168">taskprocessor.c:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a94984044fce81d315bb69459ef6d6e46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94984044fce81d315bb69459ef6d6e46">&#9670;&nbsp;</a></span>default_listener_start()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int default_listener_start </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a> *&#160;</td>
          <td class="paramname"><em>listener</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00222">222</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00559">ast_pthread_create</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00193">default_tps_processing_function()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00168">default_taskprocessor_listener_pvt::poll_thread</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00116">ast_taskprocessor_listener::user_data</a>.</p>
<div class="fragment"><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;{</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html">default_taskprocessor_listener_pvt</a> *pvt = listener-&gt;<a class="code" href="../../d7/d52/structast__taskprocessor__listener.html#a0f53d287ac7c064d1a49d4bd93ca1cb9">user_data</a>;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a4781fd54a4ca8c7f0f8a32a6cce503c0">ast_pthread_create</a>(&amp;pvt-&gt;<a class="code" href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html#a495591a348e5b9edcf4be80cb688ca89">poll_thread</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/deb/taskprocessor_8c.html#ab17b070cbedb009abf687d8cea55d006">default_tps_processing_function</a>, listener)) {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;   }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;}</div><div class="ttc" id="structast__taskprocessor__listener_html_a0f53d287ac7c064d1a49d4bd93ca1cb9"><div class="ttname"><a href="../../d7/d52/structast__taskprocessor__listener.html#a0f53d287ac7c064d1a49d4bd93ca1cb9">ast_taskprocessor_listener::user_data</a></div><div class="ttdeci">void * user_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00116">taskprocessor.c:116</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_ab17b070cbedb009abf687d8cea55d006"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#ab17b070cbedb009abf687d8cea55d006">default_tps_processing_function</a></div><div class="ttdeci">static void * default_tps_processing_function(void *data)</div><div class="ttdoc">Function that processes tasks in the taskprocessor. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00193">taskprocessor.c:193</a></div></div>
<div class="ttc" id="structdefault__taskprocessor__listener__pvt_html"><div class="ttname"><a href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html">default_taskprocessor_listener_pvt</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00167">taskprocessor.c:167</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="utils_8h_html_a4781fd54a4ca8c7f0f8a32a6cce503c0"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a4781fd54a4ca8c7f0f8a32a6cce503c0">ast_pthread_create</a></div><div class="ttdeci">#define ast_pthread_create(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00559">utils.h:559</a></div></div>
<div class="ttc" id="structdefault__taskprocessor__listener__pvt_html_a495591a348e5b9edcf4be80cb688ca89"><div class="ttname"><a href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html#a495591a348e5b9edcf4be80cb688ca89">default_taskprocessor_listener_pvt::poll_thread</a></div><div class="ttdeci">pthread_t poll_thread</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00168">taskprocessor.c:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5194de8e24eb6c0eb1c7e52f5a605a2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5194de8e24eb6c0eb1c7e52f5a605a2e">&#9670;&nbsp;</a></span>default_task_pushed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void default_task_pushed </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a> *&#160;</td>
          <td class="paramname"><em>listener</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>was_empty</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00233">233</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d2/d28/sem_8h.html#af79fddfd5155ad5597f47d690b3d5219">ast_sem_post()</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00170">default_taskprocessor_listener_pvt::sem</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00116">ast_taskprocessor_listener::user_data</a>.</p>
<div class="fragment"><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;{</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html">default_taskprocessor_listener_pvt</a> *pvt = listener-&gt;<a class="code" href="../../d7/d52/structast__taskprocessor__listener.html#a0f53d287ac7c064d1a49d4bd93ca1cb9">user_data</a>;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d2/d28/sem_8h.html#af79fddfd5155ad5597f47d690b3d5219">ast_sem_post</a>(&amp;pvt-&gt;<a class="code" href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html#a9684f7c550b6261d07efade48fcc3c8b">sem</a>) != 0) {</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to notify of enqueued task: %s\n&quot;</span>,</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;         strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;   }</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;}</div><div class="ttc" id="structast__taskprocessor__listener_html_a0f53d287ac7c064d1a49d4bd93ca1cb9"><div class="ttname"><a href="../../d7/d52/structast__taskprocessor__listener.html#a0f53d287ac7c064d1a49d4bd93ca1cb9">ast_taskprocessor_listener::user_data</a></div><div class="ttdeci">void * user_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00116">taskprocessor.c:116</a></div></div>
<div class="ttc" id="sem_8h_html_af79fddfd5155ad5597f47d690b3d5219"><div class="ttname"><a href="../../d2/d28/sem_8h.html#af79fddfd5155ad5597f47d690b3d5219">ast_sem_post</a></div><div class="ttdeci">int ast_sem_post(struct ast_sem *sem)</div><div class="ttdoc">Increments the semaphore, unblocking a waiter if necessary. </div></div>
<div class="ttc" id="structdefault__taskprocessor__listener__pvt_html"><div class="ttname"><a href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html">default_taskprocessor_listener_pvt</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00167">taskprocessor.c:167</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="structdefault__taskprocessor__listener__pvt_html_a9684f7c550b6261d07efade48fcc3c8b"><div class="ttname"><a href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html#a9684f7c550b6261d07efade48fcc3c8b">default_taskprocessor_listener_pvt::sem</a></div><div class="ttdeci">struct ast_sem sem</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00170">taskprocessor.c:170</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab17b070cbedb009abf687d8cea55d006"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab17b070cbedb009abf687d8cea55d006">&#9670;&nbsp;</a></span>default_tps_processing_function()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* default_tps_processing_function </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function that processes tasks in the taskprocessor. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00193">193</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00463">ao2_t_ref</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d2/d28/sem_8h.html#a1644f9d2c83dd607abc45de078cc2f1f">ast_sem_getvalue()</a>, <a class="el" href="../../d2/d28/sem_8h.html#af6905f792ba5f806f697ccca7e1f3b6e">ast_sem_wait()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01212">ast_taskprocessor_execute()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00169">default_taskprocessor_listener_pvt::dead</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l01476">listener()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00170">default_taskprocessor_listener_pvt::sem</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00114">ast_taskprocessor_listener::tps</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00116">ast_taskprocessor_listener::user_data</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00222">default_listener_start()</a>.</p>
<div class="fragment"><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;{</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a> *<a class="code" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a> = data;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *tps = listener-&gt;<a class="code" href="../../d7/d52/structast__taskprocessor__listener.html#a4c381cb1b5cf198fa3f260212e716c9a">tps</a>;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html">default_taskprocessor_listener_pvt</a> *pvt = listener-&gt;<a class="code" href="../../d7/d52/structast__taskprocessor__listener.html#a0f53d287ac7c064d1a49d4bd93ca1cb9">user_data</a>;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;   <span class="keywordtype">int</span> sem_value;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;   <span class="keywordflow">while</span> (!pvt-&gt;<a class="code" href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html#aeddb1df77f26fbe111539b1c4c0c1929">dead</a>) {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      res = <a class="code" href="../../d2/d28/sem_8h.html#af6905f792ba5f806f697ccca7e1f3b6e">ast_sem_wait</a>(&amp;pvt-&gt;<a class="code" href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html#a9684f7c550b6261d07efade48fcc3c8b">sem</a>);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      <span class="keywordflow">if</span> (res != 0 &amp;&amp; <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> != EINTR) {</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;ast_sem_wait(): %s\n&quot;</span>,</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;         <span class="comment">/* Just give up */</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      }</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      <a class="code" href="../../d4/deb/taskprocessor_8c.html#a9318e041c0564532581e864cda8f9426">ast_taskprocessor_execute</a>(tps);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;   }</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;   <span class="comment">/* No posting to a dead taskprocessor! */</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;   res = <a class="code" href="../../d2/d28/sem_8h.html#a1644f9d2c83dd607abc45de078cc2f1f">ast_sem_getvalue</a>(&amp;pvt-&gt;<a class="code" href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html#a9684f7c550b6261d07efade48fcc3c8b">sem</a>, &amp;sem_value);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(res == 0 &amp;&amp; sem_value == 0);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;   <span class="comment">/* Free the shutdown reference (see default_listener_shutdown) */</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>(listener-&gt;<a class="code" href="../../d7/d52/structast__taskprocessor__listener.html#a4c381cb1b5cf198fa3f260212e716c9a">tps</a>, -1, <span class="stringliteral">&quot;tps-shutdown&quot;</span>);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a14c61bcab109a520a96d30c56ba5fcde"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a></div><div class="ttdeci">#define ao2_t_ref(o, delta, tag)</div><div class="ttdoc">Reference/unreference an object and return the old refcount. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00463">astobj2.h:463</a></div></div>
<div class="ttc" id="structast__taskprocessor__listener_html"><div class="ttname"><a href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a></div><div class="ttdoc">A listener for taskprocessors. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00110">taskprocessor.c:110</a></div></div>
<div class="ttc" id="structast__taskprocessor__listener_html_a0f53d287ac7c064d1a49d4bd93ca1cb9"><div class="ttname"><a href="../../d7/d52/structast__taskprocessor__listener.html#a0f53d287ac7c064d1a49d4bd93ca1cb9">ast_taskprocessor_listener::user_data</a></div><div class="ttdeci">void * user_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00116">taskprocessor.c:116</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_a9318e041c0564532581e864cda8f9426"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a9318e041c0564532581e864cda8f9426">ast_taskprocessor_execute</a></div><div class="ttdeci">int ast_taskprocessor_execute(struct ast_taskprocessor *tps)</div><div class="ttdoc">Pop a task off the taskprocessor and execute it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01212">taskprocessor.c:1212</a></div></div>
<div class="ttc" id="structast__taskprocessor__listener_html_a4c381cb1b5cf198fa3f260212e716c9a"><div class="ttname"><a href="../../d7/d52/structast__taskprocessor__listener.html#a4c381cb1b5cf198fa3f260212e716c9a">ast_taskprocessor_listener::tps</a></div><div class="ttdeci">struct ast_taskprocessor * tps</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00114">taskprocessor.c:114</a></div></div>
<div class="ttc" id="structdefault__taskprocessor__listener__pvt_html"><div class="ttname"><a href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html">default_taskprocessor_listener_pvt</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00167">taskprocessor.c:167</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structdefault__taskprocessor__listener__pvt_html_aeddb1df77f26fbe111539b1c4c0c1929"><div class="ttname"><a href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html#aeddb1df77f26fbe111539b1c4c0c1929">default_taskprocessor_listener_pvt::dead</a></div><div class="ttdeci">int dead</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00169">taskprocessor.c:169</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="asterisk_8c_html_adc01bca6281492dfec5ae217cf32fc34"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a></div><div class="ttdeci">static void * listener(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01476">asterisk.c:1476</a></div></div>
<div class="ttc" id="sem_8h_html_a1644f9d2c83dd607abc45de078cc2f1f"><div class="ttname"><a href="../../d2/d28/sem_8h.html#a1644f9d2c83dd607abc45de078cc2f1f">ast_sem_getvalue</a></div><div class="ttdeci">int ast_sem_getvalue(struct ast_sem *sem, int *sval)</div><div class="ttdoc">Gets the current value of the semaphore. </div></div>
<div class="ttc" id="sem_8h_html_af6905f792ba5f806f697ccca7e1f3b6e"><div class="ttname"><a href="../../d2/d28/sem_8h.html#af6905f792ba5f806f697ccca7e1f3b6e">ast_sem_wait</a></div><div class="ttdeci">int ast_sem_wait(struct ast_sem *sem)</div><div class="ttdoc">Decrements the semaphore. </div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="structdefault__taskprocessor__listener__pvt_html_a9684f7c550b6261d07efade48fcc3c8b"><div class="ttname"><a href="../../db/dbe/structdefault__taskprocessor__listener__pvt.html#a9684f7c550b6261d07efade48fcc3c8b">default_taskprocessor_listener_pvt::sem</a></div><div class="ttdeci">struct ast_sem sem</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00170">taskprocessor.c:170</a></div></div>
<div class="ttc" id="structast__taskprocessor_html"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a></div><div class="ttdoc">A ast_taskprocessor structure is a singleton by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00069">taskprocessor.c:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a57a0544f529b470405be3c2d1c209bd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57a0544f529b470405be3c2d1c209bd8">&#9670;&nbsp;</a></span>listener_shutdown()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void listener_shutdown </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a> *&#160;</td>
          <td class="paramname"><em>listener</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00915">915</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00112">ast_taskprocessor_listener::callbacks</a>, <a class="el" href="../../d0/d1e/taskprocessor_8h_source.html#l00117">ast_taskprocessor_listener_callbacks::shutdown</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00114">ast_taskprocessor_listener::tps</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01109">ast_taskprocessor_unreference()</a>.</p>
<div class="fragment"><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;{</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;   listener-&gt;<a class="code" href="../../d7/d52/structast__taskprocessor__listener.html#addf12c55d68372c220c81f61e800a6c6">callbacks</a>-&gt;<a class="code" href="../../d0/d01/structast__taskprocessor__listener__callbacks.html#a696765ac242be1048c04afa1a98be3c8">shutdown</a>(listener);</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(listener-&gt;<a class="code" href="../../d7/d52/structast__taskprocessor__listener.html#a4c381cb1b5cf198fa3f260212e716c9a">tps</a>, -1);</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;}</div><div class="ttc" id="structast__taskprocessor__listener_html_addf12c55d68372c220c81f61e800a6c6"><div class="ttname"><a href="../../d7/d52/structast__taskprocessor__listener.html#addf12c55d68372c220c81f61e800a6c6">ast_taskprocessor_listener::callbacks</a></div><div class="ttdeci">const struct ast_taskprocessor_listener_callbacks * callbacks</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00112">taskprocessor.c:112</a></div></div>
<div class="ttc" id="structast__taskprocessor__listener__callbacks_html_a696765ac242be1048c04afa1a98be3c8"><div class="ttname"><a href="../../d0/d01/structast__taskprocessor__listener__callbacks.html#a696765ac242be1048c04afa1a98be3c8">ast_taskprocessor_listener_callbacks::shutdown</a></div><div class="ttdeci">void(* shutdown)(struct ast_taskprocessor_listener *listener)</div><div class="ttdoc">Indicates the taskprocessor wishes to die. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1e/taskprocessor_8h_source.html#l00117">taskprocessor.h:117</a></div></div>
<div class="ttc" id="structast__taskprocessor__listener_html_a4c381cb1b5cf198fa3f260212e716c9a"><div class="ttname"><a href="../../d7/d52/structast__taskprocessor__listener.html#a4c381cb1b5cf198fa3f260212e716c9a">ast_taskprocessor_listener::tps</a></div><div class="ttdeci">struct ast_taskprocessor * tps</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00114">taskprocessor.c:114</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a86eb1ac443df93dbb344351880829b9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86eb1ac443df93dbb344351880829b9e">&#9670;&nbsp;</a></span>subsystem_alert_decrement()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void subsystem_alert_decrement </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>subsystem</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00686">686</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00124">subsystem_alert::alert_count</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00721">AST_VECTOR_GET_INDEX</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00412">AST_VECTOR_REMOVE</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00900">AST_VECTOR_RW_UNLOCK</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00890">AST_VECTOR_RW_WRLOCK</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00627">subsystem_match()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00794">tps_alert_add()</a>.</p>
<div class="fragment"><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;{</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/da5/structsubsystem__alert.html">subsystem_alert</a> *alert;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;   <span class="keywordtype">int</span> idx;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d9/da5/structsubsystem__alert.html#aefc476783822f8e838c9c0cdbeb24b25">subsystem</a>)) {</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;   }</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a468985d2b5ca7410d91108bdd0484348">AST_VECTOR_RW_WRLOCK</a>(&amp;overloaded_subsystems);</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;   idx = <a class="code" href="../../d6/d68/vector_8h.html#a29d0c73e04da3effa371ce52848e4561">AST_VECTOR_GET_INDEX</a>(&amp;overloaded_subsystems, <a class="code" href="../../d9/da5/structsubsystem__alert.html#aefc476783822f8e838c9c0cdbeb24b25">subsystem</a>, <a class="code" href="../../d4/deb/taskprocessor_8c.html#afd693356739cff532d6b8184215ace77">subsystem_match</a>);</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;   <span class="keywordflow">if</span> (idx &lt; 0) {</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>,</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;         <span class="stringliteral">&quot;Can&#39;t decrement alert count for subsystem &#39;%s&#39; as it wasn&#39;t in alert\n&quot;</span>, <a class="code" href="../../d9/da5/structsubsystem__alert.html#aefc476783822f8e838c9c0cdbeb24b25">subsystem</a>);</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#a5ad3dd1d3da5d4ebf6a44d32e42c4c91">AST_VECTOR_RW_UNLOCK</a>(&amp;overloaded_subsystems);</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;   }</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;   alert = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;overloaded_subsystems, idx);</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;   alert-&gt;<a class="code" href="../../d9/da5/structsubsystem__alert.html#a1a3f5878055eb265ef3444bde78f5f84">alert_count</a>--;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;   <span class="keywordflow">if</span> (alert-&gt;<a class="code" href="../../d9/da5/structsubsystem__alert.html#a1a3f5878055eb265ef3444bde78f5f84">alert_count</a> &lt;= 0) {</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#abe6d979239bef1a97d069b1a10c7d35c">AST_VECTOR_REMOVE</a>(&amp;overloaded_subsystems, idx, 0);</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(alert);</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;   }</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a5ad3dd1d3da5d4ebf6a44d32e42c4c91">AST_VECTOR_RW_UNLOCK</a>(&amp;overloaded_subsystems);</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;}</div><div class="ttc" id="vector_8h_html_a29d0c73e04da3effa371ce52848e4561"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a29d0c73e04da3effa371ce52848e4561">AST_VECTOR_GET_INDEX</a></div><div class="ttdeci">#define AST_VECTOR_GET_INDEX(vec, value, cmp)</div><div class="ttdoc">Get the 1st index from a vector that matches the given comparison. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00721">vector.h:721</a></div></div>
<div class="ttc" id="structsubsystem__alert_html"><div class="ttname"><a href="../../d9/da5/structsubsystem__alert.html">subsystem_alert</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00123">taskprocessor.c:123</a></div></div>
<div class="ttc" id="vector_8h_html_a5ad3dd1d3da5d4ebf6a44d32e42c4c91"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a5ad3dd1d3da5d4ebf6a44d32e42c4c91">AST_VECTOR_RW_UNLOCK</a></div><div class="ttdeci">#define AST_VECTOR_RW_UNLOCK(vec)</div><div class="ttdoc">Unlock vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00900">vector.h:900</a></div></div>
<div class="ttc" id="structsubsystem__alert_html_aefc476783822f8e838c9c0cdbeb24b25"><div class="ttname"><a href="../../d9/da5/structsubsystem__alert.html#aefc476783822f8e838c9c0cdbeb24b25">subsystem_alert::subsystem</a></div><div class="ttdeci">char subsystem[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00125">taskprocessor.c:125</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structsubsystem__alert_html_a1a3f5878055eb265ef3444bde78f5f84"><div class="ttname"><a href="../../d9/da5/structsubsystem__alert.html#a1a3f5878055eb265ef3444bde78f5f84">subsystem_alert::alert_count</a></div><div class="ttdeci">unsigned int alert_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00124">taskprocessor.c:124</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="vector_8h_html_a468985d2b5ca7410d91108bdd0484348"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a468985d2b5ca7410d91108bdd0484348">AST_VECTOR_RW_WRLOCK</a></div><div class="ttdeci">#define AST_VECTOR_RW_WRLOCK(vec)</div><div class="ttdoc">Obtain write lock on vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00890">vector.h:890</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_afd693356739cff532d6b8184215ace77"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#afd693356739cff532d6b8184215ace77">subsystem_match</a></div><div class="ttdeci">static int subsystem_match(struct subsystem_alert *alert, const char *subsystem)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00627">taskprocessor.c:627</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="vector_8h_html_abe6d979239bef1a97d069b1a10c7d35c"><div class="ttname"><a href="../../d6/d68/vector_8h.html#abe6d979239bef1a97d069b1a10c7d35c">AST_VECTOR_REMOVE</a></div><div class="ttdeci">#define AST_VECTOR_REMOVE(vec, idx, preserve_ordered)</div><div class="ttdoc">Remove an element from a vector by index. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00412">vector.h:412</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aba5b6a0a46499bc6570527fb9361b212"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba5b6a0a46499bc6570527fb9361b212">&#9670;&nbsp;</a></span>subsystem_alert_increment()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void subsystem_alert_increment </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>subsystem</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00654">654</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00124">subsystem_alert::alert_count</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00256">AST_VECTOR_APPEND</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00721">AST_VECTOR_GET_INDEX</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00900">AST_VECTOR_RW_UNLOCK</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00890">AST_VECTOR_RW_WRLOCK</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00125">subsystem_alert::subsystem</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00627">subsystem_match()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00794">tps_alert_add()</a>.</p>
<div class="fragment"><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;{</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/da5/structsubsystem__alert.html">subsystem_alert</a> *alert;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;   <span class="keywordtype">int</span> idx;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d9/da5/structsubsystem__alert.html#aefc476783822f8e838c9c0cdbeb24b25">subsystem</a>)) {</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;   }</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a468985d2b5ca7410d91108bdd0484348">AST_VECTOR_RW_WRLOCK</a>(&amp;overloaded_subsystems);</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;   idx = <a class="code" href="../../d6/d68/vector_8h.html#a29d0c73e04da3effa371ce52848e4561">AST_VECTOR_GET_INDEX</a>(&amp;overloaded_subsystems, <a class="code" href="../../d9/da5/structsubsystem__alert.html#aefc476783822f8e838c9c0cdbeb24b25">subsystem</a>, <a class="code" href="../../d4/deb/taskprocessor_8c.html#afd693356739cff532d6b8184215ace77">subsystem_match</a>);</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;   <span class="keywordflow">if</span> (idx &gt;= 0) {</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      alert = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;overloaded_subsystems, idx);</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;      alert-&gt;<a class="code" href="../../d9/da5/structsubsystem__alert.html#a1a3f5878055eb265ef3444bde78f5f84">alert_count</a>++;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#a5ad3dd1d3da5d4ebf6a44d32e42c4c91">AST_VECTOR_RW_UNLOCK</a>(&amp;overloaded_subsystems);</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;   }</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;   alert = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(<span class="keyword">sizeof</span>(*alert) + strlen(<a class="code" href="../../d9/da5/structsubsystem__alert.html#aefc476783822f8e838c9c0cdbeb24b25">subsystem</a>) + 1);</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;   <span class="keywordflow">if</span> (!alert) {</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#a5ad3dd1d3da5d4ebf6a44d32e42c4c91">AST_VECTOR_RW_UNLOCK</a>(&amp;overloaded_subsystems);</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;   }</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;   alert-&gt;<a class="code" href="../../d9/da5/structsubsystem__alert.html#a1a3f5878055eb265ef3444bde78f5f84">alert_count</a> = 1;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;   strcpy(alert-&gt;<a class="code" href="../../d9/da5/structsubsystem__alert.html#aefc476783822f8e838c9c0cdbeb24b25">subsystem</a>, <a class="code" href="../../d9/da5/structsubsystem__alert.html#aefc476783822f8e838c9c0cdbeb24b25">subsystem</a>); <span class="comment">/* Safe */</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a>(&amp;overloaded_subsystems, alert)) {</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(alert);</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;   }</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a5ad3dd1d3da5d4ebf6a44d32e42c4c91">AST_VECTOR_RW_UNLOCK</a>(&amp;overloaded_subsystems);</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;}</div><div class="ttc" id="vector_8h_html_a29d0c73e04da3effa371ce52848e4561"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a29d0c73e04da3effa371ce52848e4561">AST_VECTOR_GET_INDEX</a></div><div class="ttdeci">#define AST_VECTOR_GET_INDEX(vec, value, cmp)</div><div class="ttdoc">Get the 1st index from a vector that matches the given comparison. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00721">vector.h:721</a></div></div>
<div class="ttc" id="structsubsystem__alert_html"><div class="ttname"><a href="../../d9/da5/structsubsystem__alert.html">subsystem_alert</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00123">taskprocessor.c:123</a></div></div>
<div class="ttc" id="vector_8h_html_a5ad3dd1d3da5d4ebf6a44d32e42c4c91"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a5ad3dd1d3da5d4ebf6a44d32e42c4c91">AST_VECTOR_RW_UNLOCK</a></div><div class="ttdeci">#define AST_VECTOR_RW_UNLOCK(vec)</div><div class="ttdoc">Unlock vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00900">vector.h:900</a></div></div>
<div class="ttc" id="structsubsystem__alert_html_aefc476783822f8e838c9c0cdbeb24b25"><div class="ttname"><a href="../../d9/da5/structsubsystem__alert.html#aefc476783822f8e838c9c0cdbeb24b25">subsystem_alert::subsystem</a></div><div class="ttdeci">char subsystem[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00125">taskprocessor.c:125</a></div></div>
<div class="ttc" id="vector_8h_html_ae9d6199727f88a8c2407cb0e004e634a"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a></div><div class="ttdeci">#define AST_VECTOR_APPEND(vec, elem)</div><div class="ttdoc">Append an element to a vector, growing the vector if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00256">vector.h:256</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structsubsystem__alert_html_a1a3f5878055eb265ef3444bde78f5f84"><div class="ttname"><a href="../../d9/da5/structsubsystem__alert.html#a1a3f5878055eb265ef3444bde78f5f84">subsystem_alert::alert_count</a></div><div class="ttdeci">unsigned int alert_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00124">taskprocessor.c:124</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="vector_8h_html_a468985d2b5ca7410d91108bdd0484348"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a468985d2b5ca7410d91108bdd0484348">AST_VECTOR_RW_WRLOCK</a></div><div class="ttdeci">#define AST_VECTOR_RW_WRLOCK(vec)</div><div class="ttdoc">Obtain write lock on vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00890">vector.h:890</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_afd693356739cff532d6b8184215ace77"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#afd693356739cff532d6b8184215ace77">subsystem_match</a></div><div class="ttdeci">static int subsystem_match(struct subsystem_alert *alert, const char *subsystem)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00627">taskprocessor.c:627</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af7d37da42e257b24c6792515bf929f98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7d37da42e257b24c6792515bf929f98">&#9670;&nbsp;</a></span>subsystem_cmp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int subsystem_cmp </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/da5/structsubsystem__alert.html">subsystem_alert</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/da5/structsubsystem__alert.html">subsystem_alert</a> *&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00632">632</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00125">subsystem_alert::subsystem</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00714">subsystem_copy()</a>.</p>
<div class="fragment"><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;{</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;   <span class="keywordflow">return</span> strcmp(a-&gt;<a class="code" href="../../d9/da5/structsubsystem__alert.html#aefc476783822f8e838c9c0cdbeb24b25">subsystem</a>, b-&gt;<a class="code" href="../../d9/da5/structsubsystem__alert.html#aefc476783822f8e838c9c0cdbeb24b25">subsystem</a>);</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;}</div><div class="ttc" id="structsubsystem__alert_html_aefc476783822f8e838c9c0cdbeb24b25"><div class="ttname"><a href="../../d9/da5/structsubsystem__alert.html#aefc476783822f8e838c9c0cdbeb24b25">subsystem_alert::subsystem</a></div><div class="ttdeci">char subsystem[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00125">taskprocessor.c:125</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a65e4a8f7f8e6b84cdf6731b4cd62585f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65e4a8f7f8e6b84cdf6731b4cd62585f">&#9670;&nbsp;</a></span>subsystem_copy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void subsystem_copy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/da5/structsubsystem__alert.html">subsystem_alert</a> *&#160;</td>
          <td class="paramname"><em>alert</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct subsystem_alert_vector *&#160;</td>
          <td class="paramname"><em>vector</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00714">714</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00124">subsystem_alert::alert_count</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00371">AST_VECTOR_ADD_SORTED</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00125">subsystem_alert::subsystem</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00632">subsystem_cmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00729">cli_subsystem_alert_report()</a>.</p>
<div class="fragment"><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;{</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/da5/structsubsystem__alert.html">subsystem_alert</a> *alert_copy;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;   alert_copy = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(<span class="keyword">sizeof</span>(*alert_copy) + strlen(alert-&gt;<a class="code" href="../../d9/da5/structsubsystem__alert.html#aefc476783822f8e838c9c0cdbeb24b25">subsystem</a>) + 1);</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;   <span class="keywordflow">if</span> (!alert_copy) {</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;   }</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;   alert_copy-&gt;<a class="code" href="../../d9/da5/structsubsystem__alert.html#a1a3f5878055eb265ef3444bde78f5f84">alert_count</a> = alert-&gt;<a class="code" href="../../d9/da5/structsubsystem__alert.html#a1a3f5878055eb265ef3444bde78f5f84">alert_count</a>;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;   strcpy(alert_copy-&gt;<a class="code" href="../../d9/da5/structsubsystem__alert.html#aefc476783822f8e838c9c0cdbeb24b25">subsystem</a>, alert-&gt;<a class="code" href="../../d9/da5/structsubsystem__alert.html#aefc476783822f8e838c9c0cdbeb24b25">subsystem</a>); <span class="comment">/* Safe */</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#a8418853c95c2093a85174233f0ef4827">AST_VECTOR_ADD_SORTED</a>(vector, alert_copy, <a class="code" href="../../d4/deb/taskprocessor_8c.html#af7d37da42e257b24c6792515bf929f98">subsystem_cmp</a>)) {</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(alert_copy);</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;   }</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;}</div><div class="ttc" id="vector_8h_html_a8418853c95c2093a85174233f0ef4827"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a8418853c95c2093a85174233f0ef4827">AST_VECTOR_ADD_SORTED</a></div><div class="ttdeci">#define AST_VECTOR_ADD_SORTED(vec, elem, cmp)</div><div class="ttdoc">Add an element into a sorted vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00371">vector.h:371</a></div></div>
<div class="ttc" id="structsubsystem__alert_html"><div class="ttname"><a href="../../d9/da5/structsubsystem__alert.html">subsystem_alert</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00123">taskprocessor.c:123</a></div></div>
<div class="ttc" id="structsubsystem__alert_html_aefc476783822f8e838c9c0cdbeb24b25"><div class="ttname"><a href="../../d9/da5/structsubsystem__alert.html#aefc476783822f8e838c9c0cdbeb24b25">subsystem_alert::subsystem</a></div><div class="ttdeci">char subsystem[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00125">taskprocessor.c:125</a></div></div>
<div class="ttc" id="structsubsystem__alert_html_a1a3f5878055eb265ef3444bde78f5f84"><div class="ttname"><a href="../../d9/da5/structsubsystem__alert.html#a1a3f5878055eb265ef3444bde78f5f84">subsystem_alert::alert_count</a></div><div class="ttdeci">unsigned int alert_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00124">taskprocessor.c:124</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_af7d37da42e257b24c6792515bf929f98"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#af7d37da42e257b24c6792515bf929f98">subsystem_cmp</a></div><div class="ttdeci">static int subsystem_cmp(struct subsystem_alert *a, struct subsystem_alert *b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00632">taskprocessor.c:632</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afd693356739cff532d6b8184215ace77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd693356739cff532d6b8184215ace77">&#9670;&nbsp;</a></span>subsystem_match()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int subsystem_match </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/da5/structsubsystem__alert.html">subsystem_alert</a> *&#160;</td>
          <td class="paramname"><em>alert</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>subsystem</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00627">627</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00125">subsystem_alert::subsystem</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00637">ast_taskprocessor_get_subsystem_alert()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00686">subsystem_alert_decrement()</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00654">subsystem_alert_increment()</a>.</p>
<div class="fragment"><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;{</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;   <span class="keywordflow">return</span> !strcmp(alert-&gt;<a class="code" href="../../d9/da5/structsubsystem__alert.html#aefc476783822f8e838c9c0cdbeb24b25">subsystem</a>, <a class="code" href="../../d9/da5/structsubsystem__alert.html#aefc476783822f8e838c9c0cdbeb24b25">subsystem</a>);</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;}</div><div class="ttc" id="structsubsystem__alert_html_aefc476783822f8e838c9c0cdbeb24b25"><div class="ttname"><a href="../../d9/da5/structsubsystem__alert.html#aefc476783822f8e838c9c0cdbeb24b25">subsystem_alert::subsystem</a></div><div class="ttdeci">char subsystem[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00125">taskprocessor.c:125</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adae19da477b734d7470b3013a761fb9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adae19da477b734d7470b3013a761fb9c">&#9670;&nbsp;</a></span>taskprocessor_listener_dtor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void taskprocessor_listener_dtor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00921">921</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00112">ast_taskprocessor_listener::callbacks</a>, <a class="el" href="../../d0/d1e/taskprocessor_8h_source.html#l00118">ast_taskprocessor_listener_callbacks::dtor</a>, and <a class="el" href="../../d5/d03/asterisk_8c_source.html#l01476">listener()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00930">ast_taskprocessor_listener_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;{</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a> *<a class="code" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a> = obj;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;   <span class="keywordflow">if</span> (listener-&gt;<a class="code" href="../../d7/d52/structast__taskprocessor__listener.html#addf12c55d68372c220c81f61e800a6c6">callbacks</a>-&gt;<a class="code" href="../../d0/d01/structast__taskprocessor__listener__callbacks.html#ad766c711354f5d6e68b8b379a4bb55e5">dtor</a>) {</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      listener-&gt;<a class="code" href="../../d7/d52/structast__taskprocessor__listener.html#addf12c55d68372c220c81f61e800a6c6">callbacks</a>-&gt;<a class="code" href="../../d0/d01/structast__taskprocessor__listener__callbacks.html#ad766c711354f5d6e68b8b379a4bb55e5">dtor</a>(listener);</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;   }</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;}</div><div class="ttc" id="structast__taskprocessor__listener_html"><div class="ttname"><a href="../../d7/d52/structast__taskprocessor__listener.html">ast_taskprocessor_listener</a></div><div class="ttdoc">A listener for taskprocessors. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00110">taskprocessor.c:110</a></div></div>
<div class="ttc" id="structast__taskprocessor__listener_html_addf12c55d68372c220c81f61e800a6c6"><div class="ttname"><a href="../../d7/d52/structast__taskprocessor__listener.html#addf12c55d68372c220c81f61e800a6c6">ast_taskprocessor_listener::callbacks</a></div><div class="ttdeci">const struct ast_taskprocessor_listener_callbacks * callbacks</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00112">taskprocessor.c:112</a></div></div>
<div class="ttc" id="structast__taskprocessor__listener__callbacks_html_ad766c711354f5d6e68b8b379a4bb55e5"><div class="ttname"><a href="../../d0/d01/structast__taskprocessor__listener__callbacks.html#ad766c711354f5d6e68b8b379a4bb55e5">ast_taskprocessor_listener_callbacks::dtor</a></div><div class="ttdeci">void(* dtor)(struct ast_taskprocessor_listener *listener)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1e/taskprocessor_8h_source.html#l00118">taskprocessor.h:118</a></div></div>
<div class="ttc" id="asterisk_8c_html_adc01bca6281492dfec5ae217cf32fc34"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a></div><div class="ttdeci">static void * listener(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01476">asterisk.c:1476</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a458f3e603669bc087d571e28c6b23424"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a458f3e603669bc087d571e28c6b23424">&#9670;&nbsp;</a></span>taskprocessor_push()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int taskprocessor_push </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *&#160;</td>
          <td class="paramname"><em>tps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/d60/structtps__task.html">tps_task</a> *&#160;</td>
          <td class="paramname"><em>t</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01139">1139</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00730">AST_LIST_INSERT_TAIL</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00112">ast_taskprocessor_listener::callbacks</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00085">ast_taskprocessor::executing</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00089">ast_taskprocessor::high_water_alert</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00087">ast_taskprocessor::high_water_warned</a>, <a class="el" href="../../d3/d60/structtps__task.html#a28855b80c0289541fb3643ae24c01085">tps_task::list</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00081">ast_taskprocessor::listener</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00097">ast_taskprocessor::name</a>, <a class="el" href="../../d0/d1e/taskprocessor_8h_source.html#l00098">ast_taskprocessor_listener_callbacks::task_pushed</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00794">tps_alert_add()</a>, <a class="el" href="../../db/d17/structast__taskprocessor.html#a0d22cef450efe10d63951ee1fcc39599">ast_taskprocessor::tps_queue</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00078">ast_taskprocessor::tps_queue_high</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00074">ast_taskprocessor::tps_queue_size</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01175">ast_taskprocessor_push()</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01180">ast_taskprocessor_push_local()</a>.</p>
<div class="fragment"><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;{</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;   <span class="keywordtype">int</span> previous_size;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;   <span class="keywordtype">int</span> was_empty;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;   <span class="keywordflow">if</span> (!tps) {</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;tps is NULL!\n&quot;</span>);</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;   }</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;   <span class="keywordflow">if</span> (!t) {</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;t is NULL!\n&quot;</span>);</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;   }</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(tps);</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a0d22cef450efe10d63951ee1fcc39599">tps_queue</a>, t, list);</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;   previous_size = tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#afe2dfc83eb5b460f39e9e5513023e74e">tps_queue_size</a>++;</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;   <span class="keywordflow">if</span> (tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a7421fed4da8332ef256efdfdb61bb563">tps_queue_high</a> &lt;= tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#afe2dfc83eb5b460f39e9e5513023e74e">tps_queue_size</a>) {</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;      <span class="keywordflow">if</span> (!tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a80e170193fe4d362e68c72e8deff70b4">high_water_alert</a>) {</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;The &#39;%s&#39; task processor queue reached %ld scheduled tasks%s.\n&quot;</span>,</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;            tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>, tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#afe2dfc83eb5b460f39e9e5513023e74e">tps_queue_size</a>, tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#aae7b80568083a3c69f0b830d5b0fa561">high_water_warned</a> ? <span class="stringliteral">&quot; again&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;         tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#aae7b80568083a3c69f0b830d5b0fa561">high_water_warned</a> = 1;</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;         tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a80e170193fe4d362e68c72e8deff70b4">high_water_alert</a> = 1;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;         <a class="code" href="../../d4/deb/taskprocessor_8c.html#addc1eaecfa48679c5b0c4efb5bd45534">tps_alert_add</a>(tps, +1);</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;      }</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;   }</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;   <span class="comment">/* The currently executing task counts as still in queue */</span></div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;   was_empty = tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a2d2a856d77bc4c98d58bfa0266bbddd8">executing</a> ? 0 : previous_size == 0;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(tps);</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;   tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a9dbaf508f8a891a7dfca0827ba489abc">listener</a>-&gt;<a class="code" href="../../d7/d52/structast__taskprocessor__listener.html#addf12c55d68372c220c81f61e800a6c6">callbacks</a>-&gt;<a class="code" href="../../d0/d01/structast__taskprocessor__listener__callbacks.html#a2a95f19d6a44ef02be267fc2f2cd37e0">task_pushed</a>(tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a9dbaf508f8a891a7dfca0827ba489abc">listener</a>, was_empty);</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;}</div><div class="ttc" id="structast__taskprocessor__listener_html_addf12c55d68372c220c81f61e800a6c6"><div class="ttname"><a href="../../d7/d52/structast__taskprocessor__listener.html#addf12c55d68372c220c81f61e800a6c6">ast_taskprocessor_listener::callbacks</a></div><div class="ttdeci">const struct ast_taskprocessor_listener_callbacks * callbacks</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00112">taskprocessor.c:112</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_afd3f693e384b1ee0a0c44d58351eb87d"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#afd3f693e384b1ee0a0c44d58351eb87d">ast_taskprocessor::name</a></div><div class="ttdeci">char name[0]</div><div class="ttdoc">Friendly name of the taskprocessor. Subsystem is appended after the name&amp;#39;s NULL terminator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00097">taskprocessor.c:97</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_a80e170193fe4d362e68c72e8deff70b4"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#a80e170193fe4d362e68c72e8deff70b4">ast_taskprocessor::high_water_alert</a></div><div class="ttdeci">unsigned int high_water_alert</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00089">taskprocessor.c:89</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_a9dbaf508f8a891a7dfca0827ba489abc"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#a9dbaf508f8a891a7dfca0827ba489abc">ast_taskprocessor::listener</a></div><div class="ttdeci">struct ast_taskprocessor_listener * listener</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00081">taskprocessor.c:81</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_aae7b80568083a3c69f0b830d5b0fa561"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#aae7b80568083a3c69f0b830d5b0fa561">ast_taskprocessor::high_water_warned</a></div><div class="ttdeci">unsigned int high_water_warned</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00087">taskprocessor.c:87</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_a7421fed4da8332ef256efdfdb61bb563"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#a7421fed4da8332ef256efdfdb61bb563">ast_taskprocessor::tps_queue_high</a></div><div class="ttdeci">long tps_queue_high</div><div class="ttdoc">Taskprocessor high water alert trigger level. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00078">taskprocessor.c:78</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_addc1eaecfa48679c5b0c4efb5bd45534"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#addc1eaecfa48679c5b0c4efb5bd45534">tps_alert_add</a></div><div class="ttdeci">static void tps_alert_add(struct ast_taskprocessor *tps, int delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00794">taskprocessor.c:794</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_a2d2a856d77bc4c98d58bfa0266bbddd8"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#a2d2a856d77bc4c98d58bfa0266bbddd8">ast_taskprocessor::executing</a></div><div class="ttdeci">unsigned int executing</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00085">taskprocessor.c:85</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4d258b4525e63c435d7de579d3f46960"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_LIST_INSERT_TAIL(head, elm, field)</div><div class="ttdoc">Appends a list entry to the tail of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00730">linkedlists.h:730</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_a0d22cef450efe10d63951ee1fcc39599"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#a0d22cef450efe10d63951ee1fcc39599">ast_taskprocessor::tps_queue</a></div><div class="ttdeci">struct ast_taskprocessor::tps_queue tps_queue</div></div>
<div class="ttc" id="structast__taskprocessor_html_afe2dfc83eb5b460f39e9e5513023e74e"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#afe2dfc83eb5b460f39e9e5513023e74e">ast_taskprocessor::tps_queue_size</a></div><div class="ttdeci">long tps_queue_size</div><div class="ttdoc">Taskprocessor current queue size. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00074">taskprocessor.c:74</a></div></div>
<div class="ttc" id="structast__taskprocessor__listener__callbacks_html_a2a95f19d6a44ef02be267fc2f2cd37e0"><div class="ttname"><a href="../../d0/d01/structast__taskprocessor__listener__callbacks.html#a2a95f19d6a44ef02be267fc2f2cd37e0">ast_taskprocessor_listener_callbacks::task_pushed</a></div><div class="ttdeci">void(* task_pushed)(struct ast_taskprocessor_listener *listener, int was_empty)</div><div class="ttdoc">Indicates a task was pushed to the processor. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1e/taskprocessor_8h_source.html#l00098">taskprocessor.h:98</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="addc1eaecfa48679c5b0c4efb5bd45534"></a>
<h2 class="memtitle"><span class="permalink"><a href="#addc1eaecfa48679c5b0c4efb5bd45534">&#9670;&nbsp;</a></span>tps_alert_add()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tps_alert_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *&#160;</td>
          <td class="paramname"><em>tps</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>delta</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00794">794</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00232">ast_rwlock_unlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00234">ast_rwlock_wrlock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00441">DEBUG_ATLEAST</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00241">LOG_DEBUG</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00097">ast_taskprocessor::name</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00093">ast_taskprocessor::subsystem</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00686">subsystem_alert_decrement()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00654">subsystem_alert_increment()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00779">tps_alert_count</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00782">tps_alert_lock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00830">ast_taskprocessor_alert_set_levels()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01139">taskprocessor_push()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00866">tps_taskprocessor_dtor()</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00886">tps_taskprocessor_pop()</a>.</p>
<div class="fragment"><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;{</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> old;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a>(&amp;<a class="code" href="../../d4/deb/taskprocessor_8c.html#afeeef0590292628c276ac75209f531c3">tps_alert_lock</a>);</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;   old = <a class="code" href="../../d4/deb/taskprocessor_8c.html#a4757bee5df8834ec0044fb999170a712">tps_alert_count</a>;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;   <a class="code" href="../../d4/deb/taskprocessor_8c.html#a4757bee5df8834ec0044fb999170a712">tps_alert_count</a> += delta;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/d8c/logger_8h.html#a33f6031de4ab6d1406465a7a3ee18e86">DEBUG_ATLEAST</a>(3)</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;      <span class="comment">/* and tps_alert_count becomes zero or non-zero */</span></div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      &amp;&amp; !old != !<a class="code" href="../../d4/deb/taskprocessor_8c.html#a4757bee5df8834ec0044fb999170a712">tps_alert_count</a>) {</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>, <span class="stringliteral">&quot;Taskprocessor &#39;%s&#39; %s the high water alert.\n&quot;</span>,</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;         tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>, <a class="code" href="../../d4/deb/taskprocessor_8c.html#a4757bee5df8834ec0044fb999170a712">tps_alert_count</a> ? <span class="stringliteral">&quot;triggered&quot;</span> : <span class="stringliteral">&quot;cleared&quot;</span>);</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;   }</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;   <span class="keywordflow">if</span> (tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#ae6d317216d283a76a7b07a63a181c9ad">subsystem</a>[0] != <span class="charliteral">&#39;\0&#39;</span>) {</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      <span class="keywordflow">if</span> (delta &gt; 0) {</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;         <a class="code" href="../../d4/deb/taskprocessor_8c.html#aba5b6a0a46499bc6570527fb9361b212">subsystem_alert_increment</a>(tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#ae6d317216d283a76a7b07a63a181c9ad">subsystem</a>);</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;         <a class="code" href="../../d4/deb/taskprocessor_8c.html#a86eb1ac443df93dbb344351880829b9e">subsystem_alert_decrement</a>(tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#ae6d317216d283a76a7b07a63a181c9ad">subsystem</a>);</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;      }</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;   }</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../d4/deb/taskprocessor_8c.html#afeeef0590292628c276ac75209f531c3">tps_alert_lock</a>);</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;}</div><div class="ttc" id="structast__taskprocessor_html_afd3f693e384b1ee0a0c44d58351eb87d"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#afd3f693e384b1ee0a0c44d58351eb87d">ast_taskprocessor::name</a></div><div class="ttdeci">char name[0]</div><div class="ttdoc">Friendly name of the taskprocessor. Subsystem is appended after the name&amp;#39;s NULL terminator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00097">taskprocessor.c:97</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_aba5b6a0a46499bc6570527fb9361b212"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#aba5b6a0a46499bc6570527fb9361b212">subsystem_alert_increment</a></div><div class="ttdeci">static void subsystem_alert_increment(const char *subsystem)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00654">taskprocessor.c:654</a></div></div>
<div class="ttc" id="logger_8h_html_a6ff63e8955665c4a58b1598f2b07c51a"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a></div><div class="ttdeci">#define LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00241">logger.h:241</a></div></div>
<div class="ttc" id="lock_8h_html_ac2920a1db37313ec46bd91dc83bf9c8a"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a></div><div class="ttdeci">#define ast_rwlock_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00232">lock.h:232</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_afeeef0590292628c276ac75209f531c3"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#afeeef0590292628c276ac75209f531c3">tps_alert_lock</a></div><div class="ttdeci">static ast_rwlock_t tps_alert_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00782">taskprocessor.c:782</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_ae6d317216d283a76a7b07a63a181c9ad"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#ae6d317216d283a76a7b07a63a181c9ad">ast_taskprocessor::subsystem</a></div><div class="ttdeci">char * subsystem</div><div class="ttdoc">Anything before the first &amp;#39;/&amp;#39; in the name (if there is one) </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00093">taskprocessor.c:93</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_a86eb1ac443df93dbb344351880829b9e"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a86eb1ac443df93dbb344351880829b9e">subsystem_alert_decrement</a></div><div class="ttdeci">static void subsystem_alert_decrement(const char *subsystem)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00686">taskprocessor.c:686</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_a4757bee5df8834ec0044fb999170a712"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a4757bee5df8834ec0044fb999170a712">tps_alert_count</a></div><div class="ttdeci">static unsigned int tps_alert_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00779">taskprocessor.c:779</a></div></div>
<div class="ttc" id="lock_8h_html_a045bd81ceab2de81e42af338ad7cf121"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a></div><div class="ttdeci">#define ast_rwlock_wrlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00234">lock.h:234</a></div></div>
<div class="ttc" id="logger_8h_html_a33f6031de4ab6d1406465a7a3ee18e86"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a33f6031de4ab6d1406465a7a3ee18e86">DEBUG_ATLEAST</a></div><div class="ttdeci">#define DEBUG_ATLEAST(level)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00441">logger.h:441</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad12172ebca405a9600704348ac059ec2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad12172ebca405a9600704348ac059ec2">&#9670;&nbsp;</a></span>tps_cmp_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tps_cmp_cb </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The <a class="el" href="../../d3/dfb/structastobj2.html">astobj2</a> compare callback for taskprocessors. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00619">619</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01031">CMP_MATCH</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01032">CMP_STOP</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00097">ast_taskprocessor::name</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01155">OBJ_KEY</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00301">ast_tps_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;{</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *lhs = obj, *rhs = arg;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *rhsname = flags &amp; <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a> ? arg : rhs-&gt;name;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;   <span class="keywordflow">return</span> !strcasecmp(lhs-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>, rhsname) ? <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df">CMP_STOP</a> : 0;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;}</div><div class="ttc" id="structast__taskprocessor_html_afd3f693e384b1ee0a0c44d58351eb87d"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#afd3f693e384b1ee0a0c44d58351eb87d">ast_taskprocessor::name</a></div><div class="ttdeci">char name[0]</div><div class="ttdoc">Friendly name of the taskprocessor. Subsystem is appended after the name&amp;#39;s NULL terminator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00097">taskprocessor.c:97</a></div></div>
<div class="ttc" id="astobj2_8h_html_a22f40c733a085f259af94e864ebaa09a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a></div><div class="ttdeci">#define OBJ_KEY</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01155">astobj2.h:1155</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df">CMP_STOP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01032">astobj2.h:1032</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01031">astobj2.h:1031</a></div></div>
<div class="ttc" id="structast__taskprocessor_html"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a></div><div class="ttdoc">A ast_taskprocessor structure is a singleton by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00069">taskprocessor.c:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae4e09c51f3627ca1091628718067ed7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4e09c51f3627ca1091628718067ed7c">&#9670;&nbsp;</a></span>tps_hash_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tps_hash_cb </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The <a class="el" href="../../d3/dfb/structastobj2.html">astobj2</a> hash callback for taskprocessors. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00610">610</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l01250">ast_str_case_hash()</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00097">ast_taskprocessor::name</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01155">OBJ_KEY</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00301">ast_tps_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;{</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *tps = obj;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> = flags &amp; <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a> ? obj : tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#ab08f8db2a7258e538a0da7417f58db58">ast_str_case_hash</a>(name);</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;}</div><div class="ttc" id="structast__taskprocessor_html_afd3f693e384b1ee0a0c44d58351eb87d"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#afd3f693e384b1ee0a0c44d58351eb87d">ast_taskprocessor::name</a></div><div class="ttdeci">char name[0]</div><div class="ttdoc">Friendly name of the taskprocessor. Subsystem is appended after the name&amp;#39;s NULL terminator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00097">taskprocessor.c:97</a></div></div>
<div class="ttc" id="astobj2_8h_html_a22f40c733a085f259af94e864ebaa09a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a></div><div class="ttdeci">#define OBJ_KEY</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01155">astobj2.h:1155</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="structast__taskprocessor_html"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a></div><div class="ttdoc">A ast_taskprocessor structure is a singleton by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00069">taskprocessor.c:69</a></div></div>
<div class="ttc" id="strings_8h_html_ab08f8db2a7258e538a0da7417f58db58"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ab08f8db2a7258e538a0da7417f58db58">ast_str_case_hash</a></div><div class="ttdeci">static force_inline int attribute_pure ast_str_case_hash(const char *str)</div><div class="ttdoc">Compute a hash value on a case-insensitive string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01250">strings.h:1250</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a445163d192c7b9fe8eca67679c19472c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a445163d192c7b9fe8eca67679c19472c">&#9670;&nbsp;</a></span>tps_ping_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tps_ping_handler </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>datap</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>CLI taskprocessor ping &lt;blah&gt;handler function. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00402">402</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, and <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00411">cli_tps_ping()</a>.</p>
<div class="fragment"><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;{</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;cli_ping_cond_lock);</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;cli_ping_cond);</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;cli_ping_cond_lock);</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;}</div><div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7d97246b005106981887b28595a2663d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d97246b005106981887b28595a2663d">&#9670;&nbsp;</a></span>tps_report_taskprocessor_list()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tps_report_taskprocessor_list </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>like</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00539">539</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00369">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01358">ao2_container_alloc_rbtree</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00673">ao2_container_dup()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01883">AO2_ITERATOR_UNLINK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01109">ast_taskprocessor_unreference()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00097">ast_taskprocessor::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00521">tps_report_taskprocessor_list_helper()</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00488">tps_sort_cb()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00576">cli_tps_report()</a>.</p>
<div class="fragment"><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;{</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;   <span class="keywordtype">int</span> tps_count = 0;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;   <span class="keywordtype">int</span> word_len;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *sorted_tps;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *tps;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> iter;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;   sorted_tps = <a class="code" href="../../d5/da5/astobj2_8h.html#a9657c4f40f012fc1d426c3c94b3d32c0">ao2_container_alloc_rbtree</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, 0, <a class="code" href="../../d4/deb/taskprocessor_8c.html#a1eed27e1b0af1736961f29abb083c994">tps_sort_cb</a>,</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;   <span class="keywordflow">if</span> (!sorted_tps</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      || <a class="code" href="../../d5/da5/astobj2_8h.html#a04bf2beaf5811f6b95768e42fb95d9a5">ao2_container_dup</a>(sorted_tps, tps_singletons, 0)) {</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Failed to retrieve sorted taskprocessors\n&quot;</span>);</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(sorted_tps);</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;   }</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;   word_len = strlen(like);</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;   iter = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(sorted_tps, <a class="code" href="../../d5/da5/astobj2_8h.html#a7b5de2aa80f528d3dc554caadb8dc6aba3a8f36e68b2b6873804d167724e1891c">AO2_ITERATOR_UNLINK</a>);</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;   <span class="keywordflow">while</span> ((tps = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;iter))) {</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      <span class="keywordflow">if</span> (like) {</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;         <span class="keywordflow">if</span> (!strncasecmp(like, tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>, word_len)) {</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            <a class="code" href="../../d4/deb/taskprocessor_8c.html#a552f2108b43f928be7529e15ff426fe1">tps_report_taskprocessor_list_helper</a>(fd, tps);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;            tps_count++;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;         }</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;         <a class="code" href="../../d4/deb/taskprocessor_8c.html#a552f2108b43f928be7529e15ff426fe1">tps_report_taskprocessor_list_helper</a>(fd, tps);</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;         tps_count++;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      }</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      <a class="code" href="../../d4/deb/taskprocessor_8c.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a>(tps);</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;   }</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;iter);</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(sorted_tps, -1);</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;   <span class="keywordflow">return</span> tps_count;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;}</div><div class="ttc" id="structast__taskprocessor_html_afd3f693e384b1ee0a0c44d58351eb87d"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#afd3f693e384b1ee0a0c44d58351eb87d">ast_taskprocessor::name</a></div><div class="ttdeci">char name[0]</div><div class="ttdoc">Friendly name of the taskprocessor. Subsystem is appended after the name&amp;#39;s NULL terminator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00097">taskprocessor.c:97</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_a32492eb2480cb8c46ad669622cff8556"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a></div><div class="ttdeci">void * ast_taskprocessor_unreference(struct ast_taskprocessor *tps)</div><div class="ttdoc">Unreference the specified taskprocessor and its reference count will decrement. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01109">taskprocessor.c:1109</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_a04bf2beaf5811f6b95768e42fb95d9a5"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a04bf2beaf5811f6b95768e42fb95d9a5">ao2_container_dup</a></div><div class="ttdeci">int ao2_container_dup(struct ao2_container *dest, struct ao2_container *src, enum search_flags flags)</div><div class="ttdoc">Copy all object references in the src container into the dest container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00673">astobj2_container.c:673</a></div></div>
<div class="ttc" id="astobj2_8h_html_a7b5de2aa80f528d3dc554caadb8dc6aba3a8f36e68b2b6873804d167724e1891c"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a7b5de2aa80f528d3dc554caadb8dc6aba3a8f36e68b2b6873804d167724e1891c">AO2_ITERATOR_UNLINK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01883">astobj2.h:1883</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_a552f2108b43f928be7529e15ff426fe1"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a552f2108b43f928be7529e15ff426fe1">tps_report_taskprocessor_list_helper</a></div><div class="ttdeci">static void tps_report_taskprocessor_list_helper(int fd, struct ast_taskprocessor *tps)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00521">taskprocessor.c:521</a></div></div>
<div class="ttc" id="structast__taskprocessor_html"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a></div><div class="ttdoc">A ast_taskprocessor structure is a singleton by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00069">taskprocessor.c:69</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_a1eed27e1b0af1736961f29abb083c994"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a1eed27e1b0af1736961f29abb083c994">tps_sort_cb</a></div><div class="ttdeci">static int tps_sort_cb(const void *obj_left, const void *obj_right, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00488">taskprocessor.c:488</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9657c4f40f012fc1d426c3c94b3d32c0"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9657c4f40f012fc1d426c3c94b3d32c0">ao2_container_alloc_rbtree</a></div><div class="ttdeci">#define ao2_container_alloc_rbtree(ao2_options, container_options, sort_fn, cmp_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01358">astobj2.h:1358</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a552f2108b43f928be7529e15ff426fe1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a552f2108b43f928be7529e15ff426fe1">&#9670;&nbsp;</a></span>tps_report_taskprocessor_list_helper()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tps_report_taskprocessor_list_helper </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *&#160;</td>
          <td class="paramname"><em>tps</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00521">521</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00065">tps_taskprocessor_stats::_tasks_processed_count</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00511">FMT_FIELDS</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00063">tps_taskprocessor_stats::max_qsize</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00097">ast_taskprocessor::name</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00071">ast_taskprocessor::stats</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00078">ast_taskprocessor::tps_queue_high</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00076">ast_taskprocessor::tps_queue_low</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00074">ast_taskprocessor::tps_queue_size</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00539">tps_report_taskprocessor_list()</a>.</p>
<div class="fragment"><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;{</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(fd, <a class="code" href="../../d4/deb/taskprocessor_8c.html#a28e4a2cd5d9cefd5714c0a3ce2a35499">FMT_FIELDS</a>, tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>, tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#ad921b32ca4f51740507d2d8957116c61">stats</a>.<a class="code" href="../../db/d1c/structtps__taskprocessor__stats.html#acbba7f4a1f962091e9596c4eac481186">_tasks_processed_count</a>,</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#afe2dfc83eb5b460f39e9e5513023e74e">tps_queue_size</a>, tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#ad921b32ca4f51740507d2d8957116c61">stats</a>.<a class="code" href="../../db/d1c/structtps__taskprocessor__stats.html#a94e5638db41adecd198cf929e2990440">max_qsize</a>, tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a281a55644ba8295d14b5ad5c5935b6cc">tps_queue_low</a>,</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a7421fed4da8332ef256efdfdb61bb563">tps_queue_high</a>);</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;}</div><div class="ttc" id="structast__taskprocessor_html_afd3f693e384b1ee0a0c44d58351eb87d"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#afd3f693e384b1ee0a0c44d58351eb87d">ast_taskprocessor::name</a></div><div class="ttdeci">char name[0]</div><div class="ttdoc">Friendly name of the taskprocessor. Subsystem is appended after the name&amp;#39;s NULL terminator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00097">taskprocessor.c:97</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_a7421fed4da8332ef256efdfdb61bb563"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#a7421fed4da8332ef256efdfdb61bb563">ast_taskprocessor::tps_queue_high</a></div><div class="ttdeci">long tps_queue_high</div><div class="ttdoc">Taskprocessor high water alert trigger level. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00078">taskprocessor.c:78</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_a281a55644ba8295d14b5ad5c5935b6cc"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#a281a55644ba8295d14b5ad5c5935b6cc">ast_taskprocessor::tps_queue_low</a></div><div class="ttdeci">long tps_queue_low</div><div class="ttdoc">Taskprocessor low water clear alert level. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00076">taskprocessor.c:76</a></div></div>
<div class="ttc" id="structtps__taskprocessor__stats_html_acbba7f4a1f962091e9596c4eac481186"><div class="ttname"><a href="../../db/d1c/structtps__taskprocessor__stats.html#acbba7f4a1f962091e9596c4eac481186">tps_taskprocessor_stats::_tasks_processed_count</a></div><div class="ttdeci">unsigned long _tasks_processed_count</div><div class="ttdoc">This is the current number of tasks processed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00065">taskprocessor.c:65</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_a28e4a2cd5d9cefd5714c0a3ce2a35499"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a28e4a2cd5d9cefd5714c0a3ce2a35499">FMT_FIELDS</a></div><div class="ttdeci">#define FMT_FIELDS</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00511">taskprocessor.c:511</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_afe2dfc83eb5b460f39e9e5513023e74e"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#afe2dfc83eb5b460f39e9e5513023e74e">ast_taskprocessor::tps_queue_size</a></div><div class="ttdeci">long tps_queue_size</div><div class="ttdoc">Taskprocessor current queue size. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00074">taskprocessor.c:74</a></div></div>
<div class="ttc" id="structtps__taskprocessor__stats_html_a94e5638db41adecd198cf929e2990440"><div class="ttname"><a href="../../db/d1c/structtps__taskprocessor__stats.html#a94e5638db41adecd198cf929e2990440">tps_taskprocessor_stats::max_qsize</a></div><div class="ttdeci">unsigned long max_qsize</div><div class="ttdoc">This is the maximum number of tasks queued at any one time. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00063">taskprocessor.c:63</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_ad921b32ca4f51740507d2d8957116c61"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#ad921b32ca4f51740507d2d8957116c61">ast_taskprocessor::stats</a></div><div class="ttdeci">struct tps_taskprocessor_stats stats</div><div class="ttdoc">Taskprocessor statistics. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00071">taskprocessor.c:71</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a066af12f04560a8f62daf5c13e5029c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a066af12f04560a8f62daf5c13e5029c1">&#9670;&nbsp;</a></span>tps_reset_stats()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tps_reset_stats </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *&#160;</td>
          <td class="paramname"><em>tps</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01321">1321</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00065">tps_taskprocessor_stats::_tasks_processed_count</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00063">tps_taskprocessor_stats::max_qsize</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00071">ast_taskprocessor::stats</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01329">cli_tps_reset_stats()</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01363">cli_tps_reset_stats_all()</a>.</p>
<div class="fragment"><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;{</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(tps);</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;   tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#ad921b32ca4f51740507d2d8957116c61">stats</a>.<a class="code" href="../../db/d1c/structtps__taskprocessor__stats.html#acbba7f4a1f962091e9596c4eac481186">_tasks_processed_count</a> = 0;</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;   tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#ad921b32ca4f51740507d2d8957116c61">stats</a>.<a class="code" href="../../db/d1c/structtps__taskprocessor__stats.html#a94e5638db41adecd198cf929e2990440">max_qsize</a> = 0;</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(tps);</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structtps__taskprocessor__stats_html_acbba7f4a1f962091e9596c4eac481186"><div class="ttname"><a href="../../db/d1c/structtps__taskprocessor__stats.html#acbba7f4a1f962091e9596c4eac481186">tps_taskprocessor_stats::_tasks_processed_count</a></div><div class="ttdeci">unsigned long _tasks_processed_count</div><div class="ttdoc">This is the current number of tasks processed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00065">taskprocessor.c:65</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structtps__taskprocessor__stats_html_a94e5638db41adecd198cf929e2990440"><div class="ttname"><a href="../../db/d1c/structtps__taskprocessor__stats.html#a94e5638db41adecd198cf929e2990440">tps_taskprocessor_stats::max_qsize</a></div><div class="ttdeci">unsigned long max_qsize</div><div class="ttdoc">This is the maximum number of tasks queued at any one time. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00063">taskprocessor.c:63</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_ad921b32ca4f51740507d2d8957116c61"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#ad921b32ca4f51740507d2d8957116c61">ast_taskprocessor::stats</a></div><div class="ttdeci">struct tps_taskprocessor_stats stats</div><div class="ttdoc">Taskprocessor statistics. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00071">taskprocessor.c:71</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1b0baeae7f77179e7864de00bb638608"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b0baeae7f77179e7864de00bb638608">&#9670;&nbsp;</a></span>tps_shutdown()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tps_shutdown </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00291">291</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00463">ao2_t_ref</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00030">ast_cli_unregister_multiple()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00865">AST_VECTOR_CALLBACK_VOID</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00202">AST_VECTOR_RW_FREE</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00301">ast_tps_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;{</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a>(<a class="code" href="../../d4/deb/taskprocessor_8c.html#a3f1ff5f2bf7938f6d216f04f0057486e">taskprocessor_clis</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d4/deb/taskprocessor_8c.html#a3f1ff5f2bf7938f6d216f04f0057486e">taskprocessor_clis</a>));</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#aeb9853664dde8a7df8bc7ea180d73d54">AST_VECTOR_CALLBACK_VOID</a>(&amp;overloaded_subsystems, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a7b85c5439f23cf3a3b365b7c12643ac8">AST_VECTOR_RW_FREE</a>(&amp;overloaded_subsystems);</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>(tps_singletons, -1, <span class="stringliteral">&quot;Unref tps_singletons in shutdown&quot;</span>);</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;   tps_singletons = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a14c61bcab109a520a96d30c56ba5fcde"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a></div><div class="ttdeci">#define ao2_t_ref(o, delta, tag)</div><div class="ttdoc">Reference/unreference an object and return the old refcount. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00463">astobj2.h:463</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="cli_8h_html_a56b6b59ee2eaa994597a5b0f4e9f9d09"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a></div><div class="ttdeci">int ast_cli_unregister_multiple(struct ast_cli_entry *e, int len)</div><div class="ttdoc">Unregister multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00030">clicompat.c:30</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="vector_8h_html_a7b85c5439f23cf3a3b365b7c12643ac8"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a7b85c5439f23cf3a3b365b7c12643ac8">AST_VECTOR_RW_FREE</a></div><div class="ttdeci">#define AST_VECTOR_RW_FREE(vec)</div><div class="ttdoc">Deallocates this locked vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00202">vector.h:202</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_a3f1ff5f2bf7938f6d216f04f0057486e"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a3f1ff5f2bf7938f6d216f04f0057486e">taskprocessor_clis</a></div><div class="ttdeci">static struct ast_cli_entry taskprocessor_clis[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00159">taskprocessor.c:159</a></div></div>
<div class="ttc" id="vector_8h_html_aeb9853664dde8a7df8bc7ea180d73d54"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aeb9853664dde8a7df8bc7ea180d73d54">AST_VECTOR_CALLBACK_VOID</a></div><div class="ttdeci">#define AST_VECTOR_CALLBACK_VOID(vec, callback,...)</div><div class="ttdoc">Execute a callback on every element in a vector disregarding callback return. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00865">vector.h:865</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1eed27e1b0af1736961f29abb083c994"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1eed27e1b0af1736961f29abb083c994">&#9670;&nbsp;</a></span>tps_sort_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int tps_sort_cb </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>obj_left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>obj_right</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00488">488</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00097">ast_taskprocessor::name</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01105">OBJ_SEARCH_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01076">OBJ_SEARCH_MASK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01091">OBJ_SEARCH_OBJECT</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01120">OBJ_SEARCH_PARTIAL_KEY</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00539">tps_report_taskprocessor_list()</a>.</p>
<div class="fragment"><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;{</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *tps_left = obj_left;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *tps_right = obj_right;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *right_key = obj_right;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;   <span class="keywordtype">int</span> cmp;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;   <span class="keywordflow">switch</span> (flags &amp; <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a>) {</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a>:</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      right_key = tps_right-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      <span class="comment">/* Fall through */</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a>:</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      cmp = strcasecmp(tps_left-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>, right_key);</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20">OBJ_SEARCH_PARTIAL_KEY</a>:</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      cmp = strncasecmp(tps_left-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>, right_key, strlen(right_key));</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;   }</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;   <span class="keywordflow">return</span> cmp;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;}</div><div class="ttc" id="structast__taskprocessor_html_afd3f693e384b1ee0a0c44d58351eb87d"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#afd3f693e384b1ee0a0c44d58351eb87d">ast_taskprocessor::name</a></div><div class="ttdeci">char name[0]</div><div class="ttdoc">Friendly name of the taskprocessor. Subsystem is appended after the name&amp;#39;s NULL terminator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00097">taskprocessor.c:97</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35caa13a6e0771cc457e86f425d95c3b8d54">OBJ_SEARCH_KEY</a></div><div class="ttdoc">The arg parameter is a search key, but is not an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01105">astobj2.h:1105</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20">OBJ_SEARCH_PARTIAL_KEY</a></div><div class="ttdoc">The arg parameter is a partial search key similar to OBJ_SEARCH_KEY. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01120">astobj2.h:1120</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca4a56217fdad3e940fa6b87dfd296c829">OBJ_SEARCH_OBJECT</a></div><div class="ttdoc">The arg parameter is an object of the same type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01091">astobj2.h:1091</a></div></div>
<div class="ttc" id="structast__taskprocessor_html"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a></div><div class="ttdoc">A ast_taskprocessor structure is a singleton by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00069">taskprocessor.c:69</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca61056b5855dc9921faa4f10a67b1a250">OBJ_SEARCH_MASK</a></div><div class="ttdoc">Search option field mask. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01076">astobj2.h:1076</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1e47192322efd29dd1b30c9f1adc9f52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e47192322efd29dd1b30c9f1adc9f52">&#9670;&nbsp;</a></span>tps_task_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d3/d60/structtps__task.html">tps_task</a>* tps_task_alloc </td>
          <td>(</td>
          <td class="paramtype">int(*)(void *datap)&#160;</td>
          <td class="paramname"><em>task_exe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>datap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00326">326</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d3/d60/structtps__task.html#acc9f473b491e7d8fb0a13f13924eaf88">tps_task::callback</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00054">tps_task::datap</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00050">tps_task::execute</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01175">ast_taskprocessor_push()</a>.</p>
<div class="fragment"><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;{</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d60/structtps__task.html">tps_task</a> *t;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;   <span class="keywordflow">if</span> (!task_exe) {</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;task_exe is NULL!\n&quot;</span>);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;   }</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;   t = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*t));</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;   <span class="keywordflow">if</span> (!t) {</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;failed to allocate task!\n&quot;</span>);</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;   }</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;   t-&gt;<a class="code" href="../../d3/d60/structtps__task.html#acc9f473b491e7d8fb0a13f13924eaf88">callback</a>.<a class="code" href="../../d3/d60/structtps__task.html#a3715a7cb3d54e5b93b7085312cb02878">execute</a> = task_exe;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;   t-&gt;<a class="code" href="../../d3/d60/structtps__task.html#aeb5cadc7793d3e5ed0c725dbb3c04491">datap</a> = <a class="code" href="../../d3/d60/structtps__task.html#aeb5cadc7793d3e5ed0c725dbb3c04491">datap</a>;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;   <span class="keywordflow">return</span> t;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;}</div><div class="ttc" id="structtps__task_html_acc9f473b491e7d8fb0a13f13924eaf88"><div class="ttname"><a href="../../d3/d60/structtps__task.html#acc9f473b491e7d8fb0a13f13924eaf88">tps_task::callback</a></div><div class="ttdeci">union tps_task::@428 callback</div><div class="ttdoc">The execute() task callback function pointer. </div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structtps__task_html_aeb5cadc7793d3e5ed0c725dbb3c04491"><div class="ttname"><a href="../../d3/d60/structtps__task.html#aeb5cadc7793d3e5ed0c725dbb3c04491">tps_task::datap</a></div><div class="ttdeci">void * datap</div><div class="ttdoc">The data pointer for the task execute() function. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00054">taskprocessor.c:54</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structtps__task_html_a3715a7cb3d54e5b93b7085312cb02878"><div class="ttname"><a href="../../d3/d60/structtps__task.html#a3715a7cb3d54e5b93b7085312cb02878">tps_task::execute</a></div><div class="ttdeci">int(* execute)(void *datap)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00050">taskprocessor.c:50</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structtps__task_html"><div class="ttname"><a href="../../d3/d60/structtps__task.html">tps_task</a></div><div class="ttdoc">tps_task structure is queued to a taskprocessor </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00047">taskprocessor.c:47</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acc08ed07cfd43715ff560a0a4e19eb8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc08ed07cfd43715ff560a0a4e19eb8c">&#9670;&nbsp;</a></span>tps_task_alloc_local()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d3/d60/structtps__task.html">tps_task</a>* tps_task_alloc_local </td>
          <td>(</td>
          <td class="paramtype">int(*)(struct <a class="el" href="../../dc/ded/structast__taskprocessor__local.html">ast_taskprocessor_local</a> *local)&#160;</td>
          <td class="paramname"><em>task_exe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>datap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00346">346</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d3/d60/structtps__task.html#acc9f473b491e7d8fb0a13f13924eaf88">tps_task::callback</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00054">tps_task::datap</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00051">tps_task::execute_local</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00057">tps_task::wants_local</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01180">ast_taskprocessor_push_local()</a>.</p>
<div class="fragment"><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;{</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d60/structtps__task.html">tps_task</a> *t;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;   <span class="keywordflow">if</span> (!task_exe) {</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;task_exe is NULL!\n&quot;</span>);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;   }</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;   t = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*t));</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   <span class="keywordflow">if</span> (!t) {</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;failed to allocate task!\n&quot;</span>);</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;   }</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;   t-&gt;<a class="code" href="../../d3/d60/structtps__task.html#acc9f473b491e7d8fb0a13f13924eaf88">callback</a>.<a class="code" href="../../d3/d60/structtps__task.html#a459b9081279633ec1f0a1f81bd0d8f24">execute_local</a> = task_exe;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;   t-&gt;<a class="code" href="../../d3/d60/structtps__task.html#aeb5cadc7793d3e5ed0c725dbb3c04491">datap</a> = <a class="code" href="../../d3/d60/structtps__task.html#aeb5cadc7793d3e5ed0c725dbb3c04491">datap</a>;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;   t-&gt;<a class="code" href="../../d3/d60/structtps__task.html#a49dc5ea84d90d2fe8c7afac643cf40b1">wants_local</a> = 1;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;   <span class="keywordflow">return</span> t;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;}</div><div class="ttc" id="structtps__task_html_acc9f473b491e7d8fb0a13f13924eaf88"><div class="ttname"><a href="../../d3/d60/structtps__task.html#acc9f473b491e7d8fb0a13f13924eaf88">tps_task::callback</a></div><div class="ttdeci">union tps_task::@428 callback</div><div class="ttdoc">The execute() task callback function pointer. </div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structtps__task_html_aeb5cadc7793d3e5ed0c725dbb3c04491"><div class="ttname"><a href="../../d3/d60/structtps__task.html#aeb5cadc7793d3e5ed0c725dbb3c04491">tps_task::datap</a></div><div class="ttdeci">void * datap</div><div class="ttdoc">The data pointer for the task execute() function. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00054">taskprocessor.c:54</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structtps__task_html_a459b9081279633ec1f0a1f81bd0d8f24"><div class="ttname"><a href="../../d3/d60/structtps__task.html#a459b9081279633ec1f0a1f81bd0d8f24">tps_task::execute_local</a></div><div class="ttdeci">int(* execute_local)(struct ast_taskprocessor_local *local)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00051">taskprocessor.c:51</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structtps__task_html"><div class="ttname"><a href="../../d3/d60/structtps__task.html">tps_task</a></div><div class="ttdoc">tps_task structure is queued to a taskprocessor </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00047">taskprocessor.c:47</a></div></div>
<div class="ttc" id="structtps__task_html_a49dc5ea84d90d2fe8c7afac643cf40b1"><div class="ttname"><a href="../../d3/d60/structtps__task.html#a49dc5ea84d90d2fe8c7afac643cf40b1">tps_task::wants_local</a></div><div class="ttdeci">unsigned int wants_local</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00057">taskprocessor.c:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab8f1469650cc0c4de3f74dc4ec515207"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8f1469650cc0c4de3f74dc4ec515207">&#9670;&nbsp;</a></span>tps_task_free()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* tps_task_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/d60/structtps__task.html">tps_task</a> *&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00368">368</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01212">ast_taskprocessor_execute()</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00866">tps_taskprocessor_dtor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;{</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(task);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abe5e9c0c054877963f85c121b0f6741b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe5e9c0c054877963f85c121b0f6741b">&#9670;&nbsp;</a></span>tps_taskprocessor_dtor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void tps_taskprocessor_dtor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>tps</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00866">866</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00089">ast_taskprocessor::high_water_alert</a>, <a class="el" href="../../d3/d60/structtps__task.html#a28855b80c0289541fb3643ae24c01085">tps_task::list</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00081">ast_taskprocessor::listener</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00088">task()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00794">tps_alert_add()</a>, <a class="el" href="../../db/d17/structast__taskprocessor.html#a0d22cef450efe10d63951ee1fcc39599">ast_taskprocessor::tps_queue</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00074">ast_taskprocessor::tps_queue_size</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00368">tps_task_free()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00983">__allocate_taskprocessor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;{</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *t = tps;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d60/structtps__task.html">tps_task</a> *<a class="code" href="../../df/df7/test__taskprocessor_8c.html#a07d08fd44ac4a9f8e1319ce270f5d56a">task</a>;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;   <span class="keywordflow">while</span> ((task = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;t-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a0d22cef450efe10d63951ee1fcc39599">tps_queue</a>, <a class="code" href="../../d3/d60/structtps__task.html#a28855b80c0289541fb3643ae24c01085">list</a>))) {</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;      <a class="code" href="../../d4/deb/taskprocessor_8c.html#ab8f1469650cc0c4de3f74dc4ec515207">tps_task_free</a>(task);</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;   }</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;   t-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#afe2dfc83eb5b460f39e9e5513023e74e">tps_queue_size</a> = 0;</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;   <span class="keywordflow">if</span> (t-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a80e170193fe4d362e68c72e8deff70b4">high_water_alert</a>) {</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;      t-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a80e170193fe4d362e68c72e8deff70b4">high_water_alert</a> = 0;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;      <a class="code" href="../../d4/deb/taskprocessor_8c.html#addc1eaecfa48679c5b0c4efb5bd45534">tps_alert_add</a>(t, -1);</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;   }</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(t-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a9dbaf508f8a891a7dfca0827ba489abc">listener</a>);</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;   t-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a9dbaf508f8a891a7dfca0827ba489abc">listener</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;}</div><div class="ttc" id="structast__taskprocessor_html_a80e170193fe4d362e68c72e8deff70b4"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#a80e170193fe4d362e68c72e8deff70b4">ast_taskprocessor::high_water_alert</a></div><div class="ttdeci">unsigned int high_water_alert</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00089">taskprocessor.c:89</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_a9dbaf508f8a891a7dfca0827ba489abc"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#a9dbaf508f8a891a7dfca0827ba489abc">ast_taskprocessor::listener</a></div><div class="ttdeci">struct ast_taskprocessor_listener * listener</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00081">taskprocessor.c:81</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_addc1eaecfa48679c5b0c4efb5bd45534"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#addc1eaecfa48679c5b0c4efb5bd45534">tps_alert_add</a></div><div class="ttdeci">static void tps_alert_add(struct ast_taskprocessor *tps, int delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00794">taskprocessor.c:794</a></div></div>
<div class="ttc" id="test__taskprocessor_8c_html_a07d08fd44ac4a9f8e1319ce270f5d56a"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#a07d08fd44ac4a9f8e1319ce270f5d56a">task</a></div><div class="ttdeci">static int task(void *data)</div><div class="ttdoc">Queued task for baseline test. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00088">test_taskprocessor.c:88</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_a0d22cef450efe10d63951ee1fcc39599"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#a0d22cef450efe10d63951ee1fcc39599">ast_taskprocessor::tps_queue</a></div><div class="ttdeci">struct ast_taskprocessor::tps_queue tps_queue</div></div>
<div class="ttc" id="structtps__task_html"><div class="ttname"><a href="../../d3/d60/structtps__task.html">tps_task</a></div><div class="ttdoc">tps_task structure is queued to a taskprocessor </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00047">taskprocessor.c:47</a></div></div>
<div class="ttc" id="structtps__task_html_a28855b80c0289541fb3643ae24c01085"><div class="ttname"><a href="../../d3/d60/structtps__task.html#a28855b80c0289541fb3643ae24c01085">tps_task::list</a></div><div class="ttdeci">struct tps_task::@429 list</div><div class="ttdoc">AST_LIST_ENTRY overhead. </div></div>
<div class="ttc" id="structast__taskprocessor_html_afe2dfc83eb5b460f39e9e5513023e74e"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#afe2dfc83eb5b460f39e9e5513023e74e">ast_taskprocessor::tps_queue_size</a></div><div class="ttdeci">long tps_queue_size</div><div class="ttdoc">Taskprocessor current queue size. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00074">taskprocessor.c:74</a></div></div>
<div class="ttc" id="structast__taskprocessor_html"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a></div><div class="ttdoc">A ast_taskprocessor structure is a singleton by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00069">taskprocessor.c:69</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_ab8f1469650cc0c4de3f74dc4ec515207"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#ab8f1469650cc0c4de3f74dc4ec515207">tps_task_free</a></div><div class="ttdeci">static void * tps_task_free(struct tps_task *task)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00368">taskprocessor.c:368</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af989d4cac357f8adb289a4f7bf4374cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af989d4cac357f8adb289a4f7bf4374cb">&#9670;&nbsp;</a></span>tps_taskprocessor_pop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d3/d60/structtps__task.html">tps_task</a>* tps_taskprocessor_pop </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *&#160;</td>
          <td class="paramname"><em>tps</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00886">886</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00089">ast_taskprocessor::high_water_alert</a>, <a class="el" href="../../d3/d60/structtps__task.html#a28855b80c0289541fb3643ae24c01085">tps_task::list</a>, <a class="el" href="../../df/df7/test__taskprocessor_8c_source.html#l00088">task()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00794">tps_alert_add()</a>, <a class="el" href="../../db/d17/structast__taskprocessor.html#a0d22cef450efe10d63951ee1fcc39599">ast_taskprocessor::tps_queue</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00076">ast_taskprocessor::tps_queue_low</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00074">ast_taskprocessor::tps_queue_size</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01212">ast_taskprocessor_execute()</a>.</p>
<div class="fragment"><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;{</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d60/structtps__task.html">tps_task</a> *<a class="code" href="../../df/df7/test__taskprocessor_8c.html#a07d08fd44ac4a9f8e1319ce270f5d56a">task</a>;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;   <span class="keywordflow">if</span> ((task = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a0d22cef450efe10d63951ee1fcc39599">tps_queue</a>, <a class="code" href="../../d3/d60/structtps__task.html#a28855b80c0289541fb3643ae24c01085">list</a>))) {</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      --tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#afe2dfc83eb5b460f39e9e5513023e74e">tps_queue_size</a>;</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;      <span class="keywordflow">if</span> (tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a80e170193fe4d362e68c72e8deff70b4">high_water_alert</a> &amp;&amp; tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#afe2dfc83eb5b460f39e9e5513023e74e">tps_queue_size</a> &lt;= tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a281a55644ba8295d14b5ad5c5935b6cc">tps_queue_low</a>) {</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;         tps-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#a80e170193fe4d362e68c72e8deff70b4">high_water_alert</a> = 0;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;         <a class="code" href="../../d4/deb/taskprocessor_8c.html#addc1eaecfa48679c5b0c4efb5bd45534">tps_alert_add</a>(tps, -1);</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;      }</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;   }</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../df/df7/test__taskprocessor_8c.html#a07d08fd44ac4a9f8e1319ce270f5d56a">task</a>;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;}</div><div class="ttc" id="structast__taskprocessor_html_a80e170193fe4d362e68c72e8deff70b4"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#a80e170193fe4d362e68c72e8deff70b4">ast_taskprocessor::high_water_alert</a></div><div class="ttdeci">unsigned int high_water_alert</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00089">taskprocessor.c:89</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_addc1eaecfa48679c5b0c4efb5bd45534"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#addc1eaecfa48679c5b0c4efb5bd45534">tps_alert_add</a></div><div class="ttdeci">static void tps_alert_add(struct ast_taskprocessor *tps, int delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00794">taskprocessor.c:794</a></div></div>
<div class="ttc" id="test__taskprocessor_8c_html_a07d08fd44ac4a9f8e1319ce270f5d56a"><div class="ttname"><a href="../../df/df7/test__taskprocessor_8c.html#a07d08fd44ac4a9f8e1319ce270f5d56a">task</a></div><div class="ttdeci">static int task(void *data)</div><div class="ttdoc">Queued task for baseline test. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/df7/test__taskprocessor_8c_source.html#l00088">test_taskprocessor.c:88</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_a281a55644ba8295d14b5ad5c5935b6cc"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#a281a55644ba8295d14b5ad5c5935b6cc">ast_taskprocessor::tps_queue_low</a></div><div class="ttdeci">long tps_queue_low</div><div class="ttdoc">Taskprocessor low water clear alert level. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00076">taskprocessor.c:76</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="structast__taskprocessor_html_a0d22cef450efe10d63951ee1fcc39599"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#a0d22cef450efe10d63951ee1fcc39599">ast_taskprocessor::tps_queue</a></div><div class="ttdeci">struct ast_taskprocessor::tps_queue tps_queue</div></div>
<div class="ttc" id="structtps__task_html"><div class="ttname"><a href="../../d3/d60/structtps__task.html">tps_task</a></div><div class="ttdoc">tps_task structure is queued to a taskprocessor </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00047">taskprocessor.c:47</a></div></div>
<div class="ttc" id="structtps__task_html_a28855b80c0289541fb3643ae24c01085"><div class="ttname"><a href="../../d3/d60/structtps__task.html#a28855b80c0289541fb3643ae24c01085">tps_task::list</a></div><div class="ttdeci">struct tps_task::@429 list</div><div class="ttdoc">AST_LIST_ENTRY overhead. </div></div>
<div class="ttc" id="structast__taskprocessor_html_afe2dfc83eb5b460f39e9e5513023e74e"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#afe2dfc83eb5b460f39e9e5513023e74e">ast_taskprocessor::tps_queue_size</a></div><div class="ttdeci">long tps_queue_size</div><div class="ttdoc">Taskprocessor current queue size. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00074">taskprocessor.c:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afeca2901665160872eff5b7f98775822"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeca2901665160872eff5b7f98775822">&#9670;&nbsp;</a></span>tps_taskprocessor_tab_complete()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* tps_taskprocessor_tab_complete </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00379">379</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l02726">ast_cli_completion_add()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01109">ast_taskprocessor_unreference()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00097">ast_taskprocessor::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00163">ast_cli_args::word</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00411">cli_tps_ping()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00576">cli_tps_report()</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01329">cli_tps_reset_stats()</a>.</p>
<div class="fragment"><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;{</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;   <span class="keywordtype">int</span> tklen;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *p;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> i;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;   tklen = strlen(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>);</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;   i = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(tps_singletons, 0);</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;   <span class="keywordflow">while</span> ((p = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;i))) {</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      <span class="keywordflow">if</span> (!strncasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, p-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>, tklen)) {</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../dc/db0/cli_8h.html#a6f5f6c330757d980065d3f887c62237f">ast_cli_completion_add</a>(<a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(p-&gt;<a class="code" href="../../db/d17/structast__taskprocessor.html#afd3f693e384b1ee0a0c44d58351eb87d">name</a>))) {</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            <a class="code" href="../../d4/deb/taskprocessor_8c.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a>(p);</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;         }</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      }</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      <a class="code" href="../../d4/deb/taskprocessor_8c.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a>(p);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;   }</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;i);</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;}</div><div class="ttc" id="structast__taskprocessor_html_afd3f693e384b1ee0a0c44d58351eb87d"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html#afd3f693e384b1ee0a0c44d58351eb87d">ast_taskprocessor::name</a></div><div class="ttdeci">char name[0]</div><div class="ttdoc">Friendly name of the taskprocessor. Subsystem is appended after the name&amp;#39;s NULL terminator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00097">taskprocessor.c:97</a></div></div>
<div class="ttc" id="taskprocessor_8c_html_a32492eb2480cb8c46ad669622cff8556"><div class="ttname"><a href="../../d4/deb/taskprocessor_8c.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a></div><div class="ttdeci">void * ast_taskprocessor_unreference(struct ast_taskprocessor *tps)</div><div class="ttdoc">Unreference the specified taskprocessor and its reference count will decrement. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01109">taskprocessor.c:1109</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="structast__cli__args_html_adc1f34651f7bbfa3ba5af27db5f53817"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">ast_cli_args::word</a></div><div class="ttdeci">const char * word</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00163">cli.h:163</a></div></div>
<div class="ttc" id="structast__taskprocessor_html"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a></div><div class="ttdoc">A ast_taskprocessor structure is a singleton by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00069">taskprocessor.c:69</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="cli_8h_html_a6f5f6c330757d980065d3f887c62237f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a6f5f6c330757d980065d3f887c62237f">ast_cli_completion_add</a></div><div class="ttdeci">int ast_cli_completion_add(char *value)</div><div class="ttdoc">Add a result to a request for completion options. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd3/main_2cli_8c_source.html#l02726">main/cli.c:2726</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aad81e8feb180e9e5030db0143968b794"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad81e8feb180e9e5030db0143968b794">&#9670;&nbsp;</a></span>default_listener_callbacks</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../d0/d01/structast__taskprocessor__listener__callbacks.html">ast_taskprocessor_listener_callbacks</a> default_listener_callbacks</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00280">280</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

</div>
</div>
<a id="a3f1ff5f2bf7938f6d216f04f0057486e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f1ff5f2bf7938f6d216f04f0057486e">&#9670;&nbsp;</a></span>taskprocessor_clis</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> taskprocessor_clis[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00159">159</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

</div>
</div>
<a id="a4757bee5df8834ec0044fb999170a712"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4757bee5df8834ec0044fb999170a712">&#9670;&nbsp;</a></span>tps_alert_count</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int tps_alert_count</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Count of the number of taskprocessors in high water alert. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00779">779</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00819">ast_taskprocessor_alert_get()</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00794">tps_alert_add()</a>.</p>

</div>
</div>
<a id="afeeef0590292628c276ac75209f531c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeeef0590292628c276ac75209f531c3">&#9670;&nbsp;</a></span>tps_alert_lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a04e2a4450668b0cd2be05edd6259df19">ast_rwlock_t</a> tps_alert_lock = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Access protection for tps_alert_count </p>

<p class="definition">Definition at line <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00782">782</a> of file <a class="el" href="../../d4/deb/taskprocessor_8c_source.html">taskprocessor.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00819">ast_taskprocessor_alert_get()</a>, and <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l00794">tps_alert_add()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:52 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
