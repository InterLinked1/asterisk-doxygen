<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: res_monitor.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_7b47cca4d318623bb4270ab1fb592ef5.html">res</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">res_monitor.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>PBX channel monitoring.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;libgen.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../dd/df2/paths_8h_source.html">asterisk/paths.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d42/lock_8h_source.html">asterisk/lock.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d7b/channel_8h_source.html">asterisk/channel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d4d/file_8h_source.html">asterisk/file.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/de0/pbx_8h_source.html">asterisk/pbx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/db0/cli_8h_source.html">asterisk/cli.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d45/manager_8h_source.html">asterisk/manager.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d79/stasis_8h_source.html">asterisk/stasis.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/d4a/stasis__channels_8h_source.html">asterisk/stasis_channels.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d60/monitor_8h_source.html">asterisk/monitor.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html">asterisk/app.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d60/utils_8h_source.html">asterisk/utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html">asterisk/config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d7/d5b/options_8h_source.html">asterisk/options.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d7/d36/beep_8h_source.html">asterisk/beep.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for res_monitor.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/d84/res__monitor_8c__incl.png" border="0" usemap="#res__monitor_8c" alt=""/></div>
<map name="res__monitor_8c" id="res__monitor_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="464,379,548,405"/>
<area shape="rect" id="node10" href="../../dd/df2/paths_8h.html" title="Asterisk file paths, configured in asterisk.conf. " alt="" coords="250,80,374,107"/>
<area shape="rect" id="node11" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1122,528,1236,555"/>
<area shape="rect" id="node19" href="../../d7/d5b/options_8h.html" title="Options provided by main asterisk program. " alt="" coords="769,677,904,704"/>
<area shape="rect" id="node20" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1624,155,1763,181"/>
<area shape="rect" id="node22" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="2399,304,2514,331"/>
<area shape="rect" id="node30" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="2645,229,2772,256"/>
<area shape="rect" id="node37" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="2394,229,2519,256"/>
<area shape="rect" id="node38" href="../../db/d45/manager_8h.html" title="The AMI &#45; Asterisk Manager Interface &#45; is a TCP protocol created to manage Asterisk with third&#45;party ..." alt="" coords="1133,304,1278,331"/>
<area shape="rect" id="node40" href="../../d2/d4d/file_8h.html" title="Generic File Format Support. Should be included by clients of the file handling routines. File service providers should instead include mod_format.h. " alt="" coords="3100,229,3207,256"/>
<area shape="rect" id="node43" href="../../db/de0/pbx_8h.html" title="Core PBX routines and definitions. " alt="" coords="2154,80,2265,107"/>
<area shape="rect" id="node45" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="2718,155,2854,181"/>
<area shape="rect" id="node46" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="3014,155,3115,181"/>
<area shape="rect" id="node47" href="../../d9/d4a/stasis__channels_8h.html" title="asterisk/stasis_channels.h" alt="" coords="1940,80,2130,107"/>
<area shape="rect" id="node48" href="../../d5/d60/monitor_8h.html" title="Channel monitoring. " alt="" coords="1770,80,1908,107"/>
<area shape="rect" id="node49" href="../../d3/d93/include_2asterisk_2app_8h.html" title="Application convenience functions, designed to give consistent look and feel to Asterisk apps..." alt="" coords="2878,155,2990,181"/>
<area shape="rect" id="node50" href="../../d7/d36/beep_8h.html" title="Periodic beeps into the audio of a call. " alt="" coords="3190,80,3310,107"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="759,752,914,779"/>
<area shape="rect" id="node4" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="697,528,834,555"/>
<area shape="rect" id="node7" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="450,453,585,480"/>
<area shape="rect" id="node5" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="806,603,949,629"/>
<area shape="rect" id="node13" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="1696,603,1758,629"/>
<area shape="rect" id="node14" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="1654,677,1800,704"/>
<area shape="rect" id="node17" href="../../d3/dda/backtrace_8h.html" title="Asterisk backtrace generation. " alt="" coords="1210,603,1361,629"/>
<area shape="rect" id="node18" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="1545,603,1672,629"/>
<area shape="rect" id="node21" href="../../dc/d4d/alertpipe_8h.html" title="asterisk/alertpipe.h" alt="" coords="2004,229,2148,256"/>
<area shape="rect" id="node23" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="2511,379,2668,405"/>
<area shape="rect" id="node24" href="../../dc/d14/abstract__jb_8h.html" title="Common implementation&#45;independent jitterbuffer stuff. " alt="" coords="880,229,1038,256"/>
<area shape="rect" id="node25" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="669,379,804,405"/>
<area shape="rect" id="node26" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="1538,453,1689,480"/>
<area shape="rect" id="node27" href="../../d4/dfb/poll-compat_8h.html" title="asterisk/poll&#45;compat.h" alt="" coords="1114,229,1278,256"/>
<area shape="rect" id="node28" href="../../d6/d66/include_2asterisk_2frame_8h.html" title="Asterisk internal frame definitions. " alt="" coords="1601,304,1728,331"/>
<area shape="rect" id="node29" href="../../d9/de7/chanvars_8h.html" title="Channel Variables. " alt="" coords="2172,229,2319,256"/>
<area shape="rect" id="node31" href="../../dc/d07/cdr_8h.html" title="Call Detail Record API. " alt="" coords="1354,229,1460,256"/>
<area shape="rect" id="node32" href="../../d9/db6/datastore_8h.html" title="Asterisk datastore objects. " alt="" coords="1268,379,1418,405"/>
<area shape="rect" id="node33" href="../../d0/d3c/format__cap_8h.html" title="Format Capabilities API. " alt="" coords="1717,229,1878,256"/>
<area shape="rect" id="node34" href="../../d9/d95/channelstate_8h.html" title="Channel states. " alt="" coords="500,304,671,331"/>
<area shape="rect" id="node35" href="../../de/dc8/ccss_8h.html" title="Call Completion Supplementary Services API. " alt="" coords="993,304,1109,331"/>
<area shape="rect" id="node36" href="../../db/d3c/framehook_8h.html" title="FrameHook Architecture. " alt="" coords="1484,229,1642,256"/>
<area shape="rect" id="node39" href="../../d4/d61/endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="653,229,804,256"/>
<area shape="rect" id="node44" href="../../d7/d00/sched_8h.html" title="Scheduler Routines (derived from cheops) " alt="" coords="2392,155,2518,181"/>
</map>
</div>
</div>
<p><a href="../../d2/d1b/res__monitor_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a805616595a796949ade4a78edc628f99"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#a805616595a796949ade4a78edc628f99">AST_API_MODULE</a></td></tr>
<tr class="separator:a805616595a796949ade4a78edc628f99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a020604393fec8dbcab1897c13bdd44e7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#a020604393fec8dbcab1897c13bdd44e7">LOCK_IF_NEEDED</a>(<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>,  needed)</td></tr>
<tr class="separator:a020604393fec8dbcab1897c13bdd44e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4874e91ddd324a90ff297fb0d401662d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#a4874e91ddd324a90ff297fb0d401662d">UNLOCK_IF_NEEDED</a>(<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>,  needed)</td></tr>
<tr class="separator:a4874e91ddd324a90ff297fb0d401662d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:aee3d617c7a1c9b5325de53e607fce523"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <br />
&#160;&#160;<a class="el" href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a079d93f9c8d35fa3e8272d9ef53d2b87">MON_FLAG_BRIDGED</a> = (1 &lt;&lt; 0), 
<a class="el" href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a554ecb2b56be996cb717a7a3e91db286">MON_FLAG_MIX</a> = (1 &lt;&lt; 1), 
<a class="el" href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a5d9c50b7bbda1d22ab8f3163498de7a6">MON_FLAG_DROP_IN</a> = (1 &lt;&lt; 2), 
<a class="el" href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a44b448c32c3f69604d983b1abce64247">MON_FLAG_DROP_OUT</a> = (1 &lt;&lt; 3), 
<br />
&#160;&#160;<a class="el" href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a8b8b4c2f8697d04b5b7d24d4f85efc30">MON_FLAG_BEEP</a> = (1 &lt;&lt; 4)
<br />
 }</td></tr>
<tr class="separator:aee3d617c7a1c9b5325de53e607fce523"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa684652a3ad226861d3cd9c8bee090eb"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="../../d2/d1b/res__monitor_8c.html#aa684652a3ad226861d3cd9c8bee090ebabd291105be378e735584c891220cc632">OPT_ARG_BEEP_INTERVAL</a>, 
<a class="el" href="../../d2/d1b/res__monitor_8c.html#aa684652a3ad226861d3cd9c8bee090ebaec7326f60e7edad15d96ff935e5616d6">OPT_ARG_ARRAY_SIZE</a>
 }</td></tr>
<tr class="separator:aa684652a3ad226861d3cd9c8bee090eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0cc1f76c64cb664ad4bdd5175245358"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#aa0cc1f76c64cb664ad4bdd5175245358">MONITOR_PAUSING_ACTION</a> { <a class="el" href="../../d2/d1b/res__monitor_8c.html#aa0cc1f76c64cb664ad4bdd5175245358a88c5bb35454c285e98f0cd3ef5573d6d">MONITOR_ACTION_PAUSE</a>, 
<a class="el" href="../../d2/d1b/res__monitor_8c.html#aa0cc1f76c64cb664ad4bdd5175245358ace34bca811c8e3b88a5821dc1112045d">MONITOR_ACTION_UNPAUSE</a>
 }</td></tr>
<tr class="separator:aa0cc1f76c64cb664ad4bdd5175245358"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09531d45437f893a13433335c81143a"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>()&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#ad09531d45437f893a13433335c81143a">ast_monitor_change_fname</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *fname_base, int need_lock)</td></tr>
<tr class="memdesc:ad09531d45437f893a13433335c81143a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change monitored filename of channel.  <a href="#ad09531d45437f893a13433335c81143a">More...</a><br /></td></tr>
<tr class="separator:ad09531d45437f893a13433335c81143a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84e010105c76f891782f0d5f0363549b"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>()&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#a84e010105c76f891782f0d5f0363549b">ast_monitor_pause</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</td></tr>
<tr class="memdesc:a84e010105c76f891782f0d5f0363549b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pause monitoring of channel.  <a href="#a84e010105c76f891782f0d5f0363549b">More...</a><br /></td></tr>
<tr class="separator:a84e010105c76f891782f0d5f0363549b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab740a457e68200049b8d7177a3ae96de"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#ab740a457e68200049b8d7177a3ae96de">ast_monitor_set_state</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, int <a class="el" href="../../d4/d88/structstate.html">state</a>)</td></tr>
<tr class="memdesc:ab740a457e68200049b8d7177a3ae96de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change state of monitored channel.  <a href="#ab740a457e68200049b8d7177a3ae96de">More...</a><br /></td></tr>
<tr class="separator:ab740a457e68200049b8d7177a3ae96de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24009cd78ef05c71b550254624eb6c13"><td class="memItemLeft" align="right" valign="top">void <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>()&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#a24009cd78ef05c71b550254624eb6c13">ast_monitor_setjoinfiles</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, int turnon)</td></tr>
<tr class="separator:a24009cd78ef05c71b550254624eb6c13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbcd8e50de0a8867d7a843c2b6915e0d"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>()&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#acbcd8e50de0a8867d7a843c2b6915e0d">ast_monitor_start</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *format_spec, const char *fname_base, int need_lock, int stream_action, const char *beep_id)</td></tr>
<tr class="memdesc:acbcd8e50de0a8867d7a843c2b6915e0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start monitoring a channel.  <a href="#acbcd8e50de0a8867d7a843c2b6915e0d">More...</a><br /></td></tr>
<tr class="separator:acbcd8e50de0a8867d7a843c2b6915e0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbc508597c697dc53fd6ecfdb4741218"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>()&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#afbc508597c697dc53fd6ecfdb4741218">ast_monitor_stop</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, int need_lock)</td></tr>
<tr class="memdesc:afbc508597c697dc53fd6ecfdb4741218"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop monitoring channel.  <a href="#afbc508597c697dc53fd6ecfdb4741218">More...</a><br /></td></tr>
<tr class="separator:afbc508597c697dc53fd6ecfdb4741218"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9debaded0ac66ccfd7d9b898710fda4d"><td class="memItemLeft" align="right" valign="top">int <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>()&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#a9debaded0ac66ccfd7d9b898710fda4d">ast_monitor_unpause</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</td></tr>
<tr class="memdesc:a9debaded0ac66ccfd7d9b898710fda4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unpause monitoring of channel.  <a href="#a9debaded0ac66ccfd7d9b898710fda4d">More...</a><br /></td></tr>
<tr class="separator:a9debaded0ac66ccfd7d9b898710fda4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a029fbfd4ea9cab4ad52f4e7587236eab"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#a029fbfd4ea9cab4ad52f4e7587236eab">change_monitor_action</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="memdesc:a029fbfd4ea9cab4ad52f4e7587236eab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change filename of a monitored channel by manager connection.  <a href="#a029fbfd4ea9cab4ad52f4e7587236eab">More...</a><br /></td></tr>
<tr class="separator:a029fbfd4ea9cab4ad52f4e7587236eab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69743f64651b40a3731b91d6ce1368f7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#a69743f64651b40a3731b91d6ce1368f7">change_monitor_exec</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *data)</td></tr>
<tr class="memdesc:a69743f64651b40a3731b91d6ce1368f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper function.  <a href="#a69743f64651b40a3731b91d6ce1368f7">More...</a><br /></td></tr>
<tr class="separator:a69743f64651b40a3731b91d6ce1368f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a744f7646ca44b325929fa8d762cd785d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#a744f7646ca44b325929fa8d762cd785d">do_pause_or_unpause</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m, int action)</td></tr>
<tr class="separator:a744f7646ca44b325929fa8d762cd785d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9219f8f5ad92fa99bd39d2000a0601eb"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#a9219f8f5ad92fa99bd39d2000a0601eb">get_soxmix_format</a> (const char *<a class="el" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>)</td></tr>
<tr class="memdesc:a9219f8f5ad92fa99bd39d2000a0601eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get audio format.  <a href="#a9219f8f5ad92fa99bd39d2000a0601eb">More...</a><br /></td></tr>
<tr class="separator:a9219f8f5ad92fa99bd39d2000a0601eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cf6b037bcd2c55262b4655216e0166c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#a4cf6b037bcd2c55262b4655216e0166c">pause_monitor_action</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:a4cf6b037bcd2c55262b4655216e0166c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a840a02904f77a9c1b23d313d9593804f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#a840a02904f77a9c1b23d313d9593804f">pause_monitor_exec</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *data)</td></tr>
<tr class="memdesc:a840a02904f77a9c1b23d313d9593804f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper for ast_monitor_pause.  <a href="#a840a02904f77a9c1b23d313d9593804f">More...</a><br /></td></tr>
<tr class="separator:a840a02904f77a9c1b23d313d9593804f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93b32a4770deab288eb2d9b76a11fe66"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#a93b32a4770deab288eb2d9b76a11fe66">start_monitor_action</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="memdesc:a93b32a4770deab288eb2d9b76a11fe66"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start monitoring a channel by manager connection.  <a href="#a93b32a4770deab288eb2d9b76a11fe66">More...</a><br /></td></tr>
<tr class="separator:a93b32a4770deab288eb2d9b76a11fe66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2d0151b8abd7abaa7e5435514b22c9f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#ac2d0151b8abd7abaa7e5435514b22c9f">start_monitor_exec</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *data)</td></tr>
<tr class="memdesc:ac2d0151b8abd7abaa7e5435514b22c9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start monitor.  <a href="#ac2d0151b8abd7abaa7e5435514b22c9f">More...</a><br /></td></tr>
<tr class="separator:ac2d0151b8abd7abaa7e5435514b22c9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93f5d0b567285f957c40ac8f63bef4c0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#a93f5d0b567285f957c40ac8f63bef4c0">stop_monitor_action</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="memdesc:a93f5d0b567285f957c40ac8f63bef4c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop monitoring a channel by manager connection.  <a href="#a93f5d0b567285f957c40ac8f63bef4c0">More...</a><br /></td></tr>
<tr class="separator:a93f5d0b567285f957c40ac8f63bef4c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15a6b6fcde2e361fe1f8633871cb9c8e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#a15a6b6fcde2e361fe1f8633871cb9c8e">stop_monitor_exec</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *data)</td></tr>
<tr class="memdesc:a15a6b6fcde2e361fe1f8633871cb9c8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper function.  <a href="#a15a6b6fcde2e361fe1f8633871cb9c8e">More...</a><br /></td></tr>
<tr class="separator:a15a6b6fcde2e361fe1f8633871cb9c8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3f7ca5ebf924af21dd41bd27c139f8e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#af3f7ca5ebf924af21dd41bd27c139f8e">unpause_monitor_action</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:af3f7ca5ebf924af21dd41bd27c139f8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac5b750f558ee5d9d058212717a57cda"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#aac5b750f558ee5d9d058212717a57cda">unpause_monitor_exec</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *data)</td></tr>
<tr class="memdesc:aac5b750f558ee5d9d058212717a57cda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wrapper for ast_monitor_unpause.  <a href="#aac5b750f558ee5d9d058212717a57cda">More...</a><br /></td></tr>
<tr class="separator:aac5b750f558ee5d9d058212717a57cda"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a835b27a90d895a488e4e14cc3d2dee8c">AST_MODFLAG_GLOBAL_SYMBOLS</a> | <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Call Monitoring Resource&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_DEPRECATED, .load = load_module, .unload = unload_module, .load_pri = AST_MODPRI_CHANNEL_DEPEND, .optional_modules = &quot;func_periodic_hook&quot;, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5384ac888d06ece0609e5649d9dc5101"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../d2/d8d/structast__app__option.html">ast_app_option</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#a5384ac888d06ece0609e5649d9dc5101">monitor_opts</a> [128] = { [ '<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>' ] = { .<a class="el" href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a> = <a class="el" href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a079d93f9c8d35fa3e8272d9ef53d2b87">MON_FLAG_BRIDGED</a> }, [ 'm' ] = { .<a class="el" href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a> = <a class="el" href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a554ecb2b56be996cb717a7a3e91db286">MON_FLAG_MIX</a> }, [ 'i' ] = { .<a class="el" href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a> = <a class="el" href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a5d9c50b7bbda1d22ab8f3163498de7a6">MON_FLAG_DROP_IN</a> }, [ 'o' ] = { .<a class="el" href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a> = <a class="el" href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a44b448c32c3f69604d983b1abce64247">MON_FLAG_DROP_OUT</a> }, [ 'B' ] = { .<a class="el" href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a> = <a class="el" href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a8b8b4c2f8697d04b5b7d24d4f85efc30">MON_FLAG_BEEP</a> , .arg_index = <a class="el" href="../../d2/d1b/res__monitor_8c.html#aa684652a3ad226861d3cd9c8bee090ebabd291105be378e735584c891220cc632">OPT_ARG_BEEP_INTERVAL</a> + 1 }, }</td></tr>
<tr class="separator:a5384ac888d06ece0609e5649d9dc5101"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab192ebed6ae1909520f4553be0c335d8"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#ab192ebed6ae1909520f4553be0c335d8">monitorlock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td></tr>
<tr class="separator:ab192ebed6ae1909520f4553be0c335d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a189930c4babdc38135a74db479534069"><td class="memItemLeft" align="right" valign="top">static unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d1b/res__monitor_8c.html#a189930c4babdc38135a74db479534069">seq</a> = 0</td></tr>
<tr class="separator:a189930c4babdc38135a74db479534069"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>PBX channel monitoring. </p>
<dl class="section author"><dt>Author</dt><dd>Mark Spencer <a href="#" onclick="location.href='mai'+'lto:'+'mar'+'ks'+'ter'+'@d'+'igi'+'um'+'.co'+'m'; return false;">marks<span style="display: none;">.nosp@m.</span>ter@<span style="display: none;">.nosp@m.</span>digiu<span style="display: none;">.nosp@m.</span>m.co<span style="display: none;">.nosp@m.</span>m</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a805616595a796949ade4a78edc628f99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a805616595a796949ade4a78edc628f99">&#9670;&nbsp;</a></span>AST_API_MODULE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AST_API_MODULE</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00047">47</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>

</div>
</div>
<a id="a020604393fec8dbcab1897c13bdd44e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a020604393fec8dbcab1897c13bdd44e7">&#9670;&nbsp;</a></span>LOCK_IF_NEEDED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOCK_IF_NEEDED</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">needed&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { \</div><div class="line">   if (needed) \</div><div class="line">      ast_channel_lock(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>); \</div><div class="line">   } <span class="keywordflow">while</span>(0)</div><div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00263">263</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00590">ast_monitor_change_fname()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00282">ast_monitor_set_state()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00305">ast_monitor_start()</a>, and <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00461">ast_monitor_stop()</a>.</p>

</div>
</div>
<a id="a4874e91ddd324a90ff297fb0d401662d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4874e91ddd324a90ff297fb0d401662d">&#9670;&nbsp;</a></span>UNLOCK_IF_NEEDED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UNLOCK_IF_NEEDED</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">needed&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> { \</div><div class="line">   if (needed) \</div><div class="line">      ast_channel_unlock(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>); \</div><div class="line">   } <span class="keywordflow">while</span> (0)</div><div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00268">268</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00590">ast_monitor_change_fname()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00282">ast_monitor_set_state()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00305">ast_monitor_start()</a>, and <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00461">ast_monitor_stop()</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="aee3d617c7a1c9b5325de53e607fce523"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee3d617c7a1c9b5325de53e607fce523">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aee3d617c7a1c9b5325de53e607fce523a079d93f9c8d35fa3e8272d9ef53d2b87"></a>MON_FLAG_BRIDGED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aee3d617c7a1c9b5325de53e607fce523a554ecb2b56be996cb717a7a3e91db286"></a>MON_FLAG_MIX&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aee3d617c7a1c9b5325de53e607fce523a5d9c50b7bbda1d22ab8f3163498de7a6"></a>MON_FLAG_DROP_IN&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aee3d617c7a1c9b5325de53e607fce523a44b448c32c3f69604d983b1abce64247"></a>MON_FLAG_DROP_OUT&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aee3d617c7a1c9b5325de53e607fce523a8b8b4c2f8697d04b5b7d24d4f85efc30"></a>MON_FLAG_BEEP&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00665">665</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;     {</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;   <a class="code" href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a079d93f9c8d35fa3e8272d9ef53d2b87">MON_FLAG_BRIDGED</a> =  (1 &lt;&lt; 0),</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;   <a class="code" href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a554ecb2b56be996cb717a7a3e91db286">MON_FLAG_MIX</a> =      (1 &lt;&lt; 1),</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;   <a class="code" href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a5d9c50b7bbda1d22ab8f3163498de7a6">MON_FLAG_DROP_IN</a> =  (1 &lt;&lt; 2),</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;   <a class="code" href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a44b448c32c3f69604d983b1abce64247">MON_FLAG_DROP_OUT</a> = (1 &lt;&lt; 3),</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;   <a class="code" href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a8b8b4c2f8697d04b5b7d24d4f85efc30">MON_FLAG_BEEP</a> =     (1 &lt;&lt; 4),</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;};</div><div class="ttc" id="res__monitor_8c_html_aee3d617c7a1c9b5325de53e607fce523a5d9c50b7bbda1d22ab8f3163498de7a6"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a5d9c50b7bbda1d22ab8f3163498de7a6">MON_FLAG_DROP_IN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00668">res_monitor.c:668</a></div></div>
<div class="ttc" id="res__monitor_8c_html_aee3d617c7a1c9b5325de53e607fce523a554ecb2b56be996cb717a7a3e91db286"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a554ecb2b56be996cb717a7a3e91db286">MON_FLAG_MIX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00667">res_monitor.c:667</a></div></div>
<div class="ttc" id="res__monitor_8c_html_aee3d617c7a1c9b5325de53e607fce523a44b448c32c3f69604d983b1abce64247"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a44b448c32c3f69604d983b1abce64247">MON_FLAG_DROP_OUT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00669">res_monitor.c:669</a></div></div>
<div class="ttc" id="res__monitor_8c_html_aee3d617c7a1c9b5325de53e607fce523a8b8b4c2f8697d04b5b7d24d4f85efc30"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a8b8b4c2f8697d04b5b7d24d4f85efc30">MON_FLAG_BEEP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00670">res_monitor.c:670</a></div></div>
<div class="ttc" id="res__monitor_8c_html_aee3d617c7a1c9b5325de53e607fce523a079d93f9c8d35fa3e8272d9ef53d2b87"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a079d93f9c8d35fa3e8272d9ef53d2b87">MON_FLAG_BRIDGED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00666">res_monitor.c:666</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa684652a3ad226861d3cd9c8bee090eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa684652a3ad226861d3cd9c8bee090eb">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aa684652a3ad226861d3cd9c8bee090ebabd291105be378e735584c891220cc632"></a>OPT_ARG_BEEP_INTERVAL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aa684652a3ad226861d3cd9c8bee090ebaec7326f60e7edad15d96ff935e5616d6"></a>OPT_ARG_ARRAY_SIZE&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00673">673</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;     {</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;   <a class="code" href="../../d2/d1b/res__monitor_8c.html#aa684652a3ad226861d3cd9c8bee090ebabd291105be378e735584c891220cc632">OPT_ARG_BEEP_INTERVAL</a>,</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;   <a class="code" href="../../d2/d1b/res__monitor_8c.html#aa684652a3ad226861d3cd9c8bee090ebaec7326f60e7edad15d96ff935e5616d6">OPT_ARG_ARRAY_SIZE</a>,  <span class="comment">/* Always last element of the enum */</span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;};</div><div class="ttc" id="res__monitor_8c_html_aa684652a3ad226861d3cd9c8bee090ebaec7326f60e7edad15d96ff935e5616d6"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#aa684652a3ad226861d3cd9c8bee090ebaec7326f60e7edad15d96ff935e5616d6">OPT_ARG_ARRAY_SIZE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00675">res_monitor.c:675</a></div></div>
<div class="ttc" id="res__monitor_8c_html_aa684652a3ad226861d3cd9c8bee090ebabd291105be378e735584c891220cc632"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#aa684652a3ad226861d3cd9c8bee090ebabd291105be378e735584c891220cc632">OPT_ARG_BEEP_INTERVAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00674">res_monitor.c:674</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa0cc1f76c64cb664ad4bdd5175245358"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0cc1f76c64cb664ad4bdd5175245358">&#9670;&nbsp;</a></span>MONITOR_PAUSING_ACTION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d2/d1b/res__monitor_8c.html#aa0cc1f76c64cb664ad4bdd5175245358">MONITOR_PAUSING_ACTION</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aa0cc1f76c64cb664ad4bdd5175245358a88c5bb35454c285e98f0cd3ef5573d6d"></a>MONITOR_ACTION_PAUSE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aa0cc1f76c64cb664ad4bdd5175245358ace34bca811c8e3b88a5821dc1112045d"></a>MONITOR_ACTION_UNPAUSE&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00932">932</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;{</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;   <a class="code" href="../../d2/d1b/res__monitor_8c.html#aa0cc1f76c64cb664ad4bdd5175245358a88c5bb35454c285e98f0cd3ef5573d6d">MONITOR_ACTION_PAUSE</a>,</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;   <a class="code" href="../../d2/d1b/res__monitor_8c.html#aa0cc1f76c64cb664ad4bdd5175245358ace34bca811c8e3b88a5821dc1112045d">MONITOR_ACTION_UNPAUSE</a></div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;};</div><div class="ttc" id="res__monitor_8c_html_aa0cc1f76c64cb664ad4bdd5175245358ace34bca811c8e3b88a5821dc1112045d"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#aa0cc1f76c64cb664ad4bdd5175245358ace34bca811c8e3b88a5821dc1112045d">MONITOR_ACTION_UNPAUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00935">res_monitor.c:935</a></div></div>
<div class="ttc" id="res__monitor_8c_html_aa0cc1f76c64cb664ad4bdd5175245358a88c5bb35454c285e98f0cd3ef5573d6d"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#aa0cc1f76c64cb664ad4bdd5175245358a88c5bb35454c285e98f0cd3ef5573d6d">MONITOR_ACTION_PAUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00934">res_monitor.c:934</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l01015">1015</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l01015">1015</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>

</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l01015">1015</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>

</div>
</div>
<a id="ad09531d45437f893a13433335c81143a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09531d45437f893a13433335c81143a">&#9670;&nbsp;</a></span>ast_monitor_change_fname()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>() ast_monitor_change_fname </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fname_base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>need_lock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change monitored filename of channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td></td></tr>
    <tr><td class="paramname">fname_base</td><td>new filename </td></tr>
    <tr><td class="paramname">need_lock</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on failure. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>We cannot just compare filenames, due to symlinks, relative paths, and other possible filesystem issues. We could use realpath(3), but its use is discouraged. However, if we try to create the same file from two different paths, the second will fail, and so we have our notification that the filenames point to the same path.</dd></dl>
<p>Remember, also, that we're using the basename of the file (i.e. the file without the format suffix), so it does not already exist and we aren't interfering with the recording itself.</p>

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00590">590</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00613">ast_channel_monitor()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00155">ast_config_AST_MONITOR_DIR</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02231">ast_mkdir()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../da/d21/main_2db_8c_source.html#l00112">doexit</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l04244">ast_channel_monitor::filename_base</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l04246">ast_channel_monitor::filename_changed</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00263">LOCK_IF_NEEDED</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, and <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00268">UNLOCK_IF_NEEDED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/monitor_8h_source.html#l00044">__stub__ast_monitor_stop()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00892">change_monitor_action()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00802">change_monitor_exec()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00808">start_monitor_action()</a>, and <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00693">start_monitor_exec()</a>.</p>
<div class="fragment"><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;{</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(fname_base)) {</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Cannot change monitor filename of channel %s to null\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;   }</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;   <a class="code" href="../../d2/d1b/res__monitor_8c.html#a020604393fec8dbcab1897c13bdd44e7">LOCK_IF_NEEDED</a>(chan, need_lock);</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)) {</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;      <span class="keywordtype">int</span> directory = strchr(fname_base, <span class="charliteral">&#39;/&#39;</span>) ? 1 : 0;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *absolute = *fname_base == <span class="charliteral">&#39;/&#39;</span> ? <span class="stringliteral">&quot;&quot;</span> : <a class="code" href="../../dd/df2/paths_8h.html#ae8b54021bf362dc04d5783fa3b4b4abd">ast_config_AST_MONITOR_DIR</a>;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *absolute_suffix = *fname_base == <span class="charliteral">&#39;/&#39;</span> ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;/&quot;</span>;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      <span class="keywordtype">char</span> tmpstring[<span class="keyword">sizeof</span>(<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a34151f04e7ec5b41736e78fd49685a39">filename_base</a>)] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;      <span class="keywordtype">int</span> i, fd[2] = { -1, -1 }, <a class="code" href="../../da/d21/main_2db_8c.html#a0e55a773a7175671526f96f16cc0fabd">doexit</a> = 0;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;      <span class="comment">/* before continuing, see if we&#39;re trying to rename the file to itself... */</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;      snprintf(tmpstring, <span class="keyword">sizeof</span>(tmpstring), <span class="stringliteral">&quot;%s%s%s&quot;</span>, absolute, absolute_suffix, fname_base);</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      <span class="comment">/* try creating the directory just in case it doesn&#39;t exist */</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      <span class="keywordflow">if</span> (directory) {</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;         <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(tmpstring);</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a7c38859ed90e96df2b0a0fdf843769d0">ast_mkdir</a>(dirname(name), 0777);</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      }</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">      /*!</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment">       * \note We cannot just compare filenames, due to symlinks, relative</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="comment">       * paths, and other possible filesystem issues.  We could use</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment">       * realpath(3), but its use is discouraged.  However, if we try to</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment">       * create the same file from two different paths, the second will</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="comment">       * fail, and so we have our notification that the filenames point to</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="comment">       * the same path.</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="comment">       *</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="comment">       * Remember, also, that we&#39;re using the basename of the file (i.e.</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="comment">       * the file without the format suffix), so it does not already exist</span></div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="comment">       * and we aren&#39;t interfering with the recording itself.</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;comparing tmpstring %s to filename_base %s\n&quot;</span>, tmpstring, <a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;filename_base);</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      <span class="keywordflow">if</span> ((fd[0] = open(tmpstring, O_CREAT | O_WRONLY, 0644)) &lt; 0 ||</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;         (fd[1] = open(<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;filename_base, O_CREAT | O_EXCL | O_WRONLY, 0644)) &lt; 0) {</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;         <span class="keywordflow">if</span> (fd[0] &lt; 0) {</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to compare filenames: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;No need to rename monitor filename to itself\n&quot;</span>);</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;         }</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;         <a class="code" href="../../da/d21/main_2db_8c.html#a0e55a773a7175671526f96f16cc0fabd">doexit</a> = 1;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      }</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      <span class="comment">/* Cleanup temporary files */</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;      <span class="keywordflow">for</span> (i = 0; i &lt; 2; i++) {</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;         <span class="keywordflow">if</span> (fd[i] &gt;= 0) {</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;            <span class="keywordflow">while</span> (close(fd[i]) &lt; 0 &amp;&amp; <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> == EINTR);</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;         }</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      }</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      unlink(tmpstring);</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      <span class="comment">/* if previous monitor file existed in a subdirectory, the directory will not be removed */</span></div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      unlink(<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;filename_base);</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../da/d21/main_2db_8c.html#a0e55a773a7175671526f96f16cc0fabd">doexit</a>) {</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;         <a class="code" href="../../d2/d1b/res__monitor_8c.html#a4874e91ddd324a90ff297fb0d401662d">UNLOCK_IF_NEEDED</a>(chan, need_lock);</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      }</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;filename_base, tmpstring, <span class="keyword">sizeof</span>(<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;filename_base));</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a230e3f2ccbf0c5b0701d5f9709eb9f29">filename_changed</a> = 1;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Cannot change monitor filename of channel %s to %s, monitoring not started\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), fname_base);</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;   }</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;   <a class="code" href="../../d2/d1b/res__monitor_8c.html#a4874e91ddd324a90ff297fb0d401662d">UNLOCK_IF_NEEDED</a>(chan, need_lock);</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;}</div><div class="ttc" id="structast__channel__monitor_html_a230e3f2ccbf0c5b0701d5f9709eb9f29"><div class="ttname"><a href="../../d9/daf/structast__channel__monitor.html#a230e3f2ccbf0c5b0701d5f9709eb9f29">ast_channel_monitor::filename_changed</a></div><div class="ttdeci">int filename_changed</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04246">channel.h:4246</a></div></div>
<div class="ttc" id="res__monitor_8c_html_a4874e91ddd324a90ff297fb0d401662d"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#a4874e91ddd324a90ff297fb0d401662d">UNLOCK_IF_NEEDED</a></div><div class="ttdeci">#define UNLOCK_IF_NEEDED(lock, needed)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00268">res_monitor.c:268</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structast__channel__monitor_html_a34151f04e7ec5b41736e78fd49685a39"><div class="ttname"><a href="../../d9/daf/structast__channel__monitor.html#a34151f04e7ec5b41736e78fd49685a39">ast_channel_monitor::filename_base</a></div><div class="ttdeci">char filename_base[FILENAME_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04244">channel.h:4244</a></div></div>
<div class="ttc" id="res__monitor_8c_html_a020604393fec8dbcab1897c13bdd44e7"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#a020604393fec8dbcab1897c13bdd44e7">LOCK_IF_NEEDED</a></div><div class="ttdeci">#define LOCK_IF_NEEDED(lock, needed)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00263">res_monitor.c:263</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="paths_8h_html_ae8b54021bf362dc04d5783fa3b4b4abd"><div class="ttname"><a href="../../dd/df2/paths_8h.html#ae8b54021bf362dc04d5783fa3b4b4abd">ast_config_AST_MONITOR_DIR</a></div><div class="ttdeci">const char * ast_config_AST_MONITOR_DIR</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00155">options.c:155</a></div></div>
<div class="ttc" id="main_2db_8c_html_a0e55a773a7175671526f96f16cc0fabd"><div class="ttname"><a href="../../da/d21/main_2db_8c.html#a0e55a773a7175671526f96f16cc0fabd">doexit</a></div><div class="ttdeci">static int doexit</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d21/main_2db_8c_source.html#l00112">main/db.c:112</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channel_8h_html_abdebed775647544929616b09a8487817"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a></div><div class="ttdeci">struct ast_channel_monitor * ast_channel_monitor(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00613">channel_internal_api.c:613</a></div></div>
<div class="ttc" id="utils_8h_html_a7c38859ed90e96df2b0a0fdf843769d0"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7c38859ed90e96df2b0a0fdf843769d0">ast_mkdir</a></div><div class="ttdeci">int ast_mkdir(const char *path, int mode)</div><div class="ttdoc">Recursively create directory path. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02231">main/utils.c:2231</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a84e010105c76f891782f0d5f0363549b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84e010105c76f891782f0d5f0363549b">&#9670;&nbsp;</a></span>ast_monitor_pause()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>() ast_monitor_pause </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Pause monitoring of channel. </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00559">559</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h_source.html#l04235">AST_MONITOR_PAUSED</a>, and <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00282">ast_monitor_set_state()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/monitor_8h_source.html#l00054">__stub__ast_monitor_setjoinfiles()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00938">do_pause_or_unpause()</a>, and <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00571">pause_monitor_exec()</a>.</p>
<div class="fragment"><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;{</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/d1b/res__monitor_8c.html#ab740a457e68200049b8d7177a3ae96de">ast_monitor_set_state</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a9b57685a45dd0700625ea8ba83a868dfaaa5de0713f705b8e962f613e0797015d">AST_MONITOR_PAUSED</a>);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;}</div><div class="ttc" id="res__monitor_8c_html_ab740a457e68200049b8d7177a3ae96de"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#ab740a457e68200049b8d7177a3ae96de">ast_monitor_set_state</a></div><div class="ttdeci">static int ast_monitor_set_state(struct ast_channel *chan, int state)</div><div class="ttdoc">Change state of monitored channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00282">res_monitor.c:282</a></div></div>
<div class="ttc" id="channel_8h_html_a9b57685a45dd0700625ea8ba83a868dfaaa5de0713f705b8e962f613e0797015d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9b57685a45dd0700625ea8ba83a868dfaaa5de0713f705b8e962f613e0797015d">AST_MONITOR_PAUSED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04235">channel.h:4235</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab740a457e68200049b8d7177a3ae96de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab740a457e68200049b8d7177a3ae96de">&#9670;&nbsp;</a></span>ast_monitor_set_state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_monitor_set_state </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Change state of monitored channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td></td></tr>
    <tr><td class="paramname">state</td><td>monitor state </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on failure. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00282">282</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00613">ast_channel_monitor()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00263">LOCK_IF_NEEDED</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00959">state</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l04249">ast_channel_monitor::state</a>, and <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00268">UNLOCK_IF_NEEDED</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00559">ast_monitor_pause()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00305">ast_monitor_start()</a>, and <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00565">ast_monitor_unpause()</a>.</p>
<div class="fragment"><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;{</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;   <a class="code" href="../../d2/d1b/res__monitor_8c.html#a020604393fec8dbcab1897c13bdd44e7">LOCK_IF_NEEDED</a>(chan, 1);</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)) {</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <a class="code" href="../../d2/d1b/res__monitor_8c.html#a4874e91ddd324a90ff297fb0d401662d">UNLOCK_IF_NEEDED</a>(chan, 1);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;   }</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a8e6392758d65e06d5e34fddc95bcb9c7">state</a> = <a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;   <a class="code" href="../../d2/d1b/res__monitor_8c.html#a4874e91ddd324a90ff297fb0d401662d">UNLOCK_IF_NEEDED</a>(chan, 1);</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;}</div><div class="ttc" id="chan__sip_8c_html_a14a9662e09deed264497073732fb014a"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a></div><div class="ttdeci">enum sip_cc_notify_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00959">chan_sip.c:959</a></div></div>
<div class="ttc" id="res__monitor_8c_html_a4874e91ddd324a90ff297fb0d401662d"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#a4874e91ddd324a90ff297fb0d401662d">UNLOCK_IF_NEEDED</a></div><div class="ttdeci">#define UNLOCK_IF_NEEDED(lock, needed)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00268">res_monitor.c:268</a></div></div>
<div class="ttc" id="res__monitor_8c_html_a020604393fec8dbcab1897c13bdd44e7"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#a020604393fec8dbcab1897c13bdd44e7">LOCK_IF_NEEDED</a></div><div class="ttdeci">#define LOCK_IF_NEEDED(lock, needed)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00263">res_monitor.c:263</a></div></div>
<div class="ttc" id="structast__channel__monitor_html_a8e6392758d65e06d5e34fddc95bcb9c7"><div class="ttname"><a href="../../d9/daf/structast__channel__monitor.html#a8e6392758d65e06d5e34fddc95bcb9c7">ast_channel_monitor::state</a></div><div class="ttdeci">enum AST_MONITORING_STATE state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04249">channel.h:4249</a></div></div>
<div class="ttc" id="channel_8h_html_abdebed775647544929616b09a8487817"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a></div><div class="ttdeci">struct ast_channel_monitor * ast_channel_monitor(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00613">channel_internal_api.c:613</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a24009cd78ef05c71b550254624eb6c13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a24009cd78ef05c71b550254624eb6c13">&#9670;&nbsp;</a></span>ast_monitor_setjoinfiles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>() ast_monitor_setjoinfiles </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>turnon</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00926">926</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00613">ast_channel_monitor()</a>, and <a class="el" href="../../d5/d7b/channel_8h_source.html#l04248">ast_channel_monitor::joinfiles</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/monitor_8h_source.html#l00050">__stub__ast_monitor_change_fname()</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00139">start_automonitor()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00808">start_monitor_action()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00693">start_monitor_exec()</a>, and <a class="el" href="../../da/dfb/app__queue_8c_source.html#l06722">try_calling()</a>.</p>
<div class="fragment"><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;{</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan))</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a7b71d4ef14ee85d131a71845d8c38926">joinfiles</a> = turnon;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;}</div><div class="ttc" id="structast__channel__monitor_html_a7b71d4ef14ee85d131a71845d8c38926"><div class="ttname"><a href="../../d9/daf/structast__channel__monitor.html#a7b71d4ef14ee85d131a71845d8c38926">ast_channel_monitor::joinfiles</a></div><div class="ttdeci">int joinfiles</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04248">channel.h:4248</a></div></div>
<div class="ttc" id="channel_8h_html_abdebed775647544929616b09a8487817"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a></div><div class="ttdeci">struct ast_channel_monitor * ast_channel_monitor(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00613">channel_internal_api.c:613</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acbcd8e50de0a8867d7a843c2b6915e0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbcd8e50de0a8867d7a843c2b6915e0d">&#9670;&nbsp;</a></span>ast_monitor_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>() ast_monitor_start </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format_spec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fname_base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>need_lock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stream_action</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>beep_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start monitoring a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td><a class="el" href="../../df/d3c/structast__channel.html" title="Main Channel structure associated with a channel. ">ast_channel</a> struct to record </td></tr>
    <tr><td class="paramname">format_spec</td><td>file format to use for recording </td></tr>
    <tr><td class="paramname">fname_base</td><td>filename base to record to </td></tr>
    <tr><td class="paramname">need_lock</td><td>whether to lock the channel mutex </td></tr>
    <tr><td class="paramname">stream_action</td><td>whether to record the input and/or output streams. X_REC_IN | X_REC_OUT is most often used Creates the file to record, if no format is specified it assumes WAV It also sets channel variable __MONITORED=yes </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">-1</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00305">305</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l00771">ast_channel_blob_create_from_cache()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00537">ast_channel_insmpl_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00613">ast_channel_monitor()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00617">ast_channel_monitor_set()</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#ga655bddef1a90d2c392fd5d9e3db7ce91">ast_channel_monitor_start_type()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00545">ast_channel_outsmpl_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01502">ast_channel_topic()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01068">ast_closestream()</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00155">ast_config_AST_MONITOR_DIR</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../db/db2/asterisk_8h_source.html#l00032">AST_FILE_MODE</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01098">ast_filedelete()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01086">ast_fileexists()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02231">ast_mkdir()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l04234">AST_MONITOR_RUNNING</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00282">ast_monitor_set_state()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00461">ast_monitor_stop()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01361">ast_writefile()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l04245">ast_channel_monitor::beep_id</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l04244">ast_channel_monitor::filename_base</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l04246">ast_channel_monitor::filename_changed</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h_source.html#l00207">FILENAME_MAX</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l04247">ast_channel_monitor::format</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00263">LOCK_IF_NEEDED</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../da/dde/chan__phone_8c_source.html#l00116">monitor</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00261">monitorlock</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_builtin_setvar_helper()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l04242">ast_channel_monitor::read_filename</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l04240">ast_channel_monitor::read_stream</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00273">seq</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l04250">ast_channel_monitor::stop</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00268">UNLOCK_IF_NEEDED</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l04243">ast_channel_monitor::write_filename</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l04241">ast_channel_monitor::write_stream</a>, <a class="el" href="../../d5/d60/monitor_8h_source.html#l00030">X_REC_IN</a>, and <a class="el" href="../../d5/d60/monitor_8h_source.html#l00031">X_REC_OUT</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00139">start_automonitor()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00808">start_monitor_action()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00693">start_monitor_exec()</a>, and <a class="el" href="../../da/dfb/app__queue_8c_source.html#l06722">try_calling()</a>.</p>
<div class="fragment"><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;{</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, <a class="code" href="../../d8/d9e/structmessage.html">message</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;   <a class="code" href="../../d2/d1b/res__monitor_8c.html#a020604393fec8dbcab1897c13bdd44e7">LOCK_IF_NEEDED</a>(chan, need_lock);</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;   <span class="keywordflow">if</span> (!(<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan))) {</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d9/daf/structast__channel__monitor.html">ast_channel_monitor</a> *<a class="code" href="../../da/dde/chan__phone_8c.html#a4e40373706bcf5cdb9409dac3166d280">monitor</a>;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      <span class="keywordtype">char</span> *channel_name, *p;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <span class="comment">/* Create monitoring directory if needed */</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a7c38859ed90e96df2b0a0fdf843769d0">ast_mkdir</a>(<a class="code" href="../../dd/df2/paths_8h.html#ae8b54021bf362dc04d5783fa3b4b4abd">ast_config_AST_MONITOR_DIR</a>, 0777);</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      <span class="keywordflow">if</span> (!(monitor = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*monitor)))) {</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;         <a class="code" href="../../d2/d1b/res__monitor_8c.html#a4874e91ddd324a90ff297fb0d401662d">UNLOCK_IF_NEEDED</a>(chan, need_lock);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;      }</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d9/daf/structast__channel__monitor.html#afd84e03fca29f3045c3df07f76fd119f">beep_id</a>)) {</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(monitor-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#afd84e03fca29f3045c3df07f76fd119f">beep_id</a>, <a class="code" href="../../d9/daf/structast__channel__monitor.html#afd84e03fca29f3045c3df07f76fd119f">beep_id</a>, <span class="keyword">sizeof</span>(monitor-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#afd84e03fca29f3045c3df07f76fd119f">beep_id</a>));</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      }</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <span class="comment">/* Determine file names */</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(fname_base)) {</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;         <span class="keywordtype">int</span> directory = strchr(fname_base, <span class="charliteral">&#39;/&#39;</span>) ? 1 : 0;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;         <span class="keyword">const</span> <span class="keywordtype">char</span> *absolute = *fname_base == <span class="charliteral">&#39;/&#39;</span> ? <span class="stringliteral">&quot;&quot;</span> : <a class="code" href="../../dd/df2/paths_8h.html#ae8b54021bf362dc04d5783fa3b4b4abd">ast_config_AST_MONITOR_DIR</a>;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;         <span class="keyword">const</span> <span class="keywordtype">char</span> *absolute_suffix = *fname_base == <span class="charliteral">&#39;/&#39;</span> ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;/&quot;</span>;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;         snprintf(monitor-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a9afddcb68bd1c417f69fa2114dba93b4">read_filename</a>, <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#aada6f64b4a36eb39c9b4cfd44eef7b36">FILENAME_MAX</a>, <span class="stringliteral">&quot;%s%s%s-in&quot;</span>,</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                  absolute, absolute_suffix, fname_base);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;         snprintf(monitor-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#aa207af3400ab4d9b71c64de0c1333311">write_filename</a>, <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#aada6f64b4a36eb39c9b4cfd44eef7b36">FILENAME_MAX</a>, <span class="stringliteral">&quot;%s%s%s-out&quot;</span>,</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                  absolute, absolute_suffix, fname_base);</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;         snprintf(monitor-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a34151f04e7ec5b41736e78fd49685a39">filename_base</a>, <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#aada6f64b4a36eb39c9b4cfd44eef7b36">FILENAME_MAX</a>, <span class="stringliteral">&quot;%s%s%s&quot;</span>,</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                  absolute, absolute_suffix, fname_base);</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;         <span class="comment">/* try creating the directory just in case it doesn&#39;t exist */</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;         <span class="keywordflow">if</span> (directory) {</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(monitor-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a34151f04e7ec5b41736e78fd49685a39">filename_base</a>);</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            <a class="code" href="../../d5/d60/utils_8h.html#a7c38859ed90e96df2b0a0fdf843769d0">ast_mkdir</a>(dirname(name), 0777);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;         }</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d2/d1b/res__monitor_8c.html#ab192ebed6ae1909520f4553be0c335d8">monitorlock</a>);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;         snprintf(monitor-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a9afddcb68bd1c417f69fa2114dba93b4">read_filename</a>, <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#aada6f64b4a36eb39c9b4cfd44eef7b36">FILENAME_MAX</a>, <span class="stringliteral">&quot;%s/audio-in-%lu&quot;</span>,</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                  <a class="code" href="../../dd/df2/paths_8h.html#ae8b54021bf362dc04d5783fa3b4b4abd">ast_config_AST_MONITOR_DIR</a>, <a class="code" href="../../d2/d1b/res__monitor_8c.html#a189930c4babdc38135a74db479534069">seq</a>);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;         snprintf(monitor-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#aa207af3400ab4d9b71c64de0c1333311">write_filename</a>, <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#aada6f64b4a36eb39c9b4cfd44eef7b36">FILENAME_MAX</a>, <span class="stringliteral">&quot;%s/audio-out-%lu&quot;</span>,</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                  <a class="code" href="../../dd/df2/paths_8h.html#ae8b54021bf362dc04d5783fa3b4b4abd">ast_config_AST_MONITOR_DIR</a>, <a class="code" href="../../d2/d1b/res__monitor_8c.html#a189930c4babdc38135a74db479534069">seq</a>);</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;         <a class="code" href="../../d2/d1b/res__monitor_8c.html#a189930c4babdc38135a74db479534069">seq</a>++;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d2/d1b/res__monitor_8c.html#ab192ebed6ae1909520f4553be0c335d8">monitorlock</a>);</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;         <span class="comment">/* Replace all &#39;/&#39; chars from the channel name with &#39;-&#39; chars. */</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;         channel_name = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;         <span class="keywordflow">for</span> (p = channel_name; (p = strchr(p, <span class="charliteral">&#39;/&#39;</span>)); ) {</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            *p = <span class="charliteral">&#39;-&#39;</span>;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;         }</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;         snprintf(monitor-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a34151f04e7ec5b41736e78fd49685a39">filename_base</a>, <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#aada6f64b4a36eb39c9b4cfd44eef7b36">FILENAME_MAX</a>, <span class="stringliteral">&quot;%s/%d-%s&quot;</span>,</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                <a class="code" href="../../dd/df2/paths_8h.html#ae8b54021bf362dc04d5783fa3b4b4abd">ast_config_AST_MONITOR_DIR</a>, (<span class="keywordtype">int</span>)time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>), channel_name);</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;         monitor-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a230e3f2ccbf0c5b0701d5f9709eb9f29">filename_changed</a> = 1;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      }</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      monitor-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#abc0b62e2d888c1814c531d5e2c456e49">stop</a> = <a class="code" href="../../d2/d1b/res__monitor_8c.html#afbc508597c697dc53fd6ecfdb4741218">ast_monitor_stop</a>;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      <span class="comment">/* Determine file format */</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(format_spec)) {</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;         monitor-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a5407a229a5e1a319d75fb29542c83eae">format</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(format_spec);</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;         monitor-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a5407a229a5e1a319d75fb29542c83eae">format</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<span class="stringliteral">&quot;wav&quot;</span>);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      }</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      <span class="comment">/* open files */</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      <span class="keywordflow">if</span> (stream_action &amp; <a class="code" href="../../d5/d60/monitor_8h.html#a95b90f61870300ea984afae5123dd44f">X_REC_IN</a>) {</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d2/d4d/file_8h.html#ab9b8ab8e5ee34c9b4da25779255cafde">ast_fileexists</a>(monitor-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a9afddcb68bd1c417f69fa2114dba93b4">read_filename</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) &gt; 0)</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#adb15d6efecc1a13b8835bee6d3562ddb">ast_filedelete</a>(monitor-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a9afddcb68bd1c417f69fa2114dba93b4">read_filename</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;         <span class="keywordflow">if</span> (!(monitor-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a71e6f392234194bc5a27b42b90f9df56">read_stream</a> = <a class="code" href="../../d2/d4d/file_8h.html#a964f8ef393c07609d7b9e02937faed52">ast_writefile</a>(monitor-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a9afddcb68bd1c417f69fa2114dba93b4">read_filename</a>,</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                     monitor-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a5407a229a5e1a319d75fb29542c83eae">format</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                     O_CREAT|O_TRUNC|O_WRONLY, 0, <a class="code" href="../../db/db2/asterisk_8h.html#aa6293b2dae52a2b470494df672a26c42">AST_FILE_MODE</a>))) {</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Could not create file %s\n&quot;</span>,</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                     monitor-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a9afddcb68bd1c417f69fa2114dba93b4">read_filename</a>);</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(monitor);</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            <a class="code" href="../../d2/d1b/res__monitor_8c.html#a4874e91ddd324a90ff297fb0d401662d">UNLOCK_IF_NEEDED</a>(chan, need_lock);</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;         }</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      } <span class="keywordflow">else</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;         monitor-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a71e6f392234194bc5a27b42b90f9df56">read_stream</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      <span class="keywordflow">if</span> (stream_action &amp; <a class="code" href="../../d5/d60/monitor_8h.html#ac03869f26afacb6d45355d401ced19d8">X_REC_OUT</a>) {</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d2/d4d/file_8h.html#ab9b8ab8e5ee34c9b4da25779255cafde">ast_fileexists</a>(monitor-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#aa207af3400ab4d9b71c64de0c1333311">write_filename</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) &gt; 0) {</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#adb15d6efecc1a13b8835bee6d3562ddb">ast_filedelete</a>(monitor-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#aa207af3400ab4d9b71c64de0c1333311">write_filename</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;         }</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;         <span class="keywordflow">if</span> (!(monitor-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a0d944be9f8d5fbcf9055775775d99760">write_stream</a> = <a class="code" href="../../d2/d4d/file_8h.html#a964f8ef393c07609d7b9e02937faed52">ast_writefile</a>(monitor-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#aa207af3400ab4d9b71c64de0c1333311">write_filename</a>,</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                     monitor-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a5407a229a5e1a319d75fb29542c83eae">format</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                     O_CREAT|O_TRUNC|O_WRONLY, 0, <a class="code" href="../../db/db2/asterisk_8h.html#aa6293b2dae52a2b470494df672a26c42">AST_FILE_MODE</a>))) {</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Could not create file %s\n&quot;</span>,</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                     monitor-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#aa207af3400ab4d9b71c64de0c1333311">write_filename</a>);</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            <span class="keywordflow">if</span> (monitor-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a71e6f392234194bc5a27b42b90f9df56">read_stream</a>) {</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;               <a class="code" href="../../d2/d4d/file_8h.html#ab53bd2c3c55d509790c7f7620aac6373">ast_closestream</a>(monitor-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a71e6f392234194bc5a27b42b90f9df56">read_stream</a>);</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            }</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;            <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(monitor);</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            <a class="code" href="../../d2/d1b/res__monitor_8c.html#a4874e91ddd324a90ff297fb0d401662d">UNLOCK_IF_NEEDED</a>(chan, need_lock);</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;         }</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      } <span class="keywordflow">else</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;         monitor-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a0d944be9f8d5fbcf9055775775d99760">write_stream</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a2730f9c6fc0d433ab49f62faa8f87909">ast_channel_insmpl_set</a>(chan, 0);</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a9d32bd3ed0bec428aeae54ad80dfd45e">ast_channel_outsmpl_set</a>(chan, 0);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aa52fe100a9952fc355bfa6a0582d87dd">ast_channel_monitor_set</a>(chan, monitor);</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <a class="code" href="../../d2/d1b/res__monitor_8c.html#ab740a457e68200049b8d7177a3ae96de">ast_monitor_set_state</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a9b57685a45dd0700625ea8ba83a868dface918b901d180f5ea85f8a941fc8cbdb">AST_MONITOR_RUNNING</a>);</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <span class="comment">/* so we know this call has been monitored in case we need to bill for it or something */</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;__MONITORED&quot;</span>,<span class="stringliteral">&quot;true&quot;</span>);</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <a class="code" href="../../d8/d9e/structmessage.html">message</a> = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gafe8b123e0c124e44c3bff016591d3f9c">ast_channel_blob_create_from_cache</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(chan),</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga655bddef1a90d2c392fd5d9e3db7ce91">ast_channel_monitor_start_type</a>(),</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9e/structmessage.html">message</a>) {</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;         <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../d5/d7b/channel_8h.html#afdeaf9abb1aecc715313a4f62c1cf9c9">ast_channel_topic</a>(chan), <a class="code" href="../../d8/d9e/structmessage.html">message</a>);</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      }</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1,<span class="stringliteral">&quot;Cannot start monitoring %s, already monitored\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      res = -1;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;   }</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;   <a class="code" href="../../d2/d1b/res__monitor_8c.html#a4874e91ddd324a90ff297fb0d401662d">UNLOCK_IF_NEEDED</a>(chan, need_lock);</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;}</div><div class="ttc" id="main_2stdtime_2private_8h_html_aada6f64b4a36eb39c9b4cfd44eef7b36"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#aada6f64b4a36eb39c9b4cfd44eef7b36">FILENAME_MAX</a></div><div class="ttdeci">#define FILENAME_MAX</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d6e/main_2stdtime_2private_8h_source.html#l00207">main/stdtime/private.h:207</a></div></div>
<div class="ttc" id="monitor_8h_html_a95b90f61870300ea984afae5123dd44f"><div class="ttname"><a href="../../d5/d60/monitor_8h.html#a95b90f61870300ea984afae5123dd44f">X_REC_IN</a></div><div class="ttdeci">#define X_REC_IN</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/monitor_8h_source.html#l00030">monitor.h:30</a></div></div>
<div class="ttc" id="structast__channel__monitor_html_a9afddcb68bd1c417f69fa2114dba93b4"><div class="ttname"><a href="../../d9/daf/structast__channel__monitor.html#a9afddcb68bd1c417f69fa2114dba93b4">ast_channel_monitor::read_filename</a></div><div class="ttdeci">char read_filename[FILENAME_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04242">channel.h:4242</a></div></div>
<div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="structast__channel__monitor_html_a230e3f2ccbf0c5b0701d5f9709eb9f29"><div class="ttname"><a href="../../d9/daf/structast__channel__monitor.html#a230e3f2ccbf0c5b0701d5f9709eb9f29">ast_channel_monitor::filename_changed</a></div><div class="ttdeci">int filename_changed</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04246">channel.h:4246</a></div></div>
<div class="ttc" id="res__monitor_8c_html_ab740a457e68200049b8d7177a3ae96de"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#ab740a457e68200049b8d7177a3ae96de">ast_monitor_set_state</a></div><div class="ttdeci">static int ast_monitor_set_state(struct ast_channel *chan, int state)</div><div class="ttdoc">Change state of monitored channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00282">res_monitor.c:282</a></div></div>
<div class="ttc" id="channel_8h_html_a2730f9c6fc0d433ab49f62faa8f87909"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a2730f9c6fc0d433ab49f62faa8f87909">ast_channel_insmpl_set</a></div><div class="ttdeci">void ast_channel_insmpl_set(struct ast_channel *chan, unsigned long value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00537">channel_internal_api.c:537</a></div></div>
<div class="ttc" id="structast__channel__monitor_html_abc0b62e2d888c1814c531d5e2c456e49"><div class="ttname"><a href="../../d9/daf/structast__channel__monitor.html#abc0b62e2d888c1814c531d5e2c456e49">ast_channel_monitor::stop</a></div><div class="ttdeci">int(* stop)(struct ast_channel *chan, int need_lock)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04250">channel.h:4250</a></div></div>
<div class="ttc" id="res__monitor_8c_html_a4874e91ddd324a90ff297fb0d401662d"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#a4874e91ddd324a90ff297fb0d401662d">UNLOCK_IF_NEEDED</a></div><div class="ttdeci">#define UNLOCK_IF_NEEDED(lock, needed)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00268">res_monitor.c:268</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="res__monitor_8c_html_ab192ebed6ae1909520f4553be0c335d8"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#ab192ebed6ae1909520f4553be0c335d8">monitorlock</a></div><div class="ttdeci">static ast_mutex_t monitorlock</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00261">res_monitor.c:261</a></div></div>
<div class="ttc" id="channel_8h_html_a9b57685a45dd0700625ea8ba83a868dface918b901d180f5ea85f8a941fc8cbdb"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9b57685a45dd0700625ea8ba83a868dface918b901d180f5ea85f8a941fc8cbdb">AST_MONITOR_RUNNING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04234">channel.h:4234</a></div></div>
<div class="ttc" id="structast__channel__monitor_html_a34151f04e7ec5b41736e78fd49685a39"><div class="ttname"><a href="../../d9/daf/structast__channel__monitor.html#a34151f04e7ec5b41736e78fd49685a39">ast_channel_monitor::filename_base</a></div><div class="ttdeci">char filename_base[FILENAME_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04244">channel.h:4244</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="res__monitor_8c_html_a020604393fec8dbcab1897c13bdd44e7"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#a020604393fec8dbcab1897c13bdd44e7">LOCK_IF_NEEDED</a></div><div class="ttdeci">#define LOCK_IF_NEEDED(lock, needed)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00263">res_monitor.c:263</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga655bddef1a90d2c392fd5d9e3db7ce91"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga655bddef1a90d2c392fd5d9e3db7ce91">ast_channel_monitor_start_type</a></div><div class="ttdeci">struct stasis_message_type * ast_channel_monitor_start_type(void)</div><div class="ttdoc">Message type for starting monitor on a channel. </div></div>
<div class="ttc" id="file_8h_html_adb15d6efecc1a13b8835bee6d3562ddb"><div class="ttname"><a href="../../d2/d4d/file_8h.html#adb15d6efecc1a13b8835bee6d3562ddb">ast_filedelete</a></div><div class="ttdeci">int ast_filedelete(const char *filename, const char *fmt)</div><div class="ttdoc">Deletes a file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01098">file.c:1098</a></div></div>
<div class="ttc" id="structast__channel__monitor_html_aa207af3400ab4d9b71c64de0c1333311"><div class="ttname"><a href="../../d9/daf/structast__channel__monitor.html#aa207af3400ab4d9b71c64de0c1333311">ast_channel_monitor::write_filename</a></div><div class="ttdeci">char write_filename[FILENAME_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04243">channel.h:4243</a></div></div>
<div class="ttc" id="asterisk_8h_html_aa6293b2dae52a2b470494df672a26c42"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#aa6293b2dae52a2b470494df672a26c42">AST_FILE_MODE</a></div><div class="ttdeci">#define AST_FILE_MODE</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db2/asterisk_8h_source.html#l00032">asterisk.h:32</a></div></div>
<div class="ttc" id="monitor_8h_html_ac03869f26afacb6d45355d401ced19d8"><div class="ttname"><a href="../../d5/d60/monitor_8h.html#ac03869f26afacb6d45355d401ced19d8">X_REC_OUT</a></div><div class="ttdeci">#define X_REC_OUT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/monitor_8h_source.html#l00031">monitor.h:31</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="channel_8h_html_afdeaf9abb1aecc715313a4f62c1cf9c9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#afdeaf9abb1aecc715313a4f62c1cf9c9">ast_channel_topic</a></div><div class="ttdeci">struct stasis_topic * ast_channel_topic(struct ast_channel *chan)</div><div class="ttdoc">A topic which publishes the events for a particular channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01502">channel_internal_api.c:1502</a></div></div>
<div class="ttc" id="structast__channel__monitor_html"><div class="ttname"><a href="../../d9/daf/structast__channel__monitor.html">ast_channel_monitor</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04239">channel.h:4239</a></div></div>
<div class="ttc" id="chan__phone_8c_html_a4e40373706bcf5cdb9409dac3166d280"><div class="ttname"><a href="../../da/dde/chan__phone_8c.html#a4e40373706bcf5cdb9409dac3166d280">monitor</a></div><div class="ttdeci">static unsigned int monitor</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dde/chan__phone_8c_source.html#l00116">chan_phone.c:116</a></div></div>
<div class="ttc" id="file_8h_html_a964f8ef393c07609d7b9e02937faed52"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a964f8ef393c07609d7b9e02937faed52">ast_writefile</a></div><div class="ttdeci">struct ast_filestream * ast_writefile(const char *filename, const char *type, const char *comment, int flags, int check, mode_t mode)</div><div class="ttdoc">Starts writing a file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01361">file.c:1361</a></div></div>
<div class="ttc" id="structast__channel__monitor_html_a71e6f392234194bc5a27b42b90f9df56"><div class="ttname"><a href="../../d9/daf/structast__channel__monitor.html#a71e6f392234194bc5a27b42b90f9df56">ast_channel_monitor::read_stream</a></div><div class="ttdeci">struct ast_filestream * read_stream</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04240">channel.h:4240</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="paths_8h_html_ae8b54021bf362dc04d5783fa3b4b4abd"><div class="ttname"><a href="../../dd/df2/paths_8h.html#ae8b54021bf362dc04d5783fa3b4b4abd">ast_config_AST_MONITOR_DIR</a></div><div class="ttdeci">const char * ast_config_AST_MONITOR_DIR</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00155">options.c:155</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structast__channel__monitor_html_a0d944be9f8d5fbcf9055775775d99760"><div class="ttname"><a href="../../d9/daf/structast__channel__monitor.html#a0d944be9f8d5fbcf9055775775d99760">ast_channel_monitor::write_stream</a></div><div class="ttdeci">struct ast_filestream * write_stream</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04241">channel.h:4241</a></div></div>
<div class="ttc" id="file_8h_html_ab53bd2c3c55d509790c7f7620aac6373"><div class="ttname"><a href="../../d2/d4d/file_8h.html#ab53bd2c3c55d509790c7f7620aac6373">ast_closestream</a></div><div class="ttdeci">int ast_closestream(struct ast_filestream *f)</div><div class="ttdoc">Closes a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01068">file.c:1068</a></div></div>
<div class="ttc" id="structast__channel__monitor_html_a5407a229a5e1a319d75fb29542c83eae"><div class="ttname"><a href="../../d9/daf/structast__channel__monitor.html#a5407a229a5e1a319d75fb29542c83eae">ast_channel_monitor::format</a></div><div class="ttdeci">char * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04247">channel.h:4247</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gafe8b123e0c124e44c3bff016591d3f9c"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gafe8b123e0c124e44c3bff016591d3f9c">ast_channel_blob_create_from_cache</a></div><div class="ttdeci">struct stasis_message * ast_channel_blob_create_from_cache(const char *uniqueid, struct stasis_message_type *type, struct ast_json *blob)</div><div class="ttdoc">Create a ast_channel_blob message, pulling channel state from the cache. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00771">stasis_channels.c:771</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="res__monitor_8c_html_afbc508597c697dc53fd6ecfdb4741218"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#afbc508597c697dc53fd6ecfdb4741218">ast_monitor_stop</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_monitor_stop(struct ast_channel *chan, int need_lock)</div><div class="ttdoc">Stop monitoring channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00461">res_monitor.c:461</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="file_8h_html_ab9b8ab8e5ee34c9b4da25779255cafde"><div class="ttname"><a href="../../d2/d4d/file_8h.html#ab9b8ab8e5ee34c9b4da25779255cafde">ast_fileexists</a></div><div class="ttdeci">int ast_fileexists(const char *filename, const char *fmt, const char *preflang)</div><div class="ttdoc">Checks for the existence of a given file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01086">file.c:1086</a></div></div>
<div class="ttc" id="res__monitor_8c_html_a189930c4babdc38135a74db479534069"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#a189930c4babdc38135a74db479534069">seq</a></div><div class="ttdeci">static unsigned long seq</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00273">res_monitor.c:273</a></div></div>
<div class="ttc" id="channel_8h_html_abdebed775647544929616b09a8487817"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a></div><div class="ttdeci">struct ast_channel_monitor * ast_channel_monitor(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00613">channel_internal_api.c:613</a></div></div>
<div class="ttc" id="channel_8h_html_a9d32bd3ed0bec428aeae54ad80dfd45e"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9d32bd3ed0bec428aeae54ad80dfd45e">ast_channel_outsmpl_set</a></div><div class="ttdeci">void ast_channel_outsmpl_set(struct ast_channel *chan, unsigned long value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00545">channel_internal_api.c:545</a></div></div>
<div class="ttc" id="structast__channel__monitor_html_afd84e03fca29f3045c3df07f76fd119f"><div class="ttname"><a href="../../d9/daf/structast__channel__monitor.html#afd84e03fca29f3045c3df07f76fd119f">ast_channel_monitor::beep_id</a></div><div class="ttdeci">char beep_id[64]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04245">channel.h:4245</a></div></div>
<div class="ttc" id="channel_8h_html_aa52fe100a9952fc355bfa6a0582d87dd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa52fe100a9952fc355bfa6a0582d87dd">ast_channel_monitor_set</a></div><div class="ttdeci">void ast_channel_monitor_set(struct ast_channel *chan, struct ast_channel_monitor *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00617">channel_internal_api.c:617</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
<div class="ttc" id="utils_8h_html_a7c38859ed90e96df2b0a0fdf843769d0"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7c38859ed90e96df2b0a0fdf843769d0">ast_mkdir</a></div><div class="ttdeci">int ast_mkdir(const char *path, int mode)</div><div class="ttdoc">Recursively create directory path. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02231">main/utils.c:2231</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afbc508597c697dc53fd6ecfdb4741218"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbc508597c697dc53fd6ecfdb4741218">&#9670;&nbsp;</a></span>ast_monitor_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>() ast_monitor_stop </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>need_lock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop monitoring channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td></td></tr>
    <tr><td class="paramname">need_lock</td><td>Stop the recording, close any open streams, mix in/out channels if required </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Always 0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00461">461</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../dc/dcf/func__periodic__hook_8c_source.html#l00513">ast_beep_stop()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l00771">ast_channel_blob_create_from_cache()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00613">ast_channel_monitor()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00617">ast_channel_monitor_set()</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#ga1356cf3d698c9b5d9f2101c1ff4ae243">ast_channel_monitor_stop_type()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01502">ast_channel_topic()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00305">ast_channel_uniqueid()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01068">ast_closestream()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01098">ast_filedelete()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01086">ast_fileexists()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01103">ast_filerename()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l00829">ast_safe_system()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l00454">execute()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l04244">ast_channel_monitor::filename_base</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00102">format</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l04247">ast_channel_monitor::format</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00442">get_soxmix_format()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00263">LOCK_IF_NEEDED</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_builtin_getvar_helper()</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_builtin_setvar_helper()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01511">stasis_publish()</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00268">UNLOCK_IF_NEEDED</a>, and <a class="el" href="../../db/d9b/format__ogg__vorbis_8c_source.html#l00203">write_stream()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/monitor_8h_source.html#l00039">__stub__ast_monitor_start()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00305">ast_monitor_start()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00861">stop_monitor_action()</a>, and <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00796">stop_monitor_exec()</a>.</p>
<div class="fragment"><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;{</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;   <span class="keywordtype">int</span> delfiles = 0;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, <a class="code" href="../../d8/d9e/structmessage.html">message</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;   <a class="code" href="../../d2/d1b/res__monitor_8c.html#a020604393fec8dbcab1897c13bdd44e7">LOCK_IF_NEEDED</a>(chan, need_lock);</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)) {</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>, <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(1024), <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a71e6f392234194bc5a27b42b90f9df56">read_stream</a>) {</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;         <a class="code" href="../../d2/d4d/file_8h.html#ab53bd2c3c55d509790c7f7620aac6373">ast_closestream</a>(<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a71e6f392234194bc5a27b42b90f9df56">read_stream</a>);</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      }</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../db/d9b/format__ogg__vorbis_8c.html#aa07752a32d3d4fa9eac743a1d7daf16f">write_stream</a>) {</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;         <a class="code" href="../../d2/d4d/file_8h.html#ab53bd2c3c55d509790c7f7620aac6373">ast_closestream</a>(<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../db/d9b/format__ogg__vorbis_8c.html#aa07752a32d3d4fa9eac743a1d7daf16f">write_stream</a>);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      }</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a> &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a230e3f2ccbf0c5b0701d5f9709eb9f29">filename_changed</a> &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a34151f04e7ec5b41736e78fd49685a39">filename_base</a>)) {</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d2/d4d/file_8h.html#ab9b8ab8e5ee34c9b4da25779255cafde">ast_fileexists</a>(<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a9afddcb68bd1c417f69fa2114dba93b4">read_filename</a>,<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) &gt; 0) {</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>, 0, <span class="stringliteral">&quot;%s-in&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a34151f04e7ec5b41736e78fd49685a39">filename_base</a>);</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d2/d4d/file_8h.html#ab9b8ab8e5ee34c9b4da25779255cafde">ast_fileexists</a>(<a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) &gt; 0) {</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;               <a class="code" href="../../d2/d4d/file_8h.html#adb15d6efecc1a13b8835bee6d3562ddb">ast_filedelete</a>(<a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            }</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#a57ea6065cde7fb5258c1f6a4595643ba">ast_filerename</a>(<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a9afddcb68bd1c417f69fa2114dba93b4">read_filename</a>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>), <a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>);</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;File %s not found\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a9afddcb68bd1c417f69fa2114dba93b4">read_filename</a>);</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;         }</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a> &amp;&amp; <a class="code" href="../../d2/d4d/file_8h.html#ab9b8ab8e5ee34c9b4da25779255cafde">ast_fileexists</a>(<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#aa207af3400ab4d9b71c64de0c1333311">write_filename</a>,<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) &gt; 0) {</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>, 0, <span class="stringliteral">&quot;%s-out&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a34151f04e7ec5b41736e78fd49685a39">filename_base</a>);</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d2/d4d/file_8h.html#ab9b8ab8e5ee34c9b4da25779255cafde">ast_fileexists</a>(<a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) &gt; 0) {</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;               <a class="code" href="../../d2/d4d/file_8h.html#adb15d6efecc1a13b8835bee6d3562ddb">ast_filedelete</a>(<a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;            }</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#a57ea6065cde7fb5258c1f6a4595643ba">ast_filerename</a>(<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#aa207af3400ab4d9b71c64de0c1333311">write_filename</a>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>), <a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>);</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;File %s not found\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#aa207af3400ab4d9b71c64de0c1333311">write_filename</a>);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;         }</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      }</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a> &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a7b71d4ef14ee85d131a71845d8c38926">joinfiles</a> &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a34151f04e7ec5b41736e78fd49685a39">filename_base</a>)) {</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;         <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a> = !strcasecmp(<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;format,<span class="stringliteral">&quot;wav49&quot;</span>) ? <span class="stringliteral">&quot;WAV&quot;</span> : <a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a5407a229a5e1a319d75fb29542c83eae">format</a>;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;         <span class="keywordtype">char</span> *fname_base = <a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#a34151f04e7ec5b41736e78fd49685a39">filename_base</a>;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;         <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dc/d1d/func__odbc_8c.html#a16177a4992e1094843ceea2fc0d58cb0">execute</a>, *execute_args;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;         <span class="comment">/* at this point, fname_base really is the full path */</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;         <span class="comment">/* Set the execute application */</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;         execute = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;MONITOR_EXEC&quot;</span>);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(execute)) {</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="preprocessor">#ifdef HAVE_SOXMIX</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            execute = <span class="stringliteral">&quot;nice -n 19 soxmix&quot;</span>;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;            execute = <span class="stringliteral">&quot;nice -n 19 sox -m&quot;</span>;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            format = <a class="code" href="../../d2/d1b/res__monitor_8c.html#a9219f8f5ad92fa99bd39d2000a0601eb">get_soxmix_format</a>(format);</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            delfiles = 1;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;         }</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;         execute_args = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;MONITOR_EXEC_ARGS&quot;</span>);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(execute_args)) {</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;            execute_args = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;         }</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>, 0, delfiles ? <span class="stringliteral">&quot;( &quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>, 0, <span class="stringliteral">&quot;%s \&quot;%s-in.%s\&quot; \&quot;%s-out.%s\&quot; \&quot;%s.%s\&quot; %s &amp;&quot;</span>,</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;            execute, fname_base, format, fname_base, format, fname_base, format,execute_args);</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;         <span class="keywordflow">if</span> (delfiles) {</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            <span class="comment">/* remove legs when done mixing */</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>, 0, <span class="stringliteral">&quot;&amp; rm -f \&quot;%s-\&quot;* ) &amp;&quot;</span>, fname_base);</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;         }</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1,<span class="stringliteral">&quot;monitor executing %s\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>));</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a9fb5cf0385848033ee3e98625e5f9784">ast_safe_system</a>(<a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>)) == -1)</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Execute of %s failed.\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>));</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      }</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#afd84e03fca29f3045c3df07f76fd119f">beep_id</a>)) {</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;         <a class="code" href="../../dc/dcf/func__periodic__hook_8c.html#adfab28e53497c1ed062d197e361b4599">ast_beep_stop</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;<a class="code" href="../../d9/daf/structast__channel__monitor.html#afd84e03fca29f3045c3df07f76fd119f">beep_id</a>);</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;      }</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)-&gt;format);</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan));</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aa52fe100a9952fc355bfa6a0582d87dd">ast_channel_monitor_set</a>(chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;      <a class="code" href="../../d8/d9e/structmessage.html">message</a> = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gafe8b123e0c124e44c3bff016591d3f9c">ast_channel_blob_create_from_cache</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(chan),</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga1356cf3d698c9b5d9f2101c1ff4ae243">ast_channel_monitor_stop_type</a>(),</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;            <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d8/d9e/structmessage.html">message</a>) {</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;         <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../d5/d7b/channel_8h.html#afdeaf9abb1aecc715313a4f62c1cf9c9">ast_channel_topic</a>(chan), <a class="code" href="../../d8/d9e/structmessage.html">message</a>);</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      }</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;MONITORED&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;   }</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;AUTO_MONITOR&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;   <a class="code" href="../../d2/d1b/res__monitor_8c.html#a4874e91ddd324a90ff297fb0d401662d">UNLOCK_IF_NEEDED</a>(chan, need_lock);</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;}</div><div class="ttc" id="structast__channel__monitor_html_a9afddcb68bd1c417f69fa2114dba93b4"><div class="ttname"><a href="../../d9/daf/structast__channel__monitor.html#a9afddcb68bd1c417f69fa2114dba93b4">ast_channel_monitor::read_filename</a></div><div class="ttdeci">char read_filename[FILENAME_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04242">channel.h:4242</a></div></div>
<div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="structast__channel__monitor_html_a230e3f2ccbf0c5b0701d5f9709eb9f29"><div class="ttname"><a href="../../d9/daf/structast__channel__monitor.html#a230e3f2ccbf0c5b0701d5f9709eb9f29">ast_channel_monitor::filename_changed</a></div><div class="ttdeci">int filename_changed</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04246">channel.h:4246</a></div></div>
<div class="ttc" id="func__odbc_8c_html_a16177a4992e1094843ceea2fc0d58cb0"><div class="ttname"><a href="../../dc/d1d/func__odbc_8c.html#a16177a4992e1094843ceea2fc0d58cb0">execute</a></div><div class="ttdeci">static SQLHSTMT execute(struct odbc_obj *obj, void *data, int silent)</div><div class="ttdoc">Common execution function for SQL queries. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/func__odbc_8c_source.html#l00454">func_odbc.c:454</a></div></div>
<div class="ttc" id="res__monitor_8c_html_a4874e91ddd324a90ff297fb0d401662d"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#a4874e91ddd324a90ff297fb0d401662d">UNLOCK_IF_NEEDED</a></div><div class="ttdeci">#define UNLOCK_IF_NEEDED(lock, needed)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00268">res_monitor.c:268</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="structast__channel__monitor_html_a34151f04e7ec5b41736e78fd49685a39"><div class="ttname"><a href="../../d9/daf/structast__channel__monitor.html#a34151f04e7ec5b41736e78fd49685a39">ast_channel_monitor::filename_base</a></div><div class="ttdeci">char filename_base[FILENAME_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04244">channel.h:4244</a></div></div>
<div class="ttc" id="format__ogg__vorbis_8c_html_aa07752a32d3d4fa9eac743a1d7daf16f"><div class="ttname"><a href="../../db/d9b/format__ogg__vorbis_8c.html#aa07752a32d3d4fa9eac743a1d7daf16f">write_stream</a></div><div class="ttdeci">static void write_stream(struct ogg_vorbis_desc *s, FILE *f)</div><div class="ttdoc">Write out any pending encoded data. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d9b/format__ogg__vorbis_8c_source.html#l00203">format_ogg_vorbis.c:203</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="func__periodic__hook_8c_html_adfab28e53497c1ed062d197e361b4599"><div class="ttname"><a href="../../dc/dcf/func__periodic__hook_8c.html#adfab28e53497c1ed062d197e361b4599">ast_beep_stop</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_beep_stop(struct ast_channel *chan, const char *beep_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcf/func__periodic__hook_8c_source.html#l00513">func_periodic_hook.c:513</a></div></div>
<div class="ttc" id="res__monitor_8c_html_a020604393fec8dbcab1897c13bdd44e7"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#a020604393fec8dbcab1897c13bdd44e7">LOCK_IF_NEEDED</a></div><div class="ttdeci">#define LOCK_IF_NEEDED(lock, needed)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00263">res_monitor.c:263</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="file_8h_html_adb15d6efecc1a13b8835bee6d3562ddb"><div class="ttname"><a href="../../d2/d4d/file_8h.html#adb15d6efecc1a13b8835bee6d3562ddb">ast_filedelete</a></div><div class="ttdeci">int ast_filedelete(const char *filename, const char *fmt)</div><div class="ttdoc">Deletes a file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01098">file.c:1098</a></div></div>
<div class="ttc" id="structast__channel__monitor_html_aa207af3400ab4d9b71c64de0c1333311"><div class="ttname"><a href="../../d9/daf/structast__channel__monitor.html#aa207af3400ab4d9b71c64de0c1333311">ast_channel_monitor::write_filename</a></div><div class="ttdeci">char write_filename[FILENAME_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04243">channel.h:4243</a></div></div>
<div class="ttc" id="res__monitor_8c_html_a9219f8f5ad92fa99bd39d2000a0601eb"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#a9219f8f5ad92fa99bd39d2000a0601eb">get_soxmix_format</a></div><div class="ttdeci">static const char * get_soxmix_format(const char *format)</div><div class="ttdoc">Get audio format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00442">res_monitor.c:442</a></div></div>
<div class="ttc" id="pbx_8h_html_a98c5425b90ec7c5e136a40f529170b1b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a></div><div class="ttdeci">const char * pbx_builtin_getvar_helper(struct ast_channel *chan, const char *name)</div><div class="ttdoc">Return a pointer to the value of the corresponding channel variable. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_variables.c:1000</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga1356cf3d698c9b5d9f2101c1ff4ae243"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga1356cf3d698c9b5d9f2101c1ff4ae243">ast_channel_monitor_stop_type</a></div><div class="ttdeci">struct stasis_message_type * ast_channel_monitor_stop_type(void)</div><div class="ttdoc">Message type for stopping monitor on a channel. </div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="channel_8h_html_afdeaf9abb1aecc715313a4f62c1cf9c9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#afdeaf9abb1aecc715313a4f62c1cf9c9">ast_channel_topic</a></div><div class="ttdeci">struct stasis_topic * ast_channel_topic(struct ast_channel *chan)</div><div class="ttdoc">A topic which publishes the events for a particular channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01502">channel_internal_api.c:1502</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a9fb5cf0385848033ee3e98625e5f9784"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a9fb5cf0385848033ee3e98625e5f9784">ast_safe_system</a></div><div class="ttdeci">int ast_safe_system(const char *s)</div><div class="ttdoc">Safely spawn an OS shell command while closing file descriptors. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l00829">extconf.c:829</a></div></div>
<div class="ttc" id="structast__channel__monitor_html_a7b71d4ef14ee85d131a71845d8c38926"><div class="ttname"><a href="../../d9/daf/structast__channel__monitor.html#a7b71d4ef14ee85d131a71845d8c38926">ast_channel_monitor::joinfiles</a></div><div class="ttdeci">int joinfiles</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04248">channel.h:4248</a></div></div>
<div class="ttc" id="structast__channel__monitor_html_a71e6f392234194bc5a27b42b90f9df56"><div class="ttname"><a href="../../d9/daf/structast__channel__monitor.html#a71e6f392234194bc5a27b42b90f9df56">ast_channel_monitor::read_stream</a></div><div class="ttdeci">struct ast_filestream * read_stream</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04240">channel.h:4240</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="file_8h_html_ab53bd2c3c55d509790c7f7620aac6373"><div class="ttname"><a href="../../d2/d4d/file_8h.html#ab53bd2c3c55d509790c7f7620aac6373">ast_closestream</a></div><div class="ttdeci">int ast_closestream(struct ast_filestream *f)</div><div class="ttdoc">Closes a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01068">file.c:1068</a></div></div>
<div class="ttc" id="structast__channel__monitor_html_a5407a229a5e1a319d75fb29542c83eae"><div class="ttname"><a href="../../d9/daf/structast__channel__monitor.html#a5407a229a5e1a319d75fb29542c83eae">ast_channel_monitor::format</a></div><div class="ttdeci">char * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04247">channel.h:4247</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gafe8b123e0c124e44c3bff016591d3f9c"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gafe8b123e0c124e44c3bff016591d3f9c">ast_channel_blob_create_from_cache</a></div><div class="ttdeci">struct stasis_message * ast_channel_blob_create_from_cache(const char *uniqueid, struct stasis_message_type *type, struct ast_json *blob)</div><div class="ttdoc">Create a ast_channel_blob message, pulling channel state from the cache. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00771">stasis_channels.c:771</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="file_8h_html_ab9b8ab8e5ee34c9b4da25779255cafde"><div class="ttname"><a href="../../d2/d4d/file_8h.html#ab9b8ab8e5ee34c9b4da25779255cafde">ast_fileexists</a></div><div class="ttdeci">int ast_fileexists(const char *filename, const char *fmt, const char *preflang)</div><div class="ttdoc">Checks for the existence of a given file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01086">file.c:1086</a></div></div>
<div class="ttc" id="file_8h_html_a57ea6065cde7fb5258c1f6a4595643ba"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a57ea6065cde7fb5258c1f6a4595643ba">ast_filerename</a></div><div class="ttdeci">int ast_filerename(const char *oldname, const char *newname, const char *fmt)</div><div class="ttdoc">Renames a file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01103">file.c:1103</a></div></div>
<div class="ttc" id="channel_8h_html_abdebed775647544929616b09a8487817"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a></div><div class="ttdeci">struct ast_channel_monitor * ast_channel_monitor(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00613">channel_internal_api.c:613</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a98f5e70e98f6dc48e3c5ba316066d540"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a></div><div class="ttdeci">static snd_pcm_format_t format</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00102">chan_alsa.c:102</a></div></div>
<div class="ttc" id="structast__channel__monitor_html_afd84e03fca29f3045c3df07f76fd119f"><div class="ttname"><a href="../../d9/daf/structast__channel__monitor.html#afd84e03fca29f3045c3df07f76fd119f">ast_channel_monitor::beep_id</a></div><div class="ttdeci">char beep_id[64]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04245">channel.h:4245</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
<div class="ttc" id="channel_8h_html_aa52fe100a9952fc355bfa6a0582d87dd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa52fe100a9952fc355bfa6a0582d87dd">ast_channel_monitor_set</a></div><div class="ttdeci">void ast_channel_monitor_set(struct ast_channel *chan, struct ast_channel_monitor *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00617">channel_internal_api.c:617</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9debaded0ac66ccfd7d9b898710fda4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9debaded0ac66ccfd7d9b898710fda4d">&#9670;&nbsp;</a></span>ast_monitor_unpause()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="../../df/d3c/optional__api_8h.html#abe6ec88934f99eb74444f6c4a92353ec">AST_OPTIONAL_API_NAME</a>() ast_monitor_unpause </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unpause monitoring of channel. </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00565">565</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h_source.html#l04234">AST_MONITOR_RUNNING</a>, and <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00282">ast_monitor_set_state()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d60/monitor_8h_source.html#l00059">__stub__ast_monitor_pause()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00938">do_pause_or_unpause()</a>, and <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00577">unpause_monitor_exec()</a>.</p>
<div class="fragment"><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;{</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/d1b/res__monitor_8c.html#ab740a457e68200049b8d7177a3ae96de">ast_monitor_set_state</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a9b57685a45dd0700625ea8ba83a868dface918b901d180f5ea85f8a941fc8cbdb">AST_MONITOR_RUNNING</a>);</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;}</div><div class="ttc" id="res__monitor_8c_html_ab740a457e68200049b8d7177a3ae96de"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#ab740a457e68200049b8d7177a3ae96de">ast_monitor_set_state</a></div><div class="ttdeci">static int ast_monitor_set_state(struct ast_channel *chan, int state)</div><div class="ttdoc">Change state of monitored channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00282">res_monitor.c:282</a></div></div>
<div class="ttc" id="channel_8h_html_a9b57685a45dd0700625ea8ba83a868dface918b901d180f5ea85f8a941fc8cbdb"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9b57685a45dd0700625ea8ba83a868dface918b901d180f5ea85f8a941fc8cbdb">AST_MONITOR_RUNNING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l04234">channel.h:4234</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a029fbfd4ea9cab4ad52f4e7587236eab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a029fbfd4ea9cab4ad52f4e7587236eab">&#9670;&nbsp;</a></span>change_monitor_action()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int change_monitor_action </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Change filename of a monitored channel by manager connection. </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00892">892</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d45/manager_8h_source.html#l00065">AMI_SUCCESS</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01454">ast_channel_get_by_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00590">ast_monitor_change_fname()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03191">astman_send_ack()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00976">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;{</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Channel&quot;</span>);</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *fname = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;File&quot;</span>);</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(name)) {</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No channel specified&quot;</span>);</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../db/d45/manager_8h.html#a15c09363d6bdc7162c154ab2a20ec545">AMI_SUCCESS</a>;</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;   }</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(fname)) {</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No filename specified&quot;</span>);</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../db/d45/manager_8h.html#a15c09363d6bdc7162c154ab2a20ec545">AMI_SUCCESS</a>;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;   }</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;   <span class="keywordflow">if</span> (!(c = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(name))) {</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No such channel&quot;</span>);</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../db/d45/manager_8h.html#a15c09363d6bdc7162c154ab2a20ec545">AMI_SUCCESS</a>;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;   }</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d2/d1b/res__monitor_8c.html#ad09531d45437f893a13433335c81143a">ast_monitor_change_fname</a>(c, fname, 1)) {</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;      c = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(c);</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Could not change monitored filename of channel&quot;</span>);</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../db/d45/manager_8h.html#a15c09363d6bdc7162c154ab2a20ec545">AMI_SUCCESS</a>;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;   }</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;   c = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(c);</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;Changed monitor filename&quot;</span>);</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/d45/manager_8h.html#a15c09363d6bdc7162c154ab2a20ec545">AMI_SUCCESS</a>;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga77315fa8e29950f0c88120501acda0a3"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a></div><div class="ttdeci">void astman_send_ack(struct mansession *s, const struct message *m, char *msg)</div><div class="ttdoc">Send ack in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03191">manager.c:3191</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Get header from mananger transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="res__monitor_8c_html_ad09531d45437f893a13433335c81143a"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#ad09531d45437f893a13433335c81143a">ast_monitor_change_fname</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_monitor_change_fname(struct ast_channel *chan, const char *fname_base, int need_lock)</div><div class="ttdoc">Change monitored filename of channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00590">res_monitor.c:590</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="channel_8h_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
<div class="ttc" id="manager_8h_html_a15c09363d6bdc7162c154ab2a20ec545"><div class="ttname"><a href="../../db/d45/manager_8h.html#a15c09363d6bdc7162c154ab2a20ec545">AMI_SUCCESS</a></div><div class="ttdeci">#define AMI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00065">manager.h:65</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a69743f64651b40a3731b91d6ce1368f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69743f64651b40a3731b91d6ce1368f7">&#9670;&nbsp;</a></span>change_monitor_exec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int change_monitor_exec </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wrapper function. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d2/d1b/res__monitor_8c.html#ad09531d45437f893a13433335c81143a" title="Change monitored filename of channel. ">ast_monitor_change_fname</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00802">802</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00590">ast_monitor_change_fname()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00976">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;{</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/d1b/res__monitor_8c.html#ad09531d45437f893a13433335c81143a">ast_monitor_change_fname</a>(chan, <a class="code" href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>, 1);</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;}</div><div class="ttc" id="structast__channel_html_a8f64897c7ccc5c13f276d1d07c4e7095"><div class="ttname"><a href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">ast_channel::data</a></div><div class="ttdeci">const char * data</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00083">channel_internal_api.c:83</a></div></div>
<div class="ttc" id="res__monitor_8c_html_ad09531d45437f893a13433335c81143a"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#ad09531d45437f893a13433335c81143a">ast_monitor_change_fname</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_monitor_change_fname(struct ast_channel *chan, const char *fname_base, int need_lock)</div><div class="ttdoc">Change monitored filename of channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00590">res_monitor.c:590</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a744f7646ca44b325929fa8d762cd785d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a744f7646ca44b325929fa8d762cd785d">&#9670;&nbsp;</a></span>do_pause_or_unpause()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int do_pause_or_unpause </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>action</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00938">938</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d45/manager_8h_source.html#l00065">AMI_SUCCESS</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01454">ast_channel_get_by_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00559">ast_monitor_pause()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00565">ast_monitor_unpause()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03191">astman_send_ack()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00934">MONITOR_ACTION_PAUSE</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00966">pause_monitor_action()</a>, and <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00971">unpause_monitor_action()</a>.</p>
<div class="fragment"><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;{</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Channel&quot;</span>);</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(name)) {</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No channel specified&quot;</span>);</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../db/d45/manager_8h.html#a15c09363d6bdc7162c154ab2a20ec545">AMI_SUCCESS</a>;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;   }</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;   <span class="keywordflow">if</span> (!(c = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(name))) {</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No such channel&quot;</span>);</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../db/d45/manager_8h.html#a15c09363d6bdc7162c154ab2a20ec545">AMI_SUCCESS</a>;</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;   }</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;   <span class="keywordflow">if</span> (action == <a class="code" href="../../d2/d1b/res__monitor_8c.html#aa0cc1f76c64cb664ad4bdd5175245358a88c5bb35454c285e98f0cd3ef5573d6d">MONITOR_ACTION_PAUSE</a>) {</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;      <a class="code" href="../../d2/d1b/res__monitor_8c.html#a84e010105c76f891782f0d5f0363549b">ast_monitor_pause</a>(c);</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;      <a class="code" href="../../d2/d1b/res__monitor_8c.html#a9debaded0ac66ccfd7d9b898710fda4d">ast_monitor_unpause</a>(c);</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;   }</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;   c = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(c);</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, (action == <a class="code" href="../../d2/d1b/res__monitor_8c.html#aa0cc1f76c64cb664ad4bdd5175245358a88c5bb35454c285e98f0cd3ef5573d6d">MONITOR_ACTION_PAUSE</a> ? <span class="stringliteral">&quot;Paused monitoring of the channel&quot;</span> : <span class="stringliteral">&quot;Unpaused monitoring of the channel&quot;</span>));</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/d45/manager_8h.html#a15c09363d6bdc7162c154ab2a20ec545">AMI_SUCCESS</a>;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga77315fa8e29950f0c88120501acda0a3"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a></div><div class="ttdeci">void astman_send_ack(struct mansession *s, const struct message *m, char *msg)</div><div class="ttdoc">Send ack in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03191">manager.c:3191</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Get header from mananger transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="res__monitor_8c_html_aa0cc1f76c64cb664ad4bdd5175245358a88c5bb35454c285e98f0cd3ef5573d6d"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#aa0cc1f76c64cb664ad4bdd5175245358a88c5bb35454c285e98f0cd3ef5573d6d">MONITOR_ACTION_PAUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00934">res_monitor.c:934</a></div></div>
<div class="ttc" id="res__monitor_8c_html_a9debaded0ac66ccfd7d9b898710fda4d"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#a9debaded0ac66ccfd7d9b898710fda4d">ast_monitor_unpause</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_monitor_unpause(struct ast_channel *chan)</div><div class="ttdoc">Unpause monitoring of channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00565">res_monitor.c:565</a></div></div>
<div class="ttc" id="res__monitor_8c_html_a84e010105c76f891782f0d5f0363549b"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#a84e010105c76f891782f0d5f0363549b">ast_monitor_pause</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_monitor_pause(struct ast_channel *chan)</div><div class="ttdoc">Pause monitoring of channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00559">res_monitor.c:559</a></div></div>
<div class="ttc" id="channel_8h_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
<div class="ttc" id="manager_8h_html_a15c09363d6bdc7162c154ab2a20ec545"><div class="ttname"><a href="../../db/d45/manager_8h.html#a15c09363d6bdc7162c154ab2a20ec545">AMI_SUCCESS</a></div><div class="ttdeci">#define AMI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00065">manager.h:65</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9219f8f5ad92fa99bd39d2000a0601eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9219f8f5ad92fa99bd39d2000a0601eb">&#9670;&nbsp;</a></span>get_soxmix_format()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char* get_soxmix_format </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get audio format. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">format</td><td>recording format. The file format extensions that Asterisk uses are not all the same as that which soxmix expects. This function ensures that the format used as the extension on the filename is something soxmix will understand. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00442">442</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00102">format</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00461">ast_monitor_stop()</a>.</p>
<div class="fragment"><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;{</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *res = <a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>,<span class="stringliteral">&quot;ulaw&quot;</span>))</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      res = <span class="stringliteral">&quot;ul&quot;</span>;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>,<span class="stringliteral">&quot;alaw&quot;</span>))</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      res = <span class="stringliteral">&quot;al&quot;</span>;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;}</div><div class="ttc" id="chan__alsa_8c_html_a98f5e70e98f6dc48e3c5ba316066d540"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a></div><div class="ttdeci">static snd_pcm_format_t format</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00102">chan_alsa.c:102</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00976">976</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d45/manager_8h_source.html#l00186">ast_manager_register_xml</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00626">ast_register_application_xml</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00892">change_monitor_action()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00802">change_monitor_exec()</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00072">EVENT_FLAG_CALL</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00966">pause_monitor_action()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00571">pause_monitor_exec()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00808">start_monitor_action()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00693">start_monitor_exec()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00861">stop_monitor_action()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00796">stop_monitor_exec()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00971">unpause_monitor_action()</a>, and <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00577">unpause_monitor_exec()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00992">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;{</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#afba4eb7a910b10969041ae4cd488729d">ast_register_application_xml</a>(<span class="stringliteral">&quot;Monitor&quot;</span>, <a class="code" href="../../d2/d1b/res__monitor_8c.html#ac2d0151b8abd7abaa7e5435514b22c9f">start_monitor_exec</a>);</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#afba4eb7a910b10969041ae4cd488729d">ast_register_application_xml</a>(<span class="stringliteral">&quot;StopMonitor&quot;</span>, <a class="code" href="../../d2/d1b/res__monitor_8c.html#a15a6b6fcde2e361fe1f8633871cb9c8e">stop_monitor_exec</a>);</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#afba4eb7a910b10969041ae4cd488729d">ast_register_application_xml</a>(<span class="stringliteral">&quot;ChangeMonitor&quot;</span>, <a class="code" href="../../d2/d1b/res__monitor_8c.html#a69743f64651b40a3731b91d6ce1368f7">change_monitor_exec</a>);</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#afba4eb7a910b10969041ae4cd488729d">ast_register_application_xml</a>(<span class="stringliteral">&quot;PauseMonitor&quot;</span>, <a class="code" href="../../d2/d1b/res__monitor_8c.html#a840a02904f77a9c1b23d313d9593804f">pause_monitor_exec</a>);</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#afba4eb7a910b10969041ae4cd488729d">ast_register_application_xml</a>(<span class="stringliteral">&quot;UnpauseMonitor&quot;</span>, <a class="code" href="../../d2/d1b/res__monitor_8c.html#aac5b750f558ee5d9d058212717a57cda">unpause_monitor_exec</a>);</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;   <a class="code" href="../../db/d45/manager_8h.html#a5b63b8a8faede2d852e071e1f7b31c11">ast_manager_register_xml</a>(<span class="stringliteral">&quot;Monitor&quot;</span>, <a class="code" href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a>, <a class="code" href="../../d2/d1b/res__monitor_8c.html#a93b32a4770deab288eb2d9b76a11fe66">start_monitor_action</a>);</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;   <a class="code" href="../../db/d45/manager_8h.html#a5b63b8a8faede2d852e071e1f7b31c11">ast_manager_register_xml</a>(<span class="stringliteral">&quot;StopMonitor&quot;</span>, <a class="code" href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a>, <a class="code" href="../../d2/d1b/res__monitor_8c.html#a93f5d0b567285f957c40ac8f63bef4c0">stop_monitor_action</a>);</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;   <a class="code" href="../../db/d45/manager_8h.html#a5b63b8a8faede2d852e071e1f7b31c11">ast_manager_register_xml</a>(<span class="stringliteral">&quot;ChangeMonitor&quot;</span>, <a class="code" href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a>, <a class="code" href="../../d2/d1b/res__monitor_8c.html#a029fbfd4ea9cab4ad52f4e7587236eab">change_monitor_action</a>);</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;   <a class="code" href="../../db/d45/manager_8h.html#a5b63b8a8faede2d852e071e1f7b31c11">ast_manager_register_xml</a>(<span class="stringliteral">&quot;PauseMonitor&quot;</span>, <a class="code" href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a>, <a class="code" href="../../d2/d1b/res__monitor_8c.html#a4cf6b037bcd2c55262b4655216e0166c">pause_monitor_action</a>);</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;   <a class="code" href="../../db/d45/manager_8h.html#a5b63b8a8faede2d852e071e1f7b31c11">ast_manager_register_xml</a>(<span class="stringliteral">&quot;UnpauseMonitor&quot;</span>, <a class="code" href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a>, <a class="code" href="../../d2/d1b/res__monitor_8c.html#af3f7ca5ebf924af21dd41bd27c139f8e">unpause_monitor_action</a>);</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;}</div><div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="res__monitor_8c_html_aac5b750f558ee5d9d058212717a57cda"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#aac5b750f558ee5d9d058212717a57cda">unpause_monitor_exec</a></div><div class="ttdeci">static int unpause_monitor_exec(struct ast_channel *chan, const char *data)</div><div class="ttdoc">Wrapper for ast_monitor_unpause. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00577">res_monitor.c:577</a></div></div>
<div class="ttc" id="res__monitor_8c_html_a69743f64651b40a3731b91d6ce1368f7"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#a69743f64651b40a3731b91d6ce1368f7">change_monitor_exec</a></div><div class="ttdeci">static int change_monitor_exec(struct ast_channel *chan, const char *data)</div><div class="ttdoc">Wrapper function. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00802">res_monitor.c:802</a></div></div>
<div class="ttc" id="res__monitor_8c_html_a93b32a4770deab288eb2d9b76a11fe66"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#a93b32a4770deab288eb2d9b76a11fe66">start_monitor_action</a></div><div class="ttdeci">static int start_monitor_action(struct mansession *s, const struct message *m)</div><div class="ttdoc">Start monitoring a channel by manager connection. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00808">res_monitor.c:808</a></div></div>
<div class="ttc" id="res__monitor_8c_html_a4cf6b037bcd2c55262b4655216e0166c"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#a4cf6b037bcd2c55262b4655216e0166c">pause_monitor_action</a></div><div class="ttdeci">static int pause_monitor_action(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00966">res_monitor.c:966</a></div></div>
<div class="ttc" id="manager_8h_html_ab5db3cc603d7e798d61cb4cd94fbb4e2"><div class="ttname"><a href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a></div><div class="ttdeci">#define EVENT_FLAG_CALL</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00072">manager.h:72</a></div></div>
<div class="ttc" id="res__monitor_8c_html_af3f7ca5ebf924af21dd41bd27c139f8e"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#af3f7ca5ebf924af21dd41bd27c139f8e">unpause_monitor_action</a></div><div class="ttdeci">static int unpause_monitor_action(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00971">res_monitor.c:971</a></div></div>
<div class="ttc" id="res__monitor_8c_html_a93f5d0b567285f957c40ac8f63bef4c0"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#a93f5d0b567285f957c40ac8f63bef4c0">stop_monitor_action</a></div><div class="ttdeci">static int stop_monitor_action(struct mansession *s, const struct message *m)</div><div class="ttdoc">Stop monitoring a channel by manager connection. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00861">res_monitor.c:861</a></div></div>
<div class="ttc" id="res__monitor_8c_html_a029fbfd4ea9cab4ad52f4e7587236eab"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#a029fbfd4ea9cab4ad52f4e7587236eab">change_monitor_action</a></div><div class="ttdeci">static int change_monitor_action(struct mansession *s, const struct message *m)</div><div class="ttdoc">Change filename of a monitored channel by manager connection. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00892">res_monitor.c:892</a></div></div>
<div class="ttc" id="res__monitor_8c_html_a15a6b6fcde2e361fe1f8633871cb9c8e"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#a15a6b6fcde2e361fe1f8633871cb9c8e">stop_monitor_exec</a></div><div class="ttdeci">static int stop_monitor_exec(struct ast_channel *chan, const char *data)</div><div class="ttdoc">Wrapper function. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00796">res_monitor.c:796</a></div></div>
<div class="ttc" id="manager_8h_html_a5b63b8a8faede2d852e071e1f7b31c11"><div class="ttname"><a href="../../db/d45/manager_8h.html#a5b63b8a8faede2d852e071e1f7b31c11">ast_manager_register_xml</a></div><div class="ttdeci">#define ast_manager_register_xml(action, authority, func)</div><div class="ttdoc">Register a manager callback using XML documentation to describe the manager. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00186">manager.h:186</a></div></div>
<div class="ttc" id="res__monitor_8c_html_ac2d0151b8abd7abaa7e5435514b22c9f"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#ac2d0151b8abd7abaa7e5435514b22c9f">start_monitor_exec</a></div><div class="ttdeci">static int start_monitor_exec(struct ast_channel *chan, const char *data)</div><div class="ttdoc">Start monitor. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00693">res_monitor.c:693</a></div></div>
<div class="ttc" id="res__monitor_8c_html_a840a02904f77a9c1b23d313d9593804f"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#a840a02904f77a9c1b23d313d9593804f">pause_monitor_exec</a></div><div class="ttdeci">static int pause_monitor_exec(struct ast_channel *chan, const char *data)</div><div class="ttdoc">Wrapper for ast_monitor_pause. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00571">res_monitor.c:571</a></div></div>
<div class="ttc" id="module_8h_html_afba4eb7a910b10969041ae4cd488729d"><div class="ttname"><a href="../../d5/d16/module_8h.html#afba4eb7a910b10969041ae4cd488729d">ast_register_application_xml</a></div><div class="ttdeci">#define ast_register_application_xml(app, execute)</div><div class="ttdoc">Register an application using XML documentation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00626">module.h:626</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4cf6b037bcd2c55262b4655216e0166c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cf6b037bcd2c55262b4655216e0166c">&#9670;&nbsp;</a></span>pause_monitor_action()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int pause_monitor_action </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00966">966</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00938">do_pause_or_unpause()</a>, and <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00934">MONITOR_ACTION_PAUSE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00976">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;{</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/d1b/res__monitor_8c.html#a744f7646ca44b325929fa8d762cd785d">do_pause_or_unpause</a>(s, m, <a class="code" href="../../d2/d1b/res__monitor_8c.html#aa0cc1f76c64cb664ad4bdd5175245358a88c5bb35454c285e98f0cd3ef5573d6d">MONITOR_ACTION_PAUSE</a>);</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;}</div><div class="ttc" id="res__monitor_8c_html_a744f7646ca44b325929fa8d762cd785d"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#a744f7646ca44b325929fa8d762cd785d">do_pause_or_unpause</a></div><div class="ttdeci">static int do_pause_or_unpause(struct mansession *s, const struct message *m, int action)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00938">res_monitor.c:938</a></div></div>
<div class="ttc" id="res__monitor_8c_html_aa0cc1f76c64cb664ad4bdd5175245358a88c5bb35454c285e98f0cd3ef5573d6d"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#aa0cc1f76c64cb664ad4bdd5175245358a88c5bb35454c285e98f0cd3ef5573d6d">MONITOR_ACTION_PAUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00934">res_monitor.c:934</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a840a02904f77a9c1b23d313d9593804f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a840a02904f77a9c1b23d313d9593804f">&#9670;&nbsp;</a></span>pause_monitor_exec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int pause_monitor_exec </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wrapper for ast_monitor_pause. </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00571">571</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00559">ast_monitor_pause()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00976">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;{</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/d1b/res__monitor_8c.html#a84e010105c76f891782f0d5f0363549b">ast_monitor_pause</a>(chan);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;}</div><div class="ttc" id="res__monitor_8c_html_a84e010105c76f891782f0d5f0363549b"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#a84e010105c76f891782f0d5f0363549b">ast_monitor_pause</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_monitor_pause(struct ast_channel *chan)</div><div class="ttdoc">Pause monitoring of channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00559">res_monitor.c:559</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a93b32a4770deab288eb2d9b76a11fe66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93b32a4770deab288eb2d9b76a11fe66">&#9670;&nbsp;</a></span>start_monitor_action()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int start_monitor_action </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Start monitoring a channel by manager connection. </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00808">808</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d45/manager_8h_source.html#l00065">AMI_SUCCESS</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01454">ast_channel_get_by_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00590">ast_monitor_change_fname()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00926">ast_monitor_setjoinfiles()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00305">ast_monitor_start()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01951">ast_true()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03191">astman_send_ack()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00049">d</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00102">format</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/monitor_8h_source.html#l00030">X_REC_IN</a>, and <a class="el" href="../../d5/d60/monitor_8h_source.html#l00031">X_REC_OUT</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00976">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;{</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Channel&quot;</span>);</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *fname = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;File&quot;</span>);</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Format&quot;</span>);</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *mix = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Mix&quot;</span>);</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a156f09c32102fa036620ad75c3ee4fbf">d</a>;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(name)) {</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No channel specified&quot;</span>);</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../db/d45/manager_8h.html#a15c09363d6bdc7162c154ab2a20ec545">AMI_SUCCESS</a>;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;   }</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;   <span class="keywordflow">if</span> (!(c = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(name))) {</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No such channel&quot;</span>);</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../db/d45/manager_8h.html#a15c09363d6bdc7162c154ab2a20ec545">AMI_SUCCESS</a>;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;   }</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(fname)) {</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      <span class="comment">/* No filename specified, default to the channel name. */</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(c);</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;      fname = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(c));</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(c);</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      <span class="comment">/* Replace all &#39;/&#39; chars from the channel name with &#39;-&#39; chars. */</span></div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      <span class="keywordflow">for</span> (d = (<span class="keywordtype">char</span> *) fname; (d = strchr(d, <span class="charliteral">&#39;/&#39;</span>)); ) {</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;         *d = <span class="charliteral">&#39;-&#39;</span>;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      }</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;   }</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d2/d1b/res__monitor_8c.html#acbcd8e50de0a8867d7a843c2b6915e0d">ast_monitor_start</a>(c, format, fname, 1, <a class="code" href="../../d5/d60/monitor_8h.html#a95b90f61870300ea984afae5123dd44f">X_REC_IN</a> | <a class="code" href="../../d5/d60/monitor_8h.html#ac03869f26afacb6d45355d401ced19d8">X_REC_OUT</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d2/d1b/res__monitor_8c.html#ad09531d45437f893a13433335c81143a">ast_monitor_change_fname</a>(c, fname, 1)) {</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Could not start monitoring channel&quot;</span>);</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;         c = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(c);</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../db/d45/manager_8h.html#a15c09363d6bdc7162c154ab2a20ec545">AMI_SUCCESS</a>;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      }</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;   }</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(mix)) {</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(c);</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;      <a class="code" href="../../d2/d1b/res__monitor_8c.html#a24009cd78ef05c71b550254624eb6c13">ast_monitor_setjoinfiles</a>(c, 1);</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(c);</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;   }</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;   c = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(c);</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;Started monitoring channel&quot;</span>);</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/d45/manager_8h.html#a15c09363d6bdc7162c154ab2a20ec545">AMI_SUCCESS</a>;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="monitor_8h_html_a95b90f61870300ea984afae5123dd44f"><div class="ttname"><a href="../../d5/d60/monitor_8h.html#a95b90f61870300ea984afae5123dd44f">X_REC_IN</a></div><div class="ttdeci">#define X_REC_IN</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/monitor_8h_source.html#l00030">monitor.h:30</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a156f09c32102fa036620ad75c3ee4fbf"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a156f09c32102fa036620ad75c3ee4fbf">d</a></div><div class="ttdeci">static struct test_val d</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00049">test_linkedlists.c:49</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga77315fa8e29950f0c88120501acda0a3"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a></div><div class="ttdeci">void astman_send_ack(struct mansession *s, const struct message *m, char *msg)</div><div class="ttdoc">Send ack in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03191">manager.c:3191</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="monitor_8h_html_ac03869f26afacb6d45355d401ced19d8"><div class="ttname"><a href="../../d5/d60/monitor_8h.html#ac03869f26afacb6d45355d401ced19d8">X_REC_OUT</a></div><div class="ttdeci">#define X_REC_OUT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/monitor_8h_source.html#l00031">monitor.h:31</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Get header from mananger transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="res__monitor_8c_html_acbcd8e50de0a8867d7a843c2b6915e0d"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#acbcd8e50de0a8867d7a843c2b6915e0d">ast_monitor_start</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_monitor_start(struct ast_channel *chan, const char *format_spec, const char *fname_base, int need_lock, int stream_action, const char *beep_id)</div><div class="ttdoc">Start monitoring a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00305">res_monitor.c:305</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="strings_8h_html_a387a69b3871ca31061566a73f45d20f4"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a></div><div class="ttdeci">int attribute_pure ast_true(const char *val)</div><div class="ttdoc">Make sure something is true. Determine if a string containing a boolean value is &quot;true&quot;. This function checks to see whether a string passed to it is an indication of an &quot;true&quot; value. It checks to see if the string is &quot;yes&quot;, &quot;true&quot;, &quot;y&quot;, &quot;t&quot;, &quot;on&quot; or &quot;1&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01951">main/utils.c:1951</a></div></div>
<div class="ttc" id="res__monitor_8c_html_ad09531d45437f893a13433335c81143a"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#ad09531d45437f893a13433335c81143a">ast_monitor_change_fname</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_monitor_change_fname(struct ast_channel *chan, const char *fname_base, int need_lock)</div><div class="ttdoc">Change monitored filename of channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00590">res_monitor.c:590</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="res__monitor_8c_html_a24009cd78ef05c71b550254624eb6c13"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#a24009cd78ef05c71b550254624eb6c13">ast_monitor_setjoinfiles</a></div><div class="ttdeci">void AST_OPTIONAL_API_NAME() ast_monitor_setjoinfiles(struct ast_channel *chan, int turnon)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00926">res_monitor.c:926</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channel_8h_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a98f5e70e98f6dc48e3c5ba316066d540"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a></div><div class="ttdeci">static snd_pcm_format_t format</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00102">chan_alsa.c:102</a></div></div>
<div class="ttc" id="manager_8h_html_a15c09363d6bdc7162c154ab2a20ec545"><div class="ttname"><a href="../../db/d45/manager_8h.html#a15c09363d6bdc7162c154ab2a20ec545">AMI_SUCCESS</a></div><div class="ttdeci">#define AMI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00065">manager.h:65</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac2d0151b8abd7abaa7e5435514b22c9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2d0151b8abd7abaa7e5435514b22c9f">&#9670;&nbsp;</a></span>start_monitor_exec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int start_monitor_exec </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Start monitor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td></td></tr>
    <tr><td class="paramname">data</td><td>arguments passed fname|options </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on failure. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00693">693</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/dde/test__func__file_8c_source.html#l00046">args</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">AST_APP_ARG</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02906">ast_app_parse_options()</a>, <a class="el" href="../../dc/dcf/func__periodic__hook_8c_source.html#l00497">ast_beep_start()</a>, <a class="el" href="../../dc/df2/cdr_8c_source.html#l03477">ast_cdr_setuserfield()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">AST_DECLARE_APP_ARGS</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00590">ast_monitor_change_fname()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00926">ast_monitor_setjoinfiles()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00305">ast_monitor_start()</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">AST_STANDARD_APP_ARGS</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00102">format</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00670">MON_FLAG_BEEP</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00666">MON_FLAG_BRIDGED</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00668">MON_FLAG_DROP_IN</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00669">MON_FLAG_DROP_OUT</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00667">MON_FLAG_MIX</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00684">monitor_opts</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00675">OPT_ARG_ARRAY_SIZE</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00674">OPT_ARG_BEEP_INTERVAL</a>, <a class="el" href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">options</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">parse()</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_builtin_setvar_helper()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, <a class="el" href="../../d5/d60/monitor_8h_source.html#l00032">X_JOIN</a>, <a class="el" href="../../d5/d60/monitor_8h_source.html#l00030">X_REC_IN</a>, and <a class="el" href="../../d5/d60/monitor_8h_source.html#l00031">X_REC_OUT</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00976">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;{</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;   <span class="keywordtype">char</span> *arg;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;   <span class="keywordtype">char</span> *delay;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;   <span class="keywordtype">char</span> *urlprefix = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[256];</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;   <span class="keywordtype">int</span> stream_action = <a class="code" href="../../d5/d60/monitor_8h.html#a95b90f61870300ea984afae5123dd44f">X_REC_IN</a> | <a class="code" href="../../d5/d60/monitor_8h.html#ac03869f26afacb6d45355d401ced19d8">X_REC_OUT</a>;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;   <span class="keywordtype">int</span> joinfiles = 0;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a>;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> <a class="code" href="../../dc/dac/structast__flags.html#ac92588540e8c1d014a08cd8a45462b19">flags</a> = { 0 };</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;   <span class="keywordtype">char</span> *opts[<a class="code" href="../../d2/d1b/res__monitor_8c.html#aa684652a3ad226861d3cd9c8bee090ebaec7326f60e7edad15d96ff935e5616d6">OPT_ARG_ARRAY_SIZE</a>] = { <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, };</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;   <span class="keywordtype">char</span> beep_id[64] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>,</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>);</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(fname_base);</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(options);</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;   );</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;   <span class="comment">/* Parse arguments. */</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(data)) {</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Monitor requires an argument\n&quot;</span>);</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;   }</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;   parse = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(data);</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, parse);</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.options)) {</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#af40039f1c49c16d0f6fa33fe9c43a0cb">ast_app_parse_options</a>(<a class="code" href="../../d2/d1b/res__monitor_8c.html#a5384ac888d06ece0609e5649d9dc5101">monitor_opts</a>, &amp;flags, opts, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.options);</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;flags, <a class="code" href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a554ecb2b56be996cb717a7a3e91db286">MON_FLAG_MIX</a>)) {</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;         stream_action |= <a class="code" href="../../d5/d60/monitor_8h.html#ac938418713970abe50535bcd17697dbd">X_JOIN</a>;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      }</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;flags, <a class="code" href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a5d9c50b7bbda1d22ab8f3163498de7a6">MON_FLAG_DROP_IN</a>)) {</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;         stream_action &amp;= ~<a class="code" href="../../d5/d60/monitor_8h.html#a95b90f61870300ea984afae5123dd44f">X_REC_IN</a>;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      }</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;flags, <a class="code" href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a44b448c32c3f69604d983b1abce64247">MON_FLAG_DROP_OUT</a>)) {</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;         stream_action &amp;= ~<a class="code" href="../../d5/d60/monitor_8h.html#ac03869f26afacb6d45355d401ced19d8">X_REC_OUT</a>;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      }</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;flags, <a class="code" href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a8b8b4c2f8697d04b5b7d24d4f85efc30">MON_FLAG_BEEP</a>)) {</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;         <span class="keyword">const</span> <span class="keywordtype">char</span> *interval_str = <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(opts[<a class="code" href="../../d2/d1b/res__monitor_8c.html#aa684652a3ad226861d3cd9c8bee090ebabd291105be378e735584c891220cc632">OPT_ARG_BEEP_INTERVAL</a>], <span class="stringliteral">&quot;15&quot;</span>);</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> interval = 15;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;         <span class="keywordflow">if</span> (sscanf(interval_str, <span class="stringliteral">&quot;%30u&quot;</span>, &amp;interval) != 1) {</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid interval &#39;%s&#39; for periodic beep. Using default of %u\n&quot;</span>,</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                  interval_str, interval);</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;         }</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../dc/dcf/func__periodic__hook_8c.html#aa62d539d9d64098331237c2fb9391040">ast_beep_start</a>(chan, interval, beep_id, <span class="keyword">sizeof</span>(beep_id))) {</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to enable periodic beep, please ensure func_periodic_hook is loaded.\n&quot;</span>);</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;         }</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;      }</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;   }</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;   arg = strchr(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.format, <span class="charliteral">&#39;:&#39;</span>);</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;   <span class="keywordflow">if</span> (arg) {</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;      *arg++ = 0;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      urlprefix = arg;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;   }</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(urlprefix) &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.fname_base)) {</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;      snprintf(tmp, <span class="keyword">sizeof</span>(tmp), <span class="stringliteral">&quot;%s/%s.%s&quot;</span>, urlprefix, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.fname_base,</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;         ((strcmp(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.format, <span class="stringliteral">&quot;gsm&quot;</span>)) ? <span class="stringliteral">&quot;wav&quot;</span> : <span class="stringliteral">&quot;gsm&quot;</span>));</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      <a class="code" href="../../dc/d07/cdr_8h.html#a1a5de28755e68ba2351a38210afc2423">ast_cdr_setuserfield</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), tmp);</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;   }</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;flags, <a class="code" href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a079d93f9c8d35fa3e8272d9ef53d2b87">MON_FLAG_BRIDGED</a>)) {</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      <span class="comment">/* We must remove the &quot;b&quot; option if listed.  In principle none of</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="comment">         the following could give NULL results, but we check just to</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="comment">         be pedantic. Reconstructing with checks for &#39;m&#39; option does not</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="comment">         work if we end up adding more options than &#39;m&#39; in the future. */</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      delay = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(data);</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;      options = strrchr(delay, <span class="charliteral">&#39;,&#39;</span>);</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      <span class="keywordflow">if</span> (options) {</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;         arg = strchr(options, <span class="charliteral">&#39;b&#39;</span>);</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;         <span class="keywordflow">if</span> (arg) {</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;            *arg = <span class="charliteral">&#39;X&#39;</span>;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;            <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan,<span class="stringliteral">&quot;AUTO_MONITOR&quot;</span>, delay);</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;         }</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;      }</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;   }</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;   res = <a class="code" href="../../d2/d1b/res__monitor_8c.html#acbcd8e50de0a8867d7a843c2b6915e0d">ast_monitor_start</a>(chan, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.format, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.fname_base, 1, stream_action, beep_id);</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0)</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      res = <a class="code" href="../../d2/d1b/res__monitor_8c.html#ad09531d45437f893a13433335c81143a">ast_monitor_change_fname</a>(chan, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.fname_base, 1);</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;   <span class="keywordflow">if</span> (stream_action &amp; <a class="code" href="../../d5/d60/monitor_8h.html#ac938418713970abe50535bcd17697dbd">X_JOIN</a>) {</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      <span class="keywordflow">if</span> ((stream_action &amp; <a class="code" href="../../d5/d60/monitor_8h.html#a95b90f61870300ea984afae5123dd44f">X_REC_IN</a>) &amp;&amp; (stream_action &amp; <a class="code" href="../../d5/d60/monitor_8h.html#ac03869f26afacb6d45355d401ced19d8">X_REC_OUT</a>))</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;         joinfiles = 1;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Won&#39;t mix streams unless both input and output streams are recorded\n&quot;</span>);</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;   }</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;   <a class="code" href="../../d2/d1b/res__monitor_8c.html#a24009cd78ef05c71b550254624eb6c13">ast_monitor_setjoinfiles</a>(chan, joinfiles);</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;}</div><div class="ttc" id="res__monitor_8c_html_aa684652a3ad226861d3cd9c8bee090ebaec7326f60e7edad15d96ff935e5616d6"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#aa684652a3ad226861d3cd9c8bee090ebaec7326f60e7edad15d96ff935e5616d6">OPT_ARG_ARRAY_SIZE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00675">res_monitor.c:675</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="monitor_8h_html_a95b90f61870300ea984afae5123dd44f"><div class="ttname"><a href="../../d5/d60/monitor_8h.html#a95b90f61870300ea984afae5123dd44f">X_REC_IN</a></div><div class="ttdeci">#define X_REC_IN</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/monitor_8h_source.html#l00030">monitor.h:30</a></div></div>
<div class="ttc" id="res__monitor_8c_html_aa684652a3ad226861d3cd9c8bee090ebabd291105be378e735584c891220cc632"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#aa684652a3ad226861d3cd9c8bee090ebabd291105be378e735584c891220cc632">OPT_ARG_BEEP_INTERVAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00674">res_monitor.c:674</a></div></div>
<div class="ttc" id="res__monitor_8c_html_aee3d617c7a1c9b5325de53e607fce523a5d9c50b7bbda1d22ab8f3163498de7a6"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a5d9c50b7bbda1d22ab8f3163498de7a6">MON_FLAG_DROP_IN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00668">res_monitor.c:668</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="res__monitor_8c_html_aee3d617c7a1c9b5325de53e607fce523a554ecb2b56be996cb717a7a3e91db286"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a554ecb2b56be996cb717a7a3e91db286">MON_FLAG_MIX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00667">res_monitor.c:667</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac08f7eb1eb9476b30987c73e1052ada8"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a></div><div class="ttdeci">#define AST_STANDARD_APP_ARGS(args, parse)</div><div class="ttdoc">Performs the &amp;#39;standard&amp;#39; argument separation process for an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">include/asterisk/app.h:1285</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="res__monitor_8c_html_a5384ac888d06ece0609e5649d9dc5101"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#a5384ac888d06ece0609e5649d9dc5101">monitor_opts</a></div><div class="ttdeci">static const struct ast_app_option monitor_opts[128]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00684">res_monitor.c:684</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="structast__flags_html_ac92588540e8c1d014a08cd8a45462b19"><div class="ttname"><a href="../../dc/dac/structast__flags.html#ac92588540e8c1d014a08cd8a45462b19">ast_flags::flags</a></div><div class="ttdeci">unsigned int flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00200">utils.h:200</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="monitor_8h_html_ac03869f26afacb6d45355d401ced19d8"><div class="ttname"><a href="../../d5/d60/monitor_8h.html#ac03869f26afacb6d45355d401ced19d8">X_REC_OUT</a></div><div class="ttdeci">#define X_REC_OUT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/monitor_8h_source.html#l00031">monitor.h:31</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="res__monitor_8c_html_acbcd8e50de0a8867d7a843c2b6915e0d"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#acbcd8e50de0a8867d7a843c2b6915e0d">ast_monitor_start</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_monitor_start(struct ast_channel *chan, const char *format_spec, const char *fname_base, int need_lock, int stream_action, const char *beep_id)</div><div class="ttdoc">Start monitoring a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00305">res_monitor.c:305</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_af40039f1c49c16d0f6fa33fe9c43a0cb"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#af40039f1c49c16d0f6fa33fe9c43a0cb">ast_app_parse_options</a></div><div class="ttdeci">int ast_app_parse_options(const struct ast_app_option *options, struct ast_flags *flags, char **args, char *optstr)</div><div class="ttdoc">Parses a string containing application options and sets flags/arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02906">main/app.c:2906</a></div></div>
<div class="ttc" id="func__periodic__hook_8c_html_aa62d539d9d64098331237c2fb9391040"><div class="ttname"><a href="../../dc/dcf/func__periodic__hook_8c.html#aa62d539d9d64098331237c2fb9391040">ast_beep_start</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_beep_start(struct ast_channel *chan, unsigned int interval, char *beep_id, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dcf/func__periodic__hook_8c_source.html#l00497">func_periodic_hook.c:497</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="res__monitor_8c_html_ad09531d45437f893a13433335c81143a"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#ad09531d45437f893a13433335c81143a">ast_monitor_change_fname</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_monitor_change_fname(struct ast_channel *chan, const char *fname_base, int need_lock)</div><div class="ttdoc">Change monitored filename of channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00590">res_monitor.c:590</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2e006acff60d9b3d65d7d60f975d6747"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a></div><div class="ttdeci">static void parse(struct mgcp_request *req)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">chan_mgcp.c:1872</a></div></div>
<div class="ttc" id="monitor_8h_html_ac938418713970abe50535bcd17697dbd"><div class="ttname"><a href="../../d5/d60/monitor_8h.html#ac938418713970abe50535bcd17697dbd">X_JOIN</a></div><div class="ttdeci">#define X_JOIN</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/monitor_8h_source.html#l00032">monitor.h:32</a></div></div>
<div class="ttc" id="cdr_8h_html_a1a5de28755e68ba2351a38210afc2423"><div class="ttname"><a href="../../dc/d07/cdr_8h.html#a1a5de28755e68ba2351a38210afc2423">ast_cdr_setuserfield</a></div><div class="ttdeci">void ast_cdr_setuserfield(const char *channel_name, const char *userfield)</div><div class="ttdoc">Set CDR user field for channel (stored in CDR) </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/cdr_8c_source.html#l03477">cdr.c:3477</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="res__monitor_8c_html_a24009cd78ef05c71b550254624eb6c13"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#a24009cd78ef05c71b550254624eb6c13">ast_monitor_setjoinfiles</a></div><div class="ttdeci">void AST_OPTIONAL_API_NAME() ast_monitor_setjoinfiles(struct ast_channel *chan, int turnon)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00926">res_monitor.c:926</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="res__monitor_8c_html_aee3d617c7a1c9b5325de53e607fce523a44b448c32c3f69604d983b1abce64247"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a44b448c32c3f69604d983b1abce64247">MON_FLAG_DROP_OUT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00669">res_monitor.c:669</a></div></div>
<div class="ttc" id="res__monitor_8c_html_aee3d617c7a1c9b5325de53e607fce523a8b8b4c2f8697d04b5b7d24d4f85efc30"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a8b8b4c2f8697d04b5b7d24d4f85efc30">MON_FLAG_BEEP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00670">res_monitor.c:670</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="res__monitor_8c_html_aee3d617c7a1c9b5325de53e607fce523a079d93f9c8d35fa3e8272d9ef53d2b87"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a079d93f9c8d35fa3e8272d9ef53d2b87">MON_FLAG_BRIDGED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00666">res_monitor.c:666</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a98f5e70e98f6dc48e3c5ba316066d540"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a></div><div class="ttdeci">static snd_pcm_format_t format</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00102">chan_alsa.c:102</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a80cd3f6f786b59b742bcecfc0b3be7c2"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a></div><div class="ttdeci">#define AST_DECLARE_APP_ARGS(name, arglist)</div><div class="ttdoc">Declare a structure to hold an application&amp;#39;s arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">include/asterisk/app.h:1249</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a037e9a5b28477b17e7c9acbe7ecb21d5"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a></div><div class="ttdeci">#define AST_APP_ARG(name)</div><div class="ttdoc">Define an application argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">include/asterisk/app.h:1232</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a93f5d0b567285f957c40ac8f63bef4c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93f5d0b567285f957c40ac8f63bef4c0">&#9670;&nbsp;</a></span>stop_monitor_action()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int stop_monitor_action </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Stop monitoring a channel by manager connection. </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00861">861</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d45/manager_8h_source.html#l00065">AMI_SUCCESS</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01454">ast_channel_get_by_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00461">ast_monitor_stop()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03191">astman_send_ack()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00074">name</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00976">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;{</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Channel&quot;</span>);</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(name)) {</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No channel specified&quot;</span>);</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../db/d45/manager_8h.html#a15c09363d6bdc7162c154ab2a20ec545">AMI_SUCCESS</a>;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;   }</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;   <span class="keywordflow">if</span> (!(c = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(name))) {</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No such channel&quot;</span>);</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../db/d45/manager_8h.html#a15c09363d6bdc7162c154ab2a20ec545">AMI_SUCCESS</a>;</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;   }</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;   res = <a class="code" href="../../d2/d1b/res__monitor_8c.html#afbc508597c697dc53fd6ecfdb4741218">ast_monitor_stop</a>(c, 1);</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;   c = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(c);</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Could not stop monitoring channel&quot;</span>);</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../db/d45/manager_8h.html#a15c09363d6bdc7162c154ab2a20ec545">AMI_SUCCESS</a>;</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;   }</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;Stopped monitoring channel&quot;</span>);</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/d45/manager_8h.html#a15c09363d6bdc7162c154ab2a20ec545">AMI_SUCCESS</a>;</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga77315fa8e29950f0c88120501acda0a3"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a></div><div class="ttdeci">void astman_send_ack(struct mansession *s, const struct message *m, char *msg)</div><div class="ttdoc">Send ack in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03191">manager.c:3191</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Get header from mananger transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="res__monitor_8c_html_afbc508597c697dc53fd6ecfdb4741218"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#afbc508597c697dc53fd6ecfdb4741218">ast_monitor_stop</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_monitor_stop(struct ast_channel *chan, int need_lock)</div><div class="ttdoc">Stop monitoring channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00461">res_monitor.c:461</a></div></div>
<div class="ttc" id="channel_8h_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
<div class="ttc" id="manager_8h_html_a15c09363d6bdc7162c154ab2a20ec545"><div class="ttname"><a href="../../db/d45/manager_8h.html#a15c09363d6bdc7162c154ab2a20ec545">AMI_SUCCESS</a></div><div class="ttdeci">#define AMI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00065">manager.h:65</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a15a6b6fcde2e361fe1f8633871cb9c8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15a6b6fcde2e361fe1f8633871cb9c8e">&#9670;&nbsp;</a></span>stop_monitor_exec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int stop_monitor_exec </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wrapper function. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d2/d1b/res__monitor_8c.html#afbc508597c697dc53fd6ecfdb4741218" title="Stop monitoring channel. ">ast_monitor_stop</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00796">796</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00461">ast_monitor_stop()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00976">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;{</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/d1b/res__monitor_8c.html#afbc508597c697dc53fd6ecfdb4741218">ast_monitor_stop</a>(chan, 1);</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;}</div><div class="ttc" id="res__monitor_8c_html_afbc508597c697dc53fd6ecfdb4741218"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#afbc508597c697dc53fd6ecfdb4741218">ast_monitor_stop</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_monitor_stop(struct ast_channel *chan, int need_lock)</div><div class="ttdoc">Stop monitoring channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00461">res_monitor.c:461</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00992">992</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d10/manager_8c_source.html#l07258">ast_manager_unregister()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00316">AST_MODFLAG_GLOBAL_SYMBOLS</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00317">AST_MODFLAG_LOAD_ORDER</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00326">AST_MODPRI_CHANNEL_DEPEND</a>, <a class="el" href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00123">AST_MODULE_SUPPORT_DEPRECATED</a>, <a class="el" href="../../dd/d16/pbx__app_8c_source.html#l00392">ast_unregister_application()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00046">ASTERISK_GPL_KEY</a>, and <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00976">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;{</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a>(<span class="stringliteral">&quot;Monitor&quot;</span>);</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a>(<span class="stringliteral">&quot;StopMonitor&quot;</span>);</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a>(<span class="stringliteral">&quot;ChangeMonitor&quot;</span>);</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a>(<span class="stringliteral">&quot;PauseMonitor&quot;</span>);</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a>(<span class="stringliteral">&quot;UnpauseMonitor&quot;</span>);</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a>(<span class="stringliteral">&quot;Monitor&quot;</span>);</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a>(<span class="stringliteral">&quot;StopMonitor&quot;</span>);</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a>(<span class="stringliteral">&quot;ChangeMonitor&quot;</span>);</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a>(<span class="stringliteral">&quot;PauseMonitor&quot;</span>);</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a>(<span class="stringliteral">&quot;UnpauseMonitor&quot;</span>);</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;}</div><div class="ttc" id="module_8h_html_ad2ca15621101154f29748cf1dac3c3cf"><div class="ttname"><a href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a></div><div class="ttdeci">int ast_unregister_application(const char *app)</div><div class="ttdoc">Unregister an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00392">pbx_app.c:392</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gafadf012f66a9fd7ecf985ec5b9dee101"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a></div><div class="ttdeci">int ast_manager_unregister(const char *action)</div><div class="ttdoc">Unregister a registered manager command. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l07258">manager.c:7258</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af3f7ca5ebf924af21dd41bd27c139f8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3f7ca5ebf924af21dd41bd27c139f8e">&#9670;&nbsp;</a></span>unpause_monitor_action()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unpause_monitor_action </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00971">971</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00938">do_pause_or_unpause()</a>, and <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00935">MONITOR_ACTION_UNPAUSE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00976">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;{</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/d1b/res__monitor_8c.html#a744f7646ca44b325929fa8d762cd785d">do_pause_or_unpause</a>(s, m, <a class="code" href="../../d2/d1b/res__monitor_8c.html#aa0cc1f76c64cb664ad4bdd5175245358ace34bca811c8e3b88a5821dc1112045d">MONITOR_ACTION_UNPAUSE</a>);</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;}</div><div class="ttc" id="res__monitor_8c_html_a744f7646ca44b325929fa8d762cd785d"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#a744f7646ca44b325929fa8d762cd785d">do_pause_or_unpause</a></div><div class="ttdeci">static int do_pause_or_unpause(struct mansession *s, const struct message *m, int action)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00938">res_monitor.c:938</a></div></div>
<div class="ttc" id="res__monitor_8c_html_aa0cc1f76c64cb664ad4bdd5175245358ace34bca811c8e3b88a5821dc1112045d"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#aa0cc1f76c64cb664ad4bdd5175245358ace34bca811c8e3b88a5821dc1112045d">MONITOR_ACTION_UNPAUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00935">res_monitor.c:935</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aac5b750f558ee5d9d058212717a57cda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac5b750f558ee5d9d058212717a57cda">&#9670;&nbsp;</a></span>unpause_monitor_exec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unpause_monitor_exec </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wrapper for ast_monitor_unpause. </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00577">577</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00565">ast_monitor_unpause()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00976">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;{</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/d1b/res__monitor_8c.html#a9debaded0ac66ccfd7d9b898710fda4d">ast_monitor_unpause</a>(chan);</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;}</div><div class="ttc" id="res__monitor_8c_html_a9debaded0ac66ccfd7d9b898710fda4d"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#a9debaded0ac66ccfd7d9b898710fda4d">ast_monitor_unpause</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_monitor_unpause(struct ast_channel *chan)</div><div class="ttdoc">Unpause monitoring of channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00565">res_monitor.c:565</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a835b27a90d895a488e4e14cc3d2dee8c">AST_MODFLAG_GLOBAL_SYMBOLS</a> | <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Call Monitoring Resource&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_DEPRECATED, .load = load_module, .unload = unload_module, .load_pri = AST_MODPRI_CHANNEL_DEPEND, .optional_modules = &quot;func_periodic_hook&quot;, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l01015">1015</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l01015">1015</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>

</div>
</div>
<a id="a5384ac888d06ece0609e5649d9dc5101"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5384ac888d06ece0609e5649d9dc5101">&#9670;&nbsp;</a></span>monitor_opts</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../d2/d8d/structast__app__option.html">ast_app_option</a> monitor_opts[128] = { [ '<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>' ] = { .<a class="el" href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a> = <a class="el" href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a079d93f9c8d35fa3e8272d9ef53d2b87">MON_FLAG_BRIDGED</a> }, [ 'm' ] = { .<a class="el" href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a> = <a class="el" href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a554ecb2b56be996cb717a7a3e91db286">MON_FLAG_MIX</a> }, [ 'i' ] = { .<a class="el" href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a> = <a class="el" href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a5d9c50b7bbda1d22ab8f3163498de7a6">MON_FLAG_DROP_IN</a> }, [ 'o' ] = { .<a class="el" href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a> = <a class="el" href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a44b448c32c3f69604d983b1abce64247">MON_FLAG_DROP_OUT</a> }, [ 'B' ] = { .<a class="el" href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a> = <a class="el" href="../../d2/d1b/res__monitor_8c.html#aee3d617c7a1c9b5325de53e607fce523a8b8b4c2f8697d04b5b7d24d4f85efc30">MON_FLAG_BEEP</a> , .arg_index = <a class="el" href="../../d2/d1b/res__monitor_8c.html#aa684652a3ad226861d3cd9c8bee090ebabd291105be378e735584c891220cc632">OPT_ARG_BEEP_INTERVAL</a> + 1 }, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00684">684</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00693">start_monitor_exec()</a>.</p>

</div>
</div>
<a id="ab192ebed6ae1909520f4553be0c335d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab192ebed6ae1909520f4553be0c335d8">&#9670;&nbsp;</a></span>monitorlock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a> monitorlock = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00261">261</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00305">ast_monitor_start()</a>.</p>

</div>
</div>
<a id="a189930c4babdc38135a74db479534069"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a189930c4babdc38135a74db479534069">&#9670;&nbsp;</a></span>seq</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long seq = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00273">273</a> of file <a class="el" href="../../d2/d1b/res__monitor_8c_source.html">res_monitor.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00305">ast_monitor_start()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:26 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
