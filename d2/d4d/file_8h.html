<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: file.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="../../dir_6d4b1cdb59e2db6ad82005b337288fef.html">asterisk</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">file.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Generic File Format Support. Should be included by clients of the file handling routines. File service providers should instead include <a class="el" href="../../d7/d5d/mod__format_8h.html" title="Header for providers of file and format handling routines. Clients of these routines should include &quot;...">mod_format.h</a>.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;sys/mman.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for file.h:</div>
<div class="dyncontent">
<div class="center"><img src="../../df/dd4/file_8h__incl.png" border="0" usemap="#file_8h" alt=""/></div>
<map name="file_8h" id="file_8h">
</map>
</div>
</div>
<p><a href="../../d2/d4d/file_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:afa92b0106fb7a918ea994c2867ac0a04"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a>&#160;&#160;&#160;&quot;0123456789#*ABCD&quot;</td></tr>
<tr class="separator:afa92b0106fb7a918ea994c2867ac0a04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd91337f5cce3ab7448c54a0d2aa4272"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#abd91337f5cce3ab7448c54a0d2aa4272">AST_DIGIT_ANYNUM</a>&#160;&#160;&#160;&quot;0123456789&quot;</td></tr>
<tr class="separator:abd91337f5cce3ab7448c54a0d2aa4272"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb7bdff3c549191072878402b0a0ca9c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#abb7bdff3c549191072878402b0a0ca9c">AST_DIGIT_NONE</a>&#160;&#160;&#160;&quot;&quot;</td></tr>
<tr class="separator:abb7bdff3c549191072878402b0a0ca9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a161bd0a2b265dadb6de61e4055f27e84"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#a161bd0a2b265dadb6de61e4055f27e84">ast_file_read_dir</a>(dir_name,  on_file,  obj)&#160;&#160;&#160;<a class="el" href="../../d6/d13/file_8c.html#a650841bb643208a8541172297dba1d99">ast_file_read_dirs</a>(dir_name, on_file, obj, 1)</td></tr>
<tr class="memdesc:a161bd0a2b265dadb6de61e4055f27e84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterate over each file in a given directory.  <a href="#a161bd0a2b265dadb6de61e4055f27e84">More...</a><br /></td></tr>
<tr class="separator:a161bd0a2b265dadb6de61e4055f27e84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa932272aad0c1610b79e9b04e54e57ea"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#aa932272aad0c1610b79e9b04e54e57ea">AST_MAX_FORMATS</a>&#160;&#160;&#160;10</td></tr>
<tr class="separator:aa932272aad0c1610b79e9b04e54e57ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8db5048680510188c111d19ebaaa85c4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#a8db5048680510188c111d19ebaaa85c4">AST_RESERVED_POINTERS</a>&#160;&#160;&#160;20</td></tr>
<tr class="separator:a8db5048680510188c111d19ebaaa85c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd4aebd901cf2e2251920acfbe22fa22"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#abd4aebd901cf2e2251920acfbe22fa22">SEEK_FORCECUR</a>&#160;&#160;&#160;10</td></tr>
<tr class="separator:abd4aebd901cf2e2251920acfbe22fa22"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a616155d421abde65671e234068f5d434"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#a616155d421abde65671e234068f5d434">ast_file_on_file</a>) (const char *dir_name, const char *filename, void *obj)</td></tr>
<tr class="memdesc:a616155d421abde65671e234068f5d434"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback called for each file found when reading directories.  <a href="#a616155d421abde65671e234068f5d434">More...</a><br /></td></tr>
<tr class="separator:a616155d421abde65671e234068f5d434"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d5138e99197a1d01f7a2ed07830476e"><td class="memItemLeft" align="right" valign="top">typedef void()&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#a2d5138e99197a1d01f7a2ed07830476e">ast_waitstream_fr_cb</a>(struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, long ms, enum <a class="el" href="../../d2/d4d/file_8h.html#a04986aeb2b288409f7828a67998d7d6f">ast_waitstream_fr_cb_values</a> <a class="el" href="../../d5/d85/structval.html">val</a>)</td></tr>
<tr class="memdesc:a2d5138e99197a1d01f7a2ed07830476e"><td class="mdescLeft">&#160;</td><td class="mdescRight">callback used during dtmf controlled file playback to indicate location of playback in a file after rewinding or fastfowarding a file.  <a href="#a2d5138e99197a1d01f7a2ed07830476e">More...</a><br /></td></tr>
<tr class="separator:a2d5138e99197a1d01f7a2ed07830476e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a04986aeb2b288409f7828a67998d7d6f"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#a04986aeb2b288409f7828a67998d7d6f">ast_waitstream_fr_cb_values</a> { <a class="el" href="../../d2/d4d/file_8h.html#a04986aeb2b288409f7828a67998d7d6fa551635958f534ccf4cb21c6ea0007bad">AST_WAITSTREAM_CB_REWIND</a> = 1, 
<a class="el" href="../../d2/d4d/file_8h.html#a04986aeb2b288409f7828a67998d7d6fa535f1a556fea89b06556c32a3356ba63">AST_WAITSTREAM_CB_FASTFORWARD</a>, 
<a class="el" href="../../d2/d4d/file_8h.html#a04986aeb2b288409f7828a67998d7d6faabc2f8e0278809e40cec7eb54feb6228">AST_WAITSTREAM_CB_START</a>
 }</td></tr>
<tr class="separator:a04986aeb2b288409f7828a67998d7d6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a618e3120b6d019312ef2d617d9f14571"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#a618e3120b6d019312ef2d617d9f14571">ast_applystream</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *s)</td></tr>
<tr class="memdesc:a618e3120b6d019312ef2d617d9f14571"><td class="mdescLeft">&#160;</td><td class="mdescRight">Applys a open stream to a channel.  <a href="#a618e3120b6d019312ef2d617d9f14571">More...</a><br /></td></tr>
<tr class="separator:a618e3120b6d019312ef2d617d9f14571"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab53bd2c3c55d509790c7f7620aac6373"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#ab53bd2c3c55d509790c7f7620aac6373">ast_closestream</a> (struct <a class="el" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *f)</td></tr>
<tr class="memdesc:ab53bd2c3c55d509790c7f7620aac6373"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes a stream.  <a href="#ab53bd2c3c55d509790c7f7620aac6373">More...</a><br /></td></tr>
<tr class="separator:ab53bd2c3c55d509790c7f7620aac6373"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeac4fbc3c21ddf2548bc7ae7fab717f3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#aeac4fbc3c21ddf2548bc7ae7fab717f3">ast_file_init</a> (void)</td></tr>
<tr class="separator:aeac4fbc3c21ddf2548bc7ae7fab717f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a650841bb643208a8541172297dba1d99"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#a650841bb643208a8541172297dba1d99">ast_file_read_dirs</a> (const char *dir_name, <a class="el" href="../../d2/d4d/file_8h.html#a616155d421abde65671e234068f5d434">ast_file_on_file</a> on_file, void *obj, int max_depth)</td></tr>
<tr class="memdesc:a650841bb643208a8541172297dba1d99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Recursively iterate through files and directories up to max_depth.  <a href="#a650841bb643208a8541172297dba1d99">More...</a><br /></td></tr>
<tr class="separator:a650841bb643208a8541172297dba1d99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab7814972ae21f8cc68e1d62b97fc88b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#aab7814972ae21f8cc68e1d62b97fc88b">ast_filecopy</a> (const char *oldname, const char *newname, const char *fmt)</td></tr>
<tr class="memdesc:aab7814972ae21f8cc68e1d62b97fc88b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copies a file.  <a href="#aab7814972ae21f8cc68e1d62b97fc88b">More...</a><br /></td></tr>
<tr class="separator:aab7814972ae21f8cc68e1d62b97fc88b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb15d6efecc1a13b8835bee6d3562ddb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#adb15d6efecc1a13b8835bee6d3562ddb">ast_filedelete</a> (const char *filename, const char *fmt)</td></tr>
<tr class="memdesc:adb15d6efecc1a13b8835bee6d3562ddb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes a file.  <a href="#adb15d6efecc1a13b8835bee6d3562ddb">More...</a><br /></td></tr>
<tr class="separator:adb15d6efecc1a13b8835bee6d3562ddb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9b8ab8e5ee34c9b4da25779255cafde"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#ab9b8ab8e5ee34c9b4da25779255cafde">ast_fileexists</a> (const char *filename, const char *fmt, const char *preflang)</td></tr>
<tr class="memdesc:ab9b8ab8e5ee34c9b4da25779255cafde"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks for the existence of a given file.  <a href="#ab9b8ab8e5ee34c9b4da25779255cafde">More...</a><br /></td></tr>
<tr class="separator:ab9b8ab8e5ee34c9b4da25779255cafde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57ea6065cde7fb5258c1f6a4595643ba"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#a57ea6065cde7fb5258c1f6a4595643ba">ast_filerename</a> (const char *oldname, const char *newname, const char *fmt)</td></tr>
<tr class="memdesc:a57ea6065cde7fb5258c1f6a4595643ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Renames a file.  <a href="#a57ea6065cde7fb5258c1f6a4595643ba">More...</a><br /></td></tr>
<tr class="separator:a57ea6065cde7fb5258c1f6a4595643ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa526fd9bb57d7d9afac2113c30d236f8"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#aa526fd9bb57d7d9afac2113c30d236f8">ast_format_str_reduce</a> (char *fmts)</td></tr>
<tr class="separator:aa526fd9bb57d7d9afac2113c30d236f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdec85bd5a62872c437b223d62e616fa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#acdec85bd5a62872c437b223d62e616fa">ast_get_extension_for_mime_type</a> (const char *mime_type, char *buffer, size_t capacity)</td></tr>
<tr class="memdesc:acdec85bd5a62872c437b223d62e616fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a suitable filename extension for the given MIME type.  <a href="#acdec85bd5a62872c437b223d62e616fa">More...</a><br /></td></tr>
<tr class="separator:acdec85bd5a62872c437b223d62e616fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45a9a43d68a284ce9d8467ec9400660c"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#a45a9a43d68a284ce9d8467ec9400660c">ast_get_format_for_file_ext</a> (const char *file_ext)</td></tr>
<tr class="memdesc:a45a9a43d68a284ce9d8467ec9400660c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the <a class="el" href="../../d0/d98/structast__format.html" title="Definition of a media format. ">ast_format</a> associated with the given file extension.  <a href="#a45a9a43d68a284ce9d8467ec9400660c">More...</a><br /></td></tr>
<tr class="separator:a45a9a43d68a284ce9d8467ec9400660c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad85c951fa1d6988d2d7e169833a951a8"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#ad85c951fa1d6988d2d7e169833a951a8">ast_openstream</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *filename, const char *preflang)</td></tr>
<tr class="memdesc:ad85c951fa1d6988d2d7e169833a951a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens stream for use in seeking, playing.  <a href="#ad85c951fa1d6988d2d7e169833a951a8">More...</a><br /></td></tr>
<tr class="separator:ad85c951fa1d6988d2d7e169833a951a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2d6dfeafd18a99d47195178cd752a3d"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#ae2d6dfeafd18a99d47195178cd752a3d">ast_openstream_full</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *filename, const char *preflang, int asis)</td></tr>
<tr class="memdesc:ae2d6dfeafd18a99d47195178cd752a3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens stream for use in seeking, playing.  <a href="#ae2d6dfeafd18a99d47195178cd752a3d">More...</a><br /></td></tr>
<tr class="separator:ae2d6dfeafd18a99d47195178cd752a3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeed49fff2d6008a89f996230988d944d"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#aeed49fff2d6008a89f996230988d944d">ast_openvstream</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *filename, const char *preflang)</td></tr>
<tr class="memdesc:aeed49fff2d6008a89f996230988d944d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opens stream for use in seeking, playing.  <a href="#aeed49fff2d6008a89f996230988d944d">More...</a><br /></td></tr>
<tr class="separator:aeed49fff2d6008a89f996230988d944d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad59224750b8b617f9590b28b88457b14"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#ad59224750b8b617f9590b28b88457b14">ast_playstream</a> (struct <a class="el" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *s)</td></tr>
<tr class="memdesc:ad59224750b8b617f9590b28b88457b14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Play a open stream on a channel.  <a href="#ad59224750b8b617f9590b28b88457b14">More...</a><br /></td></tr>
<tr class="separator:ad59224750b8b617f9590b28b88457b14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4afbcd56a1aaf40eca3827e6d890372"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#ab4afbcd56a1aaf40eca3827e6d890372">ast_ratestream</a> (struct <a class="el" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *fs)</td></tr>
<tr class="memdesc:ab4afbcd56a1aaf40eca3827e6d890372"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the sample rate of the stream's format.  <a href="#ab4afbcd56a1aaf40eca3827e6d890372">More...</a><br /></td></tr>
<tr class="separator:ab4afbcd56a1aaf40eca3827e6d890372"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad572060ea434390db3d1ccde4511dfcd"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#ad572060ea434390db3d1ccde4511dfcd">ast_readfile</a> (const char *filename, const char *<a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, const char *<a class="el" href="../../d2/d7e/ael__lex_8c.html#a43be22b7a1b528eaf759e034ec581543">comment</a>, int flags, int check, mode_t mode)</td></tr>
<tr class="memdesc:ad572060ea434390db3d1ccde4511dfcd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts reading from a file.  <a href="#ad572060ea434390db3d1ccde4511dfcd">More...</a><br /></td></tr>
<tr class="separator:ad572060ea434390db3d1ccde4511dfcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a962bc31d7a953b0a0290c72b168d41a7"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#a962bc31d7a953b0a0290c72b168d41a7">ast_readframe</a> (struct <a class="el" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *s)</td></tr>
<tr class="memdesc:a962bc31d7a953b0a0290c72b168d41a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a frame from a filestream.  <a href="#a962bc31d7a953b0a0290c72b168d41a7">More...</a><br /></td></tr>
<tr class="separator:a962bc31d7a953b0a0290c72b168d41a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36f6bba05952162d5d1ee7fb9819bd07"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#a36f6bba05952162d5d1ee7fb9819bd07">ast_seekstream</a> (struct <a class="el" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *fs, off_t sample_offset, int whence)</td></tr>
<tr class="memdesc:a36f6bba05952162d5d1ee7fb9819bd07"><td class="mdescLeft">&#160;</td><td class="mdescRight">Seeks into stream.  <a href="#a36f6bba05952162d5d1ee7fb9819bd07">More...</a><br /></td></tr>
<tr class="separator:a36f6bba05952162d5d1ee7fb9819bd07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3092bf11d4bba66f646562759608b1bc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>)</td></tr>
<tr class="memdesc:a3092bf11d4bba66f646562759608b1bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops a stream.  <a href="#a3092bf11d4bba66f646562759608b1bc">More...</a><br /></td></tr>
<tr class="separator:a3092bf11d4bba66f646562759608b1bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95b94a020720147325a486e210b36775"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#a95b94a020720147325a486e210b36775">ast_stream_and_wait</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *file, const char *digits)</td></tr>
<tr class="memdesc:a95b94a020720147325a486e210b36775"><td class="mdescLeft">&#160;</td><td class="mdescRight">stream file until digit If the file name is non-empty, try to play it.  <a href="#a95b94a020720147325a486e210b36775">More...</a><br /></td></tr>
<tr class="separator:a95b94a020720147325a486e210b36775"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2137b5da91f3408f86d580952f32e94"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#ac2137b5da91f3408f86d580952f32e94">ast_stream_fastforward</a> (struct <a class="el" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *fs, off_t ms)</td></tr>
<tr class="memdesc:ac2137b5da91f3408f86d580952f32e94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fast forward stream ms.  <a href="#ac2137b5da91f3408f86d580952f32e94">More...</a><br /></td></tr>
<tr class="separator:ac2137b5da91f3408f86d580952f32e94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c7c02a659b09bb06dd63e1f42692666"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#a4c7c02a659b09bb06dd63e1f42692666">ast_stream_rewind</a> (struct <a class="el" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *fs, off_t ms)</td></tr>
<tr class="memdesc:a4c7c02a659b09bb06dd63e1f42692666"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rewind stream ms.  <a href="#a4c7c02a659b09bb06dd63e1f42692666">More...</a><br /></td></tr>
<tr class="separator:a4c7c02a659b09bb06dd63e1f42692666"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67c7e271b4ca70aca6d48fd48d121857"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>, const char *filename, const char *preflang)</td></tr>
<tr class="memdesc:a67c7e271b4ca70aca6d48fd48d121857"><td class="mdescLeft">&#160;</td><td class="mdescRight">Streams a file.  <a href="#a67c7e271b4ca70aca6d48fd48d121857">More...</a><br /></td></tr>
<tr class="separator:a67c7e271b4ca70aca6d48fd48d121857"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01771a318e7adea51499040f27b4278a"><td class="memItemLeft" align="right" valign="top">off_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#a01771a318e7adea51499040f27b4278a">ast_tellstream</a> (struct <a class="el" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *fs)</td></tr>
<tr class="memdesc:a01771a318e7adea51499040f27b4278a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tell where we are in a stream.  <a href="#a01771a318e7adea51499040f27b4278a">More...</a><br /></td></tr>
<tr class="separator:a01771a318e7adea51499040f27b4278a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa647ac352a00b559131f90ffffea2c3c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#aa647ac352a00b559131f90ffffea2c3c">ast_truncstream</a> (struct <a class="el" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *fs)</td></tr>
<tr class="memdesc:aa647ac352a00b559131f90ffffea2c3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Trunc stream at current location.  <a href="#aa647ac352a00b559131f90ffffea2c3c">More...</a><br /></td></tr>
<tr class="separator:aa647ac352a00b559131f90ffffea2c3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affc21cb57c6bf72a2cb7ec8a379b2137"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>, const char *breakon)</td></tr>
<tr class="memdesc:affc21cb57c6bf72a2cb7ec8a379b2137"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits for a stream to stop or digit to be pressed.  <a href="#affc21cb57c6bf72a2cb7ec8a379b2137">More...</a><br /></td></tr>
<tr class="separator:affc21cb57c6bf72a2cb7ec8a379b2137"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6eb4e1e4576abe04a4b185688f6690c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#ae6eb4e1e4576abe04a4b185688f6690c">ast_waitstream_exten</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>, const char *<a class="el" href="../../da/dde/chan__phone_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>)</td></tr>
<tr class="memdesc:ae6eb4e1e4576abe04a4b185688f6690c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits for a stream to stop or digit matching a valid one digit exten to be pressed.  <a href="#ae6eb4e1e4576abe04a4b185688f6690c">More...</a><br /></td></tr>
<tr class="separator:ae6eb4e1e4576abe04a4b185688f6690c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ce837632e3746a3af17f8311060e510"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#a5ce837632e3746a3af17f8311060e510">ast_waitstream_fr</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>, const char *breakon, const char *forward, const char *rewind, int ms)</td></tr>
<tr class="memdesc:a5ce837632e3746a3af17f8311060e510"><td class="mdescLeft">&#160;</td><td class="mdescRight">Same as waitstream but allows stream to be forwarded or rewound.  <a href="#a5ce837632e3746a3af17f8311060e510">More...</a><br /></td></tr>
<tr class="separator:a5ce837632e3746a3af17f8311060e510"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d269d89440f69d13458394efc73f2d2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#a1d269d89440f69d13458394efc73f2d2">ast_waitstream_fr_w_cb</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>, const char *breakon, const char *forward, const char *rewind, int ms, <a class="el" href="../../d2/d4d/file_8h.html#a2d5138e99197a1d01f7a2ed07830476e">ast_waitstream_fr_cb</a> cb)</td></tr>
<tr class="memdesc:a1d269d89440f69d13458394efc73f2d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Same as waitstream_fr but allows a callback to be alerted when a user fastforwards or rewinds the file.  <a href="#a1d269d89440f69d13458394efc73f2d2">More...</a><br /></td></tr>
<tr class="separator:a1d269d89440f69d13458394efc73f2d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3089874cd5223053f670c8499e911ec4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#a3089874cd5223053f670c8499e911ec4">ast_waitstream_full</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>, const char *breakon, int audiofd, int monfd)</td></tr>
<tr class="separator:a3089874cd5223053f670c8499e911ec4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a964f8ef393c07609d7b9e02937faed52"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#a964f8ef393c07609d7b9e02937faed52">ast_writefile</a> (const char *filename, const char *<a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, const char *<a class="el" href="../../d2/d7e/ael__lex_8c.html#a43be22b7a1b528eaf759e034ec581543">comment</a>, int flags, int check, mode_t mode)</td></tr>
<tr class="memdesc:a964f8ef393c07609d7b9e02937faed52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts writing a file.  <a href="#a964f8ef393c07609d7b9e02937faed52">More...</a><br /></td></tr>
<tr class="separator:a964f8ef393c07609d7b9e02937faed52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3608386b919ef0949d2858cdeb02d12e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d4d/file_8h.html#a3608386b919ef0949d2858cdeb02d12e">ast_writestream</a> (struct <a class="el" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *fs, struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *f)</td></tr>
<tr class="memdesc:a3608386b919ef0949d2858cdeb02d12e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes a frame to a stream.  <a href="#a3608386b919ef0949d2858cdeb02d12e">More...</a><br /></td></tr>
<tr class="separator:a3608386b919ef0949d2858cdeb02d12e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Generic File Format Support. Should be included by clients of the file handling routines. File service providers should instead include <a class="el" href="../../d7/d5d/mod__format_8h.html" title="Header for providers of file and format handling routines. Clients of these routines should include &quot;...">mod_format.h</a>. </p>

<p class="definition">Definition in file <a class="el" href="../../d2/d4d/file_8h_source.html">file.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="afa92b0106fb7a918ea994c2867ac0a04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa92b0106fb7a918ea994c2867ac0a04">&#9670;&nbsp;</a></span>AST_DIGIT_ANY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AST_DIGIT_ANY&#160;&#160;&#160;&quot;0123456789#*ABCD&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a264">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d2/d4d/file_8h_source.html#l00048">48</a> of file <a class="el" href="../../d2/d4d/file_8h_source.html">file.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l02951">action_playback_and_continue()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01738">agent_alert()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02700">ast_ivr_menu_run_internal()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01470">ast_play_and_wait()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l06660">ast_readstring_full()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02489">ast_record_review()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03994">ast_sip_add_usereqphone()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l04837">conf_exec()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l02350">conf_get_pin()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l03177">conf_run()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02254">dial_exec_full()</a>, <a class="el" href="../../dd/d32/app__dictate_8c_source.html#l00087">dictate_exec()</a>, <a class="el" href="../../d0/de2/app__directory_8c_source.html#l00847">directory_exec()</a>, <a class="el" href="../../d5/dd6/app__festival_8c_source.html#l00279">festival_exec()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l07819">get_folder()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l07865">get_folder_ja()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l03160">grab_transfer()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02590">ivr_dispatch()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l02846">meetme_menu_admin()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l02966">meetme_menu_admin_extended()</a>, <a class="el" href="../../df/d1d/pbx__builtins_8c_source.html#l01144">pbx_builtin_background()</a>, <a class="el" href="../../df/d1d/pbx__builtins_8c_source.html#l01436">pbx_builtin_saycharacters()</a>, <a class="el" href="../../df/d1d/pbx__builtins_8c_source.html#l01380">pbx_builtin_saycharacters_case()</a>, <a class="el" href="../../df/d1d/pbx__builtins_8c_source.html#l01340">pbx_builtin_saydigits()</a>, <a class="el" href="../../df/d1d/pbx__builtins_8c_source.html#l01360">pbx_builtin_saymoney()</a>, <a class="el" href="../../df/d1d/pbx__builtins_8c_source.html#l01293">pbx_builtin_saynumber()</a>, <a class="el" href="../../df/d1d/pbx__builtins_8c_source.html#l01456">pbx_builtin_sayphonetic()</a>, <a class="el" href="../../df/d1d/pbx__builtins_8c_source.html#l01027">pbx_builtin_waitdigit()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l00928">play_file()</a>, <a class="el" href="../../d0/de2/app__directory_8c_source.html#l00286">play_mailbox_owner()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l08843">play_message()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l08716">play_message_callerid()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l08638">play_message_datetime()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l08793">play_message_duration()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l01644">play_record_review()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l03434">retrydial_exec()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l07207">say_and_wait()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l03980">say_position()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l14359">sayname()</a>, <a class="el" href="../../da/df8/app__sayunixtime_8c_source.html#l00118">sayunixtime_exec()</a>, <a class="el" href="../../d0/de2/app__directory_8c_source.html#l00395">select_item_menu()</a>, <a class="el" href="../../d0/de2/app__directory_8c_source.html#l00347">select_item_seq()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l06722">try_calling()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l09367">vm_intro_gr()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l09501">vm_intro_he()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l09461">vm_intro_multilang()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l10168">vm_intro_pt()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l10029">vm_intro_pt_BR()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l14446">vmsayname_exec()</a>, and <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l08609">wait_file2()</a>.</p>

</div>
</div>
<a id="abd91337f5cce3ab7448c54a0d2aa4272"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd91337f5cce3ab7448c54a0d2aa4272">&#9670;&nbsp;</a></span>AST_DIGIT_ANYNUM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AST_DIGIT_ANYNUM&#160;&#160;&#160;&quot;0123456789&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d4d/file_8h_source.html#l00049">49</a> of file <a class="el" href="../../d2/d4d/file_8h_source.html">file.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l14410">initreqprep()</a>.</p>

</div>
</div>
<a id="abb7bdff3c549191072878402b0a0ca9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb7bdff3c549191072878402b0a0ca9c">&#9670;&nbsp;</a></span>AST_DIGIT_NONE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AST_DIGIT_NONE&#160;&#160;&#160;&quot;&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Convenient for waiting </p>

<p class="definition">Definition at line <a class="el" href="../../d2/d4d/file_8h_source.html#l00047">47</a> of file <a class="el" href="../../d2/d4d/file_8h_source.html">file.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02112">agent_login_exec()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01321">ast_bridge_channel_playfile()</a>, <a class="el" href="../../d2/df4/bridge__builtin__interval__features_8c_source.html#l00051">bridge_features_duration_callback()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l03160">grab_transfer()</a>, <a class="el" href="../../d2/df4/bridge__builtin__interval__features_8c_source.html#l00067">limits_interval_playback()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l00928">play_file()</a>, <a class="el" href="../../da/df8/app__sayunixtime_8c_source.html#l00118">sayunixtime_exec()</a>, and <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l01755">stream_failsound()</a>.</p>

</div>
</div>
<a id="a161bd0a2b265dadb6de61e4055f27e84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a161bd0a2b265dadb6de61e4055f27e84">&#9670;&nbsp;</a></span>ast_file_read_dir</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ast_file_read_dir</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">dir_name, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">on_file, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">obj&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;<a class="el" href="../../d6/d13/file_8c.html#a650841bb643208a8541172297dba1d99">ast_file_read_dirs</a>(dir_name, on_file, obj, 1)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Iterate over each file in a given directory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dir_name</td><td>the name of the directory to search </td></tr>
    <tr><td class="paramname">on_file</td><td>callback called on each file </td></tr>
    <tr><td class="paramname">obj</td><td>user data object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 or errno on failure, otherwise 0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d4d/file_8h_source.html#l00171">171</a> of file <a class="el" href="../../d2/d4d/file_8h_source.html">file.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d74/stored_8c_source.html#l00184">find_recording()</a>, and <a class="el" href="../../d3/d97/res__musiconhold_8c_source.html#l01279">moh_scan_files()</a>.</p>

</div>
</div>
<a id="aa932272aad0c1610b79e9b04e54e57ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa932272aad0c1610b79e9b04e54e57ea">&#9670;&nbsp;</a></span>AST_MAX_FORMATS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AST_MAX_FORMATS&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The maximum number of formats we expect to see in a format string </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a284">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d2/d4d/file_8h_source.html#l00044">44</a> of file <a class="el" href="../../d2/d4d/file_8h_source.html">file.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/d13/file_8c_source.html#l01826">ast_format_str_reduce()</a>.</p>

</div>
</div>
<a id="a8db5048680510188c111d19ebaaa85c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8db5048680510188c111d19ebaaa85c4">&#9670;&nbsp;</a></span>AST_RESERVED_POINTERS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AST_RESERVED_POINTERS&#160;&#160;&#160;20</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d4d/file_8h_source.html#l00409">409</a> of file <a class="el" href="../../d2/d4d/file_8h_source.html">file.h</a>.</p>

</div>
</div>
<a id="abd4aebd901cf2e2251920acfbe22fa22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd4aebd901cf2e2251920acfbe22fa22">&#9670;&nbsp;</a></span>SEEK_FORCECUR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEEK_FORCECUR&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d2/d4d/file_8h_source.html#l00051">51</a> of file <a class="el" href="../../d2/d4d/file_8h_source.html">file.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d28/channel_8c_source.html#l03529">__ast_read()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05194">ast_write_stream()</a>, <a class="el" href="../../d2/d48/format__pcm_8c_source.html#l00407">au_seek()</a>, <a class="el" href="../../db/d44/format__g719_8c_source.html#l00070">g719seek()</a>, <a class="el" href="../../d2/d97/format__g726_8c_source.html#l00156">g726_seek()</a>, <a class="el" href="../../d6/d1e/format__g729_8c_source.html#l00081">g729_seek()</a>, <a class="el" href="../../db/dbc/format__gsm_8c_source.html#l00100">gsm_seek()</a>, <a class="el" href="../../d4/d15/format__ilbc_8c_source.html#l00078">ilbc_seek()</a>, <a class="el" href="../../da/de5/format__mp3_8c_source.html#l00248">mp3_seek()</a>, <a class="el" href="../../d2/d48/format__pcm_8c_source.html#l00098">pcm_seek()</a>, <a class="el" href="../../da/d59/format__siren14_8c_source.html#l00070">siren14seek()</a>, <a class="el" href="../../d4/d71/format__siren7_8c_source.html#l00070">siren7seek()</a>, <a class="el" href="../../d9/d51/format__sln_8c_source.html#l00070">slinear_seek()</a>, <a class="el" href="../../dd/d18/format__vox_8c_source.html#l00070">vox_seek()</a>, and <a class="el" href="../../dc/d0b/format__wav_8c_source.html#l00453">wav_seek()</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a616155d421abde65671e234068f5d434"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a616155d421abde65671e234068f5d434">&#9670;&nbsp;</a></span>ast_file_on_file</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* ast_file_on_file) (const char *dir_name, const char *filename, void *obj)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback called for each file found when reading directories. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dir_name</td><td>the name of the directory </td></tr>
    <tr><td class="paramname">filename</td><td>the name of the file </td></tr>
    <tr><td class="paramname">obj</td><td>user data object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>non-zero to stop reading, otherwise zero to continue</dd></dl>
<dl class="section note"><dt>Note</dt><dd>dir_name is not processed by realpath or other functions, symbolic links are not resolved. This ensures dir_name always starts with the exact string originally passed to <a class="el" href="../../d2/d4d/file_8h.html#a161bd0a2b265dadb6de61e4055f27e84">ast_file_read_dir</a> or <a class="el" href="../../d6/d13/file_8c.html#a650841bb643208a8541172297dba1d99">ast_file_read_dirs</a>. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d2/d4d/file_8h_source.html#l00152">152</a> of file <a class="el" href="../../d2/d4d/file_8h_source.html">file.h</a>.</p>

</div>
</div>
<a id="a2d5138e99197a1d01f7a2ed07830476e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d5138e99197a1d01f7a2ed07830476e">&#9670;&nbsp;</a></span>ast_waitstream_fr_cb</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void() ast_waitstream_fr_cb(struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, long ms, enum <a class="el" href="../../d2/d4d/file_8h.html#a04986aeb2b288409f7828a67998d7d6f">ast_waitstream_fr_cb_values</a> <a class="el" href="../../d5/d85/structval.html">val</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>callback used during dtmf controlled file playback to indicate location of playback in a file after rewinding or fastfowarding a file. </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a227">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d2/d4d/file_8h_source.html#l00065">65</a> of file <a class="el" href="../../d2/d4d/file_8h_source.html">file.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a04986aeb2b288409f7828a67998d7d6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04986aeb2b288409f7828a67998d7d6f">&#9670;&nbsp;</a></span>ast_waitstream_fr_cb_values</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d2/d4d/file_8h.html#a04986aeb2b288409f7828a67998d7d6f">ast_waitstream_fr_cb_values</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The type of event associated with a ast_waitstream_fr_cb invocation </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a04986aeb2b288409f7828a67998d7d6fa551635958f534ccf4cb21c6ea0007bad"></a>AST_WAITSTREAM_CB_REWIND&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a04986aeb2b288409f7828a67998d7d6fa535f1a556fea89b06556c32a3356ba63"></a>AST_WAITSTREAM_CB_FASTFORWARD&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a04986aeb2b288409f7828a67998d7d6faabc2f8e0278809e40cec7eb54feb6228"></a>AST_WAITSTREAM_CB_START&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d2/d4d/file_8h_source.html#l00054">54</a> of file <a class="el" href="../../d2/d4d/file_8h_source.html">file.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;                                 {</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;   <a class="code" href="../../d2/d4d/file_8h.html#a04986aeb2b288409f7828a67998d7d6fa551635958f534ccf4cb21c6ea0007bad">AST_WAITSTREAM_CB_REWIND</a> = 1,</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;   <a class="code" href="../../d2/d4d/file_8h.html#a04986aeb2b288409f7828a67998d7d6fa535f1a556fea89b06556c32a3356ba63">AST_WAITSTREAM_CB_FASTFORWARD</a>,</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;   <a class="code" href="../../d2/d4d/file_8h.html#a04986aeb2b288409f7828a67998d7d6faabc2f8e0278809e40cec7eb54feb6228">AST_WAITSTREAM_CB_START</a></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;};</div><div class="ttc" id="file_8h_html_a04986aeb2b288409f7828a67998d7d6faabc2f8e0278809e40cec7eb54feb6228"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a04986aeb2b288409f7828a67998d7d6faabc2f8e0278809e40cec7eb54feb6228">AST_WAITSTREAM_CB_START</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00057">file.h:57</a></div></div>
<div class="ttc" id="file_8h_html_a04986aeb2b288409f7828a67998d7d6fa551635958f534ccf4cb21c6ea0007bad"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a04986aeb2b288409f7828a67998d7d6fa551635958f534ccf4cb21c6ea0007bad">AST_WAITSTREAM_CB_REWIND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00055">file.h:55</a></div></div>
<div class="ttc" id="file_8h_html_a04986aeb2b288409f7828a67998d7d6fa535f1a556fea89b06556c32a3356ba63"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a04986aeb2b288409f7828a67998d7d6fa535f1a556fea89b06556c32a3356ba63">AST_WAITSTREAM_CB_FASTFORWARD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00056">file.h:56</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a618e3120b6d019312ef2d617d9f14571"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a618e3120b6d019312ef2d617d9f14571">&#9670;&nbsp;</a></span>ast_applystream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_applystream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *&#160;</td>
          <td class="paramname"><em>s</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Applys a open stream to a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>channel to work </td></tr>
    <tr><td class="paramname">s</td><td><a class="el" href="../../db/dbc/structast__filestream.html" title="This structure is allocated by file.c in one chunk, together with buf_size and desc_size bytes of mem...">ast_filestream</a> to apply </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on failure. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l01020">1020</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00116">ast_filestream::owner</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/d13/file_8c_source.html#l01250">ast_streamfile()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02616">handle_getoption()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02899">handle_recordfile()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02557">handle_streamfile()</a>, and <a class="el" href="../../d4/d5b/app__speech__utils_8c_source.html#l00676">speech_streamfile()</a>.</p>
<div class="fragment"><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;{</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;   s-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a> = chan;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;}</div><div class="ttc" id="structast__filestream_html_a9241175b397dfd032c4cadbc8c9c2d05"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#a9241175b397dfd032c4cadbc8c9c2d05">ast_filestream::owner</a></div><div class="ttdeci">struct ast_channel * owner</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00116">mod_format.h:116</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab53bd2c3c55d509790c7f7620aac6373"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab53bd2c3c55d509790c7f7620aac6373">&#9670;&nbsp;</a></span>ast_closestream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_closestream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *&#160;</td>
          <td class="paramname"><em>f</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes a stream. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">f</td><td>filestream to close Close a playback or recording stream </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on failure. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a315">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l01068">1068</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00357">filestream_close()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01580">__ast_play_and_record()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02548">ast_hangup()</a>, <a class="el" href="../../d3/d97/res__musiconhold_8c_source.html#l00313">ast_moh_files_next()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00305">ast_monitor_start()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00461">ast_monitor_stop()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01309">ast_readfile()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00187">ast_stopstream()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01361">ast_writefile()</a>, <a class="el" href="../../dd/d32/app__dictate_8c_source.html#l00087">dictate_exec()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00514">filehelper()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00383">filestream_destructor()</a>, <a class="el" href="../../de/d26/app__externalivr_8c_source.html#l00188">gen_closestream()</a>, <a class="el" href="../../d0/ddd/res__convert_8c_source.html#l00064">handle_cli_file_convert()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02899">handle_recordfile()</a>, <a class="el" href="../../d3/d97/res__musiconhold_8c_source.html#l01878">local_ast_moh_stop()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l00467">mixmonitor_ds_close_fs()</a>, <a class="el" href="../../d3/d97/res__musiconhold_8c_source.html#l00281">moh_files_release()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l06315">msg_create_from_file()</a>, <a class="el" href="../../dd/dd5/app__record_8c_source.html#l00221">record_exec()</a>, and <a class="el" href="../../df/d44/app__meetme_8c_source.html#l05681">recordthread()</a>.</p>
<div class="fragment"><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;{</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;   <span class="comment">/* This used to destroy the filestream, but it now just decrements a refcount.</span></div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;<span class="comment">    * We close the stream in order to quit queuing frames now, because we might</span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;<span class="comment">    * change the writeformat, which could result in a subsequent write error, if</span></div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;<span class="comment">    * the format is different. */</span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;   <span class="keywordflow">if</span> (f == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;   }</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;   <a class="code" href="../../d6/d13/file_8c.html#a8897ad04ddc571f5ac100a1b53774ec2">filestream_close</a>(f);</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(f, -1);</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;}</div><div class="ttc" id="file_8c_html_a8897ad04ddc571f5ac100a1b53774ec2"><div class="ttname"><a href="../../d6/d13/file_8c.html#a8897ad04ddc571f5ac100a1b53774ec2">filestream_close</a></div><div class="ttdeci">static void filestream_close(struct ast_filestream *f)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00357">file.c:357</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeac4fbc3c21ddf2548bc7ae7fab717f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeac4fbc3c21ddf2548bc7ae7fab717f3">&#9670;&nbsp;</a></span>ast_file_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_file_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize file stuff</p>
<p>Initializes all the various file stuff. Basically just registers the cli stuff Returns 0 all the time</p>
<p>Provided by file.c </p>

<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l01983">1983</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00265">ast_cli_register_multiple</a>, <a class="el" href="../../d0/d0a/format_8h.html#a50026f039eb9220ff618fa7a4f3a1da1">ast_format_register_type()</a>, <a class="el" href="../../d0/d0a/format_8h.html#a10e266850ef68354d61ff7207c62781b">ast_format_unregister_type()</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00019">ast_register_cleanup()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01976">file_shutdown()</a>, and <a class="el" href="../../dd/d79/stasis_8h_source.html#l01501">STASIS_MESSAGE_TYPE_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;{</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(<a class="code" href="../../d0/d0a/format_8h.html#a50026f039eb9220ff618fa7a4f3a1da1">ast_format_register_type</a>);</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(<a class="code" href="../../d0/d0a/format_8h.html#a10e266850ef68354d61ff7207c62781b">ast_format_unregister_type</a>);</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a>(<a class="code" href="../../d6/d13/file_8c.html#abaef9acc752363813eb89bb0b72721a7">cli_file</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d6/d13/file_8c.html#abaef9acc752363813eb89bb0b72721a7">cli_file</a>));</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;   <a class="code" href="../../db/db2/asterisk_8h.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a>(<a class="code" href="../../d6/d13/file_8c.html#a4af69640cb6edeb12525ed8a85e26ca4">file_shutdown</a>);</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="file_8c_html_abaef9acc752363813eb89bb0b72721a7"><div class="ttname"><a href="../../d6/d13/file_8c.html#abaef9acc752363813eb89bb0b72721a7">cli_file</a></div><div class="ttdeci">static struct ast_cli_entry cli_file[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01972">file.c:1972</a></div></div>
<div class="ttc" id="stasis_8h_html_a70cd046d8e3fd50de5c51aecb2830d2a"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a></div><div class="ttdeci">#define STASIS_MESSAGE_TYPE_INIT(name)</div><div class="ttdoc">Boiler-plate messaging macro for initializing message types. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l01501">stasis.h:1501</a></div></div>
<div class="ttc" id="cli_8h_html_aea8910ed9e301e7f741f87942c244eac"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a></div><div class="ttdeci">#define ast_cli_register_multiple(e, len)</div><div class="ttdoc">Register multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00265">cli.h:265</a></div></div>
<div class="ttc" id="file_8c_html_a4af69640cb6edeb12525ed8a85e26ca4"><div class="ttname"><a href="../../d6/d13/file_8c.html#a4af69640cb6edeb12525ed8a85e26ca4">file_shutdown</a></div><div class="ttdeci">static void file_shutdown(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01976">file.c:1976</a></div></div>
<div class="ttc" id="asterisk_8h_html_a412442e1beffe5bec07ed2e9ea72afc3"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a></div><div class="ttdeci">int ast_register_cleanup(void(*func)(void))</div><div class="ttdoc">Register a function to be executed before Asterisk gracefully exits. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00019">clicompat.c:19</a></div></div>
<div class="ttc" id="format_8h_html_a10e266850ef68354d61ff7207c62781b"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a10e266850ef68354d61ff7207c62781b">ast_format_unregister_type</a></div><div class="ttdeci">struct stasis_message_type * ast_format_unregister_type(void)</div><div class="ttdoc">Get the message type used for signaling a format unregistration. </div></div>
<div class="ttc" id="format_8h_html_a50026f039eb9220ff618fa7a4f3a1da1"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a50026f039eb9220ff618fa7a4f3a1da1">ast_format_register_type</a></div><div class="ttdeci">struct stasis_message_type * ast_format_register_type(void)</div><div class="ttdoc">Get the message type used for signaling a format registration. </div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a650841bb643208a8541172297dba1d99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a650841bb643208a8541172297dba1d99">&#9670;&nbsp;</a></span>ast_file_read_dirs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_file_read_dirs </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dir_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d4d/file_8h.html#a616155d421abde65671e234068f5d434">ast_file_on_file</a>&#160;</td>
          <td class="paramname"><em>on_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_depth</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Recursively iterate through files and directories up to max_depth. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dir_name</td><td>the name of the directory to search </td></tr>
    <tr><td class="paramname">on_file</td><td>callback called on each file </td></tr>
    <tr><td class="paramname">obj</td><td>user data object </td></tr>
    <tr><td class="paramname">max_depth</td><td>re-curse into sub-directories up to a given maximum (-1 = infinite) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 or errno on failure, otherwise 0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l01231">1231</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d13/file_8c_source.html#l01113">__ast_file_read_dirs()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, and <a class="el" href="../../d6/d13/file_8c_source.html#l01228">read_dirs_lock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/dfe/media__index_8c_source.html#l00587">ast_media_index_update_for_file()</a>, <a class="el" href="../../d0/dd5/test__file_8c_source.html#l00136">AST_TEST_DEFINE()</a>, <a class="el" href="../../d3/d96/loader_8c_source.html#l01361">module_load_helper()</a>, and <a class="el" href="../../d3/d74/stored_8c_source.html#l00290">stasis_app_stored_recording_find_all()</a>.</p>
<div class="fragment"><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;{</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;   <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = 0;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;<span class="preprocessor">#if !defined(__GLIBC__)</span></div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d6/d13/file_8c.html#a9c3cc651725e456bc129d10e1f10271e">read_dirs_lock</a>);</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;   res = <a class="code" href="../../d6/d13/file_8c.html#aa10f8e4185198079a0cecf2278e9144a">__ast_file_read_dirs</a>(dir_name, on_file, obj, max_depth);</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;<span class="preprocessor">#if !defined(__GLIBC__)</span></div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d6/d13/file_8c.html#a9c3cc651725e456bc129d10e1f10271e">read_dirs_lock</a>);</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;}</div><div class="ttc" id="file_8c_html_a9c3cc651725e456bc129d10e1f10271e"><div class="ttname"><a href="../../d6/d13/file_8c.html#a9c3cc651725e456bc129d10e1f10271e">read_dirs_lock</a></div><div class="ttdeci">static ast_mutex_t read_dirs_lock</div><div class="ttdoc">Lock to hold when iterating over directories. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01228">file.c:1228</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="file_8c_html_aa10f8e4185198079a0cecf2278e9144a"><div class="ttname"><a href="../../d6/d13/file_8c.html#aa10f8e4185198079a0cecf2278e9144a">__ast_file_read_dirs</a></div><div class="ttdeci">static int __ast_file_read_dirs(const char *path, ast_file_on_file on_file, void *obj, int max_depth)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01113">file.c:1113</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aab7814972ae21f8cc68e1d62b97fc88b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab7814972ae21f8cc68e1d62b97fc88b">&#9670;&nbsp;</a></span>ast_filecopy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_filecopy </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>oldname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>newname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copies a file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">oldname</td><td>name of the file you wish to copy (minus extension) </td></tr>
    <tr><td class="paramname">newname</td><td>name you wish the file to be copied to (minus extension) </td></tr>
    <tr><td class="paramname">fmt</td><td>the format of the file Copy a given file in a given format, or if fmt is NULL, then do so for all </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l01108">1108</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d13/file_8c_source.html#l00500">ACTION_COPY</a>, and <a class="el" href="../../d6/d13/file_8c_source.html#l00514">filehelper()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l04694">copy_plain_file()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l06315">msg_create_from_file()</a>, and <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l07948">vm_forwardoptions()</a>.</p>
<div class="fragment"><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;{</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d13/file_8c.html#a083568a210b02e2a6985923817b6e4dc">filehelper</a>(filename, filename2, fmt, <a class="code" href="../../d6/d13/file_8c.html#a8944b5bc4c79736a07589a3761113d01a7930542f31154bb3b8a33654af6cfd4f">ACTION_COPY</a>);</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;}</div><div class="ttc" id="file_8c_html_a083568a210b02e2a6985923817b6e4dc"><div class="ttname"><a href="../../d6/d13/file_8c.html#a083568a210b02e2a6985923817b6e4dc">filehelper</a></div><div class="ttdeci">static int filehelper(const char *filename, const void *arg2, const char *fmt, const enum file_action action)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00514">file.c:514</a></div></div>
<div class="ttc" id="file_8c_html_a8944b5bc4c79736a07589a3761113d01a7930542f31154bb3b8a33654af6cfd4f"><div class="ttname"><a href="../../d6/d13/file_8c.html#a8944b5bc4c79736a07589a3761113d01a7930542f31154bb3b8a33654af6cfd4f">ACTION_COPY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00500">file.c:500</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adb15d6efecc1a13b8835bee6d3562ddb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb15d6efecc1a13b8835bee6d3562ddb">&#9670;&nbsp;</a></span>ast_filedelete()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_filedelete </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes a file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>name of the file you wish to delete (minus the extension) </td></tr>
    <tr><td class="paramname">fmt</td><td>of the file Delete a given file in a given format, or if fmt is NULL, then do so for all </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a319">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l01098">1098</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d13/file_8c_source.html#l00497">ACTION_DELETE</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00514">filehelper()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01580">__ast_play_and_record()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l02615">announce_thread()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00305">ast_monitor_start()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00461">ast_monitor_stop()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l02480">async_delete_name_rec_task()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l02331">conf_free()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l02399">conf_rec_name()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l03177">conf_run()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l02544">confbridge_exec()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02254">dial_exec_full()</a>, <a class="el" href="../../d0/ddd/res__convert_8c_source.html#l00064">handle_cli_file_convert()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l01912">leave_voicemail()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l06315">msg_create_from_file()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l08843">play_message()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l15504">play_record_review()</a>, <a class="el" href="../../dd/dd5/app__record_8c_source.html#l00221">record_exec()</a>, <a class="el" href="../../d8/d4c/res__stasis__recording_8c_source.html#l00519">recording_cancel()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02075">setup_privacy_args()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l01928">valid_priv_reply()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l02021">vm_allocate_dh()</a>, and <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l01630">vm_delete()</a>.</p>
<div class="fragment"><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;{</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d13/file_8c.html#a083568a210b02e2a6985923817b6e4dc">filehelper</a>(filename, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, fmt, <a class="code" href="../../d6/d13/file_8c.html#a8944b5bc4c79736a07589a3761113d01a92f147f69db5353fd464f636eaf02904">ACTION_DELETE</a>);</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;}</div><div class="ttc" id="file_8c_html_a8944b5bc4c79736a07589a3761113d01a92f147f69db5353fd464f636eaf02904"><div class="ttname"><a href="../../d6/d13/file_8c.html#a8944b5bc4c79736a07589a3761113d01a92f147f69db5353fd464f636eaf02904">ACTION_DELETE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00497">file.c:497</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="file_8c_html_a083568a210b02e2a6985923817b6e4dc"><div class="ttname"><a href="../../d6/d13/file_8c.html#a083568a210b02e2a6985923817b6e4dc">filehelper</a></div><div class="ttdeci">static int filehelper(const char *filename, const void *arg2, const char *fmt, const enum file_action action)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00514">file.c:514</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab9b8ab8e5ee34c9b4da25779255cafde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9b8ab8e5ee34c9b4da25779255cafde">&#9670;&nbsp;</a></span>ast_fileexists()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_fileexists </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>preflang</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks for the existence of a given file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>name of the file you wish to check, minus the extension </td></tr>
    <tr><td class="paramname">fmt</td><td>the format you wish to check (the extension) </td></tr>
    <tr><td class="paramname">preflang</td><td>(the preferred language you wisht to find the file in) See if a given file exists in a given format. If fmt is NULL, any format is accepted. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0,false.</td><td>The file does not exist </td></tr>
    <tr><td class="paramname">1,true.</td><td>The file does exist. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l01086">1086</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00706">fileexists_core()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d44/app__meetme_8c_source.html#l02615">announce_thread()</a>, <a class="el" href="../../dd/d55/app__followme_8c_source.html#l01339">app_exec()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l00063">ast_get_character_str()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l00294">ast_get_digit_str()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l00195">ast_get_phonetic_str()</a>, <a class="el" href="../../d3/d97/res__musiconhold_8c_source.html#l00313">ast_moh_files_next()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00305">ast_monitor_start()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00461">ast_monitor_stop()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l14480">AST_TEST_DEFINE()</a>, <a class="el" href="../../dc/d04/app__chanspy_8c_source.html#l00892">common_exec()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l03177">conf_run()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02254">dial_exec_full()</a>, <a class="el" href="../../de/d26/app__externalivr_8c_source.html#l00624">eivr_comm()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l08269">forward_message()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l07819">get_folder()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l01573">invent_message()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l01912">leave_voicemail()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l02966">meetme_menu_admin_extended()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l02458">minivm_delete_exec()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l06315">msg_create_from_file()</a>, <a class="el" href="../../d3/da4/app__page_8c_source.html#l00250">page_exec()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l03916">play_file()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l08843">play_message()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l11359">play_message_by_id_helper()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l08716">play_message_callerid()</a>, <a class="el" href="../../d2/de3/app__readexten_8c_source.html#l00119">readexten_exec()</a>, <a class="el" href="../../dd/dd5/app__record_8c_source.html#l00221">record_exec()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l03434">retrydial_exec()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l14359">sayname()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02075">setup_privacy_args()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l00966">sound_file_exists()</a>, <a class="el" href="../../d8/d4c/res__stasis__recording_8c_source.html#l00370">stasis_app_control_record()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l01928">valid_priv_reply()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l02021">vm_allocate_dh()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l10361">vm_intro()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l16487">vm_msg_play()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l10646">vm_newuser_setup()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l10744">vm_options()</a>, and <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l10888">vm_tempgreeting()</a>.</p>
<div class="fragment"><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;{</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;   <span class="keywordtype">int</span> buflen;</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;   <span class="keywordflow">if</span> (preflang == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      preflang = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;   buflen = strlen(preflang) + strlen(filename) + 4;  <span class="comment">/* room for everything */</span></div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;   buf = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(buflen);</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d13/file_8c.html#acbaf6de590d8e1505c484b44d278e4f8">fileexists_core</a>(filename, fmt, preflang, buf, buflen, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) ? 1 : 0;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="file_8c_html_acbaf6de590d8e1505c484b44d278e4f8"><div class="ttname"><a href="../../d6/d13/file_8c.html#acbaf6de590d8e1505c484b44d278e4f8">fileexists_core</a></div><div class="ttdeci">static int fileexists_core(const char *filename, const char *fmt, const char *preflang, char *buf, int buflen, struct ast_format_cap *result_cap)</div><div class="ttdoc">helper routine to locate a file with a given format and language preference. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00706">file.c:706</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a57ea6065cde7fb5258c1f6a4595643ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57ea6065cde7fb5258c1f6a4595643ba">&#9670;&nbsp;</a></span>ast_filerename()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_filerename </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>oldname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>newname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Renames a file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">oldname</td><td>the name of the file you wish to act upon (minus the extension) </td></tr>
    <tr><td class="paramname">newname</td><td>the name you wish to rename the file to (minus the extension) </td></tr>
    <tr><td class="paramname">fmt</td><td>the format of the file Rename a given file in a given format, or if fmt is NULL, then do so for all </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>-1 on failure </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a318">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l01103">1103</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d13/file_8c_source.html#l00498">ACTION_RENAME</a>, and <a class="el" href="../../d6/d13/file_8c_source.html#l00514">filehelper()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01580">__ast_play_and_record()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00461">ast_monitor_stop()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l08269">forward_message()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l06601">leave_voicemail()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l06315">msg_create_from_file()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l15504">play_record_review()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l04554">rename_file()</a>, and <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l07948">vm_forwardoptions()</a>.</p>
<div class="fragment"><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;{</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d13/file_8c.html#a083568a210b02e2a6985923817b6e4dc">filehelper</a>(filename, filename2, fmt, <a class="code" href="../../d6/d13/file_8c.html#a8944b5bc4c79736a07589a3761113d01ae266c94c6d3f3d0940c34c798e5842a6">ACTION_RENAME</a>);</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;}</div><div class="ttc" id="file_8c_html_a8944b5bc4c79736a07589a3761113d01ae266c94c6d3f3d0940c34c798e5842a6"><div class="ttname"><a href="../../d6/d13/file_8c.html#a8944b5bc4c79736a07589a3761113d01ae266c94c6d3f3d0940c34c798e5842a6">ACTION_RENAME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00498">file.c:498</a></div></div>
<div class="ttc" id="file_8c_html_a083568a210b02e2a6985923817b6e4dc"><div class="ttname"><a href="../../d6/d13/file_8c.html#a083568a210b02e2a6985923817b6e4dc">filehelper</a></div><div class="ttdeci">static int filehelper(const char *filename, const void *arg2, const char *fmt, const enum file_action action)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00514">file.c:514</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa526fd9bb57d7d9afac2113c30d236f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa526fd9bb57d7d9afac2113c30d236f8">&#9670;&nbsp;</a></span>ast_format_str_reduce()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_format_str_reduce </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fmts</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Remove duplicate formats from a format string.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fmts</td><td>a format string, this string will be modified </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>error </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the reduced format string, this is a pointer to fmts </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l01826">1826</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d2/d4d/file_8h_source.html#l00044">AST_MAX_FORMATS</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00045">ast_format_def::exts</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00351">exts_compare</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01092">first</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep()</a>, and <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l13680">actual_load_config()</a>, and <a class="el" href="../../d8/d4b/test__ast__format__str__reduce_8c_source.html#l00077">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;{</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d57/structast__format__def.html">ast_format_def</a> *f;</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d57/structast__format__def.html">ast_format_def</a> *fmts_ptr[<a class="code" href="../../d2/d4d/file_8h.html#aa932272aad0c1610b79e9b04e54e57ea">AST_MAX_FORMATS</a>];</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;   <span class="keywordtype">char</span> *fmts_str[<a class="code" href="../../d2/d4d/file_8h.html#aa932272aad0c1610b79e9b04e54e57ea">AST_MAX_FORMATS</a>];</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;   <span class="keywordtype">char</span> *stringp, *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;   <span class="keywordtype">char</span> *orig = fmts;</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;   <span class="keywordtype">int</span> i, j, x, <a class="code" href="../../df/d44/app__meetme_8c.html#a18b6f1cf748d864dd085819a7d4e6680">first</a>, found = 0;</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = strlen(fmts) + 1;</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../df/d8d/structformats.html">formats</a>)) {</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to lock format list\n&quot;</span>);</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;   }</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;   stringp = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(fmts);</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;   <span class="keywordflow">for</span> (x = 0; (type = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;stringp, <span class="stringliteral">&quot;|&quot;</span>)) &amp;&amp; x &lt; <a class="code" href="../../d2/d4d/file_8h.html#aa932272aad0c1610b79e9b04e54e57ea">AST_MAX_FORMATS</a>; x++) {</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../df/d8d/structformats.html">formats</a>, f, <a class="code" href="../../d0/d57/structast__format__def.html#acbcd73bcf7463776105fa7d63a1f7019">list</a>) {</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d13/file_8c.html#ad60e6b6fb8b8078dc9e4deda4ffbde10">exts_compare</a>(f-&gt;<a class="code" href="../../d0/d57/structast__format__def.html#ade71f534a49925f1955a1598556219e2">exts</a>, type)) {</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;            found = 1;</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;         }</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;      }</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;      fmts_str[x] = <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;      <span class="keywordflow">if</span> (found) {</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;         fmts_ptr[x] = f;</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;         fmts_ptr[x] = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;      }</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;   }</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../df/d8d/structformats.html">formats</a>);</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;   first = 1;</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; x; i++) {</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;      <span class="comment">/* ignore invalid entries */</span></div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;      <span class="keywordflow">if</span> (!fmts_ptr[i]) {</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;ignoring unknown format &#39;%s&#39;\n&quot;</span>, fmts_str[i]);</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;      }</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;      <span class="comment">/* special handling for the first entry */</span></div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;      <span class="keywordflow">if</span> (first) {</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;         res = snprintf(fmts, len, <span class="stringliteral">&quot;%s&quot;</span>, fmts_str[i]);</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;         fmts += res;</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;         len -= res;</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;         first = 0;</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;      }</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;      found = 0;</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;      <span class="keywordflow">for</span> (j = 0; j &lt; i; j++) {</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;         <span class="comment">/* this is a duplicate */</span></div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;         <span class="keywordflow">if</span> (fmts_ptr[j] == fmts_ptr[i]) {</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;            found = 1;</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;         }</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;      }</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;      <span class="keywordflow">if</span> (!found) {</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;         res = snprintf(fmts, len, <span class="stringliteral">&quot;|%s&quot;</span>, fmts_str[i]);</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;         fmts += res;</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;         len -= res;</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;      }</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;   }</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;   <span class="keywordflow">if</span> (first) {</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;no known formats found in format list (%s)\n&quot;</span>, orig);</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;   }</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;   <span class="keywordflow">return</span> orig;</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;}</div><div class="ttc" id="structast__format__def_html_ade71f534a49925f1955a1598556219e2"><div class="ttname"><a href="../../d0/d57/structast__format__def.html#ade71f534a49925f1955a1598556219e2">ast_format_def::exts</a></div><div class="ttdeci">char exts[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00045">mod_format.h:45</a></div></div>
<div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="file_8c_html_ad60e6b6fb8b8078dc9e4deda4ffbde10"><div class="ttname"><a href="../../d6/d13/file_8c.html#ad60e6b6fb8b8078dc9e4deda4ffbde10">exts_compare</a></div><div class="ttdeci">#define exts_compare(list, type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00351">file.c:351</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__format__def_html"><div class="ttname"><a href="../../d0/d57/structast__format__def.html">ast_format_def</a></div><div class="ttdoc">Each supported file format is described by the following structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00043">mod_format.h:43</a></div></div>
<div class="ttc" id="structast__format__def_html_acbcd73bcf7463776105fa7d63a1f7019"><div class="ttname"><a href="../../d0/d57/structast__format__def.html#acbcd73bcf7463776105fa7d63a1f7019">ast_format_def::list</a></div><div class="ttdeci">struct ast_format_def::@276 list</div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="structformats_html"><div class="ttname"><a href="../../df/d8d/structformats.html">formats</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00069">file.c:69</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a18b6f1cf748d864dd085819a7d4e6680"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a18b6f1cf748d864dd085819a7d4e6680">first</a></div><div class="ttdeci">struct sla_ringing_trunk * first</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01092">app_meetme.c:1092</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
<div class="ttc" id="file_8h_html_aa932272aad0c1610b79e9b04e54e57ea"><div class="ttname"><a href="../../d2/d4d/file_8h.html#aa932272aad0c1610b79e9b04e54e57ea">AST_MAX_FORMATS</a></div><div class="ttdeci">#define AST_MAX_FORMATS</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00044">file.h:44</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acdec85bd5a62872c437b223d62e616fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdec85bd5a62872c437b223d62e616fa">&#9670;&nbsp;</a></span>ast_get_extension_for_mime_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_get_extension_for_mime_type </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>mime_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>capacity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a suitable filename extension for the given MIME type. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mime_type</td><td>The MIME type for which to find extensions </td></tr>
    <tr><td class="paramname">buffer</td><td>A pointer to a buffer to receive the extension </td></tr>
    <tr><td class="paramname">capacity</td><td>The size of 'buffer' in bytes</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>if an extension was found for the provided MIME type </td></tr>
    <tr><td class="paramname">0</td><td>if the MIME type was not found </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l01951">1951</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00045">ast_format_def::exts</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00069">formats::lock</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00047">ast_format_def::mime_types</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00592">SCOPED_RDLOCK</a>, and <a class="el" href="../../d6/d13/file_8c_source.html#l00338">type_in_list()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/dfb/media__cache_8c_source.html#l00150">bucket_file_update_path()</a>.</p>
<div class="fragment"><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;{</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d57/structast__format__def.html">ast_format_def</a> *f;</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#aa65b589fd265c905f3682c118f1e02d8">SCOPED_RDLOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;<a class="code" href="../../df/d8d/structformats.html">formats</a>.<a class="code" href="../../df/d8d/structformats.html#ace4e0066a5b24f84b90536e9906619f6">lock</a>);</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(buffer &amp;&amp; capacity);</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../df/d8d/structformats.html">formats</a>, f, <a class="code" href="../../d0/d57/structast__format__def.html#acbcd73bcf7463776105fa7d63a1f7019">list</a>) {</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d13/file_8c.html#a83eba7ef51aed9cd2463a650e497e359">type_in_list</a>(f-&gt;<a class="code" href="../../d0/d57/structast__format__def.html#aa2e3f2c7460ba018b1b608f5b819a2e2">mime_types</a>, mime_type, strcasecmp)) {</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;         <span class="keywordtype">size_t</span> item_len = strcspn(f-&gt;<a class="code" href="../../d0/d57/structast__format__def.html#ade71f534a49925f1955a1598556219e2">exts</a>, <span class="stringliteral">&quot;|&quot;</span>);</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;         <span class="keywordtype">size_t</span> bytes_written = snprintf(buffer, capacity, <span class="stringliteral">&quot;.%.*s&quot;</span>, (<span class="keywordtype">int</span>) item_len, f-&gt;<a class="code" href="../../d0/d57/structast__format__def.html#ade71f534a49925f1955a1598556219e2">exts</a>);</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;         <span class="keywordflow">if</span> (bytes_written &lt; capacity) {</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;            <span class="comment">/* Only return success if we didn&#39;t truncate */</span></div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;            <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;         }</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;      }</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;   }</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;}</div><div class="ttc" id="structast__format__def_html_ade71f534a49925f1955a1598556219e2"><div class="ttname"><a href="../../d0/d57/structast__format__def.html#ade71f534a49925f1955a1598556219e2">ast_format_def::exts</a></div><div class="ttdeci">char exts[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00045">mod_format.h:45</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structformats_html_ace4e0066a5b24f84b90536e9906619f6"><div class="ttname"><a href="../../df/d8d/structformats.html#ace4e0066a5b24f84b90536e9906619f6">formats::lock</a></div><div class="ttdeci">ast_rwlock_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00069">file.c:69</a></div></div>
<div class="ttc" id="structast__format__def_html"><div class="ttname"><a href="../../d0/d57/structast__format__def.html">ast_format_def</a></div><div class="ttdoc">Each supported file format is described by the following structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00043">mod_format.h:43</a></div></div>
<div class="ttc" id="structast__format__def_html_acbcd73bcf7463776105fa7d63a1f7019"><div class="ttname"><a href="../../d0/d57/structast__format__def.html#acbcd73bcf7463776105fa7d63a1f7019">ast_format_def::list</a></div><div class="ttdeci">struct ast_format_def::@276 list</div></div>
<div class="ttc" id="lock_8h_html_aa65b589fd265c905f3682c118f1e02d8"><div class="ttname"><a href="../../dd/d42/lock_8h.html#aa65b589fd265c905f3682c118f1e02d8">SCOPED_RDLOCK</a></div><div class="ttdeci">#define SCOPED_RDLOCK(varname, lock)</div><div class="ttdoc">scoped lock specialization for read locks </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00592">lock.h:592</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="structformats_html"><div class="ttname"><a href="../../df/d8d/structformats.html">formats</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00069">file.c:69</a></div></div>
<div class="ttc" id="structast__format__def_html_aa2e3f2c7460ba018b1b608f5b819a2e2"><div class="ttname"><a href="../../d0/d57/structast__format__def.html#aa2e3f2c7460ba018b1b608f5b819a2e2">ast_format_def::mime_types</a></div><div class="ttdeci">char mime_types[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00047">mod_format.h:47</a></div></div>
<div class="ttc" id="file_8c_html_a83eba7ef51aed9cd2463a650e497e359"><div class="ttname"><a href="../../d6/d13/file_8c.html#a83eba7ef51aed9cd2463a650e497e359">type_in_list</a></div><div class="ttdeci">static int type_in_list(const char *list, const char *type, int(*cmp)(const char *s1, const char *s2))</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00338">file.c:338</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a45a9a43d68a284ce9d8467ec9400660c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45a9a43d68a284ce9d8467ec9400660c">&#9670;&nbsp;</a></span>ast_get_format_for_file_ext()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a>* ast_get_format_for_file_ext </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file_ext</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the <a class="el" href="../../d0/d98/structast__format.html" title="Definition of a media format. ">ast_format</a> associated with the given file extension. </p>
<dl class="section since"><dt>Since</dt><dd>12</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file_ext</td><td>The file extension for which to find the format</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>if not found </td></tr>
    <tr><td class="paramname">A</td><td>pointer to the <a class="el" href="../../d0/d98/structast__format.html" title="Definition of a media format. ">ast_format</a> associated with this file extension </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l01938">1938</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00045">ast_format_def::exts</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00351">exts_compare</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00048">ast_format_def::format</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00069">formats::lock</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dd/d42/lock_8h_source.html#l00592">SCOPED_RDLOCK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00634">ast_ari_bridges_record()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00748">ast_ari_channels_record()</a>, <a class="el" href="../../d6/d1b/resource__recordings_8c_source.html#l00101">ast_ari_recordings_get_stored_file()</a>, <a class="el" href="../../df/dfb/media__cache_8c_source.html#l00150">bucket_file_update_path()</a>, <a class="el" href="../../d3/d74/stored_8c_source.html#l00135">is_recording()</a>, and <a class="el" href="../../de/dfe/media__index_8c_source.html#l00346">process_media_file()</a>.</p>
<div class="fragment"><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;{</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d57/structast__format__def.html">ast_format_def</a> *f;</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#aa65b589fd265c905f3682c118f1e02d8">SCOPED_RDLOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;<a class="code" href="../../df/d8d/structformats.html">formats</a>.<a class="code" href="../../df/d8d/structformats.html#ace4e0066a5b24f84b90536e9906619f6">lock</a>);</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../df/d8d/structformats.html">formats</a>, f, <a class="code" href="../../d0/d57/structast__format__def.html#acbcd73bcf7463776105fa7d63a1f7019">list</a>) {</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d13/file_8c.html#ad60e6b6fb8b8078dc9e4deda4ffbde10">exts_compare</a>(f-&gt;<a class="code" href="../../d0/d57/structast__format__def.html#ade71f534a49925f1955a1598556219e2">exts</a>, file_ext)) {</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;         <span class="keywordflow">return</span> f-&gt;<a class="code" href="../../d0/d57/structast__format__def.html#ab425a484a0916077c5a30d9d7b229b44">format</a>;</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;      }</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;   }</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;}</div><div class="ttc" id="structast__format__def_html_ade71f534a49925f1955a1598556219e2"><div class="ttname"><a href="../../d0/d57/structast__format__def.html#ade71f534a49925f1955a1598556219e2">ast_format_def::exts</a></div><div class="ttdeci">char exts[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00045">mod_format.h:45</a></div></div>
<div class="ttc" id="file_8c_html_ad60e6b6fb8b8078dc9e4deda4ffbde10"><div class="ttname"><a href="../../d6/d13/file_8c.html#ad60e6b6fb8b8078dc9e4deda4ffbde10">exts_compare</a></div><div class="ttdeci">#define exts_compare(list, type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00351">file.c:351</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structformats_html_ace4e0066a5b24f84b90536e9906619f6"><div class="ttname"><a href="../../df/d8d/structformats.html#ace4e0066a5b24f84b90536e9906619f6">formats::lock</a></div><div class="ttdeci">ast_rwlock_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00069">file.c:69</a></div></div>
<div class="ttc" id="structast__format__def_html"><div class="ttname"><a href="../../d0/d57/structast__format__def.html">ast_format_def</a></div><div class="ttdoc">Each supported file format is described by the following structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00043">mod_format.h:43</a></div></div>
<div class="ttc" id="structast__format__def_html_acbcd73bcf7463776105fa7d63a1f7019"><div class="ttname"><a href="../../d0/d57/structast__format__def.html#acbcd73bcf7463776105fa7d63a1f7019">ast_format_def::list</a></div><div class="ttdeci">struct ast_format_def::@276 list</div></div>
<div class="ttc" id="lock_8h_html_aa65b589fd265c905f3682c118f1e02d8"><div class="ttname"><a href="../../dd/d42/lock_8h.html#aa65b589fd265c905f3682c118f1e02d8">SCOPED_RDLOCK</a></div><div class="ttdeci">#define SCOPED_RDLOCK(varname, lock)</div><div class="ttdoc">scoped lock specialization for read locks </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00592">lock.h:592</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="structast__format__def_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d0/d57/structast__format__def.html#ab425a484a0916077c5a30d9d7b229b44">ast_format_def::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00048">mod_format.h:48</a></div></div>
<div class="ttc" id="structformats_html"><div class="ttname"><a href="../../df/d8d/structformats.html">formats</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00069">file.c:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad85c951fa1d6988d2d7e169833a951a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad85c951fa1d6988d2d7e169833a951a8">&#9670;&nbsp;</a></span>ast_openstream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../db/dbc/structast__filestream.html">ast_filestream</a>* ast_openstream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>preflang</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens stream for use in seeking, playing. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>channel to work with </td></tr>
    <tr><td class="paramname">filename</td><td>to use </td></tr>
    <tr><td class="paramname">preflang</td><td>prefered language to use </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">a</td><td><a class="el" href="../../db/dbc/structast__filestream.html" title="This structure is allocated by file.c in one chunk, together with buf_size and desc_size bytes of mem...">ast_filestream</a> pointer if it opens the file. </td></tr>
    <tr><td class="paramname">NULL</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l00755">755</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d13/file_8c_source.html#l00760">ast_openstream_full()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/d13/file_8c_source.html#l01250">ast_streamfile()</a>, <a class="el" href="../../dd/d32/app__dictate_8c_source.html#l00087">dictate_exec()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02616">handle_getoption()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02557">handle_streamfile()</a>, and <a class="el" href="../../d4/d5b/app__speech__utils_8c_source.html#l00676">speech_streamfile()</a>.</p>
<div class="fragment"><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;{</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d13/file_8c.html#ae2d6dfeafd18a99d47195178cd752a3d">ast_openstream_full</a>(chan, filename, preflang, 0);</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;}</div><div class="ttc" id="file_8c_html_ae2d6dfeafd18a99d47195178cd752a3d"><div class="ttname"><a href="../../d6/d13/file_8c.html#ae2d6dfeafd18a99d47195178cd752a3d">ast_openstream_full</a></div><div class="ttdeci">struct ast_filestream * ast_openstream_full(struct ast_channel *chan, const char *filename, const char *preflang, int asis)</div><div class="ttdoc">Opens stream for use in seeking, playing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00760">file.c:760</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae2d6dfeafd18a99d47195178cd752a3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2d6dfeafd18a99d47195178cd752a3d">&#9670;&nbsp;</a></span>ast_openstream_full()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../db/dbc/structast__filestream.html">ast_filestream</a>* ast_openstream_full </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>preflang</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>asis</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens stream for use in seeking, playing. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>channel to work with </td></tr>
    <tr><td class="paramname">filename</td><td>to use </td></tr>
    <tr><td class="paramname">preflang</td><td>prefered language to use </td></tr>
    <tr><td class="paramname">asis</td><td>if set, don't clear generators </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">a</td><td><a class="el" href="../../db/dbc/structast__filestream.html" title="This structure is allocated by file.c in one chunk, together with buf_size and desc_size bytes of mem...">ast_filestream</a> pointer if it opens the file. </td></tr>
    <tr><td class="paramname">NULL</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l00760">760</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d13/file_8c_source.html#l00499">ACTION_OPEN</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00713">ast_channel_generator()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00824">ast_channel_set_oldwriteformat()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00621">ast_channel_stream()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00860">ast_channel_writeformat()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02902">ast_deactivate_generator()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00052">ast_format_cap_alloc</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00038">AST_FORMAT_CAP_FLAG_DEFAULT</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00615">ast_format_cap_has_type()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00032">AST_MEDIA_TYPE_AUDIO</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05908">ast_set_write_format_from_cap()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00187">ast_stopstream()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00706">fileexists_core()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00514">filehelper()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d97/res__musiconhold_8c_source.html#l00313">ast_moh_files_next()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00755">ast_openstream()</a>, and <a class="el" href="../../de/d26/app__externalivr_8c_source.html#l00207">gen_nextfile()</a>.</p>
<div class="fragment"><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;{</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="comment">    * Use fileexists_core() to find a file in a compatible</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="comment">    * language and format, set up a suitable translator,</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="comment">    * and open the stream.</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *file_fmt_cap;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;   <span class="keywordtype">int</span> buflen;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;   <span class="keywordflow">if</span> (!asis) {</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;      <span class="comment">/* do this first, otherwise we detect the wrong writeformat */</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      <a class="code" href="../../d6/d13/file_8c.html#a2f0d358c02e7a6cbe06d4b67237aca3d">ast_stopstream</a>(chan);</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a6fa8e680c963b66575d1950c19493b40">ast_channel_generator</a>(chan))</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7160355005776732fba88cc020f4a45b">ast_deactivate_generator</a>(chan);</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;   }</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;   <span class="keywordflow">if</span> (preflang == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;      preflang = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;   buflen = strlen(preflang) + strlen(filename) + 4;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;   buf = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(buflen);</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;   <span class="keywordflow">if</span> (!(file_fmt_cap = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>))) {</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;   }</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d13/file_8c.html#acbaf6de590d8e1505c484b44d278e4f8">fileexists_core</a>(filename, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, preflang, buf, buflen, file_fmt_cap) ||</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;      !<a class="code" href="../../d0/d3c/format__cap_8h.html#a9b2d6490b222d436f5f6a8296d36c13f">ast_format_cap_has_type</a>(file_fmt_cap, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>)) {</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;File %s does not exist in any format\n&quot;</span>, filename);</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(file_fmt_cap, -1);</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;   }</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;   <span class="comment">/* Set the channel to a format we can work with and save off the previous format. */</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a280e1c50d97a83e4e3053dc1fb9597eb">ast_channel_set_oldwriteformat</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a>(chan));</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;   <span class="comment">/* Set the channel to the best format that exists for the file. */</span></div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;   res = <a class="code" href="../../d5/d7b/channel_8h.html#afdb04fd0ce567dd08bc60949e1ec59b6">ast_set_write_format_from_cap</a>(chan, file_fmt_cap);</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;   <span class="comment">/* don&#39;t need this anymore now that the channel&#39;s write format is set. */</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(file_fmt_cap, -1);</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;   <span class="keywordflow">if</span> (res == -1) {  <span class="comment">/* No format available that works with this channel */</span></div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;   }</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;   res = <a class="code" href="../../d6/d13/file_8c.html#a083568a210b02e2a6985923817b6e4dc">filehelper</a>(buf, chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d6/d13/file_8c.html#a8944b5bc4c79736a07589a3761113d01a04bda3b7d3fbe904b2d0c85602e73cc7">ACTION_OPEN</a>);</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;   <span class="keywordflow">if</span> (res &gt;= 0)</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d7b/channel_8h.html#a043ef90a065fe177af7b21a6045b6506">ast_channel_stream</a>(chan);</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;}</div><div class="ttc" id="file_8c_html_a8944b5bc4c79736a07589a3761113d01a04bda3b7d3fbe904b2d0c85602e73cc7"><div class="ttname"><a href="../../d6/d13/file_8c.html#a8944b5bc4c79736a07589a3761113d01a04bda3b7d3fbe904b2d0c85602e73cc7">ACTION_OPEN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00499">file.c:499</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="channel_8h_html_a280e1c50d97a83e4e3053dc1fb9597eb"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a280e1c50d97a83e4e3053dc1fb9597eb">ast_channel_set_oldwriteformat</a></div><div class="ttdeci">void ast_channel_set_oldwriteformat(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00824">channel_internal_api.c:824</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="file_8c_html_acbaf6de590d8e1505c484b44d278e4f8"><div class="ttname"><a href="../../d6/d13/file_8c.html#acbaf6de590d8e1505c484b44d278e4f8">fileexists_core</a></div><div class="ttdeci">static int fileexists_core(const char *filename, const char *fmt, const char *preflang, char *buf, int buflen, struct ast_format_cap *result_cap)</div><div class="ttdoc">helper routine to locate a file with a given format and language preference. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00706">file.c:706</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="channel_8h_html_afdb04fd0ce567dd08bc60949e1ec59b6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#afdb04fd0ce567dd08bc60949e1ec59b6">ast_set_write_format_from_cap</a></div><div class="ttdeci">int ast_set_write_format_from_cap(struct ast_channel *chan, struct ast_format_cap *formats)</div><div class="ttdoc">Sets write format on channel chan Set write format for channel to whichever component of &quot;format&quot; is ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05908">channel.c:5908</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="channel_8h_html_a6fa8e680c963b66575d1950c19493b40"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6fa8e680c963b66575d1950c19493b40">ast_channel_generator</a></div><div class="ttdeci">struct ast_generator * ast_channel_generator(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00713">channel_internal_api.c:713</a></div></div>
<div class="ttc" id="file_8c_html_a083568a210b02e2a6985923817b6e4dc"><div class="ttname"><a href="../../d6/d13/file_8c.html#a083568a210b02e2a6985923817b6e4dc">filehelper</a></div><div class="ttdeci">static int filehelper(const char *filename, const void *arg2, const char *fmt, const enum file_action action)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00514">file.c:514</a></div></div>
<div class="ttc" id="structast__format__cap_html"><div class="ttname"><a href="../../d8/d69/structast__format__cap.html">ast_format_cap</a></div><div class="ttdoc">Format capabilities structure, holds formats + preference order + etc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00054">format_cap.c:54</a></div></div>
<div class="ttc" id="file_8c_html_a2f0d358c02e7a6cbe06d4b67237aca3d"><div class="ttname"><a href="../../d6/d13/file_8c.html#a2f0d358c02e7a6cbe06d4b67237aca3d">ast_stopstream</a></div><div class="ttdeci">int ast_stopstream(struct ast_channel *tmp)</div><div class="ttdoc">Stops a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00187">file.c:187</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00032">codec.h:32</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="channel_8h_html_a043ef90a065fe177af7b21a6045b6506"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a043ef90a065fe177af7b21a6045b6506">ast_channel_stream</a></div><div class="ttdeci">struct ast_filestream * ast_channel_stream(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00621">channel_internal_api.c:621</a></div></div>
<div class="ttc" id="channel_8h_html_a7160355005776732fba88cc020f4a45b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7160355005776732fba88cc020f4a45b">ast_deactivate_generator</a></div><div class="ttdeci">void ast_deactivate_generator(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02902">channel.c:2902</a></div></div>
<div class="ttc" id="channel_8h_html_a1dc625bd14a7875b04bfe0c388858929"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a></div><div class="ttdeci">struct ast_format * ast_channel_writeformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00860">channel_internal_api.c:860</a></div></div>
<div class="ttc" id="format__cap_8h_html_a9b2d6490b222d436f5f6a8296d36c13f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a9b2d6490b222d436f5f6a8296d36c13f">ast_format_cap_has_type</a></div><div class="ttdeci">int ast_format_cap_has_type(const struct ast_format_cap *cap, enum ast_media_type type)</div><div class="ttdoc">Find out if the capabilities structure has any formats of a specific type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00615">format_cap.c:615</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeed49fff2d6008a89f996230988d944d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeed49fff2d6008a89f996230988d944d">&#9670;&nbsp;</a></span>ast_openvstream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../db/dbc/structast__filestream.html">ast_filestream</a>* ast_openvstream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>preflang</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Opens stream for use in seeking, playing. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>channel to work with </td></tr>
    <tr><td class="paramname">filename</td><td>to use </td></tr>
    <tr><td class="paramname">preflang</td><td>prefered language to use </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">a</td><td><a class="el" href="../../db/dbc/structast__filestream.html" title="This structure is allocated by file.c in one chunk, together with buf_size and desc_size bytes of mem...">ast_filestream</a> pointer if it opens the file. </td></tr>
    <tr><td class="paramname">NULL</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l00812">812</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d13/file_8c_source.html#l00499">ACTION_OPEN</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00637">ast_channel_nativeformats()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00629">ast_channel_vstream()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00052">ast_format_cap_alloc</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00395">ast_format_cap_count()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00038">AST_FORMAT_CAP_FLAG_DEFAULT</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00400">ast_format_cap_get_format()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00615">ast_format_cap_has_type()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00655">ast_format_cap_iscompatible()</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00334">ast_format_get_name()</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00354">ast_format_get_type()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00033">AST_MEDIA_TYPE_VIDEO</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00706">fileexists_core()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00514">filehelper()</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00102">format</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/d13/file_8c_source.html#l01250">ast_streamfile()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02616">handle_getoption()</a>, and <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02557">handle_streamfile()</a>.</p>
<div class="fragment"><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;{</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;   <span class="comment">/* As above, but for video. But here we don&#39;t have translators</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="comment">    * so we must enforce a format.</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *nativeformats, *tmp_cap;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;   <span class="keywordtype">int</span> buflen;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;   <span class="keywordtype">int</span> i, fd;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;   <span class="keywordflow">if</span> (preflang == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;      preflang = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;   }</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;   buflen = strlen(preflang) + strlen(filename) + 4;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;   buf = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(buflen);</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;   nativeformats = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a>(chan));</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;   <span class="comment">/* is the channel capable of video without translation ?*/</span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d3c/format__cap_8h.html#a9b2d6490b222d436f5f6a8296d36c13f">ast_format_cap_has_type</a>(nativeformats, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99">AST_MEDIA_TYPE_VIDEO</a>)) {</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(nativeformats);</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;   }</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;   <span class="keywordflow">if</span> (!(tmp_cap = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>))) {</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(nativeformats);</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;   }</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;   <span class="comment">/* Video is supported, so see what video formats exist for this file */</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d13/file_8c.html#acbaf6de590d8e1505c484b44d278e4f8">fileexists_core</a>(filename, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, preflang, buf, buflen, tmp_cap)) {</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(tmp_cap, -1);</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(nativeformats);</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;   }</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;   <span class="comment">/* iterate over file formats and pick the first one compatible with the channel&#39;s native formats */</span></div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a>(tmp_cap); ++i) {</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a> = <a class="code" href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a>(tmp_cap, i);</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a>(format) != <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99">AST_MEDIA_TYPE_VIDEO</a>) ||</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;         !<a class="code" href="../../d0/d3c/format__cap_8h.html#a9c9b87b5062c057862aa7d4237db2780">ast_format_cap_iscompatible</a>(nativeformats, tmp_cap)) {</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(format, -1);</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;      }</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;      fd = <a class="code" href="../../d6/d13/file_8c.html#a083568a210b02e2a6985923817b6e4dc">filehelper</a>(buf, chan, <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(format), <a class="code" href="../../d6/d13/file_8c.html#a8944b5bc4c79736a07589a3761113d01a04bda3b7d3fbe904b2d0c85602e73cc7">ACTION_OPEN</a>);</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;      <span class="keywordflow">if</span> (fd &gt;= 0) {</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(format, -1);</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(tmp_cap, -1);</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(nativeformats);</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d5/d7b/channel_8h.html#a8b8f9e299537c8eee7cb67de52f44c8d">ast_channel_vstream</a>(chan);</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;      }</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;File %s has video but couldn&#39;t be opened\n&quot;</span>, filename);</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(format, -1);</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;   }</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(tmp_cap, -1);</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(nativeformats);</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;}</div><div class="ttc" id="file_8c_html_a8944b5bc4c79736a07589a3761113d01a04bda3b7d3fbe904b2d0c85602e73cc7"><div class="ttname"><a href="../../d6/d13/file_8c.html#a8944b5bc4c79736a07589a3761113d01a04bda3b7d3fbe904b2d0c85602e73cc7">ACTION_OPEN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00499">file.c:499</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="format_8h_html_a0aba6e17ced3e85e838ea097baa5ddc7"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a></div><div class="ttdeci">enum ast_media_type ast_format_get_type(const struct ast_format *format)</div><div class="ttdoc">Get the media type of a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00354">format.c:354</a></div></div>
<div class="ttc" id="channel_8h_html_a8b8f9e299537c8eee7cb67de52f44c8d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a8b8f9e299537c8eee7cb67de52f44c8d">ast_channel_vstream</a></div><div class="ttdeci">struct ast_filestream * ast_channel_vstream(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00629">channel_internal_api.c:629</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="file_8c_html_acbaf6de590d8e1505c484b44d278e4f8"><div class="ttname"><a href="../../d6/d13/file_8c.html#acbaf6de590d8e1505c484b44d278e4f8">fileexists_core</a></div><div class="ttdeci">static int fileexists_core(const char *filename, const char *fmt, const char *preflang, char *buf, int buflen, struct ast_format_cap *result_cap)</div><div class="ttdoc">helper routine to locate a file with a given format and language preference. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00706">file.c:706</a></div></div>
<div class="ttc" id="structast__format_html"><div class="ttname"><a href="../../d0/d98/structast__format.html">ast_format</a></div><div class="ttdoc">Definition of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00043">format.c:43</a></div></div>
<div class="ttc" id="format__cap_8h_html_aefb7d3623f4d8a582168e7aaf509459c"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a></div><div class="ttdeci">size_t ast_format_cap_count(const struct ast_format_cap *cap)</div><div class="ttdoc">Get the number of formats present within the capabilities structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00395">format_cap.c:395</a></div></div>
<div class="ttc" id="format_8h_html_a082f0fca94b18ba466f6e28d3ccb2fc8"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a></div><div class="ttdeci">const char * ast_format_get_name(const struct ast_format *format)</div><div class="ttdoc">Get the name associated with a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00334">format.c:334</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="file_8c_html_a083568a210b02e2a6985923817b6e4dc"><div class="ttname"><a href="../../d6/d13/file_8c.html#a083568a210b02e2a6985923817b6e4dc">filehelper</a></div><div class="ttdeci">static int filehelper(const char *filename, const void *arg2, const char *fmt, const enum file_action action)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00514">file.c:514</a></div></div>
<div class="ttc" id="structast__format__cap_html"><div class="ttname"><a href="../../d8/d69/structast__format__cap.html">ast_format_cap</a></div><div class="ttdoc">Format capabilities structure, holds formats + preference order + etc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00054">format_cap.c:54</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="channel_8h_html_a4a5bc2ea394aace55ea3809e53365ea9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a></div><div class="ttdeci">struct ast_format_cap * ast_channel_nativeformats(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00637">channel_internal_api.c:637</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99">AST_MEDIA_TYPE_VIDEO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00033">codec.h:33</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="format__cap_8h_html_a5d2c52e9d892cd7c6488563cf00ba9bc"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a></div><div class="ttdeci">struct ast_format * ast_format_cap_get_format(const struct ast_format_cap *cap, int position)</div><div class="ttdoc">Get the format at a specific index. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00400">format_cap.c:400</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a98f5e70e98f6dc48e3c5ba316066d540"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a></div><div class="ttdeci">static snd_pcm_format_t format</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00102">chan_alsa.c:102</a></div></div>
<div class="ttc" id="format__cap_8h_html_a9b2d6490b222d436f5f6a8296d36c13f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a9b2d6490b222d436f5f6a8296d36c13f">ast_format_cap_has_type</a></div><div class="ttdeci">int ast_format_cap_has_type(const struct ast_format_cap *cap, enum ast_media_type type)</div><div class="ttdoc">Find out if the capabilities structure has any formats of a specific type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00615">format_cap.c:615</a></div></div>
<div class="ttc" id="format__cap_8h_html_a9c9b87b5062c057862aa7d4237db2780"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a9c9b87b5062c057862aa7d4237db2780">ast_format_cap_iscompatible</a></div><div class="ttdeci">int ast_format_cap_iscompatible(const struct ast_format_cap *cap1, const struct ast_format_cap *cap2)</div><div class="ttdoc">Determine if any joint capabilities exist between two capabilities structures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00655">format_cap.c:655</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad59224750b8b617f9590b28b88457b14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad59224750b8b617f9590b28b88457b14">&#9670;&nbsp;</a></span>ast_playstream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_playstream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Play a open stream on a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>filestream to play </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on failure. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l01026">1026</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/da6/format_8c_source.html#l00354">ast_format_get_type()</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00032">AST_MEDIA_TYPE_AUDIO</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00914">ast_readaudio_callback()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00977">ast_readvideo_callback()</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00103">ast_filestream::fmt</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00048">ast_format_def::format</a>, and <a class="el" href="../../d6/d13/file_8c_source.html#l00907">FSREAD_FAILURE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/d13/file_8c_source.html#l01250">ast_streamfile()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02616">handle_getoption()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02557">handle_streamfile()</a>, and <a class="el" href="../../d4/d5b/app__speech__utils_8c_source.html#l00676">speech_streamfile()</a>.</p>
<div class="fragment"><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;{</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d6/d13/file_8c.html#a0245c792fdf4fe895383125a79000fa7">fsread_res</a> res;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a>(s-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#a8e5f2c67c624fc84557ef2bdd855ebb9">fmt</a>-&gt;<a class="code" href="../../d0/d57/structast__format__def.html#ab425a484a0916077c5a30d9d7b229b44">format</a>) == <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>)</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;      res = <a class="code" href="../../d6/d13/file_8c.html#aa6782e0130a721c4eeb51d2d10d791f8">ast_readaudio_callback</a>(s);</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;      res = <a class="code" href="../../d6/d13/file_8c.html#af8b623c146b07dbc4a96be4d8adbcfc4">ast_readvideo_callback</a>(s);</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;   <span class="keywordflow">return</span> (res == <a class="code" href="../../d6/d13/file_8c.html#a0245c792fdf4fe895383125a79000fa7a51689576f6677be835337676977f6d3b">FSREAD_FAILURE</a>) ? -1 : 0;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;}</div><div class="ttc" id="file_8c_html_af8b623c146b07dbc4a96be4d8adbcfc4"><div class="ttname"><a href="../../d6/d13/file_8c.html#af8b623c146b07dbc4a96be4d8adbcfc4">ast_readvideo_callback</a></div><div class="ttdeci">static enum fsread_res ast_readvideo_callback(struct ast_filestream *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00977">file.c:977</a></div></div>
<div class="ttc" id="file_8c_html_a0245c792fdf4fe895383125a79000fa7a51689576f6677be835337676977f6d3b"><div class="ttname"><a href="../../d6/d13/file_8c.html#a0245c792fdf4fe895383125a79000fa7a51689576f6677be835337676977f6d3b">FSREAD_FAILURE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00907">file.c:907</a></div></div>
<div class="ttc" id="format_8h_html_a0aba6e17ced3e85e838ea097baa5ddc7"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a></div><div class="ttdeci">enum ast_media_type ast_format_get_type(const struct ast_format *format)</div><div class="ttdoc">Get the media type of a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00354">format.c:354</a></div></div>
<div class="ttc" id="structast__filestream_html_a8e5f2c67c624fc84557ef2bdd855ebb9"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#a8e5f2c67c624fc84557ef2bdd855ebb9">ast_filestream::fmt</a></div><div class="ttdeci">struct ast_format_def * fmt</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00103">mod_format.h:103</a></div></div>
<div class="ttc" id="structast__format__def_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d0/d57/structast__format__def.html#ab425a484a0916077c5a30d9d7b229b44">ast_format_def::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00048">mod_format.h:48</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00032">codec.h:32</a></div></div>
<div class="ttc" id="file_8c_html_a0245c792fdf4fe895383125a79000fa7"><div class="ttname"><a href="../../d6/d13/file_8c.html#a0245c792fdf4fe895383125a79000fa7">fsread_res</a></div><div class="ttdeci">fsread_res</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00906">file.c:906</a></div></div>
<div class="ttc" id="file_8c_html_aa6782e0130a721c4eeb51d2d10d791f8"><div class="ttname"><a href="../../d6/d13/file_8c.html#aa6782e0130a721c4eeb51d2d10d791f8">ast_readaudio_callback</a></div><div class="ttdeci">static enum fsread_res ast_readaudio_callback(struct ast_filestream *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00914">file.c:914</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab4afbcd56a1aaf40eca3827e6d890372"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4afbcd56a1aaf40eca3827e6d890372">&#9670;&nbsp;</a></span>ast_ratestream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_ratestream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *&#160;</td>
          <td class="paramname"><em>fs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the sample rate of the stream's format. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fs</td><td>fs to act on </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>sample rate in Hz </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l01053">1053</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/da6/format_8c_source.html#l00379">ast_format_get_sample_rate()</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00103">ast_filestream::fmt</a>, and <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00048">ast_format_def::format</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l06315">msg_create_from_file()</a>.</p>
<div class="fragment"><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;{</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a>(fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#a8e5f2c67c624fc84557ef2bdd855ebb9">fmt</a>-&gt;<a class="code" href="../../d0/d57/structast__format__def.html#ab425a484a0916077c5a30d9d7b229b44">format</a>);</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;}</div><div class="ttc" id="structast__filestream_html_a8e5f2c67c624fc84557ef2bdd855ebb9"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#a8e5f2c67c624fc84557ef2bdd855ebb9">ast_filestream::fmt</a></div><div class="ttdeci">struct ast_format_def * fmt</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00103">mod_format.h:103</a></div></div>
<div class="ttc" id="structast__format__def_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d0/d57/structast__format__def.html#ab425a484a0916077c5a30d9d7b229b44">ast_format_def::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00048">mod_format.h:48</a></div></div>
<div class="ttc" id="format_8h_html_a499e920008f775eebadd958a42e85862"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a></div><div class="ttdeci">unsigned int ast_format_get_sample_rate(const struct ast_format *format)</div><div class="ttdoc">Get the sample rate of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00379">format.c:379</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad572060ea434390db3d1ccde4511dfcd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad572060ea434390db3d1ccde4511dfcd">&#9670;&nbsp;</a></span>ast_readfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../db/dbc/structast__filestream.html">ast_filestream</a>* ast_readfile </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>comment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>check</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mode_t&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts reading from a file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>the name of the file to read from </td></tr>
    <tr><td class="paramname">type</td><td>format of file you wish to read from </td></tr>
    <tr><td class="paramname">comment</td><td>comment to go with </td></tr>
    <tr><td class="paramname">flags</td><td>file flags </td></tr>
    <tr><td class="paramname">check</td><td>(unimplemented, hence negligible) </td></tr>
    <tr><td class="paramname">mode</td><td>Open mode Open an incoming file stream. flags are flags for the open() command, and if check is non-zero, then it will not read a file if there are any files that start with that name and have an extension Please note, this is a blocking function. Program execution will not return until ast_waitstream completes it's execution. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">a</td><td>struct <a class="el" href="../../db/dbc/structast__filestream.html" title="This structure is allocated by file.c in one chunk, together with buf_size and desc_size bytes of mem...">ast_filestream</a> on success. </td></tr>
    <tr><td class="paramname">NULL</td><td>on failure. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a316">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l01309">1309</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d13/file_8c_source.html#l01068">ast_closestream()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00314">build_filename()</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00045">ast_format_def::exts</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00351">exts_compare</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00117">ast_filestream::f</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00107">ast_filestream::filename</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00104">ast_filestream::flags</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00103">ast_filestream::fmt</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00428">get_filestream()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00105">ast_filestream::mode</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00490">open_wrapper()</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00112">ast_filestream::trans</a>, and <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00110">ast_filestream::vfs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01580">__ast_play_and_record()</a>, <a class="el" href="../../d0/ddd/res__convert_8c_source.html#l00064">handle_cli_file_convert()</a>, and <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l06315">msg_create_from_file()</a>.</p>
<div class="fragment"><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;{</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;   FILE *bfile;</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d57/structast__format__def.html">ast_format_def</a> *f;</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *fs = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;   <span class="keywordtype">char</span> *fn;</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;   <span class="keywordtype">int</span> format_found = 0;</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../df/d8d/structformats.html">formats</a>);</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../df/d8d/structformats.html">formats</a>, f, list) {</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;      fs = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d13/file_8c.html#ad60e6b6fb8b8078dc9e4deda4ffbde10">exts_compare</a>(f-&gt;<a class="code" href="../../d0/d57/structast__format__def.html#ade71f534a49925f1955a1598556219e2">exts</a>, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>))</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;         format_found = 1;</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;      fn = <a class="code" href="../../d6/d13/file_8c.html#a2a836416f6627399f3b75ef2705bcd89">build_filename</a>(<a class="code" href="../../db/dbc/structast__filestream.html#aeac90097f29f7529968697163cea5c18">filename</a>, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>);</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;      <span class="keywordflow">if</span> (!fn) {</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;      }</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;      <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = 0;</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;      bfile = fopen(fn, <span class="stringliteral">&quot;r&quot;</span>);</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;      <span class="keywordflow">if</span> (!bfile || (fs = <a class="code" href="../../d6/d13/file_8c.html#a3e809ea7be0413c527df113a695552b8">get_filestream</a>(f, bfile)) == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || <a class="code" href="../../d6/d13/file_8c.html#ac17ab5a9432e8fbe75d7968221897716">open_wrapper</a>(fs) ) {</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to open %s\n&quot;</span>, fn);</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;         <span class="keywordflow">if</span> (fs) {</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;            <a class="code" href="../../d6/d13/file_8c.html#ab53bd2c3c55d509790c7f7620aac6373">ast_closestream</a>(fs);</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;         }</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;         fs = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;         bfile = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(fn);</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;      }</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;      <span class="comment">/* found it */</span></div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;      fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#ad98134a98f3e3e3b5611a5fd2117e8e4">trans</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;      fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#a8e5f2c67c624fc84557ef2bdd855ebb9">fmt</a> = <a class="code" href="../../db/dbc/structast__filestream.html#a3efb0e1a16208deecbd84c15401f7cf8">f</a>;</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;      fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> = <a class="code" href="../../db/dbc/structast__filestream.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a>;</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;      fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#adc8d3cf511ceb277aea0cfa1cd027c59">mode</a> = <a class="code" href="../../db/dbc/structast__filestream.html#adc8d3cf511ceb277aea0cfa1cd027c59">mode</a>;</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;      fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#aeac90097f29f7529968697163cea5c18">filename</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<a class="code" href="../../db/dbc/structast__filestream.html#aeac90097f29f7529968697163cea5c18">filename</a>);</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;      fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#a084d8f087c50442f51245ec3333abac4">vfs</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(fn);</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;   }</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../df/d8d/structformats.html">formats</a>);</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;   <span class="keywordflow">if</span> (!format_found)</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No such format &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>);</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;   <span class="keywordflow">return</span> fs;</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;}</div><div class="ttc" id="structast__format__def_html_ade71f534a49925f1955a1598556219e2"><div class="ttname"><a href="../../d0/d57/structast__format__def.html#ade71f534a49925f1955a1598556219e2">ast_format_def::exts</a></div><div class="ttdeci">char exts[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00045">mod_format.h:45</a></div></div>
<div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="file_8c_html_ad60e6b6fb8b8078dc9e4deda4ffbde10"><div class="ttname"><a href="../../d6/d13/file_8c.html#ad60e6b6fb8b8078dc9e4deda4ffbde10">exts_compare</a></div><div class="ttdeci">#define exts_compare(list, type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00351">file.c:351</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="file_8c_html_a3e809ea7be0413c527df113a695552b8"><div class="ttname"><a href="../../d6/d13/file_8c.html#a3e809ea7be0413c527df113a695552b8">get_filestream</a></div><div class="ttdeci">static struct ast_filestream * get_filestream(struct ast_format_def *fmt, FILE *bfile)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00428">file.c:428</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="file_8c_html_ab53bd2c3c55d509790c7f7620aac6373"><div class="ttname"><a href="../../d6/d13/file_8c.html#ab53bd2c3c55d509790c7f7620aac6373">ast_closestream</a></div><div class="ttdeci">int ast_closestream(struct ast_filestream *f)</div><div class="ttdoc">Closes a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01068">file.c:1068</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__format__def_html"><div class="ttname"><a href="../../d0/d57/structast__format__def.html">ast_format_def</a></div><div class="ttdoc">Each supported file format is described by the following structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00043">mod_format.h:43</a></div></div>
<div class="ttc" id="file_8c_html_ac17ab5a9432e8fbe75d7968221897716"><div class="ttname"><a href="../../d6/d13/file_8c.html#ac17ab5a9432e8fbe75d7968221897716">open_wrapper</a></div><div class="ttdeci">static int open_wrapper(struct ast_filestream *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00490">file.c:490</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="file_8c_html_a2a836416f6627399f3b75ef2705bcd89"><div class="ttname"><a href="../../d6/d13/file_8c.html#a2a836416f6627399f3b75ef2705bcd89">build_filename</a></div><div class="ttdeci">static char * build_filename(const char *filename, const char *ext)</div><div class="ttdoc">construct a filename. Absolute pathnames are preserved, relative names are prefixed by the sounds/ di...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00314">file.c:314</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="structast__filestream_html_a8e5f2c67c624fc84557ef2bdd855ebb9"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#a8e5f2c67c624fc84557ef2bdd855ebb9">ast_filestream::fmt</a></div><div class="ttdeci">struct ast_format_def * fmt</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00103">mod_format.h:103</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="structformats_html"><div class="ttname"><a href="../../df/d8d/structformats.html">formats</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00069">file.c:69</a></div></div>
<div class="ttc" id="structast__filestream_html_ad98134a98f3e3e3b5611a5fd2117e8e4"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#ad98134a98f3e3e3b5611a5fd2117e8e4">ast_filestream::trans</a></div><div class="ttdeci">struct ast_trans_pvt * trans</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00112">mod_format.h:112</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__filestream_html_aeac90097f29f7529968697163cea5c18"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#aeac90097f29f7529968697163cea5c18">ast_filestream::filename</a></div><div class="ttdeci">char * filename</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00107">mod_format.h:107</a></div></div>
<div class="ttc" id="structast__filestream_html"><div class="ttname"><a href="../../db/dbc/structast__filestream.html">ast_filestream</a></div><div class="ttdoc">This structure is allocated by file.c in one chunk, together with buf_size and desc_size bytes of mem...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00101">mod_format.h:101</a></div></div>
<div class="ttc" id="structast__filestream_html_a3efb0e1a16208deecbd84c15401f7cf8"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#a3efb0e1a16208deecbd84c15401f7cf8">ast_filestream::f</a></div><div class="ttdeci">FILE * f</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00117">mod_format.h:117</a></div></div>
<div class="ttc" id="structast__filestream_html_a084d8f087c50442f51245ec3333abac4"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#a084d8f087c50442f51245ec3333abac4">ast_filestream::vfs</a></div><div class="ttdeci">struct ast_filestream * vfs</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00110">mod_format.h:110</a></div></div>
<div class="ttc" id="structast__filestream_html_adc8d3cf511ceb277aea0cfa1cd027c59"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#adc8d3cf511ceb277aea0cfa1cd027c59">ast_filestream::mode</a></div><div class="ttdeci">mode_t mode</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00105">mod_format.h:105</a></div></div>
<div class="ttc" id="structast__filestream_html_ac8bf36fe0577cba66bccda3a6f7e80a4"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#ac8bf36fe0577cba66bccda3a6f7e80a4">ast_filestream::flags</a></div><div class="ttdeci">int flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00104">mod_format.h:104</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a962bc31d7a953b0a0290c72b168d41a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a962bc31d7a953b0a0290c72b168d41a7">&#9670;&nbsp;</a></span>ast_readframe()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a>* ast_readframe </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a frame from a filestream. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td><a class="el" href="../../db/dbc/structast__filestream.html" title="This structure is allocated by file.c in one chunk, together with buf_size and desc_size bytes of mem...">ast_filestream</a> to act on </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a frame. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>if read failed. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a317">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l00899">899</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d13/file_8c_source.html#l00874">read_frame()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01580">__ast_play_and_record()</a>, <a class="el" href="../../dd/d32/app__dictate_8c_source.html#l00087">dictate_exec()</a>, <a class="el" href="../../de/d26/app__externalivr_8c_source.html#l00241">gen_readframe()</a>, <a class="el" href="../../d0/ddd/res__convert_8c_source.html#l00064">handle_cli_file_convert()</a>, and <a class="el" href="../../d3/d97/res__musiconhold_8c_source.html#l00409">moh_files_readframe()</a>.</p>
<div class="fragment"><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;{</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;   <span class="keywordtype">int</span> whennext = 0;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d13/file_8c.html#a3d11f27997994d366d52d54a084ec944">read_frame</a>(s, &amp;whennext);</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;}</div><div class="ttc" id="file_8c_html_a3d11f27997994d366d52d54a084ec944"><div class="ttname"><a href="../../d6/d13/file_8c.html#a3d11f27997994d366d52d54a084ec944">read_frame</a></div><div class="ttdeci">static struct ast_frame * read_frame(struct ast_filestream *s, int *whennext)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00874">file.c:874</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a36f6bba05952162d5d1ee7fb9819bd07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36f6bba05952162d5d1ee7fb9819bd07">&#9670;&nbsp;</a></span>ast_seekstream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_seekstream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *&#160;</td>
          <td class="paramname"><em>fs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">off_t&#160;</td>
          <td class="paramname"><em>sample_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>whence</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Seeks into stream. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fs</td><td><a class="el" href="../../db/dbc/structast__filestream.html" title="This structure is allocated by file.c in one chunk, together with buf_size and desc_size bytes of mem...">ast_filestream</a> to perform seek on </td></tr>
    <tr><td class="paramname">sample_offset</td><td>numbers of samples to seek </td></tr>
    <tr><td class="paramname">whence</td><td>SEEK_SET, SEEK_CUR, SEEK_END </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on failure. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a231">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l01038">1038</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00103">ast_filestream::fmt</a>, and <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00068">ast_format_def::seek</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d28/channel_8c_source.html#l03529">__ast_read()</a>, <a class="el" href="../../d3/d97/res__musiconhold_8c_source.html#l00313">ast_moh_files_next()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01058">ast_stream_fastforward()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01063">ast_stream_rewind()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01250">ast_streamfile()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05194">ast_write_stream()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01131">control_streamfile()</a>, <a class="el" href="../../dd/d32/app__dictate_8c_source.html#l00087">dictate_exec()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02616">handle_getoption()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02899">handle_recordfile()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02557">handle_streamfile()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l06315">msg_create_from_file()</a>, and <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03537">speech_streamfile()</a>.</p>
<div class="fragment"><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;{</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;   <span class="keywordflow">return</span> fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#a8e5f2c67c624fc84557ef2bdd855ebb9">fmt</a>-&gt;<a class="code" href="../../d0/d57/structast__format__def.html#a1327e7030c55bfe870ed79fab26709aa">seek</a>(fs, sample_offset, whence);</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;}</div><div class="ttc" id="structast__format__def_html_a1327e7030c55bfe870ed79fab26709aa"><div class="ttname"><a href="../../d0/d57/structast__format__def.html#a1327e7030c55bfe870ed79fab26709aa">ast_format_def::seek</a></div><div class="ttdeci">int(* seek)(struct ast_filestream *, off_t, int)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00068">mod_format.h:68</a></div></div>
<div class="ttc" id="structast__filestream_html_a8e5f2c67c624fc84557ef2bdd855ebb9"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#a8e5f2c67c624fc84557ef2bdd855ebb9">ast_filestream::fmt</a></div><div class="ttdeci">struct ast_format_def * fmt</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00103">mod_format.h:103</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3092bf11d4bba66f646562759608b1bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3092bf11d4bba66f646562759608b1bc">&#9670;&nbsp;</a></span>ast_stopstream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_stopstream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stops a stream. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>The channel you wish to stop playback on</td></tr>
  </table>
  </dd>
</dl>
<p>Stop playback of a stream</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>always</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The channel does not need to be locked before calling this function. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a230">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l00187">187</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00844">ast_channel_oldwriteformat()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00621">ast_channel_stream()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00625">ast_channel_stream_set()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00629">ast_channel_vstream()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00633">ast_channel_vstream_set()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01068">ast_closestream()</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00334">ast_format_get_name()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05890">ast_set_write_format()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l02951">action_playback_and_continue()</a>, <a class="el" href="../../dd/d27/res__adsi_8c_source.html#l00388">adsi_transmit_message_full()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01738">agent_alert()</a>, <a class="el" href="../../da/ded/parking__applications_8c_source.html#l00800">announce_to_dial()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00760">ast_openstream_full()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01470">ast_play_and_wait()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l06660">ast_readstring_full()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03218">ast_say_enumeration_full_da()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03381">ast_say_enumeration_full_de()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03101">ast_say_enumeration_full_en()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03543">ast_say_enumeration_full_he()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03632">ast_say_enumeration_full_is()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03198">ast_say_enumeration_full_vi()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l00826">ast_say_number_full_cs()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l00924">ast_say_number_full_da()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01038">ast_say_number_full_de()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l00772">ast_say_number_full_en()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01172">ast_say_number_full_en_GB()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01251">ast_say_number_full_es()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01355">ast_say_number_full_fr()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l08036">ast_say_number_full_gr()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01447">ast_say_number_full_he()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01619">ast_say_number_full_hu()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01699">ast_say_number_full_is()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01819">ast_say_number_full_it()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l08105">ast_say_number_full_ja()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l09270">ast_say_number_full_ka()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01974">ast_say_number_full_nl()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02072">ast_say_number_full_no()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02455">ast_say_number_full_pt()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02834">ast_say_number_full_ru()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02555">ast_say_number_full_se()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02913">ast_say_number_full_th()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02748">ast_say_number_full_ur()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02983">ast_say_number_full_vi()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02635">ast_say_number_full_zh()</a>, <a class="el" href="../../d3/dba/app__talkdetect_8c_source.html#l00080">background_detect_exec()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l04837">conf_exec()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l03177">conf_run()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01131">control_streamfile()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02254">dial_exec_full()</a>, <a class="el" href="../../d0/de2/app__directory_8c_source.html#l00847">directory_exec()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l03160">grab_transfer()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02616">handle_getoption()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03556">handle_speechrecognize()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02557">handle_streamfile()</a>, <a class="el" href="../../da/d8a/app__ices_8c_source.html#l00110">ices_exec()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02590">ivr_dispatch()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l06601">leave_voicemail()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l02846">meetme_menu_admin()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l02966">meetme_menu_admin_extended()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l02268">minivm_greet_exec()</a>, <a class="el" href="../../d1/d9a/app__mp3_8c_source.html#l00172">mp3_exec()</a>, <a class="el" href="../../df/d1d/app__nbscat_8c_source.html#l00111">NBScat_exec()</a>, <a class="el" href="../../df/d1d/pbx__builtins_8c_source.html#l01144">pbx_builtin_background()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02184">pl_odtworz_plik()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l00928">play_file()</a>, <a class="el" href="../../d9/d1a/app__skel_8c_source.html#l00369">play_files_helper()</a>, <a class="el" href="../../d0/de2/app__directory_8c_source.html#l00286">play_mailbox_owner()</a>, <a class="el" href="../../d7/d1b/app__playback_8c_source.html#l00442">playback_exec()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l08183">queue_exec()</a>, <a class="el" href="../../d6/dbb/app__read_8c_source.html#l00127">read_exec()</a>, <a class="el" href="../../d2/de3/app__readexten_8c_source.html#l00119">readexten_exec()</a>, <a class="el" href="../../dd/dd5/app__record_8c_source.html#l00221">record_exec()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l05681">recordthread()</a>, <a class="el" href="../../d7/d1b/app__playback_8c_source.html#l00155">s_streamwait3()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l00171">say_character_str_full()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l00339">say_digit_str_full()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l00430">say_money_str_full()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l00270">say_phonetic_str_full()</a>, <a class="el" href="../../d0/de2/app__directory_8c_source.html#l00347">select_item_seq()</a>, <a class="el" href="../../d5/dd6/app__festival_8c_source.html#l00174">send_waveform_to_channel()</a>, <a class="el" href="../../d4/d5b/app__speech__utils_8c_source.html#l00700">speech_background()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l11226">vm_authenticate()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l11503">vm_execmain()</a>, <a class="el" href="../../dd/d55/app__followme_8c_source.html#l00644">wait_for_winner()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01551">waitstream_core()</a>, and <a class="el" href="../../d0/d72/app__zapateller_8c_source.html#l00079">zapateller_exec()</a>.</p>
<div class="fragment"><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;{</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>);</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;   <span class="comment">/* Stop a running stream if there is one */</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a043ef90a065fe177af7b21a6045b6506">ast_channel_stream</a>(<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>)) {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      <a class="code" href="../../d6/d13/file_8c.html#ab53bd2c3c55d509790c7f7620aac6373">ast_closestream</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a043ef90a065fe177af7b21a6045b6506">ast_channel_stream</a>(<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>));</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a1460c260bdadfa226b95598a7d9d44a7">ast_channel_stream_set</a>(<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a4b041a81038d686dc438437a05ab2410">ast_channel_oldwriteformat</a>(<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>) &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#abbdfb98077180544657b2d16c5d25f74">ast_set_write_format</a>(<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a4b041a81038d686dc438437a05ab2410">ast_channel_oldwriteformat</a>(<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>)))</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to restore format back to %s\n&quot;</span>, <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a4b041a81038d686dc438437a05ab2410">ast_channel_oldwriteformat</a>(<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>)));</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;   }</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;   <span class="comment">/* Stop the video stream too */</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a8b8f9e299537c8eee7cb67de52f44c8d">ast_channel_vstream</a>(<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>) != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <a class="code" href="../../d6/d13/file_8c.html#ab53bd2c3c55d509790c7f7620aac6373">ast_closestream</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a8b8f9e299537c8eee7cb67de52f44c8d">ast_channel_vstream</a>(<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>));</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#afafaea2cd08a0d993f5d667f4cfefd9e">ast_channel_vstream_set</a>(<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;   }</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>);</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="channel_8h_html_a8b8f9e299537c8eee7cb67de52f44c8d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a8b8f9e299537c8eee7cb67de52f44c8d">ast_channel_vstream</a></div><div class="ttdeci">struct ast_filestream * ast_channel_vstream(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00629">channel_internal_api.c:629</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="channel_8h_html_a4b041a81038d686dc438437a05ab2410"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4b041a81038d686dc438437a05ab2410">ast_channel_oldwriteformat</a></div><div class="ttdeci">struct ast_format * ast_channel_oldwriteformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00844">channel_internal_api.c:844</a></div></div>
<div class="ttc" id="channel_8h_html_afafaea2cd08a0d993f5d667f4cfefd9e"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#afafaea2cd08a0d993f5d667f4cfefd9e">ast_channel_vstream_set</a></div><div class="ttdeci">void ast_channel_vstream_set(struct ast_channel *chan, struct ast_filestream *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00633">channel_internal_api.c:633</a></div></div>
<div class="ttc" id="format_8h_html_a082f0fca94b18ba466f6e28d3ccb2fc8"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a></div><div class="ttdeci">const char * ast_format_get_name(const struct ast_format *format)</div><div class="ttdoc">Get the name associated with a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00334">format.c:334</a></div></div>
<div class="ttc" id="file_8c_html_ab53bd2c3c55d509790c7f7620aac6373"><div class="ttname"><a href="../../d6/d13/file_8c.html#ab53bd2c3c55d509790c7f7620aac6373">ast_closestream</a></div><div class="ttdeci">int ast_closestream(struct ast_filestream *f)</div><div class="ttdoc">Closes a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01068">file.c:1068</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="channel_8h_html_a1460c260bdadfa226b95598a7d9d44a7"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1460c260bdadfa226b95598a7d9d44a7">ast_channel_stream_set</a></div><div class="ttdeci">void ast_channel_stream_set(struct ast_channel *chan, struct ast_filestream *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00625">channel_internal_api.c:625</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="channel_8h_html_abbdfb98077180544657b2d16c5d25f74"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abbdfb98077180544657b2d16c5d25f74">ast_set_write_format</a></div><div class="ttdeci">int ast_set_write_format(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdoc">Sets write format on channel chan. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05890">channel.c:5890</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="channel_8h_html_a043ef90a065fe177af7b21a6045b6506"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a043ef90a065fe177af7b21a6045b6506">ast_channel_stream</a></div><div class="ttdeci">struct ast_filestream * ast_channel_stream(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00621">channel_internal_api.c:621</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a95b94a020720147325a486e210b36775"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95b94a020720147325a486e210b36775">&#9670;&nbsp;</a></span>ast_stream_and_wait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_stream_and_wait </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>digits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>stream file until digit If the file name is non-empty, try to play it. </p>
<dl class="section note"><dt>Note</dt><dd>If digits == "" then we can simply check for non-zero. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>0 if success. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>if error. </td></tr>
    <tr><td class="paramname">digit</td><td>if interrupted by a digit. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a293">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l01814">1814</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01250">ast_streamfile()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, and <a class="el" href="../../d6/d13/file_8c_source.html#l01776">ast_waitstream()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01580">__ast_play_and_record()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l02937">action_playback()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l02895">action_toggle_mute_participants()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01738">agent_alert()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02112">agent_login_exec()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l00985">announce_user_count()</a>, <a class="el" href="../../dd/d55/app__followme_8c_source.html#l01339">app_exec()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01321">ast_bridge_channel_playfile()</a>, <a class="el" href="../../d9/dbf/pickup_8c_source.html#l00200">ast_pickup_call()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02489">ast_record_review()</a>, <a class="el" href="../../d2/df4/bridge__builtin__interval__features_8c_source.html#l00051">bridge_features_duration_callback()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l02544">confbridge_exec()</a>, <a class="el" href="../../d0/de2/app__directory_8c_source.html#l00847">directory_exec()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l08269">forward_message()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l03160">grab_transfer()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l05736">invent_message()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02590">ivr_dispatch()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l01679">join_conference_bridge()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l06601">leave_voicemail()</a>, <a class="el" href="../../d2/df4/bridge__builtin__interval__features_8c_source.html#l00067">limits_interval_playback()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l00709">mixmonitor_thread()</a>, <a class="el" href="../../da/ded/parking__applications_8c_source.html#l00545">park_app_exec()</a>, <a class="el" href="../../da/ded/parking__applications_8c_source.html#l00603">parked_call_app_exec()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l00928">play_file()</a>, <a class="el" href="../../d9/d1a/app__skel_8c_source.html#l00369">play_files_helper()</a>, <a class="el" href="../../d0/de2/app__directory_8c_source.html#l00286">play_mailbox_owner()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l08716">play_message_callerid()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l01038">play_prompt_to_user()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l01644">play_record_review()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l01923">playback_common()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l14359">sayname()</a>, <a class="el" href="../../d0/de2/app__directory_8c_source.html#l00347">select_item_seq()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l00868">setup_mixmonitor_ds()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l01755">stream_failsound()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l07948">vm_forwardoptions()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l14446">vmsayname_exec()</a>, and <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l08609">wait_file2()</a>.</p>
<div class="fragment"><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;{</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>)) {</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;      res = <a class="code" href="../../d6/d13/file_8c.html#a0e0d3e6f2bebe7f68fd264438e0d2059">ast_streamfile</a>(chan, <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan));</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;      <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;         res = <a class="code" href="../../d6/d13/file_8c.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, digits);</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;      }</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;   }</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;}</div><div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="file_8c_html_affc21cb57c6bf72a2cb7ec8a379b2137"><div class="ttname"><a href="../../d6/d13/file_8c.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a></div><div class="ttdeci">int ast_waitstream(struct ast_channel *c, const char *breakon)</div><div class="ttdoc">Waits for a stream to stop or digit to be pressed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01776">file.c:1776</a></div></div>
<div class="ttc" id="file_8c_html_a0e0d3e6f2bebe7f68fd264438e0d2059"><div class="ttname"><a href="../../d6/d13/file_8c.html#a0e0d3e6f2bebe7f68fd264438e0d2059">ast_streamfile</a></div><div class="ttdeci">int ast_streamfile(struct ast_channel *chan, const char *filename, const char *preflang)</div><div class="ttdoc">Streams a file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01250">file.c:1250</a></div></div>
<div class="ttc" id="channel_8h_html_a9abe31fe40dcd03cd2957e5309e32ac6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a></div><div class="ttdeci">const char * ast_channel_language(const struct ast_channel *chan)</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac2137b5da91f3408f86d580952f32e94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2137b5da91f3408f86d580952f32e94">&#9670;&nbsp;</a></span>ast_stream_fastforward()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_stream_fastforward </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *&#160;</td>
          <td class="paramname"><em>fs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">off_t&#160;</td>
          <td class="paramname"><em>ms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fast forward stream ms. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fs</td><td>filestream to act on </td></tr>
    <tr><td class="paramname">ms</td><td>milliseconds to move </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on failure. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l01058">1058</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d13/file_8c_source.html#l01038">ast_seekstream()</a>, and <a class="el" href="../../db/db2/asterisk_8h_source.html#l00047">DEFAULT_SAMPLES_PER_MS</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/d13/file_8c_source.html#l01509">waitstream_control()</a>.</p>
<div class="fragment"><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;{</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d13/file_8c.html#a36f6bba05952162d5d1ee7fb9819bd07">ast_seekstream</a>(fs, ms * <a class="code" href="../../db/db2/asterisk_8h.html#ab2dba0d8b577d63452ed65647bb22a3f">DEFAULT_SAMPLES_PER_MS</a>, SEEK_CUR);</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;}</div><div class="ttc" id="file_8c_html_a36f6bba05952162d5d1ee7fb9819bd07"><div class="ttname"><a href="../../d6/d13/file_8c.html#a36f6bba05952162d5d1ee7fb9819bd07">ast_seekstream</a></div><div class="ttdeci">int ast_seekstream(struct ast_filestream *fs, off_t sample_offset, int whence)</div><div class="ttdoc">Seeks into stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01038">file.c:1038</a></div></div>
<div class="ttc" id="asterisk_8h_html_ab2dba0d8b577d63452ed65647bb22a3f"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#ab2dba0d8b577d63452ed65647bb22a3f">DEFAULT_SAMPLES_PER_MS</a></div><div class="ttdeci">#define DEFAULT_SAMPLES_PER_MS</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db2/asterisk_8h_source.html#l00047">asterisk.h:47</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4c7c02a659b09bb06dd63e1f42692666"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c7c02a659b09bb06dd63e1f42692666">&#9670;&nbsp;</a></span>ast_stream_rewind()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_stream_rewind </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *&#160;</td>
          <td class="paramname"><em>fs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">off_t&#160;</td>
          <td class="paramname"><em>ms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rewind stream ms. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fs</td><td>filestream to act on </td></tr>
    <tr><td class="paramname">ms</td><td>milliseconds to move </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on failure. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a313">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l01063">1063</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d13/file_8c_source.html#l01038">ast_seekstream()</a>, and <a class="el" href="../../db/db2/asterisk_8h_source.html#l00047">DEFAULT_SAMPLES_PER_MS</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01580">__ast_play_and_record()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02899">handle_recordfile()</a>, <a class="el" href="../../dd/dd5/app__record_8c_source.html#l00221">record_exec()</a>, and <a class="el" href="../../d6/d13/file_8c_source.html#l01509">waitstream_control()</a>.</p>
<div class="fragment"><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;{</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d13/file_8c.html#a36f6bba05952162d5d1ee7fb9819bd07">ast_seekstream</a>(fs, -ms * <a class="code" href="../../db/db2/asterisk_8h.html#ab2dba0d8b577d63452ed65647bb22a3f">DEFAULT_SAMPLES_PER_MS</a>, SEEK_CUR);</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;}</div><div class="ttc" id="file_8c_html_a36f6bba05952162d5d1ee7fb9819bd07"><div class="ttname"><a href="../../d6/d13/file_8c.html#a36f6bba05952162d5d1ee7fb9819bd07">ast_seekstream</a></div><div class="ttdeci">int ast_seekstream(struct ast_filestream *fs, off_t sample_offset, int whence)</div><div class="ttdoc">Seeks into stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01038">file.c:1038</a></div></div>
<div class="ttc" id="asterisk_8h_html_ab2dba0d8b577d63452ed65647bb22a3f"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#ab2dba0d8b577d63452ed65647bb22a3f">DEFAULT_SAMPLES_PER_MS</a></div><div class="ttdeci">#define DEFAULT_SAMPLES_PER_MS</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db2/asterisk_8h_source.html#l00047">asterisk.h:47</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a67c7e271b4ca70aca6d48fd48d121857"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67c7e271b4ca70aca6d48fd48d121857">&#9670;&nbsp;</a></span>ast_streamfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_streamfile </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>preflang</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Streams a file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>channel to stream the file to </td></tr>
    <tr><td class="paramname">filename</td><td>the name of the file you wish to stream, minus the extension </td></tr>
    <tr><td class="paramname">preflang</td><td>the preferred language you wish to have the file streamed to you in Prepares a channel for the streaming of a file. To start the stream, afterward do a <a class="el" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137" title="Waits for a stream to stop or digit to be pressed. ">ast_waitstream()</a> on the channel Also, it will stop any existing streams on the channel. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on failure. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a57">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l01250">1250</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d13/file_8c_source.html#l01020">ast_applystream()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01260">ast_channel_flags()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00637">ast_channel_nativeformats()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00860">ast_channel_writeformat()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01015">AST_FLAG_MASQ_NOSTREAM</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00736">ast_format_cap_get_names()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00326">AST_FORMAT_CAP_NAMES_LEN</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00334">ast_format_get_name()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00755">ast_openstream()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00812">ast_openvstream()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01026">ast_playstream()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01038">ast_seekstream()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00800">ast_str_alloca</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00196">ast_test_suite_event_notify</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00117">ast_filestream::f</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00103">ast_filestream::fmt</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00048">ast_format_def::format</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00125">ast_filestream::orig_chan_name</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00461">VERBOSITY_ATLEAST</a>, and <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00110">ast_filestream::vfs</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d09/sig__analog_8c_source.html#l01711">__analog_ss_thread()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l02951">action_playback_and_continue()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l09512">analog_ss_thread()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l02615">announce_thread()</a>, <a class="el" href="../../da/ded/parking__applications_8c_source.html#l00800">announce_to_dial()</a>, <a class="el" href="../../dd/d55/app__followme_8c_source.html#l01339">app_exec()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00197">ast_app_getdata()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00250">ast_app_getdata_full()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01470">ast_play_and_wait()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03871">ast_say_date_da()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03920">ast_say_date_de()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03842">ast_say_date_en()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l04002">ast_say_date_fr()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l08180">ast_say_date_gr()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l04123">ast_say_date_he()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03970">ast_say_date_hu()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l04157">ast_say_date_is()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l08216">ast_say_date_ja()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l09348">ast_say_date_ka()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l04031">ast_say_date_nl()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l04060">ast_say_date_th()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l08455">ast_say_date_with_format_gr()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07397">ast_say_datetime_en()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07493">ast_say_datetime_fr()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07821">ast_say_datetime_from_now_en()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07859">ast_say_datetime_from_now_fr()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07947">ast_say_datetime_from_now_he()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l09444">ast_say_datetime_from_now_ka()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l08355">ast_say_datetime_gr()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07737">ast_say_datetime_he()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l08388">ast_say_datetime_ja()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07534">ast_say_datetime_nl()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07553">ast_say_datetime_pt()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07634">ast_say_datetime_th()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07677">ast_say_datetime_zh()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03218">ast_say_enumeration_full_da()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03381">ast_say_enumeration_full_de()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03101">ast_say_enumeration_full_en()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03543">ast_say_enumeration_full_he()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03632">ast_say_enumeration_full_is()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03198">ast_say_enumeration_full_vi()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l00826">ast_say_number_full_cs()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l00924">ast_say_number_full_da()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01038">ast_say_number_full_de()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l00772">ast_say_number_full_en()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01172">ast_say_number_full_en_GB()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01251">ast_say_number_full_es()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01355">ast_say_number_full_fr()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l08036">ast_say_number_full_gr()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01447">ast_say_number_full_he()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01619">ast_say_number_full_hu()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01699">ast_say_number_full_is()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01819">ast_say_number_full_it()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l08105">ast_say_number_full_ja()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l09270">ast_say_number_full_ka()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01974">ast_say_number_full_nl()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02072">ast_say_number_full_no()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02455">ast_say_number_full_pt()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02834">ast_say_number_full_ru()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02555">ast_say_number_full_se()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02913">ast_say_number_full_th()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02748">ast_say_number_full_ur()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02983">ast_say_number_full_vi()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02635">ast_say_number_full_zh()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07125">ast_say_time_de()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07076">ast_say_time_en()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07168">ast_say_time_fr()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l08260">ast_say_time_gr()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07145">ast_say_time_hu()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l08308">ast_say_time_ja()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l09391">ast_say_time_ka()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07187">ast_say_time_nl()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07284">ast_say_time_zh()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01814">ast_stream_and_wait()</a>, <a class="el" href="../../d6/d0f/app__authenticate_8c_source.html#l00116">auth_exec()</a>, <a class="el" href="../../d3/dba/app__talkdetect_8c_source.html#l00080">background_detect_exec()</a>, <a class="el" href="../../dc/d04/app__chanspy_8c_source.html#l00892">common_exec()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l04837">conf_exec()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l02350">conf_get_pin()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l03177">conf_run()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01131">control_streamfile()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02254">dial_exec_full()</a>, <a class="el" href="../../d0/de2/app__directory_8c_source.html#l00768">do_directory()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l04500">find_conf_realtime()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l08269">forward_message()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07991">gr_say_number_female()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02899">handle_recordfile()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l01573">invent_message()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l01912">leave_voicemail()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l02846">meetme_menu_admin()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l02966">meetme_menu_admin_extended()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l02766">meetme_menu_normal()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l02268">minivm_greet_exec()</a>, <a class="el" href="../../d3/da4/app__page_8c_source.html#l00250">page_exec()</a>, <a class="el" href="../../df/d1d/pbx__builtins_8c_source.html#l01144">pbx_builtin_background()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02184">pl_odtworz_plik()</a>, <a class="el" href="../../dd/d32/app__dictate_8c_source.html#l00078">play_and_wait()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l03916">play_file()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l01644">play_record_review()</a>, <a class="el" href="../../d7/d1b/app__playback_8c_source.html#l00442">playback_exec()</a>, <a class="el" href="../../d7/d17/app__privacy_8c_source.html#l00087">privacy_exec()</a>, <a class="el" href="../../d2/de3/app__readexten_8c_source.html#l00119">readexten_exec()</a>, <a class="el" href="../../dd/dd5/app__record_8c_source.html#l00221">record_exec()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l03434">retrydial_exec()</a>, <a class="el" href="../../d7/d1b/app__playback_8c_source.html#l00155">s_streamwait3()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l00171">say_character_str_full()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l00339">say_digit_str_full()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l00430">say_money_str_full()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l00270">say_phonetic_str_full()</a>, <a class="el" href="../../d0/de2/app__directory_8c_source.html#l00395">select_item_menu()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02075">setup_privacy_args()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l11226">vm_authenticate()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l00699">wait_file()</a>, and <a class="el" href="../../dd/d55/app__followme_8c_source.html#l00644">wait_for_winner()</a>.</p>
<div class="fragment"><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;{</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *fs;</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *<a class="code" href="../../db/dbc/structast__filestream.html#a084d8f087c50442f51245ec3333abac4">vfs</a>=<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;   off_t pos;</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;   <span class="keywordtype">int</span> seekattempt;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;   fs = <a class="code" href="../../d6/d13/file_8c.html#ad85c951fa1d6988d2d7e169833a951a8">ast_openstream</a>(chan, <a class="code" href="../../db/dbc/structast__filestream.html#aeac90097f29f7529968697163cea5c18">filename</a>, preflang);</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;   <span class="keywordflow">if</span> (!fs) {</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *codec_buf = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a>);</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to open %s (format %s): %s\n&quot;</span>,</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;         filename, <a class="code" href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a>(chan), &amp;codec_buf), strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;   }</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;   <span class="comment">/* check to see if there is any data present (not a zero length file),</span></div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;<span class="comment">    * done this way because there is no where for ast_openstream_full to</span></div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;<span class="comment">    * return the file had no data. */</span></div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;   pos = ftello(fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#a3efb0e1a16208deecbd84c15401f7cf8">f</a>);</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;   seekattempt = fseeko(fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#a3efb0e1a16208deecbd84c15401f7cf8">f</a>, -1, SEEK_END);</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;   <span class="keywordflow">if</span> (seekattempt) {</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> == EINVAL) {</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;         <span class="comment">/* Zero-length file, as opposed to a pipe */</span></div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;         <a class="code" href="../../d6/d13/file_8c.html#a36f6bba05952162d5d1ee7fb9819bd07">ast_seekstream</a>(fs, 0, SEEK_SET);</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;      }</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;      fseeko(fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#a3efb0e1a16208deecbd84c15401f7cf8">f</a>, pos, SEEK_SET);</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;   }</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;   vfs = <a class="code" href="../../d6/d13/file_8c.html#aeed49fff2d6008a89f996230988d944d">ast_openvstream</a>(chan, filename, preflang);</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;   <span class="keywordflow">if</span> (vfs) {</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Ooh, found a video stream, too, format %s\n&quot;</span>, <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(vfs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#a8e5f2c67c624fc84557ef2bdd855ebb9">fmt</a>-&gt;<a class="code" href="../../d0/d57/structast__format__def.html#ab425a484a0916077c5a30d9d7b229b44">format</a>));</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;   }</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a44e6b334058bf9555fd4b834ad532046">AST_FLAG_MASQ_NOSTREAM</a>))</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;      fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#afa3ba2491683e48895a1e174f7bd7431">orig_chan_name</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d13/file_8c.html#a618e3120b6d019312ef2d617d9f14571">ast_applystream</a>(chan, fs))</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;   <span class="keywordflow">if</span> (vfs &amp;&amp; <a class="code" href="../../d6/d13/file_8c.html#a618e3120b6d019312ef2d617d9f14571">ast_applystream</a>(chan, vfs))</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a>(<span class="stringliteral">&quot;PLAYBACK&quot;</span>, <span class="stringliteral">&quot;Message: %s\r\nChannel: %s&quot;</span>, filename, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;   res = <a class="code" href="../../d6/d13/file_8c.html#ad59224750b8b617f9590b28b88457b14">ast_playstream</a>(fs);</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;   <span class="keywordflow">if</span> (!res &amp;&amp; vfs)</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;      res = <a class="code" href="../../d6/d13/file_8c.html#ad59224750b8b617f9590b28b88457b14">ast_playstream</a>(vfs);</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/d8c/logger_8h.html#a7d52159deec8b3179d27fcb4d39c30d2">VERBOSITY_ATLEAST</a>(3)) {</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;&lt;%s&gt; Playing &#39;%s.%s&#39; (language &#39;%s&#39;)\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), filename, <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a>(chan)), preflang ? preflang : <span class="stringliteral">&quot;default&quot;</span>);</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;   }</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="file_8c_html_a36f6bba05952162d5d1ee7fb9819bd07"><div class="ttname"><a href="../../d6/d13/file_8c.html#a36f6bba05952162d5d1ee7fb9819bd07">ast_seekstream</a></div><div class="ttdeci">int ast_seekstream(struct ast_filestream *fs, off_t sample_offset, int whence)</div><div class="ttdoc">Seeks into stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01038">file.c:1038</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="format__cap_8h_html_a035f4aa78f172a18311bfa15dd232c6f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a></div><div class="ttdeci">#define AST_FORMAT_CAP_NAMES_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00326">format_cap.h:326</a></div></div>
<div class="ttc" id="logger_8h_html_a7d52159deec8b3179d27fcb4d39c30d2"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a7d52159deec8b3179d27fcb4d39c30d2">VERBOSITY_ATLEAST</a></div><div class="ttdeci">#define VERBOSITY_ATLEAST(level)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00461">logger.h:461</a></div></div>
<div class="ttc" id="strings_8h_html_a7fc844c12b769ccded05e7514036e241"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a></div><div class="ttdeci">#define ast_str_alloca(init_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00800">strings.h:800</a></div></div>
<div class="ttc" id="format_8h_html_a082f0fca94b18ba466f6e28d3ccb2fc8"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a></div><div class="ttdeci">const char * ast_format_get_name(const struct ast_format *format)</div><div class="ttdoc">Get the name associated with a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00334">format.c:334</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="file_8c_html_ad59224750b8b617f9590b28b88457b14"><div class="ttname"><a href="../../d6/d13/file_8c.html#ad59224750b8b617f9590b28b88457b14">ast_playstream</a></div><div class="ttdeci">int ast_playstream(struct ast_filestream *s)</div><div class="ttdoc">Play a open stream on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01026">file.c:1026</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="file_8c_html_ad85c951fa1d6988d2d7e169833a951a8"><div class="ttname"><a href="../../d6/d13/file_8c.html#ad85c951fa1d6988d2d7e169833a951a8">ast_openstream</a></div><div class="ttdeci">struct ast_filestream * ast_openstream(struct ast_channel *chan, const char *filename, const char *preflang)</div><div class="ttdoc">Opens stream for use in seeking, playing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00755">file.c:755</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__filestream_html_a8e5f2c67c624fc84557ef2bdd855ebb9"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#a8e5f2c67c624fc84557ef2bdd855ebb9">ast_filestream::fmt</a></div><div class="ttdeci">struct ast_format_def * fmt</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00103">mod_format.h:103</a></div></div>
<div class="ttc" id="structast__filestream_html_afa3ba2491683e48895a1e174f7bd7431"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#afa3ba2491683e48895a1e174f7bd7431">ast_filestream::orig_chan_name</a></div><div class="ttdeci">const char * orig_chan_name</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00125">mod_format.h:125</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5a44e6b334058bf9555fd4b834ad532046"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a44e6b334058bf9555fd4b834ad532046">AST_FLAG_MASQ_NOSTREAM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01015">channel.h:1015</a></div></div>
<div class="ttc" id="structast__format__def_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d0/d57/structast__format__def.html#ab425a484a0916077c5a30d9d7b229b44">ast_format_def::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00048">mod_format.h:48</a></div></div>
<div class="ttc" id="file_8c_html_a618e3120b6d019312ef2d617d9f14571"><div class="ttname"><a href="../../d6/d13/file_8c.html#a618e3120b6d019312ef2d617d9f14571">ast_applystream</a></div><div class="ttdeci">int ast_applystream(struct ast_channel *chan, struct ast_filestream *s)</div><div class="ttdoc">Applys a open stream to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01020">file.c:1020</a></div></div>
<div class="ttc" id="test_8h_html_a9482d93ea3931853331bdbc745ce7cb4"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a></div><div class="ttdeci">#define ast_test_suite_event_notify(s, f,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00196">test.h:196</a></div></div>
<div class="ttc" id="file_8c_html_aeed49fff2d6008a89f996230988d944d"><div class="ttname"><a href="../../d6/d13/file_8c.html#aeed49fff2d6008a89f996230988d944d">ast_openvstream</a></div><div class="ttdeci">struct ast_filestream * ast_openvstream(struct ast_channel *chan, const char *filename, const char *preflang)</div><div class="ttdoc">Opens stream for use in seeking, playing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00812">file.c:812</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="format__cap_8h_html_a4dff925fc9e3bb805b926d18447eb3eb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a></div><div class="ttdeci">const char * ast_format_cap_get_names(const struct ast_format_cap *cap, struct ast_str **buf)</div><div class="ttdoc">Get the names of codecs of a set of formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00736">format_cap.c:736</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="channel_8h_html_a4a5bc2ea394aace55ea3809e53365ea9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4a5bc2ea394aace55ea3809e53365ea9">ast_channel_nativeformats</a></div><div class="ttdeci">struct ast_format_cap * ast_channel_nativeformats(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00637">channel_internal_api.c:637</a></div></div>
<div class="ttc" id="structast__filestream_html_aeac90097f29f7529968697163cea5c18"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#aeac90097f29f7529968697163cea5c18">ast_filestream::filename</a></div><div class="ttdeci">char * filename</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00107">mod_format.h:107</a></div></div>
<div class="ttc" id="structast__filestream_html"><div class="ttname"><a href="../../db/dbc/structast__filestream.html">ast_filestream</a></div><div class="ttdoc">This structure is allocated by file.c in one chunk, together with buf_size and desc_size bytes of mem...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00101">mod_format.h:101</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="structast__filestream_html_a3efb0e1a16208deecbd84c15401f7cf8"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#a3efb0e1a16208deecbd84c15401f7cf8">ast_filestream::f</a></div><div class="ttdeci">FILE * f</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00117">mod_format.h:117</a></div></div>
<div class="ttc" id="structast__filestream_html_a084d8f087c50442f51245ec3333abac4"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#a084d8f087c50442f51245ec3333abac4">ast_filestream::vfs</a></div><div class="ttdeci">struct ast_filestream * vfs</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00110">mod_format.h:110</a></div></div>
<div class="ttc" id="channel_8h_html_a91de92158876186d28ba1773877f2732"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a></div><div class="ttdeci">struct ast_flags * ast_channel_flags(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01260">channel_internal_api.c:1260</a></div></div>
<div class="ttc" id="channel_8h_html_a1dc625bd14a7875b04bfe0c388858929"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a></div><div class="ttdeci">struct ast_format * ast_channel_writeformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00860">channel_internal_api.c:860</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a01771a318e7adea51499040f27b4278a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01771a318e7adea51499040f27b4278a">&#9670;&nbsp;</a></span>ast_tellstream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">off_t ast_tellstream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *&#160;</td>
          <td class="paramname"><em>fs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tell where we are in a stream. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fs</td><td>fs to act on </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a long as a sample offset into stream </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a238">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l01048">1048</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00103">ast_filestream::fmt</a>, and <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00070">ast_format_def::tell</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01580">__ast_play_and_record()</a>, <a class="el" href="../../d3/d97/res__musiconhold_8c_source.html#l00313">ast_moh_files_next()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01131">control_streamfile()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02616">handle_getoption()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02899">handle_recordfile()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03556">handle_speechrecognize()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02557">handle_streamfile()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l06315">msg_create_from_file()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01509">waitstream_control()</a>, and <a class="el" href="../../d6/d13/file_8c_source.html#l01551">waitstream_core()</a>.</p>
<div class="fragment"><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;{</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;   <span class="keywordflow">return</span> fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#a8e5f2c67c624fc84557ef2bdd855ebb9">fmt</a>-&gt;<a class="code" href="../../d0/d57/structast__format__def.html#aa7f9a2e96761424c900c3574d53d8d83">tell</a>(fs);</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;}</div><div class="ttc" id="structast__filestream_html_a8e5f2c67c624fc84557ef2bdd855ebb9"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#a8e5f2c67c624fc84557ef2bdd855ebb9">ast_filestream::fmt</a></div><div class="ttdeci">struct ast_format_def * fmt</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00103">mod_format.h:103</a></div></div>
<div class="ttc" id="structast__format__def_html_aa7f9a2e96761424c900c3574d53d8d83"><div class="ttname"><a href="../../d0/d57/structast__format__def.html#aa7f9a2e96761424c900c3574d53d8d83">ast_format_def::tell</a></div><div class="ttdeci">off_t(* tell)(struct ast_filestream *fs)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00070">mod_format.h:70</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa647ac352a00b559131f90ffffea2c3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa647ac352a00b559131f90ffffea2c3c">&#9670;&nbsp;</a></span>ast_truncstream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_truncstream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *&#160;</td>
          <td class="paramname"><em>fs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Trunc stream at current location. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fs</td><td>filestream to act on </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on failure. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a314">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l01043">1043</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00103">ast_filestream::fmt</a>, and <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00069">ast_format_def::trunc</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01580">__ast_play_and_record()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02899">handle_recordfile()</a>, and <a class="el" href="../../dd/dd5/app__record_8c_source.html#l00221">record_exec()</a>.</p>
<div class="fragment"><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;{</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;   <span class="keywordflow">return</span> fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#a8e5f2c67c624fc84557ef2bdd855ebb9">fmt</a>-&gt;<a class="code" href="../../d0/d57/structast__format__def.html#a0d25a710a49fce33c9d5e0c3ae5cb420">trunc</a>(fs);</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;}</div><div class="ttc" id="structast__filestream_html_a8e5f2c67c624fc84557ef2bdd855ebb9"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#a8e5f2c67c624fc84557ef2bdd855ebb9">ast_filestream::fmt</a></div><div class="ttdeci">struct ast_format_def * fmt</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00103">mod_format.h:103</a></div></div>
<div class="ttc" id="structast__format__def_html_a0d25a710a49fce33c9d5e0c3ae5cb420"><div class="ttname"><a href="../../d0/d57/structast__format__def.html#a0d25a710a49fce33c9d5e0c3ae5cb420">ast_format_def::trunc</a></div><div class="ttdeci">int(* trunc)(struct ast_filestream *fs)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00069">mod_format.h:69</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="affc21cb57c6bf72a2cb7ec8a379b2137"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affc21cb57c6bf72a2cb7ec8a379b2137">&#9670;&nbsp;</a></span>ast_waitstream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_waitstream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>breakon</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Waits for a stream to stop or digit to be pressed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>channel to waitstream on </td></tr>
    <tr><td class="paramname">breakon</td><td>string of DTMF digits to break upon Begins playback of a stream... Wait for a stream to stop or for any one of a given digit to arrive, </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if the stream finishes </td></tr>
    <tr><td class="paramname">the</td><td>character if it was interrupted by the channel. </td></tr>
    <tr><td class="paramname">-1</td><td>on error </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a263">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l01776">1776</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01759">sanitize_waitstream_return()</a>, and <a class="el" href="../../d6/d13/file_8c_source.html#l01551">waitstream_core()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d09/sig__analog_8c_source.html#l01711">__analog_ss_thread()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l02951">action_playback_and_continue()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l09512">analog_ss_thread()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l02615">announce_thread()</a>, <a class="el" href="../../da/ded/parking__applications_8c_source.html#l00800">announce_to_dial()</a>, <a class="el" href="../../dd/d55/app__followme_8c_source.html#l01339">app_exec()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01470">ast_play_and_wait()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03871">ast_say_date_da()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03920">ast_say_date_de()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03842">ast_say_date_en()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l04002">ast_say_date_fr()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l08180">ast_say_date_gr()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l04123">ast_say_date_he()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03970">ast_say_date_hu()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l04157">ast_say_date_is()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l08216">ast_say_date_ja()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l09348">ast_say_date_ka()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l04031">ast_say_date_nl()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l04060">ast_say_date_th()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l08455">ast_say_date_with_format_gr()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07397">ast_say_datetime_en()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07493">ast_say_datetime_fr()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07821">ast_say_datetime_from_now_en()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07859">ast_say_datetime_from_now_fr()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07947">ast_say_datetime_from_now_he()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l09444">ast_say_datetime_from_now_ka()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l08355">ast_say_datetime_gr()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07737">ast_say_datetime_he()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l08388">ast_say_datetime_ja()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07534">ast_say_datetime_nl()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07553">ast_say_datetime_pt()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07634">ast_say_datetime_th()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07677">ast_say_datetime_zh()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03218">ast_say_enumeration_full_da()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03381">ast_say_enumeration_full_de()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03101">ast_say_enumeration_full_en()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03543">ast_say_enumeration_full_he()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03632">ast_say_enumeration_full_is()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03198">ast_say_enumeration_full_vi()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l00826">ast_say_number_full_cs()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l00924">ast_say_number_full_da()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01038">ast_say_number_full_de()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l00772">ast_say_number_full_en()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01172">ast_say_number_full_en_GB()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01251">ast_say_number_full_es()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01355">ast_say_number_full_fr()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l08036">ast_say_number_full_gr()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01447">ast_say_number_full_he()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01619">ast_say_number_full_hu()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01699">ast_say_number_full_is()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01819">ast_say_number_full_it()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l08105">ast_say_number_full_ja()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l09270">ast_say_number_full_ka()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01974">ast_say_number_full_nl()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02072">ast_say_number_full_no()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02455">ast_say_number_full_pt()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02834">ast_say_number_full_ru()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02555">ast_say_number_full_se()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02913">ast_say_number_full_th()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02748">ast_say_number_full_ur()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02983">ast_say_number_full_vi()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02635">ast_say_number_full_zh()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07125">ast_say_time_de()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07076">ast_say_time_en()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l08260">ast_say_time_gr()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07326">ast_say_time_he()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07145">ast_say_time_hu()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l08308">ast_say_time_ja()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l09391">ast_say_time_ka()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07187">ast_say_time_nl()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07284">ast_say_time_zh()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01814">ast_stream_and_wait()</a>, <a class="el" href="../../d6/d0f/app__authenticate_8c_source.html#l00116">auth_exec()</a>, <a class="el" href="../../dc/d04/app__chanspy_8c_source.html#l00892">common_exec()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l04837">conf_exec()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l02350">conf_get_pin()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l03177">conf_run()</a>, <a class="el" href="../../d0/de2/app__directory_8c_source.html#l00847">directory_exec()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l04500">find_conf_realtime()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l07991">gr_say_number_female()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02899">handle_recordfile()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l01573">invent_message()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l01912">leave_voicemail()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l02846">meetme_menu_admin()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l02966">meetme_menu_admin_extended()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l02766">meetme_menu_normal()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l02268">minivm_greet_exec()</a>, <a class="el" href="../../d3/da4/app__page_8c_source.html#l00250">page_exec()</a>, <a class="el" href="../../df/d1d/pbx__builtins_8c_source.html#l01144">pbx_builtin_background()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02184">pl_odtworz_plik()</a>, <a class="el" href="../../dd/d32/app__dictate_8c_source.html#l00078">play_and_wait()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l03916">play_file()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l01644">play_record_review()</a>, <a class="el" href="../../d7/d1b/app__playback_8c_source.html#l00442">playback_exec()</a>, <a class="el" href="../../d7/d17/app__privacy_8c_source.html#l00087">privacy_exec()</a>, <a class="el" href="../../dd/dd5/app__record_8c_source.html#l00221">record_exec()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l03434">retrydial_exec()</a>, <a class="el" href="../../d7/d1b/app__playback_8c_source.html#l00155">s_streamwait3()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l00171">say_character_str_full()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l00339">say_digit_str_full()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l00430">say_money_str_full()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l00270">say_phonetic_str_full()</a>, <a class="el" href="../../d0/de2/app__directory_8c_source.html#l00395">select_item_menu()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02075">setup_privacy_args()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l11226">vm_authenticate()</a>, and <a class="el" href="../../d7/d01/say_8c_source.html#l00699">wait_file()</a>.</p>
<div class="fragment"><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;{</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;   res = <a class="code" href="../../d6/d13/file_8c.html#ab691e222ec6bab6039597ddbed2b5cf8">waitstream_core</a>(c, breakon, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, -1, -1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> <span class="comment">/* no callback */</span>);</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d13/file_8c.html#a55a8377c040ff899e59b19d08030e255">sanitize_waitstream_return</a>(res);</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;}</div><div class="ttc" id="file_8c_html_ab691e222ec6bab6039597ddbed2b5cf8"><div class="ttname"><a href="../../d6/d13/file_8c.html#ab691e222ec6bab6039597ddbed2b5cf8">waitstream_core</a></div><div class="ttdeci">static int waitstream_core(struct ast_channel *c, const char *breakon, const char *forward, const char *reverse, int skip_ms, int audiofd, int cmdfd, const char *context, ast_waitstream_fr_cb cb)</div><div class="ttdoc">the core of all waitstream() functions </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01551">file.c:1551</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="file_8c_html_a55a8377c040ff899e59b19d08030e255"><div class="ttname"><a href="../../d6/d13/file_8c.html#a55a8377c040ff899e59b19d08030e255">sanitize_waitstream_return</a></div><div class="ttdeci">static int sanitize_waitstream_return(int return_value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01759">file.c:1759</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae6eb4e1e4576abe04a4b185688f6690c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6eb4e1e4576abe04a4b185688f6690c">&#9670;&nbsp;</a></span>ast_waitstream_exten()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_waitstream_exten </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Waits for a stream to stop or digit matching a valid one digit exten to be pressed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>channel to waitstream on </td></tr>
    <tr><td class="paramname">context</td><td>string of context to match digits to break upon Begins playback of a stream... Wait for a stream to stop or for any one of a valid extension digit to arrive, </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if the stream finishes. </td></tr>
    <tr><td class="paramname">the</td><td>character if it was interrupted. </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l01795">1795</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00344">ast_channel_context()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01759">sanitize_waitstream_return()</a>, and <a class="el" href="../../d6/d13/file_8c_source.html#l01551">waitstream_core()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d1d/pbx__builtins_8c_source.html#l01144">pbx_builtin_background()</a>.</p>
<div class="fragment"><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;{</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;   <span class="comment">/* Waitstream, with return in the case of a valid 1 digit extension */</span></div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;   <span class="comment">/* in the current or specified context being pressed */</span></div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>)</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;      <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(c);</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;   res = <a class="code" href="../../d6/d13/file_8c.html#ab691e222ec6bab6039597ddbed2b5cf8">waitstream_core</a>(c, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0,</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;      -1, -1, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> <span class="comment">/* no callback */</span>);</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d13/file_8c.html#a55a8377c040ff899e59b19d08030e255">sanitize_waitstream_return</a>(res);</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;}</div><div class="ttc" id="file_8c_html_ab691e222ec6bab6039597ddbed2b5cf8"><div class="ttname"><a href="../../d6/d13/file_8c.html#ab691e222ec6bab6039597ddbed2b5cf8">waitstream_core</a></div><div class="ttdeci">static int waitstream_core(struct ast_channel *c, const char *breakon, const char *forward, const char *reverse, int skip_ms, int audiofd, int cmdfd, const char *context, ast_waitstream_fr_cb cb)</div><div class="ttdoc">the core of all waitstream() functions </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01551">file.c:1551</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="file_8c_html_a55a8377c040ff899e59b19d08030e255"><div class="ttname"><a href="../../d6/d13/file_8c.html#a55a8377c040ff899e59b19d08030e255">sanitize_waitstream_return</a></div><div class="ttdeci">static int sanitize_waitstream_return(int return_value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01759">file.c:1759</a></div></div>
<div class="ttc" id="channel_8h_html_a582dee4d5ea9b2ff6f309f0c5239f6bd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a></div><div class="ttdeci">const char * ast_channel_context(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00344">channel_internal_api.c:344</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5ce837632e3746a3af17f8311060e510"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ce837632e3746a3af17f8311060e510">&#9670;&nbsp;</a></span>ast_waitstream_fr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_waitstream_fr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>breakon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>forward</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>rewind</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Same as waitstream but allows stream to be forwarded or rewound. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>channel to waitstream on </td></tr>
    <tr><td class="paramname">breakon</td><td>string of DTMF digits to break upon </td></tr>
    <tr><td class="paramname">forward</td><td>DTMF digit to fast forward upon </td></tr>
    <tr><td class="paramname">rewind</td><td>DTMF digit to rewind upon </td></tr>
    <tr><td class="paramname">ms</td><td>How many miliseconds to skip forward/back Begins playback of a stream... Wait for a stream to stop or for any one of a given digit to arrive, </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if the stream finishes. </td></tr>
    <tr><td class="paramname">the</td><td>character if it was interrupted, </td></tr>
    <tr><td class="paramname">the</td><td>value of the control frame if it was interrupted by some other party, </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a234">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l01745">1745</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d6/d13/file_8c_source.html#l01551">waitstream_core()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01131">control_streamfile()</a>.</p>
<div class="fragment"><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;{</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d13/file_8c.html#ab691e222ec6bab6039597ddbed2b5cf8">waitstream_core</a>(c, breakon, forward, reverse, ms,</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;      -1 <span class="comment">/* no audiofd */</span>, -1 <span class="comment">/* no cmdfd */</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> <span class="comment">/* no context */</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> <span class="comment">/* no callback */</span>);</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;}</div><div class="ttc" id="file_8c_html_ab691e222ec6bab6039597ddbed2b5cf8"><div class="ttname"><a href="../../d6/d13/file_8c.html#ab691e222ec6bab6039597ddbed2b5cf8">waitstream_core</a></div><div class="ttdeci">static int waitstream_core(struct ast_channel *c, const char *breakon, const char *forward, const char *reverse, int skip_ms, int audiofd, int cmdfd, const char *context, ast_waitstream_fr_cb cb)</div><div class="ttdoc">the core of all waitstream() functions </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01551">file.c:1551</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1d269d89440f69d13458394efc73f2d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d269d89440f69d13458394efc73f2d2">&#9670;&nbsp;</a></span>ast_waitstream_fr_w_cb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_waitstream_fr_w_cb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>breakon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>forward</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>rewind</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d4d/file_8h.html#a2d5138e99197a1d01f7a2ed07830476e">ast_waitstream_fr_cb</a>&#160;</td>
          <td class="paramname"><em>cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Same as waitstream_fr but allows a callback to be alerted when a user fastforwards or rewinds the file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>channel to waitstream on </td></tr>
    <tr><td class="paramname">breakon</td><td>string of DTMF digits to break upon </td></tr>
    <tr><td class="paramname">forward</td><td>DTMF digit to fast forward upon </td></tr>
    <tr><td class="paramname">rewind</td><td>DTMF digit to rewind upon </td></tr>
    <tr><td class="paramname">ms</td><td>How many milliseconds to skip forward/back </td></tr>
    <tr><td class="paramname">cb</td><td>to call when rewind or fastfoward occurs. Begins playback of a stream... Wait for a stream to stop or for any one of a given digit to arrive, </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if the stream finishes. </td></tr>
    <tr><td class="paramname">the</td><td>character if it was interrupted, </td></tr>
    <tr><td class="paramname">the</td><td>value of the control frame if it was interrupted by some other party, </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a233">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l01734">1734</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d6/d13/file_8c_source.html#l01551">waitstream_core()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01131">control_streamfile()</a>.</p>
<div class="fragment"><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;{</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d13/file_8c.html#ab691e222ec6bab6039597ddbed2b5cf8">waitstream_core</a>(c, breakon, forward, reverse, ms,</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;      -1 <span class="comment">/* no audiofd */</span>, -1 <span class="comment">/* no cmdfd */</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> <span class="comment">/* no context */</span>, cb);</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;}</div><div class="ttc" id="file_8c_html_ab691e222ec6bab6039597ddbed2b5cf8"><div class="ttname"><a href="../../d6/d13/file_8c.html#ab691e222ec6bab6039597ddbed2b5cf8">waitstream_core</a></div><div class="ttdeci">static int waitstream_core(struct ast_channel *c, const char *breakon, const char *forward, const char *reverse, int skip_ms, int audiofd, int cmdfd, const char *context, ast_waitstream_fr_cb cb)</div><div class="ttdoc">the core of all waitstream() functions </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01551">file.c:1551</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3089874cd5223053f670c8499e911ec4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3089874cd5223053f670c8499e911ec4">&#9670;&nbsp;</a></span>ast_waitstream_full()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_waitstream_full </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>breakon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>monfd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Same as waitstream, but with audio output to fd and monitored fd checking.</p>
<dl class="section return"><dt>Returns</dt><dd>1 if monfd is ready for reading </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l01785">1785</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01759">sanitize_waitstream_return()</a>, and <a class="el" href="../../d6/d13/file_8c_source.html#l01551">waitstream_core()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d28/channel_8c_source.html#l06660">ast_readstring_full()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03218">ast_say_enumeration_full_da()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03381">ast_say_enumeration_full_de()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03101">ast_say_enumeration_full_en()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03543">ast_say_enumeration_full_he()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03632">ast_say_enumeration_full_is()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l03198">ast_say_enumeration_full_vi()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l00826">ast_say_number_full_cs()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l00924">ast_say_number_full_da()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01038">ast_say_number_full_de()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l00772">ast_say_number_full_en()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01172">ast_say_number_full_en_GB()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01251">ast_say_number_full_es()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01355">ast_say_number_full_fr()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l08036">ast_say_number_full_gr()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01447">ast_say_number_full_he()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01619">ast_say_number_full_hu()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01699">ast_say_number_full_is()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01819">ast_say_number_full_it()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l08105">ast_say_number_full_ja()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l09270">ast_say_number_full_ka()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l01974">ast_say_number_full_nl()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02072">ast_say_number_full_no()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02455">ast_say_number_full_pt()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02834">ast_say_number_full_ru()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02555">ast_say_number_full_se()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02913">ast_say_number_full_th()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02748">ast_say_number_full_ur()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02983">ast_say_number_full_vi()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02635">ast_say_number_full_zh()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02616">handle_getoption()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02557">handle_streamfile()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l02184">pl_odtworz_plik()</a>, <a class="el" href="../../d7/d1b/app__playback_8c_source.html#l00155">s_streamwait3()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l00171">say_character_str_full()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l00339">say_digit_str_full()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l00430">say_money_str_full()</a>, and <a class="el" href="../../d7/d01/say_8c_source.html#l00270">say_phonetic_str_full()</a>.</p>
<div class="fragment"><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;{</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;   res = <a class="code" href="../../d6/d13/file_8c.html#ab691e222ec6bab6039597ddbed2b5cf8">waitstream_core</a>(c, breakon, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0,</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;      audiofd, cmdfd, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> <span class="comment">/* no context */</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> <span class="comment">/* no callback */</span>);</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d13/file_8c.html#a55a8377c040ff899e59b19d08030e255">sanitize_waitstream_return</a>(res);</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;}</div><div class="ttc" id="file_8c_html_ab691e222ec6bab6039597ddbed2b5cf8"><div class="ttname"><a href="../../d6/d13/file_8c.html#ab691e222ec6bab6039597ddbed2b5cf8">waitstream_core</a></div><div class="ttdeci">static int waitstream_core(struct ast_channel *c, const char *breakon, const char *forward, const char *reverse, int skip_ms, int audiofd, int cmdfd, const char *context, ast_waitstream_fr_cb cb)</div><div class="ttdoc">the core of all waitstream() functions </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01551">file.c:1551</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="file_8c_html_a55a8377c040ff899e59b19d08030e255"><div class="ttname"><a href="../../d6/d13/file_8c.html#a55a8377c040ff899e59b19d08030e255">sanitize_waitstream_return</a></div><div class="ttdeci">static int sanitize_waitstream_return(int return_value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01759">file.c:1759</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a964f8ef393c07609d7b9e02937faed52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a964f8ef393c07609d7b9e02937faed52">&#9670;&nbsp;</a></span>ast_writefile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../db/dbc/structast__filestream.html">ast_filestream</a>* ast_writefile </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>comment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>check</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mode_t&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Starts writing a file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>the name of the file to write to </td></tr>
    <tr><td class="paramname">type</td><td>format of file you wish to write out to </td></tr>
    <tr><td class="paramname">comment</td><td>comment to go with </td></tr>
    <tr><td class="paramname">flags</td><td>output file flags </td></tr>
    <tr><td class="paramname">check</td><td>(unimplemented, hence negligible) </td></tr>
    <tr><td class="paramname">mode</td><td>Open mode Create an outgoing file stream. oflags are flags for the open() command, and if check is non-zero, then it will not write a file if there are any files that start with that name and have an extension Please note, this is a blocking function. Program execution will not return until ast_waitstream completes it's execution. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">a</td><td>struct <a class="el" href="../../db/dbc/structast__filestream.html" title="This structure is allocated by file.c in one chunk, together with buf_size and desc_size bytes of mem...">ast_filestream</a> on success. </td></tr>
    <tr><td class="paramname">NULL</td><td>on failure. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a294">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l01361">1361</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d13/file_8c_source.html#l01068">ast_closestream()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../d7/d5b/options_8h_source.html#l00120">ast_opt_cache_record_files</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00314">build_filename()</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00045">ast_format_def::exts</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00351">exts_compare</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00117">ast_filestream::f</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00107">ast_filestream::filename</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00104">ast_filestream::flags</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00103">ast_filestream::fmt</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00428">get_filestream()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00105">ast_filestream::mode</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00108">ast_filestream::realfilename</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00096">record_cache_dir</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00485">rewrite_wrapper()</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00068">ast_format_def::seek</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00112">ast_filestream::trans</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00110">ast_filestream::vfs</a>, and <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00126">ast_filestream::write_buffer</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01580">__ast_play_and_record()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00305">ast_monitor_start()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00209">ast_writestream()</a>, <a class="el" href="../../dd/d32/app__dictate_8c_source.html#l00087">dictate_exec()</a>, <a class="el" href="../../d0/ddd/res__convert_8c_source.html#l00064">handle_cli_file_convert()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02899">handle_recordfile()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l00670">mixmonitor_save_prep()</a>, <a class="el" href="../../dd/dd5/app__record_8c_source.html#l00221">record_exec()</a>, and <a class="el" href="../../df/d44/app__meetme_8c_source.html#l05681">recordthread()</a>.</p>
<div class="fragment"><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;{</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;   <span class="keywordtype">int</span> fd, myflags = 0;</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;   <span class="comment">/* compiler claims this variable can be used before initialization... */</span></div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;   FILE *bfile = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d57/structast__format__def.html">ast_format_def</a> *f;</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *fs = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;   <span class="keywordtype">size_t</span> size = 0;</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;   <span class="keywordtype">int</span> format_found = 0;</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../df/d8d/structformats.html">formats</a>);</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;   <span class="comment">/* set the O_TRUNC flag if and only if there is no O_APPEND specified */</span></div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;   <span class="comment">/* We really can&#39;t use O_APPEND as it will break WAV header updates */</span></div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/dbc/structast__filestream.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp; O_APPEND) {</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;      <a class="code" href="../../db/dbc/structast__filestream.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> &amp;= ~O_APPEND;</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;      myflags = O_TRUNC;</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;   }</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;   myflags |= O_WRONLY | O_CREAT;</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;   <span class="comment">/* XXX need to fix this - we should just do the fopen,</span></div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;<span class="comment">    * not open followed by fdopen()</span></div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../df/d8d/structformats.html">formats</a>, f, list) {</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;      <span class="keywordtype">char</span> *fn, *orig_fn = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;      <span class="keywordflow">if</span> (fs)</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d13/file_8c.html#ad60e6b6fb8b8078dc9e4deda4ffbde10">exts_compare</a>(f-&gt;<a class="code" href="../../d0/d57/structast__format__def.html#ade71f534a49925f1955a1598556219e2">exts</a>, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>))</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;         format_found = 1;</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;      fn = <a class="code" href="../../d6/d13/file_8c.html#a2a836416f6627399f3b75ef2705bcd89">build_filename</a>(<a class="code" href="../../db/dbc/structast__filestream.html#aeac90097f29f7529968697163cea5c18">filename</a>, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>);</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;      <span class="keywordflow">if</span> (!fn) {</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;      }</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;      fd = open(fn, <a class="code" href="../../db/dbc/structast__filestream.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> | myflags, <a class="code" href="../../db/dbc/structast__filestream.html#adc8d3cf511ceb277aea0cfa1cd027c59">mode</a>);</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;      <span class="keywordflow">if</span> (fd &gt; -1) {</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;         <span class="comment">/* fdopen() the resulting file stream */</span></div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;         bfile = fdopen(fd, ((<a class="code" href="../../db/dbc/structast__filestream.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> | myflags) &amp; O_RDWR) ? <span class="stringliteral">&quot;w+&quot;</span> : <span class="stringliteral">&quot;w&quot;</span>);</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;         <span class="keywordflow">if</span> (!bfile) {</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Whoa, fdopen failed: %s!\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;            close(fd);</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;            fd = -1;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;         }</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;      }</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5b/options_8h.html#a3472349abbba9eb4a158cdf4299bf740">ast_opt_cache_record_files</a> &amp;&amp; (fd &gt; -1)) {</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;         <span class="keywordtype">char</span> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;         fclose(bfile); <span class="comment">/* this also closes fd */</span></div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;<span class="comment">           We touch orig_fn just as a place-holder so other things (like vmail) see the file is there.</span></div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;<span class="comment">           What we are really doing is writing to record_cache_dir until we are done then we will mv the file into place.</span></div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;         orig_fn = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(fn);</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;         <span class="keywordflow">for</span> (c = fn; *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>; c++)</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;            <span class="keywordflow">if</span> (*c == <span class="charliteral">&#39;/&#39;</span>)</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;               *c = <span class="charliteral">&#39;_&#39;</span>;</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;         size = strlen(fn) + strlen(<a class="code" href="../../d7/d5b/options_8h.html#a08a845bf43007945cede2f5a6a62225c">record_cache_dir</a>) + 2;</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;         buf = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(size);</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;         strcpy(buf, <a class="code" href="../../d7/d5b/options_8h.html#a08a845bf43007945cede2f5a6a62225c">record_cache_dir</a>);</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;         strcat(buf, <span class="stringliteral">&quot;/&quot;</span>);</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;         strcat(buf, fn);</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(fn);</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;         fn = <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;         fd = open(fn, <a class="code" href="../../db/dbc/structast__filestream.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> | myflags, <a class="code" href="../../db/dbc/structast__filestream.html#adc8d3cf511ceb277aea0cfa1cd027c59">mode</a>);</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;         <span class="keywordflow">if</span> (fd &gt; -1) {</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;            <span class="comment">/* fdopen() the resulting file stream */</span></div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;            bfile = fdopen(fd, ((<a class="code" href="../../db/dbc/structast__filestream.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> | myflags) &amp; O_RDWR) ? <span class="stringliteral">&quot;w+&quot;</span> : <span class="stringliteral">&quot;w&quot;</span>);</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;            <span class="keywordflow">if</span> (!bfile) {</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Whoa, fdopen failed: %s!\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;               close(fd);</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;               fd = -1;</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;            }</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;         }</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;      }</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;      <span class="keywordflow">if</span> (fd &gt; -1) {</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;         <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = 0;</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;         fs = <a class="code" href="../../d6/d13/file_8c.html#a3e809ea7be0413c527df113a695552b8">get_filestream</a>(f, bfile);</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;         <span class="keywordflow">if</span> (fs) {</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;            <span class="keywordflow">if</span> ((fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#a6de7f628c7786f3686214488c8edfc27">write_buffer</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(32768))) {</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;               setvbuf(fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#a3efb0e1a16208deecbd84c15401f7cf8">f</a>, fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#a6de7f628c7786f3686214488c8edfc27">write_buffer</a>, _IOFBF, 32768);</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;            }</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;         }</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;         <span class="keywordflow">if</span> (!fs || <a class="code" href="../../d6/d13/file_8c.html#acbe06882238f9fabfff485fefc6fa619">rewrite_wrapper</a>(fs, <a class="code" href="../../d2/d7e/ael__lex_8c.html#a43be22b7a1b528eaf759e034ec581543">comment</a>)) {</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to rewrite %s\n&quot;</span>, fn);</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;            close(fd);</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;            <span class="keywordflow">if</span> (orig_fn) {</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;               unlink(fn);</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;               unlink(orig_fn);</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;               <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(orig_fn);</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;            }</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;            <span class="keywordflow">if</span> (fs) {</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;               <a class="code" href="../../d6/d13/file_8c.html#ab53bd2c3c55d509790c7f7620aac6373">ast_closestream</a>(fs);</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;               fs = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;            }</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;<span class="comment">             * &#39;fn&#39; was has either been allocated from build_filename, or that was freed</span></div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;<span class="comment">             * and now &#39;fn&#39; points to memory allocated for &#39;buf&#39;. Either way the memory</span></div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;<span class="comment">             * now needs to be released.</span></div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;            <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(fn);</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;         }</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;         fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#ad98134a98f3e3e3b5611a5fd2117e8e4">trans</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;         fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#a8e5f2c67c624fc84557ef2bdd855ebb9">fmt</a> = <a class="code" href="../../db/dbc/structast__filestream.html#a3efb0e1a16208deecbd84c15401f7cf8">f</a>;</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;         fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a> = <a class="code" href="../../db/dbc/structast__filestream.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a>;</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;         fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#adc8d3cf511ceb277aea0cfa1cd027c59">mode</a> = <a class="code" href="../../db/dbc/structast__filestream.html#adc8d3cf511ceb277aea0cfa1cd027c59">mode</a>;</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;         <span class="keywordflow">if</span> (orig_fn) {</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;            fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#a198a1121327381d95b1bb6c501e38333">realfilename</a> = orig_fn;</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;            fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#aeac90097f29f7529968697163cea5c18">filename</a> = fn;</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;<span class="comment">             * The above now manages the memory allocated for &#39;orig_fn&#39; and &#39;fn&#39;, so</span></div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;<span class="comment">             * set them to NULL, so they don&#39;t get released at the end of the loop.</span></div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;            orig_fn = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;            fn = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;            fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#a198a1121327381d95b1bb6c501e38333">realfilename</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;            fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#aeac90097f29f7529968697163cea5c18">filename</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<a class="code" href="../../db/dbc/structast__filestream.html#aeac90097f29f7529968697163cea5c18">filename</a>);</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;         }</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;         fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#a084d8f087c50442f51245ec3333abac4">vfs</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;         <span class="comment">/* If truncated, we&#39;ll be at the beginning; if not truncated, then append */</span></div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;         f-&gt;<a class="code" href="../../d0/d57/structast__format__def.html#a1327e7030c55bfe870ed79fab26709aa">seek</a>(fs, 0, SEEK_END);</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> != EEXIST) {</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to open file %s: %s\n&quot;</span>, fn, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;         <span class="keywordflow">if</span> (orig_fn)</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;            unlink(orig_fn);</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;      }</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;      <span class="comment">/* Free &#39;fn&#39;, or if &#39;fn&#39; points to &#39;buf&#39; then free &#39;buf&#39; */</span></div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(fn);</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(orig_fn);</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;   }</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../df/d8d/structformats.html">formats</a>);</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;   <span class="keywordflow">if</span> (!format_found)</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No such format &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>);</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;   <span class="keywordflow">return</span> fs;</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;}</div><div class="ttc" id="structast__format__def_html_ade71f534a49925f1955a1598556219e2"><div class="ttname"><a href="../../d0/d57/structast__format__def.html#ade71f534a49925f1955a1598556219e2">ast_format_def::exts</a></div><div class="ttdeci">char exts[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00045">mod_format.h:45</a></div></div>
<div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="file_8c_html_ad60e6b6fb8b8078dc9e4deda4ffbde10"><div class="ttname"><a href="../../d6/d13/file_8c.html#ad60e6b6fb8b8078dc9e4deda4ffbde10">exts_compare</a></div><div class="ttdeci">#define exts_compare(list, type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00351">file.c:351</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="file_8c_html_a3e809ea7be0413c527df113a695552b8"><div class="ttname"><a href="../../d6/d13/file_8c.html#a3e809ea7be0413c527df113a695552b8">get_filestream</a></div><div class="ttdeci">static struct ast_filestream * get_filestream(struct ast_format_def *fmt, FILE *bfile)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00428">file.c:428</a></div></div>
<div class="ttc" id="file_8c_html_acbe06882238f9fabfff485fefc6fa619"><div class="ttname"><a href="../../d6/d13/file_8c.html#acbe06882238f9fabfff485fefc6fa619">rewrite_wrapper</a></div><div class="ttdeci">static int rewrite_wrapper(struct ast_filestream *s, const char *comment)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00485">file.c:485</a></div></div>
<div class="ttc" id="structast__filestream_html_a198a1121327381d95b1bb6c501e38333"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#a198a1121327381d95b1bb6c501e38333">ast_filestream::realfilename</a></div><div class="ttdeci">char * realfilename</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00108">mod_format.h:108</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="file_8c_html_ab53bd2c3c55d509790c7f7620aac6373"><div class="ttname"><a href="../../d6/d13/file_8c.html#ab53bd2c3c55d509790c7f7620aac6373">ast_closestream</a></div><div class="ttdeci">int ast_closestream(struct ast_filestream *f)</div><div class="ttdoc">Closes a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01068">file.c:1068</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__format__def_html"><div class="ttname"><a href="../../d0/d57/structast__format__def.html">ast_format_def</a></div><div class="ttdoc">Each supported file format is described by the following structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00043">mod_format.h:43</a></div></div>
<div class="ttc" id="structast__format__def_html_a1327e7030c55bfe870ed79fab26709aa"><div class="ttname"><a href="../../d0/d57/structast__format__def.html#a1327e7030c55bfe870ed79fab26709aa">ast_format_def::seek</a></div><div class="ttdeci">int(* seek)(struct ast_filestream *, off_t, int)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00068">mod_format.h:68</a></div></div>
<div class="ttc" id="structast__filestream_html_a6de7f628c7786f3686214488c8edfc27"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#a6de7f628c7786f3686214488c8edfc27">ast_filestream::write_buffer</a></div><div class="ttdeci">char * write_buffer</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00126">mod_format.h:126</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="file_8c_html_a2a836416f6627399f3b75ef2705bcd89"><div class="ttname"><a href="../../d6/d13/file_8c.html#a2a836416f6627399f3b75ef2705bcd89">build_filename</a></div><div class="ttdeci">static char * build_filename(const char *filename, const char *ext)</div><div class="ttdoc">construct a filename. Absolute pathnames are preserved, relative names are prefixed by the sounds/ di...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00314">file.c:314</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="structast__filestream_html_a8e5f2c67c624fc84557ef2bdd855ebb9"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#a8e5f2c67c624fc84557ef2bdd855ebb9">ast_filestream::fmt</a></div><div class="ttdeci">struct ast_format_def * fmt</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00103">mod_format.h:103</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="ael__lex_8c_html_a43be22b7a1b528eaf759e034ec581543"><div class="ttname"><a href="../../d2/d7e/ael__lex_8c.html#a43be22b7a1b528eaf759e034ec581543">comment</a></div><div class="ttdeci">#define comment</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d7e/ael__lex_8c_source.html#l00976">ael_lex.c:976</a></div></div>
<div class="ttc" id="structformats_html"><div class="ttname"><a href="../../df/d8d/structformats.html">formats</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00069">file.c:69</a></div></div>
<div class="ttc" id="structast__filestream_html_ad98134a98f3e3e3b5611a5fd2117e8e4"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#ad98134a98f3e3e3b5611a5fd2117e8e4">ast_filestream::trans</a></div><div class="ttdeci">struct ast_trans_pvt * trans</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00112">mod_format.h:112</a></div></div>
<div class="ttc" id="options_8h_html_a3472349abbba9eb4a158cdf4299bf740"><div class="ttname"><a href="../../d7/d5b/options_8h.html#a3472349abbba9eb4a158cdf4299bf740">ast_opt_cache_record_files</a></div><div class="ttdeci">#define ast_opt_cache_record_files</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00120">options.h:120</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="options_8h_html_a08a845bf43007945cede2f5a6a62225c"><div class="ttname"><a href="../../d7/d5b/options_8h.html#a08a845bf43007945cede2f5a6a62225c">record_cache_dir</a></div><div class="ttdeci">char record_cache_dir[AST_CACHE_DIR_LEN]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00096">options.c:96</a></div></div>
<div class="ttc" id="structast__filestream_html_aeac90097f29f7529968697163cea5c18"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#aeac90097f29f7529968697163cea5c18">ast_filestream::filename</a></div><div class="ttdeci">char * filename</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00107">mod_format.h:107</a></div></div>
<div class="ttc" id="structast__filestream_html"><div class="ttname"><a href="../../db/dbc/structast__filestream.html">ast_filestream</a></div><div class="ttdoc">This structure is allocated by file.c in one chunk, together with buf_size and desc_size bytes of mem...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00101">mod_format.h:101</a></div></div>
<div class="ttc" id="structast__filestream_html_a3efb0e1a16208deecbd84c15401f7cf8"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#a3efb0e1a16208deecbd84c15401f7cf8">ast_filestream::f</a></div><div class="ttdeci">FILE * f</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00117">mod_format.h:117</a></div></div>
<div class="ttc" id="structast__filestream_html_a084d8f087c50442f51245ec3333abac4"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#a084d8f087c50442f51245ec3333abac4">ast_filestream::vfs</a></div><div class="ttdeci">struct ast_filestream * vfs</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00110">mod_format.h:110</a></div></div>
<div class="ttc" id="structast__filestream_html_adc8d3cf511ceb277aea0cfa1cd027c59"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#adc8d3cf511ceb277aea0cfa1cd027c59">ast_filestream::mode</a></div><div class="ttdeci">mode_t mode</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00105">mod_format.h:105</a></div></div>
<div class="ttc" id="structast__filestream_html_ac8bf36fe0577cba66bccda3a6f7e80a4"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#ac8bf36fe0577cba66bccda3a6f7e80a4">ast_filestream::flags</a></div><div class="ttdeci">int flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00104">mod_format.h:104</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3608386b919ef0949d2858cdeb02d12e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3608386b919ef0949d2858cdeb02d12e">&#9670;&nbsp;</a></span>ast_writestream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_writestream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *&#160;</td>
          <td class="paramname"><em>fs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes a frame to a stream. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fs</td><td>filestream to write to </td></tr>
    <tr><td class="paramname">f</td><td>frame to write to the filestream Send a frame to a filestream &ndash; note: does NOT free the frame, call ast_frfree manually </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on failure. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a303">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d6/d13/file_8c_source.html#l00209">209</a> of file <a class="el" href="../../d6/d13/file_8c_source.html">file.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00517">ao2_replace</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00201">ast_format_cmp()</a>, <a class="el" href="../../d0/d0a/format_8h_source.html#l00036">AST_FORMAT_CMP_EQUAL</a>, <a class="el" href="../../d0/d0a/format_8h_source.html#l00038">AST_FORMAT_CMP_NOT_EQUAL</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00334">ast_format_get_name()</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00354">ast_format_get_type()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00103">AST_FRAME_VIDEO</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">AST_FRAME_VOICE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">ast_frfree</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00438">AST_LIST_NEXT</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00032">AST_MEDIA_TYPE_AUDIO</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00565">ast_translate()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00485">ast_translator_build_path()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00475">ast_translator_free_path()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01361">ast_writefile()</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00107">ast_filestream::filename</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00104">ast_filestream::flags</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00103">ast_filestream::fmt</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00048">ast_format_def::format</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">ast_frame_subclass::format</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00114">ast_filestream::lastwriteformat</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00105">ast_filestream::mode</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00044">ast_format_def::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00112">ast_filestream::trans</a>, <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>, <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00110">ast_filestream::vfs</a>, and <a class="el" href="../../d7/d5d/mod__format_8h_source.html#l00066">ast_format_def::write</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01580">__ast_play_and_record()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l03529">__ast_read()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05194">ast_write_stream()</a>, <a class="el" href="../../dd/d32/app__dictate_8c_source.html#l00087">dictate_exec()</a>, <a class="el" href="../../d0/ddd/res__convert_8c_source.html#l00064">handle_cli_file_convert()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02899">handle_recordfile()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l00709">mixmonitor_thread()</a>, <a class="el" href="../../dd/dd5/app__record_8c_source.html#l00221">record_exec()</a>, and <a class="el" href="../../df/d44/app__meetme_8c_source.html#l05681">recordthread()</a>.</p>
<div class="fragment"><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;{</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;   <span class="keywordtype">int</span> res = -1;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;   <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30">AST_FRAME_VIDEO</a>) {</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a>(fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#a8e5f2c67c624fc84557ef2bdd855ebb9">fmt</a>-&gt;<a class="code" href="../../d0/d57/structast__format__def.html#ab425a484a0916077c5a30d9d7b229b44">format</a>) == <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>) {</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;         <span class="comment">/* This is the audio portion.  Call the video one... */</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;         <span class="keywordflow">if</span> (!fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#a084d8f087c50442f51245ec3333abac4">vfs</a> &amp;&amp; fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#aeac90097f29f7529968697163cea5c18">filename</a>) {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a> = <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#a084d8f087c50442f51245ec3333abac4">vfs</a> = <a class="code" href="../../d6/d13/file_8c.html#a964f8ef393c07609d7b9e02937faed52">ast_writefile</a>(fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#aeac90097f29f7529968697163cea5c18">filename</a>, type, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#ac8bf36fe0577cba66bccda3a6f7e80a4">flags</a>, 0, fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#adc8d3cf511ceb277aea0cfa1cd027c59">mode</a>);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Opened video output file\n&quot;</span>);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;         }</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;         <span class="keywordflow">if</span> (fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#a084d8f087c50442f51245ec3333abac4">vfs</a>)</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../d6/d13/file_8c.html#a3608386b919ef0949d2858cdeb02d12e">ast_writestream</a>(fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#a084d8f087c50442f51245ec3333abac4">vfs</a>, f);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;         <span class="comment">/* else ignore */</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      }</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> != <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>) {</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Tried to write non-voice frame\n&quot;</span>);</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;   }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#a8e5f2c67c624fc84557ef2bdd855ebb9">fmt</a>-&gt;<a class="code" href="../../d0/d57/structast__format__def.html#ab425a484a0916077c5a30d9d7b229b44">format</a>) != <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a>) {</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      res =  fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#a8e5f2c67c624fc84557ef2bdd855ebb9">fmt</a>-&gt;<a class="code" href="../../d0/d57/structast__format__def.html#a20bb29fc5058d976de3478468380cdb1">write</a>(fs, f);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      <span class="keywordflow">if</span> (res &lt; 0)</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Natural write failed\n&quot;</span>);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (res &gt; 0)</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Huh??\n&quot;</span>);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <span class="comment">/* XXX If they try to send us a type of frame that isn&#39;t the normal frame, and isn&#39;t</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">             the one we&#39;ve setup a translator for, we do the &quot;wrong thing&quot; XXX */</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <span class="keywordflow">if</span> (fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#ad98134a98f3e3e3b5611a5fd2117e8e4">trans</a> &amp;&amp; (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#ac7d6a578d1d7ec8696b068dd9446580e">lastwriteformat</a>) != <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a>)) {</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;         <a class="code" href="../../db/d39/translate_8h.html#a8f767bf5c2095f182e7cbaa73e391207">ast_translator_free_path</a>(fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#ad98134a98f3e3e3b5611a5fd2117e8e4">trans</a>);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;         fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#ad98134a98f3e3e3b5611a5fd2117e8e4">trans</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      }</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <span class="keywordflow">if</span> (!fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#ad98134a98f3e3e3b5611a5fd2117e8e4">trans</a>) {</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;         fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#ad98134a98f3e3e3b5611a5fd2117e8e4">trans</a> = <a class="code" href="../../db/d39/translate_8h.html#a08790d6e05056f38fe9194134332cfef">ast_translator_build_path</a>(fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#a8e5f2c67c624fc84557ef2bdd855ebb9">fmt</a>-&gt;<a class="code" href="../../d0/d57/structast__format__def.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>);</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      }</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;      <span class="keywordflow">if</span> (!fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#ad98134a98f3e3e3b5611a5fd2117e8e4">trans</a>) {</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to translate to format %s, source format %s\n&quot;</span>,</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#a8e5f2c67c624fc84557ef2bdd855ebb9">fmt</a>-&gt;<a class="code" href="../../d0/d57/structast__format__def.html#a3777dbae63a15da001b2baa317a25149">name</a>, <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>));</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *trf;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aa81c8462bd0574f4f9e09e71f2772f44">ao2_replace</a>(fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#ac7d6a578d1d7ec8696b068dd9446580e">lastwriteformat</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;         <span class="comment">/* Get the translated frame but don&#39;t consume the original in case they&#39;re using it on another stream */</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;         <span class="keywordflow">if</span> ((trf = <a class="code" href="../../db/d39/translate_8h.html#ab09d3ccb95d1f828d2871530226f9456">ast_translate</a>(fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#ad98134a98f3e3e3b5611a5fd2117e8e4">trans</a>, f, 0))) {</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *cur;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            <span class="comment">/* the translator may have returned multiple frames, so process them */</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            <span class="keywordflow">for</span> (cur = trf; cur; cur = <a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(cur, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>)) {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;               <span class="keywordflow">if</span> ((res = fs-&gt;<a class="code" href="../../db/dbc/structast__filestream.html#a8e5f2c67c624fc84557ef2bdd855ebb9">fmt</a>-&gt;<a class="code" href="../../d0/d57/structast__format__def.html#a20bb29fc5058d976de3478468380cdb1">write</a>(fs, trf))) {</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                  <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Translated frame write failed\n&quot;</span>);</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;               }</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            }</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;            <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(trf);</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            res = 0;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;         }</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      }</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;   }</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="format_8h_html_a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0a/format_8h_source.html#l00036">format.h:36</a></div></div>
<div class="ttc" id="format_8h_html_a0aba6e17ced3e85e838ea097baa5ddc7"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a></div><div class="ttdeci">enum ast_media_type ast_format_get_type(const struct ast_format *format)</div><div class="ttdoc">Get the media type of a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00354">format.c:354</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">include/asterisk/frame.h:101</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ae234825bcb65b88c0554b995ff1b8ba6"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a></div><div class="ttdeci">#define AST_LIST_NEXT(elm, field)</div><div class="ttdoc">Returns the next entry in the list after the given entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00438">linkedlists.h:438</a></div></div>
<div class="ttc" id="translate_8h_html_ab09d3ccb95d1f828d2871530226f9456"><div class="ttname"><a href="../../db/d39/translate_8h.html#ab09d3ccb95d1f828d2871530226f9456">ast_translate</a></div><div class="ttdeci">struct ast_frame * ast_translate(struct ast_trans_pvt *tr, struct ast_frame *f, int consume)</div><div class="ttdoc">translates one or more frames Apply an input frame into the translator and receive zero or one output...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00565">translate.c:565</a></div></div>
<div class="ttc" id="format_8h_html_a082f0fca94b18ba466f6e28d3ccb2fc8"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a></div><div class="ttdeci">const char * ast_format_get_name(const struct ast_format *format)</div><div class="ttdoc">Get the name associated with a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00334">format.c:334</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="file_8c_html_a3608386b919ef0949d2858cdeb02d12e"><div class="ttname"><a href="../../d6/d13/file_8c.html#a3608386b919ef0949d2858cdeb02d12e">ast_writestream</a></div><div class="ttdeci">int ast_writestream(struct ast_filestream *fs, struct ast_frame *f)</div><div class="ttdoc">Writes a frame to a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00209">file.c:209</a></div></div>
<div class="ttc" id="file_8c_html_a964f8ef393c07609d7b9e02937faed52"><div class="ttname"><a href="../../d6/d13/file_8c.html#a964f8ef393c07609d7b9e02937faed52">ast_writefile</a></div><div class="ttdeci">struct ast_filestream * ast_writefile(const char *filename, const char *type, const char *comment, int flags, int check, mode_t mode)</div><div class="ttdoc">Starts writing a file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01361">file.c:1361</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="format_8h_html_a738c58eca291b71de4422e95bff27400"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a></div><div class="ttdeci">enum ast_format_cmp_res ast_format_cmp(const struct ast_format *format1, const struct ast_format *format2)</div><div class="ttdoc">Compare two formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00201">format.c:201</a></div></div>
<div class="ttc" id="format_8h_html_a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0a/format_8h_source.html#l00038">format.h:38</a></div></div>
<div class="ttc" id="translate_8h_html_a08790d6e05056f38fe9194134332cfef"><div class="ttname"><a href="../../db/d39/translate_8h.html#a08790d6e05056f38fe9194134332cfef">ast_translator_build_path</a></div><div class="ttdeci">struct ast_trans_pvt * ast_translator_build_path(struct ast_format *dest, struct ast_format *source)</div><div class="ttdoc">Builds a translator path Build a path (possibly NULL) from source to dest. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00485">translate.c:485</a></div></div>
<div class="ttc" id="structast__filestream_html_a8e5f2c67c624fc84557ef2bdd855ebb9"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#a8e5f2c67c624fc84557ef2bdd855ebb9">ast_filestream::fmt</a></div><div class="ttdeci">struct ast_format_def * fmt</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00103">mod_format.h:103</a></div></div>
<div class="ttc" id="structast__format__def_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d0/d57/structast__format__def.html#ab425a484a0916077c5a30d9d7b229b44">ast_format_def::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00048">mod_format.h:48</a></div></div>
<div class="ttc" id="structframe__list_html"><div class="ttname"><a href="../../d9/d42/structframe__list.html">frame_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00590">res_rtp_asterisk.c:590</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00032">codec.h:32</a></div></div>
<div class="ttc" id="structast__format__def_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../d0/d57/structast__format__def.html#a3777dbae63a15da001b2baa317a25149">ast_format_def::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00044">mod_format.h:44</a></div></div>
<div class="ttc" id="structast__filestream_html_ad98134a98f3e3e3b5611a5fd2117e8e4"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#ad98134a98f3e3e3b5611a5fd2117e8e4">ast_filestream::trans</a></div><div class="ttdeci">struct ast_trans_pvt * trans</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00112">mod_format.h:112</a></div></div>
<div class="ttc" id="structast__filestream_html_ac7d6a578d1d7ec8696b068dd9446580e"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#ac7d6a578d1d7ec8696b068dd9446580e">ast_filestream::lastwriteformat</a></div><div class="ttdeci">struct ast_format * lastwriteformat</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00114">mod_format.h:114</a></div></div>
<div class="ttc" id="structast__filestream_html_aeac90097f29f7529968697163cea5c18"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#aeac90097f29f7529968697163cea5c18">ast_filestream::filename</a></div><div class="ttdeci">char * filename</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00107">mod_format.h:107</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa81c8462bd0574f4f9e09e71f2772f44"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa81c8462bd0574f4f9e09e71f2772f44">ao2_replace</a></div><div class="ttdeci">#define ao2_replace(dst, src)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00517">astobj2.h:517</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a6440d070425a2efe8e0aa71e8d9e47b7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a></div><div class="ttdeci">#define ast_frfree(fr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">include/asterisk/frame.h:556</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="structast__filestream_html_a084d8f087c50442f51245ec3333abac4"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#a084d8f087c50442f51245ec3333abac4">ast_filestream::vfs</a></div><div class="ttdeci">struct ast_filestream * vfs</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00110">mod_format.h:110</a></div></div>
<div class="ttc" id="structast__filestream_html_adc8d3cf511ceb277aea0cfa1cd027c59"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#adc8d3cf511ceb277aea0cfa1cd027c59">ast_filestream::mode</a></div><div class="ttdeci">mode_t mode</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00105">mod_format.h:105</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">ast_frame_subclass::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">include/asterisk/frame.h:155</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30">AST_FRAME_VIDEO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00103">include/asterisk/frame.h:103</a></div></div>
<div class="ttc" id="structast__format__def_html_a20bb29fc5058d976de3478468380cdb1"><div class="ttname"><a href="../../d0/d57/structast__format__def.html#a20bb29fc5058d976de3478468380cdb1">ast_format_def::write</a></div><div class="ttdeci">int(* write)(struct ast_filestream *, struct ast_frame *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00066">mod_format.h:66</a></div></div>
<div class="ttc" id="translate_8h_html_a8f767bf5c2095f182e7cbaa73e391207"><div class="ttname"><a href="../../db/d39/translate_8h.html#a8f767bf5c2095f182e7cbaa73e391207">ast_translator_free_path</a></div><div class="ttdeci">void ast_translator_free_path(struct ast_trans_pvt *tr)</div><div class="ttdoc">Frees a translator path Frees the given translator path structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00475">translate.c:475</a></div></div>
<div class="ttc" id="structast__filestream_html_ac8bf36fe0577cba66bccda3a6f7e80a4"><div class="ttname"><a href="../../db/dbc/structast__filestream.html#ac8bf36fe0577cba66bccda3a6f7e80a4">ast_filestream::flags</a></div><div class="ttdeci">int flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00104">mod_format.h:104</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:45:53 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
