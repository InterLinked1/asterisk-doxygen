<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: bridge_channel.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">bridge_channel.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Bridging Channel API.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../da/ddb/heap_8h_source.html">asterisk/heap.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d4d/alertpipe_8h_source.html">asterisk/alertpipe.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/da5/astobj2_8h_source.html">asterisk/astobj2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d0f/stringfields_8h_source.html">asterisk/stringfields.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html">asterisk/app.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/de0/pbx_8h_source.html">asterisk/pbx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d7b/channel_8h_source.html">asterisk/channel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d41/timing_8h_source.html">asterisk/timing.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d56/bridge_8h_source.html">asterisk/bridge.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d41/bridge__channel_8h_source.html">asterisk/bridge_channel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/d85/bridge__after_8h_source.html">asterisk/bridge_after.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/dfc/bridge__channel__internal_8h_source.html">asterisk/bridge_channel_internal.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/dde/bridge__internal_8h_source.html">asterisk/bridge_internal.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d4e/stasis__bridges_8h_source.html">asterisk/stasis_bridges.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/d4a/stasis__channels_8h_source.html">asterisk/stasis_channels.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d07/musiconhold_8h_source.html">asterisk/musiconhold.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/daa/include_2asterisk_2features__config_8h_source.html">asterisk/features_config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d33/parking_8h_source.html">asterisk/parking.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/da3/causes_8h_source.html">asterisk/causes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/ddc/test_8h_source.html">asterisk/test.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d28/sem_8h_source.html">asterisk/sem.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/d95/stream_8h_source.html">asterisk/stream.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d0d/message_8h_source.html">asterisk/message.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for bridge_channel.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d16/bridge__channel_8c__incl.png" border="0" usemap="#bridge__channel_8c" alt=""/></div>
<map name="bridge__channel_8c" id="bridge__channel_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="154,87,238,114"/>
<area shape="rect" id="node7" href="../../da/ddb/heap_8h.html" title="Max Heap data structure. " alt="" coords="3514,87,3634,114"/>
<area shape="rect" id="node8" href="../../dc/d4d/alertpipe_8h.html" title="asterisk/alertpipe.h" alt="" coords="966,319,1110,345"/>
<area shape="rect" id="node11" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="2655,468,2812,495"/>
<area shape="rect" id="node15" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="328,543,462,569"/>
<area shape="rect" id="node17" href="../../d3/d93/include_2asterisk_2app_8h.html" title="Application convenience functions, designed to give consistent look and feel to Asterisk apps..." alt="" coords="698,244,810,271"/>
<area shape="rect" id="node20" href="../../db/de0/pbx_8h.html" title="Core PBX routines and definitions. " alt="" coords="2525,169,2636,196"/>
<area shape="rect" id="node21" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1662,244,1800,271"/>
<area shape="rect" id="node35" href="../../db/d41/timing_8h.html" title="Timing source management. " alt="" coords="3658,87,3786,114"/>
<area shape="rect" id="node36" href="../../d4/d56/bridge_8h.html" title="Bridging API. " alt="" coords="3124,169,3252,196"/>
<area shape="rect" id="node37" href="../../de/d41/bridge__channel_8h.html" title="asterisk/bridge_channel.h" alt="" coords="3125,244,3310,271"/>
<area shape="rect" id="node38" href="../../d8/d85/bridge__after_8h.html" title="After Bridge Execution API. " alt="" coords="3810,87,3974,114"/>
<area shape="rect" id="node39" href="../../d9/dfc/bridge__channel__internal_8h.html" title="Private Bridging Channel API. " alt="" coords="3999,80,4172,121"/>
<area shape="rect" id="node40" href="../../d5/dde/bridge__internal_8h.html" title="Private Bridging API. " alt="" coords="4197,87,4380,114"/>
<area shape="rect" id="node41" href="../../dc/d4e/stasis__bridges_8h.html" title="asterisk/stasis_bridges.h" alt="" coords="2630,87,2808,114"/>
<area shape="rect" id="node42" href="../../d9/d4a/stasis__channels_8h.html" title="asterisk/stasis_channels.h" alt="" coords="1636,169,1826,196"/>
<area shape="rect" id="node43" href="../../dc/d07/musiconhold_8h.html" title="Music on hold handling. " alt="" coords="4404,87,4573,114"/>
<area shape="rect" id="node44" href="../../d0/daa/include_2asterisk_2features__config_8h.html" title="asterisk/features_config.h" alt="" coords="2762,169,2948,196"/>
<area shape="rect" id="node45" href="../../d2/d33/parking_8h.html" title="Call Parking API. " alt="" coords="3045,87,3180,114"/>
<area shape="rect" id="node46" href="../../d4/da3/causes_8h.html" title="Internal Asterisk hangup causes. " alt="" coords="4598,87,4731,114"/>
<area shape="rect" id="node47" href="../../d2/ddc/test_8h.html" title="Test Framework API. " alt="" coords="716,393,829,420"/>
<area shape="rect" id="node48" href="../../d2/d28/sem_8h.html" title="Asterisk semaphore API. " alt="" coords="3326,468,3442,495"/>
<area shape="rect" id="node49" href="../../d8/d95/stream_8h.html" title="Media Stream API. " alt="" coords="3153,468,3288,495"/>
<area shape="rect" id="node50" href="../../d2/d0d/message_8h.html" title="Out&#45;of&#45;call text message support. " alt="" coords="4755,87,4902,114"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="203,169,358,196"/>
<area shape="rect" id="node4" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="132,617,269,644"/>
<area shape="rect" id="node5" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="44,169,178,196"/>
<area shape="rect" id="node9" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1060,393,1175,420"/>
<area shape="rect" id="node10" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="2453,692,2566,719"/>
<area shape="rect" id="node13" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="826,468,956,495"/>
<area shape="rect" id="node12" href="../../d6/d68/vector_8h.html" title="Vector container support. " alt="" coords="2670,543,2797,569"/>
<area shape="rect" id="node14" href="../../dc/d7d/threadstorage_8h.html" title="Definitions to aid in the use of thread local storage. " alt="" coords="802,543,980,569"/>
<area shape="rect" id="node16" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="1645,617,1796,644"/>
<area shape="rect" id="node18" href="../../d2/d4d/file_8h.html" title="Generic File Format Support. Should be included by clients of the file handling routines. File service providers should instead include mod_format.h. " alt="" coords="534,319,640,345"/>
<area shape="rect" id="node19" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="816,319,942,345"/>
<area shape="rect" id="node23" href="../../d0/d0a/format_8h.html" title="Media Format API. " alt="" coords="2126,393,2256,420"/>
<area shape="rect" id="node26" href="../../d9/de7/chanvars_8h.html" title="Channel Variables. " alt="" coords="2396,319,2543,345"/>
<area shape="rect" id="node30" href="../../d7/d00/sched_8h.html" title="Scheduler Routines (derived from cheops) " alt="" coords="2261,244,2388,271"/>
<area shape="rect" id="node31" href="../../da/da2/devicestate_8h.html" title="Device state management. " alt="" coords="2022,244,2184,271"/>
<area shape="rect" id="node32" href="../../d6/dd7/presencestate_8h.html" title="Presence state management. " alt="" coords="2412,244,2592,271"/>
<area shape="rect" id="node33" href="../../d6/da0/hashtab_8h.html" title="Generic (perhaps overly so) hashtable implementation Hash Table support in Asterisk. " alt="" coords="2508,617,2648,644"/>
<area shape="rect" id="node34" href="../../d1/d99/xmldoc_8h.html" title="Asterisk XML Documentation API. " alt="" coords="2346,393,2481,420"/>
<area shape="rect" id="node22" href="../../dc/d14/abstract__jb_8h.html" title="Common implementation&#45;independent jitterbuffer stuff. " alt="" coords="2112,319,2270,345"/>
<area shape="rect" id="node24" href="../../d4/dfb/poll-compat_8h.html" title="asterisk/poll&#45;compat.h" alt="" coords="1489,319,1653,345"/>
<area shape="rect" id="node25" href="../../d6/d66/include_2asterisk_2frame_8h.html" title="Asterisk internal frame definitions. " alt="" coords="1961,319,2088,345"/>
<area shape="rect" id="node27" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="1236,319,1362,345"/>
<area shape="rect" id="node28" href="../../dc/d07/cdr_8h.html" title="Call Detail Record API. " alt="" coords="1678,319,1784,345"/>
<area shape="rect" id="node29" href="../../d9/db6/datastore_8h.html" title="Asterisk datastore objects. " alt="" coords="1536,393,1686,420"/>
</map>
</div>
</div>
<p><a href="../../d3/d32/bridge__channel_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/de8/structblind__transfer__data.html">blind_transfer_data</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Data specifying where a blind transfer is going to.  <a href="../../d1/de8/structblind__transfer__data.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dfe/structbridge__custom__callback.html">bridge_custom_callback</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d7e/structbridge__park.html">bridge_park</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d29/structbridge__playfile.html">bridge_playfile</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/dd4/structbridge__run__app.html">bridge_run_app</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d54/structbridge__sync.html">bridge_sync</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronous bridge action object.  <a href="../../d7/d54/structbridge__sync.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d61/structsync__payload.html">sync_payload</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frame payload for synchronous bridge actions.  <a href="../../d7/d61/structsync__payload.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dac/structsync__structs.html">sync_structs</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">List holding active synchronous action objects.  <a href="../../dd/dac/structsync__structs.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ad169cc192a23699be3580db10acc8c21"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#ad169cc192a23699be3580db10acc8c21">PLAYBACK_TIMEOUT</a>&#160;&#160;&#160;(600 * 1000)</td></tr>
<tr class="memdesc:ad169cc192a23699be3580db10acc8c21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Failsafe for synchronous bridge action waiting.  <a href="#ad169cc192a23699be3580db10acc8c21">More...</a><br /></td></tr>
<tr class="separator:ad169cc192a23699be3580db10acc8c21"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ae9c87a1da9bdb14cafb135c0b2f3d9e2"><td class="memItemLeft" align="right" valign="top">typedef int(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#ae9c87a1da9bdb14cafb135c0b2f3d9e2">ast_bridge_channel_post_action_data</a>) (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, enum <a class="el" href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0a">bridge_channel_action_type</a> action, const void *data, size_t datalen)</td></tr>
<tr class="memdesc:ae9c87a1da9bdb14cafb135c0b2f3d9e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used to queue an action frame onto a bridge channel and write an action frame into a bridge.  <a href="#ae9c87a1da9bdb14cafb135c0b2f3d9e2">More...</a><br /></td></tr>
<tr class="separator:ae9c87a1da9bdb14cafb135c0b2f3d9e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abe7719346a880cfeec2c2cda0cb9a831"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#abe7719346a880cfeec2c2cda0cb9a831">after_bridge_move_channel</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan_bridged, void *data)</td></tr>
<tr class="separator:abe7719346a880cfeec2c2cda0cb9a831"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6921b94f3fb5dbaecacfba765d677793"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a6921b94f3fb5dbaecacfba765d677793">after_bridge_move_channel_fail</a> (enum <a class="el" href="../../d8/d85/bridge__after_8h.html#a1b15a371c654cfe77de053afe0994b9c">ast_bridge_after_cb_reason</a> reason, void *data)</td></tr>
<tr class="separator:a6921b94f3fb5dbaecacfba765d677793"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69864377e8f1cf05ba95f1645bc98c65"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a69864377e8f1cf05ba95f1645bc98c65">ast_bridge_channel_feature_digit</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, int <a class="el" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>)</td></tr>
<tr class="memdesc:a69864377e8f1cf05ba95f1645bc98c65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a DTMF digit to the collected digits to match against DTMF features.  <a href="#a69864377e8f1cf05ba95f1645bc98c65">More...</a><br /></td></tr>
<tr class="separator:a69864377e8f1cf05ba95f1645bc98c65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a3de22abaf5ae848a3745186fa399e0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a2a3de22abaf5ae848a3745186fa399e0">ast_bridge_channel_feature_digit_add</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, int <a class="el" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>)</td></tr>
<tr class="memdesc:a2a3de22abaf5ae848a3745186fa399e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a DTMF digit to the collected digits.  <a href="#a2a3de22abaf5ae848a3745186fa399e0">More...</a><br /></td></tr>
<tr class="separator:a2a3de22abaf5ae848a3745186fa399e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae04b08c94e2d24a179c9b8e0842ccc57"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#ae04b08c94e2d24a179c9b8e0842ccc57">ast_bridge_channel_get_chan</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="memdesc:ae04b08c94e2d24a179c9b8e0842ccc57"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a ref to the bridge_channel's <a class="el" href="../../df/d3c/structast__channel.html" title="Main Channel structure associated with a channel. ">ast_channel</a>.  <a href="#ae04b08c94e2d24a179c9b8e0842ccc57">More...</a><br /></td></tr>
<tr class="separator:ae04b08c94e2d24a179c9b8e0842ccc57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e482bb2dcffd792205f114ddfa098fb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a7e482bb2dcffd792205f114ddfa098fb">ast_bridge_channel_kick</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, int cause)</td></tr>
<tr class="memdesc:a7e482bb2dcffd792205f114ddfa098fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Kick the channel out of the bridge.  <a href="#a7e482bb2dcffd792205f114ddfa098fb">More...</a><br /></td></tr>
<tr class="separator:a7e482bb2dcffd792205f114ddfa098fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad58d921ec1c5a6f12be8f94327dd98c0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, enum <a class="el" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaa">bridge_channel_state</a> new_state, int cause)</td></tr>
<tr class="memdesc:ad58d921ec1c5a6f12be8f94327dd98c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set bridge channel state to leave bridge (if not leaving already).  <a href="#ad58d921ec1c5a6f12be8f94327dd98c0">More...</a><br /></td></tr>
<tr class="separator:ad58d921ec1c5a6f12be8f94327dd98c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab37a1835212d045dcfe7ef7f25eb5e31"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#ab37a1835212d045dcfe7ef7f25eb5e31">ast_bridge_channel_leave_bridge_nolock</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, enum <a class="el" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaa">bridge_channel_state</a> new_state, int cause)</td></tr>
<tr class="memdesc:ab37a1835212d045dcfe7ef7f25eb5e31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set bridge channel state to leave bridge (if not leaving already).  <a href="#ab37a1835212d045dcfe7ef7f25eb5e31">More...</a><br /></td></tr>
<tr class="separator:ab37a1835212d045dcfe7ef7f25eb5e31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d01ff5caf025a97796d2dbb78f5f02c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="memdesc:a7d01ff5caf025a97796d2dbb78f5f02c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lock the bridge associated with the bridge channel.  <a href="#a7d01ff5caf025a97796d2dbb78f5f02c">More...</a><br /></td></tr>
<tr class="separator:a7d01ff5caf025a97796d2dbb78f5f02c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aada1c86f1020a0d546b371a8ff602cee"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#aada1c86f1020a0d546b371a8ff602cee">ast_bridge_channel_merge_inhibit</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, int <a class="el" href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a>)</td></tr>
<tr class="memdesc:aada1c86f1020a0d546b371a8ff602cee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adjust the bridge_channel's bridge merge inhibit request count.  <a href="#aada1c86f1020a0d546b371a8ff602cee">More...</a><br /></td></tr>
<tr class="separator:aada1c86f1020a0d546b371a8ff602cee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a891462a54b03fb795d42765b661cede6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a891462a54b03fb795d42765b661cede6">ast_bridge_channel_notify_talking</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, int started_talking)</td></tr>
<tr class="memdesc:a891462a54b03fb795d42765b661cede6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lets the bridging indicate when a bridge channel has stopped or started talking.  <a href="#a891462a54b03fb795d42765b661cede6">More...</a><br /></td></tr>
<tr class="separator:a891462a54b03fb795d42765b661cede6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a9bea2845810c6891440a012a275a36"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a0a9bea2845810c6891440a012a275a36">ast_bridge_channel_peer</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="memdesc:a0a9bea2845810c6891440a012a275a36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the peer bridge channel of a two party bridge.  <a href="#a0a9bea2845810c6891440a012a275a36">More...</a><br /></td></tr>
<tr class="separator:a0a9bea2845810c6891440a012a275a36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01de7987fb023a0c1e52965454797d0b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a01de7987fb023a0c1e52965454797d0b">ast_bridge_channel_playfile</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, <a class="el" href="../../de/d41/bridge__channel_8h.html#afb66d5073210f00fef9adc41e16a5f00">ast_bridge_custom_play_fn</a> custom_play, const char *playfile, const char *moh_class)</td></tr>
<tr class="memdesc:a01de7987fb023a0c1e52965454797d0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Play a file on the bridge channel.  <a href="#a01de7987fb023a0c1e52965454797d0b">More...</a><br /></td></tr>
<tr class="separator:a01de7987fb023a0c1e52965454797d0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fa039da96461900d3a9f0ceefd7298f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a4fa039da96461900d3a9f0ceefd7298f">ast_bridge_channel_queue_app</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, const char *<a class="el" href="../../d9/da0/pbx__private_8h.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a>, const char *app_args, const char *moh_class)</td></tr>
<tr class="memdesc:a4fa039da96461900d3a9f0ceefd7298f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue a bridge action run application frame onto the bridge channel.  <a href="#a4fa039da96461900d3a9f0ceefd7298f">More...</a><br /></td></tr>
<tr class="separator:a4fa039da96461900d3a9f0ceefd7298f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7de2a71d5af8f85035713f1f3cb69a9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#ad7de2a71d5af8f85035713f1f3cb69a9">ast_bridge_channel_queue_callback</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, enum <a class="el" href="../../de/d41/bridge__channel_8h.html#a411218cf4d743baa73c2def8f024cb23">ast_bridge_channel_custom_callback_option</a> flags, <a class="el" href="../../de/d41/bridge__channel_8h.html#a7c65814e807e654cd23c9d952e23b69a">ast_bridge_custom_callback_fn</a> callback, const void *payload, size_t payload_size)</td></tr>
<tr class="memdesc:ad7de2a71d5af8f85035713f1f3cb69a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue a bridge action custom callback frame onto the bridge channel.  <a href="#ad7de2a71d5af8f85035713f1f3cb69a9">More...</a><br /></td></tr>
<tr class="separator:ad7de2a71d5af8f85035713f1f3cb69a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc0302bab9fb2f318db695fe1f9047d8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#abc0302bab9fb2f318db695fe1f9047d8">ast_bridge_channel_queue_control_data</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, enum <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390">ast_control_frame_type</a> control, const void *data, size_t datalen)</td></tr>
<tr class="memdesc:abc0302bab9fb2f318db695fe1f9047d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue a control frame onto the bridge channel with data.  <a href="#abc0302bab9fb2f318db695fe1f9047d8">More...</a><br /></td></tr>
<tr class="separator:abc0302bab9fb2f318db695fe1f9047d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba51942a86849ae41c5397d596cb8ed1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#aba51942a86849ae41c5397d596cb8ed1">ast_bridge_channel_queue_frame</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *fr)</td></tr>
<tr class="memdesc:aba51942a86849ae41c5397d596cb8ed1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a frame to the specified bridge_channel.  <a href="#aba51942a86849ae41c5397d596cb8ed1">More...</a><br /></td></tr>
<tr class="separator:aba51942a86849ae41c5397d596cb8ed1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac352fd6d6188d7431155f34ae2a38799"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#ac352fd6d6188d7431155f34ae2a38799">ast_bridge_channel_queue_playfile</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, <a class="el" href="../../de/d41/bridge__channel_8h.html#afb66d5073210f00fef9adc41e16a5f00">ast_bridge_custom_play_fn</a> custom_play, const char *playfile, const char *moh_class)</td></tr>
<tr class="memdesc:ac352fd6d6188d7431155f34ae2a38799"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue a bridge action play file frame onto the bridge channel.  <a href="#ac352fd6d6188d7431155f34ae2a38799">More...</a><br /></td></tr>
<tr class="separator:ac352fd6d6188d7431155f34ae2a38799"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7787cec5827585d82ad62292744aeaf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#ac7787cec5827585d82ad62292744aeaf">ast_bridge_channel_queue_playfile_sync</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, <a class="el" href="../../de/d41/bridge__channel_8h.html#afb66d5073210f00fef9adc41e16a5f00">ast_bridge_custom_play_fn</a> custom_play, const char *playfile, const char *moh_class)</td></tr>
<tr class="memdesc:ac7787cec5827585d82ad62292744aeaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronously queue a bridge action play file frame onto the bridge channel.  <a href="#ac7787cec5827585d82ad62292744aeaf">More...</a><br /></td></tr>
<tr class="separator:ac7787cec5827585d82ad62292744aeaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac77801ebc652f818148d6da29869970c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#ac77801ebc652f818148d6da29869970c">ast_bridge_channel_restore_formats</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="memdesc:ac77801ebc652f818148d6da29869970c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restore the formats of a bridge channel's channel to how they were before bridge_channel_internal_join.  <a href="#ac77801ebc652f818148d6da29869970c">More...</a><br /></td></tr>
<tr class="separator:ac77801ebc652f818148d6da29869970c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18a051cde2dd2ad809524473ef4ae5ef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a18a051cde2dd2ad809524473ef4ae5ef">ast_bridge_channel_run_app</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, const char *<a class="el" href="../../d9/da0/pbx__private_8h.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a>, const char *app_args, const char *moh_class)</td></tr>
<tr class="memdesc:a18a051cde2dd2ad809524473ef4ae5ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run an application on the bridge channel.  <a href="#a18a051cde2dd2ad809524473ef4ae5ef">More...</a><br /></td></tr>
<tr class="separator:a18a051cde2dd2ad809524473ef4ae5ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa464f1acd378d6a297a514007cec8d18"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#aa464f1acd378d6a297a514007cec8d18">ast_bridge_channel_stream_map</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="memdesc:aa464f1acd378d6a297a514007cec8d18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maps a channel's stream topology to and from the bridge.  <a href="#aa464f1acd378d6a297a514007cec8d18">More...</a><br /></td></tr>
<tr class="separator:aa464f1acd378d6a297a514007cec8d18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a609d9cf54ffe625a1a13cbce1df9492e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a609d9cf54ffe625a1a13cbce1df9492e">ast_bridge_channel_update_accountcodes</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *joining, struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *leaving)</td></tr>
<tr class="separator:a609d9cf54ffe625a1a13cbce1df9492e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27c80bee9eb9c5fa1a17c722115c5ac1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a27c80bee9eb9c5fa1a17c722115c5ac1">ast_bridge_channel_update_linkedids</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *swap)</td></tr>
<tr class="separator:a27c80bee9eb9c5fa1a17c722115c5ac1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04e98e9a5ac91b85c516b4d579a34449"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a04e98e9a5ac91b85c516b4d579a34449">ast_bridge_channel_write_app</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, const char *<a class="el" href="../../d9/da0/pbx__private_8h.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a>, const char *app_args, const char *moh_class)</td></tr>
<tr class="memdesc:a04e98e9a5ac91b85c516b4d579a34449"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a bridge action run application frame into the bridge.  <a href="#a04e98e9a5ac91b85c516b4d579a34449">More...</a><br /></td></tr>
<tr class="separator:a04e98e9a5ac91b85c516b4d579a34449"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae014c66309327185b609d7e3ccf21af5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#ae014c66309327185b609d7e3ccf21af5">ast_bridge_channel_write_callback</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, enum <a class="el" href="../../de/d41/bridge__channel_8h.html#a411218cf4d743baa73c2def8f024cb23">ast_bridge_channel_custom_callback_option</a> flags, <a class="el" href="../../de/d41/bridge__channel_8h.html#a7c65814e807e654cd23c9d952e23b69a">ast_bridge_custom_callback_fn</a> callback, const void *payload, size_t payload_size)</td></tr>
<tr class="memdesc:ae014c66309327185b609d7e3ccf21af5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a bridge action custom callback frame into the bridge.  <a href="#ae014c66309327185b609d7e3ccf21af5">More...</a><br /></td></tr>
<tr class="separator:ae014c66309327185b609d7e3ccf21af5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d7ca6b64c5bd875d4f16e8aef443497"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a9d7ca6b64c5bd875d4f16e8aef443497">ast_bridge_channel_write_control_data</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, enum <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390">ast_control_frame_type</a> control, const void *data, size_t datalen)</td></tr>
<tr class="memdesc:a9d7ca6b64c5bd875d4f16e8aef443497"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a control frame into the bridge with data.  <a href="#a9d7ca6b64c5bd875d4f16e8aef443497">More...</a><br /></td></tr>
<tr class="separator:a9d7ca6b64c5bd875d4f16e8aef443497"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad70b0a7df24a2aa9e284d8c785dcbd45"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#ad70b0a7df24a2aa9e284d8c785dcbd45">ast_bridge_channel_write_hold</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, const char *moh_class)</td></tr>
<tr class="memdesc:ad70b0a7df24a2aa9e284d8c785dcbd45"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a hold frame into the bridge.  <a href="#ad70b0a7df24a2aa9e284d8c785dcbd45">More...</a><br /></td></tr>
<tr class="separator:ad70b0a7df24a2aa9e284d8c785dcbd45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9a368f3ce4811e8ca53ef51d6cd69f9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#af9a368f3ce4811e8ca53ef51d6cd69f9">ast_bridge_channel_write_park</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, const char *parkee_uuid, const char *parker_uuid, const char *<a class="el" href="../../da/d37/structapp__data.html">app_data</a>)</td></tr>
<tr class="memdesc:af9a368f3ce4811e8ca53ef51d6cd69f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Have a bridge channel park a channel in the bridge.  <a href="#af9a368f3ce4811e8ca53ef51d6cd69f9">More...</a><br /></td></tr>
<tr class="separator:af9a368f3ce4811e8ca53ef51d6cd69f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad30f159c66c054fd95a739c087a6c5e9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#ad30f159c66c054fd95a739c087a6c5e9">ast_bridge_channel_write_playfile</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, <a class="el" href="../../de/d41/bridge__channel_8h.html#afb66d5073210f00fef9adc41e16a5f00">ast_bridge_custom_play_fn</a> custom_play, const char *playfile, const char *moh_class)</td></tr>
<tr class="memdesc:ad30f159c66c054fd95a739c087a6c5e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a bridge action play file frame into the bridge.  <a href="#ad30f159c66c054fd95a739c087a6c5e9">More...</a><br /></td></tr>
<tr class="separator:ad30f159c66c054fd95a739c087a6c5e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4be080559ea3fc87e50aa29a95af74f0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a4be080559ea3fc87e50aa29a95af74f0">ast_bridge_channel_write_unhold</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="memdesc:a4be080559ea3fc87e50aa29a95af74f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write an unhold frame into the bridge.  <a href="#a4be080559ea3fc87e50aa29a95af74f0">More...</a><br /></td></tr>
<tr class="separator:a4be080559ea3fc87e50aa29a95af74f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef93dd372b07227b9aa10c530d5039f8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#aef93dd372b07227b9aa10c530d5039f8">ast_bridge_queue_everyone_else</a> (struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge, struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame)</td></tr>
<tr class="memdesc:aef93dd372b07227b9aa10c530d5039f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue the given frame to everyone else.  <a href="#aef93dd372b07227b9aa10c530d5039f8">More...</a><br /></td></tr>
<tr class="separator:aef93dd372b07227b9aa10c530d5039f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a657dfbcaa8a7097be8528d6a659d3d61"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a657dfbcaa8a7097be8528d6a659d3d61">bridge_channel_attended_transfer</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, const char *target_chan_name)</td></tr>
<tr class="separator:a657dfbcaa8a7097be8528d6a659d3d61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6551ce3945d265e4982897e6c8c3f28"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#aa6551ce3945d265e4982897e6c8c3f28">bridge_channel_blind_transfer</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, struct <a class="el" href="../../d1/de8/structblind__transfer__data.html">blind_transfer_data</a> *blind_data)</td></tr>
<tr class="separator:aa6551ce3945d265e4982897e6c8c3f28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31a39e9eb864c0dc9dd9c2a8e5c84098"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a31a39e9eb864c0dc9dd9c2a8e5c84098">bridge_channel_cancel_owed_events</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="separator:a31a39e9eb864c0dc9dd9c2a8e5c84098"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b5aeb4739651650c4d2cb568073d608"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a7b5aeb4739651650c4d2cb568073d608">bridge_channel_destroy</a> (void *obj)</td></tr>
<tr class="separator:a7b5aeb4739651650c4d2cb568073d608"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97a6be0c1c4165d3a633cbf6d365d450"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a97a6be0c1c4165d3a633cbf6d365d450">bridge_channel_dissolve_check</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="separator:a97a6be0c1c4165d3a633cbf6d365d450"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65d9e7f82bc927eb1fe562798b694ef4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a65d9e7f82bc927eb1fe562798b694ef4">bridge_channel_do_callback</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, struct <a class="el" href="../../d1/dfe/structbridge__custom__callback.html">bridge_custom_callback</a> *data)</td></tr>
<tr class="separator:a65d9e7f82bc927eb1fe562798b694ef4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e75ef876f4aa83248184a4e96be760f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a9e75ef876f4aa83248184a4e96be760f">bridge_channel_dtmf_stream</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, const char *dtmf)</td></tr>
<tr class="memdesc:a9e75ef876f4aa83248184a4e96be760f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal function that plays back DTMF on a bridge channel.  <a href="#a9e75ef876f4aa83248184a4e96be760f">More...</a><br /></td></tr>
<tr class="separator:a9e75ef876f4aa83248184a4e96be760f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a67c7074975dc146672c23e43c05fa1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a9a67c7074975dc146672c23e43c05fa1">bridge_channel_event_join_leave</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, enum <a class="el" href="../../dc/d7a/bridge__features_8h.html#a122c52bc5dec74974f3d4cf3870e7da3">ast_bridge_hook_type</a> <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>)</td></tr>
<tr class="separator:a9a67c7074975dc146672c23e43c05fa1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedf7b84efe76a7dc658d6ff5f9e9f187"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#aedf7b84efe76a7dc658d6ff5f9e9f187">bridge_channel_feature_digit_add</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, int <a class="el" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>, size_t dtmf_len)</td></tr>
<tr class="separator:aedf7b84efe76a7dc658d6ff5f9e9f187"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aedbf9a98366b9363db3af0645cef3364"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#aedbf9a98366b9363db3af0645cef3364">bridge_channel_feature_digit_timeout</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="separator:aedbf9a98366b9363db3af0645cef3364"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a932986b0a354279ab592e33918eb18af"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a932986b0a354279ab592e33918eb18af">bridge_channel_feature_timeout</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="separator:a932986b0a354279ab592e33918eb18af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6a8305ad69cc97256e0d9890261232a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#af6a8305ad69cc97256e0d9890261232a">bridge_channel_handle_action</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, enum <a class="el" href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0a">bridge_channel_action_type</a> action, void *data)</td></tr>
<tr class="separator:af6a8305ad69cc97256e0d9890261232a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada3a63465e7510211974998534395615"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#ada3a63465e7510211974998534395615">bridge_channel_handle_control</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *fr)</td></tr>
<tr class="separator:ada3a63465e7510211974998534395615"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0deb73b09c4bf32c73ac6ad3a1c43b8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#ab0deb73b09c4bf32c73ac6ad3a1c43b8">bridge_channel_handle_feature_timeout</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="separator:ab0deb73b09c4bf32c73ac6ad3a1c43b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d20e88ba1d1afc162d24a262cd8713b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a8d20e88ba1d1afc162d24a262cd8713b">bridge_channel_handle_interval</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="separator:a8d20e88ba1d1afc162d24a262cd8713b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f4ed276033d66e7c8ad20cbbb6d1428"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a9f4ed276033d66e7c8ad20cbbb6d1428">bridge_channel_handle_write</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="separator:a9f4ed276033d66e7c8ad20cbbb6d1428"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46acfb8805bd7c339b2c8300a154e9e8"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a46acfb8805bd7c339b2c8300a154e9e8">bridge_channel_internal_alloc</a> (struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge)</td></tr>
<tr class="separator:a46acfb8805bd7c339b2c8300a154e9e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa08031dd21d51319a38015ed87e74687"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#aa08031dd21d51319a38015ed87e74687">bridge_channel_internal_allows_optimization</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="separator:aa08031dd21d51319a38015ed87e74687"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd65272991204985a1c6ca5a30769472"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#acd65272991204985a1c6ca5a30769472">bridge_channel_internal_join</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="separator:acd65272991204985a1c6ca5a30769472"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbcf6b683169c58f6441e3956257c827"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#abbcf6b683169c58f6441e3956257c827">bridge_channel_internal_pull</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="separator:abbcf6b683169c58f6441e3956257c827"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9798f7ecff1382a175d9dfcf1e8334e6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a9798f7ecff1382a175d9dfcf1e8334e6">bridge_channel_internal_push</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="separator:a9798f7ecff1382a175d9dfcf1e8334e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c5538e7375dc6d55c8c0efff87a21f8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a5c5538e7375dc6d55c8c0efff87a21f8">bridge_channel_internal_push_full</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, int optimized)</td></tr>
<tr class="separator:a5c5538e7375dc6d55c8c0efff87a21f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6955fc24cd777947bb8c97011c55de2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#aa6955fc24cd777947bb8c97011c55de2">bridge_channel_internal_queue_attended_transfer</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *transferee, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *unbridged_chan)</td></tr>
<tr class="separator:aa6955fc24cd777947bb8c97011c55de2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63e2bee23fe653a913a13ec7290f38ae"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a63e2bee23fe653a913a13ec7290f38ae">bridge_channel_internal_queue_blind_transfer</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *transferee, const char *<a class="el" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, const char *<a class="el" href="../../da/dde/chan__phone_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, <a class="el" href="../../d4/d56/bridge_8h.html#a87ed18cc739a9635c4595cae783ab993">transfer_channel_cb</a> new_channel_cb, void *user_data)</td></tr>
<tr class="separator:a63e2bee23fe653a913a13ec7290f38ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a447f05a7615581929349765430257a75"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a447f05a7615581929349765430257a75">bridge_channel_internal_suspend_nolock</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="separator:a447f05a7615581929349765430257a75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25adcc7a991b49286746a062291ce1e1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a25adcc7a991b49286746a062291ce1e1">bridge_channel_internal_unsuspend_nolock</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="separator:a25adcc7a991b49286746a062291ce1e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af43d85186b8f45b15d419902203cf56a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#af43d85186b8f45b15d419902203cf56a">bridge_channel_next_interval</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="separator:af43d85186b8f45b15d419902203cf56a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21f30c0137d0b0935d56ec2139db1de8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a21f30c0137d0b0935d56ec2139db1de8">bridge_channel_next_timeout</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="separator:a21f30c0137d0b0935d56ec2139db1de8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa83bce915e492875e48f9ae3ea0d2d49"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#aa83bce915e492875e48f9ae3ea0d2d49">bridge_channel_park</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, struct <a class="el" href="../../d8/d7e/structbridge__park.html">bridge_park</a> *payload)</td></tr>
<tr class="separator:aa83bce915e492875e48f9ae3ea0d2d49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5f0575f76e365299b450abec30ae540"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#ad5f0575f76e365299b450abec30ae540">bridge_channel_playfile</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, struct <a class="el" href="../../d5/d29/structbridge__playfile.html">bridge_playfile</a> *payload)</td></tr>
<tr class="separator:ad5f0575f76e365299b450abec30ae540"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9755f224fead29ce51d3a96401b54599"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a9755f224fead29ce51d3a96401b54599">bridge_channel_poke</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="separator:a9755f224fead29ce51d3a96401b54599"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7169723f8af325431a959806a6b9ba96"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a7169723f8af325431a959806a6b9ba96">bridge_channel_queue_action_data</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, enum <a class="el" href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0a">bridge_channel_action_type</a> action, const void *data, size_t datalen)</td></tr>
<tr class="separator:a7169723f8af325431a959806a6b9ba96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88f8ccbfa86786e2a9726a90cba14a84"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a88f8ccbfa86786e2a9726a90cba14a84">bridge_channel_queue_action_data_sync</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, enum <a class="el" href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0a">bridge_channel_action_type</a> action, const void *data, size_t datalen)</td></tr>
<tr class="separator:a88f8ccbfa86786e2a9726a90cba14a84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeefa5121d4fde67d827c3daa2ef778d3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#aeefa5121d4fde67d827c3daa2ef778d3">bridge_channel_queue_deferred_frames</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="separator:aeefa5121d4fde67d827c3daa2ef778d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c94159425af61159f1633ea88145179"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a4c94159425af61159f1633ea88145179">bridge_channel_run_app</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, struct <a class="el" href="../../da/dd4/structbridge__run__app.html">bridge_run_app</a> *data)</td></tr>
<tr class="separator:a4c94159425af61159f1633ea88145179"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47058a18972f43983eb9109737c43229"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a47058a18972f43983eb9109737c43229">bridge_channel_settle_owed_events</a> (struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *orig_bridge, struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="separator:a47058a18972f43983eb9109737c43229"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed3b39418f4e59ea32eee175ee5b6602"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#aed3b39418f4e59ea32eee175ee5b6602">bridge_channel_suspend</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="separator:aed3b39418f4e59ea32eee175ee5b6602"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae932d794c2317a707fb0c616e6cb8d40"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#ae932d794c2317a707fb0c616e6cb8d40">bridge_channel_talking</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, int talking)</td></tr>
<tr class="separator:ae932d794c2317a707fb0c616e6cb8d40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ecf592ba328e49347e4b727be38e06b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a8ecf592ba328e49347e4b727be38e06b">bridge_channel_unsuspend</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="separator:a8ecf592ba328e49347e4b727be38e06b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34beb432a9c38ae2010e6ce9a9f548d6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a34beb432a9c38ae2010e6ce9a9f548d6">bridge_channel_update_accountcodes_joining</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *joining, struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *swap)</td></tr>
<tr class="separator:a34beb432a9c38ae2010e6ce9a9f548d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4b1c09de8a7b54ae9deb1dd6ac6d252"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#ac4b1c09de8a7b54ae9deb1dd6ac6d252">bridge_channel_update_accountcodes_leaving</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *leaving)</td></tr>
<tr class="separator:ac4b1c09de8a7b54ae9deb1dd6ac6d252"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a717bb399c92f239032b5bfd020df4b4a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a717bb399c92f239032b5bfd020df4b4a">bridge_channel_wait</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="separator:a717bb399c92f239032b5bfd020df4b4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5fa80b07664f5cad47c085e069d8671"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#ab5fa80b07664f5cad47c085e069d8671">bridge_channel_write_action_data</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, enum <a class="el" href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0a">bridge_channel_action_type</a> action, const void *data, size_t datalen)</td></tr>
<tr class="separator:ab5fa80b07664f5cad47c085e069d8671"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed96ccca09065f16ac440c0ebd52f46e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#aed96ccca09065f16ac440c0ebd52f46e">bridge_channel_write_dtmf_stream</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, const char *dtmf)</td></tr>
<tr class="separator:aed96ccca09065f16ac440c0ebd52f46e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2de5bc97f8dffac7f5f56f3f6d107f4"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#aa2de5bc97f8dffac7f5f56f3f6d107f4">bridge_channel_write_frame</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame)</td></tr>
<tr class="separator:aa2de5bc97f8dffac7f5f56f3f6d107f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3742c8c577dcc82edd8c4431a11a599e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a3742c8c577dcc82edd8c4431a11a599e">bridge_frame_free</a> (struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame)</td></tr>
<tr class="separator:a3742c8c577dcc82edd8c4431a11a599e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6fc33a656f547f1279f5e9967a678d4"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#ab6fc33a656f547f1279f5e9967a678d4">bridge_handle_dtmf</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame)</td></tr>
<tr class="memdesc:ab6fc33a656f547f1279f5e9967a678d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal function to handle DTMF from a channel.  <a href="#ab6fc33a656f547f1279f5e9967a678d4">More...</a><br /></td></tr>
<tr class="separator:ab6fc33a656f547f1279f5e9967a678d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04238a5de09bdeeddebf79fef4ffa5cc"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a04238a5de09bdeeddebf79fef4ffa5cc">bridge_handle_trip</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="separator:a04238a5de09bdeeddebf79fef4ffa5cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2187c643c3dd7929dbbdc4f83c0107b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#ab2187c643c3dd7929dbbdc4f83c0107b">bridge_sync_cleanup</a> (struct <a class="el" href="../../d7/d54/structbridge__sync.html">bridge_sync</a> *sync_struct)</td></tr>
<tr class="memdesc:ab2187c643c3dd7929dbbdc4f83c0107b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clean up a syncrhonization bridge object.  <a href="#ab2187c643c3dd7929dbbdc4f83c0107b">More...</a><br /></td></tr>
<tr class="separator:ab2187c643c3dd7929dbbdc4f83c0107b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e67cf7c90d10cdd3be033be964ff43f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a0e67cf7c90d10cdd3be033be964ff43f">bridge_sync_init</a> (struct <a class="el" href="../../d7/d54/structbridge__sync.html">bridge_sync</a> *sync_struct, unsigned int <a class="el" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>)</td></tr>
<tr class="memdesc:a0e67cf7c90d10cdd3be033be964ff43f"><td class="mdescLeft">&#160;</td><td class="mdescRight">initialize a synchronous bridge object.  <a href="#a0e67cf7c90d10cdd3be033be964ff43f">More...</a><br /></td></tr>
<tr class="separator:a0e67cf7c90d10cdd3be033be964ff43f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae68c46393ea342c81f3ecfdd2200346f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#ae68c46393ea342c81f3ecfdd2200346f">bridge_sync_signal</a> (struct <a class="el" href="../../d7/d54/structbridge__sync.html">bridge_sync</a> *sync_struct)</td></tr>
<tr class="memdesc:ae68c46393ea342c81f3ecfdd2200346f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal that waiting for a synchronous bridge action is no longer necessary.  <a href="#ae68c46393ea342c81f3ecfdd2200346f">More...</a><br /></td></tr>
<tr class="separator:ae68c46393ea342c81f3ecfdd2200346f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacf3b50ab7c5304d648700ea114a01ef"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#aacf3b50ab7c5304d648700ea114a01ef">bridge_sync_wait</a> (struct <a class="el" href="../../d7/d54/structbridge__sync.html">bridge_sync</a> *sync_struct)</td></tr>
<tr class="memdesc:aacf3b50ab7c5304d648700ea114a01ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for a synchronous bridge action to complete.  <a href="#aacf3b50ab7c5304d648700ea114a01ef">More...</a><br /></td></tr>
<tr class="separator:aacf3b50ab7c5304d648700ea114a01ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a464e8ebf46116ef98bb70331d63344e5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a464e8ebf46116ef98bb70331d63344e5">channel_fill_empty_accountcode</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *dest, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *src)</td></tr>
<tr class="separator:a464e8ebf46116ef98bb70331d63344e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b453fe3337241a21005151aa3f0d0eb"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a3b453fe3337241a21005151aa3f0d0eb">channel_fill_empty_peeraccount</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *dest, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *src)</td></tr>
<tr class="separator:a3b453fe3337241a21005151aa3f0d0eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a346c98a88d53425181a425b3834b05f5"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a346c98a88d53425181a425b3834b05f5">channel_set_cause</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, int cause)</td></tr>
<tr class="separator:a346c98a88d53425181a425b3834b05f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a672c65d7c1035cfbbcfc3decb15826b4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a672c65d7c1035cfbbcfc3decb15826b4">channel_set_empty_accountcodes</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *c0, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *c1)</td></tr>
<tr class="separator:a672c65d7c1035cfbbcfc3decb15826b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a422ba432e8a3669e94ab1e3565121124"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a422ba432e8a3669e94ab1e3565121124">channel_update_peeraccount</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *dest, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *src)</td></tr>
<tr class="separator:a422ba432e8a3669e94ab1e3565121124"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcfb8e7f0a6937ff8a02e1d515832fe7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#afcfb8e7f0a6937ff8a02e1d515832fe7">channel_update_peeraccounts</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *c0, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *c1)</td></tr>
<tr class="separator:afcfb8e7f0a6937ff8a02e1d515832fe7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad00550db31054aa051277a5d7dffd196"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#ad00550db31054aa051277a5d7dffd196">payload_helper_app</a> (<a class="el" href="../../d3/d32/bridge__channel_8c.html#ae9c87a1da9bdb14cafb135c0b2f3d9e2">ast_bridge_channel_post_action_data</a> post_it, struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, const char *<a class="el" href="../../d9/da0/pbx__private_8h.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a>, const char *app_args, const char *moh_class)</td></tr>
<tr class="separator:ad00550db31054aa051277a5d7dffd196"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afee5c64c70dc8139d5b8eed7a33e1c85"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#afee5c64c70dc8139d5b8eed7a33e1c85">payload_helper_cb</a> (<a class="el" href="../../d3/d32/bridge__channel_8c.html#ae9c87a1da9bdb14cafb135c0b2f3d9e2">ast_bridge_channel_post_action_data</a> post_it, struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, enum <a class="el" href="../../de/d41/bridge__channel_8h.html#a411218cf4d743baa73c2def8f024cb23">ast_bridge_channel_custom_callback_option</a> flags, <a class="el" href="../../de/d41/bridge__channel_8h.html#a7c65814e807e654cd23c9d952e23b69a">ast_bridge_custom_callback_fn</a> callback, const void *payload, size_t payload_size)</td></tr>
<tr class="separator:afee5c64c70dc8139d5b8eed7a33e1c85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aededbd6efeb3d8f8fe8e531c674e5eac"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#aededbd6efeb3d8f8fe8e531c674e5eac">payload_helper_park</a> (<a class="el" href="../../d3/d32/bridge__channel_8c.html#ae9c87a1da9bdb14cafb135c0b2f3d9e2">ast_bridge_channel_post_action_data</a> post_it, struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, const char *parkee_uuid, const char *parker_uuid, const char *<a class="el" href="../../da/d37/structapp__data.html">app_data</a>)</td></tr>
<tr class="separator:aededbd6efeb3d8f8fe8e531c674e5eac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1c82bb3775f693a3e2c8d4a092985b5"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#ad1c82bb3775f693a3e2c8d4a092985b5">payload_helper_playfile</a> (<a class="el" href="../../d3/d32/bridge__channel_8c.html#ae9c87a1da9bdb14cafb135c0b2f3d9e2">ast_bridge_channel_post_action_data</a> post_it, struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, <a class="el" href="../../de/d41/bridge__channel_8h.html#afb66d5073210f00fef9adc41e16a5f00">ast_bridge_custom_play_fn</a> custom_play, const char *playfile, const char *moh_class)</td></tr>
<tr class="separator:ad1c82bb3775f693a3e2c8d4a092985b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae10c9159324fffc5b0e5ea02e3cd6973"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#ae10c9159324fffc5b0e5ea02e3cd6973">run_app_helper</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *<a class="el" href="../../d9/da0/pbx__private_8h.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a>, const char *app_args)</td></tr>
<tr class="separator:ae10c9159324fffc5b0e5ea02e3cd6973"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a329c31879d38dbc276d1a5e4f96356d5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a329c31879d38dbc276d1a5e4f96356d5">sendtext_safe</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *f)</td></tr>
<tr class="separator:a329c31879d38dbc276d1a5e4f96356d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4362f1ed2bb8f4ece359734785de3e24"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a4362f1ed2bb8f4ece359734785de3e24">testsuite_notify_feature_success</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *dtmf)</td></tr>
<tr class="separator:a4362f1ed2bb8f4ece359734785de3e24"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a6e4f3d7a045c6d1218caf66aa7a0be1f"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#a6e4f3d7a045c6d1218caf66aa7a0be1f">controls</a> []</td></tr>
<tr class="separator:a6e4f3d7a045c6d1218caf66aa7a0be1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace480ddb7578041e1cdce0aae982c7b5"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#ace480ddb7578041e1cdce0aae982c7b5">sync_ids</a></td></tr>
<tr class="memdesc:ace480ddb7578041e1cdce0aae982c7b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Counter used for assigning synchronous bridge action IDs.  <a href="#ace480ddb7578041e1cdce0aae982c7b5">More...</a><br /></td></tr>
<tr class="separator:ace480ddb7578041e1cdce0aae982c7b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae937104a106c168ae87a420d8d55bb08"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/dac/structsync__structs.html">sync_structs</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d32/bridge__channel_8c.html#ae937104a106c168ae87a420d8d55bb08">sync_structs</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td></tr>
<tr class="separator:ae937104a106c168ae87a420d8d55bb08"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Bridging Channel API. </p>
<dl class="section author"><dt>Author</dt><dd>Joshua Colp <a href="#" onclick="location.href='mai'+'lto:'+'jco'+'lp'+'@di'+'gi'+'um.'+'co'+'m'; return false;">jcolp<span style="display: none;">.nosp@m.</span>@dig<span style="display: none;">.nosp@m.</span>ium.c<span style="display: none;">.nosp@m.</span>om</a> </dd>
<dd>
Richard Mudgett <a href="#" onclick="location.href='mai'+'lto:'+'rmu'+'dg'+'ett'+'@d'+'igi'+'um'+'.co'+'m'; return false;">rmudg<span style="display: none;">.nosp@m.</span>ett@<span style="display: none;">.nosp@m.</span>digiu<span style="display: none;">.nosp@m.</span>m.co<span style="display: none;">.nosp@m.</span>m</a> </dd>
<dd>
Matt Jordan <a href="#" onclick="location.href='mai'+'lto:'+'mjo'+'rd'+'an@'+'di'+'giu'+'m.'+'com'; return false;">mjord<span style="display: none;">.nosp@m.</span>an@d<span style="display: none;">.nosp@m.</span>igium<span style="display: none;">.nosp@m.</span>.com</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ad169cc192a23699be3580db10acc8c21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad169cc192a23699be3580db10acc8c21">&#9670;&nbsp;</a></span>PLAYBACK_TIMEOUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PLAYBACK_TIMEOUT&#160;&#160;&#160;(600 * 1000)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Failsafe for synchronous bridge action waiting. </p>
<p>When waiting for a synchronous bridge action to complete, if there is a frame resource leak somewhere, it is possible that we will never get notified that the synchronous action completed.</p>
<p>If a significant amount of time passes, then we will abandon waiting for the synchrnous bridge action to complete.</p>
<p>This constant represents the number of milliseconds we will wait for the bridge action to complete. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00178">178</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00185">bridge_sync_wait()</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ae9c87a1da9bdb14cafb135c0b2f3d9e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9c87a1da9bdb14cafb135c0b2f3d9e2">&#9670;&nbsp;</a></span>ast_bridge_channel_post_action_data</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef int(* ast_bridge_channel_post_action_data) (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, enum <a class="el" href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0a">bridge_channel_action_type</a> action, const void *data, size_t datalen)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Used to queue an action frame onto a bridge channel and write an action frame into a bridge. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Which channel work with. </td></tr>
    <tr><td class="paramname">action</td><td>Type of bridge action frame. </td></tr>
    <tr><td class="paramname">data</td><td>Frame payload data to pass. </td></tr>
    <tr><td class="paramname">datalen</td><td>Frame payload data length to pass.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00073">73</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="abe7719346a880cfeec2c2cda0cb9a831"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe7719346a880cfeec2c2cda0cb9a831">&#9670;&nbsp;</a></span>after_bridge_move_channel()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void after_bridge_move_channel </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan_bridged</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01943">1943</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00888">ast_channel_caller()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00892">ast_channel_connected()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00896">ast_channel_connected_indicated()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l10867">ast_channel_move()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l09202">ast_channel_queue_connected_line_update()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l08793">ast_connected_line_build_data()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l08389">ast_connected_line_copy_from_caller()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00304">AST_CONTROL_READ_ACTION</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00352">AST_FRAME_READ_ACTION_CONNECTED_LINE_MACRO</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02031">ast_party_connected_line_copy()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02072">ast_party_connected_line_free()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02022">ast_party_connected_line_init()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01896">ast_party_id_reset()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01238">ast_queue_control_data()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02476">ast_softhangup()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01122">AST_SOFTHANGUP_DEV</a>, <a class="el" href="../../d2/d97/format__g726_8c_source.html#l00052">frame_size</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00364">ast_control_read_action_payload::payload_size</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00469">ast_party_connected_line::priv</a>, and <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02027">bridge_channel_attended_transfer()</a>.</p>
<div class="fragment"><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;{</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, chan_target, data, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> connected_target;</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> connected_line_data[1024];</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;   <span class="keywordtype">int</span> payload_size;</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#abf514b9d96a1821a33fec8c64ee4e26f">ast_party_connected_line_init</a>(&amp;connected_target);</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan_target);</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a5d3c15fe1dffda82e6dc03ca7b26526a">ast_party_connected_line_copy</a>(&amp;connected_target, <a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(chan_target));</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan_target);</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ab1c04d237cea67fefadaacc3f79497fa">ast_party_id_reset</a>(&amp;connected_target.priv);</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a8043e35bcff5fb2d410dd161ac6e4360">ast_channel_move</a>(chan_target, chan_bridged)) {</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ac2d6607253f7e8b272d4e845474eaa9b">ast_softhangup</a>(chan_target, <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2e185ce313026e13ed90ae3a319c9cb7">AST_SOFTHANGUP_DEV</a>);</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a40fc421536e02d30fecaa51a255b4144">ast_party_connected_line_free</a>(&amp;connected_target);</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;   }</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;   <span class="comment">/* The ast_channel_move function will end up updating the connected line information</span></div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;<span class="comment">    * on chan_target to the value we have here, but will not inform it. To ensure that</span></div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;<span class="comment">    * AST_FRAME_READ_ACTION_CONNECTED_LINE_MACRO is executed we wipe it away here. If</span></div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;<span class="comment">    * we don&#39;t do this then the change will be considered redundant, since the connected</span></div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;<span class="comment">    * line information is already there (despite the channel not being told).</span></div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan_target);</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a40fc421536e02d30fecaa51a255b4144">ast_party_connected_line_free</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad3ec5f6d1ca18a54981a446176c9af1d">ast_channel_connected_indicated</a>(chan_target));</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#abf514b9d96a1821a33fec8c64ee4e26f">ast_party_connected_line_init</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad3ec5f6d1ca18a54981a446176c9af1d">ast_channel_connected_indicated</a>(chan_target));</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan_target);</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;   <span class="keywordflow">if</span> ((payload_size = <a class="code" href="../../d5/d7b/channel_8h.html#ab380c81e4514ab48ca8402f7950a354a">ast_connected_line_build_data</a>(connected_line_data,</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;      <span class="keyword">sizeof</span>(connected_line_data), &amp;connected_target, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) != -1) {</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d6/d4b/structast__control__read__action__payload.html">ast_control_read_action_payload</a> *frame_payload;</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="../../d2/d97/format__g726_8c.html#ab9b9df9925ea7c54e551aa412bf0c59c">frame_size</a>;</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;      frame_size = payload_size + <span class="keyword">sizeof</span>(*frame_payload);</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;      frame_payload = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(frame_size);</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;      frame_payload-&gt;action = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a2457835b26aa09c41c6ecf633f95f775a363c133e333ad8893b2f722a40fac35f">AST_FRAME_READ_ACTION_CONNECTED_LINE_MACRO</a>;</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;      frame_payload-&gt;payload_size = <a class="code" href="../../d6/d4b/structast__control__read__action__payload.html#a21fb327bb05e95f14a13ff193882f32b">payload_size</a>;</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;      memcpy(frame_payload-&gt;payload, connected_line_data, payload_size);</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7e5e15c22564fd66351d332ad10658b5">ast_queue_control_data</a>(chan_target, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a7c6096b70aeb9e6b2b4f9ee5cfccbf7a">AST_CONTROL_READ_ACTION</a>, frame_payload, frame_size);</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;   }</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;   <span class="comment">/* A connected line update is queued so that if chan_target is remotely involved with</span></div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;<span class="comment">    * anything (such as dialing a channel) the other channel(s) will be informed of the</span></div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;<span class="comment">    * new channel they are involved with.</span></div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan_target);</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#accf4e9753bd5d7316f4988e74486552b">ast_connected_line_copy_from_caller</a>(&amp;connected_target, <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan_target));</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ade57349a78b2f32d3a7d1bc01fb3bf96">ast_channel_queue_connected_line_update</a>(chan_target, &amp;connected_target, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan_target);</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a40fc421536e02d30fecaa51a255b4144">ast_party_connected_line_free</a>(&amp;connected_target);</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;}</div><div class="ttc" id="channel_8h_html_ac2dc872b606534943c98304aed841b34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a></div><div class="ttdeci">struct ast_party_caller * ast_channel_caller(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00888">channel_internal_api.c:888</a></div></div>
<div class="ttc" id="channel_8h_html_abf514b9d96a1821a33fec8c64ee4e26f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abf514b9d96a1821a33fec8c64ee4e26f">ast_party_connected_line_init</a></div><div class="ttdeci">void ast_party_connected_line_init(struct ast_party_connected_line *init)</div><div class="ttdoc">Initialize the given connected line structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02022">channel.c:2022</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="channel_8h_html_ab380c81e4514ab48ca8402f7950a354a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab380c81e4514ab48ca8402f7950a354a">ast_connected_line_build_data</a></div><div class="ttdeci">int ast_connected_line_build_data(unsigned char *data, size_t datalen, const struct ast_party_connected_line *connected, const struct ast_set_party_connected_line *update)</div><div class="ttdoc">Build the connected line information data frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08793">channel.c:8793</a></div></div>
<div class="ttc" id="channel_8h_html_ab1c04d237cea67fefadaacc3f79497fa"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab1c04d237cea67fefadaacc3f79497fa">ast_party_id_reset</a></div><div class="ttdeci">void ast_party_id_reset(struct ast_party_id *id)</div><div class="ttdoc">Destroy and initialize the given party id structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01896">channel.c:1896</a></div></div>
<div class="ttc" id="channel_8h_html_a9e9505a91a84992d04ba4e85217fb4e4a2e185ce313026e13ed90ae3a319c9cb7"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2e185ce313026e13ed90ae3a319c9cb7">AST_SOFTHANGUP_DEV</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01122">channel.h:1122</a></div></div>
<div class="ttc" id="channel_8h_html_a40fc421536e02d30fecaa51a255b4144"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a40fc421536e02d30fecaa51a255b4144">ast_party_connected_line_free</a></div><div class="ttdeci">void ast_party_connected_line_free(struct ast_party_connected_line *doomed)</div><div class="ttdoc">Destroy the connected line information contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02072">channel.c:2072</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a2457835b26aa09c41c6ecf633f95f775a363c133e333ad8893b2f722a40fac35f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a2457835b26aa09c41c6ecf633f95f775a363c133e333ad8893b2f722a40fac35f">AST_FRAME_READ_ACTION_CONNECTED_LINE_MACRO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00352">include/asterisk/frame.h:352</a></div></div>
<div class="ttc" id="channel_8h_html_a8043e35bcff5fb2d410dd161ac6e4360"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a8043e35bcff5fb2d410dd161ac6e4360">ast_channel_move</a></div><div class="ttdeci">int ast_channel_move(struct ast_channel *dest, struct ast_channel *source)</div><div class="ttdoc">Move a channel from its current location to a new location. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10867">channel.c:10867</a></div></div>
<div class="ttc" id="structast__control__read__action__payload_html"><div class="ttname"><a href="../../d6/d4b/structast__control__read__action__payload.html">ast_control_read_action_payload</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00357">include/asterisk/frame.h:357</a></div></div>
<div class="ttc" id="channel_8h_html_ade57349a78b2f32d3a7d1bc01fb3bf96"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ade57349a78b2f32d3a7d1bc01fb3bf96">ast_channel_queue_connected_line_update</a></div><div class="ttdeci">void ast_channel_queue_connected_line_update(struct ast_channel *chan, const struct ast_party_connected_line *connected, const struct ast_set_party_connected_line *update)</div><div class="ttdoc">Queue a connected line update frame on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09202">channel.c:9202</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__control__read__action__payload_html_a21fb327bb05e95f14a13ff193882f32b"><div class="ttname"><a href="../../d6/d4b/structast__control__read__action__payload.html#a21fb327bb05e95f14a13ff193882f32b">ast_control_read_action_payload::payload_size</a></div><div class="ttdeci">size_t payload_size</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00364">include/asterisk/frame.h:364</a></div></div>
<div class="ttc" id="channel_8h_html_a10f23f1907b804485f62973f66cd9aef"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a></div><div class="ttdeci">struct ast_party_connected_line * ast_channel_connected(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00892">channel_internal_api.c:892</a></div></div>
<div class="ttc" id="channel_8h_html_ac2d6607253f7e8b272d4e845474eaa9b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2d6607253f7e8b272d4e845474eaa9b">ast_softhangup</a></div><div class="ttdeci">int ast_softhangup(struct ast_channel *chan, int reason)</div><div class="ttdoc">Softly hangup up a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02476">channel.c:2476</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="structast__party__connected__line_html"><div class="ttname"><a href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a></div><div class="ttdoc">Connected Line/Party information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00457">channel.h:457</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a7c6096b70aeb9e6b2b4f9ee5cfccbf7a"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a7c6096b70aeb9e6b2b4f9ee5cfccbf7a">AST_CONTROL_READ_ACTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00304">include/asterisk/frame.h:304</a></div></div>
<div class="ttc" id="channel_8h_html_a5d3c15fe1dffda82e6dc03ca7b26526a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a5d3c15fe1dffda82e6dc03ca7b26526a">ast_party_connected_line_copy</a></div><div class="ttdeci">void ast_party_connected_line_copy(struct ast_party_connected_line *dest, const struct ast_party_connected_line *src)</div><div class="ttdoc">Copy the source connected line information to the destination connected line. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02031">channel.c:2031</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="channel_8h_html_accf4e9753bd5d7316f4988e74486552b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#accf4e9753bd5d7316f4988e74486552b">ast_connected_line_copy_from_caller</a></div><div class="ttdeci">void ast_connected_line_copy_from_caller(struct ast_party_connected_line *dest, const struct ast_party_caller *src)</div><div class="ttdoc">Copy the caller information to the connected line information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08389">channel.c:8389</a></div></div>
<div class="ttc" id="channel_8h_html_a7e5e15c22564fd66351d332ad10658b5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7e5e15c22564fd66351d332ad10658b5">ast_queue_control_data</a></div><div class="ttdeci">int ast_queue_control_data(struct ast_channel *chan, enum ast_control_frame_type control, const void *data, size_t datalen)</div><div class="ttdoc">Queue a control frame with payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01238">channel.c:1238</a></div></div>
<div class="ttc" id="channel_8h_html_ad3ec5f6d1ca18a54981a446176c9af1d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ad3ec5f6d1ca18a54981a446176c9af1d">ast_channel_connected_indicated</a></div><div class="ttdeci">struct ast_party_connected_line * ast_channel_connected_indicated(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00896">channel_internal_api.c:896</a></div></div>
<div class="ttc" id="format__g726_8c_html_ab9b9df9925ea7c54e551aa412bf0c59c"><div class="ttname"><a href="../../d2/d97/format__g726_8c.html#ab9b9df9925ea7c54e551aa412bf0c59c">frame_size</a></div><div class="ttdeci">static int frame_size[4]</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d97/format__g726_8c_source.html#l00052">format_g726.c:52</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6921b94f3fb5dbaecacfba765d677793"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6921b94f3fb5dbaecacfba765d677793">&#9670;&nbsp;</a></span>after_bridge_move_channel_fail()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void after_bridge_move_channel_fail </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="../../d8/d85/bridge__after_8h.html#a1b15a371c654cfe77de053afe0994b9c">ast_bridge_after_cb_reason</a>&#160;</td>
          <td class="paramname"><em>reason</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02003">2003</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../df/db6/bridge__after_8c_source.html#l00296">ast_bridge_after_cb_reason_string()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02476">ast_softhangup()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01122">AST_SOFTHANGUP_DEV</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02027">bridge_channel_attended_transfer()</a>.</p>
<div class="fragment"><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;{</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, chan_target, data, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;   <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to complete transfer: %s\n&quot;</span>,</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;      <a class="code" href="../../d8/d85/bridge__after_8h.html#a1ccac2dce2e8c4f62baed1f63b225a15">ast_bridge_after_cb_reason_string</a>(reason));</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ac2d6607253f7e8b272d4e845474eaa9b">ast_softhangup</a>(chan_target, <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2e185ce313026e13ed90ae3a319c9cb7">AST_SOFTHANGUP_DEV</a>);</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="bridge__after_8h_html_a1ccac2dce2e8c4f62baed1f63b225a15"><div class="ttname"><a href="../../d8/d85/bridge__after_8h.html#a1ccac2dce2e8c4f62baed1f63b225a15">ast_bridge_after_cb_reason_string</a></div><div class="ttdeci">const char * ast_bridge_after_cb_reason_string(enum ast_bridge_after_cb_reason reason)</div><div class="ttdoc">Get a string representation of an after bridge callback reason. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/db6/bridge__after_8c_source.html#l00296">bridge_after.c:296</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="channel_8h_html_a9e9505a91a84992d04ba4e85217fb4e4a2e185ce313026e13ed90ae3a319c9cb7"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2e185ce313026e13ed90ae3a319c9cb7">AST_SOFTHANGUP_DEV</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01122">channel.h:1122</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="channel_8h_html_ac2d6607253f7e8b272d4e845474eaa9b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2d6607253f7e8b272d4e845474eaa9b">ast_softhangup</a></div><div class="ttdeci">int ast_softhangup(struct ast_channel *chan, int reason)</div><div class="ttdoc">Softly hangup up a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02476">channel.c:2476</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a69864377e8f1cf05ba95f1645bc98c65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69864377e8f1cf05ba95f1645bc98c65">&#9670;&nbsp;</a></span>ast_bridge_channel_feature_digit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_channel_feature_digit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>digit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a DTMF digit to the collected digits to match against DTMF features. </p>
<dl class="section since"><dt>Since</dt><dd>12.8.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Channel that received a DTMF digit. </td></tr>
    <tr><td class="paramname">digit</td><td>DTMF digit to add to collected digits or 0 for timeout event. </td></tr>
    <tr><td class="paramname">clear_digits</td><td>clear the digits array prior to calling hooks</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Neither the bridge nor the bridge_channel locks should be held when entering this function.</dd>
<dd>
This is intended to be called by bridge hooks and the bridge channel thread.</dd>
<dd>
This is intended to be called by non-DTMF bridge hooks and the bridge channel thread. Calling from a DTMF bridge hook can potentially cause unbounded recursion.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01762">1762</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01598">ao2_unlink</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00605">ast_bridge_channel_kick()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00222">ast_bridge_channel_lock_bridge()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00493">ast_bridge_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00459">ast_check_hangup_locked()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00297">AST_CONTROL_SRCUPDATE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04322">ast_indicate()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00238">ast_samp2tv()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00196">ast_test_suite_event_notify</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02283">ast_tvadd()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00100">ast_bridge_channel::bridge</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01717">bridge_channel_feature_digit_add()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01733">bridge_channel_feature_digit_timeout()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00854">bridge_channel_internal_suspend_nolock()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00918">bridge_channel_unsuspend()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01659">bridge_channel_write_dtmf_stream()</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00203">ast_bridge_hook::callback</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00222">ast_bridge_hook_dtmf_parms::code</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00175">ast_bridge_channel::collected</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00230">ast_bridge_hook_dtmf::dtmf</a>, <a class="el" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">ast_bridge_channel::dtmf_hook_state</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00265">ast_bridge_features::dtmf_hooks</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00279">ast_bridge_features::dtmf_passthrough</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00132">ast_bridge_channel::features</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00228">ast_bridge_hook_dtmf::generic</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00207">ast_bridge_hook::hook_pvt</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00173">ast_bridge_channel::interdigit_timeout</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01120">OBJ_SEARCH_PARTIAL_KEY</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00125">ast_bridge_channel::suspended</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01675">testsuite_notify_feature_success()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01738">agent_alert()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01883">bridge_channel_handle_feature_timeout()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02902">bridge_channel_internal_join()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02548">bridge_handle_dtmf()</a>.</p>
<div class="fragment"><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;{</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a> *features = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">features</a>;</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d92/structast__bridge__hook__dtmf.html">ast_bridge_hook_dtmf</a> *hook = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;   <span class="keywordtype">size_t</span> dtmf_len;</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;   <span class="keyword">struct </span>sanity_check_of_dtmf_size {</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;      <span class="keywordtype">char</span> check[1 / (<a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">collected</a>) == <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(hook-&gt;<a class="code" href="../../dd/d92/structast__bridge__hook__dtmf.html#a09e6a40a51d2d887563667ee42a6c1f5">dtmf</a>.<a class="code" href="../../d3/d00/structast__bridge__hook__dtmf__parms.html#a112bc20acdbae84f53c59cffc6bf3a94">code</a>))];</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;   };</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;   dtmf_len = strlen(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">collected</a>);</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;   <span class="keywordflow">if</span> (!dtmf_len &amp;&amp; !<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>) {</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;      <span class="comment">/* Nothing to do */</span></div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;   }</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>) {</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;      dtmf_len = <a class="code" href="../../d3/d32/bridge__channel_8c.html#aedf7b84efe76a7dc658d6ff5f9e9f187">bridge_channel_feature_digit_add</a>(bridge_channel, <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>, dtmf_len);</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;   }</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;   <span class="keywordflow">while</span> (<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>) {</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;      <span class="comment">/* See if a DTMF feature hook matches or can match */</span></div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;      hook = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(features-&gt;<a class="code" href="../../db/dba/structast__bridge__features.html#a70760b613dd26b51a5667e7f0fa7fb8a">dtmf_hooks</a>, bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">collected</a>,</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20">OBJ_SEARCH_PARTIAL_KEY</a>);</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;      <span class="keywordflow">if</span> (!hook) {</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;No DTMF feature hooks on %p(%s) match &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;            bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;            bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">collected</a>);</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dtmf_len != strlen(hook-&gt;<a class="code" href="../../dd/d92/structast__bridge__hook__dtmf.html#a09e6a40a51d2d887563667ee42a6c1f5">dtmf</a>.<a class="code" href="../../d3/d00/structast__bridge__hook__dtmf__parms.html#a112bc20acdbae84f53c59cffc6bf3a94">code</a>)) {</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> digit_timeout;</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;         <span class="comment">/* Need more digits to match */</span></div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(hook, -1);</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;         digit_timeout = <a class="code" href="../../d3/d32/bridge__channel_8c.html#aedbf9a98366b9363db3af0645cef3364">bridge_channel_feature_digit_timeout</a>(bridge_channel);</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;         bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a5c2f7dd8767c2be956356bf7656da9dc">interdigit_timeout</a> =</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;            <a class="code" href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), <a class="code" href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a>(digit_timeout, 1000));</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;         <span class="keywordtype">int</span> remove_me;</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;         <span class="keywordtype">int</span> already_suspended;</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;DTMF feature hook %p matched DTMF string &#39;%s&#39; on %p(%s)\n&quot;</span>,</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;            hook, bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">collected</a>, bridge_channel,</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;<span class="comment">          * Clear the collected digits before executing the hook</span></div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;<span class="comment">          * in case the hook starts another sequence.</span></div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;         bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">collected</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;         <a class="code" href="../../d3/d32/bridge__channel_8c.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a>(bridge_channel);</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;         already_suspended = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a2862ffde11c780129862e5549415a6f6">suspended</a>;</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;         <span class="keywordflow">if</span> (!already_suspended) {</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;            <a class="code" href="../../d3/d32/bridge__channel_8c.html#a447f05a7615581929349765430257a75">bridge_channel_internal_suspend_nolock</a>(bridge_channel);</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;         }</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;         <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a>);</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;         <span class="comment">/* Execute the matched hook on this channel. */</span></div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;         remove_me = hook-&gt;<a class="code" href="../../dd/d92/structast__bridge__hook__dtmf.html#a071aadb15e85b96f455641d6adbfdb71">generic</a>.<a class="code" href="../../da/d3b/structast__bridge__hook.html#aff642471ebace1228460a3b47653fc35">callback</a>(bridge_channel, hook-&gt;<a class="code" href="../../dd/d92/structast__bridge__hook__dtmf.html#a071aadb15e85b96f455641d6adbfdb71">generic</a>.<a class="code" href="../../da/d3b/structast__bridge__hook.html#ad6640f8898b13ff6d292522ee3d4973f">hook_pvt</a>);</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;         <span class="keywordflow">if</span> (remove_me) {</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;DTMF hook %p is being removed from %p(%s)\n&quot;</span>,</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;               hook, bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a>(features-&gt;<a class="code" href="../../db/dba/structast__bridge__features.html#a70760b613dd26b51a5667e7f0fa7fb8a">dtmf_hooks</a>, hook);</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;         }</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;         <a class="code" href="../../d3/d32/bridge__channel_8c.html#a4362f1ed2bb8f4ece359734785de3e24">testsuite_notify_feature_success</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, hook-&gt;<a class="code" href="../../dd/d92/structast__bridge__hook__dtmf.html#a09e6a40a51d2d887563667ee42a6c1f5">dtmf</a>.<a class="code" href="../../d3/d00/structast__bridge__hook__dtmf__parms.html#a112bc20acdbae84f53c59cffc6bf3a94">code</a>);</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(hook, -1);</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a>);</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;         <span class="keywordflow">if</span> (!already_suspended) {</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;            <a class="code" href="../../d3/d32/bridge__channel_8c.html#a8ecf592ba328e49347e4b727be38e06b">bridge_channel_unsuspend</a>(bridge_channel);</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;         }</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;<span class="comment">          * If we are handing the channel off to an external hook for</span></div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;<span class="comment">          * ownership, we are not guaranteed what kind of state it will</span></div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;<span class="comment">          * come back in.  If the channel hungup, we need to detect that</span></div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;<span class="comment">          * here if the hook did not already change the state.</span></div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;         <span class="keywordflow">if</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a> &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#a723ac44c92b9edb6c1a731e01edacb4a">ast_check_hangup_locked</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)) {</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;            <a class="code" href="../../d3/d32/bridge__channel_8c.html#a7e482bb2dcffd792205f114ddfa098fb">ast_bridge_channel_kick</a>(bridge_channel, 0);</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;            bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">collected</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;         }</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;         <span class="comment">/* if there is dtmf that has been collected then loop back through,</span></div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;<span class="comment">            but set digit to -1 so it doesn&#39;t try to do an add since the dtmf</span></div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;<span class="comment">            is already in the buffer */</span></div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;         dtmf_len = strlen(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">collected</a>);</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;         <span class="keywordflow">if</span> (!dtmf_len) {</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;         }</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;      }</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;   }</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>) {</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;DTMF feature string collection on %p(%s) timed out\n&quot;</span>,</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;         bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;   }</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;   <span class="comment">/* Timeout or DTMF digit didn&#39;t allow a match with any hooks. */</span></div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;   <span class="keywordflow">if</span> (features-&gt;<a class="code" href="../../db/dba/structast__bridge__features.html#a9ed40fc6a252b84f86044f975cc94283">dtmf_passthrough</a>) {</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;      <span class="comment">/* Stream the collected DTMF to the other channels. */</span></div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#aed96ccca09065f16ac440c0ebd52f46e">bridge_channel_write_dtmf_stream</a>(bridge_channel,</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;         bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">collected</a>);</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;   }</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;   bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">collected</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a>(<span class="stringliteral">&quot;FEATURE_DETECTION&quot;</span>, <span class="stringliteral">&quot;Result: fail&quot;</span>);</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;}</div><div class="ttc" id="app__alarmreceiver_8c_html_ac2c887b7f7b359bfdda8a128980f5081"><div class="ttname"><a href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a></div><div class="ttdeci">char digit</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">app_alarmreceiver.c:131</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_ae7cf5bbda4cf5f01c7fbaf80404b8586"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">ast_bridge_channel::dtmf_hook_state</a></div><div class="ttdeci">struct ast_bridge_channel::@233 dtmf_hook_state</div></div>
<div class="ttc" id="structast__bridge__channel_html_a65633fdc6178dc8d9f754fda0166d16e"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">ast_bridge_channel::features</a></div><div class="ttdeci">struct ast_bridge_features * features</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00132">bridge_channel.h:132</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a447f05a7615581929349765430257a75"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a447f05a7615581929349765430257a75">bridge_channel_internal_suspend_nolock</a></div><div class="ttdeci">void bridge_channel_internal_suspend_nolock(struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00854">bridge_channel.c:854</a></div></div>
<div class="ttc" id="structast__bridge__features_html"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a></div><div class="ttdoc">Structure that contains features information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00263">bridge_features.h:263</a></div></div>
<div class="ttc" id="channel_8h_html_aef2af15a597c948e97628da6c5c84f28"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a></div><div class="ttdeci">int ast_indicate(struct ast_channel *chan, int condition)</div><div class="ttdoc">Indicates condition of channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04322">channel.c:4322</a></div></div>
<div class="ttc" id="channel_8h_html_a723ac44c92b9edb6c1a731e01edacb4a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a723ac44c92b9edb6c1a731e01edacb4a">ast_check_hangup_locked</a></div><div class="ttdeci">int ast_check_hangup_locked(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00459">channel.c:459</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a2862ffde11c780129862e5549415a6f6"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a2862ffde11c780129862e5549415a6f6">ast_bridge_channel::suspended</a></div><div class="ttdeci">unsigned int suspended</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00125">bridge_channel.h:125</a></div></div>
<div class="ttc" id="structast__bridge__features_html_a70760b613dd26b51a5667e7f0fa7fb8a"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html#a70760b613dd26b51a5667e7f0fa7fb8a">ast_bridge_features::dtmf_hooks</a></div><div class="ttdeci">struct ao2_container * dtmf_hooks</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00265">bridge_features.h:265</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a61eb94728edfc0596b44498ce570d084"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">ast_bridge_channel::collected</a></div><div class="ttdeci">char collected[MAXIMUM_DTMF_FEATURE_STRING]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00175">bridge_channel.h:175</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="structast__bridge__hook__dtmf_html"><div class="ttname"><a href="../../dd/d92/structast__bridge__hook__dtmf.html">ast_bridge_hook_dtmf</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00226">bridge_features.h:226</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00297">include/asterisk/frame.h:297</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20">OBJ_SEARCH_PARTIAL_KEY</a></div><div class="ttdoc">The arg parameter is a partial search key similar to OBJ_SEARCH_KEY. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01120">astobj2.h:1120</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a7e482bb2dcffd792205f114ddfa098fb"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a7e482bb2dcffd792205f114ddfa098fb">ast_bridge_channel_kick</a></div><div class="ttdeci">void ast_bridge_channel_kick(struct ast_bridge_channel *bridge_channel, int cause)</div><div class="ttdoc">Kick the channel out of the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00605">bridge_channel.c:605</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_aedbf9a98366b9363db3af0645cef3364"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#aedbf9a98366b9363db3af0645cef3364">bridge_channel_feature_digit_timeout</a></div><div class="ttdeci">static unsigned int bridge_channel_feature_digit_timeout(struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01733">bridge_channel.c:1733</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="time_8h_html_a1d774df72e3dbb623475783e06ce4f61"><div class="ttname"><a href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a></div><div class="ttdeci">struct timeval ast_samp2tv(unsigned int _nsamp, unsigned int _rate)</div><div class="ttdoc">Returns a timeval corresponding to the duration of n samples at rate r. Useful to convert samples to ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00238">time.h:238</a></div></div>
<div class="ttc" id="structast__bridge__hook__dtmf_html_a09e6a40a51d2d887563667ee42a6c1f5"><div class="ttname"><a href="../../dd/d92/structast__bridge__hook__dtmf.html#a09e6a40a51d2d887563667ee42a6c1f5">ast_bridge_hook_dtmf::dtmf</a></div><div class="ttdeci">struct ast_bridge_hook_dtmf_parms dtmf</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00230">bridge_features.h:230</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a5c2f7dd8767c2be956356bf7656da9dc"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a5c2f7dd8767c2be956356bf7656da9dc">ast_bridge_channel::interdigit_timeout</a></div><div class="ttdeci">struct timeval interdigit_timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00173">bridge_channel.h:173</a></div></div>
<div class="ttc" id="test_8h_html_a9482d93ea3931853331bdbc745ce7cb4"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a></div><div class="ttdeci">#define ast_test_suite_event_notify(s, f,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00196">test.h:196</a></div></div>
<div class="ttc" id="structast__bridge__features_html_a9ed40fc6a252b84f86044f975cc94283"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html#a9ed40fc6a252b84f86044f975cc94283">ast_bridge_features::dtmf_passthrough</a></div><div class="ttdeci">unsigned int dtmf_passthrough</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00279">bridge_features.h:279</a></div></div>
<div class="ttc" id="astobj2_8h_html_a64f51be4bee35c38dbe59b0a788b5ce8"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a></div><div class="ttdeci">#define ao2_unlink(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01598">astobj2.h:1598</a></div></div>
<div class="ttc" id="structast__bridge__hook_html_aff642471ebace1228460a3b47653fc35"><div class="ttname"><a href="../../da/d3b/structast__bridge__hook.html#aff642471ebace1228460a3b47653fc35">ast_bridge_hook::callback</a></div><div class="ttdeci">ast_bridge_hook_callback callback</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00203">bridge_features.h:203</a></div></div>
<div class="ttc" id="time_8h_html_a97e1bb8fbd7a103212789e87e7ed6073"><div class="ttname"><a href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a></div><div class="ttdeci">struct timeval ast_tvadd(struct timeval a, struct timeval b)</div><div class="ttdoc">Returns the sum of two timevals a + b. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02283">extconf.c:2283</a></div></div>
<div class="ttc" id="structast__bridge__hook_html_ad6640f8898b13ff6d292522ee3d4973f"><div class="ttname"><a href="../../da/d3b/structast__bridge__hook.html#ad6640f8898b13ff6d292522ee3d4973f">ast_bridge_hook::hook_pvt</a></div><div class="ttdeci">void * hook_pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00207">bridge_features.h:207</a></div></div>
<div class="ttc" id="bridge_8h_html_a0fb66f4741ca8d106af1917a2f1aab6e"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a></div><div class="ttdeci">#define ast_bridge_unlock(bridge)</div><div class="ttdoc">Unlock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00493">bridge.h:493</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="structast__bridge__hook__dtmf_html_a071aadb15e85b96f455641d6adbfdb71"><div class="ttname"><a href="../../dd/d92/structast__bridge__hook__dtmf.html#a071aadb15e85b96f455641d6adbfdb71">ast_bridge_hook_dtmf::generic</a></div><div class="ttdeci">struct ast_bridge_hook generic</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00228">bridge_features.h:228</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="bridge__channel_8c_html_a4362f1ed2bb8f4ece359734785de3e24"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a4362f1ed2bb8f4ece359734785de3e24">testsuite_notify_feature_success</a></div><div class="ttdeci">static void testsuite_notify_feature_success(struct ast_channel *chan, const char *dtmf)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01675">bridge_channel.c:1675</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_aed96ccca09065f16ac440c0ebd52f46e"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#aed96ccca09065f16ac440c0ebd52f46e">bridge_channel_write_dtmf_stream</a></div><div class="ttdeci">static int bridge_channel_write_dtmf_stream(struct ast_bridge_channel *bridge_channel, const char *dtmf)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01659">bridge_channel.c:1659</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a7d01ff5caf025a97796d2dbb78f5f02c"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a></div><div class="ttdeci">void ast_bridge_channel_lock_bridge(struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Lock the bridge associated with the bridge channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00222">bridge_channel.c:222</a></div></div>
<div class="ttc" id="structast__bridge__hook__dtmf__parms_html_a112bc20acdbae84f53c59cffc6bf3a94"><div class="ttname"><a href="../../d3/d00/structast__bridge__hook__dtmf__parms.html#a112bc20acdbae84f53c59cffc6bf3a94">ast_bridge_hook_dtmf_parms::code</a></div><div class="ttdeci">char code[MAXIMUM_DTMF_FEATURE_STRING]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00222">bridge_features.h:222</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a8ecf592ba328e49347e4b727be38e06b"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a8ecf592ba328e49347e4b727be38e06b">bridge_channel_unsuspend</a></div><div class="ttdeci">static void bridge_channel_unsuspend(struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00918">bridge_channel.c:918</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_aedf7b84efe76a7dc658d6ff5f9e9f187"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#aedf7b84efe76a7dc658d6ff5f9e9f187">bridge_channel_feature_digit_add</a></div><div class="ttdeci">static int bridge_channel_feature_digit_add(struct ast_bridge_channel *bridge_channel, int digit, size_t dtmf_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01717">bridge_channel.c:1717</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2a3de22abaf5ae848a3745186fa399e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a3de22abaf5ae848a3745186fa399e0">&#9670;&nbsp;</a></span>ast_bridge_channel_feature_digit_add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_channel_feature_digit_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>digit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a DTMF digit to the collected digits. </p>
<dl class="section since"><dt>Since</dt><dd>13.3.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Channel that received a DTMF digit. </td></tr>
    <tr><td class="paramname">digit</td><td>DTMF digit to add to collected digits</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Neither the bridge nor the bridge_channel locks should be held when entering this function.</dd>
<dd>
This is can only be called from within DTMF bridge hooks. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01754">1754</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01717">bridge_channel_feature_digit_add()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00175">ast_bridge_channel::collected</a>, and <a class="el" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">ast_bridge_channel::dtmf_hook_state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l00928">play_file()</a>.</p>
<div class="fragment"><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;{</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>) {</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#aedf7b84efe76a7dc658d6ff5f9e9f187">bridge_channel_feature_digit_add</a>(</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;         bridge_channel, <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>, strlen(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">collected</a>));</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;   }</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;}</div><div class="ttc" id="app__alarmreceiver_8c_html_ac2c887b7f7b359bfdda8a128980f5081"><div class="ttname"><a href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a></div><div class="ttdeci">char digit</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">app_alarmreceiver.c:131</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_ae7cf5bbda4cf5f01c7fbaf80404b8586"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">ast_bridge_channel::dtmf_hook_state</a></div><div class="ttdeci">struct ast_bridge_channel::@233 dtmf_hook_state</div></div>
<div class="ttc" id="structast__bridge__channel_html_a61eb94728edfc0596b44498ce570d084"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">ast_bridge_channel::collected</a></div><div class="ttdeci">char collected[MAXIMUM_DTMF_FEATURE_STRING]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00175">bridge_channel.h:175</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_aedf7b84efe76a7dc658d6ff5f9e9f187"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#aedf7b84efe76a7dc658d6ff5f9e9f187">bridge_channel_feature_digit_add</a></div><div class="ttdeci">static int bridge_channel_feature_digit_add(struct ast_bridge_channel *bridge_channel, int digit, size_t dtmf_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01717">bridge_channel.c:1717</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae04b08c94e2d24a179c9b8e0842ccc57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae04b08c94e2d24a179c9b8e0842ccc57">&#9670;&nbsp;</a></span>ast_bridge_channel_get_chan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a>* ast_bridge_channel_get_chan </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a ref to the bridge_channel's <a class="el" href="../../df/d3c/structast__channel.html" title="Main Channel structure associated with a channel. ">ast_channel</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>The bridge channel</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The returned channel NEEDS to be unref'd once you are done with it. In general, this function is best used when accessing the bridge_channel chan from outside of a bridging thread.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ref'd</td><td><a class="el" href="../../df/d3c/structast__channel.html" title="Main Channel structure associated with a channel. ">ast_channel</a> on success </td></tr>
    <tr><td class="paramname">NULL</td><td>otherwise </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00211">211</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, and <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01193">ast_bridge_channel_write_unhold()</a>.</p>
<div class="fragment"><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;{</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(bridge_channel);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;   chan = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(bridge_channel);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;   <span class="keywordflow">return</span> chan;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7e482bb2dcffd792205f114ddfa098fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e482bb2dcffd792205f114ddfa098fb">&#9670;&nbsp;</a></span>ast_bridge_channel_kick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_channel_kick </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cause</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Kick the channel out of the bridge. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Which channel is being kicked or hungup. </td></tr>
    <tr><td class="paramname">cause</td><td>Cause of channel being kicked. If cause &lt;= 0 then use cause on channel if cause still &lt;= 0 use AST_CAUSE_NORMAL_CLEARING.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This is intended to be called by bridge hooks and the bridge channel thread.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00605">605</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01598">ao2_unlink</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00314">ast_bridge_channel_leave_bridge()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00231">ast_bridge_channel_lock</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00244">ast_bridge_channel_unlock</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00193">AST_BRIDGE_HOOK_TYPE_HANGUP</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00064">BRIDGE_CHANNEL_STATE_END</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00062">BRIDGE_CHANNEL_STATE_WAIT</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00203">ast_bridge_hook::callback</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00278">channel_set_cause()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00132">ast_bridge_channel::features</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00207">ast_bridge_hook::hook_pvt</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00267">ast_bridge_features::other_hooks</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00089">ast_bridge_channel::state</a>, and <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00211">ast_bridge_hook::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01762">ast_bridge_channel_feature_digit()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01241">ast_bridge_channel_run_app()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02027">bridge_channel_attended_transfer()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02016">bridge_channel_blind_transfer()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02067">bridge_channel_handle_action()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02902">bridge_channel_internal_join()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02608">bridge_handle_trip()</a>, and <a class="el" href="../../d0/d95/bridge_8c_source.html#l02020">kick_it()</a>.</p>
<div class="fragment"><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;{</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a> *features = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">features</a>;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d3b/structast__bridge__hook.html">ast_bridge_hook</a> *hook;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> iter;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a>(bridge_channel);</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;   <span class="keywordflow">if</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a871f4f1d537a1cd524ee8c28b623104f">state</a> == <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853">BRIDGE_CHANNEL_STATE_WAIT</a>) {</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a346c98a88d53425181a425b3834b05f5">channel_set_cause</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, cause);</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      cause = 0;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;   }</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(bridge_channel);</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;   <span class="comment">/* Run any hangup hooks. */</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;   iter = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(features-&gt;<a class="code" href="../../db/dba/structast__bridge__features.html#a2918c32314a019cebcc4259e324a2745">other_hooks</a>, 0);</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;   <span class="keywordflow">for</span> (; (hook = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;iter)); <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(hook, -1)) {</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <span class="keywordtype">int</span> remove_me;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      <span class="keywordflow">if</span> (hook-&gt;<a class="code" href="../../da/d3b/structast__bridge__hook.html#a9b8d1356a63d1d2c5892a83ea93af921">type</a> != <a class="code" href="../../dc/d7a/bridge__features_8h.html#a122c52bc5dec74974f3d4cf3870e7da3aaffe52570f582bed6f59dc12ca2a5c9e">AST_BRIDGE_HOOK_TYPE_HANGUP</a>) {</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      }</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      remove_me = hook-&gt;<a class="code" href="../../da/d3b/structast__bridge__hook.html#aff642471ebace1228460a3b47653fc35">callback</a>(bridge_channel, hook-&gt;<a class="code" href="../../da/d3b/structast__bridge__hook.html#ad6640f8898b13ff6d292522ee3d4973f">hook_pvt</a>);</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      <span class="keywordflow">if</span> (remove_me) {</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Hangup hook %p is being removed from %p(%s)\n&quot;</span>,</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            hook, bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a>(features-&gt;<a class="code" href="../../db/dba/structast__bridge__features.html#a2918c32314a019cebcc4259e324a2745">other_hooks</a>, hook);</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      }</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;   }</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;iter);</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;   <span class="comment">/* Default hangup action. */</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a>(bridge_channel, <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326">BRIDGE_CHANNEL_STATE_END</a>, cause);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;}</div><div class="ttc" id="structast__bridge__channel_html_a65633fdc6178dc8d9f754fda0166d16e"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">ast_bridge_channel::features</a></div><div class="ttdeci">struct ast_bridge_features * features</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00132">bridge_channel.h:132</a></div></div>
<div class="ttc" id="structast__bridge__features_html"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a></div><div class="ttdoc">Structure that contains features information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00263">bridge_features.h:263</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_ad58d921ec1c5a6f12be8f94327dd98c0"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a></div><div class="ttdeci">void ast_bridge_channel_leave_bridge(struct ast_bridge_channel *bridge_channel, enum bridge_channel_state new_state, int cause)</div><div class="ttdoc">Set bridge channel state to leave bridge (if not leaving already). </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00314">bridge_channel.c:314</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a871f4f1d537a1cd524ee8c28b623104f"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a871f4f1d537a1cd524ee8c28b623104f">ast_bridge_channel::state</a></div><div class="ttdeci">enum bridge_channel_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00089">bridge_channel.h:89</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_aa467e25606c2a21df25c61f139007782"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a></div><div class="ttdeci">#define ast_bridge_channel_lock(bridge_channel)</div><div class="ttdoc">Lock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00231">bridge_channel.h:231</a></div></div>
<div class="ttc" id="structast__bridge__hook_html_a9b8d1356a63d1d2c5892a83ea93af921"><div class="ttname"><a href="../../da/d3b/structast__bridge__hook.html#a9b8d1356a63d1d2c5892a83ea93af921">ast_bridge_hook::type</a></div><div class="ttdeci">enum ast_bridge_hook_type type</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00211">bridge_features.h:211</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a346c98a88d53425181a425b3834b05f5"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a346c98a88d53425181a425b3834b05f5">channel_set_cause</a></div><div class="ttdeci">static int channel_set_cause(struct ast_channel *chan, int cause)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00278">bridge_channel.c:278</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_a483cd10a0ddcca5814298bdb4f153878"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a></div><div class="ttdeci">#define ast_bridge_channel_unlock(bridge_channel)</div><div class="ttdoc">Unlock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00244">bridge_channel.h:244</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326">BRIDGE_CHANNEL_STATE_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00064">bridge_channel.h:64</a></div></div>
<div class="ttc" id="astobj2_8h_html_a64f51be4bee35c38dbe59b0a788b5ce8"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a></div><div class="ttdeci">#define ao2_unlink(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01598">astobj2.h:1598</a></div></div>
<div class="ttc" id="structast__bridge__hook_html_aff642471ebace1228460a3b47653fc35"><div class="ttname"><a href="../../da/d3b/structast__bridge__hook.html#aff642471ebace1228460a3b47653fc35">ast_bridge_hook::callback</a></div><div class="ttdeci">ast_bridge_hook_callback callback</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00203">bridge_features.h:203</a></div></div>
<div class="ttc" id="structast__bridge__hook_html_ad6640f8898b13ff6d292522ee3d4973f"><div class="ttname"><a href="../../da/d3b/structast__bridge__hook.html#ad6640f8898b13ff6d292522ee3d4973f">ast_bridge_hook::hook_pvt</a></div><div class="ttdeci">void * hook_pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00207">bridge_features.h:207</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a122c52bc5dec74974f3d4cf3870e7da3aaffe52570f582bed6f59dc12ca2a5c9e"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a122c52bc5dec74974f3d4cf3870e7da3aaffe52570f582bed6f59dc12ca2a5c9e">AST_BRIDGE_HOOK_TYPE_HANGUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00193">bridge_features.h:193</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="structast__bridge__features_html_a2918c32314a019cebcc4259e324a2745"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html#a2918c32314a019cebcc4259e324a2745">ast_bridge_features::other_hooks</a></div><div class="ttdeci">struct ao2_container * other_hooks</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00267">bridge_features.h:267</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="bridge__channel_8h_html_ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853">BRIDGE_CHANNEL_STATE_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00062">bridge_channel.h:62</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
<div class="ttc" id="structast__bridge__hook_html"><div class="ttname"><a href="../../da/d3b/structast__bridge__hook.html">ast_bridge_hook</a></div><div class="ttdoc">Structure that is the essence of a feature hook. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00201">bridge_features.h:201</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad58d921ec1c5a6f12be8f94327dd98c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad58d921ec1c5a6f12be8f94327dd98c0">&#9670;&nbsp;</a></span>ast_bridge_channel_leave_bridge()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_channel_leave_bridge </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaa">bridge_channel_state</a>&#160;</td>
          <td class="paramname"><em>new_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cause</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set bridge channel state to leave bridge (if not leaving already). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Channel to change the state on </td></tr>
    <tr><td class="paramname">new_state</td><td>The new state to place the channel into </td></tr>
    <tr><td class="paramname">cause</td><td>Cause of channel leaving bridge. If cause &lt;= 0 then use cause on channel if cause still &lt;= 0 use AST_CAUSE_NORMAL_CLEARING.</td></tr>
  </table>
  </dd>
</dl>
<p>Example usage:</p>
<div class="fragment"><div class="line"><a class="code" href="../../de/d41/bridge__channel_8h.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a>(bridge_channel, <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326">BRIDGE_CHANNEL_STATE_END</a>, <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>);</div></div><!-- fragment --><p>This places the channel pointed to by bridge_channel into the state BRIDGE_CHANNEL_STATE_END if it was BRIDGE_CHANNEL_STATE_WAIT before. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00314">314</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00292">ast_bridge_channel_leave_bridge_nolock()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00231">ast_bridge_channel_lock</a>, and <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00244">ast_bridge_channel_unlock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01034">agent_connect_caller()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00605">ast_bridge_channel_kick()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l01952">ast_bridge_depart()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l01997">ast_bridge_remove()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l00290">basic_hangup_hook()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01103">bridge_agent_hold_heartbeat()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01196">bridge_agent_hold_push()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l00443">bridge_channel_complete_join()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02136">bridge_channel_dissolve_check()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02235">bridge_channel_internal_push_full()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l00319">bridge_dissolve()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l02096">bridge_do_merge()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l02362">bridge_do_move()</a>, <a class="el" href="../../d2/df4/bridge__builtin__interval__features_8c_source.html#l00051">bridge_features_duration_callback()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l04620">bridge_swap_attended_transfer()</a>, <a class="el" href="../../dc/d22/app__bridgewait_8c_source.html#l00204">bridgewait_timeout_callback()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01847">caller_joined_bridge()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01722">caller_safety_timeout()</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00491">feature_hangup()</a>, <a class="el" href="../../d1/db7/parking__bridge__features_8c_source.html#l00575">parking_duration_callback()</a>, <a class="el" href="../../d1/db7/parking__bridge__features_8c_source.html#l00683">say_parking_space()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00303">set_softmix_bridge_data()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l02793">try_swap_optimize_out()</a>, and <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l02392">user_timeout()</a>.</p>
<div class="fragment"><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;{</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a>(bridge_channel);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#ab37a1835212d045dcfe7ef7f25eb5e31">ast_bridge_channel_leave_bridge_nolock</a>(bridge_channel, new_state, cause);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(bridge_channel);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;}</div><div class="ttc" id="bridge__channel_8h_html_aa467e25606c2a21df25c61f139007782"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a></div><div class="ttdeci">#define ast_bridge_channel_lock(bridge_channel)</div><div class="ttdoc">Lock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00231">bridge_channel.h:231</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_ab37a1835212d045dcfe7ef7f25eb5e31"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ab37a1835212d045dcfe7ef7f25eb5e31">ast_bridge_channel_leave_bridge_nolock</a></div><div class="ttdeci">void ast_bridge_channel_leave_bridge_nolock(struct ast_bridge_channel *bridge_channel, enum bridge_channel_state new_state, int cause)</div><div class="ttdoc">Set bridge channel state to leave bridge (if not leaving already). </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00292">bridge_channel.c:292</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_a483cd10a0ddcca5814298bdb4f153878"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a></div><div class="ttdeci">#define ast_bridge_channel_unlock(bridge_channel)</div><div class="ttdoc">Unlock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00244">bridge_channel.h:244</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab37a1835212d045dcfe7ef7f25eb5e31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab37a1835212d045dcfe7ef7f25eb5e31">&#9670;&nbsp;</a></span>ast_bridge_channel_leave_bridge_nolock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_channel_leave_bridge_nolock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaa">bridge_channel_state</a>&#160;</td>
          <td class="paramname"><em>new_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cause</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set bridge channel state to leave bridge (if not leaving already). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Channel to change the state on </td></tr>
    <tr><td class="paramname">new_state</td><td>The new state to place the channel into </td></tr>
    <tr><td class="paramname">cause</td><td>Cause of channel leaving bridge. If cause &lt;= 0 then use cause on channel if cause still &lt;= 0 use AST_CAUSE_NORMAL_CLEARING.</td></tr>
  </table>
  </dd>
</dl>
<p>Example usage:</p>
<div class="fragment"><div class="line"><a class="code" href="../../de/d41/bridge__channel_8h.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a>(bridge_channel, <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326">BRIDGE_CHANNEL_STATE_END</a>, <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>);</div></div><!-- fragment --><p>This places the channel pointed to by bridge_channel into the state BRIDGE_CHANNEL_STATE_END if it was BRIDGE_CHANNEL_STATE_WAIT before. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00292">292</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d95/bridge_8c_source.html#l01242">ast_bridge_vars_set()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00259">bridge_channel_poke()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00062">BRIDGE_CHANNEL_STATE_WAIT</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00278">channel_set_cause()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00089">ast_bridge_channel::state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00314">ast_bridge_channel_leave_bridge()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l02096">bridge_do_merge()</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01696">caller_abort_agent()</a>.</p>
<div class="fragment"><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;{</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;   <span class="keywordflow">if</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a871f4f1d537a1cd524ee8c28b623104f">state</a> != <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853">BRIDGE_CHANNEL_STATE_WAIT</a>) {</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;   }</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Setting %p(%s) state from:%u to:%u\n&quot;</span>,</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>), bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a871f4f1d537a1cd524ee8c28b623104f">state</a>,</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      new_state);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#a346c98a88d53425181a425b3834b05f5">channel_set_cause</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, cause);</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a67a0030855111322bb27b3502345adc6">ast_bridge_vars_set</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;   <span class="comment">/* Change the state on the bridge channel */</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;   bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a871f4f1d537a1cd524ee8c28b623104f">state</a> = new_state;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#a9755f224fead29ce51d3a96401b54599">bridge_channel_poke</a>(bridge_channel);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="bridge_8h_html_a67a0030855111322bb27b3502345adc6"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a67a0030855111322bb27b3502345adc6">ast_bridge_vars_set</a></div><div class="ttdeci">void ast_bridge_vars_set(struct ast_channel *chan, const char *name, const char *pvtid)</div><div class="ttdoc">Sets BRIDGECHANNEL and BRIDGEPVTCALLID for a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l01242">bridge.c:1242</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a871f4f1d537a1cd524ee8c28b623104f"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a871f4f1d537a1cd524ee8c28b623104f">ast_bridge_channel::state</a></div><div class="ttdeci">enum bridge_channel_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00089">bridge_channel.h:89</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a346c98a88d53425181a425b3834b05f5"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a346c98a88d53425181a425b3834b05f5">channel_set_cause</a></div><div class="ttdeci">static int channel_set_cause(struct ast_channel *chan, int cause)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00278">bridge_channel.c:278</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a9755f224fead29ce51d3a96401b54599"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a9755f224fead29ce51d3a96401b54599">bridge_channel_poke</a></div><div class="ttdeci">static void bridge_channel_poke(struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00259">bridge_channel.c:259</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="bridge__channel_8h_html_ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853">BRIDGE_CHANNEL_STATE_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00062">bridge_channel.h:62</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7d01ff5caf025a97796d2dbb78f5f02c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d01ff5caf025a97796d2dbb78f5f02c">&#9670;&nbsp;</a></span>ast_bridge_channel_lock_bridge()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_channel_lock_bridge </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lock the bridge associated with the bridge channel. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Channel that wants to lock the bridge.</td></tr>
  </table>
  </dd>
</dl>
<p>This is an upstream lock operation. The defined locking order is bridge then bridge_channel.</p>
<dl class="section note"><dt>Note</dt><dd>On entry, neither the bridge nor bridge_channel is locked.</dd>
<dd>
The bridge_channel-&gt;bridge pointer changes because of a bridge-merge/channel-move operation between bridges.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00222">222</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00231">ast_bridge_channel_lock</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00244">ast_bridge_channel_unlock</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00480">ast_bridge_lock</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00493">ast_bridge_unlock</a>, and <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00100">ast_bridge_channel::bridge</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l02881">action_toggle_binaural()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01738">agent_alert()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01762">ast_bridge_channel_feature_digit()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00369">ast_bridge_channel_merge_inhibit()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l01482">ast_bridge_notify_masquerade()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l00290">basic_hangup_hook()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02330">bridge_channel_handle_control()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02902">bridge_channel_internal_join()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00875">bridge_channel_suspend()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00918">bridge_channel_unsuspend()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02808">bridge_channel_wait()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00650">bridge_channel_write_frame()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02608">bridge_handle_trip()</a>, <a class="el" href="../../db/dba/bridge__softmix__binaural_8c_source.html#l00467">check_binaural_position_change()</a>, <a class="el" href="../../d8/d66/bridge__holding_8c_source.html#l00416">deferred_action()</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00408">feature_automixmonitor()</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00220">feature_automonitor()</a>, and <a class="el" href="../../d1/db7/parking__bridge__features_8c_source.html#l00336">parking_blind_transfer_park()</a>.</p>
<div class="fragment"><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;{</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      <span class="comment">/* Safely get the bridge pointer */</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a>(bridge_channel);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      bridge = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(bridge, +1);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(bridge_channel);</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      <span class="comment">/* Lock the bridge and see if it is still the bridge we need to lock. */</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#ab8ee807d2c3a21d19e16fedf35c90de8">ast_bridge_lock</a>(bridge);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <span class="keywordflow">if</span> (bridge == bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>) {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(bridge, -1);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      }</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(bridge, -1);</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;   }</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;}</div><div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_aa467e25606c2a21df25c61f139007782"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a></div><div class="ttdeci">#define ast_bridge_channel_lock(bridge_channel)</div><div class="ttdoc">Lock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00231">bridge_channel.h:231</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_a483cd10a0ddcca5814298bdb4f153878"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a></div><div class="ttdeci">#define ast_bridge_channel_unlock(bridge_channel)</div><div class="ttdoc">Unlock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00244">bridge_channel.h:244</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="bridge_8h_html_a0fb66f4741ca8d106af1917a2f1aab6e"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a></div><div class="ttdeci">#define ast_bridge_unlock(bridge)</div><div class="ttdoc">Unlock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00493">bridge.h:493</a></div></div>
<div class="ttc" id="bridge_8h_html_ab8ee807d2c3a21d19e16fedf35c90de8"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ab8ee807d2c3a21d19e16fedf35c90de8">ast_bridge_lock</a></div><div class="ttdeci">#define ast_bridge_lock(bridge)</div><div class="ttdoc">Lock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00480">bridge.h:480</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aada1c86f1020a0d546b371a8ff602cee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aada1c86f1020a0d546b371a8ff602cee">&#9670;&nbsp;</a></span>ast_bridge_channel_merge_inhibit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a>* ast_bridge_channel_merge_inhibit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>request</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adjust the bridge_channel's bridge merge inhibit request count. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>What to operate on. </td></tr>
    <tr><td class="paramname">request</td><td>Inhibit request increment. (Positive to add requests. Negative to remove requests.)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This API call is meant for internal bridging operations.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bridge</td><td>adjusted merge inhibit with reference count. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00369">369</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00222">ast_bridge_channel_lock_bridge()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00493">ast_bridge_unlock</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00100">ast_bridge_channel::bridge</a>, and <a class="el" href="../../d0/d95/bridge_8c_source.html#l03052">bridge_merge_inhibit_nolock()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>, and <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l03295">feature_attended_transfer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;{</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a>(bridge_channel);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;   bridge = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(bridge, +1);</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;   <a class="code" href="../../d5/dde/bridge__internal_8h.html#ae1af73cc9e9cce0a151dddc8cfae3e4b">bridge_merge_inhibit_nolock</a>(bridge, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a>);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;   <span class="keywordflow">return</span> bridge;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;}</div><div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="bridge__internal_8h_html_ae1af73cc9e9cce0a151dddc8cfae3e4b"><div class="ttname"><a href="../../d5/dde/bridge__internal_8h.html#ae1af73cc9e9cce0a151dddc8cfae3e4b">bridge_merge_inhibit_nolock</a></div><div class="ttdeci">void bridge_merge_inhibit_nolock(struct ast_bridge *bridge, int request)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03052">bridge.c:3052</a></div></div>
<div class="ttc" id="bridge_8h_html_a0fb66f4741ca8d106af1917a2f1aab6e"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a></div><div class="ttdeci">#define ast_bridge_unlock(bridge)</div><div class="ttdoc">Unlock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00493">bridge.h:493</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a4e2e6fb7d874f0d2deddd2ecfc8afb32"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a></div><div class="ttdeci">static int request(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02559">chan_pjsip.c:2559</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a7d01ff5caf025a97796d2dbb78f5f02c"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a></div><div class="ttdeci">void ast_bridge_channel_lock_bridge(struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Lock the bridge associated with the bridge channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00222">bridge_channel.c:222</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a891462a54b03fb795d42765b661cede6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a891462a54b03fb795d42765b661cede6">&#9670;&nbsp;</a></span>ast_bridge_channel_notify_talking()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_channel_notify_talking </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>started_talking</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lets the bridging indicate when a bridge channel has stopped or started talking. </p>
<dl class="section note"><dt>Note</dt><dd>All DSP functionality on the bridge has been pushed down to the lowest possible layer, which in this case is the specific bridging technology being used. Since it is necessary for the knowledge of which channels are talking to make its way up to the application, this function has been created to allow the bridging technology to communicate that information with the bridging core.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>The bridge channel that has either started or stopped talking. </td></tr>
    <tr><td class="paramname">started_talking</td><td>set to 1 when this indicates the channel has started talking set to 0 when this indicates the channel has stopped talking.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00244">244</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01044">ast_bridge_channel_queue_frame()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00127">AST_FRAME_BRIDGE_ACTION</a>, <a class="el" href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00045">BRIDGE_CHANNEL_ACTION_TALKING_START</a>, <a class="el" href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00047">BRIDGE_CHANNEL_ACTION_TALKING_STOP</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l01042">clear_talking()</a>, and <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00942">softmix_bridge_write_voice()</a>.</p>
<div class="fragment"><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;{</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> action = {</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      .<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af36653b08c00f5d824ed6046e9233ef9">AST_FRAME_BRIDGE_ACTION</a>,</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      .subclass.integer = started_talking</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;         ? <a class="code" href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa73a3ac2a21fe5971393db0875aaf1c87">BRIDGE_CHANNEL_ACTION_TALKING_START</a> : <a class="code" href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa56e18ff73f676281575bc87452730220">BRIDGE_CHANNEL_ACTION_TALKING_STOP</a>,</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;   };</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d32/bridge__channel_8c.html#aba51942a86849ae41c5397d596cb8ed1">ast_bridge_channel_queue_frame</a>(bridge_channel, &amp;action);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;}</div><div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0af36653b08c00f5d824ed6046e9233ef9"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af36653b08c00f5d824ed6046e9233ef9">AST_FRAME_BRIDGE_ACTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00127">include/asterisk/frame.h:127</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_aba51942a86849ae41c5397d596cb8ed1"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#aba51942a86849ae41c5397d596cb8ed1">ast_bridge_channel_queue_frame</a></div><div class="ttdeci">int ast_bridge_channel_queue_frame(struct ast_bridge_channel *bridge_channel, struct ast_frame *fr)</div><div class="ttdoc">Write a frame to the specified bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01044">bridge_channel.c:1044</a></div></div>
<div class="ttc" id="bridge__channel__internal_8h_html_adadb2f6b306233caecdabcf1a7440b0aa73a3ac2a21fe5971393db0875aaf1c87"><div class="ttname"><a href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa73a3ac2a21fe5971393db0875aaf1c87">BRIDGE_CHANNEL_ACTION_TALKING_START</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00045">bridge_channel_internal.h:45</a></div></div>
<div class="ttc" id="bridge__channel__internal_8h_html_adadb2f6b306233caecdabcf1a7440b0aa56e18ff73f676281575bc87452730220"><div class="ttname"><a href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa56e18ff73f676281575bc87452730220">BRIDGE_CHANNEL_ACTION_TALKING_STOP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00047">bridge_channel_internal.h:47</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0a9bea2845810c6891440a012a275a36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a9bea2845810c6891440a012a275a36">&#9670;&nbsp;</a></span>ast_bridge_channel_peer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a>* ast_bridge_channel_peer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the peer bridge channel of a two party bridge. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>What to get the peer of.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>On entry, bridge_channel-&gt;bridge is already locked.</dd>
<dd>
This is an internal bridge function.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">peer</td><td>on success. </td></tr>
    <tr><td class="paramname">NULL</td><td>no peer channel. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00321">321</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00100">ast_bridge_channel::bridge</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00371">ast_bridge::channels</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00121">ast_bridge_channel::in_bridge</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00381">ast_bridge::num_channels</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l00393">bridge_reconfigured_connected_line_update()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l04620">bridge_swap_attended_transfer()</a>, <a class="el" href="../../d1/db7/parking__bridge__features_8c_source.html#l00336">parking_blind_transfer_park()</a>, and <a class="el" href="../../d0/d95/bridge_8c_source.html#l02793">try_swap_optimize_out()</a>.</p>
<div class="fragment"><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;{</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *other = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;   <span class="keywordflow">if</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#afacf05ff49bf5cd3c7170b3c51943d2e">in_bridge</a> &amp;&amp; bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a97e3bedeadf444995deb6fab68f57e21">num_channels</a> == 2) {</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a77542a877d8ed62331c5b3b6aa3e87a7">channels</a>, other, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;         <span class="keywordflow">if</span> (other != bridge_channel) {</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;         }</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      }</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;   }</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;   <span class="keywordflow">return</span> other;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_afacf05ff49bf5cd3c7170b3c51943d2e"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#afacf05ff49bf5cd3c7170b3c51943d2e">ast_bridge_channel::in_bridge</a></div><div class="ttdeci">unsigned int in_bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00121">bridge_channel.h:121</a></div></div>
<div class="ttc" id="structast__bridge_html_a77542a877d8ed62331c5b3b6aa3e87a7"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a77542a877d8ed62331c5b3b6aa3e87a7">ast_bridge::channels</a></div><div class="ttdeci">struct ast_bridge_channels_list channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00371">bridge.h:371</a></div></div>
<div class="ttc" id="structast__bridge__channel_html"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a></div><div class="ttdoc">Structure that contains information regarding a channel in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00084">bridge_channel.h:84</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="structast__bridge_html_a97e3bedeadf444995deb6fab68f57e21"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a97e3bedeadf444995deb6fab68f57e21">ast_bridge::num_channels</a></div><div class="ttdeci">unsigned int num_channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00381">bridge.h:381</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a01de7987fb023a0c1e52965454797d0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01de7987fb023a0c1e52965454797d0b">&#9670;&nbsp;</a></span>ast_bridge_channel_playfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_channel_playfile </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d41/bridge__channel_8h.html#afb66d5073210f00fef9adc41e16a5f00">ast_bridge_custom_play_fn</a>&#160;</td>
          <td class="paramname"><em>custom_play</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>playfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>moh_class</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Play a file on the bridge channel. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Which channel to play the file on </td></tr>
    <tr><td class="paramname">custom_play</td><td>Call this function to play the playfile. (NULL if normal sound file to play) </td></tr>
    <tr><td class="paramname">playfile</td><td>Sound filename to play. </td></tr>
    <tr><td class="paramname">moh_class</td><td>MOH class to request bridge peers to hear while file is played. NULL if no MOH. Empty if default MOH class.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This is intended to be called by bridge hooks.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01321">1321</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01167">ast_bridge_channel_write_hold()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01193">ast_bridge_channel_write_unhold()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01260">ast_channel_flags()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a03cad86bc84ad7a0de6c70fef09e9dde">ast_channel_latest_musicclass()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d2/d4d/file_8h_source.html#l00047">AST_DIGIT_NONE</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00992">AST_FLAG_MOH</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07866">ast_moh_start()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01814">ast_stream_and_wait()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01368">bridge_channel_playfile()</a>.</p>
<div class="fragment"><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;{</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;   <span class="keywordflow">if</span> (moh_class) {</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#ad70b0a7df24a2aa9e284d8c785dcbd45">ast_bridge_channel_write_hold</a>(bridge_channel, moh_class);</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;   }</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;   <span class="keywordflow">if</span> (custom_play) {</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;      custom_play(bridge_channel, playfile);</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;      <a class="code" href="../../d2/d4d/file_8h.html#a95b94a020720147325a486e210b36775">ast_stream_and_wait</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, playfile, <a class="code" href="../../d2/d4d/file_8h.html#abb7bdff3c549191072878402b0a0ca9c">AST_DIGIT_NONE</a>);</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;   }</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;   <span class="keywordflow">if</span> (moh_class) {</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a4be080559ea3fc87e50aa29a95af74f0">ast_bridge_channel_write_unhold</a>(bridge_channel);</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;   }</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;<span class="comment">    * It may be necessary to resume music on hold after we finish</span></div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;<span class="comment">    * playing the announcment.</span></div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5af342fb5a757280799be80248e898d14a">AST_FLAG_MOH</a>)) {</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *latest_musicclass;</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;      latest_musicclass = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a03cad86bc84ad7a0de6c70fef09e9dde">ast_channel_latest_musicclass</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;      <a class="code" href="../../dc/d07/musiconhold_8h.html#a2acec01f2fddd8ca494d874003815cf7">ast_moh_start</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, latest_musicclass, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;   }</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5af342fb5a757280799be80248e898d14a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5af342fb5a757280799be80248e898d14a">AST_FLAG_MOH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00992">channel.h:992</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a4be080559ea3fc87e50aa29a95af74f0"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a4be080559ea3fc87e50aa29a95af74f0">ast_bridge_channel_write_unhold</a></div><div class="ttdeci">int ast_bridge_channel_write_unhold(struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Write an unhold frame into the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01193">bridge_channel.c:1193</a></div></div>
<div class="ttc" id="channel_8h_html_a03cad86bc84ad7a0de6c70fef09e9dde"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a03cad86bc84ad7a0de6c70fef09e9dde">ast_channel_latest_musicclass</a></div><div class="ttdeci">const char * ast_channel_latest_musicclass(const struct ast_channel *chan)</div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="file_8h_html_abb7bdff3c549191072878402b0a0ca9c"><div class="ttname"><a href="../../d2/d4d/file_8h.html#abb7bdff3c549191072878402b0a0ca9c">AST_DIGIT_NONE</a></div><div class="ttdeci">#define AST_DIGIT_NONE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00047">file.h:47</a></div></div>
<div class="ttc" id="musiconhold_8h_html_a2acec01f2fddd8ca494d874003815cf7"><div class="ttname"><a href="../../dc/d07/musiconhold_8h.html#a2acec01f2fddd8ca494d874003815cf7">ast_moh_start</a></div><div class="ttdeci">int ast_moh_start(struct ast_channel *chan, const char *mclass, const char *interpclass)</div><div class="ttdoc">Turn on music on hold on a given channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07866">channel.c:7866</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="file_8h_html_a95b94a020720147325a486e210b36775"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a95b94a020720147325a486e210b36775">ast_stream_and_wait</a></div><div class="ttdeci">int ast_stream_and_wait(struct ast_channel *chan, const char *file, const char *digits)</div><div class="ttdoc">stream file until digit If the file name is non-empty, try to play it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01814">file.c:1814</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_ad70b0a7df24a2aa9e284d8c785dcbd45"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ad70b0a7df24a2aa9e284d8c785dcbd45">ast_bridge_channel_write_hold</a></div><div class="ttdeci">int ast_bridge_channel_write_hold(struct ast_bridge_channel *bridge_channel, const char *moh_class)</div><div class="ttdoc">Write a hold frame into the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01167">bridge_channel.c:1167</a></div></div>
<div class="ttc" id="channel_8h_html_a91de92158876186d28ba1773877f2732"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a></div><div class="ttdeci">struct ast_flags * ast_channel_flags(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01260">channel_internal_api.c:1260</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4fa039da96461900d3a9f0ceefd7298f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fa039da96461900d3a9f0ceefd7298f">&#9670;&nbsp;</a></span>ast_bridge_channel_queue_app()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_channel_queue_app </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>app_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>app_args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>moh_class</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Queue a bridge action run application frame onto the bridge channel. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Which channel to put the frame onto </td></tr>
    <tr><td class="paramname">app_name</td><td>Dialplan application name. </td></tr>
    <tr><td class="paramname">app_args</td><td>Arguments for the application. (NULL or empty for no arguments) </td></tr>
    <tr><td class="paramname">moh_class</td><td>MOH class to request bridge peers to hear while application is running. NULL if no MOH. Empty if default MOH class.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This is intended to be called by bridge hooks.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01315">1315</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00938">bridge_channel_queue_action_data()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01285">payload_helper_app()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>.</p>
<div class="fragment"><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;{</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d32/bridge__channel_8c.html#ad00550db31054aa051277a5d7dffd196">payload_helper_app</a>(<a class="code" href="../../d3/d32/bridge__channel_8c.html#a7169723f8af325431a959806a6b9ba96">bridge_channel_queue_action_data</a>,</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;      bridge_channel, <a class="code" href="../../dd/d16/pbx__app_8c.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a>, app_args, moh_class);</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_a7169723f8af325431a959806a6b9ba96"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a7169723f8af325431a959806a6b9ba96">bridge_channel_queue_action_data</a></div><div class="ttdeci">static int bridge_channel_queue_action_data(struct ast_bridge_channel *bridge_channel, enum bridge_channel_action_type action, const void *data, size_t datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00938">bridge_channel.c:938</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_ad00550db31054aa051277a5d7dffd196"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ad00550db31054aa051277a5d7dffd196">payload_helper_app</a></div><div class="ttdeci">static int payload_helper_app(ast_bridge_channel_post_action_data post_it, struct ast_bridge_channel *bridge_channel, const char *app_name, const char *app_args, const char *moh_class)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01285">bridge_channel.c:1285</a></div></div>
<div class="ttc" id="pbx__app_8c_html_a6d3c140ecf1f736c6750d5a17e5bf958"><div class="ttname"><a href="../../dd/d16/pbx__app_8c.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a></div><div class="ttdeci">const char * app_name(struct ast_app *app)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00463">pbx_app.c:463</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad7de2a71d5af8f85035713f1f3cb69a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7de2a71d5af8f85035713f1f3cb69a9">&#9670;&nbsp;</a></span>ast_bridge_channel_queue_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_channel_queue_callback </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../de/d41/bridge__channel_8h.html#a411218cf4d743baa73c2def8f024cb23">ast_bridge_channel_custom_callback_option</a>&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d41/bridge__channel_8h.html#a7c65814e807e654cd23c9d952e23b69a">ast_bridge_custom_callback_fn</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>payload_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Queue a bridge action custom callback frame onto the bridge channel. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Which channel to put the frame onto. </td></tr>
    <tr><td class="paramname">flags</td><td>Custom callback option flags. </td></tr>
    <tr><td class="paramname">callback</td><td>Custom callback run on a bridge channel. </td></tr>
    <tr><td class="paramname">payload</td><td>Data to pass to the callback. (NULL if none). </td></tr>
    <tr><td class="paramname">payload_size</td><td>Size of the payload if payload is non-NULL. A number otherwise.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The payload MUST NOT have any resources that need to be freed.</dd>
<dd>
This is intended to be called by bridge hooks.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01492">1492</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00938">bridge_channel_queue_action_data()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01457">payload_helper_cb()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l02025">ast_bridge_kick()</a>, <a class="el" href="../../d8/d66/bridge__holding_8c_source.html#l00093">defer_action()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l05269">handle_bridge_kick_channel()</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01812">send_alert_to_agent()</a>.</p>
<div class="fragment"><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;{</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d32/bridge__channel_8c.html#afee5c64c70dc8139d5b8eed7a33e1c85">payload_helper_cb</a>(<a class="code" href="../../d3/d32/bridge__channel_8c.html#a7169723f8af325431a959806a6b9ba96">bridge_channel_queue_action_data</a>,</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;      bridge_channel, flags, callback, payload, payload_size);</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_a7169723f8af325431a959806a6b9ba96"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a7169723f8af325431a959806a6b9ba96">bridge_channel_queue_action_data</a></div><div class="ttdeci">static int bridge_channel_queue_action_data(struct ast_bridge_channel *bridge_channel, enum bridge_channel_action_type action, const void *data, size_t datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00938">bridge_channel.c:938</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_afee5c64c70dc8139d5b8eed7a33e1c85"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#afee5c64c70dc8139d5b8eed7a33e1c85">payload_helper_cb</a></div><div class="ttdeci">static int payload_helper_cb(ast_bridge_channel_post_action_data post_it, struct ast_bridge_channel *bridge_channel, enum ast_bridge_channel_custom_callback_option flags, ast_bridge_custom_callback_fn callback, const void *payload, size_t payload_size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01457">bridge_channel.c:1457</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abc0302bab9fb2f318db695fe1f9047d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc0302bab9fb2f318db695fe1f9047d8">&#9670;&nbsp;</a></span>ast_bridge_channel_queue_control_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_channel_queue_control_data </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390">ast_control_frame_type</a>&#160;</td>
          <td class="paramname"><em>control</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>datalen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Queue a control frame onto the bridge channel with data. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Which channel to queue the frame onto. </td></tr>
    <tr><td class="paramname">control</td><td>Type of control frame. </td></tr>
    <tr><td class="paramname">data</td><td>Frame payload data to pass. </td></tr>
    <tr><td class="paramname">datalen</td><td>Frame payload data length to pass.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01143">1143</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01044">ast_bridge_channel_queue_frame()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">AST_FRAME_CONTROL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l00393">bridge_reconfigured_connected_line_update()</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01818">send_colp_to_agent()</a>.</p>
<div class="fragment"><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;{</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> frame = {</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;      .<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>,</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;      .subclass.integer = control,</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;      .datalen = <a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>,</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;      .data.ptr = (<span class="keywordtype">void</span> *) <a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>,</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;   };</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d32/bridge__channel_8c.html#aba51942a86849ae41c5397d596cb8ed1">ast_bridge_channel_queue_frame</a>(bridge_channel, &amp;frame);</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_aba51942a86849ae41c5397d596cb8ed1"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#aba51942a86849ae41c5397d596cb8ed1">ast_bridge_channel_queue_frame</a></div><div class="ttdeci">int ast_bridge_channel_queue_frame(struct ast_bridge_channel *bridge_channel, struct ast_frame *fr)</div><div class="ttdoc">Write a frame to the specified bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01044">bridge_channel.c:1044</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">include/asterisk/frame.h:105</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aba51942a86849ae41c5397d596cb8ed1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba51942a86849ae41c5397d596cb8ed1">&#9670;&nbsp;</a></span>ast_bridge_channel_queue_frame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_channel_queue_frame </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>fr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a frame to the specified bridge_channel. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Channel to queue the frame. </td></tr>
    <tr><td class="paramname">fr</td><td>Frame to write.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01044">1044</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00151">ast_bridge_channel::alert_pipe</a>, <a class="el" href="../../d6/d7a/alertpipe_8c_source.html#l00120">ast_alertpipe_write()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00231">ast_bridge_channel_lock</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00244">ast_bridge_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00125">AST_FRAME_DTMF_BEGIN</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00099">AST_FRAME_DTMF_END</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00116">AST_FRAME_IMAGE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00107">AST_FRAME_NULL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00135">AST_FRAME_RTCP</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00114">AST_FRAME_TEXT</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00137">AST_FRAME_TEXT_DATA</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00103">AST_FRAME_VIDEO</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">AST_FRAME_VOICE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00585">ast_frdup</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01467">ast_is_deferrable_frame()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00730">AST_LIST_INSERT_TAIL</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d2/d0d/message_8h_source.html#l00458">AST_MSG_DATA_ATTR_BODY</a>, <a class="el" href="../../d2/d0d/message_8h_source.html#l00456">AST_MSG_DATA_ATTR_FROM</a>, <a class="el" href="../../d2/d0d/message_8h_source.html#l00455">AST_MSG_DATA_ATTR_TO</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l01533">ast_msg_data_get_attribute()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00062">BRIDGE_CHANNEL_STATE_WAIT</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01023">bridge_frame_free()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00441">DEBUG_ATLEAST</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00132">ast_bridge_channel::features</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00241">LOG_DEBUG</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">ast_frame::ptr</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00089">ast_bridge_channel::state</a>, <a class="el" href="../../d5/dca/structast__bridge__channel.html#affe0d3ce4e4266e3b4a4ea543fbc4d78">ast_bridge_channel::stream_map</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00197">ast_frame::stream_num</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00125">ast_bridge_channel::suspended</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00283">ast_bridge_features::text_messaging</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00192">ast_bridge_channel::to_channel</a>, and <a class="el" href="../../d5/dca/structast__bridge__channel.html#a7e580256fbadf0a28137681296f9b6b8">ast_bridge_channel::wr_queue</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00244">ast_bridge_channel_notify_talking()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01143">ast_bridge_channel_queue_control_data()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01122">ast_bridge_queue_everyone_else()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00938">bridge_channel_queue_action_data()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00966">bridge_channel_queue_action_data_sync()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l01485">remb_send_report()</a>, <a class="el" href="../../dd/d92/confbridge__manager_8c_source.html#l00358">send_message()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l01763">softmix_mixing_loop()</a>, and <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00863">softmix_pass_video_top_priority()</a>.</p>
<div class="fragment"><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;{</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *dup;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;   <span class="keywordflow">if</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a2862ffde11c780129862e5549415a6f6">suspended</a></div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      <span class="comment">/* Also defer DTMF frames. */</span></div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      &amp;&amp; fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> != <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be">AST_FRAME_DTMF_BEGIN</a></div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      &amp;&amp; fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> != <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a></div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      &amp;&amp; !<a class="code" href="../../d5/d7b/channel_8h.html#af040cd3070189adb70454717407a4315">ast_is_deferrable_frame</a>(fr)) {</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      <span class="comment">/* Drop non-deferable frames when suspended. */</span></div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;   }</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;   <span class="keywordflow">if</span> (fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a29ff71f9d5c7927906ebd437fe372056">AST_FRAME_NULL</a>) {</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      <span class="comment">/* &quot;Accept&quot; the frame and discard it. */</span></div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;   }</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;   <span class="keywordflow">if</span> ((fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a> || fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30">AST_FRAME_VIDEO</a> ||</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;      fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078">AST_FRAME_TEXT</a> || fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a6c9398ee8989239124295d096a87bf32">AST_FRAME_IMAGE</a> ||</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;      fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ac2b2b163b29fde967531b8bf92966c97">AST_FRAME_RTCP</a>) &amp;&amp; fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a> &gt; -1) {</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;      <span class="keywordtype">int</span> num = -1;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a>(bridge_channel);</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;      <span class="keywordflow">if</span> (fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a> &lt; (<span class="keywordtype">int</span>)<a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#affe0d3ce4e4266e3b4a4ea543fbc4d78">stream_map</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a8eed32758f5880ff8ec632c30525472b">to_channel</a>)) {</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;         num = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#affe0d3ce4e4266e3b4a4ea543fbc4d78">stream_map</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a8eed32758f5880ff8ec632c30525472b">to_channel</a>, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a>);</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;      }</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(bridge_channel);</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;      <span class="keywordflow">if</span> (num == -1) {</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;         <span class="comment">/* We don&#39;t have a mapped stream so just discard this frame. */</span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;      }</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;   }</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;   dup = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a417ee8a61074ec7570971202908e2c4f">ast_frdup</a>(fr);</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;   <span class="keywordflow">if</span> (!dup) {</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;   }</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a>(bridge_channel);</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;   <span class="keywordflow">if</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a871f4f1d537a1cd524ee8c28b623104f">state</a> != <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853">BRIDGE_CHANNEL_STATE_WAIT</a>) {</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;      <span class="comment">/* Drop frames on channels leaving the bridge. */</span></div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(bridge_channel);</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a3742c8c577dcc82edd8c4431a11a599e">bridge_frame_free</a>(dup);</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;   }</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;   <span class="keywordflow">if</span> ((fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078">AST_FRAME_TEXT</a> || fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ada620aba450c2a60eb096001f2361741">AST_FRAME_TEXT_DATA</a>) &amp;&amp;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      !bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">features</a>-&gt;<a class="code" href="../../db/dba/structast__bridge__features.html#ad1ee5fa0669878cce5cf86ca3d3dd921">text_messaging</a>) {</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;      <span class="comment">/* This channel is not accepting text messages. */</span></div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(bridge_channel);</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a3742c8c577dcc82edd8c4431a11a599e">bridge_frame_free</a>(dup);</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;   }</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/d8c/logger_8h.html#a33f6031de4ab6d1406465a7a3ee18e86">DEBUG_ATLEAST</a>(1)) {</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;      <span class="keywordflow">if</span> (fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078">AST_FRAME_TEXT</a>) {</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>, <span class="stringliteral">&quot;Queuing TEXT frame to &#39;%s&#39;: %*.s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;            fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>, (<span class="keywordtype">char</span> *)fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>);</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ada620aba450c2a60eb096001f2361741">AST_FRAME_TEXT_DATA</a>) {</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d9/d44/structast__msg__data.html">ast_msg_data</a> *msg = fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>, <span class="stringliteral">&quot;Queueing TEXT_DATA frame from &#39;%s&#39; to &#39;%s:%s&#39;: %s\n&quot;</span>,</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;            <a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga4edd2c0456a7d3f1658e48e2150c9665">ast_msg_data_get_attribute</a>(msg, <a class="code" href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a7e8412f5b805e70e50a66150bad4d292">AST_MSG_DATA_ATTR_FROM</a>),</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;            <a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga4edd2c0456a7d3f1658e48e2150c9665">ast_msg_data_get_attribute</a>(msg, <a class="code" href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a34d60938c22ee31e3eafa756c016020d">AST_MSG_DATA_ATTR_TO</a>),</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;            <a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga4edd2c0456a7d3f1658e48e2150c9665">ast_msg_data_get_attribute</a>(msg, <a class="code" href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a0f0f211998e9727566ad340464c66070">AST_MSG_DATA_ATTR_BODY</a>));</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      }</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;   }</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a7e580256fbadf0a28137681296f9b6b8">wr_queue</a>, dup, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d4d/alertpipe_8h.html#a3c1d9ad40416df5adef7cc213e87d88b">ast_alertpipe_write</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a55935aecf1002b1dfa1324bc3799b67c">alert_pipe</a>)) {</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;We couldn&#39;t write alert pipe for %p(%s)... something is VERY wrong\n&quot;</span>,</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;         bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;   }</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(bridge_channel);</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;}</div><div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ada620aba450c2a60eb096001f2361741"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ada620aba450c2a60eb096001f2361741">AST_FRAME_TEXT_DATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00137">include/asterisk/frame.h:137</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a417ee8a61074ec7570971202908e2c4f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a417ee8a61074ec7570971202908e2c4f">ast_frdup</a></div><div class="ttdeci">#define ast_frdup(fr)</div><div class="ttdoc">Copies a frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00585">include/asterisk/frame.h:585</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_gga44ac88ed1b656e254dcad5cf0dbd2a22a0f0f211998e9727566ad340464c66070"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a0f0f211998e9727566ad340464c66070">AST_MSG_DATA_ATTR_BODY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00458">message.h:458</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a7e580256fbadf0a28137681296f9b6b8"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a7e580256fbadf0a28137681296f9b6b8">ast_bridge_channel::wr_queue</a></div><div class="ttdeci">struct ast_bridge_channel::@230 wr_queue</div></div>
<div class="ttc" id="structast__bridge__channel_html_a65633fdc6178dc8d9f754fda0166d16e"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">ast_bridge_channel::features</a></div><div class="ttdeci">struct ast_bridge_features * features</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00132">bridge_channel.h:132</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078">AST_FRAME_TEXT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00114">include/asterisk/frame.h:114</a></div></div>
<div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a871f4f1d537a1cd524ee8c28b623104f"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a871f4f1d537a1cd524ee8c28b623104f">ast_bridge_channel::state</a></div><div class="ttdeci">enum bridge_channel_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00089">bridge_channel.h:89</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a2862ffde11c780129862e5549415a6f6"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a2862ffde11c780129862e5549415a6f6">ast_bridge_channel::suspended</a></div><div class="ttdeci">unsigned int suspended</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00125">bridge_channel.h:125</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">include/asterisk/frame.h:101</a></div></div>
<div class="ttc" id="structast__msg__data_html"><div class="ttname"><a href="../../d9/d44/structast__msg__data.html">ast_msg_data</a></div><div class="ttdoc">Structure used to transport a message through the frame core. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01406">message.c:1406</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_affe0d3ce4e4266e3b4a4ea543fbc4d78"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#affe0d3ce4e4266e3b4a4ea543fbc4d78">ast_bridge_channel::stream_map</a></div><div class="ttdeci">struct ast_bridge_channel::@236 stream_map</div></div>
<div class="ttc" id="logger_8h_html_a6ff63e8955665c4a58b1598f2b07c51a"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a></div><div class="ttdeci">#define LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00241">logger.h:241</a></div></div>
<div class="ttc" id="alertpipe_8h_html_a3c1d9ad40416df5adef7cc213e87d88b"><div class="ttname"><a href="../../dc/d4d/alertpipe_8h.html#a3c1d9ad40416df5adef7cc213e87d88b">ast_alertpipe_write</a></div><div class="ttdeci">ssize_t ast_alertpipe_write(int alert_pipe[2])</div><div class="ttdoc">Write an event to an alert pipe. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d7a/alertpipe_8c_source.html#l00120">alertpipe.c:120</a></div></div>
<div class="ttc" id="structast__bridge__features_html_ad1ee5fa0669878cce5cf86ca3d3dd921"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html#ad1ee5fa0669878cce5cf86ca3d3dd921">ast_bridge_features::text_messaging</a></div><div class="ttdeci">unsigned int text_messaging</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00283">bridge_features.h:283</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_aa467e25606c2a21df25c61f139007782"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a></div><div class="ttdeci">#define ast_bridge_channel_lock(bridge_channel)</div><div class="ttdoc">Lock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00231">bridge_channel.h:231</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a6c9398ee8989239124295d096a87bf32"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a6c9398ee8989239124295d096a87bf32">AST_FRAME_IMAGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00116">include/asterisk/frame.h:116</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_gga44ac88ed1b656e254dcad5cf0dbd2a22a34d60938c22ee31e3eafa756c016020d"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a34d60938c22ee31e3eafa756c016020d">AST_MSG_DATA_ATTR_TO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00455">message.h:455</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ac2b2b163b29fde967531b8bf92966c97"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ac2b2b163b29fde967531b8bf92966c97">AST_FRAME_RTCP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00135">include/asterisk/frame.h:135</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a29ff71f9d5c7927906ebd437fe372056"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a29ff71f9d5c7927906ebd437fe372056">AST_FRAME_NULL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00107">include/asterisk/frame.h:107</a></div></div>
<div class="ttc" id="structframe__list_html"><div class="ttname"><a href="../../d9/d42/structframe__list.html">frame_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00590">res_rtp_asterisk.c:590</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_a483cd10a0ddcca5814298bdb4f153878"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a></div><div class="ttdeci">#define ast_bridge_channel_unlock(bridge_channel)</div><div class="ttdoc">Unlock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00244">bridge_channel.h:244</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a8eed32758f5880ff8ec632c30525472b"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a8eed32758f5880ff8ec632c30525472b">ast_bridge_channel::to_channel</a></div><div class="ttdeci">struct ast_vector_int to_channel</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00192">bridge_channel.h:192</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4d258b4525e63c435d7de579d3f46960"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_LIST_INSERT_TAIL(head, elm, field)</div><div class="ttdoc">Appends a list entry to the tail of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00730">linkedlists.h:730</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00099">include/asterisk/frame.h:99</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a55935aecf1002b1dfa1324bc3799b67c"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a55935aecf1002b1dfa1324bc3799b67c">ast_bridge_channel::alert_pipe</a></div><div class="ttdeci">int alert_pipe[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00151">bridge_channel.h:151</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_gga44ac88ed1b656e254dcad5cf0dbd2a22a7e8412f5b805e70e50a66150bad4d292"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a7e8412f5b805e70e50a66150bad4d292">AST_MSG_DATA_ATTR_FROM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00456">message.h:456</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_ga4edd2c0456a7d3f1658e48e2150c9665"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#ga4edd2c0456a7d3f1658e48e2150c9665">ast_msg_data_get_attribute</a></div><div class="ttdeci">const char * ast_msg_data_get_attribute(struct ast_msg_data *msg, enum ast_msg_data_attribute_type attribute_type)</div><div class="ttdoc">Get attribute from ast_msg_data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01533">message.c:1533</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channel_8h_html_af040cd3070189adb70454717407a4315"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af040cd3070189adb70454717407a4315">ast_is_deferrable_frame</a></div><div class="ttdeci">int ast_is_deferrable_frame(const struct ast_frame *frame)</div><div class="ttdoc">Should we keep this frame for later? </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01467">channel.c:1467</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__frame_html_a8383e75e786449dd2f4258b0819dd8f1"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">ast_frame::stream_num</a></div><div class="ttdeci">int stream_num</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00197">include/asterisk/frame.h:197</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be">AST_FRAME_DTMF_BEGIN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00125">include/asterisk/frame.h:125</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a3742c8c577dcc82edd8c4431a11a599e"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a3742c8c577dcc82edd8c4431a11a599e">bridge_frame_free</a></div><div class="ttdeci">static void bridge_frame_free(struct ast_frame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01023">bridge_channel.c:1023</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30">AST_FRAME_VIDEO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00103">include/asterisk/frame.h:103</a></div></div>
<div class="ttc" id="logger_8h_html_a33f6031de4ab6d1406465a7a3ee18e86"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a33f6031de4ab6d1406465a7a3ee18e86">DEBUG_ATLEAST</a></div><div class="ttdeci">#define DEBUG_ATLEAST(level)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00441">logger.h:441</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853">BRIDGE_CHANNEL_STATE_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00062">bridge_channel.h:62</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac352fd6d6188d7431155f34ae2a38799"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac352fd6d6188d7431155f34ae2a38799">&#9670;&nbsp;</a></span>ast_bridge_channel_queue_playfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_channel_queue_playfile </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d41/bridge__channel_8h.html#afb66d5073210f00fef9adc41e16a5f00">ast_bridge_custom_play_fn</a>&#160;</td>
          <td class="paramname"><em>custom_play</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>playfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>moh_class</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Queue a bridge action play file frame onto the bridge channel. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Which channel to put the frame onto. </td></tr>
    <tr><td class="paramname">custom_play</td><td>Call this function to play the playfile. (NULL if normal sound file to play) </td></tr>
    <tr><td class="paramname">playfile</td><td>Sound filename to play. </td></tr>
    <tr><td class="paramname">moh_class</td><td>MOH class to request bridge peers to hear while file is played. NULL if no MOH. Empty if default MOH class.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This is intended to be called by bridge hooks.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01404">1404</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00938">bridge_channel_queue_action_data()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01378">payload_helper_playfile()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l02519">ast_bridge_add_channel()</a>, <a class="el" href="../../d9/dc5/parking__bridge_8c_source.html#l00342">bridge_parking_pull()</a>, <a class="el" href="../../d9/dc5/parking__bridge_8c_source.html#l00206">bridge_parking_push()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l01203">check_bridge_play_sound()</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00408">feature_automixmonitor()</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00220">feature_automonitor()</a>, <a class="el" href="../../d1/db7/parking__bridge__features_8c_source.html#l00105">parker_parked_call_message_response()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l01717">play_sound()</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00323">start_automixmonitor()</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00139">start_automonitor()</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00300">stop_automixmonitor()</a>, and <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00106">stop_automonitor()</a>.</p>
<div class="fragment"><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;{</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d32/bridge__channel_8c.html#ad1c82bb3775f693a3e2c8d4a092985b5">payload_helper_playfile</a>(<a class="code" href="../../d3/d32/bridge__channel_8c.html#a7169723f8af325431a959806a6b9ba96">bridge_channel_queue_action_data</a>,</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;      bridge_channel, custom_play, playfile, moh_class);</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_ad1c82bb3775f693a3e2c8d4a092985b5"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ad1c82bb3775f693a3e2c8d4a092985b5">payload_helper_playfile</a></div><div class="ttdeci">static int payload_helper_playfile(ast_bridge_channel_post_action_data post_it, struct ast_bridge_channel *bridge_channel, ast_bridge_custom_play_fn custom_play, const char *playfile, const char *moh_class)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01378">bridge_channel.c:1378</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a7169723f8af325431a959806a6b9ba96"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a7169723f8af325431a959806a6b9ba96">bridge_channel_queue_action_data</a></div><div class="ttdeci">static int bridge_channel_queue_action_data(struct ast_bridge_channel *bridge_channel, enum bridge_channel_action_type action, const void *data, size_t datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00938">bridge_channel.c:938</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac7787cec5827585d82ad62292744aeaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7787cec5827585d82ad62292744aeaf">&#9670;&nbsp;</a></span>ast_bridge_channel_queue_playfile_sync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_channel_queue_playfile_sync </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d41/bridge__channel_8h.html#afb66d5073210f00fef9adc41e16a5f00">ast_bridge_custom_play_fn</a>&#160;</td>
          <td class="paramname"><em>custom_play</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>playfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>moh_class</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Synchronously queue a bridge action play file frame onto the bridge channel. </p>
<dl class="section since"><dt>Since</dt><dd>12.2.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Which channel to put the frame onto. </td></tr>
    <tr><td class="paramname">custom_play</td><td>Call this function to play the playfile. (NULL if normal sound file to play) </td></tr>
    <tr><td class="paramname">playfile</td><td>Sound filename to play. </td></tr>
    <tr><td class="paramname">moh_class</td><td>MOH class to request bridge peers to hear while file is played. NULL if no MOH. Empty if default MOH class.</td></tr>
  </table>
  </dd>
</dl>
<p>This function will block until the queued frame has been destroyed. This will happen either if an error occurs or if the queued playback finishes.</p>
<dl class="section note"><dt>Note</dt><dd>No locks may be held when calling this function.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>The playback was successfully queued. </td></tr>
    <tr><td class="paramname">-1</td><td>The playback could not be queued. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01410">1410</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00966">bridge_channel_queue_action_data_sync()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01378">payload_helper_playfile()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/db7/parking__bridge__features_8c_source.html#l00105">parker_parked_call_message_response()</a>, and <a class="el" href="../../d7/de1/res__stasis__playback_8c_source.html#l00418">play_uri()</a>.</p>
<div class="fragment"><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;{</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d32/bridge__channel_8c.html#ad1c82bb3775f693a3e2c8d4a092985b5">payload_helper_playfile</a>(<a class="code" href="../../d3/d32/bridge__channel_8c.html#a88f8ccbfa86786e2a9726a90cba14a84">bridge_channel_queue_action_data_sync</a>,</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;      bridge_channel, custom_play, playfile, moh_class);</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_ad1c82bb3775f693a3e2c8d4a092985b5"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ad1c82bb3775f693a3e2c8d4a092985b5">payload_helper_playfile</a></div><div class="ttdeci">static int payload_helper_playfile(ast_bridge_channel_post_action_data post_it, struct ast_bridge_channel *bridge_channel, ast_bridge_custom_play_fn custom_play, const char *playfile, const char *moh_class)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01378">bridge_channel.c:1378</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a88f8ccbfa86786e2a9726a90cba14a84"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a88f8ccbfa86786e2a9726a90cba14a84">bridge_channel_queue_action_data_sync</a></div><div class="ttdeci">static int bridge_channel_queue_action_data_sync(struct ast_bridge_channel *bridge_channel, enum bridge_channel_action_type action, const void *data, size_t datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00966">bridge_channel.c:966</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac77801ebc652f818148d6da29869970c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac77801ebc652f818148d6da29869970c">&#9670;&nbsp;</a></span>ast_bridge_channel_restore_formats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_channel_restore_formats </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Restore the formats of a bridge channel's channel to how they were before bridge_channel_internal_join. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Channel to restore </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00337">337</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00856">ast_channel_readformat()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00860">ast_channel_writeformat()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00201">ast_format_cmp()</a>, <a class="el" href="../../d0/d0a/format_8h_source.html#l00038">AST_FORMAT_CMP_NOT_EQUAL</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00334">ast_format_get_name()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05849">ast_set_read_format()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05890">ast_set_write_format()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00137">ast_bridge_channel::read_format</a>, and <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00139">ast_bridge_channel::write_format</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02902">bridge_channel_internal_join()</a>, and <a class="el" href="../../d8/d66/bridge__holding_8c_source.html#l00297">participant_reaction_announcer_leave()</a>.</p>
<div class="fragment"><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;{</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a86f01027937b6cb7bd99d64117af52a8">read_format</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4e704d59963fad8db5a2d20f6aef944a">write_format</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;   <span class="comment">/* Restore original formats of the channel as they came in */</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>), bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a86f01027937b6cb7bd99d64117af52a8">read_format</a>) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a>) {</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Bridge is returning %p(%s) to read format %s\n&quot;</span>,</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;         bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;         <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a86f01027937b6cb7bd99d64117af52a8">read_format</a>));</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a9107a83365cbf327cc0d12cb0dbd28d8">ast_set_read_format</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a86f01027937b6cb7bd99d64117af52a8">read_format</a>)) {</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Bridge failed to return %p(%s) to read format %s\n&quot;</span>,</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a86f01027937b6cb7bd99d64117af52a8">read_format</a>));</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      }</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;   }</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>), bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4e704d59963fad8db5a2d20f6aef944a">write_format</a>) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a>) {</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Bridge is returning %p(%s) to write format %s\n&quot;</span>,</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;         bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;         <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4e704d59963fad8db5a2d20f6aef944a">write_format</a>));</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#abbdfb98077180544657b2d16c5d25f74">ast_set_write_format</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4e704d59963fad8db5a2d20f6aef944a">write_format</a>)) {</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Bridge failed to return %p(%s) to write format %s\n&quot;</span>,</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4e704d59963fad8db5a2d20f6aef944a">write_format</a>));</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      }</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;   }</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="format_8h_html_a082f0fca94b18ba466f6e28d3ccb2fc8"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a></div><div class="ttdeci">const char * ast_format_get_name(const struct ast_format *format)</div><div class="ttdoc">Get the name associated with a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00334">format.c:334</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="channel_8h_html_aaced431562223538a94e0e69cf94151a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a></div><div class="ttdeci">struct ast_format * ast_channel_readformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00856">channel_internal_api.c:856</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="format_8h_html_a738c58eca291b71de4422e95bff27400"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a></div><div class="ttdeci">enum ast_format_cmp_res ast_format_cmp(const struct ast_format *format1, const struct ast_format *format2)</div><div class="ttdoc">Compare two formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00201">format.c:201</a></div></div>
<div class="ttc" id="format_8h_html_a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0a/format_8h_source.html#l00038">format.h:38</a></div></div>
<div class="ttc" id="channel_8h_html_a9107a83365cbf327cc0d12cb0dbd28d8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9107a83365cbf327cc0d12cb0dbd28d8">ast_set_read_format</a></div><div class="ttdeci">int ast_set_read_format(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdoc">Sets read format on channel chan. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05849">channel.c:5849</a></div></div>
<div class="ttc" id="channel_8h_html_abbdfb98077180544657b2d16c5d25f74"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abbdfb98077180544657b2d16c5d25f74">ast_set_write_format</a></div><div class="ttdeci">int ast_set_write_format(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdoc">Sets write format on channel chan. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05890">channel.c:5890</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4e704d59963fad8db5a2d20f6aef944a"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4e704d59963fad8db5a2d20f6aef944a">ast_bridge_channel::write_format</a></div><div class="ttdeci">struct ast_format * write_format</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00139">bridge_channel.h:139</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a86f01027937b6cb7bd99d64117af52a8"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a86f01027937b6cb7bd99d64117af52a8">ast_bridge_channel::read_format</a></div><div class="ttdeci">struct ast_format * read_format</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00137">bridge_channel.h:137</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channel_8h_html_a1dc625bd14a7875b04bfe0c388858929"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a></div><div class="ttdeci">struct ast_format * ast_channel_writeformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00860">channel_internal_api.c:860</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a18a051cde2dd2ad809524473ef4ae5ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18a051cde2dd2ad809524473ef4ae5ef">&#9670;&nbsp;</a></span>ast_bridge_channel_run_app()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_channel_run_app </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>app_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>app_args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>moh_class</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run an application on the bridge channel. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Which channel to run the application on. </td></tr>
    <tr><td class="paramname">app_name</td><td>Dialplan application name. </td></tr>
    <tr><td class="paramname">app_args</td><td>Arguments for the application. (NULL tolerant) </td></tr>
    <tr><td class="paramname">moh_class</td><td>MOH class to request bridge peers to hear while application is running. NULL if no MOH. Empty if default MOH class.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This is intended to be called by bridge hooks.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01241">1241</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00605">ast_bridge_channel_kick()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01167">ast_bridge_channel_write_hold()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01193">ast_bridge_channel_write_unhold()</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00105">AST_CAUSE_NORMAL_CLEARING</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01211">run_app_helper()</a>, and <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01274">bridge_channel_run_app()</a>, and <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l00436">dynamic_dtmf_hook_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;{</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;   <span class="keywordflow">if</span> (moh_class) {</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#ad70b0a7df24a2aa9e284d8c785dcbd45">ast_bridge_channel_write_hold</a>(bridge_channel, moh_class);</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;   }</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d32/bridge__channel_8c.html#ae10c9159324fffc5b0e5ea02e3cd6973">run_app_helper</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../dd/d16/pbx__app_8c.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(app_args, <span class="stringliteral">&quot;&quot;</span>))) {</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      <span class="comment">/* Break the bridge if the app returns non-zero. */</span></div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a7e482bb2dcffd792205f114ddfa098fb">ast_bridge_channel_kick</a>(bridge_channel, <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>);</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;   }</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;   <span class="keywordflow">if</span> (moh_class) {</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a4be080559ea3fc87e50aa29a95af74f0">ast_bridge_channel_write_unhold</a>(bridge_channel);</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;   }</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_ae10c9159324fffc5b0e5ea02e3cd6973"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ae10c9159324fffc5b0e5ea02e3cd6973">run_app_helper</a></div><div class="ttdeci">static int run_app_helper(struct ast_channel *chan, const char *app_name, const char *app_args)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01211">bridge_channel.c:1211</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a4be080559ea3fc87e50aa29a95af74f0"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a4be080559ea3fc87e50aa29a95af74f0">ast_bridge_channel_write_unhold</a></div><div class="ttdeci">int ast_bridge_channel_write_unhold(struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Write an unhold frame into the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01193">bridge_channel.c:1193</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a7e482bb2dcffd792205f114ddfa098fb"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a7e482bb2dcffd792205f114ddfa098fb">ast_bridge_channel_kick</a></div><div class="ttdeci">void ast_bridge_channel_kick(struct ast_bridge_channel *bridge_channel, int cause)</div><div class="ttdoc">Kick the channel out of the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00605">bridge_channel.c:605</a></div></div>
<div class="ttc" id="causes_8h_html_af2235eb1c27925e4020ce286255d165f"><div class="ttname"><a href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a></div><div class="ttdeci">#define AST_CAUSE_NORMAL_CLEARING</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00105">causes.h:105</a></div></div>
<div class="ttc" id="pbx__app_8c_html_a6d3c140ecf1f736c6750d5a17e5bf958"><div class="ttname"><a href="../../dd/d16/pbx__app_8c.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a></div><div class="ttdeci">const char * app_name(struct ast_app *app)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00463">pbx_app.c:463</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_ad70b0a7df24a2aa9e284d8c785dcbd45"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ad70b0a7df24a2aa9e284d8c785dcbd45">ast_bridge_channel_write_hold</a></div><div class="ttdeci">int ast_bridge_channel_write_hold(struct ast_bridge_channel *bridge_channel, const char *moh_class)</div><div class="ttdoc">Write a hold frame into the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01167">bridge_channel.c:1167</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa464f1acd378d6a297a514007cec8d18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa464f1acd378d6a297a514007cec8d18">&#9670;&nbsp;</a></span>ast_bridge_channel_stream_map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_channel_stream_map </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maps a channel's stream topology to and from the bridge. </p>
<dl class="section since"><dt>Since</dt><dd>15.0.0</dd></dl>
<p>When a channel joins a bridge or its associated stream topology is updated, each stream in the topology needs to be mapped according to its media type to the bridge. Calling this method creates a mapping of each stream on the channel indexed to the bridge's supported media types and vice versa (i.e. bridge's media types indexed to channel streams).</p>
<p>The first channel to join the bridge creates the initial order for the bridge's media types (e.g. a one to one mapping is made). Subsequently added channels are mapped to that order adding more media types if/when the newly added channel has more streams and/or media types specified by the bridge.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Channel to map</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The bridge_channel's bridge must be locked prior to calling this function.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l03174">3174</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00231">ast_bridge_channel_lock</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00244">ast_bridge_channel_unlock</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01583">ast_channel_get_stream_topology()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00985">ast_stream_topology_map()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00100">ast_bridge_channel::bridge</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00412">ast_bridge::media_types</a>, <a class="el" href="../../d5/dca/structast__bridge__channel.html#affe0d3ce4e4266e3b4a4ea543fbc4d78">ast_bridge_channel::stream_map</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00190">ast_bridge_channel::to_bridge</a>, and <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00192">ast_bridge_channel::to_channel</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l00443">bridge_channel_complete_join()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02608">bridge_handle_trip()</a>, <a class="el" href="../../d1/d27/bridge__native__rtp_8c_source.html#l00920">native_rtp_stream_topology_changed()</a>, <a class="el" href="../../da/daf/bridge__simple_8c_source.html#l00204">simple_bridge_stream_topology_changed()</a>, and <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02463">softmix_bridge_stream_topology_changed()</a>.</p>
<div class="fragment"><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;{</div><div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a>(bridge_channel);</div><div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;   <a class="code" href="../../d8/d95/stream_8h.html#ad9b482e485bd9a3c1d2ab8acdd90eadc">ast_stream_topology_map</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ae35174b33cb8d9b4c1424448b21e50d2">ast_channel_get_stream_topology</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;      &amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a19fea4d448628d518b0043b2b17037dd">media_types</a>, &amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#affe0d3ce4e4266e3b4a4ea543fbc4d78">stream_map</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a18ea63e0b49a472021ff7848f4193dd5">to_bridge</a>,</div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;      &amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#affe0d3ce4e4266e3b4a4ea543fbc4d78">stream_map</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a8eed32758f5880ff8ec632c30525472b">to_channel</a>);</div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(bridge_channel);</div><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="channel_8h_html_ae35174b33cb8d9b4c1424448b21e50d2"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae35174b33cb8d9b4c1424448b21e50d2">ast_channel_get_stream_topology</a></div><div class="ttdeci">struct ast_stream_topology * ast_channel_get_stream_topology(const struct ast_channel *chan)</div><div class="ttdoc">Retrieve the topology of streams on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01583">channel_internal_api.c:1583</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_affe0d3ce4e4266e3b4a4ea543fbc4d78"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#affe0d3ce4e4266e3b4a4ea543fbc4d78">ast_bridge_channel::stream_map</a></div><div class="ttdeci">struct ast_bridge_channel::@236 stream_map</div></div>
<div class="ttc" id="structast__bridge__channel_html_a18ea63e0b49a472021ff7848f4193dd5"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a18ea63e0b49a472021ff7848f4193dd5">ast_bridge_channel::to_bridge</a></div><div class="ttdeci">struct ast_vector_int to_bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00190">bridge_channel.h:190</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_aa467e25606c2a21df25c61f139007782"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a></div><div class="ttdeci">#define ast_bridge_channel_lock(bridge_channel)</div><div class="ttdoc">Lock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00231">bridge_channel.h:231</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_a483cd10a0ddcca5814298bdb4f153878"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a></div><div class="ttdeci">#define ast_bridge_channel_unlock(bridge_channel)</div><div class="ttdoc">Unlock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00244">bridge_channel.h:244</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a8eed32758f5880ff8ec632c30525472b"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a8eed32758f5880ff8ec632c30525472b">ast_bridge_channel::to_channel</a></div><div class="ttdeci">struct ast_vector_int to_channel</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00192">bridge_channel.h:192</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="structast__bridge_html_a19fea4d448628d518b0043b2b17037dd"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a19fea4d448628d518b0043b2b17037dd">ast_bridge::media_types</a></div><div class="ttdeci">struct ast_vector_int media_types</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00412">bridge.h:412</a></div></div>
<div class="ttc" id="stream_8h_html_ad9b482e485bd9a3c1d2ab8acdd90eadc"><div class="ttname"><a href="../../d8/d95/stream_8h.html#ad9b482e485bd9a3c1d2ab8acdd90eadc">ast_stream_topology_map</a></div><div class="ttdeci">void ast_stream_topology_map(const struct ast_stream_topology *topology, struct ast_vector_int *types, struct ast_vector_int *v0, struct ast_vector_int *v1)</div><div class="ttdoc">Map a given topology&amp;#39;s streams to the given types. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00985">stream.c:985</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a609d9cf54ffe625a1a13cbce1df9492e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a609d9cf54ffe625a1a13cbce1df9492e">&#9670;&nbsp;</a></span>ast_bridge_channel_update_accountcodes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_channel_update_accountcodes </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>joining</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>leaving</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00596">596</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00529">bridge_channel_update_accountcodes_joining()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00576">bridge_channel_update_accountcodes_leaving()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l00688">bridge_basic_pull()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l00671">bridge_basic_push()</a>, <a class="el" href="../../d9/de0/stasis__bridge_8c_source.html#l00284">bridge_stasis_pull()</a>, and <a class="el" href="../../d9/de0/stasis__bridge_8c_source.html#l00192">bridge_stasis_push()</a>.</p>
<div class="fragment"><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;{</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;   <span class="keywordflow">if</span> (joining) {</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a34beb432a9c38ae2010e6ce9a9f548d6">bridge_channel_update_accountcodes_joining</a>(joining, leaving);</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#ac4b1c09de8a7b54ae9deb1dd6ac6d252">bridge_channel_update_accountcodes_leaving</a>(leaving);</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;   }</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_ac4b1c09de8a7b54ae9deb1dd6ac6d252"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ac4b1c09de8a7b54ae9deb1dd6ac6d252">bridge_channel_update_accountcodes_leaving</a></div><div class="ttdeci">static void bridge_channel_update_accountcodes_leaving(struct ast_bridge_channel *leaving)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00576">bridge_channel.c:576</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a34beb432a9c38ae2010e6ce9a9f548d6"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a34beb432a9c38ae2010e6ce9a9f548d6">bridge_channel_update_accountcodes_joining</a></div><div class="ttdeci">static void bridge_channel_update_accountcodes_joining(struct ast_bridge_channel *joining, struct ast_bridge_channel *swap)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00529">bridge_channel.c:529</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a27c80bee9eb9c5fa1a17c722115c5ac1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27c80bee9eb9c5fa1a17c722115c5ac1">&#9670;&nbsp;</a></span>ast_bridge_channel_update_linkedids()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_channel_update_linkedids </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>swap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00381">381</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01404">ast_channel_internal_copy_linkedid()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01387">ast_channel_internal_oldest_linkedid()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00100">ast_bridge_channel::bridge</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00371">ast_bridge::channels</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l00671">bridge_basic_push()</a>, and <a class="el" href="../../d9/de0/stasis__bridge_8c_source.html#l00192">bridge_stasis_push()</a>.</p>
<div class="fragment"><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;{</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *other;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *oldest_linkedid_chan = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a77542a877d8ed62331c5b3b6aa3e87a7">channels</a>, other, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      <span class="keywordflow">if</span> (other == swap) {</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      }</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      oldest_linkedid_chan = <a class="code" href="../../d5/d7b/channel_8h.html#a6a88ad6a505fc3e60b9e1198cbf2493c">ast_channel_internal_oldest_linkedid</a>(</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;         oldest_linkedid_chan, other-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;   }</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a0d764eaff90822aecd3387f6cfa608cf">ast_channel_internal_copy_linkedid</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, oldest_linkedid_chan);</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a77542a877d8ed62331c5b3b6aa3e87a7">channels</a>, other, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      <span class="keywordflow">if</span> (other == swap) {</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      }</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(other-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a0d764eaff90822aecd3387f6cfa608cf">ast_channel_internal_copy_linkedid</a>(other-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, oldest_linkedid_chan);</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(other-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;   }</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="channel_8h_html_a0d764eaff90822aecd3387f6cfa608cf"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a0d764eaff90822aecd3387f6cfa608cf">ast_channel_internal_copy_linkedid</a></div><div class="ttdeci">void ast_channel_internal_copy_linkedid(struct ast_channel *dest, struct ast_channel *source)</div><div class="ttdoc">Copy the full linkedid channel id structure from one channel to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01404">channel_internal_api.c:1404</a></div></div>
<div class="ttc" id="structast__bridge_html_a77542a877d8ed62331c5b3b6aa3e87a7"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a77542a877d8ed62331c5b3b6aa3e87a7">ast_bridge::channels</a></div><div class="ttdeci">struct ast_bridge_channels_list channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00371">bridge.h:371</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="structast__bridge__channel_html"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a></div><div class="ttdoc">Structure that contains information regarding a channel in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00084">bridge_channel.h:84</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="channel_8h_html_a6a88ad6a505fc3e60b9e1198cbf2493c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6a88ad6a505fc3e60b9e1198cbf2493c">ast_channel_internal_oldest_linkedid</a></div><div class="ttdeci">struct ast_channel * ast_channel_internal_oldest_linkedid(struct ast_channel *a, struct ast_channel *b)</div><div class="ttdoc">Determine which channel has an older linkedid. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01387">channel_internal_api.c:1387</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a04e98e9a5ac91b85c516b4d579a34449"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04e98e9a5ac91b85c516b4d579a34449">&#9670;&nbsp;</a></span>ast_bridge_channel_write_app()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_channel_write_app </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>app_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>app_args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>moh_class</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a bridge action run application frame into the bridge. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Which channel is putting the frame into the bridge </td></tr>
    <tr><td class="paramname">app_name</td><td>Dialplan application name. </td></tr>
    <tr><td class="paramname">app_args</td><td>Arguments for the application. (NULL or empty for no arguments) </td></tr>
    <tr><td class="paramname">moh_class</td><td>MOH class to request bridge peers to hear while application is running. NULL if no MOH. Empty if default MOH class.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This is intended to be called by bridge hooks.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01309">1309</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01010">bridge_channel_write_action_data()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01285">payload_helper_app()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>.</p>
<div class="fragment"><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;{</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d32/bridge__channel_8c.html#ad00550db31054aa051277a5d7dffd196">payload_helper_app</a>(<a class="code" href="../../d3/d32/bridge__channel_8c.html#ab5fa80b07664f5cad47c085e069d8671">bridge_channel_write_action_data</a>,</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;      bridge_channel, <a class="code" href="../../dd/d16/pbx__app_8c.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a>, app_args, moh_class);</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_ab5fa80b07664f5cad47c085e069d8671"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ab5fa80b07664f5cad47c085e069d8671">bridge_channel_write_action_data</a></div><div class="ttdeci">static int bridge_channel_write_action_data(struct ast_bridge_channel *bridge_channel, enum bridge_channel_action_type action, const void *data, size_t datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01010">bridge_channel.c:1010</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_ad00550db31054aa051277a5d7dffd196"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ad00550db31054aa051277a5d7dffd196">payload_helper_app</a></div><div class="ttdeci">static int payload_helper_app(ast_bridge_channel_post_action_data post_it, struct ast_bridge_channel *bridge_channel, const char *app_name, const char *app_args, const char *moh_class)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01285">bridge_channel.c:1285</a></div></div>
<div class="ttc" id="pbx__app_8c_html_a6d3c140ecf1f736c6750d5a17e5bf958"><div class="ttname"><a href="../../dd/d16/pbx__app_8c.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a></div><div class="ttdeci">const char * app_name(struct ast_app *app)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00463">pbx_app.c:463</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae014c66309327185b609d7e3ccf21af5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae014c66309327185b609d7e3ccf21af5">&#9670;&nbsp;</a></span>ast_bridge_channel_write_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_channel_write_callback </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../de/d41/bridge__channel_8h.html#a411218cf4d743baa73c2def8f024cb23">ast_bridge_channel_custom_callback_option</a>&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d41/bridge__channel_8h.html#a7c65814e807e654cd23c9d952e23b69a">ast_bridge_custom_callback_fn</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>payload_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a bridge action custom callback frame into the bridge. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Which channel is putting the frame into the bridge </td></tr>
    <tr><td class="paramname">flags</td><td>Custom callback option flags. </td></tr>
    <tr><td class="paramname">callback</td><td>Custom callback run on a bridge channel. </td></tr>
    <tr><td class="paramname">payload</td><td>Data to pass to the callback. (NULL if none). </td></tr>
    <tr><td class="paramname">payload_size</td><td>Size of the payload if payload is non-NULL. A number otherwise.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The payload MUST NOT have any resources that need to be freed.</dd>
<dd>
This is intended to be called by bridge hooks.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01484">1484</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01010">bridge_channel_write_action_data()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01457">payload_helper_cb()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01034">agent_connect_caller()</a>, and <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l00476">dynamic_dtmf_hook_trip()</a>.</p>
<div class="fragment"><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;{</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d32/bridge__channel_8c.html#afee5c64c70dc8139d5b8eed7a33e1c85">payload_helper_cb</a>(<a class="code" href="../../d3/d32/bridge__channel_8c.html#ab5fa80b07664f5cad47c085e069d8671">bridge_channel_write_action_data</a>,</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;      bridge_channel, flags, callback, payload, payload_size);</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_ab5fa80b07664f5cad47c085e069d8671"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ab5fa80b07664f5cad47c085e069d8671">bridge_channel_write_action_data</a></div><div class="ttdeci">static int bridge_channel_write_action_data(struct ast_bridge_channel *bridge_channel, enum bridge_channel_action_type action, const void *data, size_t datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01010">bridge_channel.c:1010</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_afee5c64c70dc8139d5b8eed7a33e1c85"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#afee5c64c70dc8139d5b8eed7a33e1c85">payload_helper_cb</a></div><div class="ttdeci">static int payload_helper_cb(ast_bridge_channel_post_action_data post_it, struct ast_bridge_channel *bridge_channel, enum ast_bridge_channel_custom_callback_option flags, ast_bridge_custom_callback_fn callback, const void *payload, size_t payload_size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01457">bridge_channel.c:1457</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9d7ca6b64c5bd875d4f16e8aef443497"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d7ca6b64c5bd875d4f16e8aef443497">&#9670;&nbsp;</a></span>ast_bridge_channel_write_control_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_channel_write_control_data </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390">ast_control_frame_type</a>&#160;</td>
          <td class="paramname"><em>control</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>datalen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a control frame into the bridge with data. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Which channel is putting the frame into the bridge. </td></tr>
    <tr><td class="paramname">control</td><td>Type of control frame. </td></tr>
    <tr><td class="paramname">data</td><td>Frame payload data to pass. </td></tr>
    <tr><td class="paramname">datalen</td><td>Frame payload data length to pass.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01155">1155</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">AST_FRAME_CONTROL</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00650">bridge_channel_write_frame()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01034">agent_connect_caller()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01167">ast_bridge_channel_write_hold()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01193">ast_bridge_channel_write_unhold()</a>, and <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l01814">ringing()</a>.</p>
<div class="fragment"><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;{</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> frame = {</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;      .<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>,</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;      .subclass.integer = control,</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;      .datalen = <a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>,</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;      .data.ptr = (<span class="keywordtype">void</span> *) <a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>,</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;   };</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d32/bridge__channel_8c.html#aa2de5bc97f8dffac7f5f56f3f6d107f4">bridge_channel_write_frame</a>(bridge_channel, &amp;frame);</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_aa2de5bc97f8dffac7f5f56f3f6d107f4"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#aa2de5bc97f8dffac7f5f56f3f6d107f4">bridge_channel_write_frame</a></div><div class="ttdeci">static int bridge_channel_write_frame(struct ast_bridge_channel *bridge_channel, struct ast_frame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00650">bridge_channel.c:650</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">include/asterisk/frame.h:105</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad70b0a7df24a2aa9e284d8c785dcbd45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad70b0a7df24a2aa9e284d8c785dcbd45">&#9670;&nbsp;</a></span>ast_bridge_channel_write_hold()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_channel_write_hold </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>moh_class</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a hold frame into the bridge. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Which channel is putting the hold into the bridge. </td></tr>
    <tr><td class="paramname">moh_class</td><td>The suggested music class for the other end to use.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01167">1167</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01155">ast_bridge_channel_write_control_data()</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#ga624c4bd0bf97a8a1a9e335cb26996f97">ast_channel_hold_type()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l01120">ast_channel_publish_cached_blob()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00293">AST_CONTROL_HOLD</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00591">ast_json_pack()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00073">ast_json_unref()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01321">ast_bridge_channel_playfile()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01241">ast_bridge_channel_run_app()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l03295">feature_attended_transfer()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l03472">feature_blind_transfer()</a>, and <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l01772">hold()</a>.</p>
<div class="fragment"><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;{</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *blob;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;   <span class="keywordtype">size_t</span> datalen;</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(moh_class)) {</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;      datalen = strlen(moh_class) + 1;</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;      blob = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: s}&quot;</span>,</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;         <span class="stringliteral">&quot;musicclass&quot;</span>, moh_class);</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;      moh_class = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;      datalen = 0;</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;      blob = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;   }</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga565fc39c360b014dd5d4054fa72bbae8">ast_channel_publish_cached_blob</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga624c4bd0bf97a8a1a9e335cb26996f97">ast_channel_hold_type</a>(), blob);</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;   res = <a class="code" href="../../d3/d32/bridge__channel_8c.html#a9d7ca6b64c5bd875d4f16e8aef443497">ast_bridge_channel_write_control_data</a>(bridge_channel, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5">AST_CONTROL_HOLD</a>,</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;      moh_class, datalen);</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;   <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(blob);</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;}</div><div class="ttc" id="group__StasisTopicsAndMessages_html_ga624c4bd0bf97a8a1a9e335cb26996f97"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga624c4bd0bf97a8a1a9e335cb26996f97">ast_channel_hold_type</a></div><div class="ttdeci">struct stasis_message_type * ast_channel_hold_type(void)</div><div class="ttdoc">Message type for when a channel is placed on hold. </div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5">AST_CONTROL_HOLD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00293">include/asterisk/frame.h:293</a></div></div>
<div class="ttc" id="json_8h_html_a99715667e822b2ad409b34ca041e535d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a></div><div class="ttdeci">struct ast_json * ast_json_pack(char const *format,...)</div><div class="ttdoc">Helper for creating complex JSON values. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00591">json.c:591</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga565fc39c360b014dd5d4054fa72bbae8"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga565fc39c360b014dd5d4054fa72bbae8">ast_channel_publish_cached_blob</a></div><div class="ttdeci">void ast_channel_publish_cached_blob(struct ast_channel *chan, struct stasis_message_type *type, struct ast_json *blob)</div><div class="ttdoc">Publish a channel blob message using the latest snapshot from the cache. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01120">stasis_channels.c:1120</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a9d7ca6b64c5bd875d4f16e8aef443497"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a9d7ca6b64c5bd875d4f16e8aef443497">ast_bridge_channel_write_control_data</a></div><div class="ttdeci">int ast_bridge_channel_write_control_data(struct ast_bridge_channel *bridge_channel, enum ast_control_frame_type control, const void *data, size_t datalen)</div><div class="ttdoc">Write a control frame into the bridge with data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01155">bridge_channel.c:1155</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af9a368f3ce4811e8ca53ef51d6cd69f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9a368f3ce4811e8ca53ef51d6cd69f9">&#9670;&nbsp;</a></span>ast_bridge_channel_write_park()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_channel_write_park </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>parkee_uuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>parker_uuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>app_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Have a bridge channel park a channel in the bridge. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Bridge channel performing the parking </td></tr>
    <tr><td class="paramname">parkee_uuid</td><td>Unique id of the channel we want to park </td></tr>
    <tr><td class="paramname">parker_uuid</td><td>Unique id of the channel parking the call </td></tr>
    <tr><td class="paramname"><a class="el" href="../../da/d37/structapp__data.html">app_data</a></td><td>string indicating data used for park application (NULL allowed)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This is intended to be called by bridge hooks.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01555">1555</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01010">bridge_channel_write_action_data()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01531">payload_helper_park()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00473">manager_park_bridged()</a>, and <a class="el" href="../../d1/db7/parking__bridge__features_8c_source.html#l00336">parking_blind_transfer_park()</a>.</p>
<div class="fragment"><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;{</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d32/bridge__channel_8c.html#aededbd6efeb3d8f8fe8e531c674e5eac">payload_helper_park</a>(<a class="code" href="../../d3/d32/bridge__channel_8c.html#ab5fa80b07664f5cad47c085e069d8671">bridge_channel_write_action_data</a>,</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;      bridge_channel, parkee_uuid, parker_uuid, <a class="code" href="../../da/d37/structapp__data.html">app_data</a>);</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_ab5fa80b07664f5cad47c085e069d8671"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ab5fa80b07664f5cad47c085e069d8671">bridge_channel_write_action_data</a></div><div class="ttdeci">static int bridge_channel_write_action_data(struct ast_bridge_channel *bridge_channel, enum bridge_channel_action_type action, const void *data, size_t datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01010">bridge_channel.c:1010</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_aededbd6efeb3d8f8fe8e531c674e5eac"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#aededbd6efeb3d8f8fe8e531c674e5eac">payload_helper_park</a></div><div class="ttdeci">static int payload_helper_park(ast_bridge_channel_post_action_data post_it, struct ast_bridge_channel *bridge_channel, const char *parkee_uuid, const char *parker_uuid, const char *app_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01531">bridge_channel.c:1531</a></div></div>
<div class="ttc" id="structapp__data_html"><div class="ttname"><a href="../../da/d37/structapp__data.html">app_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d77/test__res__stasis_8c_source.html#l00062">test_res_stasis.c:62</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad30f159c66c054fd95a739c087a6c5e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad30f159c66c054fd95a739c087a6c5e9">&#9670;&nbsp;</a></span>ast_bridge_channel_write_playfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_channel_write_playfile </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d41/bridge__channel_8h.html#afb66d5073210f00fef9adc41e16a5f00">ast_bridge_custom_play_fn</a>&#160;</td>
          <td class="paramname"><em>custom_play</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>playfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>moh_class</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a bridge action play file frame into the bridge. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Which channel is putting the frame into the bridge </td></tr>
    <tr><td class="paramname">custom_play</td><td>Call this function to play the playfile. (NULL if normal sound file to play) </td></tr>
    <tr><td class="paramname">playfile</td><td>Sound filename to play. </td></tr>
    <tr><td class="paramname">moh_class</td><td>MOH class to request bridge peers to hear while file is played. NULL if no MOH. Empty if default MOH class.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This is intended to be called by bridge hooks.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01398">1398</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01010">bridge_channel_write_action_data()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01378">payload_helper_playfile()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l04729">ast_bridge_transfer_attended()</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00323">start_automixmonitor()</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00139">start_automonitor()</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00300">stop_automixmonitor()</a>, and <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00106">stop_automonitor()</a>.</p>
<div class="fragment"><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;{</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d32/bridge__channel_8c.html#ad1c82bb3775f693a3e2c8d4a092985b5">payload_helper_playfile</a>(<a class="code" href="../../d3/d32/bridge__channel_8c.html#ab5fa80b07664f5cad47c085e069d8671">bridge_channel_write_action_data</a>,</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;      bridge_channel, custom_play, playfile, moh_class);</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_ab5fa80b07664f5cad47c085e069d8671"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ab5fa80b07664f5cad47c085e069d8671">bridge_channel_write_action_data</a></div><div class="ttdeci">static int bridge_channel_write_action_data(struct ast_bridge_channel *bridge_channel, enum bridge_channel_action_type action, const void *data, size_t datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01010">bridge_channel.c:1010</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_ad1c82bb3775f693a3e2c8d4a092985b5"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ad1c82bb3775f693a3e2c8d4a092985b5">payload_helper_playfile</a></div><div class="ttdeci">static int payload_helper_playfile(ast_bridge_channel_post_action_data post_it, struct ast_bridge_channel *bridge_channel, ast_bridge_custom_play_fn custom_play, const char *playfile, const char *moh_class)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01378">bridge_channel.c:1378</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4be080559ea3fc87e50aa29a95af74f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4be080559ea3fc87e50aa29a95af74f0">&#9670;&nbsp;</a></span>ast_bridge_channel_write_unhold()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_channel_write_unhold </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write an unhold frame into the bridge. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Which channel is putting the hold into the bridge.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01193">1193</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00211">ast_bridge_channel_get_chan()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01155">ast_bridge_channel_write_control_data()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l01120">ast_channel_publish_cached_blob()</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#gacdff76704ce4ee5c18b5656592886c78">ast_channel_unhold_type()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00294">AST_CONTROL_UNHOLD</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01321">ast_bridge_channel_playfile()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01241">ast_bridge_channel_run_app()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l04729">ast_bridge_transfer_attended()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l04477">ast_bridge_transfer_blind()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l03295">feature_attended_transfer()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l03472">feature_blind_transfer()</a>, and <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l01793">unhold()</a>.</p>
<div class="fragment"><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;{</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan = <a class="code" href="../../d3/d32/bridge__channel_8c.html#ae04b08c94e2d24a179c9b8e0842ccc57">ast_bridge_channel_get_chan</a>(bridge_channel);</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;   }</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga565fc39c360b014dd5d4054fa72bbae8">ast_channel_publish_cached_blob</a>(chan, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gacdff76704ce4ee5c18b5656592886c78">ast_channel_unhold_type</a>(), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(chan, -1);</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d32/bridge__channel_8c.html#a9d7ca6b64c5bd875d4f16e8aef443497">ast_bridge_channel_write_control_data</a>(bridge_channel, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e">AST_CONTROL_UNHOLD</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gacdff76704ce4ee5c18b5656592886c78"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gacdff76704ce4ee5c18b5656592886c78">ast_channel_unhold_type</a></div><div class="ttdeci">struct stasis_message_type * ast_channel_unhold_type(void)</div><div class="ttdoc">Message type for when a channel is removed from hold. </div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga565fc39c360b014dd5d4054fa72bbae8"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga565fc39c360b014dd5d4054fa72bbae8">ast_channel_publish_cached_blob</a></div><div class="ttdeci">void ast_channel_publish_cached_blob(struct ast_channel *chan, struct stasis_message_type *type, struct ast_json *blob)</div><div class="ttdoc">Publish a channel blob message using the latest snapshot from the cache. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01120">stasis_channels.c:1120</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_ae04b08c94e2d24a179c9b8e0842ccc57"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ae04b08c94e2d24a179c9b8e0842ccc57">ast_bridge_channel_get_chan</a></div><div class="ttdeci">struct ast_channel * ast_bridge_channel_get_chan(struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Get a ref to the bridge_channel&amp;#39;s ast_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00211">bridge_channel.c:211</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a9d7ca6b64c5bd875d4f16e8aef443497"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a9d7ca6b64c5bd875d4f16e8aef443497">ast_bridge_channel_write_control_data</a></div><div class="ttdeci">int ast_bridge_channel_write_control_data(struct ast_bridge_channel *bridge_channel, enum ast_control_frame_type control, const void *data, size_t datalen)</div><div class="ttdoc">Write a control frame into the bridge with data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01155">bridge_channel.c:1155</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e">AST_CONTROL_UNHOLD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00294">include/asterisk/frame.h:294</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aef93dd372b07227b9aa10c530d5039f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef93dd372b07227b9aa10c530d5039f8">&#9670;&nbsp;</a></span>ast_bridge_queue_everyone_else()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_queue_everyone_else </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>bridge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>frame</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Queue the given frame to everyone else. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge</td><td>What bridge to distribute frame. </td></tr>
    <tr><td class="paramname">bridge_channel</td><td>Channel to optionally not pass frame to. (NULL to pass to everyone) </td></tr>
    <tr><td class="paramname">frame</td><td>Frame to pass.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This is intended to be called by bridge hooks and bridge technologies.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Frame written to at least one channel. </td></tr>
    <tr><td class="paramname">-1</td><td>Frame written to no channels. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01122">1122</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01044">ast_bridge_channel_queue_frame()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00107">AST_FRAME_NULL</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00371">ast_bridge::channels</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l01844">bridge_hold()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l01831">bridge_ringing()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l01857">bridge_unhold()</a>, <a class="el" href="../../d8/d66/bridge__holding_8c_source.html#l00331">holding_bridge_write()</a>, <a class="el" href="../../d9/da5/bridge__native__dahdi_8c_source.html#l00819">native_bridge_write()</a>, <a class="el" href="../../d1/d27/bridge__native__rtp_8c_source.html#l01063">native_rtp_bridge_write()</a>, <a class="el" href="../../da/daf/bridge__simple_8c_source.html#l00169">simple_bridge_write()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l01320">softmix_bridge_write()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l01233">softmix_bridge_write_control()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l01197">softmix_bridge_write_text()</a>, and <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00889">softmix_bridge_write_video()</a>.</p>
<div class="fragment"><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;{</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *cur;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;   <span class="keywordtype">int</span> not_written = -1;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;   <span class="keywordflow">if</span> (frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a29ff71f9d5c7927906ebd437fe372056">AST_FRAME_NULL</a>) {</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;      <span class="comment">/* &quot;Accept&quot; the frame and discard it. */</span></div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;   }</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a77542a877d8ed62331c5b3b6aa3e87a7">channels</a>, cur, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;      <span class="keywordflow">if</span> (cur == bridge_channel) {</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;      }</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d32/bridge__channel_8c.html#aba51942a86849ae41c5397d596cb8ed1">ast_bridge_channel_queue_frame</a>(cur, frame)) {</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;         not_written = 0;</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;      }</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;   }</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;   <span class="keywordflow">return</span> not_written;</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_aba51942a86849ae41c5397d596cb8ed1"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#aba51942a86849ae41c5397d596cb8ed1">ast_bridge_channel_queue_frame</a></div><div class="ttdeci">int ast_bridge_channel_queue_frame(struct ast_bridge_channel *bridge_channel, struct ast_frame *fr)</div><div class="ttdoc">Write a frame to the specified bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01044">bridge_channel.c:1044</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a29ff71f9d5c7927906ebd437fe372056"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a29ff71f9d5c7927906ebd437fe372056">AST_FRAME_NULL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00107">include/asterisk/frame.h:107</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structast__bridge_html_a77542a877d8ed62331c5b3b6aa3e87a7"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a77542a877d8ed62331c5b3b6aa3e87a7">ast_bridge::channels</a></div><div class="ttdeci">struct ast_bridge_channels_list channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00371">bridge.h:371</a></div></div>
<div class="ttc" id="structast__bridge__channel_html"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a></div><div class="ttdoc">Structure that contains information regarding a channel in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00084">bridge_channel.h:84</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a657dfbcaa8a7097be8528d6a659d3d61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a657dfbcaa8a7097be8528d6a659d3d61">&#9670;&nbsp;</a></span>bridge_channel_attended_transfer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_channel_attended_transfer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>target_chan_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02027">2027</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01943">after_bridge_move_channel()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02003">after_bridge_move_channel_fail()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00605">ast_bridge_channel_kick()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00231">ast_bridge_channel_lock</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00244">ast_bridge_channel_unlock</a>, <a class="el" href="../../df/db6/bridge__after_8c_source.html#l00259">ast_bridge_set_after_callback()</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00105">AST_CAUSE_NORMAL_CLEARING</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01454">ast_channel_get_by_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02970">ast_channel_ref</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02476">ast_softhangup()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01122">AST_SOFTHANGUP_DEV</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02067">bridge_channel_handle_action()</a>.</p>
<div class="fragment"><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;{</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, chan_target, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, chan_bridged, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;   chan_target = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(target_chan_name);</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;   <span class="keywordflow">if</span> (!chan_target) {</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;      <span class="comment">/* Dang, it disappeared somehow */</span></div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a7e482bb2dcffd792205f114ddfa098fb">ast_bridge_channel_kick</a>(bridge_channel, <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>);</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;   }</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a>(bridge_channel);</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;   chan_bridged = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>;</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(chan_bridged != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(chan_bridged, +1);</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(bridge_channel);</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d85/bridge__after_8h.html#a866e05c6b083030e9757cfb37814e671">ast_bridge_set_after_callback</a>(chan_bridged, <a class="code" href="../../d3/d32/bridge__channel_8c.html#abe7719346a880cfeec2c2cda0cb9a831">after_bridge_move_channel</a>,</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a6921b94f3fb5dbaecacfba765d677793">after_bridge_move_channel_fail</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a>(chan_target))) {</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ac2d6607253f7e8b272d4e845474eaa9b">ast_softhangup</a>(chan_target, <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2e185ce313026e13ed90ae3a319c9cb7">AST_SOFTHANGUP_DEV</a>);</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;      <span class="comment">/* Release the ref we tried to pass to ast_bridge_set_after_callback(). */</span></div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan_target);</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;   }</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#a7e482bb2dcffd792205f114ddfa098fb">ast_bridge_channel_kick</a>(bridge_channel, <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>);</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="channel_8h_html_a9e9505a91a84992d04ba4e85217fb4e4a2e185ce313026e13ed90ae3a319c9cb7"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2e185ce313026e13ed90ae3a319c9cb7">AST_SOFTHANGUP_DEV</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01122">channel.h:1122</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="bridge__after_8h_html_a866e05c6b083030e9757cfb37814e671"><div class="ttname"><a href="../../d8/d85/bridge__after_8h.html#a866e05c6b083030e9757cfb37814e671">ast_bridge_set_after_callback</a></div><div class="ttdeci">int ast_bridge_set_after_callback(struct ast_channel *chan, ast_bridge_after_cb callback, ast_bridge_after_cb_failed failed, void *data)</div><div class="ttdoc">Setup an after bridge callback for when the channel leaves the bridging system. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/db6/bridge__after_8c_source.html#l00259">bridge_after.c:259</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_aa467e25606c2a21df25c61f139007782"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a></div><div class="ttdeci">#define ast_bridge_channel_lock(bridge_channel)</div><div class="ttdoc">Lock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00231">bridge_channel.h:231</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a7e482bb2dcffd792205f114ddfa098fb"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a7e482bb2dcffd792205f114ddfa098fb">ast_bridge_channel_kick</a></div><div class="ttdeci">void ast_bridge_channel_kick(struct ast_bridge_channel *bridge_channel, int cause)</div><div class="ttdoc">Kick the channel out of the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00605">bridge_channel.c:605</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="causes_8h_html_af2235eb1c27925e4020ce286255d165f"><div class="ttname"><a href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a></div><div class="ttdeci">#define AST_CAUSE_NORMAL_CLEARING</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00105">causes.h:105</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="channel_8h_html_ac2d6607253f7e8b272d4e845474eaa9b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2d6607253f7e8b272d4e845474eaa9b">ast_softhangup</a></div><div class="ttdeci">int ast_softhangup(struct ast_channel *chan, int reason)</div><div class="ttdoc">Softly hangup up a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02476">channel.c:2476</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_a483cd10a0ddcca5814298bdb4f153878"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a></div><div class="ttdeci">#define ast_bridge_channel_unlock(bridge_channel)</div><div class="ttdoc">Unlock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00244">bridge_channel.h:244</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a6921b94f3fb5dbaecacfba765d677793"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a6921b94f3fb5dbaecacfba765d677793">after_bridge_move_channel_fail</a></div><div class="ttdeci">static void after_bridge_move_channel_fail(enum ast_bridge_after_cb_reason reason, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l02003">bridge_channel.c:2003</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_abe7719346a880cfeec2c2cda0cb9a831"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#abe7719346a880cfeec2c2cda0cb9a831">after_bridge_move_channel</a></div><div class="ttdeci">static void after_bridge_move_channel(struct ast_channel *chan_bridged, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01943">bridge_channel.c:1943</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="channel_8h_html_a6801c703e767d6f760c54c8b86a30024"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a></div><div class="ttdeci">#define ast_channel_ref(c)</div><div class="ttdoc">Increase channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02970">channel.h:2970</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="channel_8h_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa6551ce3945d265e4982897e6c8c3f28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6551ce3945d265e4982897e6c8c3f28">&#9670;&nbsp;</a></span>bridge_channel_blind_transfer()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_channel_blind_transfer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/de8/structblind__transfer__data.html">blind_transfer_data</a> *&#160;</td>
          <td class="paramname"><em>blind_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02016">2016</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d94/pbx_8c_source.html#l07011">ast_async_goto()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00605">ast_bridge_channel_kick()</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00105">AST_CAUSE_NORMAL_CLEARING</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01936">blind_transfer_data::context</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01935">blind_transfer_data::exten</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02067">bridge_channel_handle_action()</a>.</p>
<div class="fragment"><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;{</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#ae0ba2eb966a9e3376de61d30513f7302">ast_async_goto</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, blind_data-&gt;<a class="code" href="../../d1/de8/structblind__transfer__data.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, blind_data-&gt;<a class="code" href="../../d1/de8/structblind__transfer__data.html#a78d4847658b695383d849efd12399b38">exten</a>, 1);</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#a7e482bb2dcffd792205f114ddfa098fb">ast_bridge_channel_kick</a>(bridge_channel, <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>);</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_a7e482bb2dcffd792205f114ddfa098fb"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a7e482bb2dcffd792205f114ddfa098fb">ast_bridge_channel_kick</a></div><div class="ttdeci">void ast_bridge_channel_kick(struct ast_bridge_channel *bridge_channel, int cause)</div><div class="ttdoc">Kick the channel out of the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00605">bridge_channel.c:605</a></div></div>
<div class="ttc" id="causes_8h_html_af2235eb1c27925e4020ce286255d165f"><div class="ttname"><a href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a></div><div class="ttdeci">#define AST_CAUSE_NORMAL_CLEARING</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00105">causes.h:105</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="structblind__transfer__data_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../d1/de8/structblind__transfer__data.html#a78d4847658b695383d849efd12399b38">blind_transfer_data::exten</a></div><div class="ttdeci">char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01935">bridge_channel.c:1935</a></div></div>
<div class="ttc" id="pbx_8h_html_ae0ba2eb966a9e3376de61d30513f7302"><div class="ttname"><a href="../../db/de0/pbx_8h.html#ae0ba2eb966a9e3376de61d30513f7302">ast_async_goto</a></div><div class="ttdeci">int ast_async_goto(struct ast_channel *chan, const char *context, const char *exten, int priority)</div><div class="ttdoc">Set the channel to next execute the specified dialplan location. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l07011">pbx.c:7011</a></div></div>
<div class="ttc" id="structblind__transfer__data_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../d1/de8/structblind__transfer__data.html#ac25ea00ee3f082df06e0cf468cbde240">blind_transfer_data::context</a></div><div class="ttdeci">char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01936">bridge_channel.c:1936</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a31a39e9eb864c0dc9dd9c2a8e5c84098"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31a39e9eb864c0dc9dd9c2a8e5c84098">&#9670;&nbsp;</a></span>bridge_channel_cancel_owed_events()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_channel_cancel_owed_events </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00786">786</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00166">ast_bridge_channel::dtmf_digit</a>, <a class="el" href="../../d5/dca/structast__bridge__channel.html#a9647f1ba88c8b4de19adb38a2cf3e0d0">ast_bridge_channel::owed</a>, and <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00168">ast_bridge_channel::t38_terminate</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02235">bridge_channel_internal_push_full()</a>.</p>
<div class="fragment"><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;{</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;   bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a9647f1ba88c8b4de19adb38a2cf3e0d0">owed</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a5ec177afb70a8826ea2552ad82300113">dtmf_digit</a> = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;   bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a9647f1ba88c8b4de19adb38a2cf3e0d0">owed</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a7b63feab852b0837d17cc08ced22335d">t38_terminate</a> = 0;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;}</div><div class="ttc" id="structast__bridge__channel_html_a5ec177afb70a8826ea2552ad82300113"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a5ec177afb70a8826ea2552ad82300113">ast_bridge_channel::dtmf_digit</a></div><div class="ttdeci">char dtmf_digit</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00166">bridge_channel.h:166</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a7b63feab852b0837d17cc08ced22335d"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a7b63feab852b0837d17cc08ced22335d">ast_bridge_channel::t38_terminate</a></div><div class="ttdeci">char t38_terminate</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00168">bridge_channel.h:168</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a9647f1ba88c8b4de19adb38a2cf3e0d0"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a9647f1ba88c8b4de19adb38a2cf3e0d0">ast_bridge_channel::owed</a></div><div class="ttdeci">struct ast_bridge_channel::@232 owed</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7b5aeb4739651650c4d2cb568073d608"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b5aeb4739651650c4d2cb568073d608">&#9670;&nbsp;</a></span>bridge_channel_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_channel_destroy </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l03117">3117</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00151">ast_bridge_channel::alert_pipe</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d6/d7a/alertpipe_8c_source.html#l00079">ast_alertpipe_close()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00200">ast_cond_destroy</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">ast_frfree</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00174">AST_VECTOR_FREE</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00100">ast_bridge_channel::bridge</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01023">bridge_frame_free()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00141">ast_bridge_channel::callid</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00087">ast_bridge_channel::cond</a>, <a class="el" href="../../d5/dca/structast__bridge__channel.html#a57dec1f75e1bad5c281b1bf3cb1119cc">ast_bridge_channel::deferred_queue</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00137">ast_bridge_channel::read_format</a>, <a class="el" href="../../d5/dca/structast__bridge__channel.html#affe0d3ce4e4266e3b4a4ea543fbc4d78">ast_bridge_channel::stream_map</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00190">ast_bridge_channel::to_bridge</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00192">ast_bridge_channel::to_channel</a>, <a class="el" href="../../d5/dca/structast__bridge__channel.html#a7e580256fbadf0a28137681296f9b6b8">ast_bridge_channel::wr_queue</a>, and <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00139">ast_bridge_channel::write_format</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l03151">bridge_channel_internal_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;{</div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel = obj;</div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *fr;</div><div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;</div><div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;   <span class="keywordflow">if</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a62f8995a6eac6c8a48205a6f3815d54b">callid</a>) {</div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;      bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a62f8995a6eac6c8a48205a6f3815d54b">callid</a> = 0;</div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;   }</div><div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;</div><div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;   <span class="keywordflow">if</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>) {</div><div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, -1);</div><div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;      bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;   }</div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;</div><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;   <span class="comment">/* Flush any unhandled wr_queue frames. */</span></div><div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;   <span class="keywordflow">while</span> ((fr = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a7e580256fbadf0a28137681296f9b6b8">wr_queue</a>, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>))) {</div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a3742c8c577dcc82edd8c4431a11a599e">bridge_frame_free</a>(fr);</div><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;   }</div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;   <a class="code" href="../../dc/d4d/alertpipe_8h.html#a2ccba8179d9e136fba008e801daf2c5f">ast_alertpipe_close</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a55935aecf1002b1dfa1324bc3799b67c">alert_pipe</a>);</div><div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;</div><div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;   <span class="comment">/* Flush any unhandled deferred_queue frames. */</span></div><div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;   <span class="keywordflow">while</span> ((fr = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a57dec1f75e1bad5c281b1bf3cb1119cc">deferred_queue</a>, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>))) {</div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;      <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(fr);</div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;   }</div><div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;</div><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a>(&amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>);</div><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;</div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4e704d59963fad8db5a2d20f6aef944a">write_format</a>);</div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a86f01027937b6cb7bd99d64117af52a8">read_format</a>);</div><div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;</div><div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(&amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#affe0d3ce4e4266e3b4a4ea543fbc4d78">stream_map</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a18ea63e0b49a472021ff7848f4193dd5">to_bridge</a>);</div><div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(&amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#affe0d3ce4e4266e3b4a4ea543fbc4d78">stream_map</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a8eed32758f5880ff8ec632c30525472b">to_channel</a>);</div><div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;}</div><div class="ttc" id="vector_8h_html_a66aaa4efda59c52384b03c38e781124d"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a></div><div class="ttdeci">#define AST_VECTOR_FREE(vec)</div><div class="ttdoc">Deallocates this vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00174">vector.h:174</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a7e580256fbadf0a28137681296f9b6b8"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a7e580256fbadf0a28137681296f9b6b8">ast_bridge_channel::wr_queue</a></div><div class="ttdeci">struct ast_bridge_channel::@230 wr_queue</div></div>
<div class="ttc" id="structast__bridge__channel_html_affe0d3ce4e4266e3b4a4ea543fbc4d78"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#affe0d3ce4e4266e3b4a4ea543fbc4d78">ast_bridge_channel::stream_map</a></div><div class="ttdeci">struct ast_bridge_channel::@236 stream_map</div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a18ea63e0b49a472021ff7848f4193dd5"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a18ea63e0b49a472021ff7848f4193dd5">ast_bridge_channel::to_bridge</a></div><div class="ttdeci">struct ast_vector_int to_bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00190">bridge_channel.h:190</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="alertpipe_8h_html_a2ccba8179d9e136fba008e801daf2c5f"><div class="ttname"><a href="../../dc/d4d/alertpipe_8h.html#a2ccba8179d9e136fba008e801daf2c5f">ast_alertpipe_close</a></div><div class="ttdeci">void ast_alertpipe_close(int alert_pipe[2])</div><div class="ttdoc">Close an alert pipe. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d7a/alertpipe_8c_source.html#l00079">alertpipe.c:79</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4e704d59963fad8db5a2d20f6aef944a"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4e704d59963fad8db5a2d20f6aef944a">ast_bridge_channel::write_format</a></div><div class="ttdeci">struct ast_format * write_format</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00139">bridge_channel.h:139</a></div></div>
<div class="ttc" id="structframe__list_html"><div class="ttname"><a href="../../d9/d42/structframe__list.html">frame_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00590">res_rtp_asterisk.c:590</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a8eed32758f5880ff8ec632c30525472b"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a8eed32758f5880ff8ec632c30525472b">ast_bridge_channel::to_channel</a></div><div class="ttdeci">struct ast_vector_int to_channel</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00192">bridge_channel.h:192</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a1c7181c39f99ee801943a0d0aa9872b9">ast_bridge_channel::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00087">bridge_channel.h:87</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a55935aecf1002b1dfa1324bc3799b67c"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a55935aecf1002b1dfa1324bc3799b67c">ast_bridge_channel::alert_pipe</a></div><div class="ttdeci">int alert_pipe[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00151">bridge_channel.h:151</a></div></div>
<div class="ttc" id="lock_8h_html_a1ea2f4040a736cddbecea48b30ffedfd"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a></div><div class="ttdeci">#define ast_cond_destroy(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00200">lock.h:200</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a86f01027937b6cb7bd99d64117af52a8"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a86f01027937b6cb7bd99d64117af52a8">ast_bridge_channel::read_format</a></div><div class="ttdeci">struct ast_format * read_format</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00137">bridge_channel.h:137</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a62f8995a6eac6c8a48205a6f3815d54b"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a62f8995a6eac6c8a48205a6f3815d54b">ast_bridge_channel::callid</a></div><div class="ttdeci">ast_callid callid</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00141">bridge_channel.h:141</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a57dec1f75e1bad5c281b1bf3cb1119cc"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a57dec1f75e1bad5c281b1bf3cb1119cc">ast_bridge_channel::deferred_queue</a></div><div class="ttdeci">struct ast_bridge_channel::@231 deferred_queue</div></div>
<div class="ttc" id="structast__bridge__channel_html"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a></div><div class="ttdoc">Structure that contains information regarding a channel in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00084">bridge_channel.h:84</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a6440d070425a2efe8e0aa71e8d9e47b7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a></div><div class="ttdeci">#define ast_frfree(fr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">include/asterisk/frame.h:556</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a3742c8c577dcc82edd8c4431a11a599e"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a3742c8c577dcc82edd8c4431a11a599e">bridge_frame_free</a></div><div class="ttdeci">static void bridge_frame_free(struct ast_frame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01023">bridge_channel.c:1023</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a97a6be0c1c4165d3a633cbf6d365d450"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97a6be0c1c4165d3a633cbf6d365d450">&#9670;&nbsp;</a></span>bridge_channel_dissolve_check()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_channel_dissolve_check </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02136">2136</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00063">AST_BRIDGE_CHANNEL_FLAG_DISSOLVE_HANGUP</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00314">ast_bridge_channel_leave_bridge()</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00039">AST_BRIDGE_FLAG_DISSOLVE_EMPTY</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00037">AST_BRIDGE_FLAG_DISSOLVE_HANGUP</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00427">ast_channel_hangupcause()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00420">AST_LIST_FIRST</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00100">ast_bridge_channel::bridge</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00064">BRIDGE_CHANNEL_STATE_END</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00066">BRIDGE_CHANNEL_STATE_END_NO_DISSOLVE</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l00319">bridge_dissolve()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00371">ast_bridge::channels</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00398">ast_bridge::dissolved</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00271">ast_bridge_features::feature_flags</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00377">ast_bridge::feature_flags</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00132">ast_bridge_channel::features</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00381">ast_bridge::num_channels</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00385">ast_bridge::num_lonely</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00089">ast_bridge_channel::state</a>, and <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00275">ast_bridge_features::usable</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02902">bridge_channel_internal_join()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02178">bridge_channel_internal_pull()</a>.</p>
<div class="fragment"><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;{</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>;</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;   <span class="keywordflow">if</span> (bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a9ea77c25c2c57ec45bc6dfdea1c1a228">dissolved</a>) {</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;   }</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;   <span class="keywordflow">if</span> (!bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a97e3bedeadf444995deb6fab68f57e21">num_channels</a></div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;      &amp;&amp; <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#af15c2e8b6df8ce0bf570af18aa890deb">feature_flags</a>, <a class="code" href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444a7e495fdd770a14a1a2166ad18a16d8ca">AST_BRIDGE_FLAG_DISSOLVE_EMPTY</a>)) {</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;      <span class="comment">/* Last channel leaving the bridge turns off the lights. */</span></div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;      <a class="code" href="../../d5/dde/bridge__internal_8h.html#a3dfc360c4ef5a43d854d75e9b94b58e1">bridge_dissolve</a>(bridge, <a class="code" href="../../d5/d7b/channel_8h.html#aa04afa262d7e1b211ee32d17c949a275">ast_channel_hangupcause</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;   }</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;   <span class="keywordflow">switch</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a871f4f1d537a1cd524ee8c28b623104f">state</a>) {</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326">BRIDGE_CHANNEL_STATE_END</a>:</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;      <span class="comment">/* Do we need to dissolve the bridge because this channel hung up? */</span></div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#af15c2e8b6df8ce0bf570af18aa890deb">feature_flags</a>, <a class="code" href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444aab11deff15a9ae22b58e49e9d6d53e16">AST_BRIDGE_FLAG_DISSOLVE_HANGUP</a>)</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;         || (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">features</a>-&gt;<a class="code" href="../../db/dba/structast__bridge__features.html#a080125973deec97104866dd31867e3ce">usable</a></div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;            &amp;&amp; <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">features</a>-&gt;<a class="code" href="../../db/dba/structast__bridge__features.html#af15c2e8b6df8ce0bf570af18aa890deb">feature_flags</a>,</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;               <a class="code" href="../../dc/d7a/bridge__features_8h.html#adb39f3c49f940cca855ef8ae3dfc5f77a88f541f13934e4f8ad5d88e31f694e2b">AST_BRIDGE_CHANNEL_FLAG_DISSOLVE_HANGUP</a>))) {</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;         <a class="code" href="../../d5/dde/bridge__internal_8h.html#a3dfc360c4ef5a43d854d75e9b94b58e1">bridge_dissolve</a>(bridge, <a class="code" href="../../d5/d7b/channel_8h.html#aa04afa262d7e1b211ee32d17c949a275">ast_channel_hangupcause</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;      }</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;   }</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;   <span class="keywordflow">if</span> (bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#adaedd59efa9e3a1bf9ef24db6771e0a2">num_lonely</a> &amp;&amp; bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#adaedd59efa9e3a1bf9ef24db6771e0a2">num_lonely</a> == bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a97e3bedeadf444995deb6fab68f57e21">num_channels</a>) {</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;<span class="comment">       * This will start a chain reaction where each channel leaving</span></div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;<span class="comment">       * enters this function and causes the next to leave as long as</span></div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;<span class="comment">       * there aren&#39;t non-lonely channels in the bridge.</span></div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a>(<a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a77542a877d8ed62331c5b3b6aa3e87a7">channels</a>),</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;         <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaa708398f920511beb8ea9df06bf16daac">BRIDGE_CHANNEL_STATE_END_NO_DISSOLVE</a>,</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#aa04afa262d7e1b211ee32d17c949a275">ast_channel_hangupcause</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;   }</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;}</div><div class="ttc" id="structast__bridge_html_af15c2e8b6df8ce0bf570af18aa890deb"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#af15c2e8b6df8ce0bf570af18aa890deb">ast_bridge::feature_flags</a></div><div class="ttdeci">struct ast_flags feature_flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00377">bridge.h:377</a></div></div>
<div class="ttc" id="linkedlists_8h_html_adf1959c5c03a3a706da97ad2f49617e5"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a></div><div class="ttdeci">#define AST_LIST_FIRST(head)</div><div class="ttdoc">Returns the first entry contained in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00420">linkedlists.h:420</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a65633fdc6178dc8d9f754fda0166d16e"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">ast_bridge_channel::features</a></div><div class="ttdeci">struct ast_bridge_features * features</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00132">bridge_channel.h:132</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_ad58d921ec1c5a6f12be8f94327dd98c0"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a></div><div class="ttdeci">void ast_bridge_channel_leave_bridge(struct ast_bridge_channel *bridge_channel, enum bridge_channel_state new_state, int cause)</div><div class="ttdoc">Set bridge channel state to leave bridge (if not leaving already). </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00314">bridge_channel.c:314</a></div></div>
<div class="ttc" id="structast__bridge_html_a9ea77c25c2c57ec45bc6dfdea1c1a228"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a9ea77c25c2c57ec45bc6dfdea1c1a228">ast_bridge::dissolved</a></div><div class="ttdeci">unsigned int dissolved</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00398">bridge.h:398</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a871f4f1d537a1cd524ee8c28b623104f"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a871f4f1d537a1cd524ee8c28b623104f">ast_bridge_channel::state</a></div><div class="ttdeci">enum bridge_channel_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00089">bridge_channel.h:89</a></div></div>
<div class="ttc" id="structast__bridge__features_html_a080125973deec97104866dd31867e3ce"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html#a080125973deec97104866dd31867e3ce">ast_bridge_features::usable</a></div><div class="ttdeci">unsigned int usable</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00275">bridge_features.h:275</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ab44a00c2c23eaeec1d8b61eb254eecaaa708398f920511beb8ea9df06bf16daac"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaa708398f920511beb8ea9df06bf16daac">BRIDGE_CHANNEL_STATE_END_NO_DISSOLVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00066">bridge_channel.h:66</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a65c2644d2eadb31bcec0aaeb41cb3444aab11deff15a9ae22b58e49e9d6d53e16"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444aab11deff15a9ae22b58e49e9d6d53e16">AST_BRIDGE_FLAG_DISSOLVE_HANGUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00037">bridge_features.h:37</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="structast__bridge__features_html_af15c2e8b6df8ce0bf570af18aa890deb"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html#af15c2e8b6df8ce0bf570af18aa890deb">ast_bridge_features::feature_flags</a></div><div class="ttdeci">struct ast_flags feature_flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00271">bridge_features.h:271</a></div></div>
<div class="ttc" id="bridge__features_8h_html_adb39f3c49f940cca855ef8ae3dfc5f77a88f541f13934e4f8ad5d88e31f694e2b"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#adb39f3c49f940cca855ef8ae3dfc5f77a88f541f13934e4f8ad5d88e31f694e2b">AST_BRIDGE_CHANNEL_FLAG_DISSOLVE_HANGUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00063">bridge_features.h:63</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326">BRIDGE_CHANNEL_STATE_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00064">bridge_channel.h:64</a></div></div>
<div class="ttc" id="structast__bridge_html_adaedd59efa9e3a1bf9ef24db6771e0a2"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#adaedd59efa9e3a1bf9ef24db6771e0a2">ast_bridge::num_lonely</a></div><div class="ttdeci">unsigned int num_lonely</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00385">bridge.h:385</a></div></div>
<div class="ttc" id="structast__bridge_html_a77542a877d8ed62331c5b3b6aa3e87a7"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a77542a877d8ed62331c5b3b6aa3e87a7">ast_bridge::channels</a></div><div class="ttdeci">struct ast_bridge_channels_list channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00371">bridge.h:371</a></div></div>
<div class="ttc" id="bridge__internal_8h_html_a3dfc360c4ef5a43d854d75e9b94b58e1"><div class="ttname"><a href="../../d5/dde/bridge__internal_8h.html#a3dfc360c4ef5a43d854d75e9b94b58e1">bridge_dissolve</a></div><div class="ttdeci">void bridge_dissolve(struct ast_bridge *bridge, int cause)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l00319">bridge.c:319</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="channel_8h_html_aa04afa262d7e1b211ee32d17c949a275"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa04afa262d7e1b211ee32d17c949a275">ast_channel_hangupcause</a></div><div class="ttdeci">int ast_channel_hangupcause(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00427">channel_internal_api.c:427</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a65c2644d2eadb31bcec0aaeb41cb3444a7e495fdd770a14a1a2166ad18a16d8ca"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444a7e495fdd770a14a1a2166ad18a16d8ca">AST_BRIDGE_FLAG_DISSOLVE_EMPTY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00039">bridge_features.h:39</a></div></div>
<div class="ttc" id="structast__bridge_html_a97e3bedeadf444995deb6fab68f57e21"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a97e3bedeadf444995deb6fab68f57e21">ast_bridge::num_channels</a></div><div class="ttdeci">unsigned int num_channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00381">bridge.h:381</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a65d9e7f82bc927eb1fe562798b694ef4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65d9e7f82bc927eb1fe562798b694ef4">&#9670;&nbsp;</a></span>bridge_channel_do_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_channel_do_callback </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/dfe/structbridge__custom__callback.html">bridge_custom_callback</a> *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01440">1440</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00616">AST_BRIDGE_CHANNEL_CB_OPTION_MEDIA</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00297">AST_CONTROL_SRCUPDATE</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04322">ast_indicate()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00875">bridge_channel_suspend()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00918">bridge_channel_unsuspend()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01419">bridge_custom_callback::callback</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01427">bridge_custom_callback::payload</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01425">bridge_custom_callback::payload_exists</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01421">bridge_custom_callback::payload_size</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02067">bridge_channel_handle_action()</a>.</p>
<div class="fragment"><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;{</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(data, <a class="code" href="../../de/d41/bridge__channel_8h.html#a411218cf4d743baa73c2def8f024cb23a7d9b9e7c20920a163afd3009c21a0e77">AST_BRIDGE_CHANNEL_CB_OPTION_MEDIA</a>)) {</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#aed3b39418f4e59ea32eee175ee5b6602">bridge_channel_suspend</a>(bridge_channel);</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a>);</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;   }</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;   data-&gt;<a class="code" href="../../d1/dfe/structbridge__custom__callback.html#a69e369f6ff5181d279528e67b49cfb8f">callback</a>(bridge_channel, data-&gt;<a class="code" href="../../d1/dfe/structbridge__custom__callback.html#aff5cb9dce299ac01ef387ab10a54950d">payload_exists</a> ? data-&gt;<a class="code" href="../../d1/dfe/structbridge__custom__callback.html#af9bec6d32466456a98e2a4b1bd540149">payload</a> : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, data-&gt;<a class="code" href="../../d1/dfe/structbridge__custom__callback.html#a21fb327bb05e95f14a13ff193882f32b">payload_size</a>);</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(data, <a class="code" href="../../de/d41/bridge__channel_8h.html#a411218cf4d743baa73c2def8f024cb23a7d9b9e7c20920a163afd3009c21a0e77">AST_BRIDGE_CHANNEL_CB_OPTION_MEDIA</a>)) {</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a>);</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a8ecf592ba328e49347e4b727be38e06b">bridge_channel_unsuspend</a>(bridge_channel);</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;   }</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;}</div><div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="channel_8h_html_aef2af15a597c948e97628da6c5c84f28"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a></div><div class="ttdeci">int ast_indicate(struct ast_channel *chan, int condition)</div><div class="ttdoc">Indicates condition of channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04322">channel.c:4322</a></div></div>
<div class="ttc" id="structbridge__custom__callback_html_a21fb327bb05e95f14a13ff193882f32b"><div class="ttname"><a href="../../d1/dfe/structbridge__custom__callback.html#a21fb327bb05e95f14a13ff193882f32b">bridge_custom_callback::payload_size</a></div><div class="ttdeci">size_t payload_size</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01421">bridge_channel.c:1421</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_a411218cf4d743baa73c2def8f024cb23a7d9b9e7c20920a163afd3009c21a0e77"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#a411218cf4d743baa73c2def8f024cb23a7d9b9e7c20920a163afd3009c21a0e77">AST_BRIDGE_CHANNEL_CB_OPTION_MEDIA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00616">bridge_channel.h:616</a></div></div>
<div class="ttc" id="structbridge__custom__callback_html_a69e369f6ff5181d279528e67b49cfb8f"><div class="ttname"><a href="../../d1/dfe/structbridge__custom__callback.html#a69e369f6ff5181d279528e67b49cfb8f">bridge_custom_callback::callback</a></div><div class="ttdeci">ast_bridge_custom_callback_fn callback</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01419">bridge_channel.c:1419</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00297">include/asterisk/frame.h:297</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_aed3b39418f4e59ea32eee175ee5b6602"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#aed3b39418f4e59ea32eee175ee5b6602">bridge_channel_suspend</a></div><div class="ttdeci">static void bridge_channel_suspend(struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00875">bridge_channel.c:875</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="structbridge__custom__callback_html_af9bec6d32466456a98e2a4b1bd540149"><div class="ttname"><a href="../../d1/dfe/structbridge__custom__callback.html#af9bec6d32466456a98e2a4b1bd540149">bridge_custom_callback::payload</a></div><div class="ttdeci">char payload[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01427">bridge_channel.c:1427</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a8ecf592ba328e49347e4b727be38e06b"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a8ecf592ba328e49347e4b727be38e06b">bridge_channel_unsuspend</a></div><div class="ttdeci">static void bridge_channel_unsuspend(struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00918">bridge_channel.c:918</a></div></div>
<div class="ttc" id="structbridge__custom__callback_html_aff5cb9dce299ac01ef387ab10a54950d"><div class="ttname"><a href="../../d1/dfe/structbridge__custom__callback.html#aff5cb9dce299ac01ef387ab10a54950d">bridge_custom_callback::payload_exists</a></div><div class="ttdeci">char payload_exists</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01425">bridge_channel.c:1425</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9e75ef876f4aa83248184a4e96be760f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e75ef876f4aa83248184a4e96be760f">&#9670;&nbsp;</a></span>bridge_channel_dtmf_stream()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_channel_dtmf_stream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dtmf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Internal function that plays back DTMF on a bridge channel. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01926">1926</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00981">ast_dtmf_stream()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02067">bridge_channel_handle_action()</a>.</p>
<div class="fragment"><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;{</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Playing DTMF stream &#39;%s&#39; out to %p(%s)\n&quot;</span>,</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;      dtmf, bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#af20b8ac2e28e659be352bbaecdf0ab03">ast_dtmf_stream</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, dtmf, 0, 0);</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;}</div><div class="ttc" id="include_2asterisk_2app_8h_html_af20b8ac2e28e659be352bbaecdf0ab03"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#af20b8ac2e28e659be352bbaecdf0ab03">ast_dtmf_stream</a></div><div class="ttdeci">int ast_dtmf_stream(struct ast_channel *chan, struct ast_channel *peer, const char *digits, int between, unsigned int duration)</div><div class="ttdoc">Send a string of DTMF digits to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00981">main/app.c:981</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9a67c7074975dc146672c23e43c05fa1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a67c7074975dc146672c23e43c05fa1">&#9670;&nbsp;</a></span>bridge_channel_event_join_leave()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_channel_event_join_leave </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../dc/d7a/bridge__features_8h.html#a122c52bc5dec74974f3d4cf3870e7da3">ast_bridge_hook_type</a>&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02872">2872</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01598">ao2_unlink</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00297">AST_CONTROL_SRCUPDATE</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04322">ast_indicate()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00875">bridge_channel_suspend()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00918">bridge_channel_unsuspend()</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00203">ast_bridge_hook::callback</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00132">ast_bridge_channel::features</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00207">ast_bridge_hook::hook_pvt</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00267">ast_bridge_features::other_hooks</a>, and <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00211">ast_bridge_hook::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02902">bridge_channel_internal_join()</a>.</p>
<div class="fragment"><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;{</div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a> *features = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">features</a>;</div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d3b/structast__bridge__hook.html">ast_bridge_hook</a> *hook;</div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> iter;</div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;</div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;   <span class="comment">/* Run the specified hooks. */</span></div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;   iter = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(features-&gt;<a class="code" href="../../db/dba/structast__bridge__features.html#a2918c32314a019cebcc4259e324a2745">other_hooks</a>, 0);</div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;   <span class="keywordflow">for</span> (; (hook = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;iter)); <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(hook, -1)) {</div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;      <span class="keywordflow">if</span> (hook-&gt;<a class="code" href="../../da/d3b/structast__bridge__hook.html#a9b8d1356a63d1d2c5892a83ea93af921">type</a> == <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>) {</div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;      }</div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;   }</div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;   <span class="keywordflow">if</span> (hook) {</div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;      <span class="comment">/* Found the first specified hook to run. */</span></div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#aed3b39418f4e59ea32eee175ee5b6602">bridge_channel_suspend</a>(bridge_channel);</div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a>);</div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;      <span class="keywordflow">do</span> {</div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;         <span class="keywordflow">if</span> (hook-&gt;<a class="code" href="../../da/d3b/structast__bridge__hook.html#a9b8d1356a63d1d2c5892a83ea93af921">type</a> == <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>) {</div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;            hook-&gt;<a class="code" href="../../da/d3b/structast__bridge__hook.html#aff642471ebace1228460a3b47653fc35">callback</a>(bridge_channel, hook-&gt;<a class="code" href="../../da/d3b/structast__bridge__hook.html#ad6640f8898b13ff6d292522ee3d4973f">hook_pvt</a>);</div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a>(features-&gt;<a class="code" href="../../db/dba/structast__bridge__features.html#a2918c32314a019cebcc4259e324a2745">other_hooks</a>, hook);</div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;         }</div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(hook, -1);</div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;      } <span class="keywordflow">while</span> ((hook = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;iter)));</div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a>);</div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a8ecf592ba328e49347e4b727be38e06b">bridge_channel_unsuspend</a>(bridge_channel);</div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;   }</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;iter);</div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a65633fdc6178dc8d9f754fda0166d16e"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">ast_bridge_channel::features</a></div><div class="ttdeci">struct ast_bridge_features * features</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00132">bridge_channel.h:132</a></div></div>
<div class="ttc" id="structast__bridge__features_html"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a></div><div class="ttdoc">Structure that contains features information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00263">bridge_features.h:263</a></div></div>
<div class="ttc" id="channel_8h_html_aef2af15a597c948e97628da6c5c84f28"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a></div><div class="ttdeci">int ast_indicate(struct ast_channel *chan, int condition)</div><div class="ttdoc">Indicates condition of channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04322">channel.c:4322</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00297">include/asterisk/frame.h:297</a></div></div>
<div class="ttc" id="structast__bridge__hook_html_a9b8d1356a63d1d2c5892a83ea93af921"><div class="ttname"><a href="../../da/d3b/structast__bridge__hook.html#a9b8d1356a63d1d2c5892a83ea93af921">ast_bridge_hook::type</a></div><div class="ttdeci">enum ast_bridge_hook_type type</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00211">bridge_features.h:211</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_aed3b39418f4e59ea32eee175ee5b6602"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#aed3b39418f4e59ea32eee175ee5b6602">bridge_channel_suspend</a></div><div class="ttdeci">static void bridge_channel_suspend(struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00875">bridge_channel.c:875</a></div></div>
<div class="ttc" id="astobj2_8h_html_a64f51be4bee35c38dbe59b0a788b5ce8"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a></div><div class="ttdeci">#define ao2_unlink(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01598">astobj2.h:1598</a></div></div>
<div class="ttc" id="structast__bridge__hook_html_aff642471ebace1228460a3b47653fc35"><div class="ttname"><a href="../../da/d3b/structast__bridge__hook.html#aff642471ebace1228460a3b47653fc35">ast_bridge_hook::callback</a></div><div class="ttdeci">ast_bridge_hook_callback callback</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00203">bridge_features.h:203</a></div></div>
<div class="ttc" id="structast__bridge__hook_html_ad6640f8898b13ff6d292522ee3d4973f"><div class="ttname"><a href="../../da/d3b/structast__bridge__hook.html#ad6640f8898b13ff6d292522ee3d4973f">ast_bridge_hook::hook_pvt</a></div><div class="ttdeci">void * hook_pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00207">bridge_features.h:207</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="structast__bridge__features_html_a2918c32314a019cebcc4259e324a2745"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html#a2918c32314a019cebcc4259e324a2745">ast_bridge_features::other_hooks</a></div><div class="ttdeci">struct ao2_container * other_hooks</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00267">bridge_features.h:267</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
<div class="ttc" id="structast__bridge__hook_html"><div class="ttname"><a href="../../da/d3b/structast__bridge__hook.html">ast_bridge_hook</a></div><div class="ttdoc">Structure that is the essence of a feature hook. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00201">bridge_features.h:201</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a8ecf592ba328e49347e4b727be38e06b"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a8ecf592ba328e49347e4b727be38e06b">bridge_channel_unsuspend</a></div><div class="ttdeci">static void bridge_channel_unsuspend(struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00918">bridge_channel.c:918</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aedf7b84efe76a7dc658d6ff5f9e9f187"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedf7b84efe76a7dc658d6ff5f9e9f187">&#9670;&nbsp;</a></span>bridge_channel_feature_digit_add()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int bridge_channel_feature_digit_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>digit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>dtmf_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01717">1717</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00175">ast_bridge_channel::collected</a>, <a class="el" href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">digit</a>, and <a class="el" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">ast_bridge_channel::dtmf_hook_state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01762">ast_bridge_channel_feature_digit()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01754">ast_bridge_channel_feature_digit_add()</a>.</p>
<div class="fragment"><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;{</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;   <span class="keywordflow">if</span> (dtmf_len &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">collected</a>) - 1) {</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;      <span class="comment">/* Add the new digit to the DTMF string so we can do our matching */</span></div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;      bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">collected</a>[dtmf_len++] = <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>;</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;      bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">collected</a>[dtmf_len] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;DTMF feature string on %p(%s) is now &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;           bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;           bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">collected</a>);</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;   }</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;   <span class="keywordflow">return</span> dtmf_len;</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;}</div><div class="ttc" id="app__alarmreceiver_8c_html_ac2c887b7f7b359bfdda8a128980f5081"><div class="ttname"><a href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a></div><div class="ttdeci">char digit</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">app_alarmreceiver.c:131</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_ae7cf5bbda4cf5f01c7fbaf80404b8586"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">ast_bridge_channel::dtmf_hook_state</a></div><div class="ttdeci">struct ast_bridge_channel::@233 dtmf_hook_state</div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a61eb94728edfc0596b44498ce570d084"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">ast_bridge_channel::collected</a></div><div class="ttdeci">char collected[MAXIMUM_DTMF_FEATURE_STRING]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00175">bridge_channel.h:175</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aedbf9a98366b9363db3af0645cef3364"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aedbf9a98366b9363db3af0645cef3364">&#9670;&nbsp;</a></span>bridge_channel_feature_digit_timeout()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned int bridge_channel_feature_digit_timeout </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01733">1733</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../de/d71/features__config_8c_source.html#l01123">ast_get_chan_features_general_config()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00037">ast_features_general_config::featuredigittimeout</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01762">ast_bridge_channel_feature_digit()</a>.</p>
<div class="fragment"><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;{</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> digit_timeout;</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/da0/structast__features__general__config.html">ast_features_general_config</a> *gen_cfg;</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;   <span class="comment">/* Determine interdigit timeout */</span></div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;   gen_cfg = <a class="code" href="../../d0/daa/include_2asterisk_2features__config_8h.html#a23084fc291f5d68ffa0a4e5a5ee39949">ast_get_chan_features_general_config</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;   <span class="keywordflow">if</span> (!gen_cfg) {</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to retrieve features configuration.\n&quot;</span>);</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;      <span class="keywordflow">return</span> 3000; <span class="comment">/* Pick a reasonable failsafe timeout in ms */</span></div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;   }</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;   digit_timeout = gen_cfg-&gt;<a class="code" href="../../db/da0/structast__features__general__config.html#a69e4f4ecc1ba7cea31007afaed32f18f">featuredigittimeout</a>;</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(gen_cfg, -1);</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;   <span class="keywordflow">return</span> digit_timeout;</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__features__general__config_html"><div class="ttname"><a href="../../db/da0/structast__features__general__config.html">ast_features_general_config</a></div><div class="ttdoc">General features configuration items. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00029">include/asterisk/features_config.h:29</a></div></div>
<div class="ttc" id="structast__features__general__config_html_a69e4f4ecc1ba7cea31007afaed32f18f"><div class="ttname"><a href="../../db/da0/structast__features__general__config.html#a69e4f4ecc1ba7cea31007afaed32f18f">ast_features_general_config::featuredigittimeout</a></div><div class="ttdeci">unsigned int featuredigittimeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00037">include/asterisk/features_config.h:37</a></div></div>
<div class="ttc" id="include_2asterisk_2features__config_8h_html_a23084fc291f5d68ffa0a4e5a5ee39949"><div class="ttname"><a href="../../d0/daa/include_2asterisk_2features__config_8h.html#a23084fc291f5d68ffa0a4e5a5ee39949">ast_get_chan_features_general_config</a></div><div class="ttdeci">struct ast_features_general_config * ast_get_chan_features_general_config(struct ast_channel *chan)</div><div class="ttdoc">Get the general configuration options for a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d71/features__config_8c_source.html#l01123">features_config.c:1123</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a932986b0a354279ab592e33918eb18af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a932986b0a354279ab592e33918eb18af">&#9670;&nbsp;</a></span>bridge_channel_feature_timeout()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int bridge_channel_feature_timeout </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02753">2753</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00175">ast_bridge_channel::collected</a>, <a class="el" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">ast_bridge_channel::dtmf_hook_state</a>, and <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00173">ast_bridge_channel::interdigit_timeout</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02782">bridge_channel_next_timeout()</a>.</p>
<div class="fragment"><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;{</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;   <span class="keywordtype">int</span> ms;</div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;</div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;   <span class="keywordflow">if</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">collected</a>[0]) {</div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;      ms = <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a5c2f7dd8767c2be956356bf7656da9dc">interdigit_timeout</a>,</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;         <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>());</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;      <span class="keywordflow">if</span> (ms &lt; 0) {</div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;         <span class="comment">/* Expire immediately. */</span></div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;         ms = 0;</div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;      }</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;      <span class="comment">/* Timer is not active so wait forever. */</span></div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;      ms = -1;</div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;   }</div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;</div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;   <span class="keywordflow">return</span> ms;</div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;}</div><div class="ttc" id="structast__bridge__channel_html_ae7cf5bbda4cf5f01c7fbaf80404b8586"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">ast_bridge_channel::dtmf_hook_state</a></div><div class="ttdeci">struct ast_bridge_channel::@233 dtmf_hook_state</div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a61eb94728edfc0596b44498ce570d084"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">ast_bridge_channel::collected</a></div><div class="ttdeci">char collected[MAXIMUM_DTMF_FEATURE_STRING]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00175">bridge_channel.h:175</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a5c2f7dd8767c2be956356bf7656da9dc"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a5c2f7dd8767c2be956356bf7656da9dc">ast_bridge_channel::interdigit_timeout</a></div><div class="ttdeci">struct timeval interdigit_timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00173">bridge_channel.h:173</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af6a8305ad69cc97256e0d9890261232a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6a8305ad69cc97256e0d9890261232a">&#9670;&nbsp;</a></span>bridge_channel_handle_action()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_channel_handle_action </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0a">bridge_channel_action_type</a>&#160;</td>
          <td class="paramname"><em>action</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02067">2067</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00605">ast_bridge_channel_kick()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00459">ast_check_hangup_locked()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00297">AST_CONTROL_SRCUPDATE</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04322">ast_indicate()</a>, <a class="el" href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00059">BRIDGE_CHANNEL_ACTION_ATTENDED_TRANSFER</a>, <a class="el" href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00057">BRIDGE_CHANNEL_ACTION_BLIND_TRANSFER</a>, <a class="el" href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00053">BRIDGE_CHANNEL_ACTION_CALLBACK</a>, <a class="el" href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00043">BRIDGE_CHANNEL_ACTION_DTMF_STREAM</a>, <a class="el" href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00055">BRIDGE_CHANNEL_ACTION_PARK</a>, <a class="el" href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00049">BRIDGE_CHANNEL_ACTION_PLAY_FILE</a>, <a class="el" href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00051">BRIDGE_CHANNEL_ACTION_RUN_APP</a>, <a class="el" href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00045">BRIDGE_CHANNEL_ACTION_TALKING_START</a>, <a class="el" href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00047">BRIDGE_CHANNEL_ACTION_TALKING_STOP</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02027">bridge_channel_attended_transfer()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02016">bridge_channel_blind_transfer()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01440">bridge_channel_do_callback()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01926">bridge_channel_dtmf_stream()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01511">bridge_channel_park()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01368">bridge_channel_playfile()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01274">bridge_channel_run_app()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00875">bridge_channel_suspend()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01899">bridge_channel_talking()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00918">bridge_channel_unsuspend()</a>, and <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02444">bridge_channel_handle_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;{</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;   <span class="keywordflow">switch</span> (action) {</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa389b169b13e7dfcecc36fdaf0399487a">BRIDGE_CHANNEL_ACTION_DTMF_STREAM</a>:</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#aed3b39418f4e59ea32eee175ee5b6602">bridge_channel_suspend</a>(bridge_channel);</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a>);</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a9e75ef876f4aa83248184a4e96be760f">bridge_channel_dtmf_stream</a>(bridge_channel, data);</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a>);</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a8ecf592ba328e49347e4b727be38e06b">bridge_channel_unsuspend</a>(bridge_channel);</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa73a3ac2a21fe5971393db0875aaf1c87">BRIDGE_CHANNEL_ACTION_TALKING_START</a>:</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa56e18ff73f676281575bc87452730220">BRIDGE_CHANNEL_ACTION_TALKING_STOP</a>:</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#ae932d794c2317a707fb0c616e6cb8d40">bridge_channel_talking</a>(bridge_channel,</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;         action == <a class="code" href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa73a3ac2a21fe5971393db0875aaf1c87">BRIDGE_CHANNEL_ACTION_TALKING_START</a>);</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa62a79f7f191980f8a20f23c0719c80c3">BRIDGE_CHANNEL_ACTION_PLAY_FILE</a>:</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#aed3b39418f4e59ea32eee175ee5b6602">bridge_channel_suspend</a>(bridge_channel);</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a>);</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#ad5f0575f76e365299b450abec30ae540">bridge_channel_playfile</a>(bridge_channel, data);</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a>);</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a8ecf592ba328e49347e4b727be38e06b">bridge_channel_unsuspend</a>(bridge_channel);</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aaa55d63c2abe2a5617a545dbc69422750">BRIDGE_CHANNEL_ACTION_RUN_APP</a>:</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#aed3b39418f4e59ea32eee175ee5b6602">bridge_channel_suspend</a>(bridge_channel);</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a>);</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a4c94159425af61159f1633ea88145179">bridge_channel_run_app</a>(bridge_channel, data);</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a>);</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a8ecf592ba328e49347e4b727be38e06b">bridge_channel_unsuspend</a>(bridge_channel);</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa9fa1d64401522ff00e31e3821aa89cd9">BRIDGE_CHANNEL_ACTION_CALLBACK</a>:</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a65d9e7f82bc927eb1fe562798b694ef4">bridge_channel_do_callback</a>(bridge_channel, data);</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aae6ec891ef5c2efea818b8976eb6e65b5">BRIDGE_CHANNEL_ACTION_PARK</a>:</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#aed3b39418f4e59ea32eee175ee5b6602">bridge_channel_suspend</a>(bridge_channel);</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a>);</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#aa83bce915e492875e48f9ae3ea0d2d49">bridge_channel_park</a>(bridge_channel, data);</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a>);</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a8ecf592ba328e49347e4b727be38e06b">bridge_channel_unsuspend</a>(bridge_channel);</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa84d886ead1b35fb305d2ddccdc7ddb7a">BRIDGE_CHANNEL_ACTION_BLIND_TRANSFER</a>:</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#aa6551ce3945d265e4982897e6c8c3f28">bridge_channel_blind_transfer</a>(bridge_channel, data);</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa1fc89f04a92b074f454265cab7398b99">BRIDGE_CHANNEL_ACTION_ATTENDED_TRANSFER</a>:</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a657dfbcaa8a7097be8528d6a659d3d61">bridge_channel_attended_transfer</a>(bridge_channel, data);</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;   }</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;   <span class="comment">/* While invoking an action it is possible for the channel to be hung up. So</span></div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;<span class="comment">    * that the bridge respects this we check here and if hung up kick it out.</span></div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;   <span class="keywordflow">if</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a> &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#a723ac44c92b9edb6c1a731e01edacb4a">ast_check_hangup_locked</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)) {</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a7e482bb2dcffd792205f114ddfa098fb">ast_bridge_channel_kick</a>(bridge_channel, 0);</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;   }</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;}</div><div class="ttc" id="bridge__channel__internal_8h_html_adadb2f6b306233caecdabcf1a7440b0aa1fc89f04a92b074f454265cab7398b99"><div class="ttname"><a href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa1fc89f04a92b074f454265cab7398b99">BRIDGE_CHANNEL_ACTION_ATTENDED_TRANSFER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00059">bridge_channel_internal.h:59</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_aa6551ce3945d265e4982897e6c8c3f28"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#aa6551ce3945d265e4982897e6c8c3f28">bridge_channel_blind_transfer</a></div><div class="ttdeci">static void bridge_channel_blind_transfer(struct ast_bridge_channel *bridge_channel, struct blind_transfer_data *blind_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l02016">bridge_channel.c:2016</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a65d9e7f82bc927eb1fe562798b694ef4"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a65d9e7f82bc927eb1fe562798b694ef4">bridge_channel_do_callback</a></div><div class="ttdeci">static void bridge_channel_do_callback(struct ast_bridge_channel *bridge_channel, struct bridge_custom_callback *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01440">bridge_channel.c:1440</a></div></div>
<div class="ttc" id="channel_8h_html_aef2af15a597c948e97628da6c5c84f28"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a></div><div class="ttdeci">int ast_indicate(struct ast_channel *chan, int condition)</div><div class="ttdoc">Indicates condition of channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04322">channel.c:4322</a></div></div>
<div class="ttc" id="channel_8h_html_a723ac44c92b9edb6c1a731e01edacb4a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a723ac44c92b9edb6c1a731e01edacb4a">ast_check_hangup_locked</a></div><div class="ttdeci">int ast_check_hangup_locked(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00459">channel.c:459</a></div></div>
<div class="ttc" id="bridge__channel__internal_8h_html_adadb2f6b306233caecdabcf1a7440b0aa9fa1d64401522ff00e31e3821aa89cd9"><div class="ttname"><a href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa9fa1d64401522ff00e31e3821aa89cd9">BRIDGE_CHANNEL_ACTION_CALLBACK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00053">bridge_channel_internal.h:53</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a4c94159425af61159f1633ea88145179"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a4c94159425af61159f1633ea88145179">bridge_channel_run_app</a></div><div class="ttdeci">static void bridge_channel_run_app(struct ast_bridge_channel *bridge_channel, struct bridge_run_app *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01274">bridge_channel.c:1274</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_ae932d794c2317a707fb0c616e6cb8d40"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ae932d794c2317a707fb0c616e6cb8d40">bridge_channel_talking</a></div><div class="ttdeci">static void bridge_channel_talking(struct ast_bridge_channel *bridge_channel, int talking)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01899">bridge_channel.c:1899</a></div></div>
<div class="ttc" id="bridge__channel__internal_8h_html_adadb2f6b306233caecdabcf1a7440b0aa389b169b13e7dfcecc36fdaf0399487a"><div class="ttname"><a href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa389b169b13e7dfcecc36fdaf0399487a">BRIDGE_CHANNEL_ACTION_DTMF_STREAM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00043">bridge_channel_internal.h:43</a></div></div>
<div class="ttc" id="bridge__channel__internal_8h_html_adadb2f6b306233caecdabcf1a7440b0aa84d886ead1b35fb305d2ddccdc7ddb7a"><div class="ttname"><a href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa84d886ead1b35fb305d2ddccdc7ddb7a">BRIDGE_CHANNEL_ACTION_BLIND_TRANSFER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00057">bridge_channel_internal.h:57</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a9e75ef876f4aa83248184a4e96be760f"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a9e75ef876f4aa83248184a4e96be760f">bridge_channel_dtmf_stream</a></div><div class="ttdeci">static void bridge_channel_dtmf_stream(struct ast_bridge_channel *bridge_channel, const char *dtmf)</div><div class="ttdoc">Internal function that plays back DTMF on a bridge channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01926">bridge_channel.c:1926</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00297">include/asterisk/frame.h:297</a></div></div>
<div class="ttc" id="bridge__channel__internal_8h_html_adadb2f6b306233caecdabcf1a7440b0aa73a3ac2a21fe5971393db0875aaf1c87"><div class="ttname"><a href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa73a3ac2a21fe5971393db0875aaf1c87">BRIDGE_CHANNEL_ACTION_TALKING_START</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00045">bridge_channel_internal.h:45</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a7e482bb2dcffd792205f114ddfa098fb"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a7e482bb2dcffd792205f114ddfa098fb">ast_bridge_channel_kick</a></div><div class="ttdeci">void ast_bridge_channel_kick(struct ast_bridge_channel *bridge_channel, int cause)</div><div class="ttdoc">Kick the channel out of the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00605">bridge_channel.c:605</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_aed3b39418f4e59ea32eee175ee5b6602"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#aed3b39418f4e59ea32eee175ee5b6602">bridge_channel_suspend</a></div><div class="ttdeci">static void bridge_channel_suspend(struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00875">bridge_channel.c:875</a></div></div>
<div class="ttc" id="bridge__channel__internal_8h_html_adadb2f6b306233caecdabcf1a7440b0aa56e18ff73f676281575bc87452730220"><div class="ttname"><a href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa56e18ff73f676281575bc87452730220">BRIDGE_CHANNEL_ACTION_TALKING_STOP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00047">bridge_channel_internal.h:47</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a657dfbcaa8a7097be8528d6a659d3d61"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a657dfbcaa8a7097be8528d6a659d3d61">bridge_channel_attended_transfer</a></div><div class="ttdeci">static void bridge_channel_attended_transfer(struct ast_bridge_channel *bridge_channel, const char *target_chan_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l02027">bridge_channel.c:2027</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_aa83bce915e492875e48f9ae3ea0d2d49"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#aa83bce915e492875e48f9ae3ea0d2d49">bridge_channel_park</a></div><div class="ttdeci">static void bridge_channel_park(struct ast_bridge_channel *bridge_channel, struct bridge_park *payload)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01511">bridge_channel.c:1511</a></div></div>
<div class="ttc" id="bridge__channel__internal_8h_html_adadb2f6b306233caecdabcf1a7440b0aa62a79f7f191980f8a20f23c0719c80c3"><div class="ttname"><a href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa62a79f7f191980f8a20f23c0719c80c3">BRIDGE_CHANNEL_ACTION_PLAY_FILE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00049">bridge_channel_internal.h:49</a></div></div>
<div class="ttc" id="bridge__channel__internal_8h_html_adadb2f6b306233caecdabcf1a7440b0aae6ec891ef5c2efea818b8976eb6e65b5"><div class="ttname"><a href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aae6ec891ef5c2efea818b8976eb6e65b5">BRIDGE_CHANNEL_ACTION_PARK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00055">bridge_channel_internal.h:55</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_ad5f0575f76e365299b450abec30ae540"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ad5f0575f76e365299b450abec30ae540">bridge_channel_playfile</a></div><div class="ttdeci">static void bridge_channel_playfile(struct ast_bridge_channel *bridge_channel, struct bridge_playfile *payload)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01368">bridge_channel.c:1368</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a8ecf592ba328e49347e4b727be38e06b"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a8ecf592ba328e49347e4b727be38e06b">bridge_channel_unsuspend</a></div><div class="ttdeci">static void bridge_channel_unsuspend(struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00918">bridge_channel.c:918</a></div></div>
<div class="ttc" id="bridge__channel__internal_8h_html_adadb2f6b306233caecdabcf1a7440b0aaa55d63c2abe2a5617a545dbc69422750"><div class="ttname"><a href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aaa55d63c2abe2a5617a545dbc69422750">BRIDGE_CHANNEL_ACTION_RUN_APP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00051">bridge_channel_internal.h:51</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ada3a63465e7510211974998534395615"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada3a63465e7510211974998534395615">&#9670;&nbsp;</a></span>bridge_channel_handle_control()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_channel_handle_control </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>fr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02330">2330</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d28/channel_8c_source.html#l02814">ast_answer()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00222">ast_bridge_channel_lock_bridge()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00493">ast_bridge_unlock</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l10435">ast_channel_connected_line_macro()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l10539">ast_channel_connected_line_sub()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01260">ast_channel_flags()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l10487">ast_channel_redirecting_macro()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l10584">ast_channel_redirecting_sub()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07522">ast_channel_setoption()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00281">AST_CONTROL_ANSWER</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00299">AST_CONTROL_CONNECTED_LINE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00311">AST_CONTROL_MASQUERADE_NOTIFY</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00288">AST_CONTROL_OPTION</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00300">AST_CONTROL_REDIRECTING</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00313">AST_CONTROL_STREAM_TOPOLOGY_CHANGED</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01000">AST_FLAG_OUTGOING</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04322">ast_indicate()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04698">ast_indicate_data()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00443">AST_OPTION_AUDIO_MODE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00498">AST_OPTION_DIGIT_DETECT</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00502">AST_OPTION_FAX_DETECT</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00421">AST_OPTION_FLAG_REQUEST</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00439">AST_OPTION_RELAXDTMF</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00435">AST_OPTION_TDD</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00431">AST_OPTION_TONE_VERIFY</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00042">AST_STATE_UP</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00100">ast_bridge_channel::bridge</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l01443">bridge_reconfigured()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00535">ast_option_header::data</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">ast_frame_subclass::integer</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">ast_frame::ptr</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00396">ast_bridge::reconfigured</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02444">bridge_channel_handle_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;{</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d58/structast__option__header.html">ast_option_header</a> *aoh;</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;   <span class="keywordtype">int</span> is_caller;</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;   chan = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>;</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;   <span class="keywordflow">switch</span> (fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>) {</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a5344deefcbdcca938001314e81ea195a">AST_CONTROL_REDIRECTING</a>:</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;      is_caller = !<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a36fa77a64746637c77c6b18a7999d0a2">AST_FLAG_OUTGOING</a>);</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a88fe9ad417e869049cb359030f06cab4">ast_channel_redirecting_sub</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, chan, fr, 1) &amp;&amp;</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7176c4ba1352462039ef63412f425b00">ast_channel_redirecting_macro</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, chan, fr, is_caller, 1)) {</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#aa8c3522af1bc639cbd5b38f5fdf171fa">ast_indicate_data</a>(chan, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>);</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;      }</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac976c01c12ae70e36b99b16dbfa3dda7">AST_CONTROL_CONNECTED_LINE</a>:</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;      is_caller = !<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a36fa77a64746637c77c6b18a7999d0a2">AST_FLAG_OUTGOING</a>);</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a2661f0a9305c7a9ab779f55f4e57c1ad">ast_channel_connected_line_sub</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, chan, fr, 1) &amp;&amp;</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#aa9958d9d3c90bdc9a37fff1243b4709b">ast_channel_connected_line_macro</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, chan, fr, is_caller, 1)) {</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#aa8c3522af1bc639cbd5b38f5fdf171fa">ast_indicate_data</a>(chan, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>);</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;      }</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac4106406e269667ff84ee49e0a634f94">AST_CONTROL_OPTION</a>:</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;<span class="comment">       * Forward option Requests, but only ones we know are safe These</span></div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;<span class="comment">       * are ONLY sent by chan_iax2 and I&#39;m not convinced that they</span></div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;<span class="comment">       * are useful. I haven&#39;t deleted them entirely because I just am</span></div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;<span class="comment">       * not sure of the ramifications of removing them.</span></div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;      aoh = fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>;</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;      <span class="keywordflow">if</span> (aoh &amp;&amp; aoh-&gt;flag == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aaec646e296938635ffb97c5c7d6b05c8">AST_OPTION_FLAG_REQUEST</a>) {</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;         <span class="keywordflow">switch</span> (ntohs(aoh-&gt;option)) {</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a31312f6b6c2296e3495ad1d9e198cbf4">AST_OPTION_TONE_VERIFY</a>:</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aa27da183a0551e3f9497a8064e24b0b6">AST_OPTION_TDD</a>:</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a255dd10b04d66ed03d553244b4aa2f15">AST_OPTION_RELAXDTMF</a>:</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aee98973da4263b45bacb162534a66cfc">AST_OPTION_AUDIO_MODE</a>:</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a41f5b2f1a9596355c4c9e0786cd29c78">AST_OPTION_DIGIT_DETECT</a>:</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ab25707eb89ecf7e25985caf248af4576">AST_OPTION_FAX_DETECT</a>:</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#adcfd8d241b6de48068ead143ac29978d">ast_channel_setoption</a>(chan, ntohs(aoh-&gt;option), aoh-&gt;<a class="code" href="../../d8/d58/structast__option__header.html#ac3c027f9a365f5741871df5ace13943f">data</a>,</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;               fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> - <span class="keyword">sizeof</span>(*aoh), 0);</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;         <span class="keywordflow">default</span>:</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;         }</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;      }</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe">AST_CONTROL_ANSWER</a>:</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(chan) != <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>) {</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#aec583a3e25358ee552a4f3df53914cd0">ast_answer</a>(chan);</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;         <a class="code" href="../../d3/d32/bridge__channel_8c.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a>(bridge_channel);</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;         bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a41d441063234a215e985a56318a07a6f">reconfigured</a> = 1;</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;         <a class="code" href="../../d5/dde/bridge__internal_8h.html#a6f66125893195db451bca7e9d71bd0a5">bridge_reconfigured</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, 0);</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;         <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(chan, -1);</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;      }</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af699fa9e173afdd4c1fea90ee892330e">AST_CONTROL_MASQUERADE_NOTIFY</a>:</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;      <span class="comment">/* Should never happen. */</span></div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac4227fb216ecb8388d24e9d4776ad400">AST_CONTROL_STREAM_TOPOLOGY_CHANGED</a>:</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aa8c3522af1bc639cbd5b38f5fdf171fa">ast_indicate_data</a>(chan, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>);</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aa8c3522af1bc639cbd5b38f5fdf171fa">ast_indicate_data</a>(chan, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>);</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;   }</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="channel_8h_html_aa9958d9d3c90bdc9a37fff1243b4709b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa9958d9d3c90bdc9a37fff1243b4709b">ast_channel_connected_line_macro</a></div><div class="ttdeci">int ast_channel_connected_line_macro(struct ast_channel *autoservice_chan, struct ast_channel *macro_chan, const void *connected_info, int is_caller, int frame)</div><div class="ttdoc">Run a connected line interception macro and update a channel&amp;#39;s connected line information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10435">channel.c:10435</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390af699fa9e173afdd4c1fea90ee892330e"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af699fa9e173afdd4c1fea90ee892330e">AST_CONTROL_MASQUERADE_NOTIFY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00311">include/asterisk/frame.h:311</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="channel_8h_html_aef2af15a597c948e97628da6c5c84f28"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a></div><div class="ttdeci">int ast_indicate(struct ast_channel *chan, int condition)</div><div class="ttdoc">Indicates condition of channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04322">channel.c:4322</a></div></div>
<div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe">AST_CONTROL_ANSWER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00281">include/asterisk/frame.h:281</a></div></div>
<div class="ttc" id="structast__bridge_html_a41d441063234a215e985a56318a07a6f"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a41d441063234a215e985a56318a07a6f">ast_bridge::reconfigured</a></div><div class="ttdeci">unsigned int reconfigured</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00396">bridge.h:396</a></div></div>
<div class="ttc" id="structast__option__header_html"><div class="ttname"><a href="../../d8/d58/structast__option__header.html">ast_option_header</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00522">include/asterisk/frame.h:522</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a></div><div class="ttdeci">ast_channel_state</div><div class="ttdoc">ast_channel states </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00035">channelstate.h:35</a></div></div>
<div class="ttc" id="channel_8h_html_aa8c3522af1bc639cbd5b38f5fdf171fa"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa8c3522af1bc639cbd5b38f5fdf171fa">ast_indicate_data</a></div><div class="ttdeci">int ast_indicate_data(struct ast_channel *chan, int condition, const void *data, size_t datalen)</div><div class="ttdoc">Indicates condition of channel, with payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04698">channel.c:4698</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a5344deefcbdcca938001314e81ea195a"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a5344deefcbdcca938001314e81ea195a">AST_CONTROL_REDIRECTING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00300">include/asterisk/frame.h:300</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00042">channelstate.h:42</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aa27da183a0551e3f9497a8064e24b0b6"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aa27da183a0551e3f9497a8064e24b0b6">AST_OPTION_TDD</a></div><div class="ttdeci">#define AST_OPTION_TDD</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00435">include/asterisk/frame.h:435</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="channel_8h_html_adcfd8d241b6de48068ead143ac29978d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#adcfd8d241b6de48068ead143ac29978d">ast_channel_setoption</a></div><div class="ttdeci">int ast_channel_setoption(struct ast_channel *channel, int option, void *data, int datalen, int block)</div><div class="ttdoc">Sets an option on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07522">channel.c:7522</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_adece183191b0e700e039e59101e06105"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">ast_frame_subclass::integer</a></div><div class="ttdeci">int integer</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">include/asterisk/frame.h:152</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a255dd10b04d66ed03d553244b4aa2f15"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a255dd10b04d66ed03d553244b4aa2f15">AST_OPTION_RELAXDTMF</a></div><div class="ttdeci">#define AST_OPTION_RELAXDTMF</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00439">include/asterisk/frame.h:439</a></div></div>
<div class="ttc" id="bridge__internal_8h_html_a6f66125893195db451bca7e9d71bd0a5"><div class="ttname"><a href="../../d5/dde/bridge__internal_8h.html#a6f66125893195db451bca7e9d71bd0a5">bridge_reconfigured</a></div><div class="ttdeci">void bridge_reconfigured(struct ast_bridge *bridge, unsigned int colp_update)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l01443">bridge.c:1443</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="channel_8h_html_a88fe9ad417e869049cb359030f06cab4"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a88fe9ad417e869049cb359030f06cab4">ast_channel_redirecting_sub</a></div><div class="ttdeci">int ast_channel_redirecting_sub(struct ast_channel *autoservice_chan, struct ast_channel *sub_chan, const void *redirecting_info, int is_frame)</div><div class="ttdoc">Run a redirecting interception subroutine and update a channel&amp;#39;s redirecting information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10584">channel.c:10584</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a41f5b2f1a9596355c4c9e0786cd29c78"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a41f5b2f1a9596355c4c9e0786cd29c78">AST_OPTION_DIGIT_DETECT</a></div><div class="ttdeci">#define AST_OPTION_DIGIT_DETECT</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00498">include/asterisk/frame.h:498</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ac976c01c12ae70e36b99b16dbfa3dda7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac976c01c12ae70e36b99b16dbfa3dda7">AST_CONTROL_CONNECTED_LINE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00299">include/asterisk/frame.h:299</a></div></div>
<div class="ttc" id="channel_8h_html_a2661f0a9305c7a9ab779f55f4e57c1ad"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a2661f0a9305c7a9ab779f55f4e57c1ad">ast_channel_connected_line_sub</a></div><div class="ttdeci">int ast_channel_connected_line_sub(struct ast_channel *autoservice_chan, struct ast_channel *sub_chan, const void *connected_info, int frame)</div><div class="ttdoc">Run a connected line interception subroutine and update a channel&amp;#39;s connected line information...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10539">channel.c:10539</a></div></div>
<div class="ttc" id="bridge_8h_html_a0fb66f4741ca8d106af1917a2f1aab6e"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a></div><div class="ttdeci">#define ast_bridge_unlock(bridge)</div><div class="ttdoc">Unlock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00493">bridge.h:493</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ac4106406e269667ff84ee49e0a634f94"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac4106406e269667ff84ee49e0a634f94">AST_CONTROL_OPTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00288">include/asterisk/frame.h:288</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aee98973da4263b45bacb162534a66cfc"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aee98973da4263b45bacb162534a66cfc">AST_OPTION_AUDIO_MODE</a></div><div class="ttdeci">#define AST_OPTION_AUDIO_MODE</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00443">include/asterisk/frame.h:443</a></div></div>
<div class="ttc" id="structast__option__header_html_ac3c027f9a365f5741871df5ace13943f"><div class="ttname"><a href="../../d8/d58/structast__option__header.html#ac3c027f9a365f5741871df5ace13943f">ast_option_header::data</a></div><div class="ttdeci">uint8_t data[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00535">include/asterisk/frame.h:535</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ab25707eb89ecf7e25985caf248af4576"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ab25707eb89ecf7e25985caf248af4576">AST_OPTION_FAX_DETECT</a></div><div class="ttdeci">#define AST_OPTION_FAX_DETECT</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00502">include/asterisk/frame.h:502</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5a36fa77a64746637c77c6b18a7999d0a2"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a36fa77a64746637c77c6b18a7999d0a2">AST_FLAG_OUTGOING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01000">channel.h:1000</a></div></div>
<div class="ttc" id="channel_8h_html_aec583a3e25358ee552a4f3df53914cd0"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aec583a3e25358ee552a4f3df53914cd0">ast_answer</a></div><div class="ttdeci">int ast_answer(struct ast_channel *chan)</div><div class="ttdoc">Answer a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02814">channel.c:2814</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aaec646e296938635ffb97c5c7d6b05c8"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aaec646e296938635ffb97c5c7d6b05c8">AST_OPTION_FLAG_REQUEST</a></div><div class="ttdeci">#define AST_OPTION_FLAG_REQUEST</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00421">include/asterisk/frame.h:421</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ac4227fb216ecb8388d24e9d4776ad400"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac4227fb216ecb8388d24e9d4776ad400">AST_CONTROL_STREAM_TOPOLOGY_CHANGED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00313">include/asterisk/frame.h:313</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a31312f6b6c2296e3495ad1d9e198cbf4"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a31312f6b6c2296e3495ad1d9e198cbf4">AST_OPTION_TONE_VERIFY</a></div><div class="ttdeci">#define AST_OPTION_TONE_VERIFY</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00431">include/asterisk/frame.h:431</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="channel_8h_html_a91de92158876186d28ba1773877f2732"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a></div><div class="ttdeci">struct ast_flags * ast_channel_flags(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01260">channel_internal_api.c:1260</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a7d01ff5caf025a97796d2dbb78f5f02c"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a></div><div class="ttdeci">void ast_bridge_channel_lock_bridge(struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Lock the bridge associated with the bridge channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00222">bridge_channel.c:222</a></div></div>
<div class="ttc" id="channel_8h_html_a7176c4ba1352462039ef63412f425b00"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7176c4ba1352462039ef63412f425b00">ast_channel_redirecting_macro</a></div><div class="ttdeci">int ast_channel_redirecting_macro(struct ast_channel *autoservice_chan, struct ast_channel *macro_chan, const void *redirecting_info, int is_caller, int is_frame)</div><div class="ttdoc">Run a redirecting interception macro and update a channel&amp;#39;s redirecting information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10487">channel.c:10487</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab0deb73b09c4bf32c73ac6ad3a1c43b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0deb73b09c4bf32c73ac6ad3a1c43b8">&#9670;&nbsp;</a></span>bridge_channel_handle_feature_timeout()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_channel_handle_feature_timeout </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01883">1883</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01762">ast_bridge_channel_feature_digit()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00175">ast_bridge_channel::collected</a>, <a class="el" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">ast_bridge_channel::dtmf_hook_state</a>, and <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00173">ast_bridge_channel::interdigit_timeout</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02808">bridge_channel_wait()</a>.</p>
<div class="fragment"><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;{</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;   <span class="keywordflow">if</span> (!bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">collected</a>[0]</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;      || 0 &lt; <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a5c2f7dd8767c2be956356bf7656da9dc">interdigit_timeout</a>,</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;         <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>())) {</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;      <span class="comment">/* Not within a sequence or not timed out. */</span></div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;   }</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#a69864377e8f1cf05ba95f1645bc98c65">ast_bridge_channel_feature_digit</a>(bridge_channel, 0);</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;}</div><div class="ttc" id="structast__bridge__channel_html_ae7cf5bbda4cf5f01c7fbaf80404b8586"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">ast_bridge_channel::dtmf_hook_state</a></div><div class="ttdeci">struct ast_bridge_channel::@233 dtmf_hook_state</div></div>
<div class="ttc" id="bridge__channel_8c_html_a69864377e8f1cf05ba95f1645bc98c65"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a69864377e8f1cf05ba95f1645bc98c65">ast_bridge_channel_feature_digit</a></div><div class="ttdeci">void ast_bridge_channel_feature_digit(struct ast_bridge_channel *bridge_channel, int digit)</div><div class="ttdoc">Add a DTMF digit to the collected digits to match against DTMF features. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01762">bridge_channel.c:1762</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a61eb94728edfc0596b44498ce570d084"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">ast_bridge_channel::collected</a></div><div class="ttdeci">char collected[MAXIMUM_DTMF_FEATURE_STRING]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00175">bridge_channel.h:175</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a5c2f7dd8767c2be956356bf7656da9dc"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a5c2f7dd8767c2be956356bf7656da9dc">ast_bridge_channel::interdigit_timeout</a></div><div class="ttdeci">struct timeval interdigit_timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00173">bridge_channel.h:173</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8d20e88ba1d1afc162d24a262cd8713b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8d20e88ba1d1afc162d24a262cd8713b">&#9670;&nbsp;</a></span>bridge_channel_handle_interval()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_channel_handle_interval </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01570">1570</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00755">ast_atomic_fetchadd_int()</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00235">AST_BRIDGE_HOOK_TIMER_OPTION_MEDIA</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00297">AST_CONTROL_SRCUPDATE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d2/d29/heap_8c_source.html#l00267">ast_heap_peek()</a>, <a class="el" href="../../da/ddb/heap_8h_source.html#l00126">ast_heap_push</a>, <a class="el" href="../../d2/d29/heap_8c_source.html#l00251">ast_heap_remove()</a>, <a class="el" href="../../da/ddb/heap_8h_source.html#l00248">ast_heap_unlock</a>, <a class="el" href="../../da/ddb/heap_8h_source.html#l00246">ast_heap_wrlock</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04322">ast_indicate()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00238">ast_samp2tv()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02283">ast_tvadd()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00875">bridge_channel_suspend()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00918">bridge_channel_unsuspend()</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00203">ast_bridge_hook::callback</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00132">ast_bridge_channel::features</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00255">ast_bridge_hook_timer::generic</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00243">ast_bridge_hook_timer_parms::heap_index</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00207">ast_bridge_hook::hook_pvt</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00245">ast_bridge_hook_timer_parms::interval</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00269">ast_bridge_features::interval_hooks</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00273">ast_bridge_features::interval_sequence</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00247">ast_bridge_hook_timer_parms::seqno</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00257">ast_bridge_hook_timer::timer</a>, and <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00241">ast_bridge_hook_timer_parms::trip_time</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02808">bridge_channel_wait()</a>.</p>
<div class="fragment"><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;{</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dec/structast__heap.html">ast_heap</a> *interval_hooks;</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/df3/structast__bridge__hook__timer.html">ast_bridge_hook_timer</a> *hook;</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;   <span class="keyword">struct </span>timeval start;</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;   <span class="keywordtype">int</span> chan_suspended = 0;</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;   interval_hooks = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">features</a>-&gt;<a class="code" href="../../db/dba/structast__bridge__features.html#acf866276f9e32cb984c935b02d749e6f">interval_hooks</a>;</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;   <a class="code" href="../../da/ddb/heap_8h.html#ae31f8aaa8d4c6caf049e3965ec8b576a">ast_heap_wrlock</a>(interval_hooks);</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;   start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;   <span class="keywordflow">while</span> ((hook = <a class="code" href="../../da/ddb/heap_8h.html#aaa326b988236a0841d41cf2af8ec9b7e">ast_heap_peek</a>(interval_hooks, 1))) {</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;      <span class="keywordtype">int</span> interval;</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> execution_time;</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(hook-&gt;<a class="code" href="../../dd/df3/structast__bridge__hook__timer.html#a27144173d29f9be2ef3642b7c2c29191">timer</a>.<a class="code" href="../../d1/dad/structast__bridge__hook__timer__parms.html#a3546d0f5f096b6f63f437c3d24b51d47">trip_time</a>, start) &gt; 0) {</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Hook %p on %p(%s) wants to happen in the future, stopping our traversal\n&quot;</span>,</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;            hook, bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;      }</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(hook, +1);</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;      <a class="code" href="../../da/ddb/heap_8h.html#a44306afd9b32c0eedae9b559f13a2c5b">ast_heap_unlock</a>(interval_hooks);</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;      <span class="keywordflow">if</span> (!chan_suspended</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;         &amp;&amp; <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;hook-&gt;<a class="code" href="../../dd/df3/structast__bridge__hook__timer.html#a27144173d29f9be2ef3642b7c2c29191">timer</a>, <a class="code" href="../../dc/d7a/bridge__features_8h.html#acbd260bd0e5790d9c0f08775448f7fc0ae066b3303d944d7f4ff5422908e1c0f4">AST_BRIDGE_HOOK_TIMER_OPTION_MEDIA</a>)) {</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;         chan_suspended = 1;</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;         <a class="code" href="../../d3/d32/bridge__channel_8c.html#aed3b39418f4e59ea32eee175ee5b6602">bridge_channel_suspend</a>(bridge_channel);</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a>);</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;      }</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Executing hook %p on %p(%s)\n&quot;</span>,</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;         hook, bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;      interval = hook-&gt;<a class="code" href="../../dd/df3/structast__bridge__hook__timer.html#a071aadb15e85b96f455641d6adbfdb71">generic</a>.<a class="code" href="../../da/d3b/structast__bridge__hook.html#aff642471ebace1228460a3b47653fc35">callback</a>(bridge_channel, hook-&gt;<a class="code" href="../../dd/df3/structast__bridge__hook__timer.html#a071aadb15e85b96f455641d6adbfdb71">generic</a>.<a class="code" href="../../da/d3b/structast__bridge__hook.html#ad6640f8898b13ff6d292522ee3d4973f">hook_pvt</a>);</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;      <a class="code" href="../../da/ddb/heap_8h.html#ae31f8aaa8d4c6caf049e3965ec8b576a">ast_heap_wrlock</a>(interval_hooks);</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../da/ddb/heap_8h.html#aaa326b988236a0841d41cf2af8ec9b7e">ast_heap_peek</a>(interval_hooks, hook-&gt;<a class="code" href="../../dd/df3/structast__bridge__hook__timer.html#a27144173d29f9be2ef3642b7c2c29191">timer</a>.<a class="code" href="../../d1/dad/structast__bridge__hook__timer__parms.html#a2053720ddc1d72363aa823616486bddd">heap_index</a>) != hook</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;         || !<a class="code" href="../../da/ddb/heap_8h.html#ac68d03b30bb0adc489ccd67a11873b59">ast_heap_remove</a>(interval_hooks, hook)) {</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;         <span class="comment">/* Interval hook is already removed from the bridge_channel. */</span></div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(hook, -1);</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;      }</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(hook, -1);</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;      <span class="keywordflow">if</span> (interval &lt; 0) {</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Removed interval hook %p from %p(%s)\n&quot;</span>,</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;            hook, bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(hook, -1);</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;      }</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;      <span class="keywordflow">if</span> (interval) {</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;         <span class="comment">/* Set new interval for the hook. */</span></div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;         hook-&gt;<a class="code" href="../../dd/df3/structast__bridge__hook__timer.html#a27144173d29f9be2ef3642b7c2c29191">timer</a>.<a class="code" href="../../d1/dad/structast__bridge__hook__timer__parms.html#a23545cd41cdc93998f5b3caeb3e29936">interval</a> = interval;</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;      }</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Updating interval hook %p with interval %u on %p(%s)\n&quot;</span>,</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;         hook, hook-&gt;<a class="code" href="../../dd/df3/structast__bridge__hook__timer.html#a27144173d29f9be2ef3642b7c2c29191">timer</a>.<a class="code" href="../../d1/dad/structast__bridge__hook__timer__parms.html#a23545cd41cdc93998f5b3caeb3e29936">interval</a>, bridge_channel,</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;      <span class="comment">/* resetting start */</span></div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;      start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;<span class="comment">       * Resetup the interval hook for the next interval.  We may need</span></div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;<span class="comment">       * to skip over any missed intervals because the hook was</span></div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;<span class="comment">       * delayed or took too long.</span></div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;      execution_time = <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(start, hook-&gt;<a class="code" href="../../dd/df3/structast__bridge__hook__timer.html#a27144173d29f9be2ef3642b7c2c29191">timer</a>.<a class="code" href="../../d1/dad/structast__bridge__hook__timer__parms.html#a3546d0f5f096b6f63f437c3d24b51d47">trip_time</a>);</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;      <span class="keywordflow">while</span> (hook-&gt;<a class="code" href="../../dd/df3/structast__bridge__hook__timer.html#a27144173d29f9be2ef3642b7c2c29191">timer</a>.<a class="code" href="../../d1/dad/structast__bridge__hook__timer__parms.html#a23545cd41cdc93998f5b3caeb3e29936">interval</a> &lt; execution_time) {</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;         execution_time -= hook-&gt;<a class="code" href="../../dd/df3/structast__bridge__hook__timer.html#a27144173d29f9be2ef3642b7c2c29191">timer</a>.<a class="code" href="../../d1/dad/structast__bridge__hook__timer__parms.html#a23545cd41cdc93998f5b3caeb3e29936">interval</a>;</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;      }</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;      hook-&gt;<a class="code" href="../../dd/df3/structast__bridge__hook__timer.html#a27144173d29f9be2ef3642b7c2c29191">timer</a>.<a class="code" href="../../d1/dad/structast__bridge__hook__timer__parms.html#a3546d0f5f096b6f63f437c3d24b51d47">trip_time</a> = <a class="code" href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a>(start, <a class="code" href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a>(hook-&gt;<a class="code" href="../../dd/df3/structast__bridge__hook__timer.html#a27144173d29f9be2ef3642b7c2c29191">timer</a>.<a class="code" href="../../d1/dad/structast__bridge__hook__timer__parms.html#a23545cd41cdc93998f5b3caeb3e29936">interval</a> - execution_time, 1000));</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;      hook-&gt;<a class="code" href="../../dd/df3/structast__bridge__hook__timer.html#a27144173d29f9be2ef3642b7c2c29191">timer</a>.<a class="code" href="../../d1/dad/structast__bridge__hook__timer__parms.html#aac99560397aa1e3e12367419ed305d11">seqno</a> = <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>((<span class="keywordtype">int</span> *) &amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">features</a>-&gt;<a class="code" href="../../db/dba/structast__bridge__features.html#a735823cab1fbe5881c54cd1493d27e80">interval_sequence</a>, +1);</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../da/ddb/heap_8h.html#ad181f4df20e6039b37e1b8d128884a81">ast_heap_push</a>(interval_hooks, hook)) {</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;         <span class="comment">/* Could not push the hook back onto the heap. */</span></div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(hook, -1);</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;      }</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;   }</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;   <a class="code" href="../../da/ddb/heap_8h.html#a44306afd9b32c0eedae9b559f13a2c5b">ast_heap_unlock</a>(interval_hooks);</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;   <span class="keywordflow">if</span> (chan_suspended) {</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a>);</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a8ecf592ba328e49347e4b727be38e06b">bridge_channel_unsuspend</a>(bridge_channel);</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;   }</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;}</div><div class="ttc" id="structast__bridge__hook__timer__parms_html_aac99560397aa1e3e12367419ed305d11"><div class="ttname"><a href="../../d1/dad/structast__bridge__hook__timer__parms.html#aac99560397aa1e3e12367419ed305d11">ast_bridge_hook_timer_parms::seqno</a></div><div class="ttdeci">unsigned int seqno</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00247">bridge_features.h:247</a></div></div>
<div class="ttc" id="structast__bridge__hook__timer__parms_html_a23545cd41cdc93998f5b3caeb3e29936"><div class="ttname"><a href="../../d1/dad/structast__bridge__hook__timer__parms.html#a23545cd41cdc93998f5b3caeb3e29936">ast_bridge_hook_timer_parms::interval</a></div><div class="ttdeci">unsigned int interval</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00245">bridge_features.h:245</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a65633fdc6178dc8d9f754fda0166d16e"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">ast_bridge_channel::features</a></div><div class="ttdeci">struct ast_bridge_features * features</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00132">bridge_channel.h:132</a></div></div>
<div class="ttc" id="structast__bridge__hook__timer_html"><div class="ttname"><a href="../../dd/df3/structast__bridge__hook__timer.html">ast_bridge_hook_timer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00253">bridge_features.h:253</a></div></div>
<div class="ttc" id="structast__bridge__hook__timer__parms_html_a3546d0f5f096b6f63f437c3d24b51d47"><div class="ttname"><a href="../../d1/dad/structast__bridge__hook__timer__parms.html#a3546d0f5f096b6f63f437c3d24b51d47">ast_bridge_hook_timer_parms::trip_time</a></div><div class="ttdeci">struct timeval trip_time</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00241">bridge_features.h:241</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="channel_8h_html_aef2af15a597c948e97628da6c5c84f28"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a></div><div class="ttdeci">int ast_indicate(struct ast_channel *chan, int condition)</div><div class="ttdoc">Indicates condition of channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04322">channel.c:4322</a></div></div>
<div class="ttc" id="heap_8h_html_a44306afd9b32c0eedae9b559f13a2c5b"><div class="ttname"><a href="../../da/ddb/heap_8h.html#a44306afd9b32c0eedae9b559f13a2c5b">ast_heap_unlock</a></div><div class="ttdeci">#define ast_heap_unlock(h)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/ddb/heap_8h_source.html#l00248">heap.h:248</a></div></div>
<div class="ttc" id="structast__bridge__hook__timer_html_a071aadb15e85b96f455641d6adbfdb71"><div class="ttname"><a href="../../dd/df3/structast__bridge__hook__timer.html#a071aadb15e85b96f455641d6adbfdb71">ast_bridge_hook_timer::generic</a></div><div class="ttdeci">struct ast_bridge_hook generic</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00255">bridge_features.h:255</a></div></div>
<div class="ttc" id="structast__heap_html"><div class="ttname"><a href="../../dc/dec/structast__heap.html">ast_heap</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/heap_8c_source.html#l00036">heap.c:36</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="lock_8h_html_a8a3bd496edfec04a95683ace66676200"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a></div><div class="ttdeci">int ast_atomic_fetchadd_int(volatile int *p, int v)</div><div class="ttdoc">Atomically add v to *p and return the previous value of *p. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00755">lock.h:755</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00297">include/asterisk/frame.h:297</a></div></div>
<div class="ttc" id="heap_8h_html_ad181f4df20e6039b37e1b8d128884a81"><div class="ttname"><a href="../../da/ddb/heap_8h.html#ad181f4df20e6039b37e1b8d128884a81">ast_heap_push</a></div><div class="ttdeci">#define ast_heap_push(h, elm)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/ddb/heap_8h_source.html#l00126">heap.h:126</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="time_8h_html_a1d774df72e3dbb623475783e06ce4f61"><div class="ttname"><a href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a></div><div class="ttdeci">struct timeval ast_samp2tv(unsigned int _nsamp, unsigned int _rate)</div><div class="ttdoc">Returns a timeval corresponding to the duration of n samples at rate r. Useful to convert samples to ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00238">time.h:238</a></div></div>
<div class="ttc" id="structast__bridge__features_html_acf866276f9e32cb984c935b02d749e6f"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html#acf866276f9e32cb984c935b02d749e6f">ast_bridge_features::interval_hooks</a></div><div class="ttdeci">struct ast_heap * interval_hooks</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00269">bridge_features.h:269</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_aed3b39418f4e59ea32eee175ee5b6602"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#aed3b39418f4e59ea32eee175ee5b6602">bridge_channel_suspend</a></div><div class="ttdeci">static void bridge_channel_suspend(struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00875">bridge_channel.c:875</a></div></div>
<div class="ttc" id="structast__bridge__hook__timer__parms_html_a2053720ddc1d72363aa823616486bddd"><div class="ttname"><a href="../../d1/dad/structast__bridge__hook__timer__parms.html#a2053720ddc1d72363aa823616486bddd">ast_bridge_hook_timer_parms::heap_index</a></div><div class="ttdeci">ssize_t heap_index</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00243">bridge_features.h:243</a></div></div>
<div class="ttc" id="structast__bridge__hook_html_aff642471ebace1228460a3b47653fc35"><div class="ttname"><a href="../../da/d3b/structast__bridge__hook.html#aff642471ebace1228460a3b47653fc35">ast_bridge_hook::callback</a></div><div class="ttdeci">ast_bridge_hook_callback callback</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00203">bridge_features.h:203</a></div></div>
<div class="ttc" id="time_8h_html_a97e1bb8fbd7a103212789e87e7ed6073"><div class="ttname"><a href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a></div><div class="ttdeci">struct timeval ast_tvadd(struct timeval a, struct timeval b)</div><div class="ttdoc">Returns the sum of two timevals a + b. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02283">extconf.c:2283</a></div></div>
<div class="ttc" id="structast__bridge__hook_html_ad6640f8898b13ff6d292522ee3d4973f"><div class="ttname"><a href="../../da/d3b/structast__bridge__hook.html#ad6640f8898b13ff6d292522ee3d4973f">ast_bridge_hook::hook_pvt</a></div><div class="ttdeci">void * hook_pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00207">bridge_features.h:207</a></div></div>
<div class="ttc" id="structast__bridge__hook__timer_html_a27144173d29f9be2ef3642b7c2c29191"><div class="ttname"><a href="../../dd/df3/structast__bridge__hook__timer.html#a27144173d29f9be2ef3642b7c2c29191">ast_bridge_hook_timer::timer</a></div><div class="ttdeci">struct ast_bridge_hook_timer_parms timer</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00257">bridge_features.h:257</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="heap_8h_html_ac68d03b30bb0adc489ccd67a11873b59"><div class="ttname"><a href="../../da/ddb/heap_8h.html#ac68d03b30bb0adc489ccd67a11873b59">ast_heap_remove</a></div><div class="ttdeci">void * ast_heap_remove(struct ast_heap *h, void *elm)</div><div class="ttdoc">Remove a specific element from a heap. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/heap_8c_source.html#l00251">heap.c:251</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="bridge__features_8h_html_acbd260bd0e5790d9c0f08775448f7fc0ae066b3303d944d7f4ff5422908e1c0f4"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#acbd260bd0e5790d9c0f08775448f7fc0ae066b3303d944d7f4ff5422908e1c0f4">AST_BRIDGE_HOOK_TIMER_OPTION_MEDIA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00235">bridge_features.h:235</a></div></div>
<div class="ttc" id="heap_8h_html_aaa326b988236a0841d41cf2af8ec9b7e"><div class="ttname"><a href="../../da/ddb/heap_8h.html#aaa326b988236a0841d41cf2af8ec9b7e">ast_heap_peek</a></div><div class="ttdeci">void * ast_heap_peek(struct ast_heap *h, unsigned int index)</div><div class="ttdoc">Peek at an element on a heap. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/heap_8c_source.html#l00267">heap.c:267</a></div></div>
<div class="ttc" id="structast__bridge__features_html_a735823cab1fbe5881c54cd1493d27e80"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html#a735823cab1fbe5881c54cd1493d27e80">ast_bridge_features::interval_sequence</a></div><div class="ttdeci">unsigned int interval_sequence</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00273">bridge_features.h:273</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a8ecf592ba328e49347e4b727be38e06b"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a8ecf592ba328e49347e4b727be38e06b">bridge_channel_unsuspend</a></div><div class="ttdeci">static void bridge_channel_unsuspend(struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00918">bridge_channel.c:918</a></div></div>
<div class="ttc" id="heap_8h_html_ae31f8aaa8d4c6caf049e3965ec8b576a"><div class="ttname"><a href="../../da/ddb/heap_8h.html#ae31f8aaa8d4c6caf049e3965ec8b576a">ast_heap_wrlock</a></div><div class="ttdeci">#define ast_heap_wrlock(h)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/ddb/heap_8h_source.html#l00246">heap.h:246</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9f4ed276033d66e7c8ad20cbbb6d1428"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f4ed276033d66e7c8ad20cbbb6d1428">&#9670;&nbsp;</a></span>bridge_channel_handle_write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_channel_handle_write </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02444">2444</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00160">ast_bridge_channel::activity</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00151">ast_bridge_channel::alert_pipe</a>, <a class="el" href="../../d6/d7a/alertpipe_8c_source.html#l00102">ast_alertpipe_read()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00231">ast_bridge_channel_lock</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00244">ast_bridge_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00127">AST_FRAME_BRIDGE_ACTION</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00133">AST_FRAME_BRIDGE_ACTION_SYNC</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">AST_FRAME_CONTROL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00107">AST_FRAME_NULL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00114">AST_FRAME_TEXT</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00137">AST_FRAME_TEXT_DATA</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00449">AST_LIST_EMPTY</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00556">AST_LIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00528">AST_LIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00614">AST_LIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d2/d0d/message_8h_source.html#l00458">AST_MSG_DATA_ATTR_BODY</a>, <a class="el" href="../../d2/d0d/message_8h_source.html#l00456">AST_MSG_DATA_ATTR_FROM</a>, <a class="el" href="../../d2/d0d/message_8h_source.html#l00455">AST_MSG_DATA_ATTR_TO</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l01533">ast_msg_data_get_attribute()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04796">ast_sendtext_data()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05194">ast_write_stream()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02067">bridge_channel_handle_action()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02330">bridge_channel_handle_control()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00073">BRIDGE_CHANNEL_THREAD_SIMPLE</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01023">bridge_frame_free()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00175">ast_bridge_channel::collected</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00091">sync_payload::data</a>, <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, <a class="el" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">ast_bridge_channel::dtmf_hook_state</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">ast_frame_subclass::integer</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">ast_frame::ptr</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02409">sendtext_safe()</a>, <a class="el" href="../../d5/dca/structast__bridge__channel.html#affe0d3ce4e4266e3b4a4ea543fbc4d78">ast_bridge_channel::stream_map</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00197">ast_frame::stream_num</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00192">ast_bridge_channel::to_channel</a>, and <a class="el" href="../../d5/dca/structast__bridge__channel.html#a7e580256fbadf0a28137681296f9b6b8">ast_bridge_channel::wr_queue</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02808">bridge_channel_wait()</a>.</p>
<div class="fragment"><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;{</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *fr;</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d61/structsync__payload.html">sync_payload</a> *<a class="code" href="../../d7/d61/structsync__payload.html">sync_payload</a>;</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;   <span class="keywordtype">int</span> num;</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d44/structast__msg__data.html">ast_msg_data</a> *msg;</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a>(bridge_channel);</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;   <span class="comment">/* It&#39;s not good to have unbalanced frames and alert_pipe alerts. */</span></div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(!<a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(&amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a7e580256fbadf0a28137681296f9b6b8">wr_queue</a>));</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(&amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a7e580256fbadf0a28137681296f9b6b8">wr_queue</a>)) {</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;      <span class="comment">/* No frame, flush the alert pipe of excess alerts. */</span></div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Weird.  No frame from bridge for %s to process?\n&quot;</span>,</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;      <a class="code" href="../../dc/d4d/alertpipe_8h.html#ac503d210cefe419a8c43d2e713c97bf9">ast_alertpipe_read</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a55935aecf1002b1dfa1324bc3799b67c">alert_pipe</a>);</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(bridge_channel);</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;   }</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a7e580256fbadf0a28137681296f9b6b8">wr_queue</a>, fr, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>) {</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;      <span class="keywordflow">if</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">collected</a>[0]) {</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;         <span class="keywordflow">switch</span> (fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a>) {</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af36653b08c00f5d824ed6046e9233ef9">AST_FRAME_BRIDGE_ACTION</a>:</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa28206b97fb0795e1fa681248fd0d97f">AST_FRAME_BRIDGE_ACTION_SYNC</a>:</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;            <span class="comment">/* Defer processing these frames while DTMF is collected. */</span></div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;         <span class="keywordflow">default</span>:</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;         }</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;      }</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;      <a class="code" href="../../dc/d4d/alertpipe_8h.html#ac503d210cefe419a8c43d2e713c97bf9">ast_alertpipe_read</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a55935aecf1002b1dfa1324bc3799b67c">alert_pipe</a>);</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a>(<a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;   }</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(bridge_channel);</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;   <span class="keywordflow">if</span> (!fr) {</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;<span class="comment">       * Wait some to reduce CPU usage from a tight loop</span></div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;<span class="comment">       * without any wait because we only have deferred</span></div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;<span class="comment">       * frames in the wr_queue.</span></div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;      usleep(1);</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;   }</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;   <span class="keywordflow">switch</span> (fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a>) {</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af36653b08c00f5d824ed6046e9233ef9">AST_FRAME_BRIDGE_ACTION</a>:</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#af6a8305ad69cc97256e0d9890261232a">bridge_channel_handle_action</a>(bridge_channel, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>);</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa28206b97fb0795e1fa681248fd0d97f">AST_FRAME_BRIDGE_ACTION_SYNC</a>:</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;      sync_payload = fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>;</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#af6a8305ad69cc97256e0d9890261232a">bridge_channel_handle_action</a>(bridge_channel, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>, sync_payload-&gt;<a class="code" href="../../d7/d61/structsync__payload.html#aef5b927d15f11382bf5f276630c08287">data</a>);</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>:</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#ada3a63465e7510211974998534395615">bridge_channel_handle_control</a>(bridge_channel, fr);</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a29ff71f9d5c7927906ebd437fe372056">AST_FRAME_NULL</a>:</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078">AST_FRAME_TEXT</a>:</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Sending TEXT frame to &#39;%s&#39;: %*.s\n&quot;</span>,</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>), fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>, (<span class="keywordtype">char</span> *)fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>);</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a329c31879d38dbc276d1a5e4f96356d5">sendtext_safe</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, fr);</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ada620aba450c2a60eb096001f2361741">AST_FRAME_TEXT_DATA</a>:</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;      msg = (<span class="keyword">struct </span><a class="code" href="../../d9/d44/structast__msg__data.html">ast_msg_data</a> *)fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>;</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Sending TEXT_DATA frame from &#39;%s&#39; to &#39;%s:%s&#39;: %s\n&quot;</span>,</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;         <a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga4edd2c0456a7d3f1658e48e2150c9665">ast_msg_data_get_attribute</a>(msg, <a class="code" href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a7e8412f5b805e70e50a66150bad4d292">AST_MSG_DATA_ATTR_FROM</a>),</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;         <a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga4edd2c0456a7d3f1658e48e2150c9665">ast_msg_data_get_attribute</a>(msg, <a class="code" href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a34d60938c22ee31e3eafa756c016020d">AST_MSG_DATA_ATTR_TO</a>),</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;         <a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga4edd2c0456a7d3f1658e48e2150c9665">ast_msg_data_get_attribute</a>(msg, <a class="code" href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a0f0f211998e9727566ad340464c66070">AST_MSG_DATA_ATTR_BODY</a>));</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a43edfff9df1530b0ae33259e346a32ad">ast_sendtext_data</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, msg);</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;      <span class="comment">/* Assume that there is no mapped stream for this */</span></div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;      num = -1;</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;      <span class="keywordflow">if</span> (fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a> &gt; -1) {</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;         <a class="code" href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a>(bridge_channel);</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;         <span class="keywordflow">if</span> (fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a> &lt; (<span class="keywordtype">int</span>)<a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#affe0d3ce4e4266e3b4a4ea543fbc4d78">stream_map</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a8eed32758f5880ff8ec632c30525472b">to_channel</a>)) {</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;            num = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#affe0d3ce4e4266e3b4a4ea543fbc4d78">stream_map</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a8eed32758f5880ff8ec632c30525472b">to_channel</a>, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a>);</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;         }</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;         <a class="code" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(bridge_channel);</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;         <span class="comment">/* If there is no mapped stream after checking the mapping then there is nowhere</span></div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;<span class="comment">          * to write this frame to, so drop it.</span></div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;         <span class="keywordflow">if</span> (num == -1) {</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;         }</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;      }</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;      <span class="comment">/* Write the frame to the channel. */</span></div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;      bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ab1fa9a8c0210d018531c277982b76b44">activity</a> = <a class="code" href="../../de/d41/bridge__channel_8h.html#ad52acdbb06c9299895662cf57a4323a3aae37f04db23e9c3e3d350cc34c6476ef">BRIDGE_CHANNEL_THREAD_SIMPLE</a>;</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ae5229e23e6211dcad0f54cb0f2213bbc">ast_write_stream</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, num, fr);</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;   }</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#a3742c8c577dcc82edd8c4431a11a599e">bridge_frame_free</a>(fr);</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_ada3a63465e7510211974998534395615"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ada3a63465e7510211974998534395615">bridge_channel_handle_control</a></div><div class="ttdeci">static void bridge_channel_handle_control(struct ast_bridge_channel *bridge_channel, struct ast_frame *fr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l02330">bridge_channel.c:2330</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_ab1fa9a8c0210d018531c277982b76b44"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#ab1fa9a8c0210d018531c277982b76b44">ast_bridge_channel::activity</a></div><div class="ttdeci">enum bridge_channel_thread_state activity</div><div class="ttdoc">The bridge channel thread activity. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00160">bridge_channel.h:160</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ada620aba450c2a60eb096001f2361741"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ada620aba450c2a60eb096001f2361741">AST_FRAME_TEXT_DATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00137">include/asterisk/frame.h:137</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_gga44ac88ed1b656e254dcad5cf0dbd2a22a0f0f211998e9727566ad340464c66070"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a0f0f211998e9727566ad340464c66070">AST_MSG_DATA_ATTR_BODY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00458">message.h:458</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_ae7cf5bbda4cf5f01c7fbaf80404b8586"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">ast_bridge_channel::dtmf_hook_state</a></div><div class="ttdeci">struct ast_bridge_channel::@233 dtmf_hook_state</div></div>
<div class="ttc" id="structast__bridge__channel_html_a7e580256fbadf0a28137681296f9b6b8"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a7e580256fbadf0a28137681296f9b6b8">ast_bridge_channel::wr_queue</a></div><div class="ttdeci">struct ast_bridge_channel::@230 wr_queue</div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078">AST_FRAME_TEXT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00114">include/asterisk/frame.h:114</a></div></div>
<div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa28206b97fb0795e1fa681248fd0d97f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa28206b97fb0795e1fa681248fd0d97f">AST_FRAME_BRIDGE_ACTION_SYNC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00133">include/asterisk/frame.h:133</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ad52acdbb06c9299895662cf57a4323a3aae37f04db23e9c3e3d350cc34c6476ef"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ad52acdbb06c9299895662cf57a4323a3aae37f04db23e9c3e3d350cc34c6476ef">BRIDGE_CHANNEL_THREAD_SIMPLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00073">bridge_channel.h:73</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a329c31879d38dbc276d1a5e4f96356d5"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a329c31879d38dbc276d1a5e4f96356d5">sendtext_safe</a></div><div class="ttdeci">static void sendtext_safe(struct ast_channel *chan, const struct ast_frame *f)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l02409">bridge_channel.c:2409</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0af36653b08c00f5d824ed6046e9233ef9"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af36653b08c00f5d824ed6046e9233ef9">AST_FRAME_BRIDGE_ACTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00127">include/asterisk/frame.h:127</a></div></div>
<div class="ttc" id="structast__msg__data_html"><div class="ttname"><a href="../../d9/d44/structast__msg__data.html">ast_msg_data</a></div><div class="ttdoc">Structure used to transport a message through the frame core. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01406">message.c:1406</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4a1884cde93e53bef32ca85c194a1d05"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a></div><div class="ttdeci">#define AST_LIST_EMPTY(head)</div><div class="ttdoc">Checks whether the specified list contains any entries. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00449">linkedlists.h:449</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="channel_8h_html_a43edfff9df1530b0ae33259e346a32ad"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a43edfff9df1530b0ae33259e346a32ad">ast_sendtext_data</a></div><div class="ttdeci">int ast_sendtext_data(struct ast_channel *chan, struct ast_msg_data *msg)</div><div class="ttdoc">Sends text to a channel in an ast_msg_data structure wrapper with ast_sendtext as fallback...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04796">channel.c:4796</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_affe0d3ce4e4266e3b4a4ea543fbc4d78"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#affe0d3ce4e4266e3b4a4ea543fbc4d78">ast_bridge_channel::stream_map</a></div><div class="ttdeci">struct ast_bridge_channel::@236 stream_map</div></div>
<div class="ttc" id="structast__bridge__channel_html_a61eb94728edfc0596b44498ce570d084"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">ast_bridge_channel::collected</a></div><div class="ttdeci">char collected[MAXIMUM_DTMF_FEATURE_STRING]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00175">bridge_channel.h:175</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a712c04b4493919a7052399cd30ee8fb9"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_END</div><div class="ttdoc">Closes a safe loop traversal block. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00614">linkedlists.h:614</a></div></div>
<div class="ttc" id="channel_8h_html_ae5229e23e6211dcad0f54cb0f2213bbc"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae5229e23e6211dcad0f54cb0f2213bbc">ast_write_stream</a></div><div class="ttdeci">int ast_write_stream(struct ast_channel *chan, int stream_num, struct ast_frame *frame)</div><div class="ttdoc">Write a frame to a stream This function writes the given frame to the indicated stream on the channel...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05194">channel.c:5194</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="structsync__payload_html"><div class="ttname"><a href="../../d7/d61/structsync__payload.html">sync_payload</a></div><div class="ttdoc">Frame payload for synchronous bridge actions. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00087">bridge_channel.c:87</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_adece183191b0e700e039e59101e06105"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">ast_frame_subclass::integer</a></div><div class="ttdeci">int integer</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">include/asterisk/frame.h:152</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_aa467e25606c2a21df25c61f139007782"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a></div><div class="ttdeci">#define ast_bridge_channel_lock(bridge_channel)</div><div class="ttdoc">Lock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00231">bridge_channel.h:231</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa8ac496fa9c717d5afb99a02e1e2760c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_LIST_REMOVE_CURRENT(field)</div><div class="ttdoc">Removes the current entry from a list during a traversal. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00556">linkedlists.h:556</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_gga44ac88ed1b656e254dcad5cf0dbd2a22a34d60938c22ee31e3eafa756c016020d"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a34d60938c22ee31e3eafa756c016020d">AST_MSG_DATA_ATTR_TO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00455">message.h:455</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a29ff71f9d5c7927906ebd437fe372056"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a29ff71f9d5c7927906ebd437fe372056">AST_FRAME_NULL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00107">include/asterisk/frame.h:107</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">include/asterisk/frame.h:105</a></div></div>
<div class="ttc" id="structframe__list_html"><div class="ttname"><a href="../../d9/d42/structframe__list.html">frame_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00590">res_rtp_asterisk.c:590</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_a483cd10a0ddcca5814298bdb4f153878"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a></div><div class="ttdeci">#define ast_bridge_channel_unlock(bridge_channel)</div><div class="ttdoc">Unlock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00244">bridge_channel.h:244</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a8eed32758f5880ff8ec632c30525472b"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a8eed32758f5880ff8ec632c30525472b">ast_bridge_channel::to_channel</a></div><div class="ttdeci">struct ast_vector_int to_channel</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00192">bridge_channel.h:192</a></div></div>
<div class="ttc" id="alertpipe_8h_html_ac503d210cefe419a8c43d2e713c97bf9"><div class="ttname"><a href="../../dc/d4d/alertpipe_8h.html#ac503d210cefe419a8c43d2e713c97bf9">ast_alertpipe_read</a></div><div class="ttdeci">ast_alert_status_t ast_alertpipe_read(int alert_pipe[2])</div><div class="ttdoc">Read an event from an alert pipe. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d7a/alertpipe_8c_source.html#l00102">alertpipe.c:102</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a55935aecf1002b1dfa1324bc3799b67c"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a55935aecf1002b1dfa1324bc3799b67c">ast_bridge_channel::alert_pipe</a></div><div class="ttdeci">int alert_pipe[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00151">bridge_channel.h:151</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_gga44ac88ed1b656e254dcad5cf0dbd2a22a7e8412f5b805e70e50a66150bad4d292"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a7e8412f5b805e70e50a66150bad4d292">AST_MSG_DATA_ATTR_FROM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00456">message.h:456</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_ga4edd2c0456a7d3f1658e48e2150c9665"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#ga4edd2c0456a7d3f1658e48e2150c9665">ast_msg_data_get_attribute</a></div><div class="ttdeci">const char * ast_msg_data_get_attribute(struct ast_msg_data *msg, enum ast_msg_data_attribute_type attribute_type)</div><div class="ttdoc">Get attribute from ast_msg_data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01533">message.c:1533</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__frame_html_a8383e75e786449dd2f4258b0819dd8f1"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">ast_frame::stream_num</a></div><div class="ttdeci">int stream_num</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00197">include/asterisk/frame.h:197</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="linkedlists_8h_html_aa5be52067bf16bdc7e56ca19b5ba858d"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_BEGIN(head, var, field)</div><div class="ttdoc">Loops safely over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00528">linkedlists.h:528</a></div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a3742c8c577dcc82edd8c4431a11a599e"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a3742c8c577dcc82edd8c4431a11a599e">bridge_frame_free</a></div><div class="ttdeci">static void bridge_frame_free(struct ast_frame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01023">bridge_channel.c:1023</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_af6a8305ad69cc97256e0d9890261232a"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#af6a8305ad69cc97256e0d9890261232a">bridge_channel_handle_action</a></div><div class="ttdeci">static void bridge_channel_handle_action(struct ast_bridge_channel *bridge_channel, enum bridge_channel_action_type action, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l02067">bridge_channel.c:2067</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
<div class="ttc" id="structsync__payload_html_aef5b927d15f11382bf5f276630c08287"><div class="ttname"><a href="../../d7/d61/structsync__payload.html#aef5b927d15f11382bf5f276630c08287">sync_payload::data</a></div><div class="ttdeci">unsigned char data[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00091">bridge_channel.c:91</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a46acfb8805bd7c339b2c8300a154e9e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46acfb8805bd7c339b2c8300a154e9e8">&#9670;&nbsp;</a></span>bridge_channel_internal_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a>* bridge_channel_internal_alloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>bridge</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l03151">3151</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00151">ast_bridge_channel::alert_pipe</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d6/d7a/alertpipe_8c_source.html#l00038">ast_alertpipe_init()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00199">ast_cond_init</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00100">ast_bridge_channel::bridge</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l03117">bridge_channel_destroy()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00087">ast_bridge_channel::cond</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l01667">ast_bridge_join()</a>, and <a class="el" href="../../d0/d95/bridge_8c_source.html#l01823">bridge_impart_internal()</a>.</p>
<div class="fragment"><div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;{</div><div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel;</div><div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;</div><div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;   bridge_channel = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a>), <a class="code" href="../../d3/d32/bridge__channel_8c.html#a7b5aeb4739651650c4d2cb568073d608">bridge_channel_destroy</a>);</div><div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;   <span class="keywordflow">if</span> (!bridge_channel) {</div><div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;   }</div><div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a>(&amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d4d/alertpipe_8h.html#a89830ce69038617b318b8e0c74def229">ast_alertpipe_init</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a55935aecf1002b1dfa1324bc3799b67c">alert_pipe</a>)) {</div><div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(bridge_channel, -1);</div><div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;   }</div><div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;   <span class="keywordflow">if</span> (bridge) {</div><div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;      bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a> = <a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>;</div><div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, +1);</div><div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;   }</div><div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;</div><div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;   <span class="comment">/* The stream_map is initialized later - see ast_bridge_channel_stream_map */</span></div><div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;</div><div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;   <span class="keywordflow">return</span> bridge_channel;</div><div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;}</div><div class="ttc" id="lock_8h_html_a69e9591803d36f5683eb9b084442be9b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a></div><div class="ttdeci">#define ast_cond_init(cond, attr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00199">lock.h:199</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="alertpipe_8h_html_a89830ce69038617b318b8e0c74def229"><div class="ttname"><a href="../../dc/d4d/alertpipe_8h.html#a89830ce69038617b318b8e0c74def229">ast_alertpipe_init</a></div><div class="ttdeci">int ast_alertpipe_init(int alert_pipe[2])</div><div class="ttdoc">Initialize an alert pipe. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d7a/alertpipe_8c_source.html#l00038">alertpipe.c:38</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a7b5aeb4739651650c4d2cb568073d608"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a7b5aeb4739651650c4d2cb568073d608">bridge_channel_destroy</a></div><div class="ttdeci">static void bridge_channel_destroy(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l03117">bridge_channel.c:3117</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a1c7181c39f99ee801943a0d0aa9872b9">ast_bridge_channel::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00087">bridge_channel.h:87</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a55935aecf1002b1dfa1324bc3799b67c"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a55935aecf1002b1dfa1324bc3799b67c">ast_bridge_channel::alert_pipe</a></div><div class="ttdeci">int alert_pipe[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00151">bridge_channel.h:151</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="structast__bridge__channel_html"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a></div><div class="ttdoc">Structure that contains information regarding a channel in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00084">bridge_channel.h:84</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa08031dd21d51319a38015ed87e74687"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa08031dd21d51319a38015ed87e74687">&#9670;&nbsp;</a></span>bridge_channel_internal_allows_optimization()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bridge_channel_internal_allows_optimization </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l03110">3110</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00449">AST_LIST_EMPTY</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00121">ast_bridge_channel::in_bridge</a>, and <a class="el" href="../../d5/dca/structast__bridge__channel.html#a7e580256fbadf0a28137681296f9b6b8">ast_bridge_channel::wr_queue</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l02627">optimize_lock_chan_stack()</a>, and <a class="el" href="../../d0/d95/bridge_8c_source.html#l02672">optimize_lock_peer_stack()</a>.</p>
<div class="fragment"><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;{</div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;   <span class="keywordflow">return</span> bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#afacf05ff49bf5cd3c7170b3c51943d2e">in_bridge</a></div><div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;      &amp;&amp; <a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(&amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a7e580256fbadf0a28137681296f9b6b8">wr_queue</a>);</div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;}</div><div class="ttc" id="structast__bridge__channel_html_a7e580256fbadf0a28137681296f9b6b8"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a7e580256fbadf0a28137681296f9b6b8">ast_bridge_channel::wr_queue</a></div><div class="ttdeci">struct ast_bridge_channel::@230 wr_queue</div></div>
<div class="ttc" id="linkedlists_8h_html_a4a1884cde93e53bef32ca85c194a1d05"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a></div><div class="ttdeci">#define AST_LIST_EMPTY(head)</div><div class="ttdoc">Checks whether the specified list contains any entries. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00449">linkedlists.h:449</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_afacf05ff49bf5cd3c7170b3c51943d2e"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#afacf05ff49bf5cd3c7170b3c51943d2e">ast_bridge_channel::in_bridge</a></div><div class="ttdeci">unsigned int in_bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00121">bridge_channel.h:121</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acd65272991204985a1c6ca5a30769472"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd65272991204985a1c6ca5a30769472">&#9670;&nbsp;</a></span>bridge_channel_internal_join()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bridge_channel_internal_join </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02902">2902</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01959">ao2_t_cleanup</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00094">AST_BRIDGE_CAPABILITY_MULTIMIX</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01762">ast_bridge_channel_feature_digit()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00605">ast_bridge_channel_kick()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00222">ast_bridge_channel_lock_bridge()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00337">ast_bridge_channel_restore_formats()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03662">ast_bridge_features_merge()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03568">ast_bridge_features_remove()</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00183">AST_BRIDGE_HOOK_REMOVE_ON_PULL</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00194">AST_BRIDGE_HOOK_TYPE_JOIN</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00195">AST_BRIDGE_HOOK_TYPE_LEAVE</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00480">ast_bridge_lock</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03984">ast_bridge_remove_video_src()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00493">ast_bridge_unlock</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l11070">ast_channel_end_dtmf()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l11104">ast_channel_feature_hooks_get()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01260">ast_channel_flags()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00485">ast_channel_hold_state()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01240">ast_channel_internal_bridge()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01244">ast_channel_internal_bridge_set()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01046">ast_channel_is_t38_active()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00856">ast_channel_readformat()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00388">ast_channel_sending_dtmf_digit()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00397">ast_channel_sending_dtmf_tv()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00860">ast_channel_writeformat()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00293">AST_CONTROL_HOLD</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00303">AST_CONTROL_SRCCHANGE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00301">AST_CONTROL_T38_PARAMETERS</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00294">AST_CONTROL_UNHOLD</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01036">AST_FLAG_BRIDGE_DUAL_REDIRECT_WAIT</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00988">AST_FLAG_ZOMBIE</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04322">ast_indicate()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04698">ast_indicate_data()</a>, <a class="el" href="../../d3/d1d/abstract__jb_8c_source.html#l00585">ast_jb_enable_for_channel()</a>, <a class="el" href="../../d1/d22/logger_8c_source.html#l01962">ast_read_threadstorage_callid()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00374">AST_T38_TERMINATED</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00100">ast_bridge_channel::bridge</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02136">bridge_channel_dissolve_check()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02872">bridge_channel_event_join_leave()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l01626">bridge_channel_impart_signal()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02178">bridge_channel_internal_pull()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02315">bridge_channel_internal_push()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00792">bridge_channel_settle_owed_events()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00062">BRIDGE_CHANNEL_STATE_WAIT</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02808">bridge_channel_wait()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l01443">bridge_reconfigured()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00369">ast_bridge::callid</a>, <a class="el" href="../../d0/d3b/bridge__technology_8h_source.html#l00066">ast_bridge_technology::capabilities</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00394">ast_bridge::cause</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00132">ast_bridge_channel::features</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00127">ast_bridge_channel::inhibit_colp</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00137">ast_bridge_channel::read_format</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00398">ast_control_t38_parameters::request_response</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00089">ast_bridge_channel::state</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00093">ast_bridge_channel::swap</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00363">ast_bridge::technology</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00409">ast_bridge::uniqueid</a>, and <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00139">ast_bridge_channel::write_format</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l01667">ast_bridge_join()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l01757">bridge_channel_depart_thread()</a>, and <a class="el" href="../../d0/d95/bridge_8c_source.html#l01788">bridge_channel_ind_thread()</a>.</p>
<div class="fragment"><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;{</div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;   uint8_t indicate_src_change = 0;</div><div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a> *channel_features;</div><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *swap;</div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;</div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Bridge %s: %p(%s) is joining\n&quot;</span>,</div><div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;      bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>,</div><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;      bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;</div><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;<span class="comment">    * Directly locking the bridge is safe here because nobody else</span></div><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;<span class="comment">    * knows about this bridge_channel yet.</span></div><div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#ab8ee807d2c3a21d19e16fedf35c90de8">ast_bridge_lock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;</div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;</div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;   bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a86f01027937b6cb7bd99d64117af52a8">read_format</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;   bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4e704d59963fad8db5a2d20f6aef944a">write_format</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;</div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;   <span class="comment">/* Make sure we&#39;re still good to be put into a bridge */</span></div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a2e46e4da6a025dfe7c64c4f1a480967b">ast_channel_internal_bridge</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)</div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;      || <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a26796fa52cc5857446eec8d16a4b718d">AST_FLAG_ZOMBIE</a>)) {</div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Bridge %s: %p(%s) failed to join Bridge\n&quot;</span>,</div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;         bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>,</div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;         bridge_channel,</div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;   }</div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a9860b7152c790e2c80244deb5c67ce5d">ast_channel_internal_bridge_set</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;</div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;   <span class="comment">/* Attach features requested by the channel */</span></div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;   channel_features = <a class="code" href="../../d5/d7b/channel_8h.html#ab5571bd5fd71f1c9c3b68af4082b2c73">ast_channel_feature_hooks_get</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;   <span class="keywordflow">if</span> (channel_features) {</div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#a91794e42131b7edc3119b92d789f8268">ast_bridge_features_merge</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">features</a>, channel_features);</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;   }</div><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;</div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;   <span class="comment">/* Add the jitterbuffer if the channel requires it */</span></div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;   <a class="code" href="../../dc/d14/abstract__jb_8h.html#a88cb2f0706e83150716bcd35cd503c3e">ast_jb_enable_for_channel</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;</div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;   <span class="keywordflow">if</span> (!bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a62f8995a6eac6c8a48205a6f3815d54b">callid</a>) {</div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;      bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a62f8995a6eac6c8a48205a6f3815d54b">callid</a> = <a class="code" href="../../d1/d8c/logger_8h.html#a5b3f39ea262ffa795ce4b597968ad00b">ast_read_threadstorage_callid</a>();</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;   }</div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;</div><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;   <span class="comment">/* Take the swap channel ref from the bridge_channel struct. */</span></div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;   swap = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a3bf3c4e34892d0033814ab5fec0e006f">swap</a>;</div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;</div><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d32/bridge__channel_8c.html#a9798f7ecff1382a175d9dfcf1e8334e6">bridge_channel_internal_push</a>(bridge_channel)) {</div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;      <span class="keywordtype">int</span> cause = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#aa4d0ccb9d0904892652f2f258c5ad225">cause</a>;</div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;</div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a7e482bb2dcffd792205f114ddfa098fb">ast_bridge_channel_kick</a>(bridge_channel, cause);</div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a>(bridge_channel);</div><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a0a9bbd9a809f8f52c2945df40ac89abb">ast_bridge_features_remove</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">features</a>,</div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;         <a class="code" href="../../dc/d7a/bridge__features_8h.html#a41510c1f43cb3401f5c7c88d9c9a8d11a2b221cc62ec019751101af0d7a754cb5">AST_BRIDGE_HOOK_REMOVE_ON_PULL</a>);</div><div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a97a6be0c1c4165d3a633cbf6d365d450">bridge_channel_dissolve_check</a>(bridge_channel);</div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;      res = -1;</div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;   }</div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;   <a class="code" href="../../d5/dde/bridge__internal_8h.html#a6f66125893195db451bca7e9d71bd0a5">bridge_reconfigured</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, !bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#aa30fb781e59e7c7b6449914dd9ad08d2">inhibit_colp</a>);</div><div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;</div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;   <span class="keywordflow">if</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a871f4f1d537a1cd524ee8c28b623104f">state</a> == <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853">BRIDGE_CHANNEL_STATE_WAIT</a>) {</div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;<span class="comment">       * Indicate a source change since this channel is entering the</span></div><div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;<span class="comment">       * bridge system only if the bridge technology is not MULTIMIX</span></div><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;<span class="comment">       * capable.  The MULTIMIX technology has already done it.</span></div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;      <span class="keywordflow">if</span> (!(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#aabb60a181a9e98fb31f8666fb4f5d0b8">technology</a>-&gt;<a class="code" href="../../d1/d04/structast__bridge__technology.html#a04532f57b1eebac73f24b2a02dab161f">capabilities</a></div><div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;         &amp; <a class="code" href="../../d4/d56/bridge_8h.html#a815c9b3e933dfd4b8f523cf55caa5bbfabd40da8a498f3027c44dfa2e92d5f4ac">AST_BRIDGE_CAPABILITY_MULTIMIX</a>)) {</div><div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;         indicate_src_change = 1;</div><div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;      }</div><div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;</div><div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;      <a class="code" href="../../d9/dfc/bridge__channel__internal_8h.html#a74e792941ccfcad7b6ba895ec44b2025">bridge_channel_impart_signal</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;</div><div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;      <span class="comment">/* Must release any swap ref after unlocking the bridge. */</span></div><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#abd9eeaf9633f630d7588f6a7de7b9fbe">ao2_t_cleanup</a>(swap, <span class="stringliteral">&quot;Bridge push with swap successful&quot;</span>);</div><div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;      swap = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;</div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;      <span class="keywordflow">if</span> (indicate_src_change) {</div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af334ccaa958af9b049d6bfcaa41549b8">AST_CONTROL_SRCCHANGE</a>);</div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;      }</div><div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;</div><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a9a67c7074975dc146672c23e43c05fa1">bridge_channel_event_join_leave</a>(bridge_channel, <a class="code" href="../../dc/d7a/bridge__features_8h.html#a122c52bc5dec74974f3d4cf3870e7da3a560e70ed0a87b3e30f0e332cfebec8ee">AST_BRIDGE_HOOK_TYPE_JOIN</a>);</div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;</div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;      <span class="keywordflow">while</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a871f4f1d537a1cd524ee8c28b623104f">state</a> == <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853">BRIDGE_CHANNEL_STATE_WAIT</a>) {</div><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;         <span class="comment">/* Wait for something to do. */</span></div><div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;         <a class="code" href="../../d3/d32/bridge__channel_8c.html#a717bb399c92f239032b5bfd020df4b4a">bridge_channel_wait</a>(bridge_channel);</div><div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;      }</div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;</div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;      <span class="comment">/* Force a timeout on any accumulated DTMF hook digits. */</span></div><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a69864377e8f1cf05ba95f1645bc98c65">ast_bridge_channel_feature_digit</a>(bridge_channel, 0);</div><div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;</div><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a9a67c7074975dc146672c23e43c05fa1">bridge_channel_event_join_leave</a>(bridge_channel, <a class="code" href="../../dc/d7a/bridge__features_8h.html#a122c52bc5dec74974f3d4cf3870e7da3ac47686eedfc6349818302b402b72461d">AST_BRIDGE_HOOK_TYPE_LEAVE</a>);</div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a>(bridge_channel);</div><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;   }</div><div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;</div><div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#abbcf6b683169c58f6441e3956257c827">bridge_channel_internal_pull</a>(bridge_channel);</div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#a47058a18972f43983eb9109737c43229">bridge_channel_settle_owed_events</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, bridge_channel);</div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;   <a class="code" href="../../d5/dde/bridge__internal_8h.html#a6f66125893195db451bca7e9d71bd0a5">bridge_reconfigured</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, 1);</div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;</div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;   <span class="comment">/* Remove ourselves if we are the video source */</span></div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a98000e740561c2e40e39f9edd191c38a">ast_bridge_remove_video_src</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;</div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;</div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;   <span class="comment">/* Must release any swap ref after unlocking the bridge. */</span></div><div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#abd9eeaf9633f630d7588f6a7de7b9fbe">ao2_t_cleanup</a>(swap, <span class="stringliteral">&quot;Bridge push with swap failed or exited immediately&quot;</span>);</div><div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;</div><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;   <span class="comment">/* Complete any active hold before exiting the bridge. */</span></div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#ac13c3b096520bacd17e9c023280e580f">ast_channel_hold_state</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>) == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5">AST_CONTROL_HOLD</a>) {</div><div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Channel %s simulating UNHOLD for bridge end.\n&quot;</span>,</div><div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e">AST_CONTROL_UNHOLD</a>);</div><div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;   }</div><div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;</div><div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;   <span class="comment">/* Complete any partial DTMF digit before exiting the bridge. */</span></div><div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#adfb1957995e60f6711ae15b8b77a0ba6">ast_channel_sending_dtmf_digit</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)) {</div><div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a0b5ab7d69d45eb506f08997ccaddcf3b">ast_channel_end_dtmf</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>,</div><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#adfb1957995e60f6711ae15b8b77a0ba6">ast_channel_sending_dtmf_digit</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a4ebd6b7a4ee77aad814080881a495dc9">ast_channel_sending_dtmf_tv</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>), <span class="stringliteral">&quot;bridge end&quot;</span>);</div><div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;   }</div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;</div><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;   <span class="comment">/* Complete any T.38 session before exiting the bridge. */</span></div><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#af25c03a3c3f23666af616ab1740ac0c8">ast_channel_is_t38_active</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)) {</div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d5/def/structast__control__t38__parameters.html">ast_control_t38_parameters</a> t38_parameters = {</div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;         .<a class="code" href="../../d5/def/structast__control__t38__parameters.html#adb36822366e10ce64ca8337c512732a6">request_response</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4ba9df578b4287c86673d7f40f9abcdc86f">AST_T38_TERMINATED</a>,</div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;      };</div><div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;</div><div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Channel %s simulating T.38 terminate for bridge end.\n&quot;</span>,</div><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aa8c3522af1bc639cbd5b38f5fdf171fa">ast_indicate_data</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a7334c9d27a6d70fe7c85b60b864788fc">AST_CONTROL_T38_PARAMETERS</a>,</div><div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;         &amp;t38_parameters, <span class="keyword">sizeof</span>(t38_parameters));</div><div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;   }</div><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;</div><div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;   <span class="comment">/* Indicate a source change since this channel is leaving the bridge system. */</span></div><div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af334ccaa958af9b049d6bfcaa41549b8">AST_CONTROL_SRCCHANGE</a>);</div><div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;</div><div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;<span class="comment">    * Wait for any dual redirect to complete.</span></div><div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;<span class="comment">    * Must be done while &quot;still in the bridge&quot; for ast_async_goto()</span></div><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;<span class="comment">    * to work right.</span></div><div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;   <span class="keywordflow">while</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a21a03514eb4882151cf8768f6f9cd7ec">AST_FLAG_BRIDGE_DUAL_REDIRECT_WAIT</a>)) {</div><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;      sched_yield();</div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;   }</div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a9860b7152c790e2c80244deb5c67ce5d">ast_channel_internal_bridge_set</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;</div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#ac77801ebc652f818148d6da29869970c">ast_bridge_channel_restore_formats</a>(bridge_channel);</div><div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;</div><div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;}</div><div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5">AST_CONTROL_HOLD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00293">include/asterisk/frame.h:293</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="astobj2_8h_html_abd9eeaf9633f630d7588f6a7de7b9fbe"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#abd9eeaf9633f630d7588f6a7de7b9fbe">ao2_t_cleanup</a></div><div class="ttdeci">#define ao2_t_cleanup(obj, tag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01959">astobj2.h:1959</a></div></div>
<div class="ttc" id="channel_8h_html_ac13c3b096520bacd17e9c023280e580f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac13c3b096520bacd17e9c023280e580f">ast_channel_hold_state</a></div><div class="ttdeci">int ast_channel_hold_state(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00485">channel_internal_api.c:485</a></div></div>
<div class="ttc" id="structast__bridge_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">ast_bridge::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00409">bridge.h:409</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a65633fdc6178dc8d9f754fda0166d16e"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">ast_bridge_channel::features</a></div><div class="ttdeci">struct ast_bridge_features * features</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00132">bridge_channel.h:132</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a717bb399c92f239032b5bfd020df4b4a"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a717bb399c92f239032b5bfd020df4b4a">bridge_channel_wait</a></div><div class="ttdeci">static void bridge_channel_wait(struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l02808">bridge_channel.c:2808</a></div></div>
<div class="ttc" id="structast__bridge__features_html"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a></div><div class="ttdoc">Structure that contains features information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00263">bridge_features.h:263</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a9798f7ecff1382a175d9dfcf1e8334e6"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a9798f7ecff1382a175d9dfcf1e8334e6">bridge_channel_internal_push</a></div><div class="ttdeci">int bridge_channel_internal_push(struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l02315">bridge_channel.c:2315</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="channel_8h_html_adfb1957995e60f6711ae15b8b77a0ba6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#adfb1957995e60f6711ae15b8b77a0ba6">ast_channel_sending_dtmf_digit</a></div><div class="ttdeci">char ast_channel_sending_dtmf_digit(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00388">channel_internal_api.c:388</a></div></div>
<div class="ttc" id="structast__control__t38__parameters_html"><div class="ttname"><a href="../../d5/def/structast__control__t38__parameters.html">ast_control_t38_parameters</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00397">include/asterisk/frame.h:397</a></div></div>
<div class="ttc" id="channel_8h_html_aef2af15a597c948e97628da6c5c84f28"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a></div><div class="ttdeci">int ast_indicate(struct ast_channel *chan, int condition)</div><div class="ttdoc">Indicates condition of channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04322">channel.c:4322</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a41510c1f43cb3401f5c7c88d9c9a8d11a2b221cc62ec019751101af0d7a754cb5"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a41510c1f43cb3401f5c7c88d9c9a8d11a2b221cc62ec019751101af0d7a754cb5">AST_BRIDGE_HOOK_REMOVE_ON_PULL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00183">bridge_features.h:183</a></div></div>
<div class="ttc" id="structast__bridge_html_a62f8995a6eac6c8a48205a6f3815d54b"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a62f8995a6eac6c8a48205a6f3815d54b">ast_bridge::callid</a></div><div class="ttdeci">ast_callid callid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00369">bridge.h:369</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_ac77801ebc652f818148d6da29869970c"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ac77801ebc652f818148d6da29869970c">ast_bridge_channel_restore_formats</a></div><div class="ttdeci">void ast_bridge_channel_restore_formats(struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Restore the formats of a bridge channel&amp;#39;s channel to how they were before bridge_channel_internal_joi...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00337">bridge_channel.c:337</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a871f4f1d537a1cd524ee8c28b623104f"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a871f4f1d537a1cd524ee8c28b623104f">ast_bridge_channel::state</a></div><div class="ttdeci">enum bridge_channel_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00089">bridge_channel.h:89</a></div></div>
<div class="ttc" id="structast__control__t38__parameters_html_adb36822366e10ce64ca8337c512732a6"><div class="ttname"><a href="../../d5/def/structast__control__t38__parameters.html#adb36822366e10ce64ca8337c512732a6">ast_control_t38_parameters::request_response</a></div><div class="ttdeci">enum ast_control_t38 request_response</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00398">include/asterisk/frame.h:398</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a9a67c7074975dc146672c23e43c05fa1"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a9a67c7074975dc146672c23e43c05fa1">bridge_channel_event_join_leave</a></div><div class="ttdeci">static void bridge_channel_event_join_leave(struct ast_bridge_channel *bridge_channel, enum ast_bridge_hook_type type)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l02872">bridge_channel.c:2872</a></div></div>
<div class="ttc" id="channel_8h_html_aa8c3522af1bc639cbd5b38f5fdf171fa"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa8c3522af1bc639cbd5b38f5fdf171fa">ast_indicate_data</a></div><div class="ttdeci">int ast_indicate_data(struct ast_channel *chan, int condition, const void *data, size_t datalen)</div><div class="ttdoc">Indicates condition of channel, with payload. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04698">channel.c:4698</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a97a6be0c1c4165d3a633cbf6d365d450"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a97a6be0c1c4165d3a633cbf6d365d450">bridge_channel_dissolve_check</a></div><div class="ttdeci">static void bridge_channel_dissolve_check(struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l02136">bridge_channel.c:2136</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a69864377e8f1cf05ba95f1645bc98c65"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a69864377e8f1cf05ba95f1645bc98c65">ast_bridge_channel_feature_digit</a></div><div class="ttdeci">void ast_bridge_channel_feature_digit(struct ast_bridge_channel *bridge_channel, int digit)</div><div class="ttdoc">Add a DTMF digit to the collected digits to match against DTMF features. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01762">bridge_channel.c:1762</a></div></div>
<div class="ttc" id="channel_8h_html_a2e46e4da6a025dfe7c64c4f1a480967b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a2e46e4da6a025dfe7c64c4f1a480967b">ast_channel_internal_bridge</a></div><div class="ttdeci">struct ast_bridge * ast_channel_internal_bridge(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01240">channel_internal_api.c:1240</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="logger_8h_html_a5b3f39ea262ffa795ce4b597968ad00b"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a5b3f39ea262ffa795ce4b597968ad00b">ast_read_threadstorage_callid</a></div><div class="ttdeci">ast_callid ast_read_threadstorage_callid(void)</div><div class="ttdoc">extracts the callerid from the thread </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/logger_8c_source.html#l01962">logger.c:1962</a></div></div>
<div class="ttc" id="channel_8h_html_aaced431562223538a94e0e69cf94151a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a></div><div class="ttdeci">struct ast_format * ast_channel_readformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00856">channel_internal_api.c:856</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a7334c9d27a6d70fe7c85b60b864788fc"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a7334c9d27a6d70fe7c85b60b864788fc">AST_CONTROL_T38_PARAMETERS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00301">include/asterisk/frame.h:301</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="bridge_8h_html_a815c9b3e933dfd4b8f523cf55caa5bbfabd40da8a498f3027c44dfa2e92d5f4ac"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a815c9b3e933dfd4b8f523cf55caa5bbfabd40da8a498f3027c44dfa2e92d5f4ac">AST_BRIDGE_CAPABILITY_MULTIMIX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00094">bridge.h:94</a></div></div>
<div class="ttc" id="structast__bridge_html_aabb60a181a9e98fb31f8666fb4f5d0b8"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#aabb60a181a9e98fb31f8666fb4f5d0b8">ast_bridge::technology</a></div><div class="ttdeci">struct ast_bridge_technology * technology</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00363">bridge.h:363</a></div></div>
<div class="ttc" id="bridge_8h_html_a98000e740561c2e40e39f9edd191c38a"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a98000e740561c2e40e39f9edd191c38a">ast_bridge_remove_video_src</a></div><div class="ttdeci">void ast_bridge_remove_video_src(struct ast_bridge *bridge, struct ast_channel *chan)</div><div class="ttdoc">remove a channel as a source of video for the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03984">bridge.c:3984</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="abstract__jb_8h_html_a88cb2f0706e83150716bcd35cd503c3e"><div class="ttname"><a href="../../dc/d14/abstract__jb_8h.html#a88cb2f0706e83150716bcd35cd503c3e">ast_jb_enable_for_channel</a></div><div class="ttdeci">void ast_jb_enable_for_channel(struct ast_channel *chan)</div><div class="ttdoc">Sets a jitterbuffer frame hook on the channel based on the channel&amp;#39;s stored jitterbuffer configuratio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d1d/abstract__jb_8c_source.html#l00585">abstract_jb.c:585</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a7e482bb2dcffd792205f114ddfa098fb"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a7e482bb2dcffd792205f114ddfa098fb">ast_bridge_channel_kick</a></div><div class="ttdeci">void ast_bridge_channel_kick(struct ast_bridge_channel *bridge_channel, int cause)</div><div class="ttdoc">Kick the channel out of the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00605">bridge_channel.c:605</a></div></div>
<div class="ttc" id="channel_8h_html_a9860b7152c790e2c80244deb5c67ce5d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9860b7152c790e2c80244deb5c67ce5d">ast_channel_internal_bridge_set</a></div><div class="ttdeci">void ast_channel_internal_bridge_set(struct ast_channel *chan, struct ast_bridge *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01244">channel_internal_api.c:1244</a></div></div>
<div class="ttc" id="bridge__internal_8h_html_a6f66125893195db451bca7e9d71bd0a5"><div class="ttname"><a href="../../d5/dde/bridge__internal_8h.html#a6f66125893195db451bca7e9d71bd0a5">bridge_reconfigured</a></div><div class="ttdeci">void bridge_reconfigured(struct ast_bridge *bridge, unsigned int colp_update)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l01443">bridge.c:1443</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5a21a03514eb4882151cf8768f6f9cd7ec"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a21a03514eb4882151cf8768f6f9cd7ec">AST_FLAG_BRIDGE_DUAL_REDIRECT_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01036">channel.h:1036</a></div></div>
<div class="ttc" id="channel_8h_html_af25c03a3c3f23666af616ab1740ac0c8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af25c03a3c3f23666af616ab1740ac0c8">ast_channel_is_t38_active</a></div><div class="ttdeci">int ast_channel_is_t38_active(struct ast_channel *chan)</div><div class="ttdoc">This function will check if T.38 is active on the channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01046">channel_internal_api.c:1046</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4e704d59963fad8db5a2d20f6aef944a"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4e704d59963fad8db5a2d20f6aef944a">ast_bridge_channel::write_format</a></div><div class="ttdeci">struct ast_format * write_format</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00139">bridge_channel.h:139</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a91794e42131b7edc3119b92d789f8268"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a91794e42131b7edc3119b92d789f8268">ast_bridge_features_merge</a></div><div class="ttdeci">void ast_bridge_features_merge(struct ast_bridge_features *into, const struct ast_bridge_features *from)</div><div class="ttdoc">Merge one ast_bridge_features into another. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03662">bridge.c:3662</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_abbcf6b683169c58f6441e3956257c827"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#abbcf6b683169c58f6441e3956257c827">bridge_channel_internal_pull</a></div><div class="ttdeci">void bridge_channel_internal_pull(struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l02178">bridge_channel.c:2178</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a122c52bc5dec74974f3d4cf3870e7da3ac47686eedfc6349818302b402b72461d"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a122c52bc5dec74974f3d4cf3870e7da3ac47686eedfc6349818302b402b72461d">AST_BRIDGE_HOOK_TYPE_LEAVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00195">bridge_features.h:195</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a86f01027937b6cb7bd99d64117af52a8"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a86f01027937b6cb7bd99d64117af52a8">ast_bridge_channel::read_format</a></div><div class="ttdeci">struct ast_format * read_format</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00137">bridge_channel.h:137</a></div></div>
<div class="ttc" id="channel_8h_html_ab5571bd5fd71f1c9c3b68af4082b2c73"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab5571bd5fd71f1c9c3b68af4082b2c73">ast_channel_feature_hooks_get</a></div><div class="ttdeci">struct ast_bridge_features * ast_channel_feature_hooks_get(struct ast_channel *chan)</div><div class="ttdoc">Gets the channel-attached features a channel has access to upon being bridged. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l11104">channel.c:11104</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="bridge_8h_html_a0fb66f4741ca8d106af1917a2f1aab6e"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a></div><div class="ttdeci">#define ast_bridge_unlock(bridge)</div><div class="ttdoc">Unlock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00493">bridge.h:493</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_aa30fb781e59e7c7b6449914dd9ad08d2"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#aa30fb781e59e7c7b6449914dd9ad08d2">ast_bridge_channel::inhibit_colp</a></div><div class="ttdeci">unsigned int inhibit_colp</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00127">bridge_channel.h:127</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5a26796fa52cc5857446eec8d16a4b718d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a26796fa52cc5857446eec8d16a4b718d">AST_FLAG_ZOMBIE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00988">channel.h:988</a></div></div>
<div class="ttc" id="channel_8h_html_a0b5ab7d69d45eb506f08997ccaddcf3b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a0b5ab7d69d45eb506f08997ccaddcf3b">ast_channel_end_dtmf</a></div><div class="ttdeci">void ast_channel_end_dtmf(struct ast_channel *chan, char digit, struct timeval start, const char *why)</div><div class="ttdoc">Simulate a DTMF end on a broken bridge channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l11070">channel.c:11070</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a3bf3c4e34892d0033814ab5fec0e006f"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a3bf3c4e34892d0033814ab5fec0e006f">ast_bridge_channel::swap</a></div><div class="ttdeci">struct ast_channel * swap</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00093">bridge_channel.h:93</a></div></div>
<div class="ttc" id="bridge_8h_html_a0a9bbd9a809f8f52c2945df40ac89abb"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0a9bbd9a809f8f52c2945df40ac89abb">ast_bridge_features_remove</a></div><div class="ttdeci">void ast_bridge_features_remove(struct ast_bridge_features *features, enum ast_bridge_hook_remove_flags flags)</div><div class="ttdoc">Remove marked bridge channel feature hooks. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03568">bridge.c:3568</a></div></div>
<div class="ttc" id="structast__bridge_html_aa4d0ccb9d0904892652f2f258c5ad225"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#aa4d0ccb9d0904892652f2f258c5ad225">ast_bridge::cause</a></div><div class="ttdeci">int cause</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00394">bridge.h:394</a></div></div>
<div class="ttc" id="bridge_8h_html_ab8ee807d2c3a21d19e16fedf35c90de8"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ab8ee807d2c3a21d19e16fedf35c90de8">ast_bridge_lock</a></div><div class="ttdeci">#define ast_bridge_lock(bridge)</div><div class="ttdoc">Lock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00480">bridge.h:480</a></div></div>
<div class="ttc" id="channel_8h_html_a4ebd6b7a4ee77aad814080881a495dc9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4ebd6b7a4ee77aad814080881a495dc9">ast_channel_sending_dtmf_tv</a></div><div class="ttdeci">struct timeval ast_channel_sending_dtmf_tv(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00397">channel_internal_api.c:397</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e">AST_CONTROL_UNHOLD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00294">include/asterisk/frame.h:294</a></div></div>
<div class="ttc" id="bridge__channel__internal_8h_html_a74e792941ccfcad7b6ba895ec44b2025"><div class="ttname"><a href="../../d9/dfc/bridge__channel__internal_8h.html#a74e792941ccfcad7b6ba895ec44b2025">bridge_channel_impart_signal</a></div><div class="ttdeci">void bridge_channel_impart_signal(struct ast_channel *chan)</div><div class="ttdoc">Signal imparting threads to wake up. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l01626">bridge.c:1626</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a168d496bdac09ece3ce49cf473bbdb4ba9df578b4287c86673d7f40f9abcdc86f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4ba9df578b4287c86673d7f40f9abcdc86f">AST_T38_TERMINATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00374">include/asterisk/frame.h:374</a></div></div>
<div class="ttc" id="channel_8h_html_a91de92158876186d28ba1773877f2732"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a></div><div class="ttdeci">struct ast_flags * ast_channel_flags(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01260">channel_internal_api.c:1260</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853">BRIDGE_CHANNEL_STATE_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00062">bridge_channel.h:62</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a47058a18972f43983eb9109737c43229"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a47058a18972f43983eb9109737c43229">bridge_channel_settle_owed_events</a></div><div class="ttdeci">void bridge_channel_settle_owed_events(struct ast_bridge *orig_bridge, struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00792">bridge_channel.c:792</a></div></div>
<div class="ttc" id="channel_8h_html_a1dc625bd14a7875b04bfe0c388858929"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a></div><div class="ttdeci">struct ast_format * ast_channel_writeformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00860">channel_internal_api.c:860</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a7d01ff5caf025a97796d2dbb78f5f02c"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a></div><div class="ttdeci">void ast_bridge_channel_lock_bridge(struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Lock the bridge associated with the bridge channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00222">bridge_channel.c:222</a></div></div>
<div class="ttc" id="structast__bridge__technology_html_a04532f57b1eebac73f24b2a02dab161f"><div class="ttname"><a href="../../d1/d04/structast__bridge__technology.html#a04532f57b1eebac73f24b2a02dab161f">ast_bridge_technology::capabilities</a></div><div class="ttdeci">uint32_t capabilities</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3b/bridge__technology_8h_source.html#l00066">bridge_technology.h:66</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a122c52bc5dec74974f3d4cf3870e7da3a560e70ed0a87b3e30f0e332cfebec8ee"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a122c52bc5dec74974f3d4cf3870e7da3a560e70ed0a87b3e30f0e332cfebec8ee">AST_BRIDGE_HOOK_TYPE_JOIN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00194">bridge_features.h:194</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390af334ccaa958af9b049d6bfcaa41549b8"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390af334ccaa958af9b049d6bfcaa41549b8">AST_CONTROL_SRCCHANGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00303">include/asterisk/frame.h:303</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abbcf6b683169c58f6441e3956257c827"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbcf6b683169c58f6441e3956257c827">&#9670;&nbsp;</a></span>bridge_channel_internal_pull()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bridge_channel_internal_pull </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02178">2178</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00495">ast_bridge_channel_clear_roles()</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00065">AST_BRIDGE_CHANNEL_FLAG_LONELY</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00611">ast_bridge_publish_leave()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l11235">ast_channel_clear_flag()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01260">ast_channel_flags()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l10751">ast_channel_is_leaving_bridge()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01000">AST_FLAG_OUTGOING</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00855">AST_LIST_REMOVE</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00100">ast_bridge_channel::bridge</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02136">bridge_channel_dissolve_check()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00062">BRIDGE_CHANNEL_STATE_WAIT</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00371">ast_bridge::channels</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00271">ast_bridge_features::feature_flags</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00132">ast_bridge_channel::features</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00121">ast_bridge_channel::in_bridge</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00123">ast_bridge_channel::just_joined</a>, <a class="el" href="../../d0/d3b/bridge__technology_8h_source.html#l00127">ast_bridge_technology::leave</a>, <a class="el" href="../../d0/d3b/bridge__technology_8h_source.html#l00063">ast_bridge_technology::name</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00267">ast_bridge_methods::name</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00383">ast_bridge::num_active</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00381">ast_bridge::num_channels</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00385">ast_bridge::num_lonely</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00275">ast_bridge_methods::pull</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00396">ast_bridge::reconfigured</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00089">ast_bridge_channel::state</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00125">ast_bridge_channel::suspended</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00363">ast_bridge::technology</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00409">ast_bridge::uniqueid</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00359">ast_bridge::v_table</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02902">bridge_channel_internal_join()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02235">bridge_channel_internal_push_full()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l02096">bridge_do_merge()</a>, and <a class="el" href="../../d0/d95/bridge_8c_source.html#l02362">bridge_do_move()</a>.</p>
<div class="fragment"><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;{</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>;</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;   <span class="keywordflow">if</span> (!bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#afacf05ff49bf5cd3c7170b3c51943d2e">in_bridge</a>) {</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;   }</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;   bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#afacf05ff49bf5cd3c7170b3c51943d2e">in_bridge</a> = 0;</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Bridge %s: pulling %p(%s)\n&quot;</span>,</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;      bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>, bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Channel %s left &#39;%s&#39; %s-bridge &lt;%s&gt;\n&quot;</span>,</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;      bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#aabb60a181a9e98fb31f8666fb4f5d0b8">technology</a>-&gt;<a class="code" href="../../d1/d04/structast__bridge__technology.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>,</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;      bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a2f11ecc852af02fffecf1411013f0873">v_table</a>-&gt;<a class="code" href="../../d2/dd3/structast__bridge__methods.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>,</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;      bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>);</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;   <span class="keywordflow">if</span> (!bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a82df0e78742524f455a24e874ba28f49">just_joined</a>) {</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;      <span class="comment">/* Tell the bridge technology we are leaving so they tear us down */</span></div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Bridge %s: %p(%s) is leaving %s technology\n&quot;</span>,</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;         bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>, bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;         bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#aabb60a181a9e98fb31f8666fb4f5d0b8">technology</a>-&gt;<a class="code" href="../../d1/d04/structast__bridge__technology.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;      <span class="keywordflow">if</span> (bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#aabb60a181a9e98fb31f8666fb4f5d0b8">technology</a>-&gt;<a class="code" href="../../d1/d04/structast__bridge__technology.html#afe176c25906bf1cd867d59baeb920dc7">leave</a>) {</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;         bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#aabb60a181a9e98fb31f8666fb4f5d0b8">technology</a>-&gt;<a class="code" href="../../d1/d04/structast__bridge__technology.html#afe176c25906bf1cd867d59baeb920dc7">leave</a>(bridge, bridge_channel);</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;      }</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;   }</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;   <span class="comment">/* Remove channel from the bridge */</span></div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;   <span class="keywordflow">if</span> (!bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a2862ffde11c780129862e5549415a6f6">suspended</a>) {</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;      --bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a4d514eabb35f71dee132ef1df1c6cdbb">num_active</a>;</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;   }</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">features</a>-&gt;<a class="code" href="../../db/dba/structast__bridge__features.html#af15c2e8b6df8ce0bf570af18aa890deb">feature_flags</a>, <a class="code" href="../../dc/d7a/bridge__features_8h.html#adb39f3c49f940cca855ef8ae3dfc5f77a29fbd7797e61564f5f40c3361e7f4fc2">AST_BRIDGE_CHANNEL_FLAG_LONELY</a>)) {</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;      --bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#adaedd59efa9e3a1bf9ef24db6771e0a2">num_lonely</a>;</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;   }</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;   --bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a97e3bedeadf444995deb6fab68f57e21">num_channels</a>;</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa36e72b77f1b80881cd0a9fcca66ce19">AST_LIST_REMOVE</a>(&amp;bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a77542a877d8ed62331c5b3b6aa3e87a7">channels</a>, bridge_channel, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#a97a6be0c1c4165d3a633cbf6d365d450">bridge_channel_dissolve_check</a>(bridge_channel);</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;   bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a2f11ecc852af02fffecf1411013f0873">v_table</a>-&gt;<a class="code" href="../../d2/dd3/structast__bridge__methods.html#adcfc7ef2b1ee5305158a584970ddea65">pull</a>(bridge, bridge_channel);</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;   <a class="code" href="../../dd/dff/bridge__roles_8h.html#af01f5cb3712ef0b120433da770f645ab">ast_bridge_channel_clear_roles</a>(bridge_channel);</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;   <span class="comment">/* If we are not going to be hung up after leaving a bridge, and we were an</span></div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;<span class="comment">    * outgoing channel, clear the outgoing flag.</span></div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a36fa77a64746637c77c6b18a7999d0a2">AST_FLAG_OUTGOING</a>)</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;       &amp;&amp; (<a class="code" href="../../d5/d7b/channel_8h.html#abfe7d902da46e372034cda92b5c13c4f">ast_channel_is_leaving_bridge</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;           || bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a871f4f1d537a1cd524ee8c28b623104f">state</a> == <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853">BRIDGE_CHANNEL_STATE_WAIT</a>)) {</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Channel %s will survive this bridge; clearing outgoing (dialed) flag\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a1d9fcff85d7adbe0bd54f88eb927998c">ast_channel_clear_flag</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a36fa77a64746637c77c6b18a7999d0a2">AST_FLAG_OUTGOING</a>);</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;   }</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;   bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a41d441063234a215e985a56318a07a6f">reconfigured</a> = 1;</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;   <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#a4b295a5bab9da9b629c81985e2897840">ast_bridge_publish_leave</a>(bridge, bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;}</div><div class="ttc" id="stasis__bridges_8h_html_a4b295a5bab9da9b629c81985e2897840"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#a4b295a5bab9da9b629c81985e2897840">ast_bridge_publish_leave</a></div><div class="ttdeci">void ast_bridge_publish_leave(struct ast_bridge *bridge, struct ast_channel *chan)</div><div class="ttdoc">Publish a bridge channel leave event. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00611">stasis_bridges.c:611</a></div></div>
<div class="ttc" id="bridge__roles_8h_html_af01f5cb3712ef0b120433da770f645ab"><div class="ttname"><a href="../../dd/dff/bridge__roles_8h.html#af01f5cb3712ef0b120433da770f645ab">ast_bridge_channel_clear_roles</a></div><div class="ttdeci">void ast_bridge_channel_clear_roles(struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Clear all roles from a bridge_channel&amp;#39;s role list. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00495">bridge_roles.c:495</a></div></div>
<div class="ttc" id="structast__bridge_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">ast_bridge::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00409">bridge.h:409</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a65633fdc6178dc8d9f754fda0166d16e"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">ast_bridge_channel::features</a></div><div class="ttdeci">struct ast_bridge_features * features</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00132">bridge_channel.h:132</a></div></div>
<div class="ttc" id="structast__bridge_html_a4d514eabb35f71dee132ef1df1c6cdbb"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a4d514eabb35f71dee132ef1df1c6cdbb">ast_bridge::num_active</a></div><div class="ttdeci">unsigned int num_active</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00383">bridge.h:383</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="bridge__features_8h_html_adb39f3c49f940cca855ef8ae3dfc5f77a29fbd7797e61564f5f40c3361e7f4fc2"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#adb39f3c49f940cca855ef8ae3dfc5f77a29fbd7797e61564f5f40c3361e7f4fc2">AST_BRIDGE_CHANNEL_FLAG_LONELY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00065">bridge_features.h:65</a></div></div>
<div class="ttc" id="structast__bridge__methods_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d2/dd3/structast__bridge__methods.html#a8f8f80d37794cde9472343e4487ba3eb">ast_bridge_methods::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00267">bridge.h:267</a></div></div>
<div class="ttc" id="structast__bridge_html_a41d441063234a215e985a56318a07a6f"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a41d441063234a215e985a56318a07a6f">ast_bridge::reconfigured</a></div><div class="ttdeci">unsigned int reconfigured</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00396">bridge.h:396</a></div></div>
<div class="ttc" id="structast__bridge__technology_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d1/d04/structast__bridge__technology.html#a8f8f80d37794cde9472343e4487ba3eb">ast_bridge_technology::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3b/bridge__technology_8h_source.html#l00063">bridge_technology.h:63</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a871f4f1d537a1cd524ee8c28b623104f"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a871f4f1d537a1cd524ee8c28b623104f">ast_bridge_channel::state</a></div><div class="ttdeci">enum bridge_channel_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00089">bridge_channel.h:89</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a2862ffde11c780129862e5549415a6f6"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a2862ffde11c780129862e5549415a6f6">ast_bridge_channel::suspended</a></div><div class="ttdeci">unsigned int suspended</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00125">bridge_channel.h:125</a></div></div>
<div class="ttc" id="channel_8h_html_a1d9fcff85d7adbe0bd54f88eb927998c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1d9fcff85d7adbe0bd54f88eb927998c">ast_channel_clear_flag</a></div><div class="ttdeci">void ast_channel_clear_flag(struct ast_channel *chan, unsigned int flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l11235">channel.c:11235</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a97a6be0c1c4165d3a633cbf6d365d450"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a97a6be0c1c4165d3a633cbf6d365d450">bridge_channel_dissolve_check</a></div><div class="ttdeci">static void bridge_channel_dissolve_check(struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l02136">bridge_channel.c:2136</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa36e72b77f1b80881cd0a9fcca66ce19"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa36e72b77f1b80881cd0a9fcca66ce19">AST_LIST_REMOVE</a></div><div class="ttdeci">#define AST_LIST_REMOVE(head, elm, field)</div><div class="ttdoc">Removes a specific entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00855">linkedlists.h:855</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="structast__bridge_html_aabb60a181a9e98fb31f8666fb4f5d0b8"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#aabb60a181a9e98fb31f8666fb4f5d0b8">ast_bridge::technology</a></div><div class="ttdeci">struct ast_bridge_technology * technology</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00363">bridge.h:363</a></div></div>
<div class="ttc" id="structast__bridge__features_html_af15c2e8b6df8ce0bf570af18aa890deb"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html#af15c2e8b6df8ce0bf570af18aa890deb">ast_bridge_features::feature_flags</a></div><div class="ttdeci">struct ast_flags feature_flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00271">bridge_features.h:271</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structast__bridge__technology_html_afe176c25906bf1cd867d59baeb920dc7"><div class="ttname"><a href="../../d1/d04/structast__bridge__technology.html#afe176c25906bf1cd867d59baeb920dc7">ast_bridge_technology::leave</a></div><div class="ttdeci">void(* leave)(struct ast_bridge *bridge, struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Remove a channel from a bridging technology instance for a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3b/bridge__technology_8h_source.html#l00127">bridge_technology.h:127</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a82df0e78742524f455a24e874ba28f49"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a82df0e78742524f455a24e874ba28f49">ast_bridge_channel::just_joined</a></div><div class="ttdeci">unsigned int just_joined</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00123">bridge_channel.h:123</a></div></div>
<div class="ttc" id="channel_8h_html_abfe7d902da46e372034cda92b5c13c4f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abfe7d902da46e372034cda92b5c13c4f">ast_channel_is_leaving_bridge</a></div><div class="ttdeci">int ast_channel_is_leaving_bridge(struct ast_channel *chan)</div><div class="ttdoc">Determine if a channel is leaving a bridge, but not hung up. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10751">channel.c:10751</a></div></div>
<div class="ttc" id="structast__bridge_html_a2f11ecc852af02fffecf1411013f0873"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a2f11ecc852af02fffecf1411013f0873">ast_bridge::v_table</a></div><div class="ttdeci">const struct ast_bridge_methods * v_table</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00359">bridge.h:359</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="structast__bridge_html_adaedd59efa9e3a1bf9ef24db6771e0a2"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#adaedd59efa9e3a1bf9ef24db6771e0a2">ast_bridge::num_lonely</a></div><div class="ttdeci">unsigned int num_lonely</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00385">bridge.h:385</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_afacf05ff49bf5cd3c7170b3c51943d2e"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#afacf05ff49bf5cd3c7170b3c51943d2e">ast_bridge_channel::in_bridge</a></div><div class="ttdeci">unsigned int in_bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00121">bridge_channel.h:121</a></div></div>
<div class="ttc" id="structast__bridge_html_a77542a877d8ed62331c5b3b6aa3e87a7"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a77542a877d8ed62331c5b3b6aa3e87a7">ast_bridge::channels</a></div><div class="ttdeci">struct ast_bridge_channels_list channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00371">bridge.h:371</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5a36fa77a64746637c77c6b18a7999d0a2"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a36fa77a64746637c77c6b18a7999d0a2">AST_FLAG_OUTGOING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01000">channel.h:1000</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="structast__bridge__methods_html_adcfc7ef2b1ee5305158a584970ddea65"><div class="ttname"><a href="../../d2/dd3/structast__bridge__methods.html#adcfc7ef2b1ee5305158a584970ddea65">ast_bridge_methods::pull</a></div><div class="ttdeci">ast_bridge_pull_channel_fn pull</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00275">bridge.h:275</a></div></div>
<div class="ttc" id="channel_8h_html_a91de92158876186d28ba1773877f2732"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a></div><div class="ttdeci">struct ast_flags * ast_channel_flags(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01260">channel_internal_api.c:1260</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853">BRIDGE_CHANNEL_STATE_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00062">bridge_channel.h:62</a></div></div>
<div class="ttc" id="structast__bridge_html_a97e3bedeadf444995deb6fab68f57e21"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a97e3bedeadf444995deb6fab68f57e21">ast_bridge::num_channels</a></div><div class="ttdeci">unsigned int num_channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00381">bridge.h:381</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9798f7ecff1382a175d9dfcf1e8334e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9798f7ecff1382a175d9dfcf1e8334e6">&#9670;&nbsp;</a></span>bridge_channel_internal_push()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bridge_channel_internal_push </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02315">2315</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02235">bridge_channel_internal_push_full()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02902">bridge_channel_internal_join()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l02096">bridge_do_merge()</a>, and <a class="el" href="../../d0/d95/bridge_8c_source.html#l02362">bridge_do_move()</a>.</p>
<div class="fragment"><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;{</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d32/bridge__channel_8c.html#a5c5538e7375dc6d55c8c0efff87a21f8">bridge_channel_internal_push_full</a>(bridge_channel, 0);</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_a5c5538e7375dc6d55c8c0efff87a21f8"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a5c5538e7375dc6d55c8c0efff87a21f8">bridge_channel_internal_push_full</a></div><div class="ttdeci">int bridge_channel_internal_push_full(struct ast_bridge_channel *bridge_channel, int optimized)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l02235">bridge_channel.c:2235</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5c5538e7375dc6d55c8c0efff87a21f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c5538e7375dc6d55c8c0efff87a21f8">&#9670;&nbsp;</a></span>bridge_channel_internal_push_full()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bridge_channel_internal_push_full </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>optimized</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02235">2235</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00447">ast_bridge_channel_establish_roles()</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00065">AST_BRIDGE_CHANNEL_FLAG_LONELY</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00314">ast_bridge_channel_leave_bridge()</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00039">AST_BRIDGE_FLAG_DISSOLVE_EMPTY</a>, <a class="el" href="../../da/d0f/stasis__bridges_8c_source.html#l00582">ast_bridge_publish_enter()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00077">ast_clear_flag</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00730">AST_LIST_INSERT_TAIL</a>, <a class="el" href="../../df/d55/main_2frame_8c_source.html#l00079">ast_null_frame</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01139">ast_queue_frame()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00094">ast_set2_flag</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00100">ast_bridge_channel::bridge</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00786">bridge_channel_cancel_owed_events()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02178">bridge_channel_internal_pull()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00066">BRIDGE_CHANNEL_STATE_END_NO_DISSOLVE</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00062">BRIDGE_CHANNEL_STATE_WAIT</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l01469">bridge_find_channel()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00371">ast_bridge::channels</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00398">ast_bridge::dissolved</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00271">ast_bridge_features::feature_flags</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00377">ast_bridge::feature_flags</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00132">ast_bridge_channel::features</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00121">ast_bridge_channel::in_bridge</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00123">ast_bridge_channel::just_joined</a>, <a class="el" href="../../d0/d3b/bridge__technology_8h_source.html#l00063">ast_bridge_technology::name</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00267">ast_bridge_methods::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00383">ast_bridge::num_active</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00381">ast_bridge::num_channels</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00385">ast_bridge::num_lonely</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_builtin_setvar_helper()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00273">ast_bridge_methods::push</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00396">ast_bridge::reconfigured</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00089">ast_bridge_channel::state</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00125">ast_bridge_channel::suspended</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00093">ast_bridge_channel::swap</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00363">ast_bridge::technology</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00409">ast_bridge::uniqueid</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00359">ast_bridge::v_table</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02315">bridge_channel_internal_push()</a>, and <a class="el" href="../../d0/d95/bridge_8c_source.html#l02362">bridge_do_move()</a>.</p>
<div class="fragment"><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;{</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>;</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *<a class="code" href="../../d5/dca/structast__bridge__channel.html#a3bf3c4e34892d0033814ab5fec0e006f">swap</a>;</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(!bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#afacf05ff49bf5cd3c7170b3c51943d2e">in_bridge</a>);</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;   swap = <a class="code" href="../../d5/dde/bridge__internal_8h.html#af611fd393ca26b5fd2a8071867470ffc">bridge_find_channel</a>(bridge, bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a3bf3c4e34892d0033814ab5fec0e006f">swap</a>);</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;   bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a3bf3c4e34892d0033814ab5fec0e006f">swap</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;   <span class="keywordflow">if</span> (swap) {</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Bridge %s: pushing %p(%s) by swapping with %p(%s)\n&quot;</span>,</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;         bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>, bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;         swap, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(swap-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Bridge %s: pushing %p(%s)\n&quot;</span>,</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;         bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>, bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;   }</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;   <span class="comment">/* Add channel to the bridge */</span></div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;   <span class="keywordflow">if</span> (bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a9ea77c25c2c57ec45bc6dfdea1c1a228">dissolved</a></div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;      || bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a871f4f1d537a1cd524ee8c28b623104f">state</a> != <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853">BRIDGE_CHANNEL_STATE_WAIT</a></div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;      || (swap &amp;&amp; swap-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a871f4f1d537a1cd524ee8c28b623104f">state</a> != <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853">BRIDGE_CHANNEL_STATE_WAIT</a>)</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;      || bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a2f11ecc852af02fffecf1411013f0873">v_table</a>-&gt;<a class="code" href="../../d2/dd3/structast__bridge__methods.html#a60b76bf280f288b3ef3f1facf873b104">push</a>(bridge, bridge_channel, swap)) {</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Bridge %s: pushing %p(%s) into bridge failed\n&quot;</span>,</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;         bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>, bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;   }</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;   <a class="code" href="../../dd/dff/bridge__roles_8h.html#ad449a795348a52aefe000f13a1d015f8">ast_bridge_channel_establish_roles</a>(bridge_channel);</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;   <span class="keywordflow">if</span> (swap) {</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;      <span class="keywordtype">int</span> dissolve = <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#af15c2e8b6df8ce0bf570af18aa890deb">feature_flags</a>, <a class="code" href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444a7e495fdd770a14a1a2166ad18a16d8ca">AST_BRIDGE_FLAG_DISSOLVE_EMPTY</a>);</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;      <span class="comment">/* This flag is cleared so the act of this channel leaving does not cause it to dissolve if need be */</span></div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(&amp;bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#af15c2e8b6df8ce0bf570af18aa890deb">feature_flags</a>, <a class="code" href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444a7e495fdd770a14a1a2166ad18a16d8ca">AST_BRIDGE_FLAG_DISSOLVE_EMPTY</a>);</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;      <span class="keywordflow">if</span> (optimized) {</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;         <a class="code" href="../../d3/d32/bridge__channel_8c.html#a31a39e9eb864c0dc9dd9c2a8e5c84098">bridge_channel_cancel_owed_events</a>(swap);</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;      }</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a>(swap, <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaa708398f920511beb8ea9df06bf16daac">BRIDGE_CHANNEL_STATE_END_NO_DISSOLVE</a>, 0);</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#abbcf6b683169c58f6441e3956257c827">bridge_channel_internal_pull</a>(swap);</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a67b6713ff86cf82aaed821e9a87d1c21">ast_set2_flag</a>(&amp;bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#af15c2e8b6df8ce0bf570af18aa890deb">feature_flags</a>, dissolve, <a class="code" href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444a7e495fdd770a14a1a2166ad18a16d8ca">AST_BRIDGE_FLAG_DISSOLVE_EMPTY</a>);</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;   }</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;   bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#afacf05ff49bf5cd3c7170b3c51943d2e">in_bridge</a> = 1;</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;   bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a82df0e78742524f455a24e874ba28f49">just_joined</a> = 1;</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a77542a877d8ed62331c5b3b6aa3e87a7">channels</a>, bridge_channel, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;   ++bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a97e3bedeadf444995deb6fab68f57e21">num_channels</a>;</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">features</a>-&gt;<a class="code" href="../../db/dba/structast__bridge__features.html#af15c2e8b6df8ce0bf570af18aa890deb">feature_flags</a>, <a class="code" href="../../dc/d7a/bridge__features_8h.html#adb39f3c49f940cca855ef8ae3dfc5f77a29fbd7797e61564f5f40c3361e7f4fc2">AST_BRIDGE_CHANNEL_FLAG_LONELY</a>)) {</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;      ++bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#adaedd59efa9e3a1bf9ef24db6771e0a2">num_lonely</a>;</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;   }</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;   <span class="keywordflow">if</span> (!bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a2862ffde11c780129862e5549415a6f6">suspended</a>) {</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;      ++bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a4d514eabb35f71dee132ef1df1c6cdbb">num_active</a>;</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;   }</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Channel %s %s%s%s &#39;%s&#39; %s-bridge &lt;%s&gt;\n&quot;</span>,</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;      swap ? <span class="stringliteral">&quot;swapped with &quot;</span> : <span class="stringliteral">&quot;joined&quot;</span>,</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;      swap ? <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(swap-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>) : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;      swap ? <span class="stringliteral">&quot; into&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;      bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#aabb60a181a9e98fb31f8666fb4f5d0b8">technology</a>-&gt;<a class="code" href="../../d1/d04/structast__bridge__technology.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>,</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;      bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a2f11ecc852af02fffecf1411013f0873">v_table</a>-&gt;<a class="code" href="../../d2/dd3/structast__bridge__methods.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>,</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;      bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>);</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;   <a class="code" href="../../dc/d4e/stasis__bridges_8h.html#aecd7e5c63f8d0d4c022bd817d4241c5c">ast_bridge_publish_enter</a>(bridge, bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, swap ? swap-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a> : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;   <span class="comment">/* Clear any BLINDTRANSFER,ATTENDEDTRANSFER and FORWARDERNAME since the transfer has completed. */</span></div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="stringliteral">&quot;BLINDTRANSFER&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="stringliteral">&quot;ATTENDEDTRANSFER&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="stringliteral">&quot;FORWARDERNAME&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;   <span class="comment">/* Wake up the bridge channel thread to reevaluate any interval timers. */</span></div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>);</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;   bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a41d441063234a215e985a56318a07a6f">reconfigured</a> = 1;</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;}</div><div class="ttc" id="structast__bridge_html_af15c2e8b6df8ce0bf570af18aa890deb"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#af15c2e8b6df8ce0bf570af18aa890deb">ast_bridge::feature_flags</a></div><div class="ttdeci">struct ast_flags feature_flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00377">bridge.h:377</a></div></div>
<div class="ttc" id="structast__bridge_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">ast_bridge::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00409">bridge.h:409</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a65633fdc6178dc8d9f754fda0166d16e"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">ast_bridge_channel::features</a></div><div class="ttdeci">struct ast_bridge_features * features</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00132">bridge_channel.h:132</a></div></div>
<div class="ttc" id="structast__bridge_html_a4d514eabb35f71dee132ef1df1c6cdbb"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a4d514eabb35f71dee132ef1df1c6cdbb">ast_bridge::num_active</a></div><div class="ttdeci">unsigned int num_active</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00383">bridge.h:383</a></div></div>
<div class="ttc" id="utils_8h_html_a67b6713ff86cf82aaed821e9a87d1c21"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a67b6713ff86cf82aaed821e9a87d1c21">ast_set2_flag</a></div><div class="ttdeci">#define ast_set2_flag(p, value, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00094">utils.h:94</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="bridge__features_8h_html_adb39f3c49f940cca855ef8ae3dfc5f77a29fbd7797e61564f5f40c3361e7f4fc2"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#adb39f3c49f940cca855ef8ae3dfc5f77a29fbd7797e61564f5f40c3361e7f4fc2">AST_BRIDGE_CHANNEL_FLAG_LONELY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00065">bridge_features.h:65</a></div></div>
<div class="ttc" id="structast__bridge__methods_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d2/dd3/structast__bridge__methods.html#a8f8f80d37794cde9472343e4487ba3eb">ast_bridge_methods::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00267">bridge.h:267</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_ad58d921ec1c5a6f12be8f94327dd98c0"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a></div><div class="ttdeci">void ast_bridge_channel_leave_bridge(struct ast_bridge_channel *bridge_channel, enum bridge_channel_state new_state, int cause)</div><div class="ttdoc">Set bridge channel state to leave bridge (if not leaving already). </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00314">bridge_channel.c:314</a></div></div>
<div class="ttc" id="structast__bridge_html_a9ea77c25c2c57ec45bc6dfdea1c1a228"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a9ea77c25c2c57ec45bc6dfdea1c1a228">ast_bridge::dissolved</a></div><div class="ttdeci">unsigned int dissolved</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00398">bridge.h:398</a></div></div>
<div class="ttc" id="structast__bridge_html_a41d441063234a215e985a56318a07a6f"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a41d441063234a215e985a56318a07a6f">ast_bridge::reconfigured</a></div><div class="ttdeci">unsigned int reconfigured</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00396">bridge.h:396</a></div></div>
<div class="ttc" id="structast__bridge__technology_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d1/d04/structast__bridge__technology.html#a8f8f80d37794cde9472343e4487ba3eb">ast_bridge_technology::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3b/bridge__technology_8h_source.html#l00063">bridge_technology.h:63</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a871f4f1d537a1cd524ee8c28b623104f"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a871f4f1d537a1cd524ee8c28b623104f">ast_bridge_channel::state</a></div><div class="ttdeci">enum bridge_channel_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00089">bridge_channel.h:89</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a2862ffde11c780129862e5549415a6f6"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a2862ffde11c780129862e5549415a6f6">ast_bridge_channel::suspended</a></div><div class="ttdeci">unsigned int suspended</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00125">bridge_channel.h:125</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ab44a00c2c23eaeec1d8b61eb254eecaaa708398f920511beb8ea9df06bf16daac"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaa708398f920511beb8ea9df06bf16daac">BRIDGE_CHANNEL_STATE_END_NO_DISSOLVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00066">bridge_channel.h:66</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="bridge__internal_8h_html_af611fd393ca26b5fd2a8071867470ffc"><div class="ttname"><a href="../../d5/dde/bridge__internal_8h.html#af611fd393ca26b5fd2a8071867470ffc">bridge_find_channel</a></div><div class="ttdeci">struct ast_bridge_channel * bridge_find_channel(struct ast_bridge *bridge, struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l01469">bridge.c:1469</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="bridge__roles_8h_html_ad449a795348a52aefe000f13a1d015f8"><div class="ttname"><a href="../../dd/dff/bridge__roles_8h.html#ad449a795348a52aefe000f13a1d015f8">ast_bridge_channel_establish_roles</a></div><div class="ttdeci">int ast_bridge_channel_establish_roles(struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Clone the roles from a bridge_channel&amp;#39;s attached ast_channel onto the bridge_channel&amp;#39;s role list...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00447">bridge_roles.c:447</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="structast__bridge_html_aabb60a181a9e98fb31f8666fb4f5d0b8"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#aabb60a181a9e98fb31f8666fb4f5d0b8">ast_bridge::technology</a></div><div class="ttdeci">struct ast_bridge_technology * technology</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00363">bridge.h:363</a></div></div>
<div class="ttc" id="structast__bridge__features_html_af15c2e8b6df8ce0bf570af18aa890deb"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html#af15c2e8b6df8ce0bf570af18aa890deb">ast_bridge_features::feature_flags</a></div><div class="ttdeci">struct ast_flags feature_flags</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00271">bridge_features.h:271</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a82df0e78742524f455a24e874ba28f49"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a82df0e78742524f455a24e874ba28f49">ast_bridge_channel::just_joined</a></div><div class="ttdeci">unsigned int just_joined</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00123">bridge_channel.h:123</a></div></div>
<div class="ttc" id="channel_8h_html_a6cbcba5661d55216968cde8fdf913c89"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a></div><div class="ttdeci">int ast_queue_frame(struct ast_channel *chan, struct ast_frame *f)</div><div class="ttdoc">Queue one or more frames to a channel&amp;#39;s frame queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01139">channel.c:1139</a></div></div>
<div class="ttc" id="structast__bridge_html_a2f11ecc852af02fffecf1411013f0873"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a2f11ecc852af02fffecf1411013f0873">ast_bridge::v_table</a></div><div class="ttdeci">const struct ast_bridge_methods * v_table</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00359">bridge.h:359</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4d258b4525e63c435d7de579d3f46960"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_LIST_INSERT_TAIL(head, elm, field)</div><div class="ttdoc">Appends a list entry to the tail of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00730">linkedlists.h:730</a></div></div>
<div class="ttc" id="structast__bridge_html_adaedd59efa9e3a1bf9ef24db6771e0a2"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#adaedd59efa9e3a1bf9ef24db6771e0a2">ast_bridge::num_lonely</a></div><div class="ttdeci">unsigned int num_lonely</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00385">bridge.h:385</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_abbcf6b683169c58f6441e3956257c827"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#abbcf6b683169c58f6441e3956257c827">bridge_channel_internal_pull</a></div><div class="ttdeci">void bridge_channel_internal_pull(struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l02178">bridge_channel.c:2178</a></div></div>
<div class="ttc" id="stasis__bridges_8h_html_aecd7e5c63f8d0d4c022bd817d4241c5c"><div class="ttname"><a href="../../dc/d4e/stasis__bridges_8h.html#aecd7e5c63f8d0d4c022bd817d4241c5c">ast_bridge_publish_enter</a></div><div class="ttdeci">void ast_bridge_publish_enter(struct ast_bridge *bridge, struct ast_channel *chan, struct ast_channel *swap)</div><div class="ttdoc">Publish a bridge channel enter event. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d0f/stasis__bridges_8c_source.html#l00582">stasis_bridges.c:582</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_afacf05ff49bf5cd3c7170b3c51943d2e"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#afacf05ff49bf5cd3c7170b3c51943d2e">ast_bridge_channel::in_bridge</a></div><div class="ttdeci">unsigned int in_bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00121">bridge_channel.h:121</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a3bf3c4e34892d0033814ab5fec0e006f"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a3bf3c4e34892d0033814ab5fec0e006f">ast_bridge_channel::swap</a></div><div class="ttdeci">struct ast_channel * swap</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00093">bridge_channel.h:93</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a31a39e9eb864c0dc9dd9c2a8e5c84098"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a31a39e9eb864c0dc9dd9c2a8e5c84098">bridge_channel_cancel_owed_events</a></div><div class="ttdeci">static void bridge_channel_cancel_owed_events(struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00786">bridge_channel.c:786</a></div></div>
<div class="ttc" id="utils_8h_html_a7b260320610a09017a9416398acd0a70"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a></div><div class="ttdeci">#define ast_clear_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00077">utils.h:77</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_af203379aca2fd704fe8d86a9445596b6"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a></div><div class="ttdeci">struct ast_frame ast_null_frame</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d55/main_2frame_8c_source.html#l00079">main/frame.c:79</a></div></div>
<div class="ttc" id="structast__bridge_html_a77542a877d8ed62331c5b3b6aa3e87a7"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a77542a877d8ed62331c5b3b6aa3e87a7">ast_bridge::channels</a></div><div class="ttdeci">struct ast_bridge_channels_list channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00371">bridge.h:371</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="structast__bridge__channel_html"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a></div><div class="ttdoc">Structure that contains information regarding a channel in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00084">bridge_channel.h:84</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="bridge__features_8h_html_a65c2644d2eadb31bcec0aaeb41cb3444a7e495fdd770a14a1a2166ad18a16d8ca"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444a7e495fdd770a14a1a2166ad18a16d8ca">AST_BRIDGE_FLAG_DISSOLVE_EMPTY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00039">bridge_features.h:39</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="structast__bridge__methods_html_a60b76bf280f288b3ef3f1facf873b104"><div class="ttname"><a href="../../d2/dd3/structast__bridge__methods.html#a60b76bf280f288b3ef3f1facf873b104">ast_bridge_methods::push</a></div><div class="ttdeci">ast_bridge_push_channel_fn push</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00273">bridge.h:273</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853">BRIDGE_CHANNEL_STATE_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00062">bridge_channel.h:62</a></div></div>
<div class="ttc" id="structast__bridge_html_a97e3bedeadf444995deb6fab68f57e21"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a97e3bedeadf444995deb6fab68f57e21">ast_bridge::num_channels</a></div><div class="ttdeci">unsigned int num_channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00381">bridge.h:381</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa6955fc24cd777947bb8c97011c55de2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6955fc24cd777947bb8c97011c55de2">&#9670;&nbsp;</a></span>bridge_channel_internal_queue_attended_transfer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bridge_channel_internal_queue_attended_transfer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>transferee</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>unbridged_chan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l03088">3088</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l10783">ast_channel_get_bridge_channel()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00172">AST_CHANNEL_NAME</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00059">BRIDGE_CHANNEL_ACTION_ATTENDED_TRANSFER</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00938">bridge_channel_queue_action_data()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l04729">ast_bridge_transfer_attended()</a>.</p>
<div class="fragment"><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;{</div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *, transferee_bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;   <span class="keywordtype">char</span> unbridged_chan_name[<a class="code" href="../../d5/d7b/channel_8h.html#ab57c278099ea5f8d7cedbb41eba58b56">AST_CHANNEL_NAME</a>];</div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;</div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(transferee);</div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;   transferee_bridge_channel = <a class="code" href="../../d5/d7b/channel_8h.html#a9b6409c38af733c46eead884d86dd284">ast_channel_get_bridge_channel</a>(transferee);</div><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(transferee);</div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;</div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;   <span class="keywordflow">if</span> (!transferee_bridge_channel) {</div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;   }</div><div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;</div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(unbridged_chan_name, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(unbridged_chan),</div><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;      <span class="keyword">sizeof</span>(unbridged_chan_name));</div><div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;</div><div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d32/bridge__channel_8c.html#a7169723f8af325431a959806a6b9ba96">bridge_channel_queue_action_data</a>(transferee_bridge_channel,</div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;      <a class="code" href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa1fc89f04a92b074f454265cab7398b99">BRIDGE_CHANNEL_ACTION_ATTENDED_TRANSFER</a>, unbridged_chan_name,</div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;      <span class="keyword">sizeof</span>(unbridged_chan_name));</div><div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="bridge__channel__internal_8h_html_adadb2f6b306233caecdabcf1a7440b0aa1fc89f04a92b074f454265cab7398b99"><div class="ttname"><a href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa1fc89f04a92b074f454265cab7398b99">BRIDGE_CHANNEL_ACTION_ATTENDED_TRANSFER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00059">bridge_channel_internal.h:59</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a7169723f8af325431a959806a6b9ba96"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a7169723f8af325431a959806a6b9ba96">bridge_channel_queue_action_data</a></div><div class="ttdeci">static int bridge_channel_queue_action_data(struct ast_bridge_channel *bridge_channel, enum bridge_channel_action_type action, const void *data, size_t datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00938">bridge_channel.c:938</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="channel_8h_html_ab57c278099ea5f8d7cedbb41eba58b56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab57c278099ea5f8d7cedbb41eba58b56">AST_CHANNEL_NAME</a></div><div class="ttdeci">#define AST_CHANNEL_NAME</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00172">channel.h:172</a></div></div>
<div class="ttc" id="channel_8h_html_a9b6409c38af733c46eead884d86dd284"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9b6409c38af733c46eead884d86dd284">ast_channel_get_bridge_channel</a></div><div class="ttdeci">struct ast_bridge_channel * ast_channel_get_bridge_channel(struct ast_channel *chan)</div><div class="ttdoc">Get a reference to the channel&amp;#39;s bridge pointer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10783">channel.c:10783</a></div></div>
<div class="ttc" id="structast__bridge__channel_html"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a></div><div class="ttdoc">Structure that contains information regarding a channel in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00084">bridge_channel.h:84</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a63e2bee23fe653a913a13ec7290f38ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63e2bee23fe653a913a13ec7290f38ae">&#9670;&nbsp;</a></span>bridge_channel_internal_queue_blind_transfer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bridge_channel_internal_queue_blind_transfer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>transferee</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>exten</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d4/d56/bridge_8h.html#a87ed18cc739a9635c4595cae783ab993">transfer_channel_cb</a>&#160;</td>
          <td class="paramname"><em>new_channel_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l03062">3062</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l01128">AST_BRIDGE_TRANSFER_SINGLE_PARTY</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l10783">ast_channel_get_bridge_channel()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00057">BRIDGE_CHANNEL_ACTION_BLIND_TRANSFER</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00938">bridge_channel_queue_action_data()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01936">blind_transfer_data::context</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01935">blind_transfer_data::exten</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l04477">ast_bridge_transfer_blind()</a>.</p>
<div class="fragment"><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;{</div><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *, transferee_bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/de8/structblind__transfer__data.html">blind_transfer_data</a> blind_data;</div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;</div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(transferee);</div><div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;   transferee_bridge_channel = <a class="code" href="../../d5/d7b/channel_8h.html#a9b6409c38af733c46eead884d86dd284">ast_channel_get_bridge_channel</a>(transferee);</div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(transferee);</div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;</div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;   <span class="keywordflow">if</span> (!transferee_bridge_channel) {</div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;   }</div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;</div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;   <span class="keywordflow">if</span> (new_channel_cb) {</div><div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;      new_channel_cb(transferee, user_data, <a class="code" href="../../d4/d56/bridge_8h.html#a865f7ef0f91885406ab746b23eb598cda073210b9d7d16a18abc6fe85c8ea66d4">AST_BRIDGE_TRANSFER_SINGLE_PARTY</a>);</div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;   }</div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;</div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(blind_data.exten, <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, <span class="keyword">sizeof</span>(blind_data.exten));</div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(blind_data.context, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, <span class="keyword">sizeof</span>(blind_data.context));</div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;</div><div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d32/bridge__channel_8c.html#a7169723f8af325431a959806a6b9ba96">bridge_channel_queue_action_data</a>(transferee_bridge_channel,</div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;      <a class="code" href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa84d886ead1b35fb305d2ddccdc7ddb7a">BRIDGE_CHANNEL_ACTION_BLIND_TRANSFER</a>, &amp;blind_data, <span class="keyword">sizeof</span>(blind_data));</div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="bridge_8h_html_a865f7ef0f91885406ab746b23eb598cda073210b9d7d16a18abc6fe85c8ea66d4"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a865f7ef0f91885406ab746b23eb598cda073210b9d7d16a18abc6fe85c8ea66d4">AST_BRIDGE_TRANSFER_SINGLE_PARTY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l01128">bridge.h:1128</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a7169723f8af325431a959806a6b9ba96"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a7169723f8af325431a959806a6b9ba96">bridge_channel_queue_action_data</a></div><div class="ttdeci">static int bridge_channel_queue_action_data(struct ast_bridge_channel *bridge_channel, enum bridge_channel_action_type action, const void *data, size_t datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00938">bridge_channel.c:938</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="bridge__channel__internal_8h_html_adadb2f6b306233caecdabcf1a7440b0aa84d886ead1b35fb305d2ddccdc7ddb7a"><div class="ttname"><a href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa84d886ead1b35fb305d2ddccdc7ddb7a">BRIDGE_CHANNEL_ACTION_BLIND_TRANSFER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00057">bridge_channel_internal.h:57</a></div></div>
<div class="ttc" id="structblind__transfer__data_html"><div class="ttname"><a href="../../d1/de8/structblind__transfer__data.html">blind_transfer_data</a></div><div class="ttdoc">Data specifying where a blind transfer is going to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01934">bridge_channel.c:1934</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="channel_8h_html_a9b6409c38af733c46eead884d86dd284"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9b6409c38af733c46eead884d86dd284">ast_channel_get_bridge_channel</a></div><div class="ttdeci">struct ast_bridge_channel * ast_channel_get_bridge_channel(struct ast_channel *chan)</div><div class="ttdoc">Get a reference to the channel&amp;#39;s bridge pointer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10783">channel.c:10783</a></div></div>
<div class="ttc" id="structast__bridge__channel_html"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a></div><div class="ttdoc">Structure that contains information regarding a channel in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00084">bridge_channel.h:84</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a447f05a7615581929349765430257a75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a447f05a7615581929349765430257a75">&#9670;&nbsp;</a></span>bridge_channel_internal_suspend_nolock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bridge_channel_internal_suspend_nolock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00854">854</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00100">ast_bridge_channel::bridge</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00121">ast_bridge_channel::in_bridge</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00383">ast_bridge::num_active</a>, <a class="el" href="../../d0/d3b/bridge__technology_8h_source.html#l00133">ast_bridge_technology::suspend</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00125">ast_bridge_channel::suspended</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00363">ast_bridge::technology</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01762">ast_bridge_channel_feature_digit()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03068">ast_bridge_suspend()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00875">bridge_channel_suspend()</a>.</p>
<div class="fragment"><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;{</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;   bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a2862ffde11c780129862e5549415a6f6">suspended</a> = 1;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;   <span class="keywordflow">if</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#afacf05ff49bf5cd3c7170b3c51943d2e">in_bridge</a>) {</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;      --bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a4d514eabb35f71dee132ef1df1c6cdbb">num_active</a>;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;   }</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;   <span class="comment">/* Get technology bridge threads off of the channel. */</span></div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;   <span class="keywordflow">if</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#aabb60a181a9e98fb31f8666fb4f5d0b8">technology</a>-&gt;<a class="code" href="../../d1/d04/structast__bridge__technology.html#adc6997ed35bb48e9e904808f13639626">suspend</a>) {</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;      bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#aabb60a181a9e98fb31f8666fb4f5d0b8">technology</a>-&gt;<a class="code" href="../../d1/d04/structast__bridge__technology.html#adc6997ed35bb48e9e904808f13639626">suspend</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, bridge_channel);</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;   }</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;}</div><div class="ttc" id="structast__bridge_html_a4d514eabb35f71dee132ef1df1c6cdbb"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a4d514eabb35f71dee132ef1df1c6cdbb">ast_bridge::num_active</a></div><div class="ttdeci">unsigned int num_active</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00383">bridge.h:383</a></div></div>
<div class="ttc" id="structast__bridge__technology_html_adc6997ed35bb48e9e904808f13639626"><div class="ttname"><a href="../../d1/d04/structast__bridge__technology.html#adc6997ed35bb48e9e904808f13639626">ast_bridge_technology::suspend</a></div><div class="ttdeci">void(* suspend)(struct ast_bridge *bridge, struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Suspend a channel on a bridging technology instance for a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3b/bridge__technology_8h_source.html#l00133">bridge_technology.h:133</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a2862ffde11c780129862e5549415a6f6"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a2862ffde11c780129862e5549415a6f6">ast_bridge_channel::suspended</a></div><div class="ttdeci">unsigned int suspended</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00125">bridge_channel.h:125</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="structast__bridge_html_aabb60a181a9e98fb31f8666fb4f5d0b8"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#aabb60a181a9e98fb31f8666fb4f5d0b8">ast_bridge::technology</a></div><div class="ttdeci">struct ast_bridge_technology * technology</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00363">bridge.h:363</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_afacf05ff49bf5cd3c7170b3c51943d2e"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#afacf05ff49bf5cd3c7170b3c51943d2e">ast_bridge_channel::in_bridge</a></div><div class="ttdeci">unsigned int in_bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00121">bridge_channel.h:121</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a25adcc7a991b49286746a062291ce1e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25adcc7a991b49286746a062291ce1e1">&#9670;&nbsp;</a></span>bridge_channel_internal_unsuspend_nolock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bridge_channel_internal_unsuspend_nolock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00892">892</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00231">ast_bridge_channel_lock</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00244">ast_bridge_channel_unlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00100">ast_bridge_channel::bridge</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00087">ast_bridge_channel::cond</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00121">ast_bridge_channel::in_bridge</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00383">ast_bridge::num_active</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00125">ast_bridge_channel::suspended</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00363">ast_bridge::technology</a>, and <a class="el" href="../../d0/d3b/bridge__technology_8h_source.html#l00139">ast_bridge_technology::unsuspend</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l03089">ast_bridge_unsuspend()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00918">bridge_channel_unsuspend()</a>.</p>
<div class="fragment"><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;{</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;   bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a2862ffde11c780129862e5549415a6f6">suspended</a> = 0;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;   <span class="keywordflow">if</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#afacf05ff49bf5cd3c7170b3c51943d2e">in_bridge</a>) {</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      ++bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a4d514eabb35f71dee132ef1df1c6cdbb">num_active</a>;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;   }</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;   <span class="comment">/* Wake technology bridge threads to take care of channel again. */</span></div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;   <span class="keywordflow">if</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#aabb60a181a9e98fb31f8666fb4f5d0b8">technology</a>-&gt;<a class="code" href="../../d1/d04/structast__bridge__technology.html#a0ed1bad8c97b282d1153c681d4006cb0">unsuspend</a>) {</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;      bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#aabb60a181a9e98fb31f8666fb4f5d0b8">technology</a>-&gt;<a class="code" href="../../d1/d04/structast__bridge__technology.html#a0ed1bad8c97b282d1153c681d4006cb0">unsuspend</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, bridge_channel);</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;   }</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;   <span class="comment">/* Wake suspended channel. */</span></div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a>(bridge_channel);</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>);</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(bridge_channel);</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;}</div><div class="ttc" id="structast__bridge_html_a4d514eabb35f71dee132ef1df1c6cdbb"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a4d514eabb35f71dee132ef1df1c6cdbb">ast_bridge::num_active</a></div><div class="ttdeci">unsigned int num_active</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00383">bridge.h:383</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a2862ffde11c780129862e5549415a6f6"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a2862ffde11c780129862e5549415a6f6">ast_bridge_channel::suspended</a></div><div class="ttdeci">unsigned int suspended</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00125">bridge_channel.h:125</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="structast__bridge_html_aabb60a181a9e98fb31f8666fb4f5d0b8"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#aabb60a181a9e98fb31f8666fb4f5d0b8">ast_bridge::technology</a></div><div class="ttdeci">struct ast_bridge_technology * technology</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00363">bridge.h:363</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_aa467e25606c2a21df25c61f139007782"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a></div><div class="ttdeci">#define ast_bridge_channel_lock(bridge_channel)</div><div class="ttdoc">Lock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00231">bridge_channel.h:231</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_a483cd10a0ddcca5814298bdb4f153878"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a></div><div class="ttdeci">#define ast_bridge_channel_unlock(bridge_channel)</div><div class="ttdoc">Unlock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00244">bridge_channel.h:244</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a1c7181c39f99ee801943a0d0aa9872b9">ast_bridge_channel::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00087">bridge_channel.h:87</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_afacf05ff49bf5cd3c7170b3c51943d2e"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#afacf05ff49bf5cd3c7170b3c51943d2e">ast_bridge_channel::in_bridge</a></div><div class="ttdeci">unsigned int in_bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00121">bridge_channel.h:121</a></div></div>
<div class="ttc" id="structast__bridge__technology_html_a0ed1bad8c97b282d1153c681d4006cb0"><div class="ttname"><a href="../../d1/d04/structast__bridge__technology.html#a0ed1bad8c97b282d1153c681d4006cb0">ast_bridge_technology::unsuspend</a></div><div class="ttdeci">void(* unsuspend)(struct ast_bridge *bridge, struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Unsuspend a channel on a bridging technology instance for a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3b/bridge__technology_8h_source.html#l00139">bridge_technology.h:139</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af43d85186b8f45b15d419902203cf56a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af43d85186b8f45b15d419902203cf56a">&#9670;&nbsp;</a></span>bridge_channel_next_interval()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int bridge_channel_next_interval </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02720">2720</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d29/heap_8c_source.html#l00267">ast_heap_peek()</a>, <a class="el" href="../../da/ddb/heap_8h_source.html#l00248">ast_heap_unlock</a>, <a class="el" href="../../da/ddb/heap_8h_source.html#l00246">ast_heap_wrlock</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00132">ast_bridge_channel::features</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00269">ast_bridge_features::interval_hooks</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00257">ast_bridge_hook_timer::timer</a>, and <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00241">ast_bridge_hook_timer_parms::trip_time</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02782">bridge_channel_next_timeout()</a>.</p>
<div class="fragment"><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;{</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dec/structast__heap.html">ast_heap</a> *interval_hooks = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">features</a>-&gt;<a class="code" href="../../db/dba/structast__bridge__features.html#acf866276f9e32cb984c935b02d749e6f">interval_hooks</a>;</div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/df3/structast__bridge__hook__timer.html">ast_bridge_hook_timer</a> *hook;</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;   <span class="keywordtype">int</span> ms;</div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;   <a class="code" href="../../da/ddb/heap_8h.html#ae31f8aaa8d4c6caf049e3965ec8b576a">ast_heap_wrlock</a>(interval_hooks);</div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;   hook = <a class="code" href="../../da/ddb/heap_8h.html#aaa326b988236a0841d41cf2af8ec9b7e">ast_heap_peek</a>(interval_hooks, 1);</div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;   <span class="keywordflow">if</span> (hook) {</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;      ms = <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(hook-&gt;<a class="code" href="../../dd/df3/structast__bridge__hook__timer.html#a27144173d29f9be2ef3642b7c2c29191">timer</a>.<a class="code" href="../../d1/dad/structast__bridge__hook__timer__parms.html#a3546d0f5f096b6f63f437c3d24b51d47">trip_time</a>, <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>());</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;      <span class="keywordflow">if</span> (ms &lt; 0) {</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;         <span class="comment">/* Expire immediately.  An interval hook is ready to run. */</span></div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;         ms = 0;</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;      }</div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;      <span class="comment">/* No hook so wait forever. */</span></div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;      ms = -1;</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;   }</div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;   <a class="code" href="../../da/ddb/heap_8h.html#a44306afd9b32c0eedae9b559f13a2c5b">ast_heap_unlock</a>(interval_hooks);</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;   <span class="keywordflow">return</span> ms;</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;}</div><div class="ttc" id="structast__bridge__channel_html_a65633fdc6178dc8d9f754fda0166d16e"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">ast_bridge_channel::features</a></div><div class="ttdeci">struct ast_bridge_features * features</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00132">bridge_channel.h:132</a></div></div>
<div class="ttc" id="structast__bridge__hook__timer_html"><div class="ttname"><a href="../../dd/df3/structast__bridge__hook__timer.html">ast_bridge_hook_timer</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00253">bridge_features.h:253</a></div></div>
<div class="ttc" id="structast__bridge__hook__timer__parms_html_a3546d0f5f096b6f63f437c3d24b51d47"><div class="ttname"><a href="../../d1/dad/structast__bridge__hook__timer__parms.html#a3546d0f5f096b6f63f437c3d24b51d47">ast_bridge_hook_timer_parms::trip_time</a></div><div class="ttdeci">struct timeval trip_time</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00241">bridge_features.h:241</a></div></div>
<div class="ttc" id="heap_8h_html_a44306afd9b32c0eedae9b559f13a2c5b"><div class="ttname"><a href="../../da/ddb/heap_8h.html#a44306afd9b32c0eedae9b559f13a2c5b">ast_heap_unlock</a></div><div class="ttdeci">#define ast_heap_unlock(h)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/ddb/heap_8h_source.html#l00248">heap.h:248</a></div></div>
<div class="ttc" id="structast__heap_html"><div class="ttname"><a href="../../dc/dec/structast__heap.html">ast_heap</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/heap_8c_source.html#l00036">heap.c:36</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="structast__bridge__features_html_acf866276f9e32cb984c935b02d749e6f"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html#acf866276f9e32cb984c935b02d749e6f">ast_bridge_features::interval_hooks</a></div><div class="ttdeci">struct ast_heap * interval_hooks</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00269">bridge_features.h:269</a></div></div>
<div class="ttc" id="structast__bridge__hook__timer_html_a27144173d29f9be2ef3642b7c2c29191"><div class="ttname"><a href="../../dd/df3/structast__bridge__hook__timer.html#a27144173d29f9be2ef3642b7c2c29191">ast_bridge_hook_timer::timer</a></div><div class="ttdeci">struct ast_bridge_hook_timer_parms timer</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00257">bridge_features.h:257</a></div></div>
<div class="ttc" id="heap_8h_html_aaa326b988236a0841d41cf2af8ec9b7e"><div class="ttname"><a href="../../da/ddb/heap_8h.html#aaa326b988236a0841d41cf2af8ec9b7e">ast_heap_peek</a></div><div class="ttdeci">void * ast_heap_peek(struct ast_heap *h, unsigned int index)</div><div class="ttdoc">Peek at an element on a heap. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d29/heap_8c_source.html#l00267">heap.c:267</a></div></div>
<div class="ttc" id="heap_8h_html_ae31f8aaa8d4c6caf049e3965ec8b576a"><div class="ttname"><a href="../../da/ddb/heap_8h.html#ae31f8aaa8d4c6caf049e3965ec8b576a">ast_heap_wrlock</a></div><div class="ttdeci">#define ast_heap_wrlock(h)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/ddb/heap_8h_source.html#l00246">heap.h:246</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a21f30c0137d0b0935d56ec2139db1de8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21f30c0137d0b0935d56ec2139db1de8">&#9670;&nbsp;</a></span>bridge_channel_next_timeout()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int bridge_channel_next_timeout </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02782">2782</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02753">bridge_channel_feature_timeout()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02720">bridge_channel_next_interval()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02808">bridge_channel_wait()</a>.</p>
<div class="fragment"><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;{</div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;   <span class="keywordtype">int</span> ms_interval;</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;   <span class="keywordtype">int</span> ms;</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;   ms_interval = <a class="code" href="../../d3/d32/bridge__channel_8c.html#af43d85186b8f45b15d419902203cf56a">bridge_channel_next_interval</a>(bridge_channel);</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;   ms = <a class="code" href="../../d3/d32/bridge__channel_8c.html#a932986b0a354279ab592e33918eb18af">bridge_channel_feature_timeout</a>(bridge_channel);</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;   <span class="keywordflow">if</span> (ms &lt; 0 || (0 &lt;= ms_interval &amp;&amp; ms_interval &lt; ms)) {</div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;      <span class="comment">/* Interval hook timeout is next. */</span></div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;      ms = ms_interval;</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;   }</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;</div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;   <span class="keywordflow">return</span> ms;</div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_af43d85186b8f45b15d419902203cf56a"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#af43d85186b8f45b15d419902203cf56a">bridge_channel_next_interval</a></div><div class="ttdeci">static int bridge_channel_next_interval(struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l02720">bridge_channel.c:2720</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a932986b0a354279ab592e33918eb18af"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a932986b0a354279ab592e33918eb18af">bridge_channel_feature_timeout</a></div><div class="ttdeci">static int bridge_channel_feature_timeout(struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l02753">bridge_channel.c:2753</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa83bce915e492875e48f9ae3ea0d2d49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa83bce915e492875e48f9ae3ea0d2d49">&#9670;&nbsp;</a></span>bridge_channel_park()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_channel_park </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d7e/structbridge__park.html">bridge_park</a> *&#160;</td>
          <td class="paramname"><em>payload</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01511">1511</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01502">bridge_park::app_data_offset</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00279">AST_LOG_WARNING</a>, <a class="el" href="../../d3/d2a/parking_8c_source.html#l00126">ast_parking_park_bridge_channel()</a>, <a class="el" href="../../d3/d2a/parking_8c_source.html#l00241">ast_parking_provider_registered()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01504">bridge_park::parkee_uuid</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01501">bridge_park::parker_uuid_offset</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02067">bridge_channel_handle_action()</a>.</p>
<div class="fragment"><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;{</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d33/parking_8h.html#ae6064ecb9b802ce85e93ddfa7719c433">ast_parking_provider_registered</a>()) {</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a2878d83e36d91850732bad997524e45e">AST_LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to park %s: No parking provider loaded!\n&quot;</span>,</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;   }</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d2/d33/parking_8h.html#a313933121fb254ee11207e331d528fda">ast_parking_park_bridge_channel</a>(bridge_channel, payload-&gt;<a class="code" href="../../d8/d7e/structbridge__park.html#a372803e549879c8924f2089bda0f82ab">parkee_uuid</a>,</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;      &amp;payload-&gt;<a class="code" href="../../d8/d7e/structbridge__park.html#a372803e549879c8924f2089bda0f82ab">parkee_uuid</a>[payload-&gt;<a class="code" href="../../d8/d7e/structbridge__park.html#a6f6e36c64ca14c16eaae45c5eaa64205">parker_uuid_offset</a>],</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;      payload-&gt;<a class="code" href="../../d8/d7e/structbridge__park.html#a04736eda8628ea83ab919650917fe13a">app_data_offset</a> ? &amp;payload-&gt;<a class="code" href="../../d8/d7e/structbridge__park.html#a372803e549879c8924f2089bda0f82ab">parkee_uuid</a>[payload-&gt;<a class="code" href="../../d8/d7e/structbridge__park.html#a04736eda8628ea83ab919650917fe13a">app_data_offset</a>] : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a2878d83e36d91850732bad997524e45e">AST_LOG_WARNING</a>, <span class="stringliteral">&quot;Error occurred while parking %s\n&quot;</span>,</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;   }</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;}</div><div class="ttc" id="structbridge__park_html_a04736eda8628ea83ab919650917fe13a"><div class="ttname"><a href="../../d8/d7e/structbridge__park.html#a04736eda8628ea83ab919650917fe13a">bridge_park::app_data_offset</a></div><div class="ttdeci">int app_data_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01502">bridge_channel.c:1502</a></div></div>
<div class="ttc" id="logger_8h_html_a2878d83e36d91850732bad997524e45e"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a2878d83e36d91850732bad997524e45e">AST_LOG_WARNING</a></div><div class="ttdeci">#define AST_LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00279">logger.h:279</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structbridge__park_html_a372803e549879c8924f2089bda0f82ab"><div class="ttname"><a href="../../d8/d7e/structbridge__park.html#a372803e549879c8924f2089bda0f82ab">bridge_park::parkee_uuid</a></div><div class="ttdeci">char parkee_uuid[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01504">bridge_channel.c:1504</a></div></div>
<div class="ttc" id="parking_8h_html_ae6064ecb9b802ce85e93ddfa7719c433"><div class="ttname"><a href="../../d2/d33/parking_8h.html#ae6064ecb9b802ce85e93ddfa7719c433">ast_parking_provider_registered</a></div><div class="ttdeci">int ast_parking_provider_registered(void)</div><div class="ttdoc">Check whether a parking provider is registered. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2a/parking_8c_source.html#l00241">parking.c:241</a></div></div>
<div class="ttc" id="parking_8h_html_a313933121fb254ee11207e331d528fda"><div class="ttname"><a href="../../d2/d33/parking_8h.html#a313933121fb254ee11207e331d528fda">ast_parking_park_bridge_channel</a></div><div class="ttdeci">int ast_parking_park_bridge_channel(struct ast_bridge_channel *parkee, const char *parkee_uuid, const char *parker_uuid, const char *app_data)</div><div class="ttdoc">Perform a direct park on a channel in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d2a/parking_8c_source.html#l00126">parking.c:126</a></div></div>
<div class="ttc" id="structbridge__park_html_a6f6e36c64ca14c16eaae45c5eaa64205"><div class="ttname"><a href="../../d8/d7e/structbridge__park.html#a6f6e36c64ca14c16eaae45c5eaa64205">bridge_park::parker_uuid_offset</a></div><div class="ttdeci">int parker_uuid_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01501">bridge_channel.c:1501</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad5f0575f76e365299b450abec30ae540"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5f0575f76e365299b450abec30ae540">&#9670;&nbsp;</a></span>bridge_channel_playfile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_channel_playfile </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/d29/structbridge__playfile.html">bridge_playfile</a> *&#160;</td>
          <td class="paramname"><em>payload</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01368">1368</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01321">ast_bridge_channel_playfile()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01351">bridge_playfile::custom_play</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01353">bridge_playfile::moh_offset</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01355">bridge_playfile::playfile</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02067">bridge_channel_handle_action()</a>.</p>
<div class="fragment"><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;{</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#a01de7987fb023a0c1e52965454797d0b">ast_bridge_channel_playfile</a>(bridge_channel, payload-&gt;<a class="code" href="../../d5/d29/structbridge__playfile.html#a6b8ff771aabcba038d5e409a4f71bb04">custom_play</a>, payload-&gt;<a class="code" href="../../d5/d29/structbridge__playfile.html#a4ed64f64c692aae02acf40cf1af489e9">playfile</a>,</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;      payload-&gt;<a class="code" href="../../d5/d29/structbridge__playfile.html#a9f4835eab8f88d55b1b001792136937c">moh_offset</a> ? &amp;payload-&gt;<a class="code" href="../../d5/d29/structbridge__playfile.html#a4ed64f64c692aae02acf40cf1af489e9">playfile</a>[payload-&gt;<a class="code" href="../../d5/d29/structbridge__playfile.html#a9f4835eab8f88d55b1b001792136937c">moh_offset</a>] : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;}</div><div class="ttc" id="structbridge__playfile_html_a6b8ff771aabcba038d5e409a4f71bb04"><div class="ttname"><a href="../../d5/d29/structbridge__playfile.html#a6b8ff771aabcba038d5e409a4f71bb04">bridge_playfile::custom_play</a></div><div class="ttdeci">ast_bridge_custom_play_fn custom_play</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01351">bridge_channel.c:1351</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structbridge__playfile_html_a9f4835eab8f88d55b1b001792136937c"><div class="ttname"><a href="../../d5/d29/structbridge__playfile.html#a9f4835eab8f88d55b1b001792136937c">bridge_playfile::moh_offset</a></div><div class="ttdeci">int moh_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01353">bridge_channel.c:1353</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a01de7987fb023a0c1e52965454797d0b"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a01de7987fb023a0c1e52965454797d0b">ast_bridge_channel_playfile</a></div><div class="ttdeci">void ast_bridge_channel_playfile(struct ast_bridge_channel *bridge_channel, ast_bridge_custom_play_fn custom_play, const char *playfile, const char *moh_class)</div><div class="ttdoc">Play a file on the bridge channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01321">bridge_channel.c:1321</a></div></div>
<div class="ttc" id="structbridge__playfile_html_a4ed64f64c692aae02acf40cf1af489e9"><div class="ttname"><a href="../../d5/d29/structbridge__playfile.html#a4ed64f64c692aae02acf40cf1af489e9">bridge_playfile::playfile</a></div><div class="ttdeci">char playfile[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01355">bridge_channel.c:1355</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9755f224fead29ce51d3a96401b54599"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9755f224fead29ce51d3a96401b54599">&#9670;&nbsp;</a></span>bridge_channel_poke()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_channel_poke </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00259">259</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d55/main_2frame_8c_source.html#l00079">ast_null_frame</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01139">ast_queue_frame()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, and <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00118">ast_bridge_channel::thread</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00292">ast_bridge_channel_leave_bridge_nolock()</a>.</p>
<div class="fragment"><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;{</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;   <span class="keywordflow">if</span> (!pthread_equal(pthread_self(), bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a01f75a9ad916f63a94e06a27635ba278">thread</a>)) {</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <span class="comment">/* Wake up the bridge channel thread. */</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>);</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;   }</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;}</div><div class="ttc" id="structast__bridge__channel_html_a01f75a9ad916f63a94e06a27635ba278"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a01f75a9ad916f63a94e06a27635ba278">ast_bridge_channel::thread</a></div><div class="ttdeci">pthread_t thread</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00118">bridge_channel.h:118</a></div></div>
<div class="ttc" id="channel_8h_html_a6cbcba5661d55216968cde8fdf913c89"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a></div><div class="ttdeci">int ast_queue_frame(struct ast_channel *chan, struct ast_frame *f)</div><div class="ttdoc">Queue one or more frames to a channel&amp;#39;s frame queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01139">channel.c:1139</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_af203379aca2fd704fe8d86a9445596b6"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a></div><div class="ttdeci">struct ast_frame ast_null_frame</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d55/main_2frame_8c_source.html#l00079">main/frame.c:79</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7169723f8af325431a959806a6b9ba96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7169723f8af325431a959806a6b9ba96">&#9670;&nbsp;</a></span>bridge_channel_queue_action_data()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int bridge_channel_queue_action_data </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0a">bridge_channel_action_type</a>&#160;</td>
          <td class="paramname"><em>action</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>datalen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00938">938</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01044">ast_bridge_channel_queue_frame()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00127">AST_FRAME_BRIDGE_ACTION</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01315">ast_bridge_channel_queue_app()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01492">ast_bridge_channel_queue_callback()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01404">ast_bridge_channel_queue_playfile()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l03088">bridge_channel_internal_queue_attended_transfer()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l03062">bridge_channel_internal_queue_blind_transfer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;{</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> frame = {</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;      .<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af36653b08c00f5d824ed6046e9233ef9">AST_FRAME_BRIDGE_ACTION</a>,</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;      .subclass.integer = action,</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;      .datalen = <a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>,</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      .data.ptr = (<span class="keywordtype">void</span> *) <a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>,</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;   };</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d32/bridge__channel_8c.html#aba51942a86849ae41c5397d596cb8ed1">ast_bridge_channel_queue_frame</a>(bridge_channel, &amp;frame);</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;}</div><div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0af36653b08c00f5d824ed6046e9233ef9"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af36653b08c00f5d824ed6046e9233ef9">AST_FRAME_BRIDGE_ACTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00127">include/asterisk/frame.h:127</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_aba51942a86849ae41c5397d596cb8ed1"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#aba51942a86849ae41c5397d596cb8ed1">ast_bridge_channel_queue_frame</a></div><div class="ttdeci">int ast_bridge_channel_queue_frame(struct ast_bridge_channel *bridge_channel, struct ast_frame *fr)</div><div class="ttdoc">Write a frame to the specified bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01044">bridge_channel.c:1044</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a88f8ccbfa86786e2a9726a90cba14a84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88f8ccbfa86786e2a9726a90cba14a84">&#9670;&nbsp;</a></span>bridge_channel_queue_action_data_sync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int bridge_channel_queue_action_data_sync </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0a">bridge_channel_action_type</a>&#160;</td>
          <td class="paramname"><em>action</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>datalen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00966">966</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00755">ast_atomic_fetchadd_int()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01044">ast_bridge_channel_queue_frame()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00133">AST_FRAME_BRIDGE_ACTION_SYNC</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00147">bridge_sync_cleanup()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00124">bridge_sync_init()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00185">bridge_sync_wait()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00091">sync_payload::data</a>, <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00089">sync_payload::id</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">ast_frame::ptr</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00078">sync_ids</a>, and <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00118">ast_bridge_channel::thread</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01410">ast_bridge_channel_queue_playfile_sync()</a>.</p>
<div class="fragment"><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;{</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d61/structsync__payload.html">sync_payload</a> *<a class="code" href="../../d7/d61/structsync__payload.html">sync_payload</a>;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;   <span class="keywordtype">int</span> sync_payload_len = <span class="keyword">sizeof</span>(*sync_payload) + datalen;</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d54/structbridge__sync.html">bridge_sync</a> sync_struct;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> frame = {</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;      .<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa28206b97fb0795e1fa681248fd0d97f">AST_FRAME_BRIDGE_ACTION_SYNC</a>,</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;      .subclass.integer = action,</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;   };</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;   <span class="comment">/* Make sure we don&#39;t end up trying to wait on ourself to deliver the frame */</span></div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(!pthread_equal(pthread_self(), bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a01f75a9ad916f63a94e06a27635ba278">thread</a>));</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;   sync_payload = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(sync_payload_len);</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;   sync_payload-&gt;<a class="code" href="../../d7/d61/structsync__payload.html#ab7ce6f462afaf105224b0ca772a33c43">id</a> = <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;<a class="code" href="../../d3/d32/bridge__channel_8c.html#ace480ddb7578041e1cdce0aae982c7b5">sync_ids</a>, +1);</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;   memcpy(sync_payload-&gt;<a class="code" href="../../d7/d61/structsync__payload.html#aef5b927d15f11382bf5f276630c08287">data</a>, <a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>, datalen);</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;   frame.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> = sync_payload_len;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;   frame.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a> = sync_payload;</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#a0e67cf7c90d10cdd3be033be964ff43f">bridge_sync_init</a>(&amp;sync_struct, sync_payload-&gt;<a class="code" href="../../d7/d61/structsync__payload.html#ab7ce6f462afaf105224b0ca772a33c43">id</a>);</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d32/bridge__channel_8c.html#aba51942a86849ae41c5397d596cb8ed1">ast_bridge_channel_queue_frame</a>(bridge_channel, &amp;frame)) {</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#ab2187c643c3dd7929dbbdc4f83c0107b">bridge_sync_cleanup</a>(&amp;sync_struct);</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;   }</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#aacf3b50ab7c5304d648700ea114a01ef">bridge_sync_wait</a>(&amp;sync_struct);</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#ab2187c643c3dd7929dbbdc4f83c0107b">bridge_sync_cleanup</a>(&amp;sync_struct);</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;}</div><div class="ttc" id="structast__bridge__channel_html_a01f75a9ad916f63a94e06a27635ba278"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a01f75a9ad916f63a94e06a27635ba278">ast_bridge_channel::thread</a></div><div class="ttdeci">pthread_t thread</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00118">bridge_channel.h:118</a></div></div>
<div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa28206b97fb0795e1fa681248fd0d97f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa28206b97fb0795e1fa681248fd0d97f">AST_FRAME_BRIDGE_ACTION_SYNC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00133">include/asterisk/frame.h:133</a></div></div>
<div class="ttc" id="structsync__payload_html_ab7ce6f462afaf105224b0ca772a33c43"><div class="ttname"><a href="../../d7/d61/structsync__payload.html#ab7ce6f462afaf105224b0ca772a33c43">sync_payload::id</a></div><div class="ttdeci">unsigned int id</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00089">bridge_channel.c:89</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_aacf3b50ab7c5304d648700ea114a01ef"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#aacf3b50ab7c5304d648700ea114a01ef">bridge_sync_wait</a></div><div class="ttdeci">static void bridge_sync_wait(struct bridge_sync *sync_struct)</div><div class="ttdoc">Wait for a synchronous bridge action to complete. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00185">bridge_channel.c:185</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a0e67cf7c90d10cdd3be033be964ff43f"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a0e67cf7c90d10cdd3be033be964ff43f">bridge_sync_init</a></div><div class="ttdeci">static void bridge_sync_init(struct bridge_sync *sync_struct, unsigned int id)</div><div class="ttdoc">initialize a synchronous bridge object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00124">bridge_channel.c:124</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_aba51942a86849ae41c5397d596cb8ed1"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#aba51942a86849ae41c5397d596cb8ed1">ast_bridge_channel_queue_frame</a></div><div class="ttdeci">int ast_bridge_channel_queue_frame(struct ast_bridge_channel *bridge_channel, struct ast_frame *fr)</div><div class="ttdoc">Write a frame to the specified bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01044">bridge_channel.c:1044</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="lock_8h_html_a8a3bd496edfec04a95683ace66676200"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a></div><div class="ttdeci">int ast_atomic_fetchadd_int(volatile int *p, int v)</div><div class="ttdoc">Atomically add v to *p and return the previous value of *p. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00755">lock.h:755</a></div></div>
<div class="ttc" id="structsync__payload_html"><div class="ttname"><a href="../../d7/d61/structsync__payload.html">sync_payload</a></div><div class="ttdoc">Frame payload for synchronous bridge actions. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00087">bridge_channel.c:87</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_ace480ddb7578041e1cdce0aae982c7b5"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ace480ddb7578041e1cdce0aae982c7b5">sync_ids</a></div><div class="ttdeci">static int sync_ids</div><div class="ttdoc">Counter used for assigning synchronous bridge action IDs. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00078">bridge_channel.c:78</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_ab2187c643c3dd7929dbbdc4f83c0107b"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ab2187c643c3dd7929dbbdc4f83c0107b">bridge_sync_cleanup</a></div><div class="ttdeci">static void bridge_sync_cleanup(struct bridge_sync *sync_struct)</div><div class="ttdoc">Clean up a syncrhonization bridge object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00147">bridge_channel.c:147</a></div></div>
<div class="ttc" id="structbridge__sync_html"><div class="ttname"><a href="../../d7/d54/structbridge__sync.html">bridge_sync</a></div><div class="ttdoc">Synchronous bridge action object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00101">bridge_channel.c:101</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="structsync__payload_html_aef5b927d15f11382bf5f276630c08287"><div class="ttname"><a href="../../d7/d61/structsync__payload.html#aef5b927d15f11382bf5f276630c08287">sync_payload::data</a></div><div class="ttdeci">unsigned char data[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00091">bridge_channel.c:91</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeefa5121d4fde67d827c3daa2ef778d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeefa5121d4fde67d827c3daa2ef778d3">&#9670;&nbsp;</a></span>bridge_channel_queue_deferred_frames()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bridge_channel_queue_deferred_frames </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00830">830</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00231">ast_bridge_channel_lock</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00244">ast_bridge_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">ast_frfree</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00832">AST_LIST_REMOVE_HEAD</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01144">ast_queue_frame_head()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, and <a class="el" href="../../d5/dca/structast__bridge__channel.html#a57dec1f75e1bad5c281b1bf3cb1119cc">ast_bridge_channel::deferred_queue</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l00486">bridge_complete_join()</a>.</p>
<div class="fragment"><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;{</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a>(bridge_channel);</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;   <span class="keywordflow">while</span> ((frame = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a57dec1f75e1bad5c281b1bf3cb1119cc">deferred_queue</a>, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>))) {</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a5665eaabfca509388208e4bd83ed7532">ast_queue_frame_head</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, frame);</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(frame);</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;   }</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(bridge_channel);</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_aa467e25606c2a21df25c61f139007782"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a></div><div class="ttdeci">#define ast_bridge_channel_lock(bridge_channel)</div><div class="ttdoc">Lock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00231">bridge_channel.h:231</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="structframe__list_html"><div class="ttname"><a href="../../d9/d42/structframe__list.html">frame_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00590">res_rtp_asterisk.c:590</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_a483cd10a0ddcca5814298bdb4f153878"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a></div><div class="ttdeci">#define ast_bridge_channel_unlock(bridge_channel)</div><div class="ttdoc">Unlock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00244">bridge_channel.h:244</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a57dec1f75e1bad5c281b1bf3cb1119cc"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a57dec1f75e1bad5c281b1bf3cb1119cc">ast_bridge_channel::deferred_queue</a></div><div class="ttdeci">struct ast_bridge_channel::@231 deferred_queue</div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a6440d070425a2efe8e0aa71e8d9e47b7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a></div><div class="ttdeci">#define ast_frfree(fr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">include/asterisk/frame.h:556</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="channel_8h_html_a5665eaabfca509388208e4bd83ed7532"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a5665eaabfca509388208e4bd83ed7532">ast_queue_frame_head</a></div><div class="ttdeci">int ast_queue_frame_head(struct ast_channel *chan, struct ast_frame *f)</div><div class="ttdoc">Queue one or more frames to the head of a channel&amp;#39;s frame queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01144">channel.c:1144</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4c94159425af61159f1633ea88145179"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c94159425af61159f1633ea88145179">&#9670;&nbsp;</a></span>bridge_channel_run_app()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_channel_run_app </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../da/dd4/structbridge__run__app.html">bridge_run_app</a> *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01274">1274</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01259">bridge_run_app::app_args_offset</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01261">bridge_run_app::app_name</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01241">ast_bridge_channel_run_app()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01257">bridge_run_app::moh_offset</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02067">bridge_channel_handle_action()</a>.</p>
<div class="fragment"><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;{</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#a18a051cde2dd2ad809524473ef4ae5ef">ast_bridge_channel_run_app</a>(bridge_channel, data-&gt;<a class="code" href="../../da/dd4/structbridge__run__app.html#ad979c2b27e68fccd6f5920a16213e8b2">app_name</a>,</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;      data-&gt;<a class="code" href="../../da/dd4/structbridge__run__app.html#aaf2e732519876c8e04123d2f323ac9bd">app_args_offset</a> ? &amp;data-&gt;<a class="code" href="../../da/dd4/structbridge__run__app.html#ad979c2b27e68fccd6f5920a16213e8b2">app_name</a>[data-&gt;<a class="code" href="../../da/dd4/structbridge__run__app.html#aaf2e732519876c8e04123d2f323ac9bd">app_args_offset</a>] : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;      data-&gt;<a class="code" href="../../da/dd4/structbridge__run__app.html#a9f4835eab8f88d55b1b001792136937c">moh_offset</a> ? &amp;data-&gt;<a class="code" href="../../da/dd4/structbridge__run__app.html#ad979c2b27e68fccd6f5920a16213e8b2">app_name</a>[data-&gt;<a class="code" href="../../da/dd4/structbridge__run__app.html#a9f4835eab8f88d55b1b001792136937c">moh_offset</a>] : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structbridge__run__app_html_ad979c2b27e68fccd6f5920a16213e8b2"><div class="ttname"><a href="../../da/dd4/structbridge__run__app.html#ad979c2b27e68fccd6f5920a16213e8b2">bridge_run_app::app_name</a></div><div class="ttdeci">char app_name[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01261">bridge_channel.c:1261</a></div></div>
<div class="ttc" id="structbridge__run__app_html_aaf2e732519876c8e04123d2f323ac9bd"><div class="ttname"><a href="../../da/dd4/structbridge__run__app.html#aaf2e732519876c8e04123d2f323ac9bd">bridge_run_app::app_args_offset</a></div><div class="ttdeci">int app_args_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01259">bridge_channel.c:1259</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a18a051cde2dd2ad809524473ef4ae5ef"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a18a051cde2dd2ad809524473ef4ae5ef">ast_bridge_channel_run_app</a></div><div class="ttdeci">void ast_bridge_channel_run_app(struct ast_bridge_channel *bridge_channel, const char *app_name, const char *app_args, const char *moh_class)</div><div class="ttdoc">Run an application on the bridge channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01241">bridge_channel.c:1241</a></div></div>
<div class="ttc" id="structbridge__run__app_html_a9f4835eab8f88d55b1b001792136937c"><div class="ttname"><a href="../../da/dd4/structbridge__run__app.html#a9f4835eab8f88d55b1b001792136937c">bridge_run_app::moh_offset</a></div><div class="ttdeci">int moh_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01257">bridge_channel.c:1257</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a47058a18972f43983eb9109737c43229"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47058a18972f43983eb9109737c43229">&#9670;&nbsp;</a></span>bridge_channel_settle_owed_events()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bridge_channel_settle_owed_events </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>orig_bridge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00792">792</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00301">AST_CONTROL_T38_PARAMETERS</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">AST_FRAME_CONTROL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00099">AST_FRAME_DTMF_END</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00374">AST_T38_TERMINATED</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00166">ast_bridge_channel::dtmf_digit</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00164">ast_bridge_channel::dtmf_tv</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00193">ast_frame::len</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00307">LOG_DTMF</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00083">option_dtmfminduration</a>, <a class="el" href="../../d5/dca/structast__bridge__channel.html#a9647f1ba88c8b4de19adb38a2cf3e0d0">ast_bridge_channel::owed</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00398">ast_control_t38_parameters::request_response</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00181">ast_frame::src</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00168">ast_bridge_channel::t38_terminate</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00363">ast_bridge::technology</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00409">ast_bridge::uniqueid</a>, and <a class="el" href="../../d0/d3b/bridge__technology_8h_source.html#l00163">ast_bridge_technology::write</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02902">bridge_channel_internal_join()</a>, and <a class="el" href="../../d0/d95/bridge_8c_source.html#l02362">bridge_do_move()</a>.</p>
<div class="fragment"><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;{</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;   <span class="keywordflow">if</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a9647f1ba88c8b4de19adb38a2cf3e0d0">owed</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a5ec177afb70a8826ea2552ad82300113">dtmf_digit</a>) {</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> frame = {</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;         .<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a>,</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;         .subclass.integer = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a9647f1ba88c8b4de19adb38a2cf3e0d0">owed</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a5ec177afb70a8826ea2552ad82300113">dtmf_digit</a>,</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;         .src = <span class="stringliteral">&quot;Bridge channel owed DTMF&quot;</span>,</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;      };</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      frame.<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a> = <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a9647f1ba88c8b4de19adb38a2cf3e0d0">owed</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a7dda84c33a9f34c6a0192c88c263b507">dtmf_tv</a>);</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;      <span class="keywordflow">if</span> (frame.<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a> &lt; <a class="code" href="../../d6/dd6/group__main__options.html#gac4f0ffd69871cc47ad3dc030127b8719">option_dtmfminduration</a>) {</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;         frame.<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a> = <a class="code" href="../../d6/dd6/group__main__options.html#gac4f0ffd69871cc47ad3dc030127b8719">option_dtmfminduration</a>;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      }</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#af360dd5e7b67cff6cb747d1aa2ac3db8">LOG_DTMF</a>, <span class="stringliteral">&quot;DTMF end &#39;%c&#39; simulated to bridge %s because %s left.  Duration %ld ms.\n&quot;</span>,</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;         bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a9647f1ba88c8b4de19adb38a2cf3e0d0">owed</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a5ec177afb70a8826ea2552ad82300113">dtmf_digit</a>, orig_bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>,</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>), frame.<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a>);</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a9647f1ba88c8b4de19adb38a2cf3e0d0">owed</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a5ec177afb70a8826ea2552ad82300113">dtmf_digit</a> = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;      orig_bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#aabb60a181a9e98fb31f8666fb4f5d0b8">technology</a>-&gt;<a class="code" href="../../d1/d04/structast__bridge__technology.html#a81567dc49b2915ad81d9cb89dbbfbc70">write</a>(orig_bridge, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;frame);</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;   }</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;   <span class="keywordflow">if</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a9647f1ba88c8b4de19adb38a2cf3e0d0">owed</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a7b63feab852b0837d17cc08ced22335d">t38_terminate</a>) {</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d5/def/structast__control__t38__parameters.html">ast_control_t38_parameters</a> t38_parameters = {</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;         .<a class="code" href="../../d5/def/structast__control__t38__parameters.html#adb36822366e10ce64ca8337c512732a6">request_response</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4ba9df578b4287c86673d7f40f9abcdc86f">AST_T38_TERMINATED</a>,</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      };</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> frame = {</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;         .<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>,</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;         .subclass.integer = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a7334c9d27a6d70fe7c85b60b864788fc">AST_CONTROL_T38_PARAMETERS</a>,</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;         .data.ptr = &amp;t38_parameters,</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;         .datalen = <span class="keyword">sizeof</span>(t38_parameters),</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;         .<a class="code" href="../../d0/d99/structast__frame.html#af51e37c9331049b1e3d250a7c8bc3c26">src</a> = <span class="stringliteral">&quot;Bridge channel owed T.38 terminate&quot;</span>,</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      };</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;T.38 terminate simulated to bridge %s because %s left.\n&quot;</span>,</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;         orig_bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a9647f1ba88c8b4de19adb38a2cf3e0d0">owed</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a7b63feab852b0837d17cc08ced22335d">t38_terminate</a> = 0;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;      orig_bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#aabb60a181a9e98fb31f8666fb4f5d0b8">technology</a>-&gt;<a class="code" href="../../d1/d04/structast__bridge__technology.html#a81567dc49b2915ad81d9cb89dbbfbc70">write</a>(orig_bridge, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;frame);</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;   }</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;}</div><div class="ttc" id="structast__bridge__channel_html_a5ec177afb70a8826ea2552ad82300113"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a5ec177afb70a8826ea2552ad82300113">ast_bridge_channel::dtmf_digit</a></div><div class="ttdeci">char dtmf_digit</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00166">bridge_channel.h:166</a></div></div>
<div class="ttc" id="structast__bridge_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">ast_bridge::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00409">bridge.h:409</a></div></div>
<div class="ttc" id="group__main__options_html_gac4f0ffd69871cc47ad3dc030127b8719"><div class="ttname"><a href="../../d6/dd6/group__main__options.html#gac4f0ffd69871cc47ad3dc030127b8719">option_dtmfminduration</a></div><div class="ttdeci">unsigned int option_dtmfminduration</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00083">options.c:83</a></div></div>
<div class="ttc" id="structast__control__t38__parameters_html"><div class="ttname"><a href="../../d5/def/structast__control__t38__parameters.html">ast_control_t38_parameters</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00397">include/asterisk/frame.h:397</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a7b63feab852b0837d17cc08ced22335d"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a7b63feab852b0837d17cc08ced22335d">ast_bridge_channel::t38_terminate</a></div><div class="ttdeci">char t38_terminate</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00168">bridge_channel.h:168</a></div></div>
<div class="ttc" id="structast__control__t38__parameters_html_adb36822366e10ce64ca8337c512732a6"><div class="ttname"><a href="../../d5/def/structast__control__t38__parameters.html#adb36822366e10ce64ca8337c512732a6">ast_control_t38_parameters::request_response</a></div><div class="ttdeci">enum ast_control_t38 request_response</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00398">include/asterisk/frame.h:398</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a7dda84c33a9f34c6a0192c88c263b507"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a7dda84c33a9f34c6a0192c88c263b507">ast_bridge_channel::dtmf_tv</a></div><div class="ttdeci">struct timeval dtmf_tv</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00164">bridge_channel.h:164</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a7334c9d27a6d70fe7c85b60b864788fc"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a7334c9d27a6d70fe7c85b60b864788fc">AST_CONTROL_T38_PARAMETERS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00301">include/asterisk/frame.h:301</a></div></div>
<div class="ttc" id="structast__bridge_html_aabb60a181a9e98fb31f8666fb4f5d0b8"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#aabb60a181a9e98fb31f8666fb4f5d0b8">ast_bridge::technology</a></div><div class="ttdeci">struct ast_bridge_technology * technology</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00363">bridge.h:363</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__frame_html_af51e37c9331049b1e3d250a7c8bc3c26"><div class="ttname"><a href="../../d0/d99/structast__frame.html#af51e37c9331049b1e3d250a7c8bc3c26">ast_frame::src</a></div><div class="ttdeci">const char * src</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00181">include/asterisk/frame.h:181</a></div></div>
<div class="ttc" id="structast__bridge__technology_html_a81567dc49b2915ad81d9cb89dbbfbc70"><div class="ttname"><a href="../../d1/d04/structast__bridge__technology.html#a81567dc49b2915ad81d9cb89dbbfbc70">ast_bridge_technology::write</a></div><div class="ttdeci">int(* write)(struct ast_bridge *bridge, struct ast_bridge_channel *bridge_channel, struct ast_frame *frame)</div><div class="ttdoc">Write a frame into the bridging technology instance for a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3b/bridge__technology_8h_source.html#l00163">bridge_technology.h:163</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">include/asterisk/frame.h:105</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00099">include/asterisk/frame.h:99</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a9647f1ba88c8b4de19adb38a2cf3e0d0"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a9647f1ba88c8b4de19adb38a2cf3e0d0">ast_bridge_channel::owed</a></div><div class="ttdeci">struct ast_bridge_channel::@232 owed</div></div>
<div class="ttc" id="logger_8h_html_af360dd5e7b67cff6cb747d1aa2ac3db8"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#af360dd5e7b67cff6cb747d1aa2ac3db8">LOG_DTMF</a></div><div class="ttdeci">#define LOG_DTMF</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00307">logger.h:307</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a168d496bdac09ece3ce49cf473bbdb4ba9df578b4287c86673d7f40f9abcdc86f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4ba9df578b4287c86673d7f40f9abcdc86f">AST_T38_TERMINATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00374">include/asterisk/frame.h:374</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="structast__frame_html_aaccba9d5adc3f6c39aad767db95ba484"><div class="ttname"><a href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">ast_frame::len</a></div><div class="ttdeci">long len</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00193">include/asterisk/frame.h:193</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aed3b39418f4e59ea32eee175ee5b6602"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed3b39418f4e59ea32eee175ee5b6602">&#9670;&nbsp;</a></span>bridge_channel_suspend()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_channel_suspend </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00875">875</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00222">ast_bridge_channel_lock_bridge()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00493">ast_bridge_unlock</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00100">ast_bridge_channel::bridge</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00854">bridge_channel_internal_suspend_nolock()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01440">bridge_channel_do_callback()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02872">bridge_channel_event_join_leave()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02067">bridge_channel_handle_action()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01570">bridge_channel_handle_interval()</a>.</p>
<div class="fragment"><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;{</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a>(bridge_channel);</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#a447f05a7615581929349765430257a75">bridge_channel_internal_suspend_nolock</a>(bridge_channel);</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_a447f05a7615581929349765430257a75"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a447f05a7615581929349765430257a75">bridge_channel_internal_suspend_nolock</a></div><div class="ttdeci">void bridge_channel_internal_suspend_nolock(struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00854">bridge_channel.c:854</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="bridge_8h_html_a0fb66f4741ca8d106af1917a2f1aab6e"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a></div><div class="ttdeci">#define ast_bridge_unlock(bridge)</div><div class="ttdoc">Unlock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00493">bridge.h:493</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a7d01ff5caf025a97796d2dbb78f5f02c"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a></div><div class="ttdeci">void ast_bridge_channel_lock_bridge(struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Lock the bridge associated with the bridge channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00222">bridge_channel.c:222</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae932d794c2317a707fb0c616e6cb8d40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae932d794c2317a707fb0c616e6cb8d40">&#9670;&nbsp;</a></span>bridge_channel_talking()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_channel_talking </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>talking</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01899">1899</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01598">ao2_unlink</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00196">AST_BRIDGE_HOOK_TYPE_TALK</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00203">ast_bridge_hook::callback</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00132">ast_bridge_channel::features</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00207">ast_bridge_hook::hook_pvt</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00267">ast_bridge_features::other_hooks</a>, and <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00211">ast_bridge_hook::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02067">bridge_channel_handle_action()</a>.</p>
<div class="fragment"><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;{</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a> *features = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">features</a>;</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d3b/structast__bridge__hook.html">ast_bridge_hook</a> *hook;</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> iter;</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;   <span class="comment">/* Run any talk detection hooks. */</span></div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;   iter = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(features-&gt;<a class="code" href="../../db/dba/structast__bridge__features.html#a2918c32314a019cebcc4259e324a2745">other_hooks</a>, 0);</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;   <span class="keywordflow">for</span> (; (hook = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;iter)); <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(hook, -1)) {</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;      <span class="keywordtype">int</span> remove_me;</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#ad5b20a96dee3042c8cb23d45f7a93f79">ast_bridge_talking_indicate_callback</a> talk_cb;</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;      <span class="keywordflow">if</span> (hook-&gt;<a class="code" href="../../da/d3b/structast__bridge__hook.html#a9b8d1356a63d1d2c5892a83ea93af921">type</a> != <a class="code" href="../../dc/d7a/bridge__features_8h.html#a122c52bc5dec74974f3d4cf3870e7da3ad2f7e2bea8dd898409ef3166cb60543f">AST_BRIDGE_HOOK_TYPE_TALK</a>) {</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;      }</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;      talk_cb = (<a class="code" href="../../dc/d7a/bridge__features_8h.html#ad5b20a96dee3042c8cb23d45f7a93f79">ast_bridge_talking_indicate_callback</a>) hook-&gt;<a class="code" href="../../da/d3b/structast__bridge__hook.html#aff642471ebace1228460a3b47653fc35">callback</a>;</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;      remove_me = talk_cb(bridge_channel, hook-&gt;<a class="code" href="../../da/d3b/structast__bridge__hook.html#ad6640f8898b13ff6d292522ee3d4973f">hook_pvt</a>, talking);</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;      <span class="keywordflow">if</span> (remove_me) {</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Talk detection hook %p is being removed from %p(%s)\n&quot;</span>,</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;            hook, bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a>(features-&gt;<a class="code" href="../../db/dba/structast__bridge__features.html#a2918c32314a019cebcc4259e324a2745">other_hooks</a>, hook);</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;      }</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;   }</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;iter);</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;}</div><div class="ttc" id="bridge__features_8h_html_a122c52bc5dec74974f3d4cf3870e7da3ad2f7e2bea8dd898409ef3166cb60543f"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a122c52bc5dec74974f3d4cf3870e7da3ad2f7e2bea8dd898409ef3166cb60543f">AST_BRIDGE_HOOK_TYPE_TALK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00196">bridge_features.h:196</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a65633fdc6178dc8d9f754fda0166d16e"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">ast_bridge_channel::features</a></div><div class="ttdeci">struct ast_bridge_features * features</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00132">bridge_channel.h:132</a></div></div>
<div class="ttc" id="bridge__features_8h_html_ad5b20a96dee3042c8cb23d45f7a93f79"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#ad5b20a96dee3042c8cb23d45f7a93f79">ast_bridge_talking_indicate_callback</a></div><div class="ttdeci">int(* ast_bridge_talking_indicate_callback)(struct ast_bridge_channel *bridge_channel, void *hook_pvt, int talking)</div><div class="ttdoc">Talking indicator callback. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00160">bridge_features.h:160</a></div></div>
<div class="ttc" id="structast__bridge__features_html"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a></div><div class="ttdoc">Structure that contains features information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00263">bridge_features.h:263</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structast__bridge__hook_html_a9b8d1356a63d1d2c5892a83ea93af921"><div class="ttname"><a href="../../da/d3b/structast__bridge__hook.html#a9b8d1356a63d1d2c5892a83ea93af921">ast_bridge_hook::type</a></div><div class="ttdeci">enum ast_bridge_hook_type type</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00211">bridge_features.h:211</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_a64f51be4bee35c38dbe59b0a788b5ce8"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a></div><div class="ttdeci">#define ao2_unlink(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01598">astobj2.h:1598</a></div></div>
<div class="ttc" id="structast__bridge__hook_html_aff642471ebace1228460a3b47653fc35"><div class="ttname"><a href="../../da/d3b/structast__bridge__hook.html#aff642471ebace1228460a3b47653fc35">ast_bridge_hook::callback</a></div><div class="ttdeci">ast_bridge_hook_callback callback</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00203">bridge_features.h:203</a></div></div>
<div class="ttc" id="structast__bridge__hook_html_ad6640f8898b13ff6d292522ee3d4973f"><div class="ttname"><a href="../../da/d3b/structast__bridge__hook.html#ad6640f8898b13ff6d292522ee3d4973f">ast_bridge_hook::hook_pvt</a></div><div class="ttdeci">void * hook_pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00207">bridge_features.h:207</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="structast__bridge__features_html_a2918c32314a019cebcc4259e324a2745"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html#a2918c32314a019cebcc4259e324a2745">ast_bridge_features::other_hooks</a></div><div class="ttdeci">struct ao2_container * other_hooks</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00267">bridge_features.h:267</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
<div class="ttc" id="structast__bridge__hook_html"><div class="ttname"><a href="../../da/d3b/structast__bridge__hook.html">ast_bridge_hook</a></div><div class="ttdoc">Structure that is the essence of a feature hook. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00201">bridge_features.h:201</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8ecf592ba328e49347e4b727be38e06b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ecf592ba328e49347e4b727be38e06b">&#9670;&nbsp;</a></span>bridge_channel_unsuspend()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_channel_unsuspend </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00918">918</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00222">ast_bridge_channel_lock_bridge()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00493">ast_bridge_unlock</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00100">ast_bridge_channel::bridge</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00892">bridge_channel_internal_unsuspend_nolock()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01762">ast_bridge_channel_feature_digit()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01440">bridge_channel_do_callback()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02872">bridge_channel_event_join_leave()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02067">bridge_channel_handle_action()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01570">bridge_channel_handle_interval()</a>.</p>
<div class="fragment"><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;{</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a>(bridge_channel);</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#a25adcc7a991b49286746a062291ce1e1">bridge_channel_internal_unsuspend_nolock</a>(bridge_channel);</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;}</div><div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="bridge_8h_html_a0fb66f4741ca8d106af1917a2f1aab6e"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a></div><div class="ttdeci">#define ast_bridge_unlock(bridge)</div><div class="ttdoc">Unlock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00493">bridge.h:493</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a25adcc7a991b49286746a062291ce1e1"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a25adcc7a991b49286746a062291ce1e1">bridge_channel_internal_unsuspend_nolock</a></div><div class="ttdeci">void bridge_channel_internal_unsuspend_nolock(struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00892">bridge_channel.c:892</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a7d01ff5caf025a97796d2dbb78f5f02c"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a></div><div class="ttdeci">void ast_bridge_channel_lock_bridge(struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Lock the bridge associated with the bridge channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00222">bridge_channel.c:222</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a34beb432a9c38ae2010e6ce9a9f548d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34beb432a9c38ae2010e6ce9a9f548d6">&#9670;&nbsp;</a></span>bridge_channel_update_accountcodes_joining()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_channel_update_accountcodes_joining </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>joining</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>swap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00529">529</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02952">ast_channel_lock_both</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00100">ast_bridge_channel::bridge</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00466">channel_set_empty_accountcodes()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00511">channel_update_peeraccounts()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00371">ast_bridge::channels</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00381">ast_bridge::num_channels</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00596">ast_bridge_channel_update_accountcodes()</a>.</p>
<div class="fragment"><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;{</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge = joining-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *other;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> swap_in_bridge = 0;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> will_be_two_party;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment">    * Only update the peeraccount to match if the joining channel</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment">    * will make it a two party bridge.</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;   <span class="keywordflow">if</span> (bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a97e3bedeadf444995deb6fab68f57e21">num_channels</a> &lt;= 2 &amp;&amp; swap) {</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a77542a877d8ed62331c5b3b6aa3e87a7">channels</a>, other, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;         <span class="keywordflow">if</span> (other == swap) {</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            swap_in_bridge = 1;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;         }</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      }</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;   }</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;   will_be_two_party = (1 == bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a97e3bedeadf444995deb6fab68f57e21">num_channels</a> - swap_in_bridge);</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a77542a877d8ed62331c5b3b6aa3e87a7">channels</a>, other, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      <span class="keywordflow">if</span> (other == swap) {</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      }</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(joining != other);</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a695e5b4fcf983db6451b583fbd647424">ast_channel_lock_both</a>(joining-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, other-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a672c65d7c1035cfbbcfc3decb15826b4">channel_set_empty_accountcodes</a>(joining-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, other-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      <span class="keywordflow">if</span> (will_be_two_party) {</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;         <a class="code" href="../../d3/d32/bridge__channel_8c.html#afcfb8e7f0a6937ff8a02e1d515832fe7">channel_update_peeraccounts</a>(joining-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, other-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      }</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(joining-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(other-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;   }</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_a672c65d7c1035cfbbcfc3decb15826b4"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a672c65d7c1035cfbbcfc3decb15826b4">channel_set_empty_accountcodes</a></div><div class="ttdeci">static void channel_set_empty_accountcodes(struct ast_channel *c0, struct ast_channel *c1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00466">bridge_channel.c:466</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="channel_8h_html_a695e5b4fcf983db6451b583fbd647424"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a695e5b4fcf983db6451b583fbd647424">ast_channel_lock_both</a></div><div class="ttdeci">#define ast_channel_lock_both(chan1, chan2)</div><div class="ttdoc">Lock two channels. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02952">channel.h:2952</a></div></div>
<div class="ttc" id="structast__bridge_html_a77542a877d8ed62331c5b3b6aa3e87a7"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a77542a877d8ed62331c5b3b6aa3e87a7">ast_bridge::channels</a></div><div class="ttdeci">struct ast_bridge_channels_list channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00371">bridge.h:371</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="structast__bridge__channel_html"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a></div><div class="ttdoc">Structure that contains information regarding a channel in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00084">bridge_channel.h:84</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_afcfb8e7f0a6937ff8a02e1d515832fe7"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#afcfb8e7f0a6937ff8a02e1d515832fe7">channel_update_peeraccounts</a></div><div class="ttdeci">static void channel_update_peeraccounts(struct ast_channel *c0, struct ast_channel *c1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00511">bridge_channel.c:511</a></div></div>
<div class="ttc" id="structast__bridge_html_a97e3bedeadf444995deb6fab68f57e21"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a97e3bedeadf444995deb6fab68f57e21">ast_bridge::num_channels</a></div><div class="ttdeci">unsigned int num_channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00381">bridge.h:381</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac4b1c09de8a7b54ae9deb1dd6ac6d252"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4b1c09de8a7b54ae9deb1dd6ac6d252">&#9670;&nbsp;</a></span>bridge_channel_update_accountcodes_leaving()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_channel_update_accountcodes_leaving </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>leaving</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00576">576</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02952">ast_channel_lock_both</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00420">AST_LIST_FIRST</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00428">AST_LIST_LAST</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00100">ast_bridge_channel::bridge</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00466">channel_set_empty_accountcodes()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00511">channel_update_peeraccounts()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00371">ast_bridge::channels</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00398">ast_bridge::dissolved</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01092">first</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00381">ast_bridge::num_channels</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00596">ast_bridge_channel_update_accountcodes()</a>.</p>
<div class="fragment"><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;{</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge = leaving-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *<a class="code" href="../../df/d44/app__meetme_8c.html#a18b6f1cf748d864dd085819a7d4e6680">first</a>;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *second;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;   <span class="keywordflow">if</span> (bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a97e3bedeadf444995deb6fab68f57e21">num_channels</a> != 2 || bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a9ea77c25c2c57ec45bc6dfdea1c1a228">dissolved</a>) {</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;   }</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;   first = <a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a77542a877d8ed62331c5b3b6aa3e87a7">channels</a>);</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;   second = <a class="code" href="../../df/d90/linkedlists_8h.html#a1e37109bb72d95999821eb45f28c261c">AST_LIST_LAST</a>(&amp;bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a77542a877d8ed62331c5b3b6aa3e87a7">channels</a>);</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(first &amp;&amp; first != second);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a695e5b4fcf983db6451b583fbd647424">ast_channel_lock_both</a>(first-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, second-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#a672c65d7c1035cfbbcfc3decb15826b4">channel_set_empty_accountcodes</a>(first-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, second-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#afcfb8e7f0a6937ff8a02e1d515832fe7">channel_update_peeraccounts</a>(first-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, second-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(second-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(first-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_adf1959c5c03a3a706da97ad2f49617e5"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a></div><div class="ttdeci">#define AST_LIST_FIRST(head)</div><div class="ttdoc">Returns the first entry contained in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00420">linkedlists.h:420</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a672c65d7c1035cfbbcfc3decb15826b4"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a672c65d7c1035cfbbcfc3decb15826b4">channel_set_empty_accountcodes</a></div><div class="ttdeci">static void channel_set_empty_accountcodes(struct ast_channel *c0, struct ast_channel *c1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00466">bridge_channel.c:466</a></div></div>
<div class="ttc" id="structast__bridge_html_a9ea77c25c2c57ec45bc6dfdea1c1a228"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a9ea77c25c2c57ec45bc6dfdea1c1a228">ast_bridge::dissolved</a></div><div class="ttdeci">unsigned int dissolved</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00398">bridge.h:398</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a18b6f1cf748d864dd085819a7d4e6680"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a18b6f1cf748d864dd085819a7d4e6680">first</a></div><div class="ttdeci">struct sla_ringing_trunk * first</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01092">app_meetme.c:1092</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a1e37109bb72d95999821eb45f28c261c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a1e37109bb72d95999821eb45f28c261c">AST_LIST_LAST</a></div><div class="ttdeci">#define AST_LIST_LAST(head)</div><div class="ttdoc">Returns the last entry contained in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00428">linkedlists.h:428</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="channel_8h_html_a695e5b4fcf983db6451b583fbd647424"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a695e5b4fcf983db6451b583fbd647424">ast_channel_lock_both</a></div><div class="ttdeci">#define ast_channel_lock_both(chan1, chan2)</div><div class="ttdoc">Lock two channels. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02952">channel.h:2952</a></div></div>
<div class="ttc" id="structast__bridge_html_a77542a877d8ed62331c5b3b6aa3e87a7"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a77542a877d8ed62331c5b3b6aa3e87a7">ast_bridge::channels</a></div><div class="ttdeci">struct ast_bridge_channels_list channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00371">bridge.h:371</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="structast__bridge__channel_html"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a></div><div class="ttdoc">Structure that contains information regarding a channel in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00084">bridge_channel.h:84</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_afcfb8e7f0a6937ff8a02e1d515832fe7"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#afcfb8e7f0a6937ff8a02e1d515832fe7">channel_update_peeraccounts</a></div><div class="ttdeci">static void channel_update_peeraccounts(struct ast_channel *c0, struct ast_channel *c1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00511">bridge_channel.c:511</a></div></div>
<div class="ttc" id="structast__bridge_html_a97e3bedeadf444995deb6fab68f57e21"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a97e3bedeadf444995deb6fab68f57e21">ast_bridge::num_channels</a></div><div class="ttdeci">unsigned int num_channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00381">bridge.h:381</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a717bb399c92f239032b5bfd020df4b4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a717bb399c92f239032b5bfd020df4b4a">&#9670;&nbsp;</a></span>bridge_channel_wait()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_channel_wait </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02808">2808</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00160">ast_bridge_channel::activity</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00151">ast_bridge_channel::alert_pipe</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00476">ao2_object_get_lockaddr()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00231">ast_bridge_channel_lock</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00222">ast_bridge_channel_lock_bridge()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00244">ast_bridge_channel_unlock</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00493">ast_bridge_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01034">ast_channel_set_unbridged()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01019">ast_channel_unbridged()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00203">ast_cond_wait</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02997">ast_waitfor_nandfds()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00100">ast_bridge_channel::bridge</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01883">bridge_channel_handle_feature_timeout()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01570">bridge_channel_handle_interval()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02444">bridge_channel_handle_write()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02782">bridge_channel_next_timeout()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00062">BRIDGE_CHANNEL_STATE_WAIT</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00075">BRIDGE_CHANNEL_THREAD_FRAME</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00071">BRIDGE_CHANNEL_THREAD_IDLE</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02608">bridge_handle_trip()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l01443">bridge_reconfigured()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00087">ast_bridge_channel::cond</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00396">ast_bridge::reconfigured</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00089">ast_bridge_channel::state</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00125">ast_bridge_channel::suspended</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00409">ast_bridge::uniqueid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02902">bridge_channel_internal_join()</a>.</p>
<div class="fragment"><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;{</div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;   <span class="keywordtype">int</span> ms;</div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;   <span class="keywordtype">int</span> outfd;</div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;</div><div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;   <span class="comment">/* Wait for data to either come from the channel or us to be signaled */</span></div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a>(bridge_channel);</div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;   <span class="keywordflow">if</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a871f4f1d537a1cd524ee8c28b623104f">state</a> != <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853">BRIDGE_CHANNEL_STATE_WAIT</a>) {</div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a2862ffde11c780129862e5549415a6f6">suspended</a>) {</div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;<span class="comment">/* XXX ASTERISK-21271 the external party use of suspended will go away as will these references because this is the bridge channel thread */</span></div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Bridge %s: %p(%s) is going into a signal wait\n&quot;</span>,</div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;         bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>, bridge_channel,</div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a>(&amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a503b6c7ced96f9b56ec59c115cbeb29a">ao2_object_get_lockaddr</a>(bridge_channel));</div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(bridge_channel);</div><div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;      outfd = -1;</div><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;      ms = <a class="code" href="../../d3/d32/bridge__channel_8c.html#a21f30c0137d0b0935d56ec2139db1de8">bridge_channel_next_timeout</a>(bridge_channel);</div><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;      chan = <a class="code" href="../../d5/d7b/channel_8h.html#a5e62602ca9e229304f60ab5c2b32e13b">ast_waitfor_nandfds</a>(&amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, 1,</div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;         &amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a55935aecf1002b1dfa1324bc3799b67c">alert_pipe</a>[0], 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;outfd, &amp;ms);</div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#abe3ed00598198643ab729c80896cb525">ast_channel_unbridged</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)) {</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a9cb9a26413cd87d1f107b51b5d2fd50f">ast_channel_set_unbridged</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, 0);</div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;         <a class="code" href="../../d3/d32/bridge__channel_8c.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a>(bridge_channel);</div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;         bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a41d441063234a215e985a56318a07a6f">reconfigured</a> = 1;</div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;         <a class="code" href="../../d5/dde/bridge__internal_8h.html#a6f66125893195db451bca7e9d71bd0a5">bridge_reconfigured</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, 0);</div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;         <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;      }</div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a>(bridge_channel);</div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;      bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ab1fa9a8c0210d018531c277982b76b44">activity</a> = <a class="code" href="../../de/d41/bridge__channel_8h.html#ad52acdbb06c9299895662cf57a4323a3a90dd0ccabc55139d4f416a7fdde24921">BRIDGE_CHANNEL_THREAD_FRAME</a>;</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(bridge_channel);</div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;      <span class="keywordflow">if</span> (!bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a2862ffde11c780129862e5549415a6f6">suspended</a></div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;         &amp;&amp; bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a871f4f1d537a1cd524ee8c28b623104f">state</a> == <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853">BRIDGE_CHANNEL_STATE_WAIT</a>) {</div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;         <span class="keywordflow">if</span> (chan) {</div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;            <a class="code" href="../../d3/d32/bridge__channel_8c.html#a04238a5de09bdeeddebf79fef4ffa5cc">bridge_handle_trip</a>(bridge_channel);</div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ms == 0) {</div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;            <span class="comment">/* An interdigit timeout or interval expired. */</span></div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;            <a class="code" href="../../d3/d32/bridge__channel_8c.html#ab0deb73b09c4bf32c73ac6ad3a1c43b8">bridge_channel_handle_feature_timeout</a>(bridge_channel);</div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;            <a class="code" href="../../d3/d32/bridge__channel_8c.html#a8d20e88ba1d1afc162d24a262cd8713b">bridge_channel_handle_interval</a>(bridge_channel);</div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (-1 &lt; outfd) {</div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;<span class="comment">             * Must do this after checking timeouts or may have</span></div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;<span class="comment">             * an infinite loop due to deferring write queue</span></div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;<span class="comment">             * actions while trying to match DTMF feature hooks.</span></div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;            <a class="code" href="../../d3/d32/bridge__channel_8c.html#a9f4ed276033d66e7c8ad20cbbb6d1428">bridge_channel_handle_write</a>(bridge_channel);</div><div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;         }</div><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;      }</div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;      bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ab1fa9a8c0210d018531c277982b76b44">activity</a> = <a class="code" href="../../de/d41/bridge__channel_8h.html#ad52acdbb06c9299895662cf57a4323a3aeaf381ba8ae8b2716b0dff5e77d539f4">BRIDGE_CHANNEL_THREAD_IDLE</a>;</div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;   }</div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(bridge_channel);</div><div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_ab1fa9a8c0210d018531c277982b76b44"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#ab1fa9a8c0210d018531c277982b76b44">ast_bridge_channel::activity</a></div><div class="ttdeci">enum bridge_channel_thread_state activity</div><div class="ttdoc">The bridge channel thread activity. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00160">bridge_channel.h:160</a></div></div>
<div class="ttc" id="structast__bridge_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a753c7b39e3284d771f13f513b003d033">ast_bridge::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00409">bridge.h:409</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ad52acdbb06c9299895662cf57a4323a3a90dd0ccabc55139d4f416a7fdde24921"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ad52acdbb06c9299895662cf57a4323a3a90dd0ccabc55139d4f416a7fdde24921">BRIDGE_CHANNEL_THREAD_FRAME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00075">bridge_channel.h:75</a></div></div>
<div class="ttc" id="structast__bridge_html_a41d441063234a215e985a56318a07a6f"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a41d441063234a215e985a56318a07a6f">ast_bridge::reconfigured</a></div><div class="ttdeci">unsigned int reconfigured</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00396">bridge.h:396</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a871f4f1d537a1cd524ee8c28b623104f"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a871f4f1d537a1cd524ee8c28b623104f">ast_bridge_channel::state</a></div><div class="ttdeci">enum bridge_channel_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00089">bridge_channel.h:89</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a2862ffde11c780129862e5549415a6f6"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a2862ffde11c780129862e5549415a6f6">ast_bridge_channel::suspended</a></div><div class="ttdeci">unsigned int suspended</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00125">bridge_channel.h:125</a></div></div>
<div class="ttc" id="lock_8h_html_a36233c5520173c095bf732a788356aee"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a></div><div class="ttdeci">#define ast_cond_wait(cond, mutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00203">lock.h:203</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a04238a5de09bdeeddebf79fef4ffa5cc"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a04238a5de09bdeeddebf79fef4ffa5cc">bridge_handle_trip</a></div><div class="ttdeci">static void bridge_handle_trip(struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l02608">bridge_channel.c:2608</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="channel_8h_html_a5e62602ca9e229304f60ab5c2b32e13b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a5e62602ca9e229304f60ab5c2b32e13b">ast_waitfor_nandfds</a></div><div class="ttdeci">struct ast_channel * ast_waitfor_nandfds(struct ast_channel **chan, int n, int *fds, int nfds, int *exception, int *outfd, int *ms)</div><div class="ttdoc">Waits for activity on a group of channels. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02997">channel.c:2997</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="astobj2_8h_html_a503b6c7ced96f9b56ec59c115cbeb29a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a503b6c7ced96f9b56ec59c115cbeb29a">ao2_object_get_lockaddr</a></div><div class="ttdeci">void * ao2_object_get_lockaddr(void *obj)</div><div class="ttdoc">Return the mutex lock address of an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00476">astobj2.c:476</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_aa467e25606c2a21df25c61f139007782"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a></div><div class="ttdeci">#define ast_bridge_channel_lock(bridge_channel)</div><div class="ttdoc">Lock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00231">bridge_channel.h:231</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ad52acdbb06c9299895662cf57a4323a3aeaf381ba8ae8b2716b0dff5e77d539f4"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ad52acdbb06c9299895662cf57a4323a3aeaf381ba8ae8b2716b0dff5e77d539f4">BRIDGE_CHANNEL_THREAD_IDLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00071">bridge_channel.h:71</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a8d20e88ba1d1afc162d24a262cd8713b"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a8d20e88ba1d1afc162d24a262cd8713b">bridge_channel_handle_interval</a></div><div class="ttdeci">static void bridge_channel_handle_interval(struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01570">bridge_channel.c:1570</a></div></div>
<div class="ttc" id="bridge__internal_8h_html_a6f66125893195db451bca7e9d71bd0a5"><div class="ttname"><a href="../../d5/dde/bridge__internal_8h.html#a6f66125893195db451bca7e9d71bd0a5">bridge_reconfigured</a></div><div class="ttdeci">void bridge_reconfigured(struct ast_bridge *bridge, unsigned int colp_update)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l01443">bridge.c:1443</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_a483cd10a0ddcca5814298bdb4f153878"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a></div><div class="ttdeci">#define ast_bridge_channel_unlock(bridge_channel)</div><div class="ttdoc">Unlock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00244">bridge_channel.h:244</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a1c7181c39f99ee801943a0d0aa9872b9">ast_bridge_channel::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00087">bridge_channel.h:87</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a55935aecf1002b1dfa1324bc3799b67c"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a55935aecf1002b1dfa1324bc3799b67c">ast_bridge_channel::alert_pipe</a></div><div class="ttdeci">int alert_pipe[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00151">bridge_channel.h:151</a></div></div>
<div class="ttc" id="bridge_8h_html_a0fb66f4741ca8d106af1917a2f1aab6e"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a></div><div class="ttdeci">#define ast_bridge_unlock(bridge)</div><div class="ttdoc">Unlock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00493">bridge.h:493</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a9f4ed276033d66e7c8ad20cbbb6d1428"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a9f4ed276033d66e7c8ad20cbbb6d1428">bridge_channel_handle_write</a></div><div class="ttdeci">static void bridge_channel_handle_write(struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l02444">bridge_channel.c:2444</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channel_8h_html_abe3ed00598198643ab729c80896cb525"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abe3ed00598198643ab729c80896cb525">ast_channel_unbridged</a></div><div class="ttdeci">int ast_channel_unbridged(struct ast_channel *chan)</div><div class="ttdoc">This function will check if the bridge needs to be re-evaluated due to external changes. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01019">channel_internal_api.c:1019</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853">BRIDGE_CHANNEL_STATE_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00062">bridge_channel.h:62</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a7d01ff5caf025a97796d2dbb78f5f02c"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a></div><div class="ttdeci">void ast_bridge_channel_lock_bridge(struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Lock the bridge associated with the bridge channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00222">bridge_channel.c:222</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_ab0deb73b09c4bf32c73ac6ad3a1c43b8"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ab0deb73b09c4bf32c73ac6ad3a1c43b8">bridge_channel_handle_feature_timeout</a></div><div class="ttdeci">static void bridge_channel_handle_feature_timeout(struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01883">bridge_channel.c:1883</a></div></div>
<div class="ttc" id="channel_8h_html_a9cb9a26413cd87d1f107b51b5d2fd50f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9cb9a26413cd87d1f107b51b5d2fd50f">ast_channel_set_unbridged</a></div><div class="ttdeci">void ast_channel_set_unbridged(struct ast_channel *chan, int value)</div><div class="ttdoc">Sets the unbridged flag and queues a NULL frame on the channel to trigger a check by bridge_channel_w...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01034">channel_internal_api.c:1034</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a21f30c0137d0b0935d56ec2139db1de8"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a21f30c0137d0b0935d56ec2139db1de8">bridge_channel_next_timeout</a></div><div class="ttdeci">static int bridge_channel_next_timeout(struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l02782">bridge_channel.c:2782</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab5fa80b07664f5cad47c085e069d8671"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5fa80b07664f5cad47c085e069d8671">&#9670;&nbsp;</a></span>bridge_channel_write_action_data()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int bridge_channel_write_action_data </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0a">bridge_channel_action_type</a>&#160;</td>
          <td class="paramname"><em>action</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>datalen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01010">1010</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00127">AST_FRAME_BRIDGE_ACTION</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00650">bridge_channel_write_frame()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01309">ast_bridge_channel_write_app()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01484">ast_bridge_channel_write_callback()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01555">ast_bridge_channel_write_park()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01398">ast_bridge_channel_write_playfile()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01659">bridge_channel_write_dtmf_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;{</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> frame = {</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;      .<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af36653b08c00f5d824ed6046e9233ef9">AST_FRAME_BRIDGE_ACTION</a>,</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;      .subclass.integer = action,</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;      .datalen = <a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>,</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;      .data.ptr = (<span class="keywordtype">void</span> *) <a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>,</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;   };</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d32/bridge__channel_8c.html#aa2de5bc97f8dffac7f5f56f3f6d107f4">bridge_channel_write_frame</a>(bridge_channel, &amp;frame);</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_aa2de5bc97f8dffac7f5f56f3f6d107f4"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#aa2de5bc97f8dffac7f5f56f3f6d107f4">bridge_channel_write_frame</a></div><div class="ttdeci">static int bridge_channel_write_frame(struct ast_bridge_channel *bridge_channel, struct ast_frame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00650">bridge_channel.c:650</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0af36653b08c00f5d824ed6046e9233ef9"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af36653b08c00f5d824ed6046e9233ef9">AST_FRAME_BRIDGE_ACTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00127">include/asterisk/frame.h:127</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aed96ccca09065f16ac440c0ebd52f46e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed96ccca09065f16ac440c0ebd52f46e">&#9670;&nbsp;</a></span>bridge_channel_write_dtmf_stream()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int bridge_channel_write_dtmf_stream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dtmf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01659">1659</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00043">BRIDGE_CHANNEL_ACTION_DTMF_STREAM</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01010">bridge_channel_write_action_data()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01762">ast_bridge_channel_feature_digit()</a>.</p>
<div class="fragment"><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;{</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d32/bridge__channel_8c.html#ab5fa80b07664f5cad47c085e069d8671">bridge_channel_write_action_data</a>(bridge_channel,</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;      <a class="code" href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa389b169b13e7dfcecc36fdaf0399487a">BRIDGE_CHANNEL_ACTION_DTMF_STREAM</a>, dtmf, strlen(dtmf) + 1);</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_ab5fa80b07664f5cad47c085e069d8671"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ab5fa80b07664f5cad47c085e069d8671">bridge_channel_write_action_data</a></div><div class="ttdeci">static int bridge_channel_write_action_data(struct ast_bridge_channel *bridge_channel, enum bridge_channel_action_type action, const void *data, size_t datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01010">bridge_channel.c:1010</a></div></div>
<div class="ttc" id="bridge__channel__internal_8h_html_adadb2f6b306233caecdabcf1a7440b0aa389b169b13e7dfcecc36fdaf0399487a"><div class="ttname"><a href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa389b169b13e7dfcecc36fdaf0399487a">BRIDGE_CHANNEL_ACTION_DTMF_STREAM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00043">bridge_channel_internal.h:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa2de5bc97f8dffac7f5f56f3f6d107f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2de5bc97f8dffac7f5f56f3f6d107f4">&#9670;&nbsp;</a></span>bridge_channel_write_frame()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int bridge_channel_write_frame </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>frame</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00650">650</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00231">ast_bridge_channel_lock</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00222">ast_bridge_channel_lock_bridge()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00244">ast_bridge_channel_unlock</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00493">ast_bridge_unlock</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01643">ast_channel_is_multistream()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00301">AST_CONTROL_T38_PARAMETERS</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00133">AST_FRAME_BRIDGE_ACTION_SYNC</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">AST_FRAME_CONTROL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00125">AST_FRAME_DTMF_BEGIN</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00099">AST_FRAME_DTMF_END</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00116">AST_FRAME_IMAGE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00135">AST_FRAME_RTCP</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00114">AST_FRAME_TEXT</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00103">AST_FRAME_VIDEO</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">AST_FRAME_VOICE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00585">ast_frdup</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00710">AST_LIST_INSERT_HEAD</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00373">AST_T38_NEGOTIATED</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00375">AST_T38_REFUSED</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00371">AST_T38_REQUEST_NEGOTIATE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00372">AST_T38_REQUEST_TERMINATE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00374">AST_T38_TERMINATED</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00100">ast_bridge_channel::bridge</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../d5/dca/structast__bridge__channel.html#a57dec1f75e1bad5c281b1bf3cb1119cc">ast_bridge_channel::deferred_queue</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00166">ast_bridge_channel::dtmf_digit</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00164">ast_bridge_channel::dtmf_tv</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">ast_frame_subclass::integer</a>, <a class="el" href="../../d5/dca/structast__bridge__channel.html#a9647f1ba88c8b4de19adb38a2cf3e0d0">ast_bridge_channel::owed</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">ast_frame::ptr</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00398">ast_control_t38_parameters::request_response</a>, <a class="el" href="../../d5/dca/structast__bridge__channel.html#affe0d3ce4e4266e3b4a4ea543fbc4d78">ast_bridge_channel::stream_map</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00197">ast_frame::stream_num</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00168">ast_bridge_channel::t38_terminate</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00363">ast_bridge::technology</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00190">ast_bridge_channel::to_bridge</a>, and <a class="el" href="../../d0/d3b/bridge__technology_8h_source.html#l00163">ast_bridge_technology::write</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01155">ast_bridge_channel_write_control_data()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01010">bridge_channel_write_action_data()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02608">bridge_handle_trip()</a>.</p>
<div class="fragment"><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;{</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d5/def/structast__control__t38__parameters.html">ast_control_t38_parameters</a> *t38_parameters;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;   <span class="keywordtype">int</span> unmapped_stream_num;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;   <span class="keywordtype">int</span> deferred;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> != <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa28206b97fb0795e1fa681248fd0d97f">AST_FRAME_BRIDGE_ACTION_SYNC</a>);</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a>(bridge_channel);</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;<span class="comment">    * Map the frame to the bridge.</span></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;<span class="comment">    * We need to lock the bridge_channel to make sure that bridge_channel-&gt;chan</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="comment">    * isn&#39;t NULL and keep it locked while we do multistream processing.</span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a>(bridge_channel);</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;   <span class="keywordflow">if</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a> &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#aee89f8031cb348efd3a20be962e7eefb">ast_channel_is_multistream</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)) {</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;      unmapped_stream_num = frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a>;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;      <span class="keywordflow">switch</span> (frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a>) {</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>:</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30">AST_FRAME_VIDEO</a>:</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078">AST_FRAME_TEXT</a>:</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a6c9398ee8989239124295d096a87bf32">AST_FRAME_IMAGE</a>:</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ac2b2b163b29fde967531b8bf92966c97">AST_FRAME_RTCP</a>:</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;         <span class="comment">/* These frames need to be mapped to an appropriate write stream */</span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;         <span class="keywordflow">if</span> (frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a> &lt; 0) {</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;            <span class="comment">/* Map to default stream */</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;            frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a> = -1;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;         }</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;         <span class="keywordflow">if</span> (frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a> &lt; (<span class="keywordtype">int</span>)<a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#affe0d3ce4e4266e3b4a4ea543fbc4d78">stream_map</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a18ea63e0b49a472021ff7848f4193dd5">to_bridge</a>)) {</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;            frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a> = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;               &amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#affe0d3ce4e4266e3b4a4ea543fbc4d78">stream_map</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a18ea63e0b49a472021ff7848f4193dd5">to_bridge</a>, frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a>);</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            <span class="keywordflow">if</span> (0 &lt;= frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a>) {</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            }</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;         }</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;         <a class="code" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(bridge_channel);</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;         <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="comment">          * Ignore frame because we don&#39;t know how to map the frame</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="comment">          * or the bridge is not expecting any media from that</span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="comment">          * stream.</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be">AST_FRAME_DTMF_BEGIN</a>:</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a>:</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="comment">          * XXX It makes sense that DTMF could be on any audio stream.</span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="comment">          * For now we will only put it on the default audio stream.</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;         frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a> = -1;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      }</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      unmapped_stream_num = -1;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a> = -1;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;   }</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(bridge_channel);</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;   deferred = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#aabb60a181a9e98fb31f8666fb4f5d0b8">technology</a>-&gt;<a class="code" href="../../d1/d04/structast__bridge__technology.html#a81567dc49b2915ad81d9cb89dbbfbc70">write</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, bridge_channel, frame);</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;   <span class="keywordflow">if</span> (deferred) {</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *dup;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;      dup = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a417ee8a61074ec7570971202908e2c4f">ast_frdup</a>(frame);</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      <span class="keywordflow">if</span> (dup) {</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="comment">          * We have to unmap the deferred frame so it comes back</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment">          * in like a new frame.</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;         dup-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a> = unmapped_stream_num;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;         <a class="code" href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a>(bridge_channel);</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a>(&amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a57dec1f75e1bad5c281b1bf3cb1119cc">deferred_queue</a>, dup, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;         <a class="code" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(bridge_channel);</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      }</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;   }</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;   <span class="comment">/* Remember any owed events to the bridge. */</span></div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;   <span class="keywordflow">switch</span> (frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a>) {</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be">AST_FRAME_DTMF_BEGIN</a>:</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a9647f1ba88c8b4de19adb38a2cf3e0d0">owed</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a7dda84c33a9f34c6a0192c88c263b507">dtmf_tv</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;      bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a9647f1ba88c8b4de19adb38a2cf3e0d0">owed</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a5ec177afb70a8826ea2552ad82300113">dtmf_digit</a> = frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a>:</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a9647f1ba88c8b4de19adb38a2cf3e0d0">owed</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a5ec177afb70a8826ea2552ad82300113">dtmf_digit</a> = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>:</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="comment">       * We explicitly will not remember HOLD/UNHOLD frames because</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="comment">       * things like attended transfers will handle them.</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;      <span class="keywordflow">switch</span> (frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>) {</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a7334c9d27a6d70fe7c85b60b864788fc">AST_CONTROL_T38_PARAMETERS</a>:</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;         t38_parameters = frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;         <span class="keywordflow">switch</span> (t38_parameters-&gt;<a class="code" href="../../d5/def/structast__control__t38__parameters.html#adb36822366e10ce64ca8337c512732a6">request_response</a>) {</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4bafdb1ca68d683c64301c4cf07463a9975">AST_T38_REQUEST_NEGOTIATE</a>:</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4bad501e0d5fe272eaba466507a686a2df5">AST_T38_NEGOTIATED</a>:</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;            bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a9647f1ba88c8b4de19adb38a2cf3e0d0">owed</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a7b63feab852b0837d17cc08ced22335d">t38_terminate</a> = 1;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4bab75e46d3212a2a886143d874c78a1e3c">AST_T38_REQUEST_TERMINATE</a>:</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4ba9df578b4287c86673d7f40f9abcdc86f">AST_T38_TERMINATED</a>:</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4baa02b30f25621f20396d06f5ac8aa7a2e">AST_T38_REFUSED</a>:</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;            bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a9647f1ba88c8b4de19adb38a2cf3e0d0">owed</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a7b63feab852b0837d17cc08ced22335d">t38_terminate</a> = 0;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;         <span class="keywordflow">default</span>:</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;         }</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;      }</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;   }</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="comment">    * Claim successful write to bridge.  If deferred frame</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;<span class="comment">    * support is added, claim successfully deferred.</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;}</div><div class="ttc" id="structast__bridge__channel_html_a5ec177afb70a8826ea2552ad82300113"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a5ec177afb70a8826ea2552ad82300113">ast_bridge_channel::dtmf_digit</a></div><div class="ttdeci">char dtmf_digit</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00166">bridge_channel.h:166</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a417ee8a61074ec7570971202908e2c4f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a417ee8a61074ec7570971202908e2c4f">ast_frdup</a></div><div class="ttdeci">#define ast_frdup(fr)</div><div class="ttdoc">Copies a frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00585">include/asterisk/frame.h:585</a></div></div>
<div class="ttc" id="channel_8h_html_aee89f8031cb348efd3a20be962e7eefb"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aee89f8031cb348efd3a20be962e7eefb">ast_channel_is_multistream</a></div><div class="ttdeci">int ast_channel_is_multistream(struct ast_channel *chan)</div><div class="ttdoc">Determine if a channel is multi-stream capable. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01643">channel_internal_api.c:1643</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078">AST_FRAME_TEXT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00114">include/asterisk/frame.h:114</a></div></div>
<div class="ttc" id="structast__control__t38__parameters_html"><div class="ttname"><a href="../../d5/def/structast__control__t38__parameters.html">ast_control_t38_parameters</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00397">include/asterisk/frame.h:397</a></div></div>
<div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa28206b97fb0795e1fa681248fd0d97f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa28206b97fb0795e1fa681248fd0d97f">AST_FRAME_BRIDGE_ACTION_SYNC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00133">include/asterisk/frame.h:133</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a7b63feab852b0837d17cc08ced22335d"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a7b63feab852b0837d17cc08ced22335d">ast_bridge_channel::t38_terminate</a></div><div class="ttdeci">char t38_terminate</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00168">bridge_channel.h:168</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a168d496bdac09ece3ce49cf473bbdb4bafdb1ca68d683c64301c4cf07463a9975"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4bafdb1ca68d683c64301c4cf07463a9975">AST_T38_REQUEST_NEGOTIATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00371">include/asterisk/frame.h:371</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">include/asterisk/frame.h:101</a></div></div>
<div class="ttc" id="structast__control__t38__parameters_html_adb36822366e10ce64ca8337c512732a6"><div class="ttname"><a href="../../d5/def/structast__control__t38__parameters.html#adb36822366e10ce64ca8337c512732a6">ast_control_t38_parameters::request_response</a></div><div class="ttdeci">enum ast_control_t38 request_response</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00398">include/asterisk/frame.h:398</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a168d496bdac09ece3ce49cf473bbdb4bab75e46d3212a2a886143d874c78a1e3c"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4bab75e46d3212a2a886143d874c78a1e3c">AST_T38_REQUEST_TERMINATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00372">include/asterisk/frame.h:372</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_affe0d3ce4e4266e3b4a4ea543fbc4d78"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#affe0d3ce4e4266e3b4a4ea543fbc4d78">ast_bridge_channel::stream_map</a></div><div class="ttdeci">struct ast_bridge_channel::@236 stream_map</div></div>
<div class="ttc" id="structast__bridge__channel_html_a7dda84c33a9f34c6a0192c88c263b507"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a7dda84c33a9f34c6a0192c88c263b507">ast_bridge_channel::dtmf_tv</a></div><div class="ttdeci">struct timeval dtmf_tv</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00164">bridge_channel.h:164</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a18ea63e0b49a472021ff7848f4193dd5"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a18ea63e0b49a472021ff7848f4193dd5">ast_bridge_channel::to_bridge</a></div><div class="ttdeci">struct ast_vector_int to_bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00190">bridge_channel.h:190</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a7334c9d27a6d70fe7c85b60b864788fc"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a7334c9d27a6d70fe7c85b60b864788fc">AST_CONTROL_T38_PARAMETERS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00301">include/asterisk/frame.h:301</a></div></div>
<div class="ttc" id="structast__bridge_html_aabb60a181a9e98fb31f8666fb4f5d0b8"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#aabb60a181a9e98fb31f8666fb4f5d0b8">ast_bridge::technology</a></div><div class="ttdeci">struct ast_bridge_technology * technology</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00363">bridge.h:363</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_adece183191b0e700e039e59101e06105"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">ast_frame_subclass::integer</a></div><div class="ttdeci">int integer</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">include/asterisk/frame.h:152</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_aa467e25606c2a21df25c61f139007782"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a></div><div class="ttdeci">#define ast_bridge_channel_lock(bridge_channel)</div><div class="ttdoc">Lock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00231">bridge_channel.h:231</a></div></div>
<div class="ttc" id="structast__bridge__technology_html_a81567dc49b2915ad81d9cb89dbbfbc70"><div class="ttname"><a href="../../d1/d04/structast__bridge__technology.html#a81567dc49b2915ad81d9cb89dbbfbc70">ast_bridge_technology::write</a></div><div class="ttdeci">int(* write)(struct ast_bridge *bridge, struct ast_bridge_channel *bridge_channel, struct ast_frame *frame)</div><div class="ttdoc">Write a frame into the bridging technology instance for a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3b/bridge__technology_8h_source.html#l00163">bridge_technology.h:163</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a168d496bdac09ece3ce49cf473bbdb4baa02b30f25621f20396d06f5ac8aa7a2e"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4baa02b30f25621f20396d06f5ac8aa7a2e">AST_T38_REFUSED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00375">include/asterisk/frame.h:375</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a6c9398ee8989239124295d096a87bf32"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a6c9398ee8989239124295d096a87bf32">AST_FRAME_IMAGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00116">include/asterisk/frame.h:116</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ac2b2b163b29fde967531b8bf92966c97"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ac2b2b163b29fde967531b8bf92966c97">AST_FRAME_RTCP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00135">include/asterisk/frame.h:135</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">include/asterisk/frame.h:105</a></div></div>
<div class="ttc" id="structframe__list_html"><div class="ttname"><a href="../../d9/d42/structframe__list.html">frame_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00590">res_rtp_asterisk.c:590</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_a483cd10a0ddcca5814298bdb4f153878"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a></div><div class="ttdeci">#define ast_bridge_channel_unlock(bridge_channel)</div><div class="ttdoc">Unlock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00244">bridge_channel.h:244</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00099">include/asterisk/frame.h:99</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a9647f1ba88c8b4de19adb38a2cf3e0d0"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a9647f1ba88c8b4de19adb38a2cf3e0d0">ast_bridge_channel::owed</a></div><div class="ttdeci">struct ast_bridge_channel::@232 owed</div></div>
<div class="ttc" id="linkedlists_8h_html_aa2ded2af046bb513f77056c27c083307"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_LIST_INSERT_HEAD(head, elm, field)</div><div class="ttdoc">Inserts a list entry at the head of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00710">linkedlists.h:710</a></div></div>
<div class="ttc" id="bridge_8h_html_a0fb66f4741ca8d106af1917a2f1aab6e"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a></div><div class="ttdeci">#define ast_bridge_unlock(bridge)</div><div class="ttdoc">Unlock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00493">bridge.h:493</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a57dec1f75e1bad5c281b1bf3cb1119cc"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a57dec1f75e1bad5c281b1bf3cb1119cc">ast_bridge_channel::deferred_queue</a></div><div class="ttdeci">struct ast_bridge_channel::@231 deferred_queue</div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a168d496bdac09ece3ce49cf473bbdb4bad501e0d5fe272eaba466507a686a2df5"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4bad501e0d5fe272eaba466507a686a2df5">AST_T38_NEGOTIATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00373">include/asterisk/frame.h:373</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a168d496bdac09ece3ce49cf473bbdb4ba9df578b4287c86673d7f40f9abcdc86f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a168d496bdac09ece3ce49cf473bbdb4ba9df578b4287c86673d7f40f9abcdc86f">AST_T38_TERMINATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00374">include/asterisk/frame.h:374</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__frame_html_a8383e75e786449dd2f4258b0819dd8f1"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">ast_frame::stream_num</a></div><div class="ttdeci">int stream_num</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00197">include/asterisk/frame.h:197</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be">AST_FRAME_DTMF_BEGIN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00125">include/asterisk/frame.h:125</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30">AST_FRAME_VIDEO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00103">include/asterisk/frame.h:103</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a7d01ff5caf025a97796d2dbb78f5f02c"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a></div><div class="ttdeci">void ast_bridge_channel_lock_bridge(struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Lock the bridge associated with the bridge channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00222">bridge_channel.c:222</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3742c8c577dcc82edd8c4431a11a599e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3742c8c577dcc82edd8c4431a11a599e">&#9670;&nbsp;</a></span>bridge_frame_free()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_frame_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>frame</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01023">1023</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00133">AST_FRAME_BRIDGE_ACTION_SYNC</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">ast_frfree</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00206">bridge_sync_signal()</a>, <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00089">sync_payload::id</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00103">bridge_sync::id</a>, <a class="el" href="../../d7/d54/structbridge__sync.html#a6e062a63f59ab22a226c6dd1f2c095e8">bridge_sync::list</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">ast_frame::ptr</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01044">ast_bridge_channel_queue_frame()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l03117">bridge_channel_destroy()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02444">bridge_channel_handle_write()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02548">bridge_handle_dtmf()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02608">bridge_handle_trip()</a>.</p>
<div class="fragment"><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;{</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;   <span class="keywordflow">if</span> (frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa28206b97fb0795e1fa681248fd0d97f">AST_FRAME_BRIDGE_ACTION_SYNC</a>) {</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d7/d61/structsync__payload.html">sync_payload</a> *<a class="code" href="../../d7/d61/structsync__payload.html">sync_payload</a> = frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d7/d54/structbridge__sync.html">bridge_sync</a> *sync;</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../dd/dac/structsync__structs.html">sync_structs</a>);</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../dd/dac/structsync__structs.html">sync_structs</a>, sync, <a class="code" href="../../d7/d54/structbridge__sync.html#a6e062a63f59ab22a226c6dd1f2c095e8">list</a>) {</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;         <span class="keywordflow">if</span> (sync-&gt;<a class="code" href="../../d7/d54/structbridge__sync.html#ab7ce6f462afaf105224b0ca772a33c43">id</a> == sync_payload-&gt;<a class="code" href="../../d7/d61/structsync__payload.html#ab7ce6f462afaf105224b0ca772a33c43">id</a>) {</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;         }</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;      }</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;      <span class="keywordflow">if</span> (sync) {</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;         <a class="code" href="../../d3/d32/bridge__channel_8c.html#ae68c46393ea342c81f3ecfdd2200346f">bridge_sync_signal</a>(sync);</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;      }</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../dd/dac/structsync__structs.html">sync_structs</a>);</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;   }</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;   <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(frame);</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;}</div><div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa28206b97fb0795e1fa681248fd0d97f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa28206b97fb0795e1fa681248fd0d97f">AST_FRAME_BRIDGE_ACTION_SYNC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00133">include/asterisk/frame.h:133</a></div></div>
<div class="ttc" id="structsync__payload_html_ab7ce6f462afaf105224b0ca772a33c43"><div class="ttname"><a href="../../d7/d61/structsync__payload.html#ab7ce6f462afaf105224b0ca772a33c43">sync_payload::id</a></div><div class="ttdeci">unsigned int id</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00089">bridge_channel.c:89</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structsync__payload_html"><div class="ttname"><a href="../../d7/d61/structsync__payload.html">sync_payload</a></div><div class="ttdoc">Frame payload for synchronous bridge actions. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00087">bridge_channel.c:87</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="structsync__structs_html"><div class="ttname"><a href="../../dd/dac/structsync__structs.html">sync_structs</a></div><div class="ttdoc">List holding active synchronous action objects. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00113">bridge_channel.c:113</a></div></div>
<div class="ttc" id="structbridge__sync_html_a6e062a63f59ab22a226c6dd1f2c095e8"><div class="ttname"><a href="../../d7/d54/structbridge__sync.html#a6e062a63f59ab22a226c6dd1f2c095e8">bridge_sync::list</a></div><div class="ttdeci">struct bridge_sync::@354 list</div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a6440d070425a2efe8e0aa71e8d9e47b7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a></div><div class="ttdeci">#define ast_frfree(fr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">include/asterisk/frame.h:556</a></div></div>
<div class="ttc" id="structbridge__sync_html"><div class="ttname"><a href="../../d7/d54/structbridge__sync.html">bridge_sync</a></div><div class="ttdoc">Synchronous bridge action object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00101">bridge_channel.c:101</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_ae68c46393ea342c81f3ecfdd2200346f"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ae68c46393ea342c81f3ecfdd2200346f">bridge_sync_signal</a></div><div class="ttdeci">static void bridge_sync_signal(struct bridge_sync *sync_struct)</div><div class="ttdoc">Signal that waiting for a synchronous bridge action is no longer necessary. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00206">bridge_channel.c:206</a></div></div>
<div class="ttc" id="structbridge__sync_html_ab7ce6f462afaf105224b0ca772a33c43"><div class="ttname"><a href="../../d7/d54/structbridge__sync.html#ab7ce6f462afaf105224b0ca772a33c43">bridge_sync::id</a></div><div class="ttdeci">unsigned int id</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00103">bridge_channel.c:103</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab6fc33a656f547f1279f5e9967a678d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6fc33a656f547f1279f5e9967a678d4">&#9670;&nbsp;</a></span>bridge_handle_dtmf()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a>* bridge_handle_dtmf </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>frame</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Internal function to handle DTMF from a channel. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02548">2548</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01762">ast_bridge_channel_feature_digit()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00125">AST_FRAME_DTMF_BEGIN</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00099">AST_FRAME_DTMF_END</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00196">ast_test_suite_event_notify</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01023">bridge_frame_free()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00175">ast_bridge_channel::collected</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00230">ast_bridge_hook_dtmf::dtmf</a>, <a class="el" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">ast_bridge_channel::dtmf_hook_state</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00265">ast_bridge_features::dtmf_hooks</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00132">ast_bridge_channel::features</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">ast_frame_subclass::integer</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01120">OBJ_SEARCH_PARTIAL_KEY</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02608">bridge_handle_trip()</a>.</p>
<div class="fragment"><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;{</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a> *features = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">features</a>;</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d92/structast__bridge__hook__dtmf.html">ast_bridge_hook_dtmf</a> *hook = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/d92/structast__bridge__hook__dtmf.html#a09e6a40a51d2d887563667ee42a6c1f5">dtmf</a>[2];</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;<span class="comment">    * See if we are already matching a DTMF feature hook sequence or</span></div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;<span class="comment">    * if this DTMF matches the beginning of any DTMF feature hooks.</span></div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;   dtmf[0] = frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>;</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;   dtmf[1] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;   <span class="keywordflow">if</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">collected</a>[0]</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;      || (hook = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(features-&gt;<a class="code" href="../../db/dba/structast__bridge__features.html#a70760b613dd26b51a5667e7f0fa7fb8a">dtmf_hooks</a>, dtmf, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20">OBJ_SEARCH_PARTIAL_KEY</a>))) {</div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;      <span class="keyword">enum</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0">ast_frame_type</a> frametype = frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a>;</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a3742c8c577dcc82edd8c4431a11a599e">bridge_frame_free</a>(frame);</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;      frame = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(hook);</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;      <span class="keywordflow">switch</span> (frametype) {</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be">AST_FRAME_DTMF_BEGIN</a>:</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;         <span class="comment">/* Just eat the frame. */</span></div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a>:</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;         <a class="code" href="../../d3/d32/bridge__channel_8c.html#a69864377e8f1cf05ba95f1645bc98c65">ast_bridge_channel_feature_digit</a>(bridge_channel, dtmf[0]);</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;         <span class="comment">/* Unexpected frame type. */</span></div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;      }</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;<span class="preprocessor">#ifdef TEST_FRAMEWORK</span></div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a>) {</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;      <span class="comment">/* Only transmit this event on DTMF end or else every DTMF</span></div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;<span class="comment">       * press will result in the event being broadcast twice</span></div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a>(<span class="stringliteral">&quot;FEATURE_DETECTION&quot;</span>, <span class="stringliteral">&quot;Result: fail&quot;</span>);</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;   }</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;   <span class="keywordflow">return</span> frame;</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;}</div><div class="ttc" id="structast__bridge__channel_html_ae7cf5bbda4cf5f01c7fbaf80404b8586"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">ast_bridge_channel::dtmf_hook_state</a></div><div class="ttdeci">struct ast_bridge_channel::@233 dtmf_hook_state</div></div>
<div class="ttc" id="structast__bridge__channel_html_a65633fdc6178dc8d9f754fda0166d16e"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">ast_bridge_channel::features</a></div><div class="ttdeci">struct ast_bridge_features * features</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00132">bridge_channel.h:132</a></div></div>
<div class="ttc" id="structast__bridge__features_html"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a></div><div class="ttdoc">Structure that contains features information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00263">bridge_features.h:263</a></div></div>
<div class="ttc" id="structast__bridge__features_html_a70760b613dd26b51a5667e7f0fa7fb8a"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html#a70760b613dd26b51a5667e7f0fa7fb8a">ast_bridge_features::dtmf_hooks</a></div><div class="ttdeci">struct ao2_container * dtmf_hooks</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00265">bridge_features.h:265</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a69864377e8f1cf05ba95f1645bc98c65"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a69864377e8f1cf05ba95f1645bc98c65">ast_bridge_channel_feature_digit</a></div><div class="ttdeci">void ast_bridge_channel_feature_digit(struct ast_bridge_channel *bridge_channel, int digit)</div><div class="ttdoc">Add a DTMF digit to the collected digits to match against DTMF features. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01762">bridge_channel.c:1762</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a61eb94728edfc0596b44498ce570d084"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">ast_bridge_channel::collected</a></div><div class="ttdeci">char collected[MAXIMUM_DTMF_FEATURE_STRING]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00175">bridge_channel.h:175</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="structast__bridge__hook__dtmf_html"><div class="ttname"><a href="../../dd/d92/structast__bridge__hook__dtmf.html">ast_bridge_hook_dtmf</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00226">bridge_features.h:226</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_adece183191b0e700e039e59101e06105"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">ast_frame_subclass::integer</a></div><div class="ttdeci">int integer</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">include/asterisk/frame.h:152</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20">OBJ_SEARCH_PARTIAL_KEY</a></div><div class="ttdoc">The arg parameter is a partial search key similar to OBJ_SEARCH_KEY. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01120">astobj2.h:1120</a></div></div>
<div class="ttc" id="structast__bridge__hook__dtmf_html_a09e6a40a51d2d887563667ee42a6c1f5"><div class="ttname"><a href="../../dd/d92/structast__bridge__hook__dtmf.html#a09e6a40a51d2d887563667ee42a6c1f5">ast_bridge_hook_dtmf::dtmf</a></div><div class="ttdeci">struct ast_bridge_hook_dtmf_parms dtmf</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00230">bridge_features.h:230</a></div></div>
<div class="ttc" id="test_8h_html_a9482d93ea3931853331bdbc745ce7cb4"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a></div><div class="ttdeci">#define ast_test_suite_event_notify(s, f,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00196">test.h:196</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0">ast_frame_type</a></div><div class="ttdeci">ast_frame_type</div><div class="ttdoc">Frame types. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00097">include/asterisk/frame.h:97</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00099">include/asterisk/frame.h:99</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be">AST_FRAME_DTMF_BEGIN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00125">include/asterisk/frame.h:125</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a3742c8c577dcc82edd8c4431a11a599e"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a3742c8c577dcc82edd8c4431a11a599e">bridge_frame_free</a></div><div class="ttdeci">static void bridge_frame_free(struct ast_frame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01023">bridge_channel.c:1023</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a04238a5de09bdeeddebf79fef4ffa5cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04238a5de09bdeeddebf79fef4ffa5cc">&#9670;&nbsp;</a></span>bridge_handle_trip()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_handle_trip </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02608">2608</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00605">ast_bridge_channel_kick()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00222">ast_bridge_channel_lock_bridge()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l03174">ast_bridge_channel_stream_map()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00493">ast_bridge_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h.html#af2f955678d93e76be4776d66154b5fdc">ast_channel_call_forward()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01643">ast_channel_is_multistream()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l00739">ast_channel_publish_dial()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l00689">ast_channel_publish_dial_forward()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00281">AST_CONTROL_ANSWER</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00282">AST_CONTROL_BUSY</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00285">AST_CONTROL_CONGESTION</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00278">AST_CONTROL_HANGUP</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00292">AST_CONTROL_PROCEEDING</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00291">AST_CONTROL_PROGRESS</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00280">AST_CONTROL_RINGING</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00313">AST_CONTROL_STREAM_TOPOLOGY_CHANGED</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00312">AST_CONTROL_STREAM_TOPOLOGY_REQUEST_CHANGE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">AST_FRAME_CONTROL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00125">AST_FRAME_DTMF_BEGIN</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00099">AST_FRAME_DTMF_END</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04307">ast_read_stream()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04317">ast_read_stream_noaudio()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00100">ast_bridge_channel::bridge</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00650">bridge_channel_write_frame()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01023">bridge_frame_free()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02548">bridge_handle_dtmf()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02593">controls</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00279">ast_bridge_features::dtmf_passthrough</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00132">ast_bridge_channel::features</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">ast_frame_subclass::integer</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00277">ast_bridge_features::mute</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00197">ast_frame::stream_num</a>, <a class="el" href="../../d0/d3b/bridge__technology_8h_source.html#l00192">ast_bridge_technology::stream_topology_changed</a>, <a class="el" href="../../d0/d3b/bridge__technology_8h_source.html#l00179">ast_bridge_technology::stream_topology_request_change</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00363">ast_bridge::technology</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02808">bridge_channel_wait()</a>.</p>
<div class="fragment"><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;{</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *frame;</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;   <span class="keywordtype">int</span> blocked;</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/d7b/channel_8h.html#af2f955678d93e76be4776d66154b5fdc">ast_channel_call_forward</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>))) {</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;      <span class="comment">/* TODO If early bridging is ever used by anything other than ARI,</span></div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;<span class="comment">       * it&#39;s important that we actually attempt to handle the call forward</span></div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;<span class="comment">       * attempt, as well as expand features on a bridge channel to allow/disallow</span></div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;<span class="comment">       * call forwarding. For now, all we do is raise an event, showing that</span></div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;<span class="comment">       * a call forward is being attempted.</span></div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf83a1fec8f09a2acf1dc6912207af41a">ast_channel_publish_dial_forward</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot;CANCEL&quot;</span>,</div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af2f955678d93e76be4776d66154b5fdc">ast_channel_call_forward</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;   }</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;   <span class="keywordflow">if</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">features</a>-&gt;<a class="code" href="../../db/dba/structast__bridge__features.html#aa09e22acd94cd548a204c100e11fd612">mute</a>) {</div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;      frame = <a class="code" href="../../d5/d7b/channel_8h.html#ab400aad1c2ca55d35effa1e633030407">ast_read_stream_noaudio</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;      frame = <a class="code" href="../../d5/d7b/channel_8h.html#a483a9d187ae7c3036225586009b04e8a">ast_read_stream</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;   }</div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;   <span class="keywordflow">if</span> (!frame) {</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a7e482bb2dcffd792205f114ddfa098fb">ast_bridge_channel_kick</a>(bridge_channel, 0);</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;   }</div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#aee89f8031cb348efd3a20be962e7eefb">ast_channel_is_multistream</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)) {</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;      <span class="comment">/* This may not be initialized by non-multistream channel drivers */</span></div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;      frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a> = -1;</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;   }</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;   <span class="keywordflow">switch</span> (frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a>) {</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>:</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;      <span class="keywordflow">switch</span> (frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>) {</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a850bb06a1702741c93a3fd67cc9637ab">AST_CONTROL_CONGESTION</a>:</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875">AST_CONTROL_BUSY</a>:</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;         <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga7d446221f9a272b003c4ad660a7e14dc">ast_channel_publish_dial</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d3/d32/bridge__channel_8c.html#a6e4f3d7a045c6d1218caf66aa7a0be1f">controls</a>[frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>]);</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba">AST_CONTROL_HANGUP</a>:</div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;         <a class="code" href="../../d3/d32/bridge__channel_8c.html#a7e482bb2dcffd792205f114ddfa098fb">ast_bridge_channel_kick</a>(bridge_channel, 0);</div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;         <a class="code" href="../../d3/d32/bridge__channel_8c.html#a3742c8c577dcc82edd8c4431a11a599e">bridge_frame_free</a>(frame);</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a>:</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a1a461c5e737ed6ed7c8cb0f78557a6fd">AST_CONTROL_PROGRESS</a>:</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a50b7fe33bba67b74dd7b746539e81000">AST_CONTROL_PROCEEDING</a>:</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe">AST_CONTROL_ANSWER</a>:</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;         <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga7d446221f9a272b003c4ad660a7e14dc">ast_channel_publish_dial</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d3/d32/bridge__channel_8c.html#a6e4f3d7a045c6d1218caf66aa7a0be1f">controls</a>[frame-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>]);</div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a44656a284fb1f50d225d2634ede69171">AST_CONTROL_STREAM_TOPOLOGY_REQUEST_CHANGE</a>:</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;         <a class="code" href="../../d3/d32/bridge__channel_8c.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a>(bridge_channel);</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;         blocked = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#aabb60a181a9e98fb31f8666fb4f5d0b8">technology</a>-&gt;<a class="code" href="../../d1/d04/structast__bridge__technology.html#a366081c6b692b0ff8c1966a636c0d621">stream_topology_request_change</a></div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;            &amp;&amp; bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#aabb60a181a9e98fb31f8666fb4f5d0b8">technology</a>-&gt;<a class="code" href="../../d1/d04/structast__bridge__technology.html#a366081c6b692b0ff8c1966a636c0d621">stream_topology_request_change</a>(</div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;               bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, bridge_channel);</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;         <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;         <span class="keywordflow">if</span> (blocked) {</div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;<span class="comment">             * Topology change was intercepted by the bridge technology</span></div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;<span class="comment">             * so drop frame.</span></div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;            <a class="code" href="../../d3/d32/bridge__channel_8c.html#a3742c8c577dcc82edd8c4431a11a599e">bridge_frame_free</a>(frame);</div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;         }</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac4227fb216ecb8388d24e9d4776ad400">AST_CONTROL_STREAM_TOPOLOGY_CHANGED</a>:</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;<span class="comment">          * If a stream topology has changed then the bridge_channel&#39;s</span></div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;<span class="comment">          * media mapping needs to be updated.</span></div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;         <a class="code" href="../../d3/d32/bridge__channel_8c.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a>(bridge_channel);</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;         <span class="keywordflow">if</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#aabb60a181a9e98fb31f8666fb4f5d0b8">technology</a>-&gt;<a class="code" href="../../d1/d04/structast__bridge__technology.html#a71189769795dc03db956d60eca08d377">stream_topology_changed</a>) {</div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;            bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#aabb60a181a9e98fb31f8666fb4f5d0b8">technology</a>-&gt;<a class="code" href="../../d1/d04/structast__bridge__technology.html#a71189769795dc03db956d60eca08d377">stream_topology_changed</a>(</div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;               bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, bridge_channel);</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;            <a class="code" href="../../d3/d32/bridge__channel_8c.html#aa464f1acd378d6a297a514007cec8d18">ast_bridge_channel_stream_map</a>(bridge_channel);</div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;         }</div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;         <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;      }</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be">AST_FRAME_DTMF_BEGIN</a>:</div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a>:</div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;      frame = <a class="code" href="../../d3/d32/bridge__channel_8c.html#ab6fc33a656f547f1279f5e9967a678d4">bridge_handle_dtmf</a>(bridge_channel, frame);</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;      <span class="keywordflow">if</span> (!frame) {</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;      }</div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;      <span class="keywordflow">if</span> (!bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">features</a>-&gt;<a class="code" href="../../db/dba/structast__bridge__features.html#a9ed40fc6a252b84f86044f975cc94283">dtmf_passthrough</a>) {</div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;         <a class="code" href="../../d3/d32/bridge__channel_8c.html#a3742c8c577dcc82edd8c4431a11a599e">bridge_frame_free</a>(frame);</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;      }</div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;   }</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;</div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;   <span class="comment">/* Simply write the frame out to the bridge technology. */</span></div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#aa2de5bc97f8dffac7f5f56f3f6d107f4">bridge_channel_write_frame</a>(bridge_channel, frame);</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#a3742c8c577dcc82edd8c4431a11a599e">bridge_frame_free</a>(frame);</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_aa2de5bc97f8dffac7f5f56f3f6d107f4"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#aa2de5bc97f8dffac7f5f56f3f6d107f4">bridge_channel_write_frame</a></div><div class="ttdeci">static int bridge_channel_write_frame(struct ast_bridge_channel *bridge_channel, struct ast_frame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00650">bridge_channel.c:650</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a65633fdc6178dc8d9f754fda0166d16e"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">ast_bridge_channel::features</a></div><div class="ttdeci">struct ast_bridge_features * features</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00132">bridge_channel.h:132</a></div></div>
<div class="ttc" id="channel_8h_html_aee89f8031cb348efd3a20be962e7eefb"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aee89f8031cb348efd3a20be962e7eefb">ast_channel_is_multistream</a></div><div class="ttdeci">int ast_channel_is_multistream(struct ast_channel *chan)</div><div class="ttdoc">Determine if a channel is multi-stream capable. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01643">channel_internal_api.c:1643</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga7d446221f9a272b003c4ad660a7e14dc"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga7d446221f9a272b003c4ad660a7e14dc">ast_channel_publish_dial</a></div><div class="ttdeci">void ast_channel_publish_dial(struct ast_channel *caller, struct ast_channel *peer, const char *dialstring, const char *dialstatus)</div><div class="ttdoc">Publish in the ast_channel_topic or ast_channel_topic_all topics a stasis message for the channels in...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00739">stasis_channels.c:739</a></div></div>
<div class="ttc" id="structast__bridge__technology_html_a366081c6b692b0ff8c1966a636c0d621"><div class="ttname"><a href="../../d1/d04/structast__bridge__technology.html#a366081c6b692b0ff8c1966a636c0d621">ast_bridge_technology::stream_topology_request_change</a></div><div class="ttdeci">int(* stream_topology_request_change)(struct ast_bridge *bridge, struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Callback for when a request has been made to change a stream topology on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3b/bridge__technology_8h_source.html#l00179">bridge_technology.h:179</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe">AST_CONTROL_ANSWER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00281">include/asterisk/frame.h:281</a></div></div>
<div class="ttc" id="channel_8h_html_a483a9d187ae7c3036225586009b04e8a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a483a9d187ae7c3036225586009b04e8a">ast_read_stream</a></div><div class="ttdeci">struct ast_frame * ast_read_stream(struct ast_channel *chan)</div><div class="ttdoc">Reads a frame, but does not filter to just the default streams. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04307">channel.c:4307</a></div></div>
<div class="ttc" id="structast__bridge__technology_html_a71189769795dc03db956d60eca08d377"><div class="ttname"><a href="../../d1/d04/structast__bridge__technology.html#a71189769795dc03db956d60eca08d377">ast_bridge_technology::stream_topology_changed</a></div><div class="ttdeci">void(* stream_topology_changed)(struct ast_bridge *bridge, struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Callback for when a stream topology changes on the channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3b/bridge__technology_8h_source.html#l00192">bridge_technology.h:192</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875">AST_CONTROL_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00282">include/asterisk/frame.h:282</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a6e4f3d7a045c6d1218caf66aa7a0be1f"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a6e4f3d7a045c6d1218caf66aa7a0be1f">controls</a></div><div class="ttdeci">static const char * controls[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l02593">bridge_channel.c:2593</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="channel_8h_html_af2f955678d93e76be4776d66154b5fdc"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af2f955678d93e76be4776d66154b5fdc">ast_channel_call_forward</a></div><div class="ttdeci">const char * ast_channel_call_forward(const struct ast_channel *chan)</div></div>
<div class="ttc" id="bridge__channel_8c_html_aa464f1acd378d6a297a514007cec8d18"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#aa464f1acd378d6a297a514007cec8d18">ast_bridge_channel_stream_map</a></div><div class="ttdeci">void ast_bridge_channel_stream_map(struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Maps a channel&amp;#39;s stream topology to and from the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l03174">bridge_channel.c:3174</a></div></div>
<div class="ttc" id="structast__bridge__features_html_aa09e22acd94cd548a204c100e11fd612"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html#aa09e22acd94cd548a204c100e11fd612">ast_bridge_features::mute</a></div><div class="ttdeci">unsigned int mute</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00277">bridge_features.h:277</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a50b7fe33bba67b74dd7b746539e81000"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a50b7fe33bba67b74dd7b746539e81000">AST_CONTROL_PROCEEDING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00292">include/asterisk/frame.h:292</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__bridge_html_aabb60a181a9e98fb31f8666fb4f5d0b8"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#aabb60a181a9e98fb31f8666fb4f5d0b8">ast_bridge::technology</a></div><div class="ttdeci">struct ast_bridge_technology * technology</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00363">bridge.h:363</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_adece183191b0e700e039e59101e06105"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">ast_frame_subclass::integer</a></div><div class="ttdeci">int integer</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">include/asterisk/frame.h:152</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a7e482bb2dcffd792205f114ddfa098fb"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a7e482bb2dcffd792205f114ddfa098fb">ast_bridge_channel_kick</a></div><div class="ttdeci">void ast_bridge_channel_kick(struct ast_bridge_channel *bridge_channel, int cause)</div><div class="ttdoc">Kick the channel out of the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00605">bridge_channel.c:605</a></div></div>
<div class="ttc" id="channel_8h_html_ab400aad1c2ca55d35effa1e633030407"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab400aad1c2ca55d35effa1e633030407">ast_read_stream_noaudio</a></div><div class="ttdeci">struct ast_frame * ast_read_stream_noaudio(struct ast_channel *chan)</div><div class="ttdoc">Reads a frame, but does not filter to just the default streams, returning AST_FRAME_NULL frame if aud...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04317">channel.c:4317</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">include/asterisk/frame.h:105</a></div></div>
<div class="ttc" id="structast__bridge__features_html_a9ed40fc6a252b84f86044f975cc94283"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html#a9ed40fc6a252b84f86044f975cc94283">ast_bridge_features::dtmf_passthrough</a></div><div class="ttdeci">unsigned int dtmf_passthrough</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00279">bridge_features.h:279</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00099">include/asterisk/frame.h:99</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba">AST_CONTROL_HANGUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00278">include/asterisk/frame.h:278</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaf83a1fec8f09a2acf1dc6912207af41a"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaf83a1fec8f09a2acf1dc6912207af41a">ast_channel_publish_dial_forward</a></div><div class="ttdeci">void ast_channel_publish_dial_forward(struct ast_channel *caller, struct ast_channel *peer, struct ast_channel *forwarded, const char *dialstring, const char *dialstatus, const char *forward)</div><div class="ttdoc">Publish in the ast_channel_topic or ast_channel_topic_all topics a stasis message for the channels in...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00689">stasis_channels.c:689</a></div></div>
<div class="ttc" id="bridge_8h_html_a0fb66f4741ca8d106af1917a2f1aab6e"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a></div><div class="ttdeci">#define ast_bridge_unlock(bridge)</div><div class="ttdoc">Unlock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00493">bridge.h:493</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a1a461c5e737ed6ed7c8cb0f78557a6fd"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a1a461c5e737ed6ed7c8cb0f78557a6fd">AST_CONTROL_PROGRESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00291">include/asterisk/frame.h:291</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00280">include/asterisk/frame.h:280</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ac4227fb216ecb8388d24e9d4776ad400"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac4227fb216ecb8388d24e9d4776ad400">AST_CONTROL_STREAM_TOPOLOGY_CHANGED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00313">include/asterisk/frame.h:313</a></div></div>
<div class="ttc" id="structast__frame_html_a8383e75e786449dd2f4258b0819dd8f1"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">ast_frame::stream_num</a></div><div class="ttdeci">int stream_num</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00197">include/asterisk/frame.h:197</a></div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be">AST_FRAME_DTMF_BEGIN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00125">include/asterisk/frame.h:125</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a3742c8c577dcc82edd8c4431a11a599e"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a3742c8c577dcc82edd8c4431a11a599e">bridge_frame_free</a></div><div class="ttdeci">static void bridge_frame_free(struct ast_frame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01023">bridge_channel.c:1023</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a7d01ff5caf025a97796d2dbb78f5f02c"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a></div><div class="ttdeci">void ast_bridge_channel_lock_bridge(struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Lock the bridge associated with the bridge channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00222">bridge_channel.c:222</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a850bb06a1702741c93a3fd67cc9637ab"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a850bb06a1702741c93a3fd67cc9637ab">AST_CONTROL_CONGESTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00285">include/asterisk/frame.h:285</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a44656a284fb1f50d225d2634ede69171"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a44656a284fb1f50d225d2634ede69171">AST_CONTROL_STREAM_TOPOLOGY_REQUEST_CHANGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00312">include/asterisk/frame.h:312</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_ab6fc33a656f547f1279f5e9967a678d4"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ab6fc33a656f547f1279f5e9967a678d4">bridge_handle_dtmf</a></div><div class="ttdeci">static struct ast_frame * bridge_handle_dtmf(struct ast_bridge_channel *bridge_channel, struct ast_frame *frame)</div><div class="ttdoc">Internal function to handle DTMF from a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l02548">bridge_channel.c:2548</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab2187c643c3dd7929dbbdc4f83c0107b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2187c643c3dd7929dbbdc4f83c0107b">&#9670;&nbsp;</a></span>bridge_sync_cleanup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_sync_cleanup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d54/structbridge__sync.html">bridge_sync</a> *&#160;</td>
          <td class="paramname"><em>sync_struct</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clean up a syncrhonization bridge object. </p>
<p>This frees fields within the synchronization object and removes it from the list of active synchronization objects.</p>
<p>Since synchronization objects are stack-allocated, it is vital that this is called before the synchronization object goes out of scope.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sync_struct</td><td>Synchronization object to clean up. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00147">147</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00556">AST_LIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00528">AST_LIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00614">AST_LIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../d2/d28/sem_8h.html#a89f01b37ab088385ad31c5d7f67b0ac0">ast_sem_destroy()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00103">bridge_sync::id</a>, <a class="el" href="../../d7/d54/structbridge__sync.html#a6e062a63f59ab22a226c6dd1f2c095e8">bridge_sync::list</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00105">bridge_sync::sem</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00966">bridge_channel_queue_action_data_sync()</a>.</p>
<div class="fragment"><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;{</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d54/structbridge__sync.html">bridge_sync</a> *iter;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../dd/dac/structsync__structs.html">sync_structs</a>);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../dd/dac/structsync__structs.html">sync_structs</a>, iter, <a class="code" href="../../d7/d54/structbridge__sync.html#a6e062a63f59ab22a226c6dd1f2c095e8">list</a>) {</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      <span class="keywordflow">if</span> (iter-&gt;<a class="code" href="../../d7/d54/structbridge__sync.html#ab7ce6f462afaf105224b0ca772a33c43">id</a> == sync_struct-&gt;<a class="code" href="../../d7/d54/structbridge__sync.html#ab7ce6f462afaf105224b0ca772a33c43">id</a>) {</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a>(<a class="code" href="../../d7/d54/structbridge__sync.html#a6e062a63f59ab22a226c6dd1f2c095e8">list</a>);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      }</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;   }</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../dd/dac/structsync__structs.html">sync_structs</a>);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;   <a class="code" href="../../d2/d28/sem_8h.html#a89f01b37ab088385ad31c5d7f67b0ac0">ast_sem_destroy</a>(&amp;sync_struct-&gt;<a class="code" href="../../d7/d54/structbridge__sync.html#a9684f7c550b6261d07efade48fcc3c8b">sem</a>);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;}</div><div class="ttc" id="structbridge__sync_html_a9684f7c550b6261d07efade48fcc3c8b"><div class="ttname"><a href="../../d7/d54/structbridge__sync.html#a9684f7c550b6261d07efade48fcc3c8b">bridge_sync::sem</a></div><div class="ttdeci">struct ast_sem sem</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00105">bridge_channel.c:105</a></div></div>
<div class="ttc" id="sem_8h_html_a89f01b37ab088385ad31c5d7f67b0ac0"><div class="ttname"><a href="../../d2/d28/sem_8h.html#a89f01b37ab088385ad31c5d7f67b0ac0">ast_sem_destroy</a></div><div class="ttdeci">int ast_sem_destroy(struct ast_sem *sem)</div><div class="ttdoc">Destroy a semaphore. </div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a712c04b4493919a7052399cd30ee8fb9"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_END</div><div class="ttdoc">Closes a safe loop traversal block. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00614">linkedlists.h:614</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa8ac496fa9c717d5afb99a02e1e2760c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_LIST_REMOVE_CURRENT(field)</div><div class="ttdoc">Removes the current entry from a list during a traversal. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00556">linkedlists.h:556</a></div></div>
<div class="ttc" id="structsync__structs_html"><div class="ttname"><a href="../../dd/dac/structsync__structs.html">sync_structs</a></div><div class="ttdoc">List holding active synchronous action objects. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00113">bridge_channel.c:113</a></div></div>
<div class="ttc" id="structbridge__sync_html_a6e062a63f59ab22a226c6dd1f2c095e8"><div class="ttname"><a href="../../d7/d54/structbridge__sync.html#a6e062a63f59ab22a226c6dd1f2c095e8">bridge_sync::list</a></div><div class="ttdeci">struct bridge_sync::@354 list</div></div>
<div class="ttc" id="structbridge__sync_html"><div class="ttname"><a href="../../d7/d54/structbridge__sync.html">bridge_sync</a></div><div class="ttdoc">Synchronous bridge action object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00101">bridge_channel.c:101</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa5be52067bf16bdc7e56ca19b5ba858d"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_BEGIN(head, var, field)</div><div class="ttdoc">Loops safely over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00528">linkedlists.h:528</a></div></div>
<div class="ttc" id="structbridge__sync_html_ab7ce6f462afaf105224b0ca772a33c43"><div class="ttname"><a href="../../d7/d54/structbridge__sync.html#ab7ce6f462afaf105224b0ca772a33c43">bridge_sync::id</a></div><div class="ttdeci">unsigned int id</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00103">bridge_channel.c:103</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0e67cf7c90d10cdd3be033be964ff43f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e67cf7c90d10cdd3be033be964ff43f">&#9670;&nbsp;</a></span>bridge_sync_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_sync_init </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d54/structbridge__sync.html">bridge_sync</a> *&#160;</td>
          <td class="paramname"><em>sync_struct</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>initialize a synchronous bridge object. </p>
<p>This both initializes the structure and adds it to the list of synchronization structures.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sync_struct</td><td>The synchronization object to initialize. </td></tr>
    <tr><td class="paramname">id</td><td>ID to assign to the synchronization object. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00124">124</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00740">AST_RWLIST_INSERT_TAIL</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../d2/d28/sem_8h.html#a1ab41f813806a164b518257c5b6b6e30">ast_sem_init()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00089">sync_payload::id</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00103">bridge_sync::id</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00105">bridge_sync::sem</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00966">bridge_channel_queue_action_data_sync()</a>.</p>
<div class="fragment"><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;{</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;   memset(sync_struct, 0, <span class="keyword">sizeof</span>(*sync_struct));</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;   sync_struct-&gt;<a class="code" href="../../d7/d54/structbridge__sync.html#ab7ce6f462afaf105224b0ca772a33c43">id</a> = <a class="code" href="../../da/dfb/app__queue_8c.html#acd1f0e9b4730ec60f62cb0806cb06ef1">id</a>;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;   <a class="code" href="../../d2/d28/sem_8h.html#a1ab41f813806a164b518257c5b6b6e30">ast_sem_init</a>(&amp;sync_struct-&gt;<a class="code" href="../../d7/d54/structbridge__sync.html#a9684f7c550b6261d07efade48fcc3c8b">sem</a>, 0, 0);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../dd/dac/structsync__structs.html">sync_structs</a>);</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../dd/dac/structsync__structs.html">sync_structs</a>, sync_struct, <a class="code" href="../../d7/d54/structbridge__sync.html#a6e062a63f59ab22a226c6dd1f2c095e8">list</a>);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../dd/dac/structsync__structs.html">sync_structs</a>);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;}</div><div class="ttc" id="structbridge__sync_html_a9684f7c550b6261d07efade48fcc3c8b"><div class="ttname"><a href="../../d7/d54/structbridge__sync.html#a9684f7c550b6261d07efade48fcc3c8b">bridge_sync::sem</a></div><div class="ttdeci">struct ast_sem sem</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00105">bridge_channel.c:105</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structsync__structs_html"><div class="ttname"><a href="../../dd/dac/structsync__structs.html">sync_structs</a></div><div class="ttdoc">List holding active synchronous action objects. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00113">bridge_channel.c:113</a></div></div>
<div class="ttc" id="structbridge__sync_html_a6e062a63f59ab22a226c6dd1f2c095e8"><div class="ttname"><a href="../../d7/d54/structbridge__sync.html#a6e062a63f59ab22a226c6dd1f2c095e8">bridge_sync::list</a></div><div class="ttdeci">struct bridge_sync::@354 list</div></div>
<div class="ttc" id="sem_8h_html_a1ab41f813806a164b518257c5b6b6e30"><div class="ttname"><a href="../../d2/d28/sem_8h.html#a1ab41f813806a164b518257c5b6b6e30">ast_sem_init</a></div><div class="ttdeci">int ast_sem_init(struct ast_sem *sem, int pshared, unsigned int value)</div><div class="ttdoc">Initialize a semaphore. </div></div>
<div class="ttc" id="linkedlists_8h_html_aadda916488b2d151af4426e2f06ad332"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_TAIL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00740">linkedlists.h:740</a></div></div>
<div class="ttc" id="app__queue_8c_html_acd1f0e9b4730ec60f62cb0806cb06ef1"><div class="ttname"><a href="../../da/dfb/app__queue_8c.html#acd1f0e9b4730ec60f62cb0806cb06ef1">id</a></div><div class="ttdeci">enum queue_result id</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/app__queue_8c_source.html#l01507">app_queue.c:1507</a></div></div>
<div class="ttc" id="structbridge__sync_html_ab7ce6f462afaf105224b0ca772a33c43"><div class="ttname"><a href="../../d7/d54/structbridge__sync.html#ab7ce6f462afaf105224b0ca772a33c43">bridge_sync::id</a></div><div class="ttdeci">unsigned int id</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00103">bridge_channel.c:103</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae68c46393ea342c81f3ecfdd2200346f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae68c46393ea342c81f3ecfdd2200346f">&#9670;&nbsp;</a></span>bridge_sync_signal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_sync_signal </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d54/structbridge__sync.html">bridge_sync</a> *&#160;</td>
          <td class="paramname"><em>sync_struct</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Signal that waiting for a synchronous bridge action is no longer necessary. </p>
<p>This may occur for several reasons </p><ul>
<li>The synchronous bridge action has completed. </li>
<li>The bridge channel has been removed from the bridge. </li>
<li>The synchronous bridge action could not be queued.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sync_struct</td><td>Synchronization object corresponding to the bridge action. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00206">206</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d28/sem_8h.html#af79fddfd5155ad5597f47d690b3d5219">ast_sem_post()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00105">bridge_sync::sem</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01023">bridge_frame_free()</a>.</p>
<div class="fragment"><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;{</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;   <a class="code" href="../../d2/d28/sem_8h.html#af79fddfd5155ad5597f47d690b3d5219">ast_sem_post</a>(&amp;sync_struct-&gt;<a class="code" href="../../d7/d54/structbridge__sync.html#a9684f7c550b6261d07efade48fcc3c8b">sem</a>);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;}</div><div class="ttc" id="structbridge__sync_html_a9684f7c550b6261d07efade48fcc3c8b"><div class="ttname"><a href="../../d7/d54/structbridge__sync.html#a9684f7c550b6261d07efade48fcc3c8b">bridge_sync::sem</a></div><div class="ttdeci">struct ast_sem sem</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00105">bridge_channel.c:105</a></div></div>
<div class="ttc" id="sem_8h_html_af79fddfd5155ad5597f47d690b3d5219"><div class="ttname"><a href="../../d2/d28/sem_8h.html#af79fddfd5155ad5597f47d690b3d5219">ast_sem_post</a></div><div class="ttdeci">int ast_sem_post(struct ast_sem *sem)</div><div class="ttdoc">Increments the semaphore, unblocking a waiter if necessary. </div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aacf3b50ab7c5304d648700ea114a01ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacf3b50ab7c5304d648700ea114a01ef">&#9670;&nbsp;</a></span>bridge_sync_wait()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_sync_wait </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d7/d54/structbridge__sync.html">bridge_sync</a> *&#160;</td>
          <td class="paramname"><em>sync_struct</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wait for a synchronous bridge action to complete. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sync_struct</td><td>Synchronization object corresponding to the bridge action. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00185">185</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/df7/time_8h_source.html#l00238">ast_samp2tv()</a>, <a class="el" href="../../d2/d28/sem_8h.html#acb4a5c08a18e57d819f5b7bd7d997d07">ast_sem_timedwait()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02283">ast_tvadd()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00178">PLAYBACK_TIMEOUT</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00105">bridge_sync::sem</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00966">bridge_channel_queue_action_data_sync()</a>.</p>
<div class="fragment"><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;{</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;   <span class="keyword">struct </span>timeval timeout_val = <a class="code" href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), <a class="code" href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a>(<a class="code" href="../../d3/d32/bridge__channel_8c.html#ad169cc192a23699be3580db10acc8c21">PLAYBACK_TIMEOUT</a>, 1000));</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;   <span class="keyword">struct </span>timespec timeout_spec = {</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;      .tv_sec = timeout_val.tv_sec,</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      .tv_nsec = timeout_val.tv_usec * 1000,</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;   };</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;   <a class="code" href="../../d2/d28/sem_8h.html#acb4a5c08a18e57d819f5b7bd7d997d07">ast_sem_timedwait</a>(&amp;sync_struct-&gt;<a class="code" href="../../d7/d54/structbridge__sync.html#a9684f7c550b6261d07efade48fcc3c8b">sem</a>, &amp;timeout_spec);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_ad169cc192a23699be3580db10acc8c21"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ad169cc192a23699be3580db10acc8c21">PLAYBACK_TIMEOUT</a></div><div class="ttdeci">#define PLAYBACK_TIMEOUT</div><div class="ttdoc">Failsafe for synchronous bridge action waiting. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00178">bridge_channel.c:178</a></div></div>
<div class="ttc" id="structbridge__sync_html_a9684f7c550b6261d07efade48fcc3c8b"><div class="ttname"><a href="../../d7/d54/structbridge__sync.html#a9684f7c550b6261d07efade48fcc3c8b">bridge_sync::sem</a></div><div class="ttdeci">struct ast_sem sem</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00105">bridge_channel.c:105</a></div></div>
<div class="ttc" id="sem_8h_html_acb4a5c08a18e57d819f5b7bd7d997d07"><div class="ttname"><a href="../../d2/d28/sem_8h.html#acb4a5c08a18e57d819f5b7bd7d997d07">ast_sem_timedwait</a></div><div class="ttdeci">int ast_sem_timedwait(struct ast_sem *sem, const struct timespec *abs_timeout)</div><div class="ttdoc">Decrements the semaphore, waiting until abs_timeout. </div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="time_8h_html_a1d774df72e3dbb623475783e06ce4f61"><div class="ttname"><a href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a></div><div class="ttdeci">struct timeval ast_samp2tv(unsigned int _nsamp, unsigned int _rate)</div><div class="ttdoc">Returns a timeval corresponding to the duration of n samples at rate r. Useful to convert samples to ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00238">time.h:238</a></div></div>
<div class="ttc" id="time_8h_html_a97e1bb8fbd7a103212789e87e7ed6073"><div class="ttname"><a href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a></div><div class="ttdeci">struct timeval ast_tvadd(struct timeval a, struct timeval b)</div><div class="ttdoc">Returns the sum of two timevals a + b. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02283">extconf.c:2283</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a464e8ebf46116ef98bb70331d63344e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a464e8ebf46116ef98bb70331d63344e5">&#9670;&nbsp;</a></span>channel_fill_empty_accountcode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void channel_fill_empty_accountcode </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00443">443</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h.html#a1d6833a829f7402bbf9cf0383ae3ca00">ast_channel_accountcode()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a806bfcbe038d762c950ad76f0269ebd4">ast_channel_peeraccount()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, and <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00466">channel_set_empty_accountcodes()</a>.</p>
<div class="fragment"><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;{</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1d6833a829f7402bbf9cf0383ae3ca00">ast_channel_accountcode</a>(dest))</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a806bfcbe038d762c950ad76f0269ebd4">ast_channel_peeraccount</a>(src))) {</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Setting channel %s accountcode with channel %s peeraccount &#39;%s&#39;.\n&quot;</span>,</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(dest),</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(src), <a class="code" href="../../d5/d7b/channel_8h.html#a806bfcbe038d762c950ad76f0269ebd4">ast_channel_peeraccount</a>(src));</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      ast_channel_accountcode_set(dest, <a class="code" href="../../d5/d7b/channel_8h.html#a806bfcbe038d762c950ad76f0269ebd4">ast_channel_peeraccount</a>(src));</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;   }</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;}</div><div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="channel_8h_html_a1d6833a829f7402bbf9cf0383ae3ca00"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1d6833a829f7402bbf9cf0383ae3ca00">ast_channel_accountcode</a></div><div class="ttdeci">const char * ast_channel_accountcode(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channel_8h_html_a806bfcbe038d762c950ad76f0269ebd4"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a806bfcbe038d762c950ad76f0269ebd4">ast_channel_peeraccount</a></div><div class="ttdeci">const char * ast_channel_peeraccount(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3b453fe3337241a21005151aa3f0d0eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b453fe3337241a21005151aa3f0d0eb">&#9670;&nbsp;</a></span>channel_fill_empty_peeraccount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void channel_fill_empty_peeraccount </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00420">420</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h.html#a1d6833a829f7402bbf9cf0383ae3ca00">ast_channel_accountcode()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a806bfcbe038d762c950ad76f0269ebd4">ast_channel_peeraccount()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, and <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00466">channel_set_empty_accountcodes()</a>.</p>
<div class="fragment"><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;{</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a806bfcbe038d762c950ad76f0269ebd4">ast_channel_peeraccount</a>(dest))</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1d6833a829f7402bbf9cf0383ae3ca00">ast_channel_accountcode</a>(src))) {</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Setting channel %s peeraccount with channel %s accountcode &#39;%s&#39;.\n&quot;</span>,</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(dest),</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(src), <a class="code" href="../../d5/d7b/channel_8h.html#a1d6833a829f7402bbf9cf0383ae3ca00">ast_channel_accountcode</a>(src));</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      ast_channel_peeraccount_set(dest, <a class="code" href="../../d5/d7b/channel_8h.html#a1d6833a829f7402bbf9cf0383ae3ca00">ast_channel_accountcode</a>(src));</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;   }</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;}</div><div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="channel_8h_html_a1d6833a829f7402bbf9cf0383ae3ca00"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1d6833a829f7402bbf9cf0383ae3ca00">ast_channel_accountcode</a></div><div class="ttdeci">const char * ast_channel_accountcode(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channel_8h_html_a806bfcbe038d762c950ad76f0269ebd4"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a806bfcbe038d762c950ad76f0269ebd4">ast_channel_peeraccount</a></div><div class="ttdeci">const char * ast_channel_peeraccount(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a346c98a88d53425181a425b3834b05f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a346c98a88d53425181a425b3834b05f5">&#9670;&nbsp;</a></span>channel_set_cause()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int channel_set_cause </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cause</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00278">278</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/da3/causes_8h_source.html#l00105">AST_CAUSE_NORMAL_CLEARING</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00427">ast_channel_hangupcause()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00431">ast_channel_hangupcause_set()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, and <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00605">ast_bridge_channel_kick()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00292">ast_bridge_channel_leave_bridge_nolock()</a>.</p>
<div class="fragment"><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;{</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;   <span class="keywordflow">if</span> (cause &lt;= 0) {</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      cause = <a class="code" href="../../d5/d7b/channel_8h.html#aa04afa262d7e1b211ee32d17c949a275">ast_channel_hangupcause</a>(chan);</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      <span class="keywordflow">if</span> (cause &lt;= 0) {</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;         cause = <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      }</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;   }</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ae6b4b7ba458e88fdbb2df9f39d935337">ast_channel_hangupcause_set</a>(chan, cause);</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;   <span class="keywordflow">return</span> cause;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="channel_8h_html_ae6b4b7ba458e88fdbb2df9f39d935337"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae6b4b7ba458e88fdbb2df9f39d935337">ast_channel_hangupcause_set</a></div><div class="ttdeci">void ast_channel_hangupcause_set(struct ast_channel *chan, int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00431">channel_internal_api.c:431</a></div></div>
<div class="ttc" id="causes_8h_html_af2235eb1c27925e4020ce286255d165f"><div class="ttname"><a href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a></div><div class="ttdeci">#define AST_CAUSE_NORMAL_CLEARING</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00105">causes.h:105</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="channel_8h_html_aa04afa262d7e1b211ee32d17c949a275"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa04afa262d7e1b211ee32d17c949a275">ast_channel_hangupcause</a></div><div class="ttdeci">int ast_channel_hangupcause(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00427">channel_internal_api.c:427</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a672c65d7c1035cfbbcfc3decb15826b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a672c65d7c1035cfbbcfc3decb15826b4">&#9670;&nbsp;</a></span>channel_set_empty_accountcodes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void channel_set_empty_accountcodes </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>c0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>c1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00466">466</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00443">channel_fill_empty_accountcode()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00420">channel_fill_empty_peeraccount()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00529">bridge_channel_update_accountcodes_joining()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00576">bridge_channel_update_accountcodes_leaving()</a>.</p>
<div class="fragment"><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;{</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;   <span class="comment">/* Set empty peeraccount from the other channel&#39;s accountcode. */</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#a3b453fe3337241a21005151aa3f0d0eb">channel_fill_empty_peeraccount</a>(c0, c1);</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#a3b453fe3337241a21005151aa3f0d0eb">channel_fill_empty_peeraccount</a>(c1, c0);</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;   <span class="comment">/* Set empty accountcode from the other channel&#39;s peeraccount. */</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#a464e8ebf46116ef98bb70331d63344e5">channel_fill_empty_accountcode</a>(c0, c1);</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#a464e8ebf46116ef98bb70331d63344e5">channel_fill_empty_accountcode</a>(c1, c0);</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_a464e8ebf46116ef98bb70331d63344e5"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a464e8ebf46116ef98bb70331d63344e5">channel_fill_empty_accountcode</a></div><div class="ttdeci">static void channel_fill_empty_accountcode(struct ast_channel *dest, struct ast_channel *src)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00443">bridge_channel.c:443</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a3b453fe3337241a21005151aa3f0d0eb"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a3b453fe3337241a21005151aa3f0d0eb">channel_fill_empty_peeraccount</a></div><div class="ttdeci">static void channel_fill_empty_peeraccount(struct ast_channel *dest, struct ast_channel *src)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00420">bridge_channel.c:420</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a422ba432e8a3669e94ab1e3565121124"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a422ba432e8a3669e94ab1e3565121124">&#9670;&nbsp;</a></span>channel_update_peeraccount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void channel_update_peeraccount </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00489">489</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h.html#a1d6833a829f7402bbf9cf0383ae3ca00">ast_channel_accountcode()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a806bfcbe038d762c950ad76f0269ebd4">ast_channel_peeraccount()</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00511">channel_update_peeraccounts()</a>.</p>
<div class="fragment"><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;{</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   <span class="keywordflow">if</span> (strcmp(<a class="code" href="../../d5/d7b/channel_8h.html#a1d6833a829f7402bbf9cf0383ae3ca00">ast_channel_accountcode</a>(src), <a class="code" href="../../d5/d7b/channel_8h.html#a806bfcbe038d762c950ad76f0269ebd4">ast_channel_peeraccount</a>(dest))) {</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Changing channel %s peeraccount &#39;%s&#39; to match channel %s accountcode &#39;%s&#39;.\n&quot;</span>,</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(dest), <a class="code" href="../../d5/d7b/channel_8h.html#a806bfcbe038d762c950ad76f0269ebd4">ast_channel_peeraccount</a>(dest),</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(src), <a class="code" href="../../d5/d7b/channel_8h.html#a1d6833a829f7402bbf9cf0383ae3ca00">ast_channel_accountcode</a>(src));</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      ast_channel_peeraccount_set(dest, <a class="code" href="../../d5/d7b/channel_8h.html#a1d6833a829f7402bbf9cf0383ae3ca00">ast_channel_accountcode</a>(src));</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;   }</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;}</div><div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="channel_8h_html_a1d6833a829f7402bbf9cf0383ae3ca00"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1d6833a829f7402bbf9cf0383ae3ca00">ast_channel_accountcode</a></div><div class="ttdeci">const char * ast_channel_accountcode(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channel_8h_html_a806bfcbe038d762c950ad76f0269ebd4"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a806bfcbe038d762c950ad76f0269ebd4">ast_channel_peeraccount</a></div><div class="ttdeci">const char * ast_channel_peeraccount(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afcfb8e7f0a6937ff8a02e1d515832fe7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcfb8e7f0a6937ff8a02e1d515832fe7">&#9670;&nbsp;</a></span>channel_update_peeraccounts()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void channel_update_peeraccounts </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>c0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>c1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00511">511</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00489">channel_update_peeraccount()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00529">bridge_channel_update_accountcodes_joining()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00576">bridge_channel_update_accountcodes_leaving()</a>.</p>
<div class="fragment"><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;{</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#a422ba432e8a3669e94ab1e3565121124">channel_update_peeraccount</a>(c0, c1);</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#a422ba432e8a3669e94ab1e3565121124">channel_update_peeraccount</a>(c1, c0);</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_a422ba432e8a3669e94ab1e3565121124"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a422ba432e8a3669e94ab1e3565121124">channel_update_peeraccount</a></div><div class="ttdeci">static void channel_update_peeraccount(struct ast_channel *dest, struct ast_channel *src)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00489">bridge_channel.c:489</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad00550db31054aa051277a5d7dffd196"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad00550db31054aa051277a5d7dffd196">&#9670;&nbsp;</a></span>payload_helper_app()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int payload_helper_app </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d32/bridge__channel_8c.html#ae9c87a1da9bdb14cafb135c0b2f3d9e2">ast_bridge_channel_post_action_data</a>&#160;</td>
          <td class="paramname"><em>post_it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>app_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>app_args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>moh_class</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01285">1285</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01259">bridge_run_app::app_args_offset</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01261">bridge_run_app::app_name</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00051">BRIDGE_CHANNEL_ACTION_RUN_APP</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01257">bridge_run_app::moh_offset</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01315">ast_bridge_channel_queue_app()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01309">ast_bridge_channel_write_app()</a>.</p>
<div class="fragment"><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;{</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/dd4/structbridge__run__app.html">bridge_run_app</a> *<a class="code" href="../../da/d37/structapp__data.html">app_data</a>;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;   <span class="keywordtype">size_t</span> len_name = strlen(<a class="code" href="../../dd/d16/pbx__app_8c.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a>) + 1;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;   <span class="keywordtype">size_t</span> len_args = <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(app_args) ? 0 : strlen(app_args) + 1;</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;   <span class="keywordtype">size_t</span> len_moh = !moh_class ? 0 : strlen(moh_class) + 1;</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;   <span class="keywordtype">size_t</span> len_data = <span class="keyword">sizeof</span>(*app_data) + len_name + len_args + len_moh;</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;   <span class="comment">/* Fill in application run frame data. */</span></div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;   app_data = alloca(len_data);</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;   app_data-&gt;<a class="code" href="../../da/dd4/structbridge__run__app.html#aaf2e732519876c8e04123d2f323ac9bd">app_args_offset</a> = len_args ? len_name : 0;</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;   app_data-&gt;<a class="code" href="../../da/dd4/structbridge__run__app.html#a9f4835eab8f88d55b1b001792136937c">moh_offset</a> = len_moh ? len_name + len_args : 0;</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;   strcpy(app_data-&gt;<a class="code" href="../../da/dd4/structbridge__run__app.html#ad979c2b27e68fccd6f5920a16213e8b2">app_name</a>, <a class="code" href="../../dd/d16/pbx__app_8c.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a>);<span class="comment">/* Safe */</span></div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;   <span class="keywordflow">if</span> (len_args) {</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;      strcpy(&amp;app_data-&gt;<a class="code" href="../../da/dd4/structbridge__run__app.html#ad979c2b27e68fccd6f5920a16213e8b2">app_name</a>[app_data-&gt;<a class="code" href="../../da/dd4/structbridge__run__app.html#aaf2e732519876c8e04123d2f323ac9bd">app_args_offset</a>], app_args);<span class="comment">/* Safe */</span></div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;   }</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;   <span class="keywordflow">if</span> (moh_class) {</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;      strcpy(&amp;app_data-&gt;<a class="code" href="../../da/dd4/structbridge__run__app.html#ad979c2b27e68fccd6f5920a16213e8b2">app_name</a>[app_data-&gt;<a class="code" href="../../da/dd4/structbridge__run__app.html#a9f4835eab8f88d55b1b001792136937c">moh_offset</a>], moh_class);<span class="comment">/* Safe */</span></div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;   }</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;   <span class="keywordflow">return</span> post_it(bridge_channel, <a class="code" href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aaa55d63c2abe2a5617a545dbc69422750">BRIDGE_CHANNEL_ACTION_RUN_APP</a>, app_data, len_data);</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;}</div><div class="ttc" id="structbridge__run__app_html"><div class="ttname"><a href="../../da/dd4/structbridge__run__app.html">bridge_run_app</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01255">bridge_channel.c:1255</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structbridge__run__app_html_ad979c2b27e68fccd6f5920a16213e8b2"><div class="ttname"><a href="../../da/dd4/structbridge__run__app.html#ad979c2b27e68fccd6f5920a16213e8b2">bridge_run_app::app_name</a></div><div class="ttdeci">char app_name[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01261">bridge_channel.c:1261</a></div></div>
<div class="ttc" id="structbridge__run__app_html_aaf2e732519876c8e04123d2f323ac9bd"><div class="ttname"><a href="../../da/dd4/structbridge__run__app.html#aaf2e732519876c8e04123d2f323ac9bd">bridge_run_app::app_args_offset</a></div><div class="ttdeci">int app_args_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01259">bridge_channel.c:1259</a></div></div>
<div class="ttc" id="structapp__data_html"><div class="ttname"><a href="../../da/d37/structapp__data.html">app_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d77/test__res__stasis_8c_source.html#l00062">test_res_stasis.c:62</a></div></div>
<div class="ttc" id="pbx__app_8c_html_a6d3c140ecf1f736c6750d5a17e5bf958"><div class="ttname"><a href="../../dd/d16/pbx__app_8c.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a></div><div class="ttdeci">const char * app_name(struct ast_app *app)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00463">pbx_app.c:463</a></div></div>
<div class="ttc" id="structbridge__run__app_html_a9f4835eab8f88d55b1b001792136937c"><div class="ttname"><a href="../../da/dd4/structbridge__run__app.html#a9f4835eab8f88d55b1b001792136937c">bridge_run_app::moh_offset</a></div><div class="ttdeci">int moh_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01257">bridge_channel.c:1257</a></div></div>
<div class="ttc" id="bridge__channel__internal_8h_html_adadb2f6b306233caecdabcf1a7440b0aaa55d63c2abe2a5617a545dbc69422750"><div class="ttname"><a href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aaa55d63c2abe2a5617a545dbc69422750">BRIDGE_CHANNEL_ACTION_RUN_APP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00051">bridge_channel_internal.h:51</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afee5c64c70dc8139d5b8eed7a33e1c85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afee5c64c70dc8139d5b8eed7a33e1c85">&#9670;&nbsp;</a></span>payload_helper_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int payload_helper_cb </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d32/bridge__channel_8c.html#ae9c87a1da9bdb14cafb135c0b2f3d9e2">ast_bridge_channel_post_action_data</a>&#160;</td>
          <td class="paramname"><em>post_it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../de/d41/bridge__channel_8h.html#a411218cf4d743baa73c2def8f024cb23">ast_bridge_channel_custom_callback_option</a>&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d41/bridge__channel_8h.html#a7c65814e807e654cd23c9d952e23b69a">ast_bridge_custom_callback_fn</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>payload_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01457">1457</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00053">BRIDGE_CHANNEL_ACTION_CALLBACK</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01419">bridge_custom_callback::callback</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01423">bridge_custom_callback::flags</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01427">bridge_custom_callback::payload</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01425">bridge_custom_callback::payload_exists</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01421">bridge_custom_callback::payload_size</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01492">ast_bridge_channel_queue_callback()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01484">ast_bridge_channel_write_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;{</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/dfe/structbridge__custom__callback.html">bridge_custom_callback</a> *cb_data;</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;   <span class="keywordtype">size_t</span> len_data = <span class="keyword">sizeof</span>(*cb_data) + (<a class="code" href="../../d1/dfe/structbridge__custom__callback.html#af9bec6d32466456a98e2a4b1bd540149">payload</a> ? <a class="code" href="../../d1/dfe/structbridge__custom__callback.html#a21fb327bb05e95f14a13ff193882f32b">payload_size</a> : 0);</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;   <span class="comment">/* Sanity check. */</span></div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d1/dfe/structbridge__custom__callback.html#a69e369f6ff5181d279528e67b49cfb8f">callback</a>) {</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;   }</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;   <span class="comment">/* Fill in custom callback frame data. */</span></div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;   cb_data = alloca(len_data);</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;   cb_data-&gt;<a class="code" href="../../d1/dfe/structbridge__custom__callback.html#a69e369f6ff5181d279528e67b49cfb8f">callback</a> = <a class="code" href="../../d1/dfe/structbridge__custom__callback.html#a69e369f6ff5181d279528e67b49cfb8f">callback</a>;</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;   cb_data-&gt;<a class="code" href="../../d1/dfe/structbridge__custom__callback.html#a21fb327bb05e95f14a13ff193882f32b">payload_size</a> = <a class="code" href="../../d1/dfe/structbridge__custom__callback.html#a21fb327bb05e95f14a13ff193882f32b">payload_size</a>;</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;   cb_data-&gt;<a class="code" href="../../d1/dfe/structbridge__custom__callback.html#ac92588540e8c1d014a08cd8a45462b19">flags</a> = <a class="code" href="../../d1/dfe/structbridge__custom__callback.html#ac92588540e8c1d014a08cd8a45462b19">flags</a>;</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;   cb_data-&gt;<a class="code" href="../../d1/dfe/structbridge__custom__callback.html#aff5cb9dce299ac01ef387ab10a54950d">payload_exists</a> = <a class="code" href="../../d1/dfe/structbridge__custom__callback.html#af9bec6d32466456a98e2a4b1bd540149">payload</a> &amp;&amp; <a class="code" href="../../d1/dfe/structbridge__custom__callback.html#a21fb327bb05e95f14a13ff193882f32b">payload_size</a>;</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;   <span class="keywordflow">if</span> (cb_data-&gt;<a class="code" href="../../d1/dfe/structbridge__custom__callback.html#aff5cb9dce299ac01ef387ab10a54950d">payload_exists</a>) {</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;      memcpy(cb_data-&gt;<a class="code" href="../../d1/dfe/structbridge__custom__callback.html#af9bec6d32466456a98e2a4b1bd540149">payload</a>, <a class="code" href="../../d1/dfe/structbridge__custom__callback.html#af9bec6d32466456a98e2a4b1bd540149">payload</a>, payload_size);<span class="comment">/* Safe */</span></div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;   }</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;   <span class="keywordflow">return</span> post_it(bridge_channel, <a class="code" href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa9fa1d64401522ff00e31e3821aa89cd9">BRIDGE_CHANNEL_ACTION_CALLBACK</a>, cb_data, len_data);</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;}</div><div class="ttc" id="structbridge__custom__callback_html_ac92588540e8c1d014a08cd8a45462b19"><div class="ttname"><a href="../../d1/dfe/structbridge__custom__callback.html#ac92588540e8c1d014a08cd8a45462b19">bridge_custom_callback::flags</a></div><div class="ttdeci">unsigned int flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01423">bridge_channel.c:1423</a></div></div>
<div class="ttc" id="bridge__channel__internal_8h_html_adadb2f6b306233caecdabcf1a7440b0aa9fa1d64401522ff00e31e3821aa89cd9"><div class="ttname"><a href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa9fa1d64401522ff00e31e3821aa89cd9">BRIDGE_CHANNEL_ACTION_CALLBACK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00053">bridge_channel_internal.h:53</a></div></div>
<div class="ttc" id="structbridge__custom__callback_html_a21fb327bb05e95f14a13ff193882f32b"><div class="ttname"><a href="../../d1/dfe/structbridge__custom__callback.html#a21fb327bb05e95f14a13ff193882f32b">bridge_custom_callback::payload_size</a></div><div class="ttdeci">size_t payload_size</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01421">bridge_channel.c:1421</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structbridge__custom__callback_html_a69e369f6ff5181d279528e67b49cfb8f"><div class="ttname"><a href="../../d1/dfe/structbridge__custom__callback.html#a69e369f6ff5181d279528e67b49cfb8f">bridge_custom_callback::callback</a></div><div class="ttdeci">ast_bridge_custom_callback_fn callback</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01419">bridge_channel.c:1419</a></div></div>
<div class="ttc" id="structbridge__custom__callback_html"><div class="ttname"><a href="../../d1/dfe/structbridge__custom__callback.html">bridge_custom_callback</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01417">bridge_channel.c:1417</a></div></div>
<div class="ttc" id="structbridge__custom__callback_html_af9bec6d32466456a98e2a4b1bd540149"><div class="ttname"><a href="../../d1/dfe/structbridge__custom__callback.html#af9bec6d32466456a98e2a4b1bd540149">bridge_custom_callback::payload</a></div><div class="ttdeci">char payload[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01427">bridge_channel.c:1427</a></div></div>
<div class="ttc" id="structbridge__custom__callback_html_aff5cb9dce299ac01ef387ab10a54950d"><div class="ttname"><a href="../../d1/dfe/structbridge__custom__callback.html#aff5cb9dce299ac01ef387ab10a54950d">bridge_custom_callback::payload_exists</a></div><div class="ttdeci">char payload_exists</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01425">bridge_channel.c:1425</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aededbd6efeb3d8f8fe8e531c674e5eac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aededbd6efeb3d8f8fe8e531c674e5eac">&#9670;&nbsp;</a></span>payload_helper_park()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int payload_helper_park </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d32/bridge__channel_8c.html#ae9c87a1da9bdb14cafb135c0b2f3d9e2">ast_bridge_channel_post_action_data</a>&#160;</td>
          <td class="paramname"><em>post_it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>parkee_uuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>parker_uuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>app_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01531">1531</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01502">bridge_park::app_data_offset</a>, <a class="el" href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00055">BRIDGE_CHANNEL_ACTION_PARK</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01504">bridge_park::parkee_uuid</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01501">bridge_park::parker_uuid_offset</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01555">ast_bridge_channel_write_park()</a>.</p>
<div class="fragment"><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;{</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d7e/structbridge__park.html">bridge_park</a> *payload;</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;   <span class="keywordtype">size_t</span> len_parkee_uuid = strlen(<a class="code" href="../../d8/d7e/structbridge__park.html#a372803e549879c8924f2089bda0f82ab">parkee_uuid</a>) + 1;</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;   <span class="keywordtype">size_t</span> len_parker_uuid = strlen(parker_uuid) + 1;</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;   <span class="keywordtype">size_t</span> len_app_data = !<a class="code" href="../../da/d37/structapp__data.html">app_data</a> ? 0 : strlen(<a class="code" href="../../da/d37/structapp__data.html">app_data</a>) + 1;</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;   <span class="keywordtype">size_t</span> len_payload = <span class="keyword">sizeof</span>(*payload) + len_parker_uuid + len_parkee_uuid + len_app_data;</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;   payload = alloca(len_payload);</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;   payload-&gt;<a class="code" href="../../d8/d7e/structbridge__park.html#a04736eda8628ea83ab919650917fe13a">app_data_offset</a> = len_app_data ? len_parkee_uuid + len_parker_uuid : 0;</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;   payload-&gt;<a class="code" href="../../d8/d7e/structbridge__park.html#a6f6e36c64ca14c16eaae45c5eaa64205">parker_uuid_offset</a> = len_parkee_uuid;</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;   strcpy(payload-&gt;<a class="code" href="../../d8/d7e/structbridge__park.html#a372803e549879c8924f2089bda0f82ab">parkee_uuid</a>, <a class="code" href="../../d8/d7e/structbridge__park.html#a372803e549879c8924f2089bda0f82ab">parkee_uuid</a>);</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;   strcpy(&amp;payload-&gt;<a class="code" href="../../d8/d7e/structbridge__park.html#a372803e549879c8924f2089bda0f82ab">parkee_uuid</a>[payload-&gt;<a class="code" href="../../d8/d7e/structbridge__park.html#a6f6e36c64ca14c16eaae45c5eaa64205">parker_uuid_offset</a>], parker_uuid);</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../da/d37/structapp__data.html">app_data</a>) {</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;      strcpy(&amp;payload-&gt;<a class="code" href="../../d8/d7e/structbridge__park.html#a372803e549879c8924f2089bda0f82ab">parkee_uuid</a>[payload-&gt;<a class="code" href="../../d8/d7e/structbridge__park.html#a04736eda8628ea83ab919650917fe13a">app_data_offset</a>], <a class="code" href="../../da/d37/structapp__data.html">app_data</a>);</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;   }</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;   <span class="keywordflow">return</span> post_it(bridge_channel, <a class="code" href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aae6ec891ef5c2efea818b8976eb6e65b5">BRIDGE_CHANNEL_ACTION_PARK</a>, payload, len_payload);</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;}</div><div class="ttc" id="structbridge__park_html_a04736eda8628ea83ab919650917fe13a"><div class="ttname"><a href="../../d8/d7e/structbridge__park.html#a04736eda8628ea83ab919650917fe13a">bridge_park::app_data_offset</a></div><div class="ttdeci">int app_data_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01502">bridge_channel.c:1502</a></div></div>
<div class="ttc" id="structapp__data_html"><div class="ttname"><a href="../../da/d37/structapp__data.html">app_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d77/test__res__stasis_8c_source.html#l00062">test_res_stasis.c:62</a></div></div>
<div class="ttc" id="structbridge__park_html_a372803e549879c8924f2089bda0f82ab"><div class="ttname"><a href="../../d8/d7e/structbridge__park.html#a372803e549879c8924f2089bda0f82ab">bridge_park::parkee_uuid</a></div><div class="ttdeci">char parkee_uuid[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01504">bridge_channel.c:1504</a></div></div>
<div class="ttc" id="structbridge__park_html"><div class="ttname"><a href="../../d8/d7e/structbridge__park.html">bridge_park</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01500">bridge_channel.c:1500</a></div></div>
<div class="ttc" id="structbridge__park_html_a6f6e36c64ca14c16eaae45c5eaa64205"><div class="ttname"><a href="../../d8/d7e/structbridge__park.html#a6f6e36c64ca14c16eaae45c5eaa64205">bridge_park::parker_uuid_offset</a></div><div class="ttdeci">int parker_uuid_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01501">bridge_channel.c:1501</a></div></div>
<div class="ttc" id="bridge__channel__internal_8h_html_adadb2f6b306233caecdabcf1a7440b0aae6ec891ef5c2efea818b8976eb6e65b5"><div class="ttname"><a href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aae6ec891ef5c2efea818b8976eb6e65b5">BRIDGE_CHANNEL_ACTION_PARK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00055">bridge_channel_internal.h:55</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad1c82bb3775f693a3e2c8d4a092985b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1c82bb3775f693a3e2c8d4a092985b5">&#9670;&nbsp;</a></span>payload_helper_playfile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int payload_helper_playfile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d32/bridge__channel_8c.html#ae9c87a1da9bdb14cafb135c0b2f3d9e2">ast_bridge_channel_post_action_data</a>&#160;</td>
          <td class="paramname"><em>post_it</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d41/bridge__channel_8h.html#afb66d5073210f00fef9adc41e16a5f00">ast_bridge_custom_play_fn</a>&#160;</td>
          <td class="paramname"><em>custom_play</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>playfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>moh_class</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01378">1378</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00049">BRIDGE_CHANNEL_ACTION_PLAY_FILE</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01351">bridge_playfile::custom_play</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01353">bridge_playfile::moh_offset</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01355">bridge_playfile::playfile</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01404">ast_bridge_channel_queue_playfile()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01410">ast_bridge_channel_queue_playfile_sync()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01398">ast_bridge_channel_write_playfile()</a>.</p>
<div class="fragment"><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;{</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d29/structbridge__playfile.html">bridge_playfile</a> *payload;</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;   <span class="keywordtype">size_t</span> len_name = strlen(<a class="code" href="../../d5/d29/structbridge__playfile.html#a4ed64f64c692aae02acf40cf1af489e9">playfile</a>) + 1;</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;   <span class="keywordtype">size_t</span> len_moh = !moh_class ? 0 : strlen(moh_class) + 1;</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;   <span class="keywordtype">size_t</span> len_payload = <span class="keyword">sizeof</span>(*payload) + len_name + len_moh;</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;   <span class="comment">/* Fill in play file frame data. */</span></div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;   payload = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(len_payload);</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;   payload-&gt;<a class="code" href="../../d5/d29/structbridge__playfile.html#a6b8ff771aabcba038d5e409a4f71bb04">custom_play</a> = <a class="code" href="../../d5/d29/structbridge__playfile.html#a6b8ff771aabcba038d5e409a4f71bb04">custom_play</a>;</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;   payload-&gt;<a class="code" href="../../d5/d29/structbridge__playfile.html#a9f4835eab8f88d55b1b001792136937c">moh_offset</a> = len_moh ? len_name : 0;</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;   strcpy(payload-&gt;<a class="code" href="../../d5/d29/structbridge__playfile.html#a4ed64f64c692aae02acf40cf1af489e9">playfile</a>, <a class="code" href="../../d5/d29/structbridge__playfile.html#a4ed64f64c692aae02acf40cf1af489e9">playfile</a>);<span class="comment">/* Safe */</span></div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;   <span class="keywordflow">if</span> (moh_class) {</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;      strcpy(&amp;payload-&gt;<a class="code" href="../../d5/d29/structbridge__playfile.html#a4ed64f64c692aae02acf40cf1af489e9">playfile</a>[payload-&gt;<a class="code" href="../../d5/d29/structbridge__playfile.html#a9f4835eab8f88d55b1b001792136937c">moh_offset</a>], moh_class);<span class="comment">/* Safe */</span></div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;   }</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;   <span class="keywordflow">return</span> post_it(bridge_channel, <a class="code" href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa62a79f7f191980f8a20f23c0719c80c3">BRIDGE_CHANNEL_ACTION_PLAY_FILE</a>, payload, len_payload);</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;}</div><div class="ttc" id="structbridge__playfile_html_a6b8ff771aabcba038d5e409a4f71bb04"><div class="ttname"><a href="../../d5/d29/structbridge__playfile.html#a6b8ff771aabcba038d5e409a4f71bb04">bridge_playfile::custom_play</a></div><div class="ttdeci">ast_bridge_custom_play_fn custom_play</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01351">bridge_channel.c:1351</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="structbridge__playfile_html_a9f4835eab8f88d55b1b001792136937c"><div class="ttname"><a href="../../d5/d29/structbridge__playfile.html#a9f4835eab8f88d55b1b001792136937c">bridge_playfile::moh_offset</a></div><div class="ttdeci">int moh_offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01353">bridge_channel.c:1353</a></div></div>
<div class="ttc" id="structbridge__playfile_html"><div class="ttname"><a href="../../d5/d29/structbridge__playfile.html">bridge_playfile</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01349">bridge_channel.c:1349</a></div></div>
<div class="ttc" id="bridge__channel__internal_8h_html_adadb2f6b306233caecdabcf1a7440b0aa62a79f7f191980f8a20f23c0719c80c3"><div class="ttname"><a href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa62a79f7f191980f8a20f23c0719c80c3">BRIDGE_CHANNEL_ACTION_PLAY_FILE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00049">bridge_channel_internal.h:49</a></div></div>
<div class="ttc" id="structbridge__playfile_html_a4ed64f64c692aae02acf40cf1af489e9"><div class="ttname"><a href="../../d5/d29/structbridge__playfile.html#a4ed64f64c692aae02acf40cf1af489e9">bridge_playfile::playfile</a></div><div class="ttdeci">char playfile[0]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01355">bridge_channel.c:1355</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae10c9159324fffc5b0e5ea02e3cd6973"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae10c9159324fffc5b0e5ea02e3cd6973">&#9670;&nbsp;</a></span>run_app_helper()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int run_app_helper </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>app_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>app_args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01211">1211</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/db6/app__mysql_8c_source.html#l00062">app</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00273">ast_app_exec_macro()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00370">ast_app_exec_sub()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l00616">ast_str_substitute_variables()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dd/d16/pbx__app_8c_source.html#l00471">pbx_exec()</a>, and <a class="el" href="../../d2/db7/ael__main_8c_source.html#l00165">pbx_findapp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01241">ast_bridge_channel_run_app()</a>.</p>
<div class="fragment"><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;{</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(<span class="stringliteral">&quot;Gosub&quot;</span>, <a class="code" href="../../dd/d16/pbx__app_8c.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a>)) {</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aee5e20694b04eee43463fde6cf121d06">ast_app_exec_sub</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, chan, app_args, 0);</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<span class="stringliteral">&quot;Macro&quot;</span>, <a class="code" href="../../dd/d16/pbx__app_8c.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a>)) {</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aaf3af8d672383b48d194deb468074cbe">ast_app_exec_macro</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, chan, app_args);</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/da3/structast__app.html">ast_app</a> *<a class="code" href="../../d0/db6/app__mysql_8c.html#a1d9b1eccfc259a14525ce817482a3f88">app</a>;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;      app = <a class="code" href="../../db/de0/pbx_8h.html#ad4a6912dcd2ad44a186d0a284afafc51">pbx_findapp</a>(<a class="code" href="../../dd/d16/pbx__app_8c.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a>);</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;      <span class="keywordflow">if</span> (!app) {</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Could not find application (%s)\n&quot;</span>, <a class="code" href="../../dd/d16/pbx__app_8c.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a>);</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *substituted_args = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(16);</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;         <span class="keywordflow">if</span> (substituted_args) {</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;            <a class="code" href="../../db/de0/pbx_8h.html#a556749361c7b9109134c8d00ab4ef6bf">ast_str_substitute_variables</a>(&amp;substituted_args, 0, chan, app_args);</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;            res = <a class="code" href="../../db/de0/pbx_8h.html#a6e3dbc57c03c23543354ef108c31fac8">pbx_exec</a>(chan, app, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(substituted_args));</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;            <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(substituted_args);</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Could not substitute application argument variables for %s\n&quot;</span>, <a class="code" href="../../dd/d16/pbx__app_8c.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a>);</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;            res = <a class="code" href="../../db/de0/pbx_8h.html#a6e3dbc57c03c23543354ef108c31fac8">pbx_exec</a>(chan, app, app_args);</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;         }</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;      }</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;   }</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;}</div><div class="ttc" id="pbx_8h_html_a6e3dbc57c03c23543354ef108c31fac8"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e3dbc57c03c23543354ef108c31fac8">pbx_exec</a></div><div class="ttdeci">int pbx_exec(struct ast_channel *c, struct ast_app *app, const char *data)</div><div class="ttdoc">Execute an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00471">pbx_app.c:471</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="pbx_8h_html_a556749361c7b9109134c8d00ab4ef6bf"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a556749361c7b9109134c8d00ab4ef6bf">ast_str_substitute_variables</a></div><div class="ttdeci">void ast_str_substitute_variables(struct ast_str **buf, ssize_t maxlen, struct ast_channel *chan, const char *templ)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l00616">pbx_variables.c:616</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_aaf3af8d672383b48d194deb468074cbe"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#aaf3af8d672383b48d194deb468074cbe">ast_app_exec_macro</a></div><div class="ttdeci">int ast_app_exec_macro(struct ast_channel *autoservice_chan, struct ast_channel *macro_chan, const char *macro_args)</div><div class="ttdoc">Run a macro on a channel, placing an optional second channel into autoservice. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00273">main/app.c:273</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="pbx__app_8c_html_a6d3c140ecf1f736c6750d5a17e5bf958"><div class="ttname"><a href="../../dd/d16/pbx__app_8c.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a></div><div class="ttdeci">const char * app_name(struct ast_app *app)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00463">pbx_app.c:463</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__app_html"><div class="ttname"><a href="../../d0/da3/structast__app.html">ast_app</a></div><div class="ttdoc">ast_app: A registered application </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00045">pbx_app.c:45</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_aee5e20694b04eee43463fde6cf121d06"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#aee5e20694b04eee43463fde6cf121d06">ast_app_exec_sub</a></div><div class="ttdeci">int ast_app_exec_sub(struct ast_channel *autoservice_chan, struct ast_channel *sub_chan, const char *sub_args, int ignore_hangup)</div><div class="ttdoc">Run a subroutine on a channel, placing an optional second channel into autoservice. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00370">main/app.c:370</a></div></div>
<div class="ttc" id="pbx_8h_html_ad4a6912dcd2ad44a186d0a284afafc51"><div class="ttname"><a href="../../db/de0/pbx_8h.html#ad4a6912dcd2ad44a186d0a284afafc51">pbx_findapp</a></div><div class="ttdeci">struct ast_app * pbx_findapp(const char *app)</div><div class="ttdoc">Look up an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db7/ael__main_8c_source.html#l00165">ael_main.c:165</a></div></div>
<div class="ttc" id="app__mysql_8c_html_a1d9b1eccfc259a14525ce817482a3f88"><div class="ttname"><a href="../../d0/db6/app__mysql_8c.html#a1d9b1eccfc259a14525ce817482a3f88">app</a></div><div class="ttdeci">static const char app[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/db6/app__mysql_8c_source.html#l00062">app_mysql.c:62</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a329c31879d38dbc276d1a5e4f96356d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a329c31879d38dbc276d1a5e4f96356d5">&#9670;&nbsp;</a></span>sendtext_safe()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sendtext_safe </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02409">2409</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04854">ast_sendtext()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00258">ast_strndup</a>, <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">ast_frame::ptr</a>, and <a class="el" href="../../da/dfb/app__queue_8c_source.html#l01508">text</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02444">bridge_channel_handle_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;{</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;   <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>) {</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;      <span class="keywordtype">char</span> *<a class="code" href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a> = f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>;</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;      <span class="keywordflow">if</span> (text[f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> - 1]) {</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;         <span class="comment">/* Not zero terminated, we need to allocate */</span></div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;         text = <a class="code" href="../../d8/d8a/astmm_8h.html#aa1202a8277cd3013d22535bf5bfe85fc">ast_strndup</a>(text, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>);</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;         <span class="keywordflow">if</span> (!text) {</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;         }</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;      }</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a83631e0dc02a50802cf857caa3fdc1d7">ast_sendtext</a>(chan, text);</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;      <span class="keywordflow">if</span> (text != f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>) {</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;         <span class="comment">/* Only free if we allocated */</span></div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(text);</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;      }</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;      <span class="comment">/* Special case if the frame length is zero (although I</span></div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;<span class="comment">       * am not sure this is possible?) */</span></div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a83631e0dc02a50802cf857caa3fdc1d7">ast_sendtext</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;   }</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;}</div><div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="app__queue_8c_html_a5633b1433389cec21ade3811bbe9ca5b"><div class="ttname"><a href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a></div><div class="ttdeci">char * text</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dfb/app__queue_8c_source.html#l01508">app_queue.c:1508</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="astmm_8h_html_aa1202a8277cd3013d22535bf5bfe85fc"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#aa1202a8277cd3013d22535bf5bfe85fc">ast_strndup</a></div><div class="ttdeci">#define ast_strndup(str, len)</div><div class="ttdoc">A wrapper for strndup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00258">astmm.h:258</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="channel_8h_html_a83631e0dc02a50802cf857caa3fdc1d7"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a83631e0dc02a50802cf857caa3fdc1d7">ast_sendtext</a></div><div class="ttdeci">int ast_sendtext(struct ast_channel *chan, const char *text)</div><div class="ttdoc">Sends text to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04854">channel.c:4854</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4362f1ed2bb8f4ece359734785de3e24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4362f1ed2bb8f4ece359734785de3e24">&#9670;&nbsp;</a></span>testsuite_notify_feature_success()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void testsuite_notify_feature_success </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dtmf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01675">1675</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../de/d71/features__config_8c_source.html#l01213">ast_get_chan_featuremap_config()</a>, <a class="el" href="../../de/d71/features__config_8c_source.html#l01143">ast_get_chan_features_xfer_config()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00196">ast_test_suite_event_notify</a>, <a class="el" href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00179">ast_featuremap_config::atxfer</a>, <a class="el" href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00075">ast_features_xfer_config::atxferthreeway</a>, <a class="el" href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00179">ast_featuremap_config::automixmon</a>, <a class="el" href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00179">ast_featuremap_config::automon</a>, <a class="el" href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00179">ast_featuremap_config::blindxfer</a>, <a class="el" href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00179">ast_featuremap_config::disconnect</a>, and <a class="el" href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00179">ast_featuremap_config::parkcall</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01762">ast_bridge_channel_feature_digit()</a>.</p>
<div class="fragment"><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;{</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;<span class="preprocessor">#ifdef TEST_FRAMEWORK</span></div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;   <span class="keywordtype">char</span> *feature = <span class="stringliteral">&quot;unknown&quot;</span>;</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/de7/structast__featuremap__config.html">ast_featuremap_config</a> *featuremap;</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/db6/structast__features__xfer__config.html">ast_features_xfer_config</a> *xfer;</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;   featuremap = <a class="code" href="../../d0/daa/include_2asterisk_2features__config_8h.html#acf7f2d471cc2edd0e4fe9715b46293ad">ast_get_chan_featuremap_config</a>(chan);</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;   xfer = <a class="code" href="../../d0/daa/include_2asterisk_2features__config_8h.html#ab442de0580c9cee7ae5e10886e28ed8c">ast_get_chan_features_xfer_config</a>(chan);</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;   <span class="keywordflow">if</span> (featuremap) {</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;      <span class="keywordflow">if</span> (!strcmp(dtmf, featuremap-&gt;<a class="code" href="../../d7/de7/structast__featuremap__config.html#a6d2d57bede6e8adfaf33aece7bb870e2">blindxfer</a>)) {</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;         feature = <span class="stringliteral">&quot;blindxfer&quot;</span>;</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(dtmf, featuremap-&gt;<a class="code" href="../../d7/de7/structast__featuremap__config.html#ae8f5ebec9675cabe44edb792340e8a2d">atxfer</a>)) {</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;         feature = <span class="stringliteral">&quot;atxfer&quot;</span>;</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(dtmf, featuremap-&gt;<a class="code" href="../../d7/de7/structast__featuremap__config.html#add452ba7fa7cb170cc56fddf5db3f308">disconnect</a>)) {</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;         feature = <span class="stringliteral">&quot;disconnect&quot;</span>;</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(dtmf, featuremap-&gt;<a class="code" href="../../d7/de7/structast__featuremap__config.html#aeaa1c99a474db6de6f523c5884f2ace5">automon</a>)) {</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;         feature = <span class="stringliteral">&quot;automon&quot;</span>;</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(dtmf, featuremap-&gt;<a class="code" href="../../d7/de7/structast__featuremap__config.html#a15bde7c622f42020715606e9324990eb">automixmon</a>)) {</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;         feature = <span class="stringliteral">&quot;automixmon&quot;</span>;</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(dtmf, featuremap-&gt;<a class="code" href="../../d7/de7/structast__featuremap__config.html#abb0264654563c986158946fed0181ac7">parkcall</a>)) {</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;         feature = <span class="stringliteral">&quot;parkcall&quot;</span>;</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;      }</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;   }</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;   <span class="keywordflow">if</span> (xfer) {</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;      <span class="keywordflow">if</span> (!strcmp(dtmf, xfer-&gt;<a class="code" href="../../df/db6/structast__features__xfer__config.html#a23cc60bf04f168d94850123d5cb64e4b">atxferthreeway</a>)) {</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;         feature = <span class="stringliteral">&quot;atxferthreeway&quot;</span>;</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;      }</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;   }</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(featuremap);</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(xfer);</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a>(<span class="stringliteral">&quot;FEATURE_DETECTION&quot;</span>,</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;         <span class="stringliteral">&quot;Result: success\r\n&quot;</span></div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;         <span class="stringliteral">&quot;Feature: %s&quot;</span>, feature);</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* TEST_FRAMEWORK */</span><span class="preprocessor"></span></div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__features__xfer__config_html"><div class="ttname"><a href="../../df/db6/structast__features__xfer__config.html">ast_features_xfer_config</a></div><div class="ttdoc">Feature configuration relating to transfers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00057">include/asterisk/features_config.h:57</a></div></div>
<div class="ttc" id="structast__features__xfer__config_html_a23cc60bf04f168d94850123d5cb64e4b"><div class="ttname"><a href="../../df/db6/structast__features__xfer__config.html#a23cc60bf04f168d94850123d5cb64e4b">ast_features_xfer_config::atxferthreeway</a></div><div class="ttdeci">const ast_string_field atxferthreeway</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00075">include/asterisk/features_config.h:75</a></div></div>
<div class="ttc" id="structast__featuremap__config_html"><div class="ttname"><a href="../../d7/de7/structast__featuremap__config.html">ast_featuremap_config</a></div><div class="ttdoc">Configuration for the builtin features. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00165">include/asterisk/features_config.h:165</a></div></div>
<div class="ttc" id="include_2asterisk_2features__config_8h_html_ab442de0580c9cee7ae5e10886e28ed8c"><div class="ttname"><a href="../../d0/daa/include_2asterisk_2features__config_8h.html#ab442de0580c9cee7ae5e10886e28ed8c">ast_get_chan_features_xfer_config</a></div><div class="ttdeci">struct ast_features_xfer_config * ast_get_chan_features_xfer_config(struct ast_channel *chan)</div><div class="ttdoc">Get the transfer configuration options for a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d71/features__config_8c_source.html#l01143">features_config.c:1143</a></div></div>
<div class="ttc" id="structast__featuremap__config_html_ae8f5ebec9675cabe44edb792340e8a2d"><div class="ttname"><a href="../../d7/de7/structast__featuremap__config.html#ae8f5ebec9675cabe44edb792340e8a2d">ast_featuremap_config::atxfer</a></div><div class="ttdeci">const ast_string_field atxfer</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00179">include/asterisk/features_config.h:179</a></div></div>
<div class="ttc" id="test_8h_html_a9482d93ea3931853331bdbc745ce7cb4"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a></div><div class="ttdeci">#define ast_test_suite_event_notify(s, f,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00196">test.h:196</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="structast__featuremap__config_html_aeaa1c99a474db6de6f523c5884f2ace5"><div class="ttname"><a href="../../d7/de7/structast__featuremap__config.html#aeaa1c99a474db6de6f523c5884f2ace5">ast_featuremap_config::automon</a></div><div class="ttdeci">const ast_string_field automon</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00179">include/asterisk/features_config.h:179</a></div></div>
<div class="ttc" id="structast__featuremap__config_html_a6d2d57bede6e8adfaf33aece7bb870e2"><div class="ttname"><a href="../../d7/de7/structast__featuremap__config.html#a6d2d57bede6e8adfaf33aece7bb870e2">ast_featuremap_config::blindxfer</a></div><div class="ttdeci">const ast_string_field blindxfer</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00179">include/asterisk/features_config.h:179</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="include_2asterisk_2features__config_8h_html_acf7f2d471cc2edd0e4fe9715b46293ad"><div class="ttname"><a href="../../d0/daa/include_2asterisk_2features__config_8h.html#acf7f2d471cc2edd0e4fe9715b46293ad">ast_get_chan_featuremap_config</a></div><div class="ttdeci">struct ast_featuremap_config * ast_get_chan_featuremap_config(struct ast_channel *chan)</div><div class="ttdoc">Get the featuremap configuration options for a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d71/features__config_8c_source.html#l01213">features_config.c:1213</a></div></div>
<div class="ttc" id="structast__featuremap__config_html_abb0264654563c986158946fed0181ac7"><div class="ttname"><a href="../../d7/de7/structast__featuremap__config.html#abb0264654563c986158946fed0181ac7">ast_featuremap_config::parkcall</a></div><div class="ttdeci">const ast_string_field parkcall</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00179">include/asterisk/features_config.h:179</a></div></div>
<div class="ttc" id="structast__featuremap__config_html_a15bde7c622f42020715606e9324990eb"><div class="ttname"><a href="../../d7/de7/structast__featuremap__config.html#a15bde7c622f42020715606e9324990eb">ast_featuremap_config::automixmon</a></div><div class="ttdeci">const ast_string_field automixmon</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00179">include/asterisk/features_config.h:179</a></div></div>
<div class="ttc" id="structast__featuremap__config_html_add452ba7fa7cb170cc56fddf5db3f308"><div class="ttname"><a href="../../d7/de7/structast__featuremap__config.html#add452ba7fa7cb170cc56fddf5db3f308">ast_featuremap_config::disconnect</a></div><div class="ttdeci">const ast_string_field disconnect</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00179">include/asterisk/features_config.h:179</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a6e4f3d7a045c6d1218caf66aa7a0be1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e4f3d7a045c6d1218caf66aa7a0be1f">&#9670;&nbsp;</a></span>controls</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* controls[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02593">2593</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02608">bridge_handle_trip()</a>.</p>

</div>
</div>
<a id="ace480ddb7578041e1cdce0aae982c7b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace480ddb7578041e1cdce0aae982c7b5">&#9670;&nbsp;</a></span>sync_ids</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int sync_ids</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Counter used for assigning synchronous bridge action IDs. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00078">78</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00966">bridge_channel_queue_action_data_sync()</a>.</p>

</div>
</div>
<a id="ae937104a106c168ae87a420d8d55bb08"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae937104a106c168ae87a420d8d55bb08">&#9670;&nbsp;</a></span>sync_structs</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/dac/structsync__structs.html">sync_structs</a>   <a class="el" href="../../dd/dac/structsync__structs.html">sync_structs</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:44:53 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
