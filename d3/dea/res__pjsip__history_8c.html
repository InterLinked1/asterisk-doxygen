<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: res_pjsip_history.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_7b47cca4d318623bb4270ab1fb592ef5.html">res</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">res_pjsip_history.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>PJSIP History.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &lt;pjsip.h&gt;</code><br />
<code>#include &lt;regex.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d8/d8c/res__pjsip_8h_source.html">asterisk/res_pjsip.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d8c/logger_8h_source.html">asterisk/logger.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/db0/cli_8h_source.html">asterisk/cli.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/df1/netsock2_8h_source.html">asterisk/netsock2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/d68/vector_8h_source.html">asterisk/vector.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d42/lock_8h_source.html">asterisk/lock.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/dd5/res__pjproject_8h_source.html">asterisk/res_pjproject.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for res_pjsip_history.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d0a/res__pjsip__history_8c__incl.png" border="0" usemap="#res__pjsip__history_8c" alt=""/></div>
<map name="res__pjsip__history_8c" id="res__pjsip__history_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="530,304,614,331"/>
<area shape="rect" id="node21" href="../../d8/d8c/res__pjsip_8h.html" title="asterisk/res_pjsip.h" alt="" coords="1925,80,2069,107"/>
<area shape="rect" id="node28" href="../../d6/d68/vector_8h.html" title="Vector container support. " alt="" coords="2770,453,2897,480"/>
<area shape="rect" id="node29" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1251,528,1365,555"/>
<area shape="rect" id="node30" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="1781,603,1907,629"/>
<area shape="rect" id="node31" href="../../db/df1/netsock2_8h.html" title="Network socket handling. " alt="" coords="2136,229,2283,256"/>
<area shape="rect" id="node46" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="1179,80,1315,107"/>
<area shape="rect" id="node47" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="1091,229,1192,256"/>
<area shape="rect" id="node48" href="../../df/dd5/res__pjproject_8h.html" title="asterisk/res_pjproject.h" alt="" coords="3144,80,3315,107"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="409,379,564,405"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="589,379,726,405"/>
<area shape="rect" id="node18" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="250,379,385,405"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="5,453,152,480"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="971,603,1114,629"/>
<area shape="rect" id="node26" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="1635,379,1792,405"/>
<area shape="rect" id="node34" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="1474,304,1625,331"/>
<area shape="rect" id="node35" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1496,229,1635,256"/>
<area shape="rect" id="node38" href="../../d4/d61/endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="1751,304,1902,331"/>
<area shape="rect" id="node39" href="../../d8/d25/sorcery_8h.html" title="Sorcery Data Access Layer API. " alt="" coords="1411,155,1544,181"/>
<area shape="rect" id="node40" href="../../db/dc4/dnsmgr_8h.html" title="Background DNS update manager. " alt="" coords="2035,155,2171,181"/>
<area shape="rect" id="node41" href="../../d5/da1/udptl_8h.html" title="UDPTL support for T.38. " alt="" coords="1267,155,1387,181"/>
<area shape="rect" id="node42" href="../../d5/dde/rtp__engine_8h.html" title="Pluggable RTP Architecture. " alt="" coords="2761,155,2917,181"/>
<area shape="rect" id="node43" href="../../d9/d4a/stasis__channels_8h.html" title="asterisk/stasis_channels.h" alt="" coords="1619,155,1808,181"/>
<area shape="rect" id="node44" href="../../d7/d44/stasis__endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="1852,229,2047,256"/>
<area shape="rect" id="node45" href="../../d8/d95/stream_8h.html" title="Media Stream API. " alt="" coords="2833,229,2967,256"/>
<area shape="rect" id="node27" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="1319,603,1465,629"/>
<area shape="rect" id="node36" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1248,304,1363,331"/>
<area shape="rect" id="node37" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="1093,379,1224,405"/>
</map>
</div>
</div>
<p><a href="../../d3/dea/res__pjsip__history_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d1c/structallowed__field.html">allowed_field</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A field that we understand and can perform operations on.  <a href="../../df/d1c/structallowed__field.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/dec/structexpression__token.html">expression_token</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A token in the expression or an evaluated part of the expression.  <a href="../../dd/dec/structexpression__token.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">An item in the history.  <a href="../../da/d6b/structpjsip__history__entry.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a61ae8530428ce9d8326d7860cd284143"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#a61ae8530428ce9d8326d7860cd284143">APPEND_TO_OUTPUT</a>(output,  token)</td></tr>
<tr class="separator:a61ae8530428ce9d8326d7860cd284143"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e8737218ed08a7ec5a58bcbc9d3f62a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#a1e8737218ed08a7ec5a58bcbc9d3f62a">HISTORY_INITIAL_SIZE</a>&#160;&#160;&#160;256</td></tr>
<tr class="separator:a1e8737218ed08a7ec5a58bcbc9d3f62a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:aa028e1130b424f8c1b131dfc55594955"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955">expression_token_type</a> { <a class="el" href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955a1af85fdb3ec184e346e012fab29bdd00">TOKEN_TYPE_FIELD</a>, 
<a class="el" href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955aa0616d64220313ebe455b14194772387">TOKEN_TYPE_OPERATOR</a>, 
<a class="el" href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955a2fa723909d532a2ea8b4f3f1d21e388a">TOKEN_TYPE_RESULT</a>
 }<tr class="memdesc:aa028e1130b424f8c1b131dfc55594955"><td class="mdescLeft">&#160;</td><td class="mdescRight">The type of token that has been parsed out of an expression.  <a href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:aa028e1130b424f8c1b131dfc55594955"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3590ac993199bf83168f84d13efa6c57"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#a3590ac993199bf83168f84d13efa6c57">AST_VECTOR</a> (vector_history_t, struct <a class="el" href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a> *)</td></tr>
<tr class="memdesc:a3590ac993199bf83168f84d13efa6c57"><td class="mdescLeft">&#160;</td><td class="mdescRight">The one and only history that we've captured.  <a href="#a3590ac993199bf83168f84d13efa6c57">More...</a><br /></td></tr>
<tr class="separator:a3590ac993199bf83168f84d13efa6c57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b624c0b03294d32baa06875d330ff1f"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/dec/structexpression__token.html">expression_token</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#a9b624c0b03294d32baa06875d330ff1f">build_expression_queue</a> (struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="memdesc:a9b624c0b03294d32baa06875d330ff1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a reverse polish notation expression queue.  <a href="#a9b624c0b03294d32baa06875d330ff1f">More...</a><br /></td></tr>
<tr class="separator:a9b624c0b03294d32baa06875d330ff1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9981a2811458a9b5b695695d1551edc"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#ad9981a2811458a9b5b695695d1551edc">clear_history_entries</a> (void *obj)</td></tr>
<tr class="memdesc:ad9981a2811458a9b5b695695d1551edc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove all entries from vector_history.  <a href="#ad9981a2811458a9b5b695695d1551edc">More...</a><br /></td></tr>
<tr class="separator:ad9981a2811458a9b5b695695d1551edc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b14a7d830c681b7510cbde873344179"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#a3b14a7d830c681b7510cbde873344179">clear_history_entry_cb</a> (struct <a class="el" href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a> *<a class="el" href="../../d3/d96/structentry.html">entry</a>)</td></tr>
<tr class="memdesc:a3b14a7d830c681b7510cbde873344179"><td class="mdescLeft">&#160;</td><td class="mdescRight">Vector callback that releases the reference for the entry in a history vector.  <a href="#a3b14a7d830c681b7510cbde873344179">More...</a><br /></td></tr>
<tr class="separator:a3b14a7d830c681b7510cbde873344179"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8f024dfb49c705ca65a6943ab5a54dc"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#ac8f024dfb49c705ca65a6943ab5a54dc">display_entry_list</a> (struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>, struct vector_history_t *vec)</td></tr>
<tr class="memdesc:ac8f024dfb49c705ca65a6943ab5a54dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print a list of the entries to the CLI.  <a href="#ac8f024dfb49c705ca65a6943ab5a54dc">More...</a><br /></td></tr>
<tr class="separator:ac8f024dfb49c705ca65a6943ab5a54dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a580f623dbb99aff25f787742d7ac07e6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#a580f623dbb99aff25f787742d7ac07e6">display_single_entry</a> (struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>, struct <a class="el" href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a> *<a class="el" href="../../d3/d96/structentry.html">entry</a>)</td></tr>
<tr class="memdesc:a580f623dbb99aff25f787742d7ac07e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print a detailed view of a single entry in the history to the CLI.  <a href="#a580f623dbb99aff25f787742d7ac07e6">More...</a><br /></td></tr>
<tr class="separator:a580f623dbb99aff25f787742d7ac07e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa014169e44859e4a7c5176a6632873b1"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#aa014169e44859e4a7c5176a6632873b1">entry_get_addr</a> (struct <a class="el" href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a> *<a class="el" href="../../d3/d96/structentry.html">entry</a>)</td></tr>
<tr class="memdesc:aa014169e44859e4a7c5176a6632873b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback to retrieve the entry's destination address.  <a href="#aa014169e44859e4a7c5176a6632873b1">More...</a><br /></td></tr>
<tr class="separator:aa014169e44859e4a7c5176a6632873b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab5e0e558ec7cb5f678dc485f0ca8d12"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#aab5e0e558ec7cb5f678dc485f0ca8d12">entry_get_number</a> (struct <a class="el" href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a> *<a class="el" href="../../d3/d96/structentry.html">entry</a>)</td></tr>
<tr class="memdesc:aab5e0e558ec7cb5f678dc485f0ca8d12"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback to retrieve the entry index number.  <a href="#aab5e0e558ec7cb5f678dc485f0ca8d12">More...</a><br /></td></tr>
<tr class="separator:aab5e0e558ec7cb5f678dc485f0ca8d12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e54cfde07b2c5cac322f3c7bf3ac8d5"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#a5e54cfde07b2c5cac322f3c7bf3ac8d5">entry_get_sip_msg_call_id</a> (struct <a class="el" href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a> *<a class="el" href="../../d3/d96/structentry.html">entry</a>)</td></tr>
<tr class="memdesc:a5e54cfde07b2c5cac322f3c7bf3ac8d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback to retrieve the entry's SIP Call-ID header.  <a href="#a5e54cfde07b2c5cac322f3c7bf3ac8d5">More...</a><br /></td></tr>
<tr class="separator:a5e54cfde07b2c5cac322f3c7bf3ac8d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeca04e62a421e3020b23b1c416107d83"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#aeca04e62a421e3020b23b1c416107d83">entry_get_sip_msg_request_method</a> (struct <a class="el" href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a> *<a class="el" href="../../d3/d96/structentry.html">entry</a>)</td></tr>
<tr class="memdesc:aeca04e62a421e3020b23b1c416107d83"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback to retrieve the entry's SIP request method type.  <a href="#aeca04e62a421e3020b23b1c416107d83">More...</a><br /></td></tr>
<tr class="separator:aeca04e62a421e3020b23b1c416107d83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b58e73c310b6490eefc81769965dd5a"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#a1b58e73c310b6490eefc81769965dd5a">entry_get_timestamp</a> (struct <a class="el" href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a> *<a class="el" href="../../d3/d96/structentry.html">entry</a>)</td></tr>
<tr class="memdesc:a1b58e73c310b6490eefc81769965dd5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback to retrieve the entry's timestamp.  <a href="#a1b58e73c310b6490eefc81769965dd5a">More...</a><br /></td></tr>
<tr class="separator:a1b58e73c310b6490eefc81769965dd5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71174fe1b7106a5228324509d7f35c30"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#a71174fe1b7106a5228324509d7f35c30">evaluate_and</a> (struct operator*op, enum <a class="el" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144">aco_option_type</a> <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, void *op_left, struct <a class="el" href="../../dd/dec/structexpression__token.html">expression_token</a> *op_right)</td></tr>
<tr class="separator:a71174fe1b7106a5228324509d7f35c30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0997870017c90b6e5305d843a4d9807d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#a0997870017c90b6e5305d843a4d9807d">evaluate_equal</a> (struct operator*op, enum <a class="el" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144">aco_option_type</a> <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, void *op_left, struct <a class="el" href="../../dd/dec/structexpression__token.html">expression_token</a> *op_right)</td></tr>
<tr class="memdesc:a0997870017c90b6e5305d843a4d9807d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Operator callback for determining equality.  <a href="#a0997870017c90b6e5305d843a4d9807d">More...</a><br /></td></tr>
<tr class="separator:a0997870017c90b6e5305d843a4d9807d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fd7698fee38b7d33f9e53d5cc3d4af0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#a5fd7698fee38b7d33f9e53d5cc3d4af0">evaluate_greater_than</a> (struct operator*op, enum <a class="el" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144">aco_option_type</a> <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, void *op_left, struct <a class="el" href="../../dd/dec/structexpression__token.html">expression_token</a> *op_right)</td></tr>
<tr class="separator:a5fd7698fee38b7d33f9e53d5cc3d4af0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd13c119f27b308be639bc903befccfb"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#afd13c119f27b308be639bc903befccfb">evaluate_greater_than_or_equal</a> (struct operator*op, enum <a class="el" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144">aco_option_type</a> <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, void *op_left, struct <a class="el" href="../../dd/dec/structexpression__token.html">expression_token</a> *op_right)</td></tr>
<tr class="separator:afd13c119f27b308be639bc903befccfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9a7d3b72c0988f72008f07dce02345f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#ab9a7d3b72c0988f72008f07dce02345f">evaluate_history_entry</a> (struct <a class="el" href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a> *<a class="el" href="../../d3/d96/structentry.html">entry</a>, struct <a class="el" href="../../dd/dec/structexpression__token.html">expression_token</a> *queue)</td></tr>
<tr class="memdesc:ab9a7d3b72c0988f72008f07dce02345f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Evaluate a single entry in this history using a RPN expression.  <a href="#ab9a7d3b72c0988f72008f07dce02345f">More...</a><br /></td></tr>
<tr class="separator:ab9a7d3b72c0988f72008f07dce02345f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f4dd2e870d93adf845c3794d6b6bf62"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#a1f4dd2e870d93adf845c3794d6b6bf62">evaluate_less_than</a> (struct operator*op, enum <a class="el" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144">aco_option_type</a> <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, void *op_left, struct <a class="el" href="../../dd/dec/structexpression__token.html">expression_token</a> *op_right)</td></tr>
<tr class="separator:a1f4dd2e870d93adf845c3794d6b6bf62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab16e775ba98fafaabe76d228a221b0d8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#ab16e775ba98fafaabe76d228a221b0d8">evaluate_less_than_or_equal</a> (struct operator*op, enum <a class="el" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144">aco_option_type</a> <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, void *op_left, struct <a class="el" href="../../dd/dec/structexpression__token.html">expression_token</a> *op_right)</td></tr>
<tr class="separator:ab16e775ba98fafaabe76d228a221b0d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af33abbaa44318e15ec72eda4bbe14588"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#af33abbaa44318e15ec72eda4bbe14588">evaluate_like</a> (struct operator*op, enum <a class="el" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144">aco_option_type</a> <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, void *op_left, struct <a class="el" href="../../dd/dec/structexpression__token.html">expression_token</a> *op_right)</td></tr>
<tr class="separator:af33abbaa44318e15ec72eda4bbe14588"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5c1741bb0b42e1509eacf15287f6eb2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#ab5c1741bb0b42e1509eacf15287f6eb2">evaluate_not</a> (struct operator*op, enum <a class="el" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144">aco_option_type</a> <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, void *operand)</td></tr>
<tr class="separator:ab5c1741bb0b42e1509eacf15287f6eb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80c7cb5e329d35749e5b67543022f30d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#a80c7cb5e329d35749e5b67543022f30d">evaluate_not_equal</a> (struct operator*op, enum <a class="el" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144">aco_option_type</a> <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, void *op_left, struct <a class="el" href="../../dd/dec/structexpression__token.html">expression_token</a> *op_right)</td></tr>
<tr class="memdesc:a80c7cb5e329d35749e5b67543022f30d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Operator callback for determining inequality.  <a href="#a80c7cb5e329d35749e5b67543022f30d">More...</a><br /></td></tr>
<tr class="separator:a80c7cb5e329d35749e5b67543022f30d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcf819441ce46782da579763dad9e59f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#afcf819441ce46782da579763dad9e59f">evaluate_or</a> (struct operator*op, enum <a class="el" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144">aco_option_type</a> <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, void *op_left, struct <a class="el" href="../../dd/dec/structexpression__token.html">expression_token</a> *op_right)</td></tr>
<tr class="separator:afcf819441ce46782da579763dad9e59f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0993a1c9bd9cdc20d706e208f13836f"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/dec/structexpression__token.html">expression_token</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#aa0993a1c9bd9cdc20d706e208f13836f">expression_token_alloc</a> (enum <a class="el" href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955">expression_token_type</a> token_type, void *<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>)</td></tr>
<tr class="memdesc:aa0993a1c9bd9cdc20d706e208f13836f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate an expression token.  <a href="#aa0993a1c9bd9cdc20d706e208f13836f">More...</a><br /></td></tr>
<tr class="separator:aa0993a1c9bd9cdc20d706e208f13836f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cd12c1033f35fc42c26505d18acb4c2"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/dec/structexpression__token.html">expression_token</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#a0cd12c1033f35fc42c26505d18acb4c2">expression_token_free</a> (struct <a class="el" href="../../dd/dec/structexpression__token.html">expression_token</a> *token)</td></tr>
<tr class="memdesc:a0cd12c1033f35fc42c26505d18acb4c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free an expression token and all others it references.  <a href="#a0cd12c1033f35fc42c26505d18acb4c2">More...</a><br /></td></tr>
<tr class="separator:a0cd12c1033f35fc42c26505d18acb4c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abad7f728cc7eb2065775e1b557bad826"><td class="memItemLeft" align="right" valign="top">static struct vector_history_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#abad7f728cc7eb2065775e1b557bad826">filter_history</a> (struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="memdesc:abad7f728cc7eb2065775e1b557bad826"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a filtered history based on a user provided expression.  <a href="#abad7f728cc7eb2065775e1b557bad826">More...</a><br /></td></tr>
<tr class="separator:abad7f728cc7eb2065775e1b557bad826"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7173fcab6cfa6186243da4c17c21b00d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/d1c/structallowed__field.html">allowed_field</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#a7173fcab6cfa6186243da4c17c21b00d">get_allowed_field</a> (struct <a class="el" href="../../dd/dec/structexpression__token.html">expression_token</a> *token)</td></tr>
<tr class="memdesc:a7173fcab6cfa6186243da4c17c21b00d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if the expression token matches a field in <code>allowed_fields</code>.  <a href="#a7173fcab6cfa6186243da4c17c21b00d">More...</a><br /></td></tr>
<tr class="separator:a7173fcab6cfa6186243da4c17c21b00d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a633e25734df85cb46857042c94bd4d"><td class="memItemLeft" align="right" valign="top">static pj_bool_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#a4a633e25734df85cb46857042c94bd4d">history_on_rx_msg</a> (pjsip_rx_data *rdata)</td></tr>
<tr class="memdesc:a4a633e25734df85cb46857042c94bd4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">PJSIP callback when a SIP message is received.  <a href="#a4a633e25734df85cb46857042c94bd4d">More...</a><br /></td></tr>
<tr class="separator:a4a633e25734df85cb46857042c94bd4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2a7e7891986c3a158df7ac973979552"><td class="memItemLeft" align="right" valign="top">static pj_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#ad2a7e7891986c3a158df7ac973979552">history_on_tx_msg</a> (pjsip_tx_data *tdata)</td></tr>
<tr class="memdesc:ad2a7e7891986c3a158df7ac973979552"><td class="mdescLeft">&#160;</td><td class="mdescRight">PJSIP callback when a SIP message is transmitted.  <a href="#ad2a7e7891986c3a158df7ac973979552">More...</a><br /></td></tr>
<tr class="separator:ad2a7e7891986c3a158df7ac973979552"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7a293fded020cfa58e506f1f81ac063"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#aa7a293fded020cfa58e506f1f81ac063">pjsip_history_entry_alloc</a> (pjsip_msg *msg)</td></tr>
<tr class="memdesc:aa7a293fded020cfa58e506f1f81ac063"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a <code><a class="el" href="../../da/d6b/structpjsip__history__entry.html" title="An item in the history. ">pjsip_history_entry</a></code> AO2 object.  <a href="#aa7a293fded020cfa58e506f1f81ac063">More...</a><br /></td></tr>
<tr class="separator:aa7a293fded020cfa58e506f1f81ac063"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5db0d40fd38dddb27a9177f7bb9978b8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#a5db0d40fd38dddb27a9177f7bb9978b8">pjsip_history_entry_dtor</a> (void *obj)</td></tr>
<tr class="memdesc:a5db0d40fd38dddb27a9177f7bb9978b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">AO2 destructor for <code><a class="el" href="../../da/d6b/structpjsip__history__entry.html" title="An item in the history. ">pjsip_history_entry</a></code>.  <a href="#a5db0d40fd38dddb27a9177f7bb9978b8">More...</a><br /></td></tr>
<tr class="separator:a5db0d40fd38dddb27a9177f7bb9978b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaac5c8b54f47d20af319c3c6d9e2c793"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#aaac5c8b54f47d20af319c3c6d9e2c793">pjsip_set_history</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:aaac5c8b54f47d20af319c3c6d9e2c793"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81c3d4617a7a937b7f0a9f0233333baf"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#a81c3d4617a7a937b7f0a9f0233333baf">pjsip_show_history</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a81c3d4617a7a937b7f0a9f0233333baf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a475418795353beb89382436ff7e50605"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#a475418795353beb89382436ff7e50605">safe_vector_cleanup</a> (void *obj)</td></tr>
<tr class="memdesc:a475418795353beb89382436ff7e50605"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cleanup routine for a history vector, serviced on a registered PJSIP thread.  <a href="#a475418795353beb89382436ff7e50605">More...</a><br /></td></tr>
<tr class="separator:a475418795353beb89382436ff7e50605"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f39bfdd8de136de40285efb6c6a47aa"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#a1f39bfdd8de136de40285efb6c6a47aa">sprint_list_entry</a> (struct <a class="el" href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a> *<a class="el" href="../../d3/d96/structentry.html">entry</a>, char *line, int <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>)</td></tr>
<tr class="memdesc:a1f39bfdd8de136de40285efb6c6a47aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Format single line history entry.  <a href="#a1f39bfdd8de136de40285efb6c6a47aa">More...</a><br /></td></tr>
<tr class="separator:a1f39bfdd8de136de40285efb6c6a47aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;PJSIP History&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_EXTENDED, .load = load_module, .unload = unload_module, .load_pri = AST_MODPRI_APP_DEPEND, .requires = &quot;res_pjsip&quot;, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfadc78153c5c7f0be2e598017217cc1"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/d1c/structallowed__field.html">allowed_field</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#acfadc78153c5c7f0be2e598017217cc1">allowed_fields</a> []</td></tr>
<tr class="memdesc:acfadc78153c5c7f0be2e598017217cc1"><td class="mdescLeft">&#160;</td><td class="mdescRight">The fields we allow.  <a href="#acfadc78153c5c7f0be2e598017217cc1">More...</a><br /></td></tr>
<tr class="separator:acfadc78153c5c7f0be2e598017217cc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a022074f480965710a6bb8d00b968c4de"><td class="memItemLeft" align="right" valign="top">static struct operator&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#a022074f480965710a6bb8d00b968c4de">allowed_operators</a> []</td></tr>
<tr class="memdesc:a022074f480965710a6bb8d00b968c4de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Our allowed operations.  <a href="#a022074f480965710a6bb8d00b968c4de">More...</a><br /></td></tr>
<tr class="separator:a022074f480965710a6bb8d00b968c4de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12d9cba0dfd29f12cf2f87a4ab1252e2"><td class="memItemLeft" align="right" valign="top">static pj_caching_pool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#a12d9cba0dfd29f12cf2f87a4ab1252e2">cachingpool</a></td></tr>
<tr class="memdesc:a12d9cba0dfd29f12cf2f87a4ab1252e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pool factory used by pjlib to allocate memory.  <a href="#a12d9cba0dfd29f12cf2f87a4ab1252e2">More...</a><br /></td></tr>
<tr class="separator:a12d9cba0dfd29f12cf2f87a4ab1252e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32e5e2d7b4752aa623264708b611dde1"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#a32e5e2d7b4752aa623264708b611dde1">cli_pjsip</a> []</td></tr>
<tr class="separator:a32e5e2d7b4752aa623264708b611dde1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03e6cca0c879c0443efb431c30c14f76"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a></td></tr>
<tr class="memdesc:a03e6cca0c879c0443efb431c30c14f76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether or not we are storing history.  <a href="#a03e6cca0c879c0443efb431c30c14f76">More...</a><br /></td></tr>
<tr class="separator:a03e6cca0c879c0443efb431c30c14f76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82bf5ccf382917585b053ae736e897e0"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#a82bf5ccf382917585b053ae736e897e0">history_lock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td></tr>
<tr class="memdesc:a82bf5ccf382917585b053ae736e897e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mutex that protects vector_history.  <a href="#a82bf5ccf382917585b053ae736e897e0">More...</a><br /></td></tr>
<tr class="separator:a82bf5ccf382917585b053ae736e897e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9533fbb09b82c02cd194c2f8d1dfc0a"><td class="memItemLeft" align="right" valign="top">static struct operator&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#ae9533fbb09b82c02cd194c2f8d1dfc0a">left_paren</a></td></tr>
<tr class="memdesc:ae9533fbb09b82c02cd194c2f8d1dfc0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Operator token for a left parenthesis.  <a href="#ae9533fbb09b82c02cd194c2f8d1dfc0a">More...</a><br /></td></tr>
<tr class="separator:ae9533fbb09b82c02cd194c2f8d1dfc0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5a71c2541c377b3d5b34fdb35964c2e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#ab5a71c2541c377b3d5b34fdb35964c2e">log_level</a> = -1</td></tr>
<tr class="memdesc:ab5a71c2541c377b3d5b34fdb35964c2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Log level for history output.  <a href="#ab5a71c2541c377b3d5b34fdb35964c2e">More...</a><br /></td></tr>
<tr class="separator:ab5a71c2541c377b3d5b34fdb35964c2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a507fdf94a407446fae3d6e24e40c2119"><td class="memItemLeft" align="right" valign="top">static pjsip_module&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#a507fdf94a407446fae3d6e24e40c2119">logging_module</a></td></tr>
<tr class="separator:a507fdf94a407446fae3d6e24e40c2119"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22bd7f0daa5994e6015f5614393fd8f7"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dea/res__pjsip__history_8c.html#a22bd7f0daa5994e6015f5614393fd8f7">packet_number</a></td></tr>
<tr class="memdesc:a22bd7f0daa5994e6015f5614393fd8f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Packet count.  <a href="#a22bd7f0daa5994e6015f5614393fd8f7">More...</a><br /></td></tr>
<tr class="separator:a22bd7f0daa5994e6015f5614393fd8f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>PJSIP History. </p>
<dl class="section author"><dt>Author</dt><dd>Matt Jordan <a href="#" onclick="location.href='mai'+'lto:'+'mjo'+'rd'+'an@'+'di'+'giu'+'m.'+'com'; return false;">mjord<span style="display: none;">.nosp@m.</span>an@d<span style="display: none;">.nosp@m.</span>igium<span style="display: none;">.nosp@m.</span>.com</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a61ae8530428ce9d8326d7860cd284143"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61ae8530428ce9d8326d7860cd284143">&#9670;&nbsp;</a></span>APPEND_TO_OUTPUT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define APPEND_TO_OUTPUT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">output, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">token&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00802">build_expression_queue()</a>.</p>

</div>
</div>
<a id="a1e8737218ed08a7ec5a58bcbc9d3f62a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e8737218ed08a7ec5a58bcbc9d3f62a">&#9670;&nbsp;</a></span>HISTORY_INITIAL_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HISTORY_INITIAL_SIZE&#160;&#160;&#160;256</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00047">47</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01097">filter_history()</a>, and <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01367">load_module()</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="aa028e1130b424f8c1b131dfc55594955"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa028e1130b424f8c1b131dfc55594955">&#9670;&nbsp;</a></span>expression_token_type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955">expression_token_type</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The type of token that has been parsed out of an expression. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aa028e1130b424f8c1b131dfc55594955a1af85fdb3ec184e346e012fab29bdd00"></a>TOKEN_TYPE_FIELD&#160;</td><td class="fielddoc"><p>The <code><a class="el" href="../../dd/dec/structexpression__token.html" title="A token in the expression or an evaluated part of the expression. ">expression_token</a></code> contains a field </p>
</td></tr>
<tr><td class="fieldname"><a id="aa028e1130b424f8c1b131dfc55594955aa0616d64220313ebe455b14194772387"></a>TOKEN_TYPE_OPERATOR&#160;</td><td class="fielddoc"><p>The <code><a class="el" href="../../dd/dec/structexpression__token.html" title="A token in the expression or an evaluated part of the expression. ">expression_token</a></code> contains an operator </p>
</td></tr>
<tr><td class="fieldname"><a id="aa028e1130b424f8c1b131dfc55594955a2fa723909d532a2ea8b4f3f1d21e388a"></a>TOKEN_TYPE_RESULT&#160;</td><td class="fielddoc"><p>The <code><a class="el" href="../../dd/dec/structexpression__token.html" title="A token in the expression or an evaluated part of the expression. ">expression_token</a></code> contains a previous result </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00138">138</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                           {<span class="comment"></span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">   /*! The \c expression_token contains a field */</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;   <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955a1af85fdb3ec184e346e012fab29bdd00">TOKEN_TYPE_FIELD</a>,<span class="comment"></span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">   /*! The \c expression_token contains an operator */</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;   <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955aa0616d64220313ebe455b14194772387">TOKEN_TYPE_OPERATOR</a>,<span class="comment"></span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">   /*! The \c expression_token contains a previous result */</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;   <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955a2fa723909d532a2ea8b4f3f1d21e388a">TOKEN_TYPE_RESULT</a></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;};</div><div class="ttc" id="res__pjsip__history_8c_html_aa028e1130b424f8c1b131dfc55594955a2fa723909d532a2ea8b4f3f1d21e388a"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955a2fa723909d532a2ea8b4f3f1d21e388a">TOKEN_TYPE_RESULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00144">res_pjsip_history.c:144</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_aa028e1130b424f8c1b131dfc55594955aa0616d64220313ebe455b14194772387"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955aa0616d64220313ebe455b14194772387">TOKEN_TYPE_OPERATOR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00142">res_pjsip_history.c:142</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_aa028e1130b424f8c1b131dfc55594955a1af85fdb3ec184e346e012fab29bdd00"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955a1af85fdb3ec184e346e012fab29bdd00">TOKEN_TYPE_FIELD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00140">res_pjsip_history.c:140</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01407">1407</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01407">1407</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01407">1407</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

</div>
</div>
<a id="a3590ac993199bf83168f84d13efa6c57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3590ac993199bf83168f84d13efa6c57">&#9670;&nbsp;</a></span>AST_VECTOR()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static AST_VECTOR </td>
          <td>(</td>
          <td class="paramtype">vector_history_t&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The one and only history that we've captured. </p>
<p>An operator that we understand in an expression </p>
<p>Our operator's symbol</p>
<p>Precedence of the symbol</p>
<p>Non-zero if the operator is evaluated right-to-left</p>
<p>Number of operands the operator takes</p>
<p>Evaluation function for unary operators</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">op</td><td>The operator being evaluated </td></tr>
    <tr><td class="paramname">type</td><td>The type of value contained in <code>operand</code> </td></tr>
    <tr><td class="paramname">operand</td><td>A pointer to the value to evaluate</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>error </td></tr>
    <tr><td class="paramname">0</td><td>evaluation is False </td></tr>
    <tr><td class="paramname">1</td><td>evaluation is True</td></tr>
  </table>
  </dd>
</dl>
<p>Evaluation function for binary operators</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">op</td><td>The operator being evaluated </td></tr>
    <tr><td class="paramname">type</td><td>The type of value contained in <code>op_left</code> </td></tr>
    <tr><td class="paramname">op_left</td><td>A pointer to the value to evaluate (a result or extracted from an entry) </td></tr>
    <tr><td class="paramname">op_right</td><td>The expression token containing the other value (a result or user-provided)</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>error </td></tr>
    <tr><td class="paramname">0</td><td>evaluation is False </td></tr>
    <tr><td class="paramname">1</td><td>evaluation is True</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00080">80</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00802">build_expression_queue()</a>, and <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00949">evaluate_history_entry()</a>.</p>
<div class="fragment"><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                {<span class="comment"></span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">   /*! \brief Our operator&#39;s symbol */</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *symbol;<span class="comment"></span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">   /*! \brief Precedence of the symbol */</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;   <span class="keywordtype">int</span> precedence;<span class="comment"></span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">   /*! \brief Non-zero if the operator is evaluated right-to-left */</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;   <span class="keywordtype">int</span> right_to_left;<span class="comment"></span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">   /*! \brief Number of operands the operator takes */</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;   <span class="keywordtype">int</span> operands;<span class="comment"></span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">   /*!</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">    * \brief Evaluation function for unary operators</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">    * \param op The operator being evaluated</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">    * \param type The type of value contained in \c operand</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">    * \param operand A pointer to the value to evaluate</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">    * \retval -1 error</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">    * \retval 0 evaluation is False</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">    * \retval 1 evaluation is True</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;   int (* <span class="keyword">const</span> evaluate_unary)(<span class="keyword">struct </span>operator *op, <span class="keyword">enum</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144">aco_option_type</a> <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <span class="keywordtype">void</span> *operand);<span class="comment"></span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">   /*!</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">    * \brief Evaluation function for binary operators</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">    * \param op The operator being evaluated</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">    * \param type The type of value contained in \c op_left</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">    * \param op_left A pointer to the value to evaluate (a result or extracted from an entry)</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">    * \param op_right The expression token containing the other value (a result or user-provided)</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">    * \retval -1 error</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">    * \retval 0 evaluation is False</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">    * \retval 1 evaluation is True</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;   int (* <span class="keyword">const</span> evaluate)(<span class="keyword">struct </span>operator *op, <span class="keyword">enum</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144">aco_option_type</a> <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <span class="keywordtype">void</span> *op_left, <span class="keyword">struct </span><a class="code" href="../../dd/dec/structexpression__token.html">expression_token</a> *op_right);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;};</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144">aco_option_type</a></div><div class="ttdeci">aco_option_type</div><div class="ttdoc">The option types. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00259">config_options.h:259</a></div></div>
<div class="ttc" id="structexpression__token_html"><div class="ttname"><a href="../../dd/dec/structexpression__token.html">expression_token</a></div><div class="ttdoc">A token in the expression or an evaluated part of the expression. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00148">res_pjsip_history.c:148</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9b624c0b03294d32baa06875d330ff1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b624c0b03294d32baa06875d330ff1f">&#9670;&nbsp;</a></span>build_expression_queue()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dd/dec/structexpression__token.html">expression_token</a>* build_expression_queue </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Build a reverse polish notation expression queue. </p>
<p>This function is an implementation of the Shunting-Yard Algorithm. It takes a user provided infix-notation expression and converts it into a reverse polish notation expression, which is a queue of tokens that can be easily parsed.</p>
<p>a The CLI arguments provided by the User, containing the infix expression</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>error </td></tr>
    <tr><td class="paramname"><a class="el" href="../../dd/dec/structexpression__token.html" title="A token in the expression or an evaluated part of the expression. ">expression_token</a></td><td>A 'queue' of expression tokens in RPN </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00802">802</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/dea/res__pjsip__history_8c.html#a61ae8530428ce9d8326d7860cd284143">APPEND_TO_OUTPUT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00080">AST_VECTOR()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00256">AST_VECTOR_APPEND</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00174">AST_VECTOR_FREE</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00113">AST_VECTOR_INIT</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00412">AST_VECTOR_REMOVE</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00999">error()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00547">expression_token_alloc()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00523">expression_token_free()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00140">TOKEN_TYPE_FIELD</a>, and <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00142">TOKEN_TYPE_OPERATOR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01097">filter_history()</a>.</p>
<div class="fragment"><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;{</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;   <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a3590ac993199bf83168f84d13efa6c57">AST_VECTOR</a>(, <span class="keyword">struct</span> <span class="keyword">operator</span> *) operators; <span class="comment">/* A stack of saved operators */</span></div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;   struct <a class="code" href="../../dd/dec/structexpression__token.html">expression_token</a> *output = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;    <span class="comment">/* The output queue */</span></div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;   struct <a class="code" href="../../dd/dec/structexpression__token.html">expression_token</a> *head = NULL;      <span class="comment">/* Pointer to the head of /c output */</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="preprocessor">#define APPEND_TO_OUTPUT(output, token) do { \</span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="preprocessor">   if ((output)) { \</span></div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;<span class="preprocessor">      (output)-&gt;next = (token); \</span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;<span class="preprocessor">      (output) = (token); \</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;<span class="preprocessor">   } else { \</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;<span class="preprocessor">      (output) = (token); \</span></div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="preprocessor">      head = (output); \</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;<span class="preprocessor">   } \</span></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;<span class="preprocessor">} while (0)</span></div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a>(&amp;operators, 8)) {</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;   }</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;   <span class="keywordflow">for</span> (i = 4; i &lt; a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a>; i++) {</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/dec/structexpression__token.html">expression_token</a> *out_token;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      <span class="keywordtype">char</span> *token = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[i]);</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;      <span class="keywordtype">int</span> j;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      <span class="comment">/* Strip off and append any left parentheses */</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;      <span class="keywordflow">if</span> (token[0] == <span class="charliteral">&#39;(&#39;</span>) {</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;         <a class="code" href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a>(&amp;operators, &amp;<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#ae9533fbb09b82c02cd194c2f8d1dfc0a">left_paren</a>);</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;         <span class="keywordflow">if</span> (!token[1]) {</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;         }</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;         token = &amp;token[1];</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;      }</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      <span class="comment">/* Handle the case where the token is an operator */</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a022074f480965710a6bb8d00b968c4de">allowed_operators</a>); j++) {</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;         <span class="keywordtype">int</span> k;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;         <span class="keywordflow">if</span> (strcasecmp(token, <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a022074f480965710a6bb8d00b968c4de">allowed_operators</a>[j].symbol)) {</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;         }</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;         <span class="keywordflow">for</span> (k = <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;operators) - 1; k &gt;= 0; k--) {</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;            <span class="keyword">struct </span>operator *top = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;operators, k);</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;            <span class="comment">/* Remove and push queued up operators, if they are of</span></div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;<span class="comment">             * less precedence than this operator</span></div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;            <span class="keywordflow">if</span> ((<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a022074f480965710a6bb8d00b968c4de">allowed_operators</a>[j].right_to_left &amp;&amp; <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a022074f480965710a6bb8d00b968c4de">allowed_operators</a>[j].precedence &gt;= top-&gt;precedence)</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;               || (!<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a022074f480965710a6bb8d00b968c4de">allowed_operators</a>[j].right_to_left &amp;&amp; <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a022074f480965710a6bb8d00b968c4de">allowed_operators</a>[j].precedence &gt; top-&gt;precedence)) {</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;               <span class="keywordflow">if</span> (!(out_token = <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#aa0993a1c9bd9cdc20d706e208f13836f">expression_token_alloc</a>(<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955aa0616d64220313ebe455b14194772387">TOKEN_TYPE_OPERATOR</a>, top))) {</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                  <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;               }</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;               <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a61ae8530428ce9d8326d7860cd284143">APPEND_TO_OUTPUT</a>(output, out_token);</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;               <a class="code" href="../../d6/d68/vector_8h.html#abe6d979239bef1a97d069b1a10c7d35c">AST_VECTOR_REMOVE</a>(&amp;operators, k, 1);</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;            }</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;         }</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;         <a class="code" href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a>(&amp;operators, &amp;<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a022074f480965710a6bb8d00b968c4de">allowed_operators</a>[j]);</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;         token = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;      }</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;      <span class="comment">/* Token was an operator; continue to next token */</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;      <span class="keywordflow">if</span> (!token) {</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;      }</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;      <span class="comment">/* Handle a right parentheses either by itself or as part of the token.</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;<span class="comment">       * If part of the token, push the token onto the output queue first</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;      <span class="keywordflow">if</span> (token[0] == <span class="charliteral">&#39;)&#39;</span> || token[strlen(token) - 1] == <span class="charliteral">&#39;)&#39;</span>) {</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;         <span class="keywordflow">if</span> (token[strlen(token) - 1] == <span class="charliteral">&#39;)&#39;</span>) {</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;            token[strlen(token) - 1] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;            <span class="keywordflow">if</span> (!(out_token = <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#aa0993a1c9bd9cdc20d706e208f13836f">expression_token_alloc</a>(<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955a1af85fdb3ec184e346e012fab29bdd00">TOKEN_TYPE_FIELD</a>, token))) {</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;               <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;            }</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;            <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a61ae8530428ce9d8326d7860cd284143">APPEND_TO_OUTPUT</a>(output, out_token);</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;            token = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;         }</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;         <span class="keywordflow">for</span> (j = <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;operators) - 1; j &gt;= 0; j--) {</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;            <span class="keyword">struct </span>operator *top = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;operators, j);</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;            <a class="code" href="../../d6/d68/vector_8h.html#abe6d979239bef1a97d069b1a10c7d35c">AST_VECTOR_REMOVE</a>(&amp;operators, j, 1);</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;            <span class="keywordflow">if</span> (top == &amp;<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#ae9533fbb09b82c02cd194c2f8d1dfc0a">left_paren</a>) {</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;            }</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;            <span class="keywordflow">if</span> (!(out_token = <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#aa0993a1c9bd9cdc20d706e208f13836f">expression_token_alloc</a>(<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955aa0616d64220313ebe455b14194772387">TOKEN_TYPE_OPERATOR</a>, top))) {</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;               <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;            }</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;            <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a61ae8530428ce9d8326d7860cd284143">APPEND_TO_OUTPUT</a>(output, out_token);</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;         }</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;      }</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;      <span class="comment">/* Just a plain token, push to the output queue */</span></div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;      <span class="keywordflow">if</span> (token) {</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;         <span class="keywordflow">if</span> (!(out_token = <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#aa0993a1c9bd9cdc20d706e208f13836f">expression_token_alloc</a>(<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955a1af85fdb3ec184e346e012fab29bdd00">TOKEN_TYPE_FIELD</a>, token))) {</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;         }</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;         <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a61ae8530428ce9d8326d7860cd284143">APPEND_TO_OUTPUT</a>(output, out_token);</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      }</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;   }</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;   <span class="comment">/* Remove any non-applied operators that remain, applying them</span></div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="comment">    * to the output queue</span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;   <span class="keywordflow">for</span> (i = <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;operators) - 1; i &gt;= 0; i--) {</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;      <span class="keyword">struct </span>operator *top = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;operators, i);</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/dec/structexpression__token.html">expression_token</a> *out_token;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#abe6d979239bef1a97d069b1a10c7d35c">AST_VECTOR_REMOVE</a>(&amp;operators, i, 1);</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      <span class="keywordflow">if</span> (top == &amp;<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#ae9533fbb09b82c02cd194c2f8d1dfc0a">left_paren</a>) {</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unbalanced &#39;(&#39; parentheses in expression!\n&quot;</span>);</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;      }</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;      <span class="keywordflow">if</span> (!(out_token = <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#aa0993a1c9bd9cdc20d706e208f13836f">expression_token_alloc</a>(<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955aa0616d64220313ebe455b14194772387">TOKEN_TYPE_OPERATOR</a>, top))) {</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;         <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      }</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;      <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a61ae8530428ce9d8326d7860cd284143">APPEND_TO_OUTPUT</a>(output, out_token);</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;   }</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(&amp;operators);</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;   <span class="keywordflow">return</span> head;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;<a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>:</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(&amp;operators);</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;   <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a0cd12c1033f35fc42c26505d18acb4c2">expression_token_free</a>(output);</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;}</div><div class="ttc" id="vector_8h_html_a66aaa4efda59c52384b03c38e781124d"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a></div><div class="ttdeci">#define AST_VECTOR_FREE(vec)</div><div class="ttdoc">Deallocates this vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00174">vector.h:174</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a61ae8530428ce9d8326d7860cd284143"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a61ae8530428ce9d8326d7860cd284143">APPEND_TO_OUTPUT</a></div><div class="ttdeci">#define APPEND_TO_OUTPUT(output, token)</div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a3590ac993199bf83168f84d13efa6c57"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a3590ac993199bf83168f84d13efa6c57">AST_VECTOR</a></div><div class="ttdeci">static AST_VECTOR(vector_history_t, struct pjsip_history_entry *)</div><div class="ttdoc">The one and only history that we&amp;#39;ve captured. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00080">res_pjsip_history.c:80</a></div></div>
<div class="ttc" id="vector_8h_html_ae9d6199727f88a8c2407cb0e004e634a"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a></div><div class="ttdeci">#define AST_VECTOR_APPEND(vec, elem)</div><div class="ttdoc">Append an element to a vector, growing the vector if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00256">vector.h:256</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a022074f480965710a6bb8d00b968c4de"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a022074f480965710a6bb8d00b968c4de">allowed_operators</a></div><div class="ttdeci">static struct operator allowed_operators[]</div><div class="ttdoc">Our allowed operations. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00453">res_pjsip_history.c:453</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_ae9533fbb09b82c02cd194c2f8d1dfc0a"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#ae9533fbb09b82c02cd194c2f8d1dfc0a">left_paren</a></div><div class="ttdeci">static struct operator left_paren</div><div class="ttdoc">Operator token for a left parenthesis. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00445">res_pjsip_history.c:445</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_aa028e1130b424f8c1b131dfc55594955aa0616d64220313ebe455b14194772387"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955aa0616d64220313ebe455b14194772387">TOKEN_TYPE_OPERATOR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00142">res_pjsip_history.c:142</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="vector_8h_html_ad9d555fa89da1bfc691181993499f785"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a></div><div class="ttdeci">#define AST_VECTOR_INIT(vec, size)</div><div class="ttdoc">Initialize a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00113">vector.h:113</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a0cd12c1033f35fc42c26505d18acb4c2"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a0cd12c1033f35fc42c26505d18acb4c2">expression_token_free</a></div><div class="ttdeci">static struct expression_token * expression_token_free(struct expression_token *token)</div><div class="ttdoc">Free an expression token and all others it references. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00523">res_pjsip_history.c:523</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_aa028e1130b424f8c1b131dfc55594955a1af85fdb3ec184e346e012fab29bdd00"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955a1af85fdb3ec184e346e012fab29bdd00">TOKEN_TYPE_FIELD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00140">res_pjsip_history.c:140</a></div></div>
<div class="ttc" id="structexpression__token_html"><div class="ttname"><a href="../../dd/dec/structexpression__token.html">expression_token</a></div><div class="ttdoc">A token in the expression or an evaluated part of the expression. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00148">res_pjsip_history.c:148</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a4a9391ee88e57361b613c4c2fd2bf4aa"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a></div><div class="ttdeci">int error(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00999">utils/frame.c:999</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_aa0993a1c9bd9cdc20d706e208f13836f"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#aa0993a1c9bd9cdc20d706e208f13836f">expression_token_alloc</a></div><div class="ttdeci">static struct expression_token * expression_token_alloc(enum expression_token_type token_type, void *value)</div><div class="ttdoc">Allocate an expression token. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00547">res_pjsip_history.c:547</a></div></div>
<div class="ttc" id="vector_8h_html_abe6d979239bef1a97d069b1a10c7d35c"><div class="ttname"><a href="../../d6/d68/vector_8h.html#abe6d979239bef1a97d069b1a10c7d35c">AST_VECTOR_REMOVE</a></div><div class="ttdeci">#define AST_VECTOR_REMOVE(vec, idx, preserve_ordered)</div><div class="ttdoc">Remove an element from a vector by index. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00412">vector.h:412</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad9981a2811458a9b5b695695d1551edc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9981a2811458a9b5b695695d1551edc">&#9670;&nbsp;</a></span>clear_history_entries()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int clear_history_entries </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove all entries from vector_history. </p>
<p>This must be called from a registered PJSIP thread </p>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00779">779</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00627">AST_VECTOR_RESET</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00769">clear_history_entry_cb()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00077">history_lock</a>, and <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00056">packet_number</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01311">pjsip_set_history()</a>, and <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01384">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;{</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a82bf5ccf382917585b053ae736e897e0">history_lock</a>);</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a0e59aa540254f87575cb1d28821bbd1f">AST_VECTOR_RESET</a>(&amp;vector_history, <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a3b14a7d830c681b7510cbde873344179">clear_history_entry_cb</a>);</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;   <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a22bd7f0daa5994e6015f5614393fd8f7">packet_number</a> = 0;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a82bf5ccf382917585b053ae736e897e0">history_lock</a>);</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;}</div><div class="ttc" id="res__pjsip__history_8c_html_a22bd7f0daa5994e6015f5614393fd8f7"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a22bd7f0daa5994e6015f5614393fd8f7">packet_number</a></div><div class="ttdeci">static int packet_number</div><div class="ttdoc">Packet count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00056">res_pjsip_history.c:56</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a82bf5ccf382917585b053ae736e897e0"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a82bf5ccf382917585b053ae736e897e0">history_lock</a></div><div class="ttdeci">static ast_mutex_t history_lock</div><div class="ttdoc">Mutex that protects vector_history. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00077">res_pjsip_history.c:77</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="vector_8h_html_a0e59aa540254f87575cb1d28821bbd1f"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a0e59aa540254f87575cb1d28821bbd1f">AST_VECTOR_RESET</a></div><div class="ttdeci">#define AST_VECTOR_RESET(vec, cleanup)</div><div class="ttdoc">Reset vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00627">vector.h:627</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a3b14a7d830c681b7510cbde873344179"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a3b14a7d830c681b7510cbde873344179">clear_history_entry_cb</a></div><div class="ttdeci">static void clear_history_entry_cb(struct pjsip_history_entry *entry)</div><div class="ttdoc">Vector callback that releases the reference for the entry in a history vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00769">res_pjsip_history.c:769</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3b14a7d830c681b7510cbde873344179"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b14a7d830c681b7510cbde873344179">&#9670;&nbsp;</a></span>clear_history_entry_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void clear_history_entry_cb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a> *&#160;</td>
          <td class="paramname"><em>entry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Vector callback that releases the reference for the entry in a history vector. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00769">769</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00779">clear_history_entries()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01097">filter_history()</a>, and <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01206">safe_vector_cleanup()</a>.</p>
<div class="fragment"><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;{</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(entry, -1);</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac8f024dfb49c705ca65a6943ab5a54dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8f024dfb49c705ca65a6943ab5a54dc">&#9670;&nbsp;</a></span>display_entry_list()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void display_entry_list </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct vector_history_t *&#160;</td>
          <td class="paramname"><em>vec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Print a list of the entries to the CLI. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01183">1183</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, and <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00657">sprint_list_entry()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01217">pjsip_show_history()</a>.</p>
<div class="fragment"><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;{</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%-5.5s %-10.10s %-30.30s %-35.35s\n&quot;</span>,</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;      <span class="stringliteral">&quot;No.&quot;</span>,</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;      <span class="stringliteral">&quot;Timestamp&quot;</span>,</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;      <span class="stringliteral">&quot;(Dir) Address&quot;</span>,</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;      <span class="stringliteral">&quot;SIP Message&quot;</span>);</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;===== ========== ============================== ===================================\n&quot;</span>);</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(vec); i++) {</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a> *<a class="code" href="../../d3/d96/structentry.html">entry</a>;</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;      <span class="keywordtype">char</span> line[256];</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      entry = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(vec, i);</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;      <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a1f39bfdd8de136de40285efb6c6a47aa">sprint_list_entry</a>(entry, line, <span class="keyword">sizeof</span>(line));</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%s\n&quot;</span>, line);</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;   }</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;}</div><div class="ttc" id="res__pjsip__history_8c_html_a1f39bfdd8de136de40285efb6c6a47aa"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a1f39bfdd8de136de40285efb6c6a47aa">sprint_list_entry</a></div><div class="ttdeci">static void sprint_list_entry(struct pjsip_history_entry *entry, char *line, int len)</div><div class="ttdoc">Format single line history entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00657">res_pjsip_history.c:657</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="structpjsip__history__entry_html"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a></div><div class="ttdoc">An item in the history. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00059">res_pjsip_history.c:59</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a580f623dbb99aff25f787742d7ac07e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a580f623dbb99aff25f787742d7ac07e6">&#9670;&nbsp;</a></span>display_single_entry()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void display_single_entry </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a> *&#160;</td>
          <td class="paramname"><em>entry</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Print a detailed view of a single entry in the history to the CLI. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01150">1150</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00069">pjsip_history_entry::dst</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00073">pjsip_history_entry::msg</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00061">pjsip_history_entry::number</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00067">pjsip_history_entry::src</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00065">pjsip_history_entry::timestamp</a>, and <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00063">pjsip_history_entry::transmitted</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01217">pjsip_show_history()</a>.</p>
<div class="fragment"><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;{</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;   <span class="keywordtype">char</span> addr[64];</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;   buf = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, PJSIP_MAX_PKT_LEN * <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>));</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;   <span class="keywordflow">if</span> (!buf) {</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;   }</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;   <span class="keywordflow">if</span> (pjsip_msg_print(entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a1415d8a5f04cf4607aab5a9684809bbc">msg</a>, buf, PJSIP_MAX_PKT_LEN) == -1) {</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to print SIP message %d: packet too large!\n&quot;</span>, entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a7106e2abc437ad981830d14176d15f09">number</a>);</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(buf);</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;   }</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;   <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#ac7c25d4fe708a4c4b8dbcf70d608fe86">transmitted</a>) {</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;      pj_sockaddr_print(&amp;entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#af1759e063d6d886b02648b8789e6e649">dst</a>, addr, <span class="keyword">sizeof</span>(addr), 3);</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;      pj_sockaddr_print(&amp;entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a7ca68666103b1f73a75e5830b97aa1d0">src</a>, addr, <span class="keyword">sizeof</span>(addr), 3);</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;   }</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;&lt;--- History Entry %d %s %s at %-10.10ld ---&gt;\n&quot;</span>,</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;      entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a7106e2abc437ad981830d14176d15f09">number</a>,</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;      entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#ac7c25d4fe708a4c4b8dbcf70d608fe86">transmitted</a> ? <span class="stringliteral">&quot;Sent to&quot;</span> : <span class="stringliteral">&quot;Received from&quot;</span>,</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;      addr,</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;      entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a175ebf16736553ad076aefe3f02d180c">timestamp</a>.tv_sec);</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%s\n&quot;</span>, buf);</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(buf);</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structpjsip__history__entry_html_ac7c25d4fe708a4c4b8dbcf70d608fe86"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html#ac7c25d4fe708a4c4b8dbcf70d608fe86">pjsip_history_entry::transmitted</a></div><div class="ttdeci">int transmitted</div><div class="ttdoc">Whether or not we transmitted the packet. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00063">res_pjsip_history.c:63</a></div></div>
<div class="ttc" id="structpjsip__history__entry_html_af1759e063d6d886b02648b8789e6e649"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html#af1759e063d6d886b02648b8789e6e649">pjsip_history_entry::dst</a></div><div class="ttdeci">pj_sockaddr dst</div><div class="ttdoc">Destination address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00069">res_pjsip_history.c:69</a></div></div>
<div class="ttc" id="structpjsip__history__entry_html_a7106e2abc437ad981830d14176d15f09"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html#a7106e2abc437ad981830d14176d15f09">pjsip_history_entry::number</a></div><div class="ttdeci">int number</div><div class="ttdoc">Packet number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00061">res_pjsip_history.c:61</a></div></div>
<div class="ttc" id="structpjsip__history__entry_html_a175ebf16736553ad076aefe3f02d180c"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html#a175ebf16736553ad076aefe3f02d180c">pjsip_history_entry::timestamp</a></div><div class="ttdeci">struct timeval timestamp</div><div class="ttdoc">Time the packet was transmitted/received. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00065">res_pjsip_history.c:65</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structpjsip__history__entry_html_a7ca68666103b1f73a75e5830b97aa1d0"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html#a7ca68666103b1f73a75e5830b97aa1d0">pjsip_history_entry::src</a></div><div class="ttdeci">pj_sockaddr src</div><div class="ttdoc">Source address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00067">res_pjsip_history.c:67</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structpjsip__history__entry_html_a1415d8a5f04cf4607aab5a9684809bbc"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html#a1415d8a5f04cf4607aab5a9684809bbc">pjsip_history_entry::msg</a></div><div class="ttdeci">pjsip_msg * msg</div><div class="ttdoc">The actual SIP message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00073">res_pjsip_history.c:73</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa014169e44859e4a7c5176a6632873b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa014169e44859e4a7c5176a6632873b1">&#9670;&nbsp;</a></span>entry_get_addr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* entry_get_addr </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a> *&#160;</td>
          <td class="paramname"><em>entry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback to retrieve the entry's destination address. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00483">483</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00069">pjsip_history_entry::dst</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00067">pjsip_history_entry::src</a>, and <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00063">pjsip_history_entry::transmitted</a>.</p>
<div class="fragment"><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;{</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;   <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#ac7c25d4fe708a4c4b8dbcf70d608fe86">transmitted</a>) {</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      <span class="keywordflow">return</span> &amp;entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#af1759e063d6d886b02648b8789e6e649">dst</a>;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      <span class="keywordflow">return</span> &amp;entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a7ca68666103b1f73a75e5830b97aa1d0">src</a>;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;   }</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;}</div><div class="ttc" id="structpjsip__history__entry_html_ac7c25d4fe708a4c4b8dbcf70d608fe86"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html#ac7c25d4fe708a4c4b8dbcf70d608fe86">pjsip_history_entry::transmitted</a></div><div class="ttdeci">int transmitted</div><div class="ttdoc">Whether or not we transmitted the packet. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00063">res_pjsip_history.c:63</a></div></div>
<div class="ttc" id="structpjsip__history__entry_html_af1759e063d6d886b02648b8789e6e649"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html#af1759e063d6d886b02648b8789e6e649">pjsip_history_entry::dst</a></div><div class="ttdeci">pj_sockaddr dst</div><div class="ttdoc">Destination address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00069">res_pjsip_history.c:69</a></div></div>
<div class="ttc" id="structpjsip__history__entry_html_a7ca68666103b1f73a75e5830b97aa1d0"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html#a7ca68666103b1f73a75e5830b97aa1d0">pjsip_history_entry::src</a></div><div class="ttdeci">pj_sockaddr src</div><div class="ttdoc">Source address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00067">res_pjsip_history.c:67</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aab5e0e558ec7cb5f678dc485f0ca8d12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab5e0e558ec7cb5f678dc485f0ca8d12">&#9670;&nbsp;</a></span>entry_get_number()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* entry_get_number </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a> *&#160;</td>
          <td class="paramname"><em>entry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback to retrieve the entry index number. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00471">471</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00061">pjsip_history_entry::number</a>.</p>
<div class="fragment"><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;{</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;   <span class="keywordflow">return</span> &amp;entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a7106e2abc437ad981830d14176d15f09">number</a>;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;}</div><div class="ttc" id="structpjsip__history__entry_html_a7106e2abc437ad981830d14176d15f09"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html#a7106e2abc437ad981830d14176d15f09">pjsip_history_entry::number</a></div><div class="ttdeci">int number</div><div class="ttdoc">Packet number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00061">res_pjsip_history.c:61</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5e54cfde07b2c5cac322f3c7bf3ac8d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e54cfde07b2c5cac322f3c7bf3ac8d5">&#9670;&nbsp;</a></span>entry_get_sip_msg_call_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* entry_get_sip_msg_call_id </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a> *&#160;</td>
          <td class="paramname"><em>entry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback to retrieve the entry's SIP Call-ID header. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00503">503</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00073">pjsip_history_entry::msg</a>.</p>
<div class="fragment"><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;{</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;   pjsip_cid_hdr *cid_hdr;</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;   cid_hdr = PJSIP_MSG_CID_HDR(entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a1415d8a5f04cf4607aab5a9684809bbc">msg</a>);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   <span class="keywordflow">return</span> &amp;cid_hdr-&gt;id;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;}</div><div class="ttc" id="structpjsip__history__entry_html_a1415d8a5f04cf4607aab5a9684809bbc"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html#a1415d8a5f04cf4607aab5a9684809bbc">pjsip_history_entry::msg</a></div><div class="ttdeci">pjsip_msg * msg</div><div class="ttdoc">The actual SIP message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00073">res_pjsip_history.c:73</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeca04e62a421e3020b23b1c416107d83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeca04e62a421e3020b23b1c416107d83">&#9670;&nbsp;</a></span>entry_get_sip_msg_request_method()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* entry_get_sip_msg_request_method </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a> *&#160;</td>
          <td class="paramname"><em>entry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback to retrieve the entry's SIP request method type. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00493">493</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00073">pjsip_history_entry::msg</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>
<div class="fragment"><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;{</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;   <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a1415d8a5f04cf4607aab5a9684809bbc">msg</a>-&gt;type != PJSIP_REQUEST_MSG) {</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;   }</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;   <span class="keywordflow">return</span> &amp;entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a1415d8a5f04cf4607aab5a9684809bbc">msg</a>-&gt;line.req.method.name;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structpjsip__history__entry_html_a1415d8a5f04cf4607aab5a9684809bbc"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html#a1415d8a5f04cf4607aab5a9684809bbc">pjsip_history_entry::msg</a></div><div class="ttdeci">pjsip_msg * msg</div><div class="ttdoc">The actual SIP message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00073">res_pjsip_history.c:73</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1b58e73c310b6490eefc81769965dd5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b58e73c310b6490eefc81769965dd5a">&#9670;&nbsp;</a></span>entry_get_timestamp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* entry_get_timestamp </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a> *&#160;</td>
          <td class="paramname"><em>entry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback to retrieve the entry's timestamp. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00477">477</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00065">pjsip_history_entry::timestamp</a>.</p>
<div class="fragment"><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;{</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;   <span class="keywordflow">return</span> &amp;entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a175ebf16736553ad076aefe3f02d180c">timestamp</a>;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;}</div><div class="ttc" id="structpjsip__history__entry_html_a175ebf16736553ad076aefe3f02d180c"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html#a175ebf16736553ad076aefe3f02d180c">pjsip_history_entry::timestamp</a></div><div class="ttdeci">struct timeval timestamp</div><div class="ttdoc">Time the packet was transmitted/received. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00065">res_pjsip_history.c:65</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a71174fe1b7106a5228324509d7f35c30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a71174fe1b7106a5228324509d7f35c30">&#9670;&nbsp;</a></span>evaluate_and()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int evaluate_and </td>
          <td>(</td>
          <td class="paramtype">struct operator*&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144">aco_option_type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>op_left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dec/structexpression__token.html">expression_token</a> *&#160;</td>
          <td class="paramname"><em>op_right</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00374">374</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00294">OPT_BOOL_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00313">OPT_BOOLFLAG_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00392">OPT_INT_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00459">OPT_UINT_T</a>, and <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00156">expression_token::result</a>.</p>
<div class="fragment"><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;{</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;   <span class="keywordflow">switch</span> (<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>) {</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a5cb849face8441c434d1a2f60264cedb">OPT_BOOL_T</a>:</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a6029f980230a7142bd17fb5587d81765">OPT_BOOLFLAG_T</a>:</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144ade42e2c356f57749868689960d0fd542">OPT_INT_T</a>:</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f">OPT_UINT_T</a>:</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      <span class="keywordflow">return</span> (*(<span class="keywordtype">int</span> *)op_left &amp;&amp; op_right-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a8b2e13c78efca330f06b6ddcd7464b41">result</a>);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Cannot evaluate: invalid operand type for operator &#39;%s&#39;\n&quot;</span>, op-&gt;symbol);</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;   }</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a6029f980230a7142bd17fb5587d81765"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a6029f980230a7142bd17fb5587d81765">OPT_BOOLFLAG_T</a></div><div class="ttdoc">Type for default option handler for bools (ast_true/ast_false) that are stored in a flag...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00313">config_options.h:313</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f">OPT_UINT_T</a></div><div class="ttdoc">Type for default option handler for unsigned integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00459">config_options.h:459</a></div></div>
<div class="ttc" id="structexpression__token_html_a8b2e13c78efca330f06b6ddcd7464b41"><div class="ttname"><a href="../../dd/dec/structexpression__token.html#a8b2e13c78efca330f06b6ddcd7464b41">expression_token::result</a></div><div class="ttdeci">int result</div><div class="ttdoc">The result of an evaluated expression. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00156">res_pjsip_history.c:156</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a5cb849face8441c434d1a2f60264cedb"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a5cb849face8441c434d1a2f60264cedb">OPT_BOOL_T</a></div><div class="ttdoc">Type for default option handler for bools (ast_true/ast_false) </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00294">config_options.h:294</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144ade42e2c356f57749868689960d0fd542"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144ade42e2c356f57749868689960d0fd542">OPT_INT_T</a></div><div class="ttdoc">Type for default option handler for signed integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00392">config_options.h:392</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0997870017c90b6e5305d843a4d9807d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0997870017c90b6e5305d843a4d9807d">&#9670;&nbsp;</a></span>evaluate_equal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int evaluate_equal </td>
          <td>(</td>
          <td class="paramtype">struct operator*&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144">aco_option_type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>op_left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dec/structexpression__token.html">expression_token</a> *&#160;</td>
          <td class="paramname"><em>op_right</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Operator callback for determining equality. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00167">167</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00128">ast_tvcmp()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00158">expression_token::field</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00294">OPT_BOOL_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00313">OPT_BOOLFLAG_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00330">OPT_CHAR_ARRAY_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00368">OPT_DOUBLE_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00392">OPT_INT_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00399">OPT_NOOP_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00416">OPT_SOCKADDR_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00435">OPT_STRINGFIELD_T</a>, and <a class="el" href="../../db/dfe/config__options_8h_source.html#l00459">OPT_UINT_T</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00234">evaluate_not_equal()</a>.</p>
<div class="fragment"><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;{</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;   <span class="keywordflow">switch</span> (<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>) {</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a5cb849face8441c434d1a2f60264cedb">OPT_BOOL_T</a>:</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a6029f980230a7142bd17fb5587d81765">OPT_BOOLFLAG_T</a>:</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144ade42e2c356f57749868689960d0fd542">OPT_INT_T</a>:</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f">OPT_UINT_T</a>:</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;   {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      <span class="keywordtype">int</span> right;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      <span class="keywordflow">if</span> (sscanf(op_right-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">field</a>, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;right) != 1) {</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to extract field &#39;%s&#39;: not an integer\n&quot;</span>, op_right-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">field</a>);</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      }</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      <span class="keywordflow">return</span> (*(<span class="keywordtype">int</span> *)op_left) == right;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;   }</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144af4305dedbf244d8309ee54c4c37446eb">OPT_DOUBLE_T</a>:</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;   {</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <span class="keywordtype">double</span> right;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      <span class="keywordflow">if</span> (sscanf(op_right-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">field</a>, <span class="stringliteral">&quot;%lf&quot;</span>, &amp;right) != 1) {</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to extract field &#39;%s&#39;: not a double\n&quot;</span>, op_right-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">field</a>);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      }</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <span class="keywordflow">return</span> (*(<span class="keywordtype">double</span> *)op_left) == right;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;   }</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a783aac0af1422c0e46356efd3c52d37a">OPT_CHAR_ARRAY_T</a>:</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144afec8c0a18639b70f2e518bc8ee9f3540">OPT_STRINGFIELD_T</a>:</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;      <span class="comment">/* In our case, we operate on pj_str_t */</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;      <span class="keywordflow">return</span> pj_strcmp2(op_left, op_right-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">field</a>) == 0;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a0df2cc9dc9bf09ee71252c183fe64bd7">OPT_NOOP_T</a>:</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;   <span class="comment">/* Used for timeval */</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;   {</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      <span class="keyword">struct </span>timeval right = { 0, };</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      <span class="keywordflow">if</span> (sscanf(op_right-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">field</a>, <span class="stringliteral">&quot;%ld&quot;</span>, &amp;right.tv_sec) != 1) {</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to extract field &#39;%s&#39;: not a timestamp\n&quot;</span>, op_right-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">field</a>);</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      }</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../de/df7/time_8h.html#a6daa33e2052acd094bb63e78aba29733">ast_tvcmp</a>(*(<span class="keyword">struct</span> timeval *)op_left, right) == 0;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;   }</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144ab1b335f36061d5ce7ca356168a496dbd">OPT_SOCKADDR_T</a>:</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;   <span class="comment">/* In our case, we operate only on pj_sockaddr_t */</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;   {</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      pj_sockaddr right;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      pj_str_t str_right;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      pj_cstr(&amp;str_right, op_right-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">field</a>);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <span class="keywordflow">if</span> (pj_sockaddr_parse(pj_AF_UNSPEC(), 0, &amp;str_right, &amp;right) != PJ_SUCCESS) {</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to convert field &#39;%s&#39;: not an IPv4 or IPv6 address\n&quot;</span>, op_right-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">field</a>);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      }</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      <span class="keywordflow">return</span> pj_sockaddr_cmp(op_left, &amp;right) == 0;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;   }</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Cannot evaluate field &#39;%s&#39;: invalid type for operator &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;         op_right-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">field</a>, op-&gt;symbol);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;   }</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;}</div><div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144ab1b335f36061d5ce7ca356168a496dbd"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144ab1b335f36061d5ce7ca356168a496dbd">OPT_SOCKADDR_T</a></div><div class="ttdoc">Type for default handler for ast_sockaddrs. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00416">config_options.h:416</a></div></div>
<div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structexpression__token_html_a61199d9b35035cfca33e6388e9dbbc7f"><div class="ttname"><a href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">expression_token::field</a></div><div class="ttdeci">char field[]</div><div class="ttdoc">The field in the expression. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00158">res_pjsip_history.c:158</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a0df2cc9dc9bf09ee71252c183fe64bd7"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a0df2cc9dc9bf09ee71252c183fe64bd7">OPT_NOOP_T</a></div><div class="ttdoc">Type for a default handler that should do nothing. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00399">config_options.h:399</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a6029f980230a7142bd17fb5587d81765"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a6029f980230a7142bd17fb5587d81765">OPT_BOOLFLAG_T</a></div><div class="ttdoc">Type for default option handler for bools (ast_true/ast_false) that are stored in a flag...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00313">config_options.h:313</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a783aac0af1422c0e46356efd3c52d37a"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a783aac0af1422c0e46356efd3c52d37a">OPT_CHAR_ARRAY_T</a></div><div class="ttdoc">Type for default option handler for character array strings. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00330">config_options.h:330</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f">OPT_UINT_T</a></div><div class="ttdoc">Type for default option handler for unsigned integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00459">config_options.h:459</a></div></div>
<div class="ttc" id="time_8h_html_a6daa33e2052acd094bb63e78aba29733"><div class="ttname"><a href="../../de/df7/time_8h.html#a6daa33e2052acd094bb63e78aba29733">ast_tvcmp</a></div><div class="ttdeci">int ast_tvcmp(struct timeval _a, struct timeval _b)</div><div class="ttdoc">Compres two struct timeval instances returning -1, 0, 1 if the first arg is smaller, equal or greater to the second. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00128">time.h:128</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a5cb849face8441c434d1a2f60264cedb"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a5cb849face8441c434d1a2f60264cedb">OPT_BOOL_T</a></div><div class="ttdoc">Type for default option handler for bools (ast_true/ast_false) </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00294">config_options.h:294</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144af4305dedbf244d8309ee54c4c37446eb"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144af4305dedbf244d8309ee54c4c37446eb">OPT_DOUBLE_T</a></div><div class="ttdoc">Type for default option handler for doubles. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00368">config_options.h:368</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144afec8c0a18639b70f2e518bc8ee9f3540"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144afec8c0a18639b70f2e518bc8ee9f3540">OPT_STRINGFIELD_T</a></div><div class="ttdoc">Type for default option handler for stringfields. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00435">config_options.h:435</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144ade42e2c356f57749868689960d0fd542"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144ade42e2c356f57749868689960d0fd542">OPT_INT_T</a></div><div class="ttdoc">Type for default option handler for signed integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00392">config_options.h:392</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5fd7698fee38b7d33f9e53d5cc3d4af0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fd7698fee38b7d33f9e53d5cc3d4af0">&#9670;&nbsp;</a></span>evaluate_greater_than()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int evaluate_greater_than </td>
          <td>(</td>
          <td class="paramtype">struct operator*&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144">aco_option_type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>op_left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dec/structexpression__token.html">expression_token</a> *&#160;</td>
          <td class="paramname"><em>op_right</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00291">291</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00128">ast_tvcmp()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00158">expression_token::field</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00294">OPT_BOOL_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00313">OPT_BOOLFLAG_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00368">OPT_DOUBLE_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00392">OPT_INT_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00399">OPT_NOOP_T</a>, and <a class="el" href="../../db/dfe/config__options_8h_source.html#l00459">OPT_UINT_T</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00340">evaluate_less_than_or_equal()</a>.</p>
<div class="fragment"><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;{</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;   <span class="keywordflow">switch</span> (<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>) {</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a5cb849face8441c434d1a2f60264cedb">OPT_BOOL_T</a>:</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a6029f980230a7142bd17fb5587d81765">OPT_BOOLFLAG_T</a>:</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144ade42e2c356f57749868689960d0fd542">OPT_INT_T</a>:</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f">OPT_UINT_T</a>:</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;   {</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <span class="keywordtype">int</span> right;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <span class="keywordflow">if</span> (sscanf(op_right-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">field</a>, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;right) != 1) {</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to extract field &#39;%s&#39;: not an integer\n&quot;</span>, op_right-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">field</a>);</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      }</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <span class="keywordflow">return</span> (*(<span class="keywordtype">int</span> *)op_left) &gt; right;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;   }</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144af4305dedbf244d8309ee54c4c37446eb">OPT_DOUBLE_T</a>:</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;   {</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      <span class="keywordtype">double</span> right;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      <span class="keywordflow">if</span> (sscanf(op_right-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">field</a>, <span class="stringliteral">&quot;%lf&quot;</span>, &amp;right) != 1) {</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to extract field &#39;%s&#39;: not a double\n&quot;</span>, op_right-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">field</a>);</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      }</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;      <span class="keywordflow">return</span> (*(<span class="keywordtype">double</span> *)op_left) &gt; right;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   }</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a0df2cc9dc9bf09ee71252c183fe64bd7">OPT_NOOP_T</a>:</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;   <span class="comment">/* Used for timeval */</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;   {</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;      <span class="keyword">struct </span>timeval right = { 0, };</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;      <span class="keywordflow">if</span> (sscanf(op_right-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">field</a>, <span class="stringliteral">&quot;%ld&quot;</span>, &amp;right.tv_sec) != 1) {</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to extract field &#39;%s&#39;: not a timestamp\n&quot;</span>, op_right-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">field</a>);</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;      }</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../de/df7/time_8h.html#a6daa33e2052acd094bb63e78aba29733">ast_tvcmp</a>(*(<span class="keyword">struct</span> timeval *)op_left, right) == 1;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;   }</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Cannot evaluate field &#39;%s&#39;: invalid type for operator &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;         op_right-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">field</a>, op-&gt;symbol);</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;   }</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structexpression__token_html_a61199d9b35035cfca33e6388e9dbbc7f"><div class="ttname"><a href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">expression_token::field</a></div><div class="ttdeci">char field[]</div><div class="ttdoc">The field in the expression. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00158">res_pjsip_history.c:158</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a0df2cc9dc9bf09ee71252c183fe64bd7"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a0df2cc9dc9bf09ee71252c183fe64bd7">OPT_NOOP_T</a></div><div class="ttdoc">Type for a default handler that should do nothing. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00399">config_options.h:399</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a6029f980230a7142bd17fb5587d81765"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a6029f980230a7142bd17fb5587d81765">OPT_BOOLFLAG_T</a></div><div class="ttdoc">Type for default option handler for bools (ast_true/ast_false) that are stored in a flag...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00313">config_options.h:313</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f">OPT_UINT_T</a></div><div class="ttdoc">Type for default option handler for unsigned integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00459">config_options.h:459</a></div></div>
<div class="ttc" id="time_8h_html_a6daa33e2052acd094bb63e78aba29733"><div class="ttname"><a href="../../de/df7/time_8h.html#a6daa33e2052acd094bb63e78aba29733">ast_tvcmp</a></div><div class="ttdeci">int ast_tvcmp(struct timeval _a, struct timeval _b)</div><div class="ttdoc">Compres two struct timeval instances returning -1, 0, 1 if the first arg is smaller, equal or greater to the second. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00128">time.h:128</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a5cb849face8441c434d1a2f60264cedb"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a5cb849face8441c434d1a2f60264cedb">OPT_BOOL_T</a></div><div class="ttdoc">Type for default option handler for bools (ast_true/ast_false) </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00294">config_options.h:294</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144af4305dedbf244d8309ee54c4c37446eb"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144af4305dedbf244d8309ee54c4c37446eb">OPT_DOUBLE_T</a></div><div class="ttdoc">Type for default option handler for doubles. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00368">config_options.h:368</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144ade42e2c356f57749868689960d0fd542"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144ade42e2c356f57749868689960d0fd542">OPT_INT_T</a></div><div class="ttdoc">Type for default option handler for signed integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00392">config_options.h:392</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afd13c119f27b308be639bc903befccfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd13c119f27b308be639bc903befccfb">&#9670;&nbsp;</a></span>evaluate_greater_than_or_equal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int evaluate_greater_than_or_equal </td>
          <td>(</td>
          <td class="paramtype">struct operator*&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144">aco_option_type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>op_left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dec/structexpression__token.html">expression_token</a> *&#160;</td>
          <td class="paramname"><em>op_right</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00348">348</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00242">evaluate_less_than()</a>.</p>
<div class="fragment"><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;{</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;   <span class="keywordflow">return</span> !<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a1f4dd2e870d93adf845c3794d6b6bf62">evaluate_less_than</a>(op, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, op_left, op_right);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a1f4dd2e870d93adf845c3794d6b6bf62"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a1f4dd2e870d93adf845c3794d6b6bf62">evaluate_less_than</a></div><div class="ttdeci">static int evaluate_less_than(struct operator*op, enum aco_option_type type, void *op_left, struct expression_token *op_right)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00242">res_pjsip_history.c:242</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab9a7d3b72c0988f72008f07dce02345f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9a7d3b72c0988f72008f07dce02345f">&#9670;&nbsp;</a></span>evaluate_history_entry()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int evaluate_history_entry </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a> *&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dec/structexpression__token.html">expression_token</a> *&#160;</td>
          <td class="paramname"><em>queue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Evaluate a single entry in this history using a RPN expression. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">entry</td><td>The entry in the history to evaluate </td></tr>
    <tr><td class="paramname">queue</td><td>The RPN expression</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>The expression evaluated FALSE on <code>entry</code> </td></tr>
    <tr><td class="paramname">1</td><td>The expression evaluated TRUE on <code>entry</code> </td></tr>
    <tr><td class="paramname">-1</td><td>The expression errored </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00949">949</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00080">AST_VECTOR()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00256">AST_VECTOR_APPEND</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00174">AST_VECTOR_FREE</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00113">AST_VECTOR_INIT</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00412">AST_VECTOR_REMOVE</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00999">error()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00547">expression_token_alloc()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00523">expression_token_free()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00158">expression_token::field</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00587">get_allowed_field()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00134">allowed_field::get_field</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00150">expression_token::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00154">expression_token::op</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00392">OPT_INT_T</a>, <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00156">expression_token::result</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00126">allowed_field::return_type</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00152">expression_token::token_type</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00140">TOKEN_TYPE_FIELD</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00144">TOKEN_TYPE_RESULT</a>, <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>, and <a class="el" href="../../d4/d2f/syslog_8c_source.html#l00037">value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01097">filter_history()</a>.</p>
<div class="fragment"><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;{</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;   <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a3590ac993199bf83168f84d13efa6c57">AST_VECTOR</a>(, <span class="keyword">struct</span> <a class="code" href="../../dd/dec/structexpression__token.html">expression_token</a> *) stack; <span class="comment">/* Our stack of results and operands */</span></div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dec/structexpression__token.html">expression_token</a> *it_queue;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dec/structexpression__token.html">expression_token</a> *<span class="keyword">final</span>;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a>(&amp;stack, 16)) {</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;   }</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;   <span class="keywordflow">for</span> (it_queue = queue; it_queue; it_queue = it_queue-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a4c510a0f703e8ce7e17680af5fb32762">next</a>) {</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/dec/structexpression__token.html">expression_token</a> *op_one;</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/dec/structexpression__token.html">expression_token</a> *op_two = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/dec/structexpression__token.html">expression_token</a> *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;      <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;      <span class="comment">/* If this is not an operator, push it to the stack */</span></div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;      <span class="keywordflow">if</span> (!it_queue-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#aca0b4b32ed56e6798e9b7d688fb9a699">op</a>) {</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a>(&amp;stack, it_queue)) {</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;         }</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;      }</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;stack) &lt; it_queue-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#aca0b4b32ed56e6798e9b7d688fb9a699">op</a>-&gt;operands) {</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to evaluate expression operator &#39;%s&#39;: not enough operands\n&quot;</span>,</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;            it_queue-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#aca0b4b32ed56e6798e9b7d688fb9a699">op</a>-&gt;symbol);</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;         <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;      }</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;      <span class="keywordflow">if</span> (it_queue-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#aca0b4b32ed56e6798e9b7d688fb9a699">op</a>-&gt;operands == 1) {</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;         <span class="comment">/* Unary operators currently consist only of &#39;not&#39;, which can only act</span></div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;<span class="comment">          * upon an evaluated condition result.</span></div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(it_queue-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#aca0b4b32ed56e6798e9b7d688fb9a699">op</a>-&gt;evaluate_unary != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;         op_one = <a class="code" href="../../d6/d68/vector_8h.html#abe6d979239bef1a97d069b1a10c7d35c">AST_VECTOR_REMOVE</a>(&amp;stack, <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;stack) - 1, 1);</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;         <span class="keywordflow">if</span> (op_one-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a89650ba81a6d059d816ea991e35ecbc9">token_type</a> != <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955a2fa723909d532a2ea8b4f3f1d21e388a">TOKEN_TYPE_RESULT</a>) {</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to evaluate &#39;%s&#39;: operand is not the result of an operation\n&quot;</span>,</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;               it_queue-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#aca0b4b32ed56e6798e9b7d688fb9a699">op</a>-&gt;symbol);</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;         }</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;         res = it_queue-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#aca0b4b32ed56e6798e9b7d688fb9a699">op</a>-&gt;evaluate_unary(it_queue-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#aca0b4b32ed56e6798e9b7d688fb9a699">op</a>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144ade42e2c356f57749868689960d0fd542">OPT_INT_T</a>, &amp;op_one-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a8b2e13c78efca330f06b6ddcd7464b41">result</a>) == 0 ? 0 : 1;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (it_queue-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#aca0b4b32ed56e6798e9b7d688fb9a699">op</a>-&gt;operands == 2) {</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../df/d1c/structallowed__field.html">allowed_field</a> *field;</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;         <span class="keyword">enum</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144">aco_option_type</a> <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;         <span class="keywordtype">void</span> *<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(it_queue-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#aca0b4b32ed56e6798e9b7d688fb9a699">op</a>-&gt;evaluate != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;         op_one = <a class="code" href="../../d6/d68/vector_8h.html#abe6d979239bef1a97d069b1a10c7d35c">AST_VECTOR_REMOVE</a>(&amp;stack, <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;stack) - 1, 1);</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;         op_two = <a class="code" href="../../d6/d68/vector_8h.html#abe6d979239bef1a97d069b1a10c7d35c">AST_VECTOR_REMOVE</a>(&amp;stack, <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;stack) - 1, 1);</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;         <span class="comment">/* If operand two is a field, then it must be a field we recognize. */</span></div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;         <span class="keywordflow">if</span> (op_two-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a89650ba81a6d059d816ea991e35ecbc9">token_type</a> == <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955a1af85fdb3ec184e346e012fab29bdd00">TOKEN_TYPE_FIELD</a>) {</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;            field = <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a7173fcab6cfa6186243da4c17c21b00d">get_allowed_field</a>(op_two);</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;            <span class="keywordflow">if</span> (!field) {</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unknown or unrecognized field: %s\n&quot;</span>, op_two-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">field</a>);</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;               <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;            }</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;            type = field-&gt;<a class="code" href="../../df/d1c/structallowed__field.html#a49eff7538a74da26c40e794c931d855e">return_type</a>;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;            value = field-&gt;<a class="code" href="../../df/d1c/structallowed__field.html#aa2eda7927d3a99f26250514bc08ec76d">get_field</a>(entry);</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (op_two-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a89650ba81a6d059d816ea991e35ecbc9">token_type</a> == <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955a2fa723909d532a2ea8b4f3f1d21e388a">TOKEN_TYPE_RESULT</a>) {</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;            type = <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144ade42e2c356f57749868689960d0fd542">OPT_INT_T</a>;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;            value = &amp;op_two-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a8b2e13c78efca330f06b6ddcd7464b41">result</a>;</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Attempting to evaluate an operator: %s\n&quot;</span>, op_two-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#aca0b4b32ed56e6798e9b7d688fb9a699">op</a>-&gt;symbol);</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;            <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;         }</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;         <span class="keywordflow">if</span> (value) {</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;            res = it_queue-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#aca0b4b32ed56e6798e9b7d688fb9a699">op</a>-&gt;evaluate(it_queue-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#aca0b4b32ed56e6798e9b7d688fb9a699">op</a>, type, value, op_one) == 0 ? 0 : 1;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;            res = 0;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;         }</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Operator &#39;%s&#39; has an invalid number of operands\n&quot;</span>, it_queue-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#aca0b4b32ed56e6798e9b7d688fb9a699">op</a>-&gt;symbol);</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;         <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;      }</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;      <span class="comment">/* Results are temporary; clean used ones up */</span></div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;      <span class="keywordflow">if</span> (op_one &amp;&amp; op_one-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a89650ba81a6d059d816ea991e35ecbc9">token_type</a> == <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955a2fa723909d532a2ea8b4f3f1d21e388a">TOKEN_TYPE_RESULT</a>) {</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(op_one);</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;      }</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;      <span class="keywordflow">if</span> (op_two &amp;&amp; op_two-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a89650ba81a6d059d816ea991e35ecbc9">token_type</a> == <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955a2fa723909d532a2ea8b4f3f1d21e388a">TOKEN_TYPE_RESULT</a>) {</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(op_two);</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;      }</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;      <span class="comment">/* Push the result onto the stack */</span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;      result = <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#aa0993a1c9bd9cdc20d706e208f13836f">expression_token_alloc</a>(<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955a2fa723909d532a2ea8b4f3f1d21e388a">TOKEN_TYPE_RESULT</a>, &amp;res);</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;      <span class="keywordflow">if</span> (!result) {</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;         <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;      }</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a>(&amp;stack, result)) {</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;         <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a0cd12c1033f35fc42c26505d18acb4c2">expression_token_free</a>(result);</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;         <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      }</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;   }</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="comment">    * When the evaluation is complete, we must have:</span></div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;<span class="comment">    *  - A single result remaining on the stack</span></div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;<span class="comment">    *  - An actual result</span></div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;stack) != 1) {</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Expression was unbalanced: %zu results remained after evaluation\n&quot;</span>,</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;         <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;stack));</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;   }</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;   <span class="keyword">final</span> = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;stack, 0);</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;   <span class="keywordflow">if</span> (final-&gt;token_type != <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955a2fa723909d532a2ea8b4f3f1d21e388a">TOKEN_TYPE_RESULT</a>) {</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Expression did not create a usable result\n&quot;</span>);</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;   }</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;   result = <span class="keyword">final</span>-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a8b2e13c78efca330f06b6ddcd7464b41">result</a>;</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<span class="keyword">final</span>);</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(&amp;stack);</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;<a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>:</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;   <span class="comment">/* Clean out any remaining result expression tokens */</span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;stack); i++) {</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/dec/structexpression__token.html">expression_token</a> *failed_token = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;stack, i);</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;      <span class="keywordflow">if</span> (failed_token-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a89650ba81a6d059d816ea991e35ecbc9">token_type</a> == <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955a2fa723909d532a2ea8b4f3f1d21e388a">TOKEN_TYPE_RESULT</a>) {</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(failed_token);</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;      }</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;   }</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(&amp;stack);</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;}</div><div class="ttc" id="vector_8h_html_a66aaa4efda59c52384b03c38e781124d"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a></div><div class="ttdeci">#define AST_VECTOR_FREE(vec)</div><div class="ttdoc">Deallocates this vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00174">vector.h:174</a></div></div>
<div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_aa028e1130b424f8c1b131dfc55594955a2fa723909d532a2ea8b4f3f1d21e388a"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955a2fa723909d532a2ea8b4f3f1d21e388a">TOKEN_TYPE_RESULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00144">res_pjsip_history.c:144</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structexpression__token_html_a61199d9b35035cfca33e6388e9dbbc7f"><div class="ttname"><a href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">expression_token::field</a></div><div class="ttdeci">char field[]</div><div class="ttdoc">The field in the expression. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00158">res_pjsip_history.c:158</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a3590ac993199bf83168f84d13efa6c57"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a3590ac993199bf83168f84d13efa6c57">AST_VECTOR</a></div><div class="ttdeci">static AST_VECTOR(vector_history_t, struct pjsip_history_entry *)</div><div class="ttdoc">The one and only history that we&amp;#39;ve captured. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00080">res_pjsip_history.c:80</a></div></div>
<div class="ttc" id="vector_8h_html_ae9d6199727f88a8c2407cb0e004e634a"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a></div><div class="ttdeci">#define AST_VECTOR_APPEND(vec, elem)</div><div class="ttdoc">Append an element to a vector, growing the vector if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00256">vector.h:256</a></div></div>
<div class="ttc" id="structallowed__field_html_aa2eda7927d3a99f26250514bc08ec76d"><div class="ttname"><a href="../../df/d1c/structallowed__field.html#aa2eda7927d3a99f26250514bc08ec76d">allowed_field::get_field</a></div><div class="ttdeci">void *(*const get_field)(struct pjsip_history_entry *entry)</div><div class="ttdoc">Function that returns the field from a pjsip_history_entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00134">res_pjsip_history.c:134</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="structexpression__token_html_aca0b4b32ed56e6798e9b7d688fb9a699"><div class="ttname"><a href="../../dd/dec/structexpression__token.html#aca0b4b32ed56e6798e9b7d688fb9a699">expression_token::op</a></div><div class="ttdeci">struct operator* op</div><div class="ttdoc">An operator that evaluates expressions. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00154">res_pjsip_history.c:154</a></div></div>
<div class="ttc" id="structexpression__token_html_a89650ba81a6d059d816ea991e35ecbc9"><div class="ttname"><a href="../../dd/dec/structexpression__token.html#a89650ba81a6d059d816ea991e35ecbc9">expression_token::token_type</a></div><div class="ttdeci">enum expression_token_type token_type</div><div class="ttdoc">The type of value stored in the expression token. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00152">res_pjsip_history.c:152</a></div></div>
<div class="ttc" id="structallowed__field_html"><div class="ttname"><a href="../../df/d1c/structallowed__field.html">allowed_field</a></div><div class="ttdoc">A field that we understand and can perform operations on. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00122">res_pjsip_history.c:122</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="vector_8h_html_ad9d555fa89da1bfc691181993499f785"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a></div><div class="ttdeci">#define AST_VECTOR_INIT(vec, size)</div><div class="ttdoc">Initialize a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00113">vector.h:113</a></div></div>
<div class="ttc" id="structallowed__field_html_a49eff7538a74da26c40e794c931d855e"><div class="ttname"><a href="../../df/d1c/structallowed__field.html#a49eff7538a74da26c40e794c931d855e">allowed_field::return_type</a></div><div class="ttdeci">enum aco_option_type return_type</div><div class="ttdoc">The type /c get_field returns. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00126">res_pjsip_history.c:126</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144">aco_option_type</a></div><div class="ttdeci">aco_option_type</div><div class="ttdoc">The option types. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00259">config_options.h:259</a></div></div>
<div class="ttc" id="structexpression__token_html_a8b2e13c78efca330f06b6ddcd7464b41"><div class="ttname"><a href="../../dd/dec/structexpression__token.html#a8b2e13c78efca330f06b6ddcd7464b41">expression_token::result</a></div><div class="ttdeci">int result</div><div class="ttdoc">The result of an evaluated expression. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00156">res_pjsip_history.c:156</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a7173fcab6cfa6186243da4c17c21b00d"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a7173fcab6cfa6186243da4c17c21b00d">get_allowed_field</a></div><div class="ttdeci">static struct allowed_field * get_allowed_field(struct expression_token *token)</div><div class="ttdoc">Determine if the expression token matches a field in allowed_fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00587">res_pjsip_history.c:587</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a0cd12c1033f35fc42c26505d18acb4c2"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a0cd12c1033f35fc42c26505d18acb4c2">expression_token_free</a></div><div class="ttdeci">static struct expression_token * expression_token_free(struct expression_token *token)</div><div class="ttdoc">Free an expression token and all others it references. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00523">res_pjsip_history.c:523</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_aa028e1130b424f8c1b131dfc55594955a1af85fdb3ec184e346e012fab29bdd00"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955a1af85fdb3ec184e346e012fab29bdd00">TOKEN_TYPE_FIELD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00140">res_pjsip_history.c:140</a></div></div>
<div class="ttc" id="structexpression__token_html"><div class="ttname"><a href="../../dd/dec/structexpression__token.html">expression_token</a></div><div class="ttdoc">A token in the expression or an evaluated part of the expression. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00148">res_pjsip_history.c:148</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a4a9391ee88e57361b613c4c2fd2bf4aa"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a></div><div class="ttdeci">int error(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00999">utils/frame.c:999</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_aa0993a1c9bd9cdc20d706e208f13836f"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#aa0993a1c9bd9cdc20d706e208f13836f">expression_token_alloc</a></div><div class="ttdeci">static struct expression_token * expression_token_alloc(enum expression_token_type token_type, void *value)</div><div class="ttdoc">Allocate an expression token. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00547">res_pjsip_history.c:547</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144ade42e2c356f57749868689960d0fd542"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144ade42e2c356f57749868689960d0fd542">OPT_INT_T</a></div><div class="ttdoc">Type for default option handler for signed integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00392">config_options.h:392</a></div></div>
<div class="ttc" id="vector_8h_html_abe6d979239bef1a97d069b1a10c7d35c"><div class="ttname"><a href="../../d6/d68/vector_8h.html#abe6d979239bef1a97d069b1a10c7d35c">AST_VECTOR_REMOVE</a></div><div class="ttdeci">#define AST_VECTOR_REMOVE(vec, idx, preserve_ordered)</div><div class="ttdoc">Remove an element from a vector by index. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00412">vector.h:412</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
<div class="ttc" id="structexpression__token_html_a4c510a0f703e8ce7e17680af5fb32762"><div class="ttname"><a href="../../dd/dec/structexpression__token.html#a4c510a0f703e8ce7e17680af5fb32762">expression_token::next</a></div><div class="ttdeci">struct expression_token * next</div><div class="ttdoc">The next expression token in the queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00150">res_pjsip_history.c:150</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1f4dd2e870d93adf845c3794d6b6bf62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f4dd2e870d93adf845c3794d6b6bf62">&#9670;&nbsp;</a></span>evaluate_less_than()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int evaluate_less_than </td>
          <td>(</td>
          <td class="paramtype">struct operator*&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144">aco_option_type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>op_left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dec/structexpression__token.html">expression_token</a> *&#160;</td>
          <td class="paramname"><em>op_right</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00242">242</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00128">ast_tvcmp()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00158">expression_token::field</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00294">OPT_BOOL_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00313">OPT_BOOLFLAG_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00368">OPT_DOUBLE_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00392">OPT_INT_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00399">OPT_NOOP_T</a>, and <a class="el" href="../../db/dfe/config__options_8h_source.html#l00459">OPT_UINT_T</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00348">evaluate_greater_than_or_equal()</a>.</p>
<div class="fragment"><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;{</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;   <span class="keywordflow">switch</span> (<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>) {</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a5cb849face8441c434d1a2f60264cedb">OPT_BOOL_T</a>:</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a6029f980230a7142bd17fb5587d81765">OPT_BOOLFLAG_T</a>:</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144ade42e2c356f57749868689960d0fd542">OPT_INT_T</a>:</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f">OPT_UINT_T</a>:</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;   {</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;      <span class="keywordtype">int</span> right;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      <span class="keywordflow">if</span> (sscanf(op_right-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">field</a>, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;right) != 1) {</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to extract field &#39;%s&#39;: not an integer\n&quot;</span>, op_right-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">field</a>);</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      }</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      <span class="keywordflow">return</span> (*(<span class="keywordtype">int</span> *)op_left) &lt; right;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;   }</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144af4305dedbf244d8309ee54c4c37446eb">OPT_DOUBLE_T</a>:</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;   {</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      <span class="keywordtype">double</span> right;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <span class="keywordflow">if</span> (sscanf(op_right-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">field</a>, <span class="stringliteral">&quot;%lf&quot;</span>, &amp;right) != 1) {</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to extract field &#39;%s&#39;: not a double\n&quot;</span>, op_right-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">field</a>);</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      }</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      <span class="keywordflow">return</span> (*(<span class="keywordtype">double</span> *)op_left) &lt; right;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;   }</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a0df2cc9dc9bf09ee71252c183fe64bd7">OPT_NOOP_T</a>:</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;   <span class="comment">/* Used for timeval */</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;   {</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <span class="keyword">struct </span>timeval right = { 0, };</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      <span class="keywordflow">if</span> (sscanf(op_right-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">field</a>, <span class="stringliteral">&quot;%ld&quot;</span>, &amp;right.tv_sec) != 1) {</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to extract field &#39;%s&#39;: not a timestamp\n&quot;</span>, op_right-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">field</a>);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      }</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../de/df7/time_8h.html#a6daa33e2052acd094bb63e78aba29733">ast_tvcmp</a>(*(<span class="keyword">struct</span> timeval *)op_left, right) == -1;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;   }</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Cannot evaluate field &#39;%s&#39;: invalid type for operator &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;         op_right-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">field</a>, op-&gt;symbol);</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;   }</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structexpression__token_html_a61199d9b35035cfca33e6388e9dbbc7f"><div class="ttname"><a href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">expression_token::field</a></div><div class="ttdeci">char field[]</div><div class="ttdoc">The field in the expression. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00158">res_pjsip_history.c:158</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a0df2cc9dc9bf09ee71252c183fe64bd7"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a0df2cc9dc9bf09ee71252c183fe64bd7">OPT_NOOP_T</a></div><div class="ttdoc">Type for a default handler that should do nothing. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00399">config_options.h:399</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a6029f980230a7142bd17fb5587d81765"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a6029f980230a7142bd17fb5587d81765">OPT_BOOLFLAG_T</a></div><div class="ttdoc">Type for default option handler for bools (ast_true/ast_false) that are stored in a flag...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00313">config_options.h:313</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f">OPT_UINT_T</a></div><div class="ttdoc">Type for default option handler for unsigned integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00459">config_options.h:459</a></div></div>
<div class="ttc" id="time_8h_html_a6daa33e2052acd094bb63e78aba29733"><div class="ttname"><a href="../../de/df7/time_8h.html#a6daa33e2052acd094bb63e78aba29733">ast_tvcmp</a></div><div class="ttdeci">int ast_tvcmp(struct timeval _a, struct timeval _b)</div><div class="ttdoc">Compres two struct timeval instances returning -1, 0, 1 if the first arg is smaller, equal or greater to the second. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00128">time.h:128</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a5cb849face8441c434d1a2f60264cedb"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a5cb849face8441c434d1a2f60264cedb">OPT_BOOL_T</a></div><div class="ttdoc">Type for default option handler for bools (ast_true/ast_false) </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00294">config_options.h:294</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144af4305dedbf244d8309ee54c4c37446eb"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144af4305dedbf244d8309ee54c4c37446eb">OPT_DOUBLE_T</a></div><div class="ttdoc">Type for default option handler for doubles. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00368">config_options.h:368</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144ade42e2c356f57749868689960d0fd542"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144ade42e2c356f57749868689960d0fd542">OPT_INT_T</a></div><div class="ttdoc">Type for default option handler for signed integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00392">config_options.h:392</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab16e775ba98fafaabe76d228a221b0d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab16e775ba98fafaabe76d228a221b0d8">&#9670;&nbsp;</a></span>evaluate_less_than_or_equal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int evaluate_less_than_or_equal </td>
          <td>(</td>
          <td class="paramtype">struct operator*&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144">aco_option_type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>op_left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dec/structexpression__token.html">expression_token</a> *&#160;</td>
          <td class="paramname"><em>op_right</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00340">340</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00291">evaluate_greater_than()</a>.</p>
<div class="fragment"><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;{</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;   <span class="keywordflow">return</span> !<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a5fd7698fee38b7d33f9e53d5cc3d4af0">evaluate_greater_than</a>(op, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, op_left, op_right);</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a5fd7698fee38b7d33f9e53d5cc3d4af0"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a5fd7698fee38b7d33f9e53d5cc3d4af0">evaluate_greater_than</a></div><div class="ttdeci">static int evaluate_greater_than(struct operator*op, enum aco_option_type type, void *op_left, struct expression_token *op_right)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00291">res_pjsip_history.c:291</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af33abbaa44318e15ec72eda4bbe14588"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af33abbaa44318e15ec72eda4bbe14588">&#9670;&nbsp;</a></span>evaluate_like()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int evaluate_like </td>
          <td>(</td>
          <td class="paramtype">struct operator*&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144">aco_option_type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>op_left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dec/structexpression__token.html">expression_token</a> *&#160;</td>
          <td class="paramname"><em>op_right</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00410">410</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05240">ast_copy_pj_str()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00158">expression_token::field</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00330">OPT_CHAR_ARRAY_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00435">OPT_STRINGFIELD_T</a>, and <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>.</p>
<div class="fragment"><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;{</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;   <span class="keywordflow">switch</span> (<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>) {</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a783aac0af1422c0e46356efd3c52d37a">OPT_CHAR_ARRAY_T</a>:</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144afec8c0a18639b70f2e518bc8ee9f3540">OPT_STRINGFIELD_T</a>:</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;   <span class="comment">/* In our case, we operate on pj_str_t */</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;   {</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      regex_t regexbuf;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[pj_strlen(op_left) + 1];</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a>(buf, op_left, pj_strlen(op_left));</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      <span class="keywordflow">if</span> (regcomp(&amp;regexbuf, op_right-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">field</a>, REG_EXTENDED | REG_NOSUB)) {</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to compile &#39;%s&#39; into a regular expression\n&quot;</span>, op_right-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">field</a>);</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      }</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;      result = (regexec(&amp;regexbuf, buf, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0) == 0);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      regfree(&amp;regexbuf);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;   }</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Cannot evaluate: invalid operand type for operator &#39;%s&#39;\n&quot;</span>, op-&gt;symbol);</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;   }</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structexpression__token_html_a61199d9b35035cfca33e6388e9dbbc7f"><div class="ttname"><a href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">expression_token::field</a></div><div class="ttdeci">char field[]</div><div class="ttdoc">The field in the expression. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00158">res_pjsip_history.c:158</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a7da3e1f7ee3fcb77f29d41a76a7528fe"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a></div><div class="ttdeci">void ast_copy_pj_str(char *dest, const pj_str_t *src, size_t size)</div><div class="ttdoc">Copy a pj_str_t into a standard character buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05240">res_pjsip.c:5240</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a783aac0af1422c0e46356efd3c52d37a"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a783aac0af1422c0e46356efd3c52d37a">OPT_CHAR_ARRAY_T</a></div><div class="ttdoc">Type for default option handler for character array strings. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00330">config_options.h:330</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144afec8c0a18639b70f2e518bc8ee9f3540"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144afec8c0a18639b70f2e518bc8ee9f3540">OPT_STRINGFIELD_T</a></div><div class="ttdoc">Type for default option handler for stringfields. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00435">config_options.h:435</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab5c1741bb0b42e1509eacf15287f6eb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5c1741bb0b42e1509eacf15287f6eb2">&#9670;&nbsp;</a></span>evaluate_not()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int evaluate_not </td>
          <td>(</td>
          <td class="paramtype">struct operator*&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144">aco_option_type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>operand</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00356">356</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00294">OPT_BOOL_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00313">OPT_BOOLFLAG_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00392">OPT_INT_T</a>, and <a class="el" href="../../db/dfe/config__options_8h_source.html#l00459">OPT_UINT_T</a>.</p>
<div class="fragment"><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;{</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;   <span class="keywordflow">switch</span> (<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>) {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a5cb849face8441c434d1a2f60264cedb">OPT_BOOL_T</a>:</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a6029f980230a7142bd17fb5587d81765">OPT_BOOLFLAG_T</a>:</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144ade42e2c356f57749868689960d0fd542">OPT_INT_T</a>:</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f">OPT_UINT_T</a>:</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      <span class="keywordflow">return</span> !(*(<span class="keywordtype">int</span> *)operand);</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Cannot evaluate: invalid operand type for operator &#39;%s&#39;\n&quot;</span>, op-&gt;symbol);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;   }</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a6029f980230a7142bd17fb5587d81765"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a6029f980230a7142bd17fb5587d81765">OPT_BOOLFLAG_T</a></div><div class="ttdoc">Type for default option handler for bools (ast_true/ast_false) that are stored in a flag...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00313">config_options.h:313</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f">OPT_UINT_T</a></div><div class="ttdoc">Type for default option handler for unsigned integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00459">config_options.h:459</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a5cb849face8441c434d1a2f60264cedb"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a5cb849face8441c434d1a2f60264cedb">OPT_BOOL_T</a></div><div class="ttdoc">Type for default option handler for bools (ast_true/ast_false) </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00294">config_options.h:294</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144ade42e2c356f57749868689960d0fd542"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144ade42e2c356f57749868689960d0fd542">OPT_INT_T</a></div><div class="ttdoc">Type for default option handler for signed integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00392">config_options.h:392</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a80c7cb5e329d35749e5b67543022f30d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80c7cb5e329d35749e5b67543022f30d">&#9670;&nbsp;</a></span>evaluate_not_equal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int evaluate_not_equal </td>
          <td>(</td>
          <td class="paramtype">struct operator*&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144">aco_option_type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>op_left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dec/structexpression__token.html">expression_token</a> *&#160;</td>
          <td class="paramname"><em>op_right</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Operator callback for determining inequality. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00234">234</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00167">evaluate_equal()</a>.</p>
<div class="fragment"><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;{</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;   <span class="keywordflow">return</span> !<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a0997870017c90b6e5305d843a4d9807d">evaluate_equal</a>(op, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, op_left, op_right);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a0997870017c90b6e5305d843a4d9807d"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a0997870017c90b6e5305d843a4d9807d">evaluate_equal</a></div><div class="ttdeci">static int evaluate_equal(struct operator*op, enum aco_option_type type, void *op_left, struct expression_token *op_right)</div><div class="ttdoc">Operator callback for determining equality. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00167">res_pjsip_history.c:167</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afcf819441ce46782da579763dad9e59f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcf819441ce46782da579763dad9e59f">&#9670;&nbsp;</a></span>evaluate_or()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int evaluate_or </td>
          <td>(</td>
          <td class="paramtype">struct operator*&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144">aco_option_type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>op_left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/dec/structexpression__token.html">expression_token</a> *&#160;</td>
          <td class="paramname"><em>op_right</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00392">392</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00294">OPT_BOOL_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00313">OPT_BOOLFLAG_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00392">OPT_INT_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00459">OPT_UINT_T</a>, and <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00156">expression_token::result</a>.</p>
<div class="fragment"><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;{</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;   <span class="keywordflow">switch</span> (<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>) {</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a5cb849face8441c434d1a2f60264cedb">OPT_BOOL_T</a>:</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a6029f980230a7142bd17fb5587d81765">OPT_BOOLFLAG_T</a>:</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144ade42e2c356f57749868689960d0fd542">OPT_INT_T</a>:</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f">OPT_UINT_T</a>:</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      <span class="keywordflow">return</span> (*(<span class="keywordtype">int</span> *)op_left || op_right-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a8b2e13c78efca330f06b6ddcd7464b41">result</a>);</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Cannot evaluate: invalid operand type for operator &#39;%s&#39;\n&quot;</span>, op-&gt;symbol);</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;   }</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a6029f980230a7142bd17fb5587d81765"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a6029f980230a7142bd17fb5587d81765">OPT_BOOLFLAG_T</a></div><div class="ttdoc">Type for default option handler for bools (ast_true/ast_false) that are stored in a flag...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00313">config_options.h:313</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f">OPT_UINT_T</a></div><div class="ttdoc">Type for default option handler for unsigned integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00459">config_options.h:459</a></div></div>
<div class="ttc" id="structexpression__token_html_a8b2e13c78efca330f06b6ddcd7464b41"><div class="ttname"><a href="../../dd/dec/structexpression__token.html#a8b2e13c78efca330f06b6ddcd7464b41">expression_token::result</a></div><div class="ttdeci">int result</div><div class="ttdoc">The result of an evaluated expression. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00156">res_pjsip_history.c:156</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a5cb849face8441c434d1a2f60264cedb"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a5cb849face8441c434d1a2f60264cedb">OPT_BOOL_T</a></div><div class="ttdoc">Type for default option handler for bools (ast_true/ast_false) </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00294">config_options.h:294</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144ade42e2c356f57749868689960d0fd542"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144ade42e2c356f57749868689960d0fd542">OPT_INT_T</a></div><div class="ttdoc">Type for default option handler for signed integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00392">config_options.h:392</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa0993a1c9bd9cdc20d706e208f13836f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0993a1c9bd9cdc20d706e208f13836f">&#9670;&nbsp;</a></span>expression_token_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dd/dec/structexpression__token.html">expression_token</a>* expression_token_alloc </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955">expression_token_type</a>&#160;</td>
          <td class="paramname"><em>token_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allocate an expression token. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">token_type</td><td>The type of token in the expression </td></tr>
    <tr><td class="paramname">value</td><td>The value/operator/result to pack into the token</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>on failure </td></tr>
    <tr><td class="paramname"></td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00547">547</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00158">expression_token::field</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00154">expression_token::op</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00156">expression_token::result</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00152">expression_token::token_type</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00140">TOKEN_TYPE_FIELD</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00142">TOKEN_TYPE_OPERATOR</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00144">TOKEN_TYPE_RESULT</a>, and <a class="el" href="../../d4/d2f/syslog_8c_source.html#l00037">value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00802">build_expression_queue()</a>, and <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00949">evaluate_history_entry()</a>.</p>
<div class="fragment"><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;{</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dec/structexpression__token.html">expression_token</a> *token;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;   <span class="keywordflow">switch</span> (<a class="code" href="../../dd/dec/structexpression__token.html#a89650ba81a6d059d816ea991e35ecbc9">token_type</a>) {</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955a2fa723909d532a2ea8b4f3f1d21e388a">TOKEN_TYPE_RESULT</a>:</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955aa0616d64220313ebe455b14194772387">TOKEN_TYPE_OPERATOR</a>:</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      token = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*token));</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955a1af85fdb3ec184e346e012fab29bdd00">TOKEN_TYPE_FIELD</a>:</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      token = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*token) + strlen((<span class="keyword">const</span> <span class="keywordtype">char</span> *)<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>) + 1);</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;   }</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;   <span class="keywordflow">if</span> (!token) {</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;   }</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;   token-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a89650ba81a6d059d816ea991e35ecbc9">token_type</a> = <a class="code" href="../../dd/dec/structexpression__token.html#a89650ba81a6d059d816ea991e35ecbc9">token_type</a>;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;   <span class="keywordflow">switch</span> (<a class="code" href="../../dd/dec/structexpression__token.html#a89650ba81a6d059d816ea991e35ecbc9">token_type</a>) {</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955a2fa723909d532a2ea8b4f3f1d21e388a">TOKEN_TYPE_RESULT</a>:</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      token-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a8b2e13c78efca330f06b6ddcd7464b41">result</a> = *(<span class="keywordtype">int</span> *)<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955aa0616d64220313ebe455b14194772387">TOKEN_TYPE_OPERATOR</a>:</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;      token-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#aca0b4b32ed56e6798e9b7d688fb9a699">op</a> = <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955a1af85fdb3ec184e346e012fab29bdd00">TOKEN_TYPE_FIELD</a>:</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      strcpy(token-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">field</a>, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>); <span class="comment">/* safe */</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;   }</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;   <span class="keywordflow">return</span> token;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;}</div><div class="ttc" id="res__pjsip__history_8c_html_aa028e1130b424f8c1b131dfc55594955a2fa723909d532a2ea8b4f3f1d21e388a"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955a2fa723909d532a2ea8b4f3f1d21e388a">TOKEN_TYPE_RESULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00144">res_pjsip_history.c:144</a></div></div>
<div class="ttc" id="structexpression__token_html_a61199d9b35035cfca33e6388e9dbbc7f"><div class="ttname"><a href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">expression_token::field</a></div><div class="ttdeci">char field[]</div><div class="ttdoc">The field in the expression. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00158">res_pjsip_history.c:158</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="structexpression__token_html_aca0b4b32ed56e6798e9b7d688fb9a699"><div class="ttname"><a href="../../dd/dec/structexpression__token.html#aca0b4b32ed56e6798e9b7d688fb9a699">expression_token::op</a></div><div class="ttdeci">struct operator* op</div><div class="ttdoc">An operator that evaluates expressions. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00154">res_pjsip_history.c:154</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_aa028e1130b424f8c1b131dfc55594955aa0616d64220313ebe455b14194772387"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955aa0616d64220313ebe455b14194772387">TOKEN_TYPE_OPERATOR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00142">res_pjsip_history.c:142</a></div></div>
<div class="ttc" id="structexpression__token_html_a89650ba81a6d059d816ea991e35ecbc9"><div class="ttname"><a href="../../dd/dec/structexpression__token.html#a89650ba81a6d059d816ea991e35ecbc9">expression_token::token_type</a></div><div class="ttdeci">enum expression_token_type token_type</div><div class="ttdoc">The type of value stored in the expression token. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00152">res_pjsip_history.c:152</a></div></div>
<div class="ttc" id="structexpression__token_html_a8b2e13c78efca330f06b6ddcd7464b41"><div class="ttname"><a href="../../dd/dec/structexpression__token.html#a8b2e13c78efca330f06b6ddcd7464b41">expression_token::result</a></div><div class="ttdeci">int result</div><div class="ttdoc">The result of an evaluated expression. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00156">res_pjsip_history.c:156</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_aa028e1130b424f8c1b131dfc55594955a1af85fdb3ec184e346e012fab29bdd00"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955a1af85fdb3ec184e346e012fab29bdd00">TOKEN_TYPE_FIELD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00140">res_pjsip_history.c:140</a></div></div>
<div class="ttc" id="structexpression__token_html"><div class="ttname"><a href="../../dd/dec/structexpression__token.html">expression_token</a></div><div class="ttdoc">A token in the expression or an evaluated part of the expression. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00148">res_pjsip_history.c:148</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0cd12c1033f35fc42c26505d18acb4c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cd12c1033f35fc42c26505d18acb4c2">&#9670;&nbsp;</a></span>expression_token_free()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dd/dec/structexpression__token.html">expression_token</a>* expression_token_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dec/structexpression__token.html">expression_token</a> *&#160;</td>
          <td class="paramname"><em>token</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Free an expression token and all others it references. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00523">523</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00150">expression_token::next</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00802">build_expression_queue()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00949">evaluate_history_entry()</a>, and <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01097">filter_history()</a>.</p>
<div class="fragment"><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;{</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dec/structexpression__token.html">expression_token</a> *it_token;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;   it_token = token;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;   <span class="keywordflow">while</span> (it_token) {</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/dec/structexpression__token.html">expression_token</a> *prev = it_token;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      it_token = it_token-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a4c510a0f703e8ce7e17680af5fb32762">next</a>;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(prev);</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;   }</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structexpression__token_html"><div class="ttname"><a href="../../dd/dec/structexpression__token.html">expression_token</a></div><div class="ttdoc">A token in the expression or an evaluated part of the expression. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00148">res_pjsip_history.c:148</a></div></div>
<div class="ttc" id="structexpression__token_html_a4c510a0f703e8ce7e17680af5fb32762"><div class="ttname"><a href="../../dd/dec/structexpression__token.html#a4c510a0f703e8ce7e17680af5fb32762">expression_token::next</a></div><div class="ttdeci">struct expression_token * next</div><div class="ttdoc">The next expression token in the queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00150">res_pjsip_history.c:150</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abad7f728cc7eb2065775e1b557bad826"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abad7f728cc7eb2065775e1b557bad826">&#9670;&nbsp;</a></span>filter_history()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct vector_history_t* filter_history </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a filtered history based on a user provided expression. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td>The CLI arguments containing the expression</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>on error </td></tr>
    <tr><td class="paramname">A</td><td>vector containing the filtered history on success </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01097">1097</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00256">AST_VECTOR_APPEND</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00174">AST_VECTOR_FREE</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00113">AST_VECTOR_INIT</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00189">AST_VECTOR_PTR_FREE</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00627">AST_VECTOR_RESET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00802">build_expression_queue()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00769">clear_history_entry_cb()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00949">evaluate_history_entry()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00523">expression_token_free()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00047">HISTORY_INITIAL_SIZE</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00077">history_lock</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01217">pjsip_show_history()</a>.</p>
<div class="fragment"><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;{</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;   <span class="keyword">struct </span>vector_history_t *output;</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dec/structexpression__token.html">expression_token</a> *queue;</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;   output = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(<span class="keyword">sizeof</span>(*output));</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;   <span class="keywordflow">if</span> (!output) {</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;   }</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a>(output, <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a1e8737218ed08a7ec5a58bcbc9d3f62a">HISTORY_INITIAL_SIZE</a> / 2)) {</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(output);</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;   }</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;   queue = <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a9b624c0b03294d32baa06875d330ff1f">build_expression_queue</a>(a);</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;   <span class="keywordflow">if</span> (!queue) {</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#ad6ca5d1cf84a649801a2775c3b81da62">AST_VECTOR_PTR_FREE</a>(output);</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;   }</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a82bf5ccf382917585b053ae736e897e0">history_lock</a>);</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;vector_history); i++) {</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a> *<a class="code" href="../../d3/d96/structentry.html">entry</a> = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;vector_history, i);</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;      <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;      res = <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#ab9a7d3b72c0988f72008f07dce02345f">evaluate_history_entry</a>(entry, queue);</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;      <span class="keywordflow">if</span> (res == -1) {</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;         <span class="comment">/* Error in expression evaluation; bail */</span></div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a82bf5ccf382917585b053ae736e897e0">history_lock</a>);</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;         <a class="code" href="../../d6/d68/vector_8h.html#a0e59aa540254f87575cb1d28821bbd1f">AST_VECTOR_RESET</a>(output, <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a3b14a7d830c681b7510cbde873344179">clear_history_entry_cb</a>);</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;         <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(output);</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(output);</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;         <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a0cd12c1033f35fc42c26505d18acb4c2">expression_token_free</a>(queue);</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(entry);</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a>(output, entry)) {</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(entry);</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;         }</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;      }</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;   }</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a82bf5ccf382917585b053ae736e897e0">history_lock</a>);</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;   <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a0cd12c1033f35fc42c26505d18acb4c2">expression_token_free</a>(queue);</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;   <span class="keywordflow">return</span> output;</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;}</div><div class="ttc" id="vector_8h_html_a66aaa4efda59c52384b03c38e781124d"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a></div><div class="ttdeci">#define AST_VECTOR_FREE(vec)</div><div class="ttdoc">Deallocates this vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00174">vector.h:174</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_ab9a7d3b72c0988f72008f07dce02345f"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#ab9a7d3b72c0988f72008f07dce02345f">evaluate_history_entry</a></div><div class="ttdeci">static int evaluate_history_entry(struct pjsip_history_entry *entry, struct expression_token *queue)</div><div class="ttdoc">Evaluate a single entry in this history using a RPN expression. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00949">res_pjsip_history.c:949</a></div></div>
<div class="ttc" id="vector_8h_html_ae9d6199727f88a8c2407cb0e004e634a"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a></div><div class="ttdeci">#define AST_VECTOR_APPEND(vec, elem)</div><div class="ttdoc">Append an element to a vector, growing the vector if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00256">vector.h:256</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a82bf5ccf382917585b053ae736e897e0"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a82bf5ccf382917585b053ae736e897e0">history_lock</a></div><div class="ttdeci">static ast_mutex_t history_lock</div><div class="ttdoc">Mutex that protects vector_history. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00077">res_pjsip_history.c:77</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="vector_8h_html_ad9d555fa89da1bfc691181993499f785"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a></div><div class="ttdeci">#define AST_VECTOR_INIT(vec, size)</div><div class="ttdoc">Initialize a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00113">vector.h:113</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a0cd12c1033f35fc42c26505d18acb4c2"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a0cd12c1033f35fc42c26505d18acb4c2">expression_token_free</a></div><div class="ttdeci">static struct expression_token * expression_token_free(struct expression_token *token)</div><div class="ttdoc">Free an expression token and all others it references. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00523">res_pjsip_history.c:523</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="vector_8h_html_a0e59aa540254f87575cb1d28821bbd1f"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a0e59aa540254f87575cb1d28821bbd1f">AST_VECTOR_RESET</a></div><div class="ttdeci">#define AST_VECTOR_RESET(vec, cleanup)</div><div class="ttdoc">Reset vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00627">vector.h:627</a></div></div>
<div class="ttc" id="vector_8h_html_ad6ca5d1cf84a649801a2775c3b81da62"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ad6ca5d1cf84a649801a2775c3b81da62">AST_VECTOR_PTR_FREE</a></div><div class="ttdeci">#define AST_VECTOR_PTR_FREE(vec)</div><div class="ttdoc">Deallocates this vector pointer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00189">vector.h:189</a></div></div>
<div class="ttc" id="structexpression__token_html"><div class="ttname"><a href="../../dd/dec/structexpression__token.html">expression_token</a></div><div class="ttdoc">A token in the expression or an evaluated part of the expression. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00148">res_pjsip_history.c:148</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a3b14a7d830c681b7510cbde873344179"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a3b14a7d830c681b7510cbde873344179">clear_history_entry_cb</a></div><div class="ttdeci">static void clear_history_entry_cb(struct pjsip_history_entry *entry)</div><div class="ttdoc">Vector callback that releases the reference for the entry in a history vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00769">res_pjsip_history.c:769</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="structpjsip__history__entry_html"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a></div><div class="ttdoc">An item in the history. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00059">res_pjsip_history.c:59</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a9b624c0b03294d32baa06875d330ff1f"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a9b624c0b03294d32baa06875d330ff1f">build_expression_queue</a></div><div class="ttdeci">static struct expression_token * build_expression_queue(struct ast_cli_args *a)</div><div class="ttdoc">Build a reverse polish notation expression queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00802">res_pjsip_history.c:802</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a1e8737218ed08a7ec5a58bcbc9d3f62a"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a1e8737218ed08a7ec5a58bcbc9d3f62a">HISTORY_INITIAL_SIZE</a></div><div class="ttdeci">#define HISTORY_INITIAL_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00047">res_pjsip_history.c:47</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7173fcab6cfa6186243da4c17c21b00d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7173fcab6cfa6186243da4c17c21b00d">&#9670;&nbsp;</a></span>get_allowed_field()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../df/d1c/structallowed__field.html">allowed_field</a>* get_allowed_field </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/dec/structexpression__token.html">expression_token</a> *&#160;</td>
          <td class="paramname"><em>token</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine if the expression token matches a field in <code>allowed_fields</code>. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00587">587</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00158">expression_token::field</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00124">allowed_field::symbol</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00152">expression_token::token_type</a>, and <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00140">TOKEN_TYPE_FIELD</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00949">evaluate_history_entry()</a>.</p>
<div class="fragment"><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;{</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(token-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a89650ba81a6d059d816ea991e35ecbc9">token_type</a> == <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955a1af85fdb3ec184e346e012fab29bdd00">TOKEN_TYPE_FIELD</a>);</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#acfadc78153c5c7f0be2e598017217cc1">allowed_fields</a>); i++) {</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      <span class="keywordflow">if</span> (strcasecmp(<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#acfadc78153c5c7f0be2e598017217cc1">allowed_fields</a>[i].symbol, token-&gt;<a class="code" href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">field</a>)) {</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      }</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#acfadc78153c5c7f0be2e598017217cc1">allowed_fields</a>[i];</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;   }</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_acfadc78153c5c7f0be2e598017217cc1"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#acfadc78153c5c7f0be2e598017217cc1">allowed_fields</a></div><div class="ttdeci">static struct allowed_field allowed_fields[]</div><div class="ttdoc">The fields we allow. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00513">res_pjsip_history.c:513</a></div></div>
<div class="ttc" id="structexpression__token_html_a61199d9b35035cfca33e6388e9dbbc7f"><div class="ttname"><a href="../../dd/dec/structexpression__token.html#a61199d9b35035cfca33e6388e9dbbc7f">expression_token::field</a></div><div class="ttdeci">char field[]</div><div class="ttdoc">The field in the expression. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00158">res_pjsip_history.c:158</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structexpression__token_html_a89650ba81a6d059d816ea991e35ecbc9"><div class="ttname"><a href="../../dd/dec/structexpression__token.html#a89650ba81a6d059d816ea991e35ecbc9">expression_token::token_type</a></div><div class="ttdeci">enum expression_token_type token_type</div><div class="ttdoc">The type of value stored in the expression token. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00152">res_pjsip_history.c:152</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_aa028e1130b424f8c1b131dfc55594955a1af85fdb3ec184e346e012fab29bdd00"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#aa028e1130b424f8c1b131dfc55594955a1af85fdb3ec184e346e012fab29bdd00">TOKEN_TYPE_FIELD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00140">res_pjsip_history.c:140</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4a633e25734df85cb46857042c94bd4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a633e25734df85cb46857042c94bd4d">&#9670;&nbsp;</a></span>history_on_rx_msg()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static pj_bool_t history_on_rx_msg </td>
          <td>(</td>
          <td class="paramtype">pjsip_rx_data *&#160;</td>
          <td class="paramname"><em>rdata</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>PJSIP callback when a SIP message is received. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00726">726</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00439">ast_log_dynamic_level</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00256">AST_VECTOR_APPEND</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00069">pjsip_history_entry::dst</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00053">enabled</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00077">history_lock</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00162">log_level</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00628">pjsip_history_entry_alloc()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00657">sprint_list_entry()</a>, and <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00067">pjsip_history_entry::src</a>.</p>
<div class="fragment"><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;{</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a> *<a class="code" href="../../d3/d96/structentry.html">entry</a>;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a>) {</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      <span class="keywordflow">return</span> PJ_FALSE;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;   }</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;   <span class="keywordflow">if</span> (!rdata-&gt;msg_info.msg) {</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      <span class="keywordflow">return</span> PJ_FALSE;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;   }</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;   entry = <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#aa7a293fded020cfa58e506f1f81ac063">pjsip_history_entry_alloc</a>(rdata-&gt;msg_info.msg);</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;   <span class="keywordflow">if</span> (!entry) {</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;      <span class="keywordflow">return</span> PJ_FALSE;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;   }</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;   <span class="keywordflow">if</span> (rdata-&gt;tp_info.transport-&gt;addr_len) {</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;      pj_sockaddr_cp(&amp;entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#af1759e063d6d886b02648b8789e6e649">dst</a>, &amp;rdata-&gt;tp_info.transport-&gt;local_addr);</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;   }</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;   <span class="keywordflow">if</span> (rdata-&gt;pkt_info.src_addr_len) {</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;      pj_sockaddr_cp(&amp;entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a7ca68666103b1f73a75e5830b97aa1d0">src</a>, &amp;rdata-&gt;pkt_info.src_addr);</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;   }</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a82bf5ccf382917585b053ae736e897e0">history_lock</a>);</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a>(&amp;vector_history, entry)) {</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(entry, -1);</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      entry = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;   }</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a82bf5ccf382917585b053ae736e897e0">history_lock</a>);</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#ab5a71c2541c377b3d5b34fdb35964c2e">log_level</a> != -1 &amp;&amp; entry) {</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;      <span class="keywordtype">char</span> line[256];</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;      <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a1f39bfdd8de136de40285efb6c6a47aa">sprint_list_entry</a>(entry, line, <span class="keyword">sizeof</span>(line));</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#aa27e6ab6364e8aea74c77f858ccd231e">ast_log_dynamic_level</a>(<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#ab5a71c2541c377b3d5b34fdb35964c2e">log_level</a>, <span class="stringliteral">&quot;%s\n&quot;</span>, line);</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;   }</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;   <span class="keywordflow">return</span> PJ_FALSE;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;}</div><div class="ttc" id="res__pjsip__history_8c_html_a1f39bfdd8de136de40285efb6c6a47aa"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a1f39bfdd8de136de40285efb6c6a47aa">sprint_list_entry</a></div><div class="ttdeci">static void sprint_list_entry(struct pjsip_history_entry *entry, char *line, int len)</div><div class="ttdoc">Format single line history entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00657">res_pjsip_history.c:657</a></div></div>
<div class="ttc" id="vector_8h_html_ae9d6199727f88a8c2407cb0e004e634a"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a></div><div class="ttdeci">#define AST_VECTOR_APPEND(vec, elem)</div><div class="ttdoc">Append an element to a vector, growing the vector if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00256">vector.h:256</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a82bf5ccf382917585b053ae736e897e0"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a82bf5ccf382917585b053ae736e897e0">history_lock</a></div><div class="ttdeci">static ast_mutex_t history_lock</div><div class="ttdoc">Mutex that protects vector_history. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00077">res_pjsip_history.c:77</a></div></div>
<div class="ttc" id="structpjsip__history__entry_html_af1759e063d6d886b02648b8789e6e649"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html#af1759e063d6d886b02648b8789e6e649">pjsip_history_entry::dst</a></div><div class="ttdeci">pj_sockaddr dst</div><div class="ttdoc">Destination address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00069">res_pjsip_history.c:69</a></div></div>
<div class="ttc" id="logger_8h_html_aa27e6ab6364e8aea74c77f858ccd231e"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aa27e6ab6364e8aea74c77f858ccd231e">ast_log_dynamic_level</a></div><div class="ttdeci">#define ast_log_dynamic_level(level,...)</div><div class="ttdoc">Send a log message to a dynamically registered log level. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00439">logger.h:439</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_ab5a71c2541c377b3d5b34fdb35964c2e"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#ab5a71c2541c377b3d5b34fdb35964c2e">log_level</a></div><div class="ttdeci">static int log_level</div><div class="ttdoc">Log level for history output. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00162">res_pjsip_history.c:162</a></div></div>
<div class="ttc" id="structpjsip__history__entry_html_a7ca68666103b1f73a75e5830b97aa1d0"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html#a7ca68666103b1f73a75e5830b97aa1d0">pjsip_history_entry::src</a></div><div class="ttdeci">pj_sockaddr src</div><div class="ttdoc">Source address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00067">res_pjsip_history.c:67</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_aa7a293fded020cfa58e506f1f81ac063"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#aa7a293fded020cfa58e506f1f81ac063">pjsip_history_entry_alloc</a></div><div class="ttdeci">static struct pjsip_history_entry * pjsip_history_entry_alloc(pjsip_msg *msg)</div><div class="ttdoc">Create a pjsip_history_entry AO2 object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00628">res_pjsip_history.c:628</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a03e6cca0c879c0443efb431c30c14f76"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a></div><div class="ttdeci">static int enabled</div><div class="ttdoc">Whether or not we are storing history. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00053">res_pjsip_history.c:53</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="structpjsip__history__entry_html"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a></div><div class="ttdoc">An item in the history. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00059">res_pjsip_history.c:59</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad2a7e7891986c3a158df7ac973979552"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2a7e7891986c3a158df7ac973979552">&#9670;&nbsp;</a></span>history_on_tx_msg()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static pj_status_t history_on_tx_msg </td>
          <td>(</td>
          <td class="paramtype">pjsip_tx_data *&#160;</td>
          <td class="paramname"><em>tdata</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>PJSIP callback when a SIP message is transmitted. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00692">692</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00439">ast_log_dynamic_level</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00256">AST_VECTOR_APPEND</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00069">pjsip_history_entry::dst</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00053">enabled</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00077">history_lock</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00162">log_level</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00628">pjsip_history_entry_alloc()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00657">sprint_list_entry()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00067">pjsip_history_entry::src</a>, and <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00063">pjsip_history_entry::transmitted</a>.</p>
<div class="fragment"><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;{</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a> *<a class="code" href="../../d3/d96/structentry.html">entry</a>;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a>) {</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      <span class="keywordflow">return</span> PJ_SUCCESS;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;   }</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;   entry = <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#aa7a293fded020cfa58e506f1f81ac063">pjsip_history_entry_alloc</a>(tdata-&gt;msg);</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;   <span class="keywordflow">if</span> (!entry) {</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;      <span class="keywordflow">return</span> PJ_SUCCESS;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;   }</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;   entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#ac7c25d4fe708a4c4b8dbcf70d608fe86">transmitted</a> = 1;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;   pj_sockaddr_cp(&amp;entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a7ca68666103b1f73a75e5830b97aa1d0">src</a>, &amp;tdata-&gt;tp_info.transport-&gt;local_addr);</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;   pj_sockaddr_cp(&amp;entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#af1759e063d6d886b02648b8789e6e649">dst</a>, &amp;tdata-&gt;tp_info.dst_addr);</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a82bf5ccf382917585b053ae736e897e0">history_lock</a>);</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a>(&amp;vector_history, entry)) {</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(entry, -1);</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      entry = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;   }</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a82bf5ccf382917585b053ae736e897e0">history_lock</a>);</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#ab5a71c2541c377b3d5b34fdb35964c2e">log_level</a> != -1 &amp;&amp; entry) {</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;      <span class="keywordtype">char</span> line[256];</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a1f39bfdd8de136de40285efb6c6a47aa">sprint_list_entry</a>(entry, line, <span class="keyword">sizeof</span>(line));</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#aa27e6ab6364e8aea74c77f858ccd231e">ast_log_dynamic_level</a>(<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#ab5a71c2541c377b3d5b34fdb35964c2e">log_level</a>, <span class="stringliteral">&quot;%s\n&quot;</span>, line);</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;   }</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;   <span class="keywordflow">return</span> PJ_SUCCESS;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;}</div><div class="ttc" id="res__pjsip__history_8c_html_a1f39bfdd8de136de40285efb6c6a47aa"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a1f39bfdd8de136de40285efb6c6a47aa">sprint_list_entry</a></div><div class="ttdeci">static void sprint_list_entry(struct pjsip_history_entry *entry, char *line, int len)</div><div class="ttdoc">Format single line history entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00657">res_pjsip_history.c:657</a></div></div>
<div class="ttc" id="vector_8h_html_ae9d6199727f88a8c2407cb0e004e634a"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a></div><div class="ttdeci">#define AST_VECTOR_APPEND(vec, elem)</div><div class="ttdoc">Append an element to a vector, growing the vector if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00256">vector.h:256</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a82bf5ccf382917585b053ae736e897e0"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a82bf5ccf382917585b053ae736e897e0">history_lock</a></div><div class="ttdeci">static ast_mutex_t history_lock</div><div class="ttdoc">Mutex that protects vector_history. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00077">res_pjsip_history.c:77</a></div></div>
<div class="ttc" id="structpjsip__history__entry_html_ac7c25d4fe708a4c4b8dbcf70d608fe86"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html#ac7c25d4fe708a4c4b8dbcf70d608fe86">pjsip_history_entry::transmitted</a></div><div class="ttdeci">int transmitted</div><div class="ttdoc">Whether or not we transmitted the packet. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00063">res_pjsip_history.c:63</a></div></div>
<div class="ttc" id="structpjsip__history__entry_html_af1759e063d6d886b02648b8789e6e649"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html#af1759e063d6d886b02648b8789e6e649">pjsip_history_entry::dst</a></div><div class="ttdeci">pj_sockaddr dst</div><div class="ttdoc">Destination address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00069">res_pjsip_history.c:69</a></div></div>
<div class="ttc" id="logger_8h_html_aa27e6ab6364e8aea74c77f858ccd231e"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aa27e6ab6364e8aea74c77f858ccd231e">ast_log_dynamic_level</a></div><div class="ttdeci">#define ast_log_dynamic_level(level,...)</div><div class="ttdoc">Send a log message to a dynamically registered log level. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00439">logger.h:439</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_ab5a71c2541c377b3d5b34fdb35964c2e"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#ab5a71c2541c377b3d5b34fdb35964c2e">log_level</a></div><div class="ttdeci">static int log_level</div><div class="ttdoc">Log level for history output. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00162">res_pjsip_history.c:162</a></div></div>
<div class="ttc" id="structpjsip__history__entry_html_a7ca68666103b1f73a75e5830b97aa1d0"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html#a7ca68666103b1f73a75e5830b97aa1d0">pjsip_history_entry::src</a></div><div class="ttdeci">pj_sockaddr src</div><div class="ttdoc">Source address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00067">res_pjsip_history.c:67</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_aa7a293fded020cfa58e506f1f81ac063"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#aa7a293fded020cfa58e506f1f81ac063">pjsip_history_entry_alloc</a></div><div class="ttdeci">static struct pjsip_history_entry * pjsip_history_entry_alloc(pjsip_msg *msg)</div><div class="ttdoc">Create a pjsip_history_entry AO2 object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00628">res_pjsip_history.c:628</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a03e6cca0c879c0443efb431c30c14f76"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a></div><div class="ttdeci">static int enabled</div><div class="ttdoc">Whether or not we are storing history. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00053">res_pjsip_history.c:53</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="structpjsip__history__entry_html"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a></div><div class="ttdoc">An item in the history. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00059">res_pjsip_history.c:59</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01367">1367</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00265">ast_cli_register_multiple</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d22/logger_8c_source.html#l02503">ast_logger_register_level()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="../../de/deb/res__pjproject_8c_source.html#l00465">ast_pjproject_caching_pool_init()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03315">ast_sip_register_service()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00113">AST_VECTOR_INIT</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00050">cachingpool</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00047">HISTORY_INITIAL_SIZE</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00162">log_level</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01353">logging_module</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01384">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;{</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;   <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#ab5a71c2541c377b3d5b34fdb35964c2e">log_level</a> = <a class="code" href="../../d1/d8c/logger_8h.html#aa689efaaa503de6322c2b13b3faab63d">ast_logger_register_level</a>(<span class="stringliteral">&quot;PJSIP_HISTORY&quot;</span>);</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#ab5a71c2541c377b3d5b34fdb35964c2e">log_level</a> &lt; 0) {</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to register history log level\n&quot;</span>);</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;   }</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;   <a class="code" href="../../df/dd5/res__pjproject_8h.html#a87bb9df420d237f2b5eefa7adaa78b01">ast_pjproject_caching_pool_init</a>(&amp;<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a12d9cba0dfd29f12cf2f87a4ab1252e2">cachingpool</a>, &amp;pj_pool_factory_default_policy, 0);</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a>(&amp;vector_history, <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a1e8737218ed08a7ec5a58bcbc9d3f62a">HISTORY_INITIAL_SIZE</a>);</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;   <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a2d923ef44f62dffc05178f762b88f084">ast_sip_register_service</a>(&amp;<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a507fdf94a407446fae3d6e24e40c2119">logging_module</a>);</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a>(<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a32e5e2d7b4752aa623264708b611dde1">cli_pjsip</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a32e5e2d7b4752aa623264708b611dde1">cli_pjsip</a>));</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="cli_8h_html_aea8910ed9e301e7f741f87942c244eac"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a></div><div class="ttdeci">#define ast_cli_register_multiple(e, len)</div><div class="ttdoc">Register multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00265">cli.h:265</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_ab5a71c2541c377b3d5b34fdb35964c2e"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#ab5a71c2541c377b3d5b34fdb35964c2e">log_level</a></div><div class="ttdeci">static int log_level</div><div class="ttdoc">Log level for history output. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00162">res_pjsip_history.c:162</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="vector_8h_html_ad9d555fa89da1bfc691181993499f785"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a></div><div class="ttdeci">#define AST_VECTOR_INIT(vec, size)</div><div class="ttdoc">Initialize a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00113">vector.h:113</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a507fdf94a407446fae3d6e24e40c2119"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a507fdf94a407446fae3d6e24e40c2119">logging_module</a></div><div class="ttdeci">static pjsip_module logging_module</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l01353">res_pjsip_history.c:1353</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a2d923ef44f62dffc05178f762b88f084"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a2d923ef44f62dffc05178f762b88f084">ast_sip_register_service</a></div><div class="ttdeci">int ast_sip_register_service(pjsip_module *module)</div><div class="ttdoc">Register a SIP service in Asterisk. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03315">res_pjsip.c:3315</a></div></div>
<div class="ttc" id="logger_8h_html_aa689efaaa503de6322c2b13b3faab63d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aa689efaaa503de6322c2b13b3faab63d">ast_logger_register_level</a></div><div class="ttdeci">int ast_logger_register_level(const char *name)</div><div class="ttdoc">Register a new logger level. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/logger_8c_source.html#l02503">logger.c:2503</a></div></div>
<div class="ttc" id="res__pjproject_8h_html_a87bb9df420d237f2b5eefa7adaa78b01"><div class="ttname"><a href="../../df/dd5/res__pjproject_8h.html#a87bb9df420d237f2b5eefa7adaa78b01">ast_pjproject_caching_pool_init</a></div><div class="ttdeci">void ast_pjproject_caching_pool_init(pj_caching_pool *cp, const pj_pool_factory_policy *policy, pj_size_t max_capacity)</div><div class="ttdoc">Initialize the caching pool factory. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/deb/res__pjproject_8c_source.html#l00465">res_pjproject.c:465</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a32e5e2d7b4752aa623264708b611dde1"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a32e5e2d7b4752aa623264708b611dde1">cli_pjsip</a></div><div class="ttdeci">static struct ast_cli_entry cli_pjsip[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l01362">res_pjsip_history.c:1362</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a1e8737218ed08a7ec5a58bcbc9d3f62a"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a1e8737218ed08a7ec5a58bcbc9d3f62a">HISTORY_INITIAL_SIZE</a></div><div class="ttdeci">#define HISTORY_INITIAL_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00047">res_pjsip_history.c:47</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a12d9cba0dfd29f12cf2f87a4ab1252e2"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a12d9cba0dfd29f12cf2f87a4ab1252e2">cachingpool</a></div><div class="ttdeci">static pj_caching_pool cachingpool</div><div class="ttdoc">Pool factory used by pjlib to allocate memory. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00050">res_pjsip_history.c:50</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa7a293fded020cfa58e506f1f81ac063"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7a293fded020cfa58e506f1f81ac063">&#9670;&nbsp;</a></span>pjsip_history_entry_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a>* pjsip_history_entry_alloc </td>
          <td>(</td>
          <td class="paramtype">pjsip_msg *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a <code><a class="el" href="../../da/d6b/structpjsip__history__entry.html" title="An item in the history. ">pjsip_history_entry</a></code> AO2 object. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The PJSIP message that this history entry wraps</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">An</td><td>AO2 <code><a class="el" href="../../da/d6b/structpjsip__history__entry.html" title="An item in the history. ">pjsip_history_entry</a></code> object on success </td></tr>
    <tr><td class="paramname">NULL</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00628">628</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00369">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00406">ao2_alloc_options</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00755">ast_atomic_fetchadd_int()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00050">cachingpool</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00073">pjsip_history_entry::msg</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00061">pjsip_history_entry::number</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00056">packet_number</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00605">pjsip_history_entry_dtor()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00071">pjsip_history_entry::pool</a>, and <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00065">pjsip_history_entry::timestamp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00726">history_on_rx_msg()</a>, and <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00692">history_on_tx_msg()</a>.</p>
<div class="fragment"><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;{</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a> *<a class="code" href="../../d3/d96/structentry.html">entry</a>;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;   entry = <a class="code" href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a>(<span class="keyword">sizeof</span>(*entry), <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a5db0d40fd38dddb27a9177f7bb9978b8">pjsip_history_entry_dtor</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>);</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;   <span class="keywordflow">if</span> (!entry) {</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;   }</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;   entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a7106e2abc437ad981830d14176d15f09">number</a> = <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a22bd7f0daa5994e6015f5614393fd8f7">packet_number</a>, 1);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;   entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a175ebf16736553ad076aefe3f02d180c">timestamp</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;   entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a175ebf16736553ad076aefe3f02d180c">timestamp</a>.tv_usec = 0;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;   entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a> = pj_pool_create(&amp;<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a12d9cba0dfd29f12cf2f87a4ab1252e2">cachingpool</a>.factory, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, PJSIP_POOL_RDATA_LEN,</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                                PJSIP_POOL_RDATA_INC, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;   <span class="keywordflow">if</span> (!entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>) {</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(entry, -1);</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;   }</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;   entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a1415d8a5f04cf4607aab5a9684809bbc">msg</a> = pjsip_msg_clone(entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, <a class="code" href="../../da/d6b/structpjsip__history__entry.html#a1415d8a5f04cf4607aab5a9684809bbc">msg</a>);</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;   <span class="keywordflow">if</span> (!entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a1415d8a5f04cf4607aab5a9684809bbc">msg</a>) {</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(entry, -1);</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;   }</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;   <span class="keywordflow">return</span> entry;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a22bd7f0daa5994e6015f5614393fd8f7"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a22bd7f0daa5994e6015f5614393fd8f7">packet_number</a></div><div class="ttdeci">static int packet_number</div><div class="ttdoc">Packet count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00056">res_pjsip_history.c:56</a></div></div>
<div class="ttc" id="structpjsip__history__entry_html_a7106e2abc437ad981830d14176d15f09"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html#a7106e2abc437ad981830d14176d15f09">pjsip_history_entry::number</a></div><div class="ttdeci">int number</div><div class="ttdoc">Packet number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00061">res_pjsip_history.c:61</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab3c44e28d661616129b7819069effe61"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a></div><div class="ttdeci">#define ao2_alloc_options(data_size, destructor_fn, options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00406">astobj2.h:406</a></div></div>
<div class="ttc" id="structpjsip__history__entry_html_a175ebf16736553ad076aefe3f02d180c"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html#a175ebf16736553ad076aefe3f02d180c">pjsip_history_entry::timestamp</a></div><div class="ttdeci">struct timeval timestamp</div><div class="ttdoc">Time the packet was transmitted/received. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00065">res_pjsip_history.c:65</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="lock_8h_html_a8a3bd496edfec04a95683ace66676200"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a></div><div class="ttdeci">int ast_atomic_fetchadd_int(volatile int *p, int v)</div><div class="ttdoc">Atomically add v to *p and return the previous value of *p. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00755">lock.h:755</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structpjsip__history__entry_html_a1415d8a5f04cf4607aab5a9684809bbc"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html#a1415d8a5f04cf4607aab5a9684809bbc">pjsip_history_entry::msg</a></div><div class="ttdeci">pjsip_msg * msg</div><div class="ttdoc">The actual SIP message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00073">res_pjsip_history.c:73</a></div></div>
<div class="ttc" id="structpjsip__history__entry_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pjsip_history_entry::pool</a></div><div class="ttdeci">pj_pool_t * pool</div><div class="ttdoc">Memory pool used to allocate msg. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00071">res_pjsip_history.c:71</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="structpjsip__history__entry_html"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a></div><div class="ttdoc">An item in the history. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00059">res_pjsip_history.c:59</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a5db0d40fd38dddb27a9177f7bb9978b8"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a5db0d40fd38dddb27a9177f7bb9978b8">pjsip_history_entry_dtor</a></div><div class="ttdeci">static void pjsip_history_entry_dtor(void *obj)</div><div class="ttdoc">AO2 destructor for pjsip_history_entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00605">res_pjsip_history.c:605</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a12d9cba0dfd29f12cf2f87a4ab1252e2"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a12d9cba0dfd29f12cf2f87a4ab1252e2">cachingpool</a></div><div class="ttdeci">static pj_caching_pool cachingpool</div><div class="ttdoc">Pool factory used by pjlib to allocate memory. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00050">res_pjsip_history.c:50</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5db0d40fd38dddb27a9177f7bb9978b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5db0d40fd38dddb27a9177f7bb9978b8">&#9670;&nbsp;</a></span>pjsip_history_entry_dtor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void pjsip_history_entry_dtor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>AO2 destructor for <code><a class="el" href="../../da/d6b/structpjsip__history__entry.html" title="An item in the history. ">pjsip_history_entry</a></code>. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00605">605</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00071">pjsip_history_entry::pool</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00628">pjsip_history_entry_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;{</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a> *<a class="code" href="../../d3/d96/structentry.html">entry</a> = obj;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;   <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>) {</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      <span class="comment">/* This mimics the behavior of pj_pool_safe_release</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment">       * which was introduced in pjproject 2.6.</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      pj_pool_t *temp_pool = entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      pj_pool_release(temp_pool);</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;   }</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structpjsip__history__entry_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pjsip_history_entry::pool</a></div><div class="ttdeci">pj_pool_t * pool</div><div class="ttdoc">Memory pool used to allocate msg. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00071">res_pjsip_history.c:71</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="structpjsip__history__entry_html"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a></div><div class="ttdoc">An item in the history. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00059">res_pjsip_history.c:59</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaac5c8b54f47d20af319c3c6d9e2c793"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaac5c8b54f47d20af319c3c6d9e2c793">&#9670;&nbsp;</a></span>pjsip_set_history()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* pjsip_set_history </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01311">1311</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00185">ast_cli_entry::args</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05138">ast_sip_push_task()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00779">clear_history_entries()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00053">enabled</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;{</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *what;</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;   <span class="keywordflow">if</span> (cmd == <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>) {</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;pjsip set history {on|off|clear}&quot;</span>;</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;         <span class="stringliteral">&quot;Usage: pjsip set history {on|off|clear}\n&quot;</span></div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;         <span class="stringliteral">&quot;       Enables/disables/clears the PJSIP history.\n\n&quot;</span></div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;         <span class="stringliteral">&quot;       Enabling the history will start recording transmitted/received\n&quot;</span></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;         <span class="stringliteral">&quot;       packets. Disabling the history will stop recording, but keep\n&quot;</span></div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;         <span class="stringliteral">&quot;       the already received packets. Clearing the history will wipe\n&quot;</span></div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;         <span class="stringliteral">&quot;       the received packets from memory.\n\n&quot;</span></div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;         <span class="stringliteral">&quot;       As the PJSIP history is maintained in memory, and includes\n&quot;</span></div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;         <span class="stringliteral">&quot;       all received/transmitted requests and responses, it should\n&quot;</span></div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;         <span class="stringliteral">&quot;       only be enabled for debugging purposes, and cleared when done.\n&quot;</span>;</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd == <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>) {</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;   }</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;   what = a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a> - 1];  <span class="comment">/* Guaranteed to exist */</span></div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">args</a>) {</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(what, <span class="stringliteral">&quot;on&quot;</span>)) {</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;         <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a> = 1;</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;PJSIP History enabled\n&quot;</span>);</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(what, <span class="stringliteral">&quot;off&quot;</span>)) {</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;         <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a> = 0;</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;PJSIP History disabled\n&quot;</span>);</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(what, <span class="stringliteral">&quot;clear&quot;</span>)) {</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;         <a class="code" href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#ad9981a2811458a9b5b695695d1551edc">clear_history_entries</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;PJSIP History cleared\n&quot;</span>);</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;      }</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;   }</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_ad9981a2811458a9b5b695695d1551edc"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#ad9981a2811458a9b5b695695d1551edc">clear_history_entries</a></div><div class="ttdeci">static int clear_history_entries(void *obj)</div><div class="ttdoc">Remove all entries from vector_history. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00779">res_pjsip_history.c:779</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__entry_html_a1bd7a8575ca2650132d636d65dcda2f6"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#a1bd7a8575ca2650132d636d65dcda2f6">ast_cli_entry::args</a></div><div class="ttdeci">int args</div><div class="ttdoc">This gets set in ast_cli_register() </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00185">cli.h:185</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="group__pjsip__threading_html_ga4f0a0629fa2ca084812772356d8e3565"><div class="ttname"><a href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a></div><div class="ttdeci">int ast_sip_push_task(struct ast_taskprocessor *serializer, int(*sip_task)(void *), void *task_data)</div><div class="ttdoc">Pushes a task to SIP servants. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05138">res_pjsip.c:5138</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a03e6cca0c879c0443efb431c30c14f76"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a03e6cca0c879c0443efb431c30c14f76">enabled</a></div><div class="ttdeci">static int enabled</div><div class="ttdoc">Whether or not we are storing history. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00053">res_pjsip_history.c:53</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a81c3d4617a7a937b7f0a9f0233333baf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81c3d4617a7a937b7f0a9f0233333baf">&#9670;&nbsp;</a></span>pjsip_show_history()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* pjsip_show_history </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01217">1217</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05138">ast_sip_push_task()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00046">CLI_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01183">display_entry_list()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01150">display_single_entry()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01097">filter_history()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00077">history_lock</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01206">safe_vector_cleanup()</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;{</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;   <span class="keyword">struct </span>vector_history_t *vec = &amp;vector_history;</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a> *<a class="code" href="../../d3/d96/structentry.html">entry</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;   <span class="keywordflow">if</span> (cmd == <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>) {</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;pjsip show history&quot;</span>;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;         <span class="stringliteral">&quot;Usage: pjsip show history [entry &lt;num&gt;|where [...]]\n&quot;</span></div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;         <span class="stringliteral">&quot;       Displays the currently collected history or an\n&quot;</span></div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;         <span class="stringliteral">&quot;       entry within the history.\n\n&quot;</span></div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;         <span class="stringliteral">&quot;       * Running the command with no options will display\n&quot;</span></div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;         <span class="stringliteral">&quot;         the entire history.\n&quot;</span></div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;         <span class="stringliteral">&quot;       * Providing &#39;entry &lt;num&gt;&#39; will display the full\n&quot;</span></div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;         <span class="stringliteral">&quot;         detail of a particular entry in this history.\n&quot;</span></div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;         <span class="stringliteral">&quot;       * Providing &#39;where ...&#39; will allow for filtering\n&quot;</span></div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;         <span class="stringliteral">&quot;         the history. The history can be filtered using\n&quot;</span></div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;         <span class="stringliteral">&quot;         any of the following fields:\n&quot;</span></div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;         <span class="stringliteral">&quot;         - number: The history entry number\n&quot;</span></div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;         <span class="stringliteral">&quot;         - timestamp: The time associated with the history entry\n&quot;</span></div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;         <span class="stringliteral">&quot;         - addr: The source/destination address of the SIP message\n&quot;</span></div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;         <span class="stringliteral">&quot;         - sip.msg.request.method: The request method type\n&quot;</span></div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;         <span class="stringliteral">&quot;         - sip.msg.call-id: The Call-ID header of the SIP message\n&quot;</span></div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;         <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;         <span class="stringliteral">&quot;         When filtering, standard Boolean operators can be used,\n&quot;</span></div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;         <span class="stringliteral">&quot;         as well as &#39;like&#39; for regexs.\n&quot;</span></div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;         <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;         <span class="stringliteral">&quot;         Example:\n&quot;</span></div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;         <span class="stringliteral">&quot;         &#39;pjsip show history where number &gt; 5 and (addr = \&quot;192.168.0.3:5060\&quot; or addr = \&quot;192.168.0.5:5060\&quot;)&#39;\n&quot;</span>;</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd == <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>) {</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;   }</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &gt; 3) {</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], <span class="stringliteral">&quot;entry&quot;</span>) &amp;&amp; a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 5) {</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;         <span class="keywordtype">int</span> num;</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;         <span class="keywordflow">if</span> (sscanf(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4], <span class="stringliteral">&quot;%30d&quot;</span>, &amp;num) != 1) {</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;            <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;&#39;%s&#39; is not a valid entry number\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4]);</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;         }</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;         <span class="comment">/* Get the entry at the provided position */</span></div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a82bf5ccf382917585b053ae736e897e0">history_lock</a>);</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;         <span class="keywordflow">if</span> (num &gt;= <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;vector_history) || num &lt; 0) {</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;            <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Entry &#39;%d&#39; does not exist\n&quot;</span>, num);</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;            <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a82bf5ccf382917585b053ae736e897e0">history_lock</a>);</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;         }</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;         entry = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(<a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;vector_history, num));</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a82bf5ccf382917585b053ae736e897e0">history_lock</a>);</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], <span class="stringliteral">&quot;where&quot;</span>)) {</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;         vec = <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#abad7f728cc7eb2065775e1b557bad826">filter_history</a>(a);</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;         <span class="keywordflow">if</span> (!vec) {</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;         }</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;      }</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;   }</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(vec) == 1) {</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;      <span class="keywordflow">if</span> (vec == &amp;vector_history) {</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a82bf5ccf382917585b053ae736e897e0">history_lock</a>);</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;      }</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;      entry = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(<a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(vec, 0));</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;      <span class="keywordflow">if</span> (vec == &amp;vector_history) {</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a82bf5ccf382917585b053ae736e897e0">history_lock</a>);</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;      }</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;   }</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;   <span class="keywordflow">if</span> (entry) {</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;      <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a580f623dbb99aff25f787742d7ac07e6">display_single_entry</a>(a, entry);</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;      <span class="keywordflow">if</span> (vec == &amp;vector_history) {</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a82bf5ccf382917585b053ae736e897e0">history_lock</a>);</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;      }</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;      <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#ac8f024dfb49c705ca65a6943ab5a54dc">display_entry_list</a>(a, vec);</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;      <span class="keywordflow">if</span> (vec == &amp;vector_history) {</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a82bf5ccf382917585b053ae736e897e0">history_lock</a>);</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;      }</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;   }</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;   <span class="keywordflow">if</span> (vec != &amp;vector_history) {</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;      <a class="code" href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a475418795353beb89382436ff7e50605">safe_vector_cleanup</a>, vec);</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;   }</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(entry);</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a82bf5ccf382917585b053ae736e897e0"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a82bf5ccf382917585b053ae736e897e0">history_lock</a></div><div class="ttdeci">static ast_mutex_t history_lock</div><div class="ttdoc">Mutex that protects vector_history. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00077">res_pjsip_history.c:77</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_abad7f728cc7eb2065775e1b557bad826"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#abad7f728cc7eb2065775e1b557bad826">filter_history</a></div><div class="ttdeci">static struct vector_history_t * filter_history(struct ast_cli_args *a)</div><div class="ttdoc">Create a filtered history based on a user provided expression. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l01097">res_pjsip_history.c:1097</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="group__pjsip__threading_html_ga4f0a0629fa2ca084812772356d8e3565"><div class="ttname"><a href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a></div><div class="ttdeci">int ast_sip_push_task(struct ast_taskprocessor *serializer, int(*sip_task)(void *), void *task_data)</div><div class="ttdoc">Pushes a task to SIP servants. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05138">res_pjsip.c:5138</a></div></div>
<div class="ttc" id="cli_8h_html_ae47751901c430ebb833e59291a5e0b3f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a></div><div class="ttdeci">#define CLI_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00046">cli.h:46</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_ac8f024dfb49c705ca65a6943ab5a54dc"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#ac8f024dfb49c705ca65a6943ab5a54dc">display_entry_list</a></div><div class="ttdeci">static void display_entry_list(struct ast_cli_args *a, struct vector_history_t *vec)</div><div class="ttdoc">Print a list of the entries to the CLI. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l01183">res_pjsip_history.c:1183</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a475418795353beb89382436ff7e50605"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a475418795353beb89382436ff7e50605">safe_vector_cleanup</a></div><div class="ttdeci">static int safe_vector_cleanup(void *obj)</div><div class="ttdoc">Cleanup routine for a history vector, serviced on a registered PJSIP thread. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l01206">res_pjsip_history.c:1206</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a580f623dbb99aff25f787742d7ac07e6"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a580f623dbb99aff25f787742d7ac07e6">display_single_entry</a></div><div class="ttdeci">static void display_single_entry(struct ast_cli_args *a, struct pjsip_history_entry *entry)</div><div class="ttdoc">Print a detailed view of a single entry in the history to the CLI. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l01150">res_pjsip_history.c:1150</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="structpjsip__history__entry_html"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a></div><div class="ttdoc">An item in the history. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00059">res_pjsip_history.c:59</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a475418795353beb89382436ff7e50605"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a475418795353beb89382436ff7e50605">&#9670;&nbsp;</a></span>safe_vector_cleanup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int safe_vector_cleanup </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Cleanup routine for a history vector, serviced on a registered PJSIP thread. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01206">1206</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00174">AST_VECTOR_FREE</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00627">AST_VECTOR_RESET</a>, and <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00769">clear_history_entry_cb()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01217">pjsip_show_history()</a>.</p>
<div class="fragment"><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;{</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;   <span class="keyword">struct </span>vector_history_t *vec = obj;</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a0e59aa540254f87575cb1d28821bbd1f">AST_VECTOR_RESET</a>(vec, <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a3b14a7d830c681b7510cbde873344179">clear_history_entry_cb</a>);</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(vec);</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(vec);</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;}</div><div class="ttc" id="vector_8h_html_a66aaa4efda59c52384b03c38e781124d"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a></div><div class="ttdeci">#define AST_VECTOR_FREE(vec)</div><div class="ttdoc">Deallocates this vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00174">vector.h:174</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="vector_8h_html_a0e59aa540254f87575cb1d28821bbd1f"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a0e59aa540254f87575cb1d28821bbd1f">AST_VECTOR_RESET</a></div><div class="ttdeci">#define AST_VECTOR_RESET(vec, cleanup)</div><div class="ttdoc">Reset vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00627">vector.h:627</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a3b14a7d830c681b7510cbde873344179"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a3b14a7d830c681b7510cbde873344179">clear_history_entry_cb</a></div><div class="ttdeci">static void clear_history_entry_cb(struct pjsip_history_entry *entry)</div><div class="ttdoc">Vector callback that releases the reference for the entry in a history vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00769">res_pjsip_history.c:769</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1f39bfdd8de136de40285efb6c6a47aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f39bfdd8de136de40285efb6c6a47aa">&#9670;&nbsp;</a></span>sprint_list_entry()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sprint_list_entry </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../da/d6b/structpjsip__history__entry.html">pjsip_history_entry</a> *&#160;</td>
          <td class="paramname"><em>entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Format single line history entry. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00657">657</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00069">pjsip_history_entry::dst</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00073">pjsip_history_entry::msg</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00061">pjsip_history_entry::number</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00067">pjsip_history_entry::src</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00065">pjsip_history_entry::timestamp</a>, and <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00063">pjsip_history_entry::transmitted</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01183">display_entry_list()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00726">history_on_rx_msg()</a>, and <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00692">history_on_tx_msg()</a>.</p>
<div class="fragment"><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;{</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;   <span class="keywordtype">char</span> addr[64];</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;   <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#ac7c25d4fe708a4c4b8dbcf70d608fe86">transmitted</a>) {</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      pj_sockaddr_print(&amp;entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#af1759e063d6d886b02648b8789e6e649">dst</a>, addr, <span class="keyword">sizeof</span>(addr), 3);</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      pj_sockaddr_print(&amp;entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a7ca68666103b1f73a75e5830b97aa1d0">src</a>, addr, <span class="keyword">sizeof</span>(addr), 3);</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;   }</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;   <span class="keywordflow">if</span> (entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a1415d8a5f04cf4607aab5a9684809bbc">msg</a>-&gt;type == PJSIP_REQUEST_MSG) {</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;      <span class="keywordtype">char</span> uri[128];</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;      pjsip_uri_print(PJSIP_URI_IN_REQ_URI, entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a1415d8a5f04cf4607aab5a9684809bbc">msg</a>-&gt;line.req.uri, uri, <span class="keyword">sizeof</span>(uri));</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;      snprintf(line, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, <span class="stringliteral">&quot;%-5.5d %-10.10ld %-5.5s %-24.24s %.*s %s SIP/2.0&quot;</span>,</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;         entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a7106e2abc437ad981830d14176d15f09">number</a>,</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;         entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a175ebf16736553ad076aefe3f02d180c">timestamp</a>.tv_sec,</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;         entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#ac7c25d4fe708a4c4b8dbcf70d608fe86">transmitted</a> ? <span class="stringliteral">&quot;* ==&gt;&quot;</span> : <span class="stringliteral">&quot;* &lt;==&quot;</span>,</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;         addr,</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;         (<span class="keywordtype">int</span>)pj_strlen(&amp;entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a1415d8a5f04cf4607aab5a9684809bbc">msg</a>-&gt;line.req.method.name),</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;         pj_strbuf(&amp;entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a1415d8a5f04cf4607aab5a9684809bbc">msg</a>-&gt;line.req.method.name),</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;         uri);</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      snprintf(line, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, <span class="stringliteral">&quot;%-5.5d %-10.10ld %-5.5s %-24.24s SIP/2.0 %u %.*s&quot;</span>,</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;         entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a7106e2abc437ad981830d14176d15f09">number</a>,</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;         entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a175ebf16736553ad076aefe3f02d180c">timestamp</a>.tv_sec,</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;         entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#ac7c25d4fe708a4c4b8dbcf70d608fe86">transmitted</a> ? <span class="stringliteral">&quot;* ==&gt;&quot;</span> : <span class="stringliteral">&quot;* &lt;==&quot;</span>,</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;         addr,</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;         entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a1415d8a5f04cf4607aab5a9684809bbc">msg</a>-&gt;line.status.code,</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;         (<span class="keywordtype">int</span>)pj_strlen(&amp;entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a1415d8a5f04cf4607aab5a9684809bbc">msg</a>-&gt;line.status.reason),</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;         pj_strbuf(&amp;entry-&gt;<a class="code" href="../../da/d6b/structpjsip__history__entry.html#a1415d8a5f04cf4607aab5a9684809bbc">msg</a>-&gt;line.status.reason));</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;   }</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;}</div><div class="ttc" id="structpjsip__history__entry_html_ac7c25d4fe708a4c4b8dbcf70d608fe86"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html#ac7c25d4fe708a4c4b8dbcf70d608fe86">pjsip_history_entry::transmitted</a></div><div class="ttdeci">int transmitted</div><div class="ttdoc">Whether or not we transmitted the packet. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00063">res_pjsip_history.c:63</a></div></div>
<div class="ttc" id="structpjsip__history__entry_html_af1759e063d6d886b02648b8789e6e649"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html#af1759e063d6d886b02648b8789e6e649">pjsip_history_entry::dst</a></div><div class="ttdeci">pj_sockaddr dst</div><div class="ttdoc">Destination address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00069">res_pjsip_history.c:69</a></div></div>
<div class="ttc" id="structpjsip__history__entry_html_a7106e2abc437ad981830d14176d15f09"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html#a7106e2abc437ad981830d14176d15f09">pjsip_history_entry::number</a></div><div class="ttdeci">int number</div><div class="ttdoc">Packet number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00061">res_pjsip_history.c:61</a></div></div>
<div class="ttc" id="structpjsip__history__entry_html_a175ebf16736553ad076aefe3f02d180c"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html#a175ebf16736553ad076aefe3f02d180c">pjsip_history_entry::timestamp</a></div><div class="ttdeci">struct timeval timestamp</div><div class="ttdoc">Time the packet was transmitted/received. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00065">res_pjsip_history.c:65</a></div></div>
<div class="ttc" id="structpjsip__history__entry_html_a7ca68666103b1f73a75e5830b97aa1d0"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html#a7ca68666103b1f73a75e5830b97aa1d0">pjsip_history_entry::src</a></div><div class="ttdeci">pj_sockaddr src</div><div class="ttdoc">Source address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00067">res_pjsip_history.c:67</a></div></div>
<div class="ttc" id="structpjsip__history__entry_html_a1415d8a5f04cf4607aab5a9684809bbc"><div class="ttname"><a href="../../da/d6b/structpjsip__history__entry.html#a1415d8a5f04cf4607aab5a9684809bbc">pjsip_history_entry::msg</a></div><div class="ttdeci">pjsip_msg * msg</div><div class="ttdoc">The actual SIP message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00073">res_pjsip_history.c:73</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01384">1384</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00030">ast_cli_unregister_multiple()</a>, <a class="el" href="../../d1/d22/logger_8c_source.html#l02536">ast_logger_unregister_level()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00317">AST_MODFLAG_LOAD_ORDER</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00328">AST_MODPRI_APP_DEPEND</a>, <a class="el" href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00122">AST_MODULE_SUPPORT_EXTENDED</a>, <a class="el" href="../../de/deb/res__pjproject_8c_source.html#l00472">ast_pjproject_caching_pool_destroy()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05204">ast_sip_push_task_wait_servant()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03331">ast_sip_unregister_service()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00174">AST_VECTOR_FREE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00046">ASTERISK_GPL_KEY</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00050">cachingpool</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00779">clear_history_entries()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01367">load_module()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00162">log_level</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01353">logging_module</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>
<div class="fragment"><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;{</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a>(<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a32e5e2d7b4752aa623264708b611dde1">cli_pjsip</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a32e5e2d7b4752aa623264708b611dde1">cli_pjsip</a>));</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;   <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a15aa09d9084763cdd20b7467a4cd381a">ast_sip_unregister_service</a>(&amp;<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a507fdf94a407446fae3d6e24e40c2119">logging_module</a>);</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;   <a class="code" href="../../d7/dfa/group__pjsip__threading.html#gab8c82412fe0432a91d5c7985cfdf9b59">ast_sip_push_task_wait_servant</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#ad9981a2811458a9b5b695695d1551edc">clear_history_entries</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(&amp;vector_history);</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;   <a class="code" href="../../df/dd5/res__pjproject_8h.html#a2ce5e75f8b8e29d166785477a5034ebd">ast_pjproject_caching_pool_destroy</a>(&amp;<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a12d9cba0dfd29f12cf2f87a4ab1252e2">cachingpool</a>);</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/dea/res__pjsip__history_8c.html#ab5a71c2541c377b3d5b34fdb35964c2e">log_level</a> != -1) {</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ae3d21782b3b66b21cda6d9e153545909">ast_logger_unregister_level</a>(<span class="stringliteral">&quot;PJSIP_HISTORY&quot;</span>);</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;   }</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;}</div><div class="ttc" id="vector_8h_html_a66aaa4efda59c52384b03c38e781124d"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a></div><div class="ttdeci">#define AST_VECTOR_FREE(vec)</div><div class="ttdoc">Deallocates this vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00174">vector.h:174</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="res__pjproject_8h_html_a2ce5e75f8b8e29d166785477a5034ebd"><div class="ttname"><a href="../../df/dd5/res__pjproject_8h.html#a2ce5e75f8b8e29d166785477a5034ebd">ast_pjproject_caching_pool_destroy</a></div><div class="ttdeci">void ast_pjproject_caching_pool_destroy(pj_caching_pool *cp)</div><div class="ttdoc">Destroy caching pool factory and all cached pools. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/deb/res__pjproject_8c_source.html#l00472">res_pjproject.c:472</a></div></div>
<div class="ttc" id="cli_8h_html_a56b6b59ee2eaa994597a5b0f4e9f9d09"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a></div><div class="ttdeci">int ast_cli_unregister_multiple(struct ast_cli_entry *e, int len)</div><div class="ttdoc">Unregister multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00030">clicompat.c:30</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_ad9981a2811458a9b5b695695d1551edc"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#ad9981a2811458a9b5b695695d1551edc">clear_history_entries</a></div><div class="ttdeci">static int clear_history_entries(void *obj)</div><div class="ttdoc">Remove all entries from vector_history. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00779">res_pjsip_history.c:779</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="group__pjsip__threading_html_gab8c82412fe0432a91d5c7985cfdf9b59"><div class="ttname"><a href="../../d7/dfa/group__pjsip__threading.html#gab8c82412fe0432a91d5c7985cfdf9b59">ast_sip_push_task_wait_servant</a></div><div class="ttdeci">int ast_sip_push_task_wait_servant(struct ast_taskprocessor *serializer, int(*sip_task)(void *), void *task_data)</div><div class="ttdoc">Push a task to SIP servants and wait for it to complete. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05204">res_pjsip.c:5204</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_ab5a71c2541c377b3d5b34fdb35964c2e"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#ab5a71c2541c377b3d5b34fdb35964c2e">log_level</a></div><div class="ttdeci">static int log_level</div><div class="ttdoc">Log level for history output. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00162">res_pjsip_history.c:162</a></div></div>
<div class="ttc" id="logger_8h_html_ae3d21782b3b66b21cda6d9e153545909"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ae3d21782b3b66b21cda6d9e153545909">ast_logger_unregister_level</a></div><div class="ttdeci">void ast_logger_unregister_level(const char *name)</div><div class="ttdoc">Unregister a previously registered logger level. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/logger_8c_source.html#l02536">logger.c:2536</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a507fdf94a407446fae3d6e24e40c2119"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a507fdf94a407446fae3d6e24e40c2119">logging_module</a></div><div class="ttdeci">static pjsip_module logging_module</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l01353">res_pjsip_history.c:1353</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a32e5e2d7b4752aa623264708b611dde1"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a32e5e2d7b4752aa623264708b611dde1">cli_pjsip</a></div><div class="ttdeci">static struct ast_cli_entry cli_pjsip[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l01362">res_pjsip_history.c:1362</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a15aa09d9084763cdd20b7467a4cd381a"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a15aa09d9084763cdd20b7467a4cd381a">ast_sip_unregister_service</a></div><div class="ttdeci">void ast_sip_unregister_service(pjsip_module *module)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03331">res_pjsip.c:3331</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_a12d9cba0dfd29f12cf2f87a4ab1252e2"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a12d9cba0dfd29f12cf2f87a4ab1252e2">cachingpool</a></div><div class="ttdeci">static pj_caching_pool cachingpool</div><div class="ttdoc">Pool factory used by pjlib to allocate memory. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l00050">res_pjsip_history.c:50</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;PJSIP History&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_EXTENDED, .load = load_module, .unload = unload_module, .load_pri = AST_MODPRI_APP_DEPEND, .requires = &quot;res_pjsip&quot;, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01407">1407</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

</div>
</div>
<a id="acfadc78153c5c7f0be2e598017217cc1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acfadc78153c5c7f0be2e598017217cc1">&#9670;&nbsp;</a></span>allowed_fields</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../df/d1c/structallowed__field.html">allowed_field</a> allowed_fields[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The fields we allow. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00513">513</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

</div>
</div>
<a id="a022074f480965710a6bb8d00b968c4de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a022074f480965710a6bb8d00b968c4de">&#9670;&nbsp;</a></span>allowed_operators</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct operator allowed_operators[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Our allowed operations. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00453">453</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01407">1407</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

</div>
</div>
<a id="a12d9cba0dfd29f12cf2f87a4ab1252e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12d9cba0dfd29f12cf2f87a4ab1252e2">&#9670;&nbsp;</a></span>cachingpool</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pj_caching_pool cachingpool</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pool factory used by pjlib to allocate memory. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00050">50</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01367">load_module()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00628">pjsip_history_entry_alloc()</a>, and <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01384">unload_module()</a>.</p>

</div>
</div>
<a id="a32e5e2d7b4752aa623264708b611dde1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32e5e2d7b4752aa623264708b611dde1">&#9670;&nbsp;</a></span>cli_pjsip</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> cli_pjsip[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   { .handler =  <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#aaac5c8b54f47d20af319c3c6d9e2c793">pjsip_set_history</a> , .summary =  <span class="stringliteral">&quot;Enable/Disable PJSIP History&quot;</span> ,},</div><div class="line">   { .handler =  <a class="code" href="../../d3/dea/res__pjsip__history_8c.html#a81c3d4617a7a937b7f0a9f0233333baf">pjsip_show_history</a> , .summary =  <span class="stringliteral">&quot;Display PJSIP History&quot;</span> ,},</div><div class="line">}</div><div class="ttc" id="res__pjsip__history_8c_html_a81c3d4617a7a937b7f0a9f0233333baf"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#a81c3d4617a7a937b7f0a9f0233333baf">pjsip_show_history</a></div><div class="ttdeci">static char * pjsip_show_history(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l01217">res_pjsip_history.c:1217</a></div></div>
<div class="ttc" id="res__pjsip__history_8c_html_aaac5c8b54f47d20af319c3c6d9e2c793"><div class="ttname"><a href="../../d3/dea/res__pjsip__history_8c.html#aaac5c8b54f47d20af319c3c6d9e2c793">pjsip_set_history</a></div><div class="ttdeci">static char * pjsip_set_history(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dea/res__pjsip__history_8c_source.html#l01311">res_pjsip_history.c:1311</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01362">1362</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

</div>
</div>
<a id="a03e6cca0c879c0443efb431c30c14f76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03e6cca0c879c0443efb431c30c14f76">&#9670;&nbsp;</a></span>enabled</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int enabled</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Whether or not we are storing history. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00053">53</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00726">history_on_rx_msg()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00692">history_on_tx_msg()</a>, and <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01311">pjsip_set_history()</a>.</p>

</div>
</div>
<a id="a82bf5ccf382917585b053ae736e897e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82bf5ccf382917585b053ae736e897e0">&#9670;&nbsp;</a></span>history_lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a> history_lock = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mutex that protects vector_history. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00077">77</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00779">clear_history_entries()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01097">filter_history()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00726">history_on_rx_msg()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00692">history_on_tx_msg()</a>, and <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01217">pjsip_show_history()</a>.</p>

</div>
</div>
<a id="ae9533fbb09b82c02cd194c2f8d1dfc0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9533fbb09b82c02cd194c2f8d1dfc0a">&#9670;&nbsp;</a></span>left_paren</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct operator left_paren</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .symbol = <span class="stringliteral">&quot;(&quot;</span>,</div><div class="line">   .precedence = 15</div><div class="line">}</div></div><!-- fragment -->
<p>Operator token for a left parenthesis. </p>
<p>While this is used by the shunting-yard algorithm implementation, it should never appear in the resulting RPN queue of expression tokens </p>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00445">445</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

</div>
</div>
<a id="ab5a71c2541c377b3d5b34fdb35964c2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5a71c2541c377b3d5b34fdb35964c2e">&#9670;&nbsp;</a></span>log_level</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int log_level = -1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Log level for history output. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00162">162</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00726">history_on_rx_msg()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00692">history_on_tx_msg()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01367">load_module()</a>, and <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01384">unload_module()</a>.</p>

</div>
</div>
<a id="a507fdf94a407446fae3d6e24e40c2119"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a507fdf94a407446fae3d6e24e40c2119">&#9670;&nbsp;</a></span>logging_module</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pjsip_module logging_module</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01353">1353</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01367">load_module()</a>, and <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l01384">unload_module()</a>.</p>

</div>
</div>
<a id="a22bd7f0daa5994e6015f5614393fd8f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22bd7f0daa5994e6015f5614393fd8f7">&#9670;&nbsp;</a></span>packet_number</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int packet_number</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Packet count. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00056">56</a> of file <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html">res_pjsip_history.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00779">clear_history_entries()</a>, and <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00628">pjsip_history_entry_alloc()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:31 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
