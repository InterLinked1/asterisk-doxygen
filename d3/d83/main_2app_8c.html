<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: app.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">main/app.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Convenient Application Routines.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;regex.h&gt;</code><br />
<code>#include &lt;sys/file.h&gt;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;sys/wait.h&gt;</code><br />
<code>#include &lt;dirent.h&gt;</code><br />
<code>#include &lt;sys/capability.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../dd/df2/paths_8h_source.html">asterisk/paths.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d7b/channel_8h_source.html">asterisk/channel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/de0/pbx_8h_source.html">asterisk/pbx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d4d/file_8h_source.html">asterisk/file.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html">asterisk/app.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d08/dsp_8h_source.html">asterisk/dsp.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d60/utils_8h_source.html">asterisk/utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d42/lock_8h_source.html">asterisk/lock.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d0f/indications_8h_source.html">asterisk/indications.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/d90/linkedlists_8h_source.html">asterisk/linkedlists.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d7d/threadstorage_8h_source.html">asterisk/threadstorage.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/ddc/test_8h_source.html">asterisk/test.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/da5/astobj2_8h_source.html">asterisk/astobj2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d79/stasis_8h_source.html">asterisk/stasis.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/d4a/stasis__channels_8h_source.html">asterisk/stasis_channels.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d05/json_8h_source.html">asterisk/json.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d1c/format__cache_8h_source.html">asterisk/format_cache.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for main/app.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/d46/main_2app_8c__incl.png" border="0" usemap="#app_8c" alt=""/></div>
<map name="app_8c" id="app_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="374,453,458,480"/>
<area shape="rect" id="node15" href="../../dd/df2/paths_8h.html" title="Asterisk file paths, configured in asterisk.conf. " alt="" coords="889,80,1013,107"/>
<area shape="rect" id="node16" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1411,155,1549,181"/>
<area shape="rect" id="node18" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="2313,379,2428,405"/>
<area shape="rect" id="node19" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="826,453,939,480"/>
<area shape="rect" id="node22" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="749,304,883,331"/>
<area shape="rect" id="node23" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="895,379,1046,405"/>
<area shape="rect" id="node35" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="2596,229,2721,256"/>
<area shape="rect" id="node36" href="../../d4/d05/json_8h.html" title="Asterisk JSON abstraction layer. " alt="" coords="2545,304,2660,331"/>
<area shape="rect" id="node38" href="../../db/de0/pbx_8h.html" title="Core PBX routines and definitions. " alt="" coords="1190,80,1301,107"/>
<area shape="rect" id="node42" href="../../d2/d4d/file_8h.html" title="Generic File Format Support. Should be included by clients of the file handling routines. File service providers should instead include mod_format.h. " alt="" coords="3151,229,3257,256"/>
<area shape="rect" id="node43" href="../../d3/d93/include_2asterisk_2app_8h.html" title="Application convenience functions, designed to give consistent look and feel to Asterisk apps..." alt="" coords="2847,155,2959,181"/>
<area shape="rect" id="node44" href="../../dc/d7d/threadstorage_8h.html" title="Definitions to aid in the use of thread local storage. " alt="" coords="2897,229,3076,256"/>
<area shape="rect" id="node45" href="../../d3/d08/dsp_8h.html" title="Convenient Signal Processing routines. " alt="" coords="2847,80,2958,107"/>
<area shape="rect" id="node46" href="../../d2/d0f/indications_8h.html" title="Tone Indication Support. " alt="" coords="2139,229,2295,256"/>
<area shape="rect" id="node47" href="../../d2/ddc/test_8h.html" title="Test Framework API. " alt="" coords="3034,80,3147,107"/>
<area shape="rect" id="node48" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="3224,155,3360,181"/>
<area shape="rect" id="node49" href="../../d9/d4a/stasis__channels_8h.html" title="asterisk/stasis_channels.h" alt="" coords="2583,80,2772,107"/>
<area shape="rect" id="node50" href="../../db/d1c/format__cache_8h.html" title="Media Format Cache API. " alt="" coords="3273,80,3449,107"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="281,528,436,555"/>
<area shape="rect" id="node4" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="461,528,598,555"/>
<area shape="rect" id="node7" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="122,528,257,555"/>
<area shape="rect" id="node17" href="../../dc/d4d/alertpipe_8h.html" title="asterisk/alertpipe.h" alt="" coords="1936,304,2080,331"/>
<area shape="rect" id="node20" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="2292,453,2449,480"/>
<area shape="rect" id="node21" href="../../dc/d14/abstract__jb_8h.html" title="Common implementation&#45;independent jitterbuffer stuff. " alt="" coords="811,229,970,256"/>
<area shape="rect" id="node24" href="../../d4/dfb/poll-compat_8h.html" title="asterisk/poll&#45;compat.h" alt="" coords="1227,229,1391,256"/>
<area shape="rect" id="node25" href="../../d6/d66/include_2asterisk_2frame_8h.html" title="Asterisk internal frame definitions. " alt="" coords="1097,304,1223,331"/>
<area shape="rect" id="node26" href="../../d9/de7/chanvars_8h.html" title="Channel Variables. " alt="" coords="589,229,736,256"/>
<area shape="rect" id="node27" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="2105,304,2231,331"/>
<area shape="rect" id="node28" href="../../dc/d07/cdr_8h.html" title="Call Detail Record API. " alt="" coords="1517,229,1624,256"/>
<area shape="rect" id="node29" href="../../d9/db6/datastore_8h.html" title="Asterisk datastore objects. " alt="" coords="1326,304,1477,331"/>
<area shape="rect" id="node30" href="../../d0/d3c/format__cap_8h.html" title="Format Capabilities API. " alt="" coords="1649,229,1810,256"/>
<area shape="rect" id="node31" href="../../d9/d95/channelstate_8h.html" title="Channel states. " alt="" coords="360,379,531,405"/>
<area shape="rect" id="node32" href="../../de/dc8/ccss_8h.html" title="Call Completion Supplementary Services API. " alt="" coords="398,229,514,256"/>
<area shape="rect" id="node34" href="../../db/d3c/framehook_8h.html" title="FrameHook Architecture. " alt="" coords="1045,229,1203,256"/>
<area shape="rect" id="node37" href="../../d4/d61/endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="2319,229,2470,256"/>
<area shape="rect" id="node33" href="../../da/da2/devicestate_8h.html" title="Device state management. " alt="" coords="397,304,560,331"/>
<area shape="rect" id="node39" href="../../d7/d00/sched_8h.html" title="Scheduler Routines (derived from cheops) " alt="" coords="1030,155,1157,181"/>
<area shape="rect" id="node40" href="../../d6/dd7/presencestate_8h.html" title="Presence state management. " alt="" coords="1181,155,1361,181"/>
<area shape="rect" id="node41" href="../../d6/da0/hashtab_8h.html" title="Generic (perhaps overly so) hashtable implementation Hash Table support in Asterisk. " alt="" coords="195,379,335,405"/>
</map>
</div>
</div>
<p><a href="../../d3/d83/main_2app_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d28/structgroups.html">groups</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d07/structlinear__state.html">linear_state</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../da/da7/structpath__lock.html">path_lock</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d9f/structpath__lock__list.html">path_lock_list</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/dee/structzombie.html">zombie</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d57/structzombies.html">zombies</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aa932272aad0c1610b79e9b04e54e57ea"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#aa932272aad0c1610b79e9b04e54e57ea">AST_MAX_FORMATS</a>&#160;&#160;&#160;10</td></tr>
<tr class="separator:aa932272aad0c1610b79e9b04e54e57ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dfb8ef0d04e938194da60b4420c7517"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a3dfb8ef0d04e938194da60b4420c7517">FMT</a>&#160;&#160;&#160;&quot;%30Lf%9s&quot;</td></tr>
<tr class="separator:a3dfb8ef0d04e938194da60b4420c7517"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac68f484b9b363ef1c76def178529aadf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#ac68f484b9b363ef1c76def178529aadf">RES_EXIT</a>&#160;&#160;&#160;(1 &lt;&lt; 17)</td></tr>
<tr class="separator:ac68f484b9b363ef1c76def178529aadf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add236e92599b4e2157db3bb1fc4a2757"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#add236e92599b4e2157db3bb1fc4a2757">RES_REPEAT</a>&#160;&#160;&#160;(1 &lt;&lt; 18)</td></tr>
<tr class="separator:add236e92599b4e2157db3bb1fc4a2757"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe510b02adee23bac957dd9db3333dba"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#afe510b02adee23bac957dd9db3333dba">RES_RESTART</a>&#160;&#160;&#160;((1 &lt;&lt; 19) | <a class="el" href="../../d3/d83/main_2app_8c.html#add236e92599b4e2157db3bb1fc4a2757">RES_REPEAT</a>)</td></tr>
<tr class="separator:afe510b02adee23bac957dd9db3333dba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99e8fc9c191dce9a869c02541d31d178"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a99e8fc9c191dce9a869c02541d31d178">RES_UPONE</a>&#160;&#160;&#160;(1 &lt;&lt; 16)</td></tr>
<tr class="separator:a99e8fc9c191dce9a869c02541d31d178"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12c075dae5bb61a239b853abf865fd67"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a12c075dae5bb61a239b853abf865fd67">VM_API_CALL</a>(res,  api_call,  api_parms)</td></tr>
<tr class="separator:a12c075dae5bb61a239b853abf865fd67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83280de5f04985d9f2f1c2485ae5d906"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a83280de5f04985d9f2f1c2485ae5d906">VM_GREETER_API_CALL</a>(res,  api_call,  api_parms)</td></tr>
<tr class="separator:a83280de5f04985d9f2f1c2485ae5d906"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a8a71094a6fa4c99ee8ba96185eab3ea5"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a8a71094a6fa4c99ee8ba96185eab3ea5">control_tone_frame_response_result</a> { <a class="el" href="../../d3/d83/main_2app_8c.html#a8a71094a6fa4c99ee8ba96185eab3ea5a44b954d1e48690a36cb2e1a054132635">CONTROL_TONE_RESPONSE_FAILED</a> = -1, 
<a class="el" href="../../d3/d83/main_2app_8c.html#a8a71094a6fa4c99ee8ba96185eab3ea5a5818a4ce31515b52e000e1050d93c8c6">CONTROL_TONE_RESPONSE_NORMAL</a> = 0, 
<a class="el" href="../../d3/d83/main_2app_8c.html#a8a71094a6fa4c99ee8ba96185eab3ea5aefb1f436a8fb0238eb8c6dcb092431f5">CONTROL_TONE_RESPONSE_FINISHED</a> = 1
 }</td></tr>
<tr class="separator:a8a71094a6fa4c99ee8ba96185eab3ea5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a1b65265bef5e0d7110092144ba9ee4da"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a1b65265bef5e0d7110092144ba9ee4da">__ast_app_separate_args</a> (char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, char delim, int remove_chars, char **<a class="el" href="../../d9/d1e/func__strings_8c.html#ab6e308b3a41c01e08d252e071511495c">array</a>, int arraylen)</td></tr>
<tr class="memdesc:a1b65265bef5e0d7110092144ba9ee4da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Separate a string into arguments in an array.  <a href="#a1b65265bef5e0d7110092144ba9ee4da">More...</a><br /></td></tr>
<tr class="separator:a1b65265bef5e0d7110092144ba9ee4da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62eed141a738ca542b4373a0b078e431"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a62eed141a738ca542b4373a0b078e431">__ast_play_and_record</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *playfile, const char *recordfile, int maxtime, const char *fmt, int *duration, int *sound_duration, int beep, int <a class="el" href="../../da/d45/chan__alsa_8c.html#abebd9f51e7ff2f4d68f3952210219b4e">silencethreshold</a>, int <a class="el" href="../../dc/df4/app__voicemail_8c.html#ad87fa9ba37f50714bc922335b3b7ea91">maxsilence</a>, const char *path, int prepend, const char *acceptdtmf, const char *canceldtmf, int skip_confirmation_sound, enum <a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#ac665722c9bfe6d9b506df95184aa236d">ast_record_if_exists</a> if_exists)</td></tr>
<tr class="separator:a62eed141a738ca542b4373a0b078e431"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0354eb3cde675cc872e2e445ad7de7d7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a0354eb3cde675cc872e2e445ad7de7d7">__ast_vm_greeter_register</a> (const struct <a class="el" href="../../d0/d1e/structast__vm__greeter__functions.html">ast_vm_greeter_functions</a> *<a class="el" href="../../d2/d94/res__mwi__external_8c.html#a20bc535b35844236bae4c89b484435c5">vm_table</a>, struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *module)</td></tr>
<tr class="memdesc:a0354eb3cde675cc872e2e445ad7de7d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set voicemail greeter function callbacks.  <a href="#a0354eb3cde675cc872e2e445ad7de7d7">More...</a><br /></td></tr>
<tr class="separator:a0354eb3cde675cc872e2e445ad7de7d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ab8f4fb96c8ae6e8a04d9dcd30f160b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a1ab8f4fb96c8ae6e8a04d9dcd30f160b">__ast_vm_register</a> (const struct <a class="el" href="../../df/d7c/structast__vm__functions.html">ast_vm_functions</a> *<a class="el" href="../../d2/d94/res__mwi__external_8c.html#a20bc535b35844236bae4c89b484435c5">vm_table</a>, struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *module)</td></tr>
<tr class="memdesc:a1ab8f4fb96c8ae6e8a04d9dcd30f160b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set voicemail function callbacks.  <a href="#a1ab8f4fb96c8ae6e8a04d9dcd30f160b">More...</a><br /></td></tr>
<tr class="separator:a1ab8f4fb96c8ae6e8a04d9dcd30f160b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba1706218d4c0220a263a5e8b07c8f2c"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#aba1706218d4c0220a263a5e8b07c8f2c">AO2_GLOBAL_OBJ_STATIC</a> (vm_provider)</td></tr>
<tr class="memdesc:aba1706218d4c0220a263a5e8b07c8f2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">The container for the voicemail provider.  <a href="#aba1706218d4c0220a263a5e8b07c8f2c">More...</a><br /></td></tr>
<tr class="separator:aba1706218d4c0220a263a5e8b07c8f2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c44cd15ab364586b066ec58eca1f13e"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a1c44cd15ab364586b066ec58eca1f13e">AO2_GLOBAL_OBJ_STATIC</a> (vm_provider_holder)</td></tr>
<tr class="memdesc:a1c44cd15ab364586b066ec58eca1f13e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holding container for the voicemail provider used while testing.  <a href="#a1c44cd15ab364586b066ec58eca1f13e">More...</a><br /></td></tr>
<tr class="separator:a1c44cd15ab364586b066ec58eca1f13e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01a381cedccc84e6e5480064e4ce7893"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a01a381cedccc84e6e5480064e4ce7893">AO2_GLOBAL_OBJ_STATIC</a> (vm_greeter_provider)</td></tr>
<tr class="memdesc:a01a381cedccc84e6e5480064e4ce7893"><td class="mdescLeft">&#160;</td><td class="mdescRight">The container for the voicemail greeter provider.  <a href="#a01a381cedccc84e6e5480064e4ce7893">More...</a><br /></td></tr>
<tr class="separator:a01a381cedccc84e6e5480064e4ce7893"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ed4aae8b86b928d2c0e0b84db9f5a15"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a7ed4aae8b86b928d2c0e0b84db9f5a15">app_cleanup</a> (void)</td></tr>
<tr class="separator:a7ed4aae8b86b928d2c0e0b84db9f5a15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e2efabbeb1c8c68790bb90ce01c4578"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a2e2efabbeb1c8c68790bb90ce01c4578">app_init</a> (void)</td></tr>
<tr class="memdesc:a2e2efabbeb1c8c68790bb90ce01c4578"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the application core.  <a href="#a2e2efabbeb1c8c68790bb90ce01c4578">More...</a><br /></td></tr>
<tr class="separator:a2e2efabbeb1c8c68790bb90ce01c4578"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f71d68f1b317e6d4ad5f8f820d4b50a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a9f71d68f1b317e6d4ad5f8f820d4b50a">ast_app_copy_recording_to_vm</a> (struct <a class="el" href="../../df/d45/structast__vm__recording__data.html">ast_vm_recording_data</a> *vm_rec_data)</td></tr>
<tr class="memdesc:a9f71d68f1b317e6d4ad5f8f820d4b50a"><td class="mdescLeft">&#160;</td><td class="mdescRight">param[in] vm_rec_data Contains data needed to make the recording. retval 0 voicemail successfully created from recording. retval -1 Failure  <a href="#a9f71d68f1b317e6d4ad5f8f820d4b50a">More...</a><br /></td></tr>
<tr class="separator:a9f71d68f1b317e6d4ad5f8f820d4b50a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4825b337b9cd145a059852ce85ec6cd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#af4825b337b9cd145a059852ce85ec6cd">ast_app_dtget</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *<a class="el" href="../../da/dde/chan__phone_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, char *collect, size_t size, int maxlen, int <a class="el" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>)</td></tr>
<tr class="memdesc:af4825b337b9cd145a059852ce85ec6cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function presents a dialtone and reads an extension into 'collect' which must be a pointer to a <b>pre-initialized</b> array of char having a size of 'size' suitable for writing to. It will collect no more than the smaller of 'maxlen' or 'size' minus the original strlen() of collect digits.  <a href="#af4825b337b9cd145a059852ce85ec6cd">More...</a><br /></td></tr>
<tr class="separator:af4825b337b9cd145a059852ce85ec6cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf3af8d672383b48d194deb468074cbe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#aaf3af8d672383b48d194deb468074cbe">ast_app_exec_macro</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *autoservice_chan, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *macro_chan, const char *macro_args)</td></tr>
<tr class="memdesc:aaf3af8d672383b48d194deb468074cbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run a macro on a channel, placing an optional second channel into autoservice.  <a href="#aaf3af8d672383b48d194deb468074cbe">More...</a><br /></td></tr>
<tr class="separator:aaf3af8d672383b48d194deb468074cbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee5e20694b04eee43463fde6cf121d06"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#aee5e20694b04eee43463fde6cf121d06">ast_app_exec_sub</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *autoservice_chan, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *sub_chan, const char *sub_args, int <a class="el" href="../../de/d26/app__externalivr_8c.html#ad7e8792fbe134499827a9171f0f6491ea96a84a93b0268cefea3c2be2d521e2c5">ignore_hangup</a>)</td></tr>
<tr class="memdesc:aee5e20694b04eee43463fde6cf121d06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run a subroutine on a channel, placing an optional second channel into autoservice.  <a href="#aee5e20694b04eee43463fde6cf121d06">More...</a><br /></td></tr>
<tr class="separator:aee5e20694b04eee43463fde6cf121d06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a168653d77787b51d3447e5e80d42bb"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a1a168653d77787b51d3447e5e80d42bb">ast_app_expand_sub_args</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>)</td></tr>
<tr class="memdesc:a1a168653d77787b51d3447e5e80d42bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add missing context/exten to subroutine argument string.  <a href="#a1a168653d77787b51d3447e5e80d42bb">More...</a><br /></td></tr>
<tr class="separator:a1a168653d77787b51d3447e5e80d42bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d7f1014795ff9db542b44fbf4a83ce1"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#a10624bc470a4ac2634221dfa74bdb17f">ast_getdata_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a5d7f1014795ff9db542b44fbf4a83ce1">ast_app_getdata</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>, const char *<a class="el" href="../../d5/d03/asterisk_8c.html#a299365a3d8977a6c410c6cd924e33136">prompt</a>, char *s, int maxlen, int <a class="el" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>)</td></tr>
<tr class="memdesc:a5d7f1014795ff9db542b44fbf4a83ce1"><td class="mdescLeft">&#160;</td><td class="mdescRight">ast_app_getdata  <a href="#a5d7f1014795ff9db542b44fbf4a83ce1">More...</a><br /></td></tr>
<tr class="separator:a5d7f1014795ff9db542b44fbf4a83ce1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a102e325938d4d6617af28b7f1afce7ef"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a102e325938d4d6617af28b7f1afce7ef">ast_app_getdata_full</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>, const char *<a class="el" href="../../d5/d03/asterisk_8c.html#a299365a3d8977a6c410c6cd924e33136">prompt</a>, char *s, int maxlen, int <a class="el" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>, int audiofd, int ctrlfd)</td></tr>
<tr class="memdesc:a102e325938d4d6617af28b7f1afce7ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Full version with audiofd and controlfd. NOTE: returns '2' on ctrlfd available, not '1' like other full functions.  <a href="#a102e325938d4d6617af28b7f1afce7ef">More...</a><br /></td></tr>
<tr class="separator:a102e325938d4d6617af28b7f1afce7ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add0f96b4b815205f528f5248ccb3d515"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#add0f96b4b815205f528f5248ccb3d515">ast_app_group_discard</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</td></tr>
<tr class="memdesc:add0f96b4b815205f528f5248ccb3d515"><td class="mdescLeft">&#160;</td><td class="mdescRight">Discard all group counting for a channel.  <a href="#add0f96b4b815205f528f5248ccb3d515">More...</a><br /></td></tr>
<tr class="separator:add0f96b4b815205f528f5248ccb3d515"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a026ae712c21ad8f1e8cde66467153838"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a026ae712c21ad8f1e8cde66467153838">ast_app_group_get_count</a> (const char *<a class="el" href="../../d3/d08/structgroup.html">group</a>, const char *category)</td></tr>
<tr class="memdesc:a026ae712c21ad8f1e8cde66467153838"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current channel count of the specified group and category.  <a href="#a026ae712c21ad8f1e8cde66467153838">More...</a><br /></td></tr>
<tr class="separator:a026ae712c21ad8f1e8cde66467153838"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae351dc6f23997a800e7a743d6411b8e7"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d0/d07/structast__group__info.html">ast_group_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#ae351dc6f23997a800e7a743d6411b8e7">ast_app_group_list_head</a> (void)</td></tr>
<tr class="memdesc:ae351dc6f23997a800e7a743d6411b8e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the head of the group count list.  <a href="#ae351dc6f23997a800e7a743d6411b8e7">More...</a><br /></td></tr>
<tr class="separator:ae351dc6f23997a800e7a743d6411b8e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa354da7388ee1882ac981396f143bda"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#afa354da7388ee1882ac981396f143bda">ast_app_group_list_rdlock</a> (void)</td></tr>
<tr class="memdesc:afa354da7388ee1882ac981396f143bda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read Lock the group count list.  <a href="#afa354da7388ee1882ac981396f143bda">More...</a><br /></td></tr>
<tr class="separator:afa354da7388ee1882ac981396f143bda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3d01e65e04cddfa84781590b37732e8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#aa3d01e65e04cddfa84781590b37732e8">ast_app_group_list_unlock</a> (void)</td></tr>
<tr class="memdesc:aa3d01e65e04cddfa84781590b37732e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlock the group count list.  <a href="#aa3d01e65e04cddfa84781590b37732e8">More...</a><br /></td></tr>
<tr class="separator:aa3d01e65e04cddfa84781590b37732e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d1783b818b130e529c611e710beafe9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a6d1783b818b130e529c611e710beafe9">ast_app_group_list_wrlock</a> (void)</td></tr>
<tr class="memdesc:a6d1783b818b130e529c611e710beafe9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write Lock the group count list.  <a href="#a6d1783b818b130e529c611e710beafe9">More...</a><br /></td></tr>
<tr class="separator:a6d1783b818b130e529c611e710beafe9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a687e664c7fb3bb2acb4f5fa17f28d3a2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a687e664c7fb3bb2acb4f5fa17f28d3a2">ast_app_group_match_get_count</a> (const char *groupmatch, const char *category)</td></tr>
<tr class="memdesc:a687e664c7fb3bb2acb4f5fa17f28d3a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current channel count of all groups that match the specified pattern and category.  <a href="#a687e664c7fb3bb2acb4f5fa17f28d3a2">More...</a><br /></td></tr>
<tr class="separator:a687e664c7fb3bb2acb4f5fa17f28d3a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bd3fac13a76cd864600a84ffd66724e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a6bd3fac13a76cd864600a84ffd66724e">ast_app_group_set_channel</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *data)</td></tr>
<tr class="memdesc:a6bd3fac13a76cd864600a84ffd66724e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the group for a channel, splitting the provided data into group and category, if specified.  <a href="#a6bd3fac13a76cd864600a84ffd66724e">More...</a><br /></td></tr>
<tr class="separator:a6bd3fac13a76cd864600a84ffd66724e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab926dd29fc418cde5b67a00ba914cd2c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#ab926dd29fc418cde5b67a00ba914cd2c">ast_app_group_split_group</a> (const char *data, char *<a class="el" href="../../d3/d08/structgroup.html">group</a>, int group_max, char *category, int category_max)</td></tr>
<tr class="memdesc:ab926dd29fc418cde5b67a00ba914cd2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Split a group string into group and category, returning a default category if none is provided.  <a href="#ab926dd29fc418cde5b67a00ba914cd2c">More...</a><br /></td></tr>
<tr class="separator:ab926dd29fc418cde5b67a00ba914cd2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3411b27185b9133f3084fa2de8cc4260"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a3411b27185b9133f3084fa2de8cc4260">ast_app_group_update</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *old, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *new)</td></tr>
<tr class="memdesc:a3411b27185b9133f3084fa2de8cc4260"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update all group counting for a channel to a new one.  <a href="#a3411b27185b9133f3084fa2de8cc4260">More...</a><br /></td></tr>
<tr class="separator:a3411b27185b9133f3084fa2de8cc4260"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76b4d3927cacd1bcd5da9ca8fe375cb6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a76b4d3927cacd1bcd5da9ca8fe375cb6">ast_app_has_voicemail</a> (const char *<a class="el" href="../../d0/dd5/res__ari__mailboxes_8c.html#a29d08f8b2448744d75ca9ebc4e218419">mailboxes</a>, const char *folder)</td></tr>
<tr class="memdesc:a76b4d3927cacd1bcd5da9ca8fe375cb6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if a given mailbox has any voicemail If folder is NULL, defaults to "INBOX". If folder is "INBOX", includes the number of messages in the "Urgent" folder.  <a href="#a76b4d3927cacd1bcd5da9ca8fe375cb6">More...</a><br /></td></tr>
<tr class="separator:a76b4d3927cacd1bcd5da9ca8fe375cb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab45a61007ccd8ca2ea062f42b83b18ff"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#ab45a61007ccd8ca2ea062f42b83b18ff">ast_app_inboxcount</a> (const char *<a class="el" href="../../d0/dd5/res__ari__mailboxes_8c.html#a29d08f8b2448744d75ca9ebc4e218419">mailboxes</a>, int *newmsgs, int *oldmsgs)</td></tr>
<tr class="memdesc:ab45a61007ccd8ca2ea062f42b83b18ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine number of new/old messages in a mailbox.  <a href="#ab45a61007ccd8ca2ea062f42b83b18ff">More...</a><br /></td></tr>
<tr class="separator:ab45a61007ccd8ca2ea062f42b83b18ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace2a3d783f4f79818e14265ae719f06c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#ace2a3d783f4f79818e14265ae719f06c">ast_app_inboxcount2</a> (const char *<a class="el" href="../../d0/dd5/res__ari__mailboxes_8c.html#a29d08f8b2448744d75ca9ebc4e218419">mailboxes</a>, int *urgentmsgs, int *newmsgs, int *oldmsgs)</td></tr>
<tr class="memdesc:ace2a3d783f4f79818e14265ae719f06c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine number of urgent/new/old messages in a mailbox.  <a href="#ace2a3d783f4f79818e14265ae719f06c">More...</a><br /></td></tr>
<tr class="separator:ace2a3d783f4f79818e14265ae719f06c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16254e1237610f11047a7558bbe1f207"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a16254e1237610f11047a7558bbe1f207">ast_app_messagecount</a> (const char *mailbox_id, const char *folder)</td></tr>
<tr class="memdesc:a16254e1237610f11047a7558bbe1f207"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of messages in a given mailbox folder.  <a href="#a16254e1237610f11047a7558bbe1f207">More...</a><br /></td></tr>
<tr class="separator:a16254e1237610f11047a7558bbe1f207"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc36d870f1a77a726a74f4891f1365d3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#adc36d870f1a77a726a74f4891f1365d3">ast_app_options2str64</a> (const struct <a class="el" href="../../d2/d8d/structast__app__option.html">ast_app_option</a> *<a class="el" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>, struct <a class="el" href="../../d5/d10/structast__flags64.html">ast_flags64</a> *flags, char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size_t <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>)</td></tr>
<tr class="memdesc:adc36d870f1a77a726a74f4891f1365d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a list of options array, return an option string based on passed flags.  <a href="#adc36d870f1a77a726a74f4891f1365d3">More...</a><br /></td></tr>
<tr class="separator:adc36d870f1a77a726a74f4891f1365d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af40039f1c49c16d0f6fa33fe9c43a0cb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#af40039f1c49c16d0f6fa33fe9c43a0cb">ast_app_parse_options</a> (const struct <a class="el" href="../../d2/d8d/structast__app__option.html">ast_app_option</a> *<a class="el" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>, struct <a class="el" href="../../dc/dac/structast__flags.html">ast_flags</a> *flags, char **<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, char *optstr)</td></tr>
<tr class="memdesc:af40039f1c49c16d0f6fa33fe9c43a0cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses a string containing application options and sets flags/arguments.  <a href="#af40039f1c49c16d0f6fa33fe9c43a0cb">More...</a><br /></td></tr>
<tr class="separator:af40039f1c49c16d0f6fa33fe9c43a0cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af85cb9dfd2fea9cfe820d2323c7dd471"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#af85cb9dfd2fea9cfe820d2323c7dd471">ast_app_parse_options64</a> (const struct <a class="el" href="../../d2/d8d/structast__app__option.html">ast_app_option</a> *<a class="el" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>, struct <a class="el" href="../../d5/d10/structast__flags64.html">ast_flags64</a> *flags, char **<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, char *optstr)</td></tr>
<tr class="memdesc:af85cb9dfd2fea9cfe820d2323c7dd471"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses a string containing application options and sets flags/arguments.  <a href="#af85cb9dfd2fea9cfe820d2323c7dd471">More...</a><br /></td></tr>
<tr class="separator:af85cb9dfd2fea9cfe820d2323c7dd471"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b1abdb422e1ea79c303f7bcb3f4ff6d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a4b1abdb422e1ea79c303f7bcb3f4ff6d">ast_app_parse_timelen</a> (const char *timestr, int *<a class="el" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>, enum <a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#ac1d6b3a36d31df3737b9a83c3a9b1155">ast_timelen</a> unit)</td></tr>
<tr class="memdesc:a4b1abdb422e1ea79c303f7bcb3f4ff6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Common routine to parse time lengths, with optional time unit specifier.  <a href="#a4b1abdb422e1ea79c303f7bcb3f4ff6d">More...</a><br /></td></tr>
<tr class="separator:a4b1abdb422e1ea79c303f7bcb3f4ff6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fdf117969c2c1d8e1f0044d7c3ecd3b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a2fdf117969c2c1d8e1f0044d7c3ecd3b">ast_app_run_macro</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *autoservice_chan, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *macro_chan, const char *macro_name, const char *macro_args)</td></tr>
<tr class="memdesc:a2fdf117969c2c1d8e1f0044d7c3ecd3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run a macro on a channel, placing an optional second channel into autoservice.  <a href="#a2fdf117969c2c1d8e1f0044d7c3ecd3b">More...</a><br /></td></tr>
<tr class="separator:a2fdf117969c2c1d8e1f0044d7c3ecd3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a437a314deb7eb7260014426c55e8289c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a437a314deb7eb7260014426c55e8289c">ast_app_run_sub</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *autoservice_chan, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *sub_chan, const char *sub_location, const char *sub_args, int <a class="el" href="../../de/d26/app__externalivr_8c.html#ad7e8792fbe134499827a9171f0f6491ea96a84a93b0268cefea3c2be2d521e2c5">ignore_hangup</a>)</td></tr>
<tr class="memdesc:a437a314deb7eb7260014426c55e8289c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run a subroutine on a channel, placing an optional second channel into autoservice.  <a href="#a437a314deb7eb7260014426c55e8289c">More...</a><br /></td></tr>
<tr class="separator:a437a314deb7eb7260014426c55e8289c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac225a06b0204b02af4a1b22976383336"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#ac225a06b0204b02af4a1b22976383336">ast_app_sayname</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *mailbox_id)</td></tr>
<tr class="memdesc:ac225a06b0204b02af4a1b22976383336"><td class="mdescLeft">&#160;</td><td class="mdescRight">Play a recorded user name for the mailbox to the specified channel.  <a href="#ac225a06b0204b02af4a1b22976383336">More...</a><br /></td></tr>
<tr class="separator:ac225a06b0204b02af4a1b22976383336"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcbfdd6dfc8c5f0f549b0a5d7e263e97"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#afcbfdd6dfc8c5f0f549b0a5d7e263e97">ast_close_fds_above_n</a> (int n)</td></tr>
<tr class="memdesc:afcbfdd6dfc8c5f0f549b0a5d7e263e97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Common routine for child processes, to close all fds prior to exec(2)  <a href="#afcbfdd6dfc8c5f0f549b0a5d7e263e97">More...</a><br /></td></tr>
<tr class="separator:afcbfdd6dfc8c5f0f549b0a5d7e263e97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47eb74d2a849cccfb2e159714295ac56"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a47eb74d2a849cccfb2e159714295ac56">ast_control_streamfile</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *file, const char *fwd, const char *rev, const char *<a class="el" href="../../da/ddc/res__timing__pthread_8c.html#a111277a0849f92b793ed6aa1efe54462">stop</a>, const char *<a class="el" href="../../d3/d5a/ccss_8c.html#a8bd1c39b4993f80f1bf674e3a1d717dd">suspend</a>, const char *restart, int <a class="el" href="../../dc/df4/app__voicemail_8c.html#a1df943a05a384a407a19cf8831b2d237">skipms</a>, long *offsetms)</td></tr>
<tr class="memdesc:a47eb74d2a849cccfb2e159714295ac56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stream a file with fast forward, pause, reverse, restart.  <a href="#a47eb74d2a849cccfb2e159714295ac56">More...</a><br /></td></tr>
<tr class="separator:a47eb74d2a849cccfb2e159714295ac56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abef8d08064d7b1ea69da238a4d9fff9c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#abef8d08064d7b1ea69da238a4d9fff9c">ast_control_streamfile_lang</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *file, const char *fwd, const char *rev, const char *<a class="el" href="../../da/ddc/res__timing__pthread_8c.html#a111277a0849f92b793ed6aa1efe54462">stop</a>, const char *<a class="el" href="../../d3/d5a/ccss_8c.html#a8bd1c39b4993f80f1bf674e3a1d717dd">suspend</a>, const char *restart, int <a class="el" href="../../dc/df4/app__voicemail_8c.html#a1df943a05a384a407a19cf8831b2d237">skipms</a>, const char *lang, long *offsetms)</td></tr>
<tr class="memdesc:abef8d08064d7b1ea69da238a4d9fff9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Version of <a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#a3405b1282cefdceebba734b8e756c55d" title="Stream a file with fast forward, pause, reverse, restart. ">ast_control_streamfile()</a> which allows the language of the media file to be specified.  <a href="#abef8d08064d7b1ea69da238a4d9fff9c">More...</a><br /></td></tr>
<tr class="separator:abef8d08064d7b1ea69da238a4d9fff9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a277a7a0118b7f4c0f6fb5d402547928a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a277a7a0118b7f4c0f6fb5d402547928a">ast_control_streamfile_w_cb</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *file, const char *fwd, const char *rev, const char *<a class="el" href="../../da/ddc/res__timing__pthread_8c.html#a111277a0849f92b793ed6aa1efe54462">stop</a>, const char *<a class="el" href="../../d3/d5a/ccss_8c.html#a8bd1c39b4993f80f1bf674e3a1d717dd">suspend</a>, const char *restart, int <a class="el" href="../../dc/df4/app__voicemail_8c.html#a1df943a05a384a407a19cf8831b2d237">skipms</a>, long *offsetms, <a class="el" href="../../d2/d4d/file_8h.html#a2d5138e99197a1d01f7a2ed07830476e">ast_waitstream_fr_cb</a> cb)</td></tr>
<tr class="memdesc:a277a7a0118b7f4c0f6fb5d402547928a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stream a file with fast forward, pause, reverse, restart.  <a href="#a277a7a0118b7f4c0f6fb5d402547928a">More...</a><br /></td></tr>
<tr class="separator:a277a7a0118b7f4c0f6fb5d402547928a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52431d7ad64408a4a7abbaad3f34acea"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a52431d7ad64408a4a7abbaad3f34acea">ast_control_tone</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *tone)</td></tr>
<tr class="memdesc:a52431d7ad64408a4a7abbaad3f34acea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Controls playback of a tone.  <a href="#a52431d7ad64408a4a7abbaad3f34acea">More...</a><br /></td></tr>
<tr class="separator:a52431d7ad64408a4a7abbaad3f34acea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af20b8ac2e28e659be352bbaecdf0ab03"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#af20b8ac2e28e659be352bbaecdf0ab03">ast_dtmf_stream</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *peer, const char *digits, int between, unsigned int duration)</td></tr>
<tr class="memdesc:af20b8ac2e28e659be352bbaecdf0ab03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a string of DTMF digits to a channel.  <a href="#af20b8ac2e28e659be352bbaecdf0ab03">More...</a><br /></td></tr>
<tr class="separator:af20b8ac2e28e659be352bbaecdf0ab03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36e4844e25a7e967607eb4812667a26a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a36e4844e25a7e967607eb4812667a26a">ast_dtmf_stream_external</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *digits, int between, unsigned int duration)</td></tr>
<tr class="memdesc:a36e4844e25a7e967607eb4812667a26a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a string of DTMF digits to a channel from an external thread.  <a href="#a36e4844e25a7e967607eb4812667a26a">More...</a><br /></td></tr>
<tr class="separator:a36e4844e25a7e967607eb4812667a26a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e8f73e62b3c2243eca582ee0d8d6147"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a1e8f73e62b3c2243eca582ee0d8d6147">ast_get_encoded_char</a> (const char *stream, char *<a class="el" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>, size_t *consumed)</td></tr>
<tr class="memdesc:a1e8f73e62b3c2243eca582ee0d8d6147"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decode an encoded control or extended ASCII character.  <a href="#a1e8f73e62b3c2243eca582ee0d8d6147">More...</a><br /></td></tr>
<tr class="separator:a1e8f73e62b3c2243eca582ee0d8d6147"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bfeeacfbb61627afb3bc534e208d48e"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a7bfeeacfbb61627afb3bc534e208d48e">ast_get_encoded_str</a> (const char *stream, char *<a class="el" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>, size_t result_size)</td></tr>
<tr class="memdesc:a7bfeeacfbb61627afb3bc534e208d48e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decode a stream of encoded control or extended ASCII characters.  <a href="#a7bfeeacfbb61627afb3bc534e208d48e">More...</a><br /></td></tr>
<tr class="separator:a7bfeeacfbb61627afb3bc534e208d48e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82224d29f5f5288c09279a9a6a69f09c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a82224d29f5f5288c09279a9a6a69f09c">ast_install_stack_functions</a> (const struct <a class="el" href="../../d9/d3e/structast__app__stack__funcs.html">ast_app_stack_funcs</a> *funcs)</td></tr>
<tr class="memdesc:a82224d29f5f5288c09279a9a6a69f09c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set stack application function callbacks.  <a href="#a82224d29f5f5288c09279a9a6a69f09c">More...</a><br /></td></tr>
<tr class="separator:a82224d29f5f5288c09279a9a6a69f09c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a479e9d3cae1218f0f55e27d874a07a96"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a479e9d3cae1218f0f55e27d874a07a96">ast_install_vm_test_functions</a> (<a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#aeb09d8464050290e0a6f655e1f99497d">ast_vm_test_create_user_fn</a> *vm_test_create_user_func, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#a4261c8076caaeb90e900f834b912ee4b">ast_vm_test_destroy_user_fn</a> *vm_test_destroy_user_func)</td></tr>
<tr class="separator:a479e9d3cae1218f0f55e27d874a07a96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8ce675aa305c7c3236ab1816d78d611"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#ac8ce675aa305c7c3236ab1816d78d611">ast_ivr_menu_run</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../dd/d62/structast__ivr__menu.html">ast_ivr_menu</a> *menu, void *cbdata)</td></tr>
<tr class="memdesc:ac8ce675aa305c7c3236ab1816d78d611"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runs an IVR menu.  <a href="#ac8ce675aa305c7c3236ab1816d78d611">More...</a><br /></td></tr>
<tr class="separator:ac8ce675aa305c7c3236ab1816d78d611"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09ef1fec8abab2315272f9300705ef04"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a09ef1fec8abab2315272f9300705ef04">ast_ivr_menu_run_internal</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../dd/d62/structast__ivr__menu.html">ast_ivr_menu</a> *menu, void *cbdata)</td></tr>
<tr class="separator:a09ef1fec8abab2315272f9300705ef04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2566e275a6e912943c68cbfc867cc60a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a2566e275a6e912943c68cbfc867cc60a">ast_linear_stream</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *filename, int fd, int allowoverride)</td></tr>
<tr class="memdesc:a2566e275a6e912943c68cbfc867cc60a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stream a filename (or file descriptor) as a generator.  <a href="#a2566e275a6e912943c68cbfc867cc60a">More...</a><br /></td></tr>
<tr class="separator:a2566e275a6e912943c68cbfc867cc60a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74c57b5a842dcbc15cc991a31f679a13"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8c">AST_LOCK_RESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a74c57b5a842dcbc15cc991a31f679a13">ast_lock_path</a> (const char *path)</td></tr>
<tr class="memdesc:a74c57b5a842dcbc15cc991a31f679a13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lock a filesystem path.  <a href="#a74c57b5a842dcbc15cc991a31f679a13">More...</a><br /></td></tr>
<tr class="separator:a74c57b5a842dcbc15cc991a31f679a13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a631aa3756c80daa3b4c825189cfc183c"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8c">AST_LOCK_RESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a631aa3756c80daa3b4c825189cfc183c">ast_lock_path_flock</a> (const char *path)</td></tr>
<tr class="separator:a631aa3756c80daa3b4c825189cfc183c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e3efda31e8018f394246681664d447c"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8c">AST_LOCK_RESULT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a5e3efda31e8018f394246681664d447c">ast_lock_path_lockfile</a> (const char *path)</td></tr>
<tr class="separator:a5e3efda31e8018f394246681664d447c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea588ff21e48ab0fcdaef5beb911ea56"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#aea588ff21e48ab0fcdaef5beb911ea56">ast_mf_stream</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *peer, const char *digits, int between, unsigned int duration, unsigned int durationkp, unsigned int durationst, int is_external)</td></tr>
<tr class="memdesc:aea588ff21e48ab0fcdaef5beb911ea56"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a string of MF digits to a channel.  <a href="#aea588ff21e48ab0fcdaef5beb911ea56">More...</a><br /></td></tr>
<tr class="separator:aea588ff21e48ab0fcdaef5beb911ea56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3166745891066af991b134a88991b8ea"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a3166745891066af991b134a88991b8ea">ast_play_and_prepend</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, char *playfile, char *recordfile, int maxtime, char *fmt, int *duration, int *sound_duration, int beep, int <a class="el" href="../../da/d45/chan__alsa_8c.html#abebd9f51e7ff2f4d68f3952210219b4e">silencethreshold</a>, int <a class="el" href="../../dc/df4/app__voicemail_8c.html#ad87fa9ba37f50714bc922335b3b7ea91">maxsilence</a>)</td></tr>
<tr class="memdesc:a3166745891066af991b134a88991b8ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Record a file based on input frm a channel. Recording is performed in 'prepend' mode which works a little differently from normal recordings This function will not play a success message due to post-recording control in the application this was added for.  <a href="#a3166745891066af991b134a88991b8ea">More...</a><br /></td></tr>
<tr class="separator:a3166745891066af991b134a88991b8ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfe53155f5f51d40905d4d75b74cf85f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#adfe53155f5f51d40905d4d75b74cf85f">ast_play_and_record</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *playfile, const char *recordfile, int maxtime, const char *fmt, int *duration, int *sound_duration, int <a class="el" href="../../da/d45/chan__alsa_8c.html#abebd9f51e7ff2f4d68f3952210219b4e">silencethreshold</a>, int <a class="el" href="../../dc/df4/app__voicemail_8c.html#ad87fa9ba37f50714bc922335b3b7ea91">maxsilence</a>, const char *path)</td></tr>
<tr class="memdesc:adfe53155f5f51d40905d4d75b74cf85f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Record a file based on input from a channel. Use default accept and cancel DTMF. This function will play "auth-thankyou" upon successful recording.  <a href="#adfe53155f5f51d40905d4d75b74cf85f">More...</a><br /></td></tr>
<tr class="separator:adfe53155f5f51d40905d4d75b74cf85f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0feee747237e8203c4ed9067fd4059d0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a0feee747237e8203c4ed9067fd4059d0">ast_play_and_record_full</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *playfile, const char *recordfile, int maxtime, const char *fmt, int *duration, int *sound_duration, int beep, int <a class="el" href="../../da/d45/chan__alsa_8c.html#abebd9f51e7ff2f4d68f3952210219b4e">silencethreshold</a>, int <a class="el" href="../../dc/df4/app__voicemail_8c.html#ad87fa9ba37f50714bc922335b3b7ea91">maxsilence</a>, const char *path, const char *acceptdtmf, const char *canceldtmf, int skip_confirmation_sound, enum <a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#ac665722c9bfe6d9b506df95184aa236d">ast_record_if_exists</a> if_exists)</td></tr>
<tr class="memdesc:a0feee747237e8203c4ed9067fd4059d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Record a file based on input from a channel This function will play "auth-thankyou" upon successful recording if skip_confirmation_sound is false.  <a href="#a0feee747237e8203c4ed9067fd4059d0">More...</a><br /></td></tr>
<tr class="separator:a0feee747237e8203c4ed9067fd4059d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbbec6ab9a303e865a1d1a261152540d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#abbbec6ab9a303e865a1d1a261152540d">ast_play_and_wait</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *fn)</td></tr>
<tr class="memdesc:abbbec6ab9a303e865a1d1a261152540d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Play a stream and wait for a digit, returning the digit that was pressed.  <a href="#abbbec6ab9a303e865a1d1a261152540d">More...</a><br /></td></tr>
<tr class="separator:abbbec6ab9a303e865a1d1a261152540d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88bee182f285c3e0b206c1de01324fc4"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a88bee182f285c3e0b206c1de01324fc4">ast_queue_topic</a> (const char *queuename)</td></tr>
<tr class="memdesc:a88bee182f285c3e0b206c1de01324fc4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the <a class="el" href="../../dd/dfd/stasis.html">Stasis Message Bus API</a> topic for queue messages for a particular queue name.  <a href="#a88bee182f285c3e0b206c1de01324fc4">More...</a><br /></td></tr>
<tr class="separator:a88bee182f285c3e0b206c1de01324fc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade65e4a6a8802772595db25eb8e500ea"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#ade65e4a6a8802772595db25eb8e500ea">ast_queue_topic_all</a> (void)</td></tr>
<tr class="memdesc:ade65e4a6a8802772595db25eb8e500ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the <a class="el" href="../../dd/dfd/stasis.html">Stasis Message Bus API</a> topic for queue messages.  <a href="#ade65e4a6a8802772595db25eb8e500ea">More...</a><br /></td></tr>
<tr class="separator:ade65e4a6a8802772595db25eb8e500ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada8f5c9b9add1caf6e275238d46cec8c"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#ada8f5c9b9add1caf6e275238d46cec8c">ast_read_textfile</a> (const char *filename)</td></tr>
<tr class="memdesc:ada8f5c9b9add1caf6e275238d46cec8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a file into asterisk.  <a href="#ada8f5c9b9add1caf6e275238d46cec8c">More...</a><br /></td></tr>
<tr class="separator:ada8f5c9b9add1caf6e275238d46cec8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88b6ee77eea0c8a6cc0a315e1c1fc815"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a88b6ee77eea0c8a6cc0a315e1c1fc815">ast_record_review</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *playfile, const char *recordfile, int maxtime, const char *fmt, int *duration, const char *path)</td></tr>
<tr class="memdesc:a88b6ee77eea0c8a6cc0a315e1c1fc815"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allow to record message and have a review option.  <a href="#a88b6ee77eea0c8a6cc0a315e1c1fc815">More...</a><br /></td></tr>
<tr class="separator:a88b6ee77eea0c8a6cc0a315e1c1fc815"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a4c7e208ffc4d11a1918beb0e920ec0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a7a4c7e208ffc4d11a1918beb0e920ec0">ast_safe_fork</a> (int stop_reaper)</td></tr>
<tr class="memdesc:a7a4c7e208ffc4d11a1918beb0e920ec0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Common routine to safely fork without a chance of a signal handler firing badly in the child.  <a href="#a7a4c7e208ffc4d11a1918beb0e920ec0">More...</a><br /></td></tr>
<tr class="separator:a7a4c7e208ffc4d11a1918beb0e920ec0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1044fae6847dc8986a212af0af492a23"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a1044fae6847dc8986a212af0af492a23">ast_safe_fork_cleanup</a> (void)</td></tr>
<tr class="memdesc:a1044fae6847dc8986a212af0af492a23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Common routine to cleanup after fork'ed process is complete (if reaping was stopped)  <a href="#a1044fae6847dc8986a212af0af492a23">More...</a><br /></td></tr>
<tr class="separator:a1044fae6847dc8986a212af0af492a23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaef9c9ee6c9e05a6675201486ea2f02e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#aaef9c9ee6c9e05a6675201486ea2f02e">ast_set_lock_type</a> (enum <a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#a889fad4c6cc627add80454ae61b53241">AST_LOCK_TYPE</a> <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>)</td></tr>
<tr class="memdesc:aaef9c9ee6c9e05a6675201486ea2f02e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the type of locks used by <a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#a74c57b5a842dcbc15cc991a31f679a13" title="Lock a filesystem path. ">ast_lock_path()</a>  <a href="#aaef9c9ee6c9e05a6675201486ea2f02e">More...</a><br /></td></tr>
<tr class="separator:aaef9c9ee6c9e05a6675201486ea2f02e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1528703fa0e2ea11fcab7e04f8e0a6cb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a1528703fa0e2ea11fcab7e04f8e0a6cb">ast_str_get_encoded_str</a> (struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **<a class="el" href="../../d8/d30/main_2security__events_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, int maxlen, const char *stream)</td></tr>
<tr class="memdesc:a1528703fa0e2ea11fcab7e04f8e0a6cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decode a stream of encoded control or extended ASCII characters.  <a href="#a1528703fa0e2ea11fcab7e04f8e0a6cb">More...</a><br /></td></tr>
<tr class="separator:a1528703fa0e2ea11fcab7e04f8e0a6cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a081cae3d9afd0b524cb602f94091ed7a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a081cae3d9afd0b524cb602f94091ed7a">AST_THREADSTORAGE_PUBLIC</a> (ast_str_thread_global_buf)</td></tr>
<tr class="separator:a081cae3d9afd0b524cb602f94091ed7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec0281ec0a6743121492b2194649922f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#aec0281ec0a6743121492b2194649922f">ast_uninstall_vm_test_functions</a> (void)</td></tr>
<tr class="separator:aec0281ec0a6743121492b2194649922f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6428878db94a4adf8136850e6a654f5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#af6428878db94a4adf8136850e6a654f5">ast_unlock_path</a> (const char *path)</td></tr>
<tr class="memdesc:af6428878db94a4adf8136850e6a654f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlock a path.  <a href="#af6428878db94a4adf8136850e6a654f5">More...</a><br /></td></tr>
<tr class="separator:af6428878db94a4adf8136850e6a654f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a195e5dc48a8d508fb6d85597ce9df398"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a195e5dc48a8d508fb6d85597ce9df398">ast_unlock_path_flock</a> (const char *path)</td></tr>
<tr class="separator:a195e5dc48a8d508fb6d85597ce9df398"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41764988af00a30b8de64b8a37e8228d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a41764988af00a30b8de64b8a37e8228d">ast_unlock_path_lockfile</a> (const char *path)</td></tr>
<tr class="separator:a41764988af00a30b8de64b8a37e8228d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa0ccb2aa4c974e75e9654a0e0a03ebc6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#aa0ccb2aa4c974e75e9654a0e0a03ebc6">ast_vm_greeter_is_registered</a> (void)</td></tr>
<tr class="memdesc:aa0ccb2aa4c974e75e9654a0e0a03ebc6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if a voicemail greeter provider is registered.  <a href="#aa0ccb2aa4c974e75e9654a0e0a03ebc6">More...</a><br /></td></tr>
<tr class="separator:aa0ccb2aa4c974e75e9654a0e0a03ebc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50ae61db871bd4f0e0b8caa6c3e56810"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a50ae61db871bd4f0e0b8caa6c3e56810">ast_vm_greeter_unregister</a> (const char *module_name)</td></tr>
<tr class="memdesc:a50ae61db871bd4f0e0b8caa6c3e56810"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister the specified voicemail greeter provider.  <a href="#a50ae61db871bd4f0e0b8caa6c3e56810">More...</a><br /></td></tr>
<tr class="separator:a50ae61db871bd4f0e0b8caa6c3e56810"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad88659eefe2c62ca92a698a2f2d0afb9"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#ad88659eefe2c62ca92a698a2f2d0afb9">ast_vm_index_to_foldername</a> (int <a class="el" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>)</td></tr>
<tr class="memdesc:ad88659eefe2c62ca92a698a2f2d0afb9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return name of folder, given an id.  <a href="#ad88659eefe2c62ca92a698a2f2d0afb9">More...</a><br /></td></tr>
<tr class="separator:ad88659eefe2c62ca92a698a2f2d0afb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0d83cafb3ae5725be81625b4a211f84"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#ae0d83cafb3ae5725be81625b4a211f84">ast_vm_is_registered</a> (void)</td></tr>
<tr class="memdesc:ae0d83cafb3ae5725be81625b4a211f84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if a voicemail provider is registered.  <a href="#ae0d83cafb3ae5725be81625b4a211f84">More...</a><br /></td></tr>
<tr class="separator:ae0d83cafb3ae5725be81625b4a211f84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5d77d1c2cf9d8e187cb6559021f87c5"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d3/dbc/structast__vm__mailbox__snapshot.html">ast_vm_mailbox_snapshot</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#ae5d77d1c2cf9d8e187cb6559021f87c5">ast_vm_mailbox_snapshot_create</a> (const char *<a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a>, const char *<a class="el" href="../../da/dde/chan__phone_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, const char *folder, int descending, enum <a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#a67fca777538364c249bf1b66b2a22491">ast_vm_snapshot_sort_val</a> sort_val, int combine_INBOX_and_OLD)</td></tr>
<tr class="memdesc:ae5d77d1c2cf9d8e187cb6559021f87c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a snapshot of a mailbox which contains information about every msg.  <a href="#ae5d77d1c2cf9d8e187cb6559021f87c5">More...</a><br /></td></tr>
<tr class="separator:ae5d77d1c2cf9d8e187cb6559021f87c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a632bfa316101ce8087f60f59ff909294"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d3/dbc/structast__vm__mailbox__snapshot.html">ast_vm_mailbox_snapshot</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a632bfa316101ce8087f60f59ff909294">ast_vm_mailbox_snapshot_destroy</a> (struct <a class="el" href="../../d3/dbc/structast__vm__mailbox__snapshot.html">ast_vm_mailbox_snapshot</a> *mailbox_snapshot)</td></tr>
<tr class="memdesc:a632bfa316101ce8087f60f59ff909294"><td class="mdescLeft">&#160;</td><td class="mdescRight">destroy a snapshot  <a href="#a632bfa316101ce8087f60f59ff909294">More...</a><br /></td></tr>
<tr class="separator:a632bfa316101ce8087f60f59ff909294"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89e14848a8f26e967c13e5be34db8154"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a89e14848a8f26e967c13e5be34db8154">ast_vm_msg_forward</a> (const char *from_mailbox, const char *from_context, const char *from_folder, const char *to_mailbox, const char *to_context, const char *to_folder, size_t num_msgs, const char *msg_ids[], int delete_old)</td></tr>
<tr class="memdesc:a89e14848a8f26e967c13e5be34db8154"><td class="mdescLeft">&#160;</td><td class="mdescRight">forward a message from one mailbox to another.  <a href="#a89e14848a8f26e967c13e5be34db8154">More...</a><br /></td></tr>
<tr class="separator:a89e14848a8f26e967c13e5be34db8154"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3e7b70282176e60ba4ec190646960f5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#ad3e7b70282176e60ba4ec190646960f5">ast_vm_msg_move</a> (const char *<a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a>, const char *<a class="el" href="../../da/dde/chan__phone_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, size_t num_msgs, const char *oldfolder, const char *old_msg_ids[], const char *newfolder)</td></tr>
<tr class="memdesc:ad3e7b70282176e60ba4ec190646960f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move messages from one folder to another.  <a href="#ad3e7b70282176e60ba4ec190646960f5">More...</a><br /></td></tr>
<tr class="separator:ad3e7b70282176e60ba4ec190646960f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36f60973de7a0415ed23fb2d635b8613"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a36f60973de7a0415ed23fb2d635b8613">ast_vm_msg_play</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *<a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a>, const char *<a class="el" href="../../da/dde/chan__phone_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, const char *folder, const char *msg_num, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#ac0c37deb099c676114ef0032ad449375">ast_vm_msg_play_cb</a> *cb)</td></tr>
<tr class="memdesc:a36f60973de7a0415ed23fb2d635b8613"><td class="mdescLeft">&#160;</td><td class="mdescRight">Play a voicemail msg back on a channel.  <a href="#a36f60973de7a0415ed23fb2d635b8613">More...</a><br /></td></tr>
<tr class="separator:a36f60973de7a0415ed23fb2d635b8613"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5e9114c54a30de9136f699a43ca7740"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#af5e9114c54a30de9136f699a43ca7740">ast_vm_msg_remove</a> (const char *<a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a>, const char *<a class="el" href="../../da/dde/chan__phone_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, size_t num_msgs, const char *folder, const char *msgs[])</td></tr>
<tr class="memdesc:af5e9114c54a30de9136f699a43ca7740"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove/delete messages from a mailbox folder.  <a href="#af5e9114c54a30de9136f699a43ca7740">More...</a><br /></td></tr>
<tr class="separator:af5e9114c54a30de9136f699a43ca7740"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addab2e19809d9d8d6dcde9548982b4bd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#addab2e19809d9d8d6dcde9548982b4bd">ast_vm_test_create_user</a> (const char *<a class="el" href="../../da/dde/chan__phone_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, const char *<a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a>)</td></tr>
<tr class="separator:addab2e19809d9d8d6dcde9548982b4bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93e94d3cc629fd826c72c14f59367e1e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a93e94d3cc629fd826c72c14f59367e1e">ast_vm_test_destroy_user</a> (const char *<a class="el" href="../../da/dde/chan__phone_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, const char *<a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a>)</td></tr>
<tr class="separator:a93e94d3cc629fd826c72c14f59367e1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a014da687f3ee9369aaccf3535cbca3ef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a014da687f3ee9369aaccf3535cbca3ef">ast_vm_test_swap_table_in</a> (const struct <a class="el" href="../../df/d7c/structast__vm__functions.html">ast_vm_functions</a> *<a class="el" href="../../d2/d94/res__mwi__external_8c.html#a20bc535b35844236bae4c89b484435c5">vm_table</a>)</td></tr>
<tr class="memdesc:a014da687f3ee9369aaccf3535cbca3ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Swap out existing voicemail functions with a temporary set of functions for use with unit tests.  <a href="#a014da687f3ee9369aaccf3535cbca3ef">More...</a><br /></td></tr>
<tr class="separator:a014da687f3ee9369aaccf3535cbca3ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a049ae8f14b4d323f5c357f6956b909b0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a049ae8f14b4d323f5c357f6956b909b0">ast_vm_test_swap_table_out</a> (void)</td></tr>
<tr class="memdesc:a049ae8f14b4d323f5c357f6956b909b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Used after ast_vm_test_swap_table_in to restore the original set of voicemail functions.  <a href="#a049ae8f14b4d323f5c357f6956b909b0">More...</a><br /></td></tr>
<tr class="separator:a049ae8f14b4d323f5c357f6956b909b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab65d2013da7fcbb28da422712bac5e8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#aab65d2013da7fcbb28da422712bac5e8">ast_vm_unregister</a> (const char *module_name)</td></tr>
<tr class="memdesc:aab65d2013da7fcbb28da422712bac5e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister the specified voicemail provider.  <a href="#aab65d2013da7fcbb28da422712bac5e8">More...</a><br /></td></tr>
<tr class="separator:aab65d2013da7fcbb28da422712bac5e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a320dd3e6327e693d76625f9bed7a7a81"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a320dd3e6327e693d76625f9bed7a7a81">control_streamfile</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *file, const char *fwd, const char *rev, const char *<a class="el" href="../../da/ddc/res__timing__pthread_8c.html#a111277a0849f92b793ed6aa1efe54462">stop</a>, const char *<a class="el" href="../../d3/d5a/ccss_8c.html#a8bd1c39b4993f80f1bf674e3a1d717dd">suspend</a>, const char *restart, int <a class="el" href="../../dc/df4/app__voicemail_8c.html#a1df943a05a384a407a19cf8831b2d237">skipms</a>, long *offsetms, const char *lang, <a class="el" href="../../d2/d4d/file_8h.html#a2d5138e99197a1d01f7a2ed07830476e">ast_waitstream_fr_cb</a> cb)</td></tr>
<tr class="separator:a320dd3e6327e693d76625f9bed7a7a81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00f5bb2146302815137be471686d1b23"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../d3/d83/main_2app_8c.html#a8a71094a6fa4c99ee8ba96185eab3ea5">control_tone_frame_response_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a00f5bb2146302815137be471686d1b23">control_tone_frame_response</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *fr, struct <a class="el" href="../../d5/dab/structast__tone__zone__sound.html">ast_tone_zone_sound</a> *ts, const char *tone, int *paused)</td></tr>
<tr class="separator:a00f5bb2146302815137be471686d1b23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47f4c14a6af38c0332d1e7b5639ce3a1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a47f4c14a6af38c0332d1e7b5639ce3a1">dtmf_stream</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *digits, int between, unsigned int duration, int is_external)</td></tr>
<tr class="separator:a47f4c14a6af38c0332d1e7b5639ce3a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a4b283e6ec48c7198ec3444e70c7398"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a8a4b283e6ec48c7198ec3444e70c7398">external_sleep</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, int ms)</td></tr>
<tr class="separator:a8a4b283e6ec48c7198ec3444e70c7398"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af708a8d2a35e2699cd5b4851c20110e1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#af708a8d2a35e2699cd5b4851c20110e1">ivr_dispatch</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../d1/d18/structast__ivr__option.html">ast_ivr_option</a> *option, char *<a class="el" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, void *cbdata)</td></tr>
<tr class="separator:af708a8d2a35e2699cd5b4851c20110e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9917c0ec59881e0ae404e044bf8628cb"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a9917c0ec59881e0ae404e044bf8628cb">linear_alloc</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, void *params)</td></tr>
<tr class="separator:a9917c0ec59881e0ae404e044bf8628cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c664af67de1b256b0fa742ec5b8fff2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a3c664af67de1b256b0fa742ec5b8fff2">linear_generator</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, void *data, int <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, int samples)</td></tr>
<tr class="separator:a3c664af67de1b256b0fa742ec5b8fff2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc3d301641817be1e994258ceb1960c4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#afc3d301641817be1e994258ceb1960c4">linear_release</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, void *params)</td></tr>
<tr class="separator:afc3d301641817be1e994258ceb1960c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acebf42e1b2956855f73e9dd7ef66d785"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#acebf42e1b2956855f73e9dd7ef66d785">make_silence</a> (const struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *orig)</td></tr>
<tr class="memdesc:acebf42e1b2956855f73e9dd7ef66d785"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a silence frame of the same duration as <em>orig</em>.  <a href="#acebf42e1b2956855f73e9dd7ef66d785">More...</a><br /></td></tr>
<tr class="separator:acebf42e1b2956855f73e9dd7ef66d785"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05cbe2ad6e9abffb950e49b86e17b6a3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a05cbe2ad6e9abffb950e49b86e17b6a3">mf_stream</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *digits, int between, unsigned int duration, unsigned int durationkp, unsigned int durationst, int is_external)</td></tr>
<tr class="separator:a05cbe2ad6e9abffb950e49b86e17b6a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b6fbacce14cf53fecf5be43487c0493"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a1b6fbacce14cf53fecf5be43487c0493">option_exists</a> (struct <a class="el" href="../../dd/d62/structast__ivr__menu.html">ast_ivr_menu</a> *menu, char *option)</td></tr>
<tr class="separator:a1b6fbacce14cf53fecf5be43487c0493"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a490ba593992b218981f3dc2a41f15ac4"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a490ba593992b218981f3dc2a41f15ac4">option_matchmore</a> (struct <a class="el" href="../../dd/d62/structast__ivr__menu.html">ast_ivr_menu</a> *menu, char *option)</td></tr>
<tr class="separator:a490ba593992b218981f3dc2a41f15ac4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16e02ee9c475cbde97e26554a975e7eb"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a16e02ee9c475cbde97e26554a975e7eb">parse_options</a> (const struct <a class="el" href="../../d2/d8d/structast__app__option.html">ast_app_option</a> *<a class="el" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>, void *_flags, char **<a class="el" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, char *optstr, int flaglen)</td></tr>
<tr class="separator:a16e02ee9c475cbde97e26554a975e7eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6b32f07971af303a81aa940a347fddb"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#af6b32f07971af303a81aa940a347fddb">parse_tone_uri</a> (char *tone_parser, const char **tone_indication, const char **tone_zone)</td></tr>
<tr class="separator:af6b32f07971af303a81aa940a347fddb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76f6ec06f0249fceeecd10687cb62e7d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a76f6ec06f0249fceeecd10687cb62e7d">path_lock_destroy</a> (struct <a class="el" href="../../da/da7/structpath__lock.html">path_lock</a> *obj)</td></tr>
<tr class="separator:a76f6ec06f0249fceeecd10687cb62e7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e4d0cf43a02ec7e663a50cee18315d2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a8e4d0cf43a02ec7e663a50cee18315d2">read_newoption</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../dd/d62/structast__ivr__menu.html">ast_ivr_menu</a> *menu, char *<a class="el" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, int maxexten)</td></tr>
<tr class="separator:a8e4d0cf43a02ec7e663a50cee18315d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae16884d936b144343ed8d1b9fbe60617"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#ae16884d936b144343ed8d1b9fbe60617">set_read_to_slin</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> **orig_format)</td></tr>
<tr class="memdesc:ae16884d936b144343ed8d1b9fbe60617"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets a channel's read format to AST_FORMAT_SLINEAR, recording its original format.  <a href="#ae16884d936b144343ed8d1b9fbe60617">More...</a><br /></td></tr>
<tr class="separator:ae16884d936b144343ed8d1b9fbe60617"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7696b4a837797103e8fad638d5b4615d"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a7696b4a837797103e8fad638d5b4615d">shaun_of_the_dead</a> (void *data)</td></tr>
<tr class="separator:a7696b4a837797103e8fad638d5b4615d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6e29bc97e7d1b6d5bcc5199f16d9853"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#ad6e29bc97e7d1b6d5bcc5199f16d9853">vm_greeter_warn_no_provider</a> (void)</td></tr>
<tr class="separator:ad6e29bc97e7d1b6d5bcc5199f16d9853"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed4788fab39ac1980d266aba2cbc6fc4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#aed4788fab39ac1980d266aba2cbc6fc4">vm_warn_no_provider</a> (void)</td></tr>
<tr class="separator:aed4788fab39ac1980d266aba2cbc6fc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a469da08184562e4040d91459db01be10"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../d9/d3e/structast__app__stack__funcs.html">ast_app_stack_funcs</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a469da08184562e4040d91459db01be10">app_stack_callbacks</a></td></tr>
<tr class="separator:a469da08184562e4040d91459db01be10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bcfb001b39f6049c25a2635de1dc17f"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#a889fad4c6cc627add80454ae61b53241">AST_LOCK_TYPE</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a6bcfb001b39f6049c25a2635de1dc17f">ast_lock_type</a> = <a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#a889fad4c6cc627add80454ae61b53241a599f18fdf355d7530bb754b8c66d6de7">AST_LOCK_TYPE_LOCKFILE</a></td></tr>
<tr class="separator:a6bcfb001b39f6049c25a2635de1dc17f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3925a12ca1909720e1f4d7ea01fa8a3"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#aeb09d8464050290e0a6f655e1f99497d">ast_vm_test_create_user_fn</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#ad3925a12ca1909720e1f4d7ea01fa8a3">ast_vm_test_create_user_func</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td></tr>
<tr class="separator:ad3925a12ca1909720e1f4d7ea01fa8a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6b468fe42cea720c3ce8c7c4f0ea2c9"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#a4261c8076caaeb90e900f834b912ee4b">ast_vm_test_destroy_user_fn</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#ac6b468fe42cea720c3ce8c7c4f0ea2c9">ast_vm_test_destroy_user_func</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td></tr>
<tr class="separator:ac6b468fe42cea720c3ce8c7c4f0ea2c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e01e4a7836c72a22f08f824d366ffb0"><td class="memItemLeft" align="right" valign="top">static cap_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a0e01e4a7836c72a22f08f824d366ffb0">child_cap</a></td></tr>
<tr class="separator:a0e01e4a7836c72a22f08f824d366ffb0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28df6ce01a3a3bc9f0495c070443b4ee"><td class="memItemLeft" align="right" valign="top">static const char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a28df6ce01a3a3bc9f0495c070443b4ee">default_acceptdtmf</a> [] = &quot;#&quot;</td></tr>
<tr class="separator:a28df6ce01a3a3bc9f0495c070443b4ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a652c75796183b2b640cc95dc58b76bab"><td class="memItemLeft" align="right" valign="top">static const char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a652c75796183b2b640cc95dc58b76bab">default_canceldtmf</a> [] = &quot;&quot;</td></tr>
<tr class="separator:a652c75796183b2b640cc95dc58b76bab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0442dc13ea144464c2b3f9aa6e2d6417"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a0442dc13ea144464c2b3f9aa6e2d6417">global_maxsilence</a> = 0</td></tr>
<tr class="separator:a0442dc13ea144464c2b3f9aa6e2d6417"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3773ab842af7870b63ad24f3c4d4a541"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a3773ab842af7870b63ad24f3c4d4a541">global_silence_threshold</a> = 128</td></tr>
<tr class="separator:a3773ab842af7870b63ad24f3c4d4a541"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c64cde04fcdfadca23c715d24981888"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d9/d28/structgroups.html">groups</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a4c64cde04fcdfadca23c715d24981888">groups</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td></tr>
<tr class="separator:a4c64cde04fcdfadca23c715d24981888"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50b7bd92df6d7d96811b86030c0265b1"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../de/d2a/structast__generator.html">ast_generator</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a50b7bd92df6d7d96811b86030c0265b1">linearstream</a></td></tr>
<tr class="separator:a50b7bd92df6d7d96811b86030c0265b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a102babd01c6a9963b7e80cf36faf0c65"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d4/d9f/structpath__lock__list.html">path_lock_list</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a102babd01c6a9963b7e80cf36faf0c65">path_lock_list</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td></tr>
<tr class="separator:a102babd01c6a9963b7e80cf36faf0c65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0140ad24206ae7215b855360b9f3c2af"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a0140ad24206ae7215b855360b9f3c2af">provider_is_swapped</a> = 0</td></tr>
<tr class="separator:a0140ad24206ae7215b855360b9f3c2af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6faa8563ee6f21a1e504dd8b7c3dd5b2"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a6faa8563ee6f21a1e504dd8b7c3dd5b2">queue_topic_all</a></td></tr>
<tr class="separator:a6faa8563ee6f21a1e504dd8b7c3dd5b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a674c31d6219e0edf34999357375f77da"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d1/d65/structstasis__topic__pool.html">stasis_topic_pool</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a674c31d6219e0edf34999357375f77da">queue_topic_pool</a></td></tr>
<tr class="separator:a674c31d6219e0edf34999357375f77da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30573cb092e715a2e4bbc2d77b9fc1df"><td class="memItemLeft" align="right" valign="top">static pthread_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#a30573cb092e715a2e4bbc2d77b9fc1df">shaun_of_the_dead_thread</a> = <a class="el" href="../../d4/dc5/extconf_8c.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></td></tr>
<tr class="separator:a30573cb092e715a2e4bbc2d77b9fc1df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab690c43575fbc376d43f93e542265f2d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#ab690c43575fbc376d43f93e542265f2d">vm_greeter_warnings</a></td></tr>
<tr class="separator:ab690c43575fbc376d43f93e542265f2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3f5ef8c1385be5dc0d39b54436fbb85"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#ac3f5ef8c1385be5dc0d39b54436fbb85">vm_warnings</a></td></tr>
<tr class="separator:ac3f5ef8c1385be5dc0d39b54436fbb85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac56f76fcde470c1d00ea52c3cd657b3c"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dc/d57/structzombies.html">zombies</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d83/main_2app_8c.html#ac56f76fcde470c1d00ea52c3cd657b3c">zombies</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td></tr>
<tr class="separator:ac56f76fcde470c1d00ea52c3cd657b3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Convenient Application Routines. </p>
<dl class="section author"><dt>Author</dt><dd>Mark Spencer <a href="#" onclick="location.href='mai'+'lto:'+'mar'+'ks'+'ter'+'@d'+'igi'+'um'+'.co'+'m'; return false;">marks<span style="display: none;">.nosp@m.</span>ter@<span style="display: none;">.nosp@m.</span>digiu<span style="display: none;">.nosp@m.</span>m.co<span style="display: none;">.nosp@m.</span>m</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aa932272aad0c1610b79e9b04e54e57ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa932272aad0c1610b79e9b04e54e57ea">&#9670;&nbsp;</a></span>AST_MAX_FORMATS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AST_MAX_FORMATS&#160;&#160;&#160;10</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00121">121</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01580">__ast_play_and_record()</a>.</p>

</div>
</div>
<a id="a3dfb8ef0d04e938194da60b4420c7517"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3dfb8ef0d04e938194da60b4420c7517">&#9670;&nbsp;</a></span>FMT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FMT&#160;&#160;&#160;&quot;%30Lf%9s&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a449">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l03113">ast_app_parse_timelen()</a>.</p>

</div>
</div>
<a id="ac68f484b9b363ef1c76def178529aadf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac68f484b9b363ef1c76def178529aadf">&#9670;&nbsp;</a></span>RES_EXIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RES_EXIT&#160;&#160;&#160;(1 &lt;&lt; 17)</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a388">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02584">2584</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02700">ast_ivr_menu_run_internal()</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02590">ivr_dispatch()</a>.</p>

</div>
</div>
<a id="add236e92599b4e2157db3bb1fc4a2757"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add236e92599b4e2157db3bb1fc4a2757">&#9670;&nbsp;</a></span>RES_REPEAT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RES_REPEAT&#160;&#160;&#160;(1 &lt;&lt; 18)</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a391">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02585">2585</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02700">ast_ivr_menu_run_internal()</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02590">ivr_dispatch()</a>.</p>

</div>
</div>
<a id="afe510b02adee23bac957dd9db3333dba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe510b02adee23bac957dd9db3333dba">&#9670;&nbsp;</a></span>RES_RESTART</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RES_RESTART&#160;&#160;&#160;((1 &lt;&lt; 19) | <a class="el" href="../../d3/d83/main_2app_8c.html#add236e92599b4e2157db3bb1fc4a2757">RES_REPEAT</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a393">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02586">2586</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02700">ast_ivr_menu_run_internal()</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02590">ivr_dispatch()</a>.</p>

</div>
</div>
<a id="a99e8fc9c191dce9a869c02541d31d178"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99e8fc9c191dce9a869c02541d31d178">&#9670;&nbsp;</a></span>RES_UPONE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RES_UPONE&#160;&#160;&#160;(1 &lt;&lt; 16)</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a386">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02583">2583</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02700">ast_ivr_menu_run_internal()</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02590">ivr_dispatch()</a>.</p>

</div>
</div>
<a id="a12c075dae5bb61a239b853abf865fd67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12c075dae5bb61a239b853abf865fd67">&#9670;&nbsp;</a></span>VM_API_CALL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VM_API_CALL</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">res, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">api_call, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">api_parms&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a139">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00620">620</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00669">ast_app_copy_recording_to_vm()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00655">ast_app_has_voicemail()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00677">ast_app_inboxcount()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00692">ast_app_inboxcount2()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00718">ast_app_messagecount()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00726">ast_vm_index_to_foldername()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00734">ast_vm_mailbox_snapshot_create()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00748">ast_vm_mailbox_snapshot_destroy()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00782">ast_vm_msg_forward()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00756">ast_vm_msg_move()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00799">ast_vm_msg_play()</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00770">ast_vm_msg_remove()</a>.</p>

</div>
</div>
<a id="a83280de5f04985d9f2f1c2485ae5d906"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83280de5f04985d9f2f1c2485ae5d906">&#9670;&nbsp;</a></span>VM_GREETER_API_CALL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VM_GREETER_API_CALL</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">res, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">api_call, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">api_parms&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a148">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00641">641</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00710">ast_app_sayname()</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a8a71094a6fa4c99ee8ba96185eab3ea5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a71094a6fa4c99ee8ba96185eab3ea5">&#9670;&nbsp;</a></span>control_tone_frame_response_result</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d3/d83/main_2app_8c.html#a8a71094a6fa4c99ee8ba96185eab3ea5">control_tone_frame_response_result</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a8a71094a6fa4c99ee8ba96185eab3ea5a44b954d1e48690a36cb2e1a054132635"></a>CONTROL_TONE_RESPONSE_FAILED&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a8a71094a6fa4c99ee8ba96185eab3ea5a5818a4ce31515b52e000e1050d93c8c6"></a>CONTROL_TONE_RESPONSE_NORMAL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a8a71094a6fa4c99ee8ba96185eab3ea5aefb1f436a8fb0238eb8c6dcb092431f5"></a>CONTROL_TONE_RESPONSE_FINISHED&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01334">1334</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;                                        {</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;   <a class="code" href="../../d3/d83/main_2app_8c.html#a8a71094a6fa4c99ee8ba96185eab3ea5a44b954d1e48690a36cb2e1a054132635">CONTROL_TONE_RESPONSE_FAILED</a> = -1,</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;   <a class="code" href="../../d3/d83/main_2app_8c.html#a8a71094a6fa4c99ee8ba96185eab3ea5a5818a4ce31515b52e000e1050d93c8c6">CONTROL_TONE_RESPONSE_NORMAL</a> = 0,</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;   <a class="code" href="../../d3/d83/main_2app_8c.html#a8a71094a6fa4c99ee8ba96185eab3ea5aefb1f436a8fb0238eb8c6dcb092431f5">CONTROL_TONE_RESPONSE_FINISHED</a> = 1,</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;};</div><div class="ttc" id="main_2app_8c_html_a8a71094a6fa4c99ee8ba96185eab3ea5a5818a4ce31515b52e000e1050d93c8c6"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a8a71094a6fa4c99ee8ba96185eab3ea5a5818a4ce31515b52e000e1050d93c8c6">CONTROL_TONE_RESPONSE_NORMAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01336">main/app.c:1336</a></div></div>
<div class="ttc" id="main_2app_8c_html_a8a71094a6fa4c99ee8ba96185eab3ea5aefb1f436a8fb0238eb8c6dcb092431f5"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a8a71094a6fa4c99ee8ba96185eab3ea5aefb1f436a8fb0238eb8c6dcb092431f5">CONTROL_TONE_RESPONSE_FINISHED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01337">main/app.c:1337</a></div></div>
<div class="ttc" id="main_2app_8c_html_a8a71094a6fa4c99ee8ba96185eab3ea5a44b954d1e48690a36cb2e1a054132635"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a8a71094a6fa4c99ee8ba96185eab3ea5a44b954d1e48690a36cb2e1a054132635">CONTROL_TONE_RESPONSE_FAILED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01335">main/app.c:1335</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a1b65265bef5e0d7110092144ba9ee4da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b65265bef5e0d7110092144ba9ee4da">&#9670;&nbsp;</a></span>__ast_app_separate_args()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int __ast_app_separate_args </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>delim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>remove_chars</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>arraylen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Separate a string into arguments in an array. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>The string to be parsed (this must be a writable copy, as it will be modified) </td></tr>
    <tr><td class="paramname">delim</td><td>The character to be used to delimit arguments </td></tr>
    <tr><td class="paramname">remove_chars</td><td>Remove backslashes and quote characters, while parsing </td></tr>
    <tr><td class="paramname">array</td><td>An array of 'char *' to be filled in with pointers to the found arguments </td></tr>
    <tr><td class="paramname">arraylen</td><td>The number of elements in the array (i.e. the number of arguments you will accept)</td></tr>
  </table>
  </dd>
</dl>
<p>Note: if there are more arguments in the string than the array will hold, the last element of the array will contain the remaining arguments, not separated.</p>
<p>The array will be completely zeroed by this function before it populates any entries.</p>
<dl class="section return"><dt>Returns</dt><dd>The number of arguments found, or zero if the function arguments are not valid. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02199">2199</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/d7e/ael__lex_8c_source.html#l00973">paren</a>, and <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01270">quote()</a>.</p>
<div class="fragment"><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;{</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;   <span class="keywordtype">int</span> argc;</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;   <span class="keywordtype">char</span> *scan, *wasdelim = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d2/d7e/ael__lex_8c.html#a0dec70156318396f15cc8305df9918ab">paren</a> = 0, <a class="code" href="../../d9/d1e/func__strings_8c.html#ab8fe909862ff885d9e233ff9ad5e54dd">quote</a> = 0, bracket = 0;</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d1e/func__strings_8c.html#ab6e308b3a41c01e08d252e071511495c">array</a> || !arraylen) {</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;   }</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;   memset(<a class="code" href="../../d9/d1e/func__strings_8c.html#ab6e308b3a41c01e08d252e071511495c">array</a>, 0, arraylen * <span class="keyword">sizeof</span>(*<a class="code" href="../../d9/d1e/func__strings_8c.html#ab6e308b3a41c01e08d252e071511495c">array</a>));</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>) {</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;   }</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;   scan = <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;   <span class="keywordflow">for</span> (argc = 0; *scan &amp;&amp; (argc &lt; arraylen - 1); argc++) {</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;      <a class="code" href="../../d9/d1e/func__strings_8c.html#ab6e308b3a41c01e08d252e071511495c">array</a>[argc] = scan;</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;      <span class="keywordflow">for</span> (; *scan; scan++) {</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;         <span class="keywordflow">if</span> (*scan == <span class="charliteral">&#39;(&#39;</span>) {</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;            paren++;</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*scan == <span class="charliteral">&#39;)&#39;</span>) {</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;            <span class="keywordflow">if</span> (paren) {</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;               paren--;</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;            }</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*scan == <span class="charliteral">&#39;[&#39;</span>) {</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;            bracket++;</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*scan == <span class="charliteral">&#39;]&#39;</span>) {</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;            <span class="keywordflow">if</span> (bracket) {</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;               bracket--;</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;            }</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*scan == <span class="charliteral">&#39;&quot;&#39;</span> &amp;&amp; delim != <span class="charliteral">&#39;&quot;&#39;</span>) {</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;            <a class="code" href="../../d9/d1e/func__strings_8c.html#ab8fe909862ff885d9e233ff9ad5e54dd">quote</a> = <a class="code" href="../../d9/d1e/func__strings_8c.html#ab8fe909862ff885d9e233ff9ad5e54dd">quote</a> ? 0 : 1;</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;            <span class="keywordflow">if</span> (remove_chars) {</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;               <span class="comment">/* Remove quote character from argument */</span></div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;               memmove(scan, scan + 1, strlen(scan));</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;               scan--;</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;            }</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*scan == <span class="charliteral">&#39;\\&#39;</span>) {</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;            <span class="keywordflow">if</span> (remove_chars) {</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;               <span class="comment">/* Literal character, don&#39;t parse */</span></div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;               memmove(scan, scan + 1, strlen(scan));</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;               scan++;</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;            }</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((*scan == delim) &amp;&amp; !paren &amp;&amp; !<a class="code" href="../../d9/d1e/func__strings_8c.html#ab8fe909862ff885d9e233ff9ad5e54dd">quote</a> &amp;&amp; !bracket) {</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;            wasdelim = scan;</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;            *scan++ = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;         }</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;      }</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;   }</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;   <span class="comment">/* If the last character in the original string was the delimiter, then</span></div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;<span class="comment">    * there is one additional argument. */</span></div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;   <span class="keywordflow">if</span> (*scan || (scan &gt; <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a> &amp;&amp; (scan - 1) == wasdelim)) {</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;      <a class="code" href="../../d9/d1e/func__strings_8c.html#ab6e308b3a41c01e08d252e071511495c">array</a>[argc++] = scan;</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;   }</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;   <span class="keywordflow">return</span> argc;</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="func__strings_8c_html_ab8fe909862ff885d9e233ff9ad5e54dd"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#ab8fe909862ff885d9e233ff9ad5e54dd">quote</a></div><div class="ttdeci">static int quote(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01270">func_strings.c:1270</a></div></div>
<div class="ttc" id="func__strings_8c_html_ab6e308b3a41c01e08d252e071511495c"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#ab6e308b3a41c01e08d252e071511495c">array</a></div><div class="ttdeci">static int array(struct ast_channel *chan, const char *cmd, char *var, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01017">func_strings.c:1017</a></div></div>
<div class="ttc" id="ael__lex_8c_html_a0dec70156318396f15cc8305df9918ab"><div class="ttname"><a href="../../d2/d7e/ael__lex_8c.html#a0dec70156318396f15cc8305df9918ab">paren</a></div><div class="ttdeci">#define paren</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d7e/ael__lex_8c_source.html#l00973">ael_lex.c:973</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a62eed141a738ca542b4373a0b078e431"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62eed141a738ca542b4373a0b078e431">&#9670;&nbsp;</a></span>__ast_play_and_record()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int __ast_play_and_record </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>playfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>recordfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxtime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>duration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>sound_duration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>beep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>silencethreshold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxsilence</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>prepend</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>acceptdtmf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>canceldtmf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>skip_confirmation_sound</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#ac665722c9bfe6d9b506df95184aa236d">ast_record_if_exists</a>&#160;</td>
          <td class="paramname"><em>if_exists</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Optionally play a sound file or a beep, then record audio and video from the channel. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>Channel to playback to/record from. </td></tr>
    <tr><td class="paramname">playfile</td><td>Filename of sound to play before recording begins. </td></tr>
    <tr><td class="paramname">recordfile</td><td>Filename to record to. </td></tr>
    <tr><td class="paramname">maxtime</td><td>Maximum length of recording (in seconds). </td></tr>
    <tr><td class="paramname">fmt</td><td>Format(s) to record message in. Multiple formats may be specified by separating them with a '|'. </td></tr>
    <tr><td class="paramname">duration</td><td>Where to store actual length of the recorded message (in milliseconds). </td></tr>
    <tr><td class="paramname">sound_duration</td><td>Where to store the length of the recorded message (in milliseconds), minus any silence </td></tr>
    <tr><td class="paramname">beep</td><td>Whether to play a beep before starting to record. </td></tr>
    <tr><td class="paramname">silencethreshold</td><td></td></tr>
    <tr><td class="paramname">maxsilence</td><td>Length of silence that will end a recording (in milliseconds). </td></tr>
    <tr><td class="paramname">path</td><td>Optional filesystem path to unlock. </td></tr>
    <tr><td class="paramname">prepend</td><td>If true, prepend the recorded audio to an existing file and follow prepend mode recording rules </td></tr>
    <tr><td class="paramname">acceptdtmf</td><td>DTMF digits that will end the recording. </td></tr>
    <tr><td class="paramname">canceldtmf</td><td>DTMF digits that will cancel the recording. </td></tr>
    <tr><td class="paramname">skip_confirmation_sound</td><td>If true, don't play auth-thankyou at end. Nice for custom recording prompts in apps.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>failure or hangup </td></tr>
    <tr><td class="paramname">'S'</td><td>Recording ended from silence timeout </td></tr>
    <tr><td class="paramname">'t'</td><td>Recording ended from the message exceeding the maximum duration, or via DTMF in prepend mode </td></tr>
    <tr><td class="paramname">dtmfchar</td><td>Recording ended via the return value's DTMF character for either cancel or accept. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Instead of asking how much time passed (end - start), calculate the number of seconds of audio which actually went into the file. This fixes a problem where audio is stopped up on the network and never gets to us.</dd></dl>
<p>Note that we still want to use the number of seconds passed for the max message, otherwise we could get a situation where this stream is never closed (which would create a resource leak).</p>
<dl class="section note"><dt>Note</dt><dd>If we ended with silence, trim all but the first 200ms of silence off the recording. However, if we ended with '#', we don't want to trim ANY part of the recording.</dd>
<dd>
Same logic as above. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a279">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01580">1580</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l08266">ast_channel_start_silence_generator()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l08312">ast_channel_stop_silence_generator()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01068">ast_closestream()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00339">AST_CONTROL_RECORD_CANCEL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00342">AST_CONTROL_RECORD_MUTE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00340">AST_CONTROL_RECORD_STOP</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00341">AST_CONTROL_RECORD_SUSPEND</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00295">AST_CONTROL_VIDUPDATE</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01770">ast_dsp_free()</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01745">ast_dsp_new()</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01775">ast_dsp_set_threshold()</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01483">ast_dsp_silence()</a>, <a class="el" href="../../db/db2/asterisk_8h_source.html#l00032">AST_FILE_MODE</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01098">ast_filedelete()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01103">ast_filerename()</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00334">ast_format_get_name()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">AST_FRAME_CONTROL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00139">AST_FRAME_DTMF</a>, <a class="el" href="../../df/d55/main_2frame_8c_source.html#l00187">ast_frame_dtor()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00103">AST_FRAME_VIDEO</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">AST_FRAME_VOICE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">ast_frfree</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04322">ast_indicate()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00121">AST_MAX_FORMATS</a>, <a class="el" href="../../d7/d5b/options_8h_source.html#l00124">ast_opt_transmit_silence</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01470">ast_play_and_wait()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04302">ast_read()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01309">ast_readfile()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00899">ast_readframe()</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01080">AST_RECORD_IF_EXISTS_APPEND</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01074">AST_RECORD_IF_EXISTS_ERROR</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01076">AST_RECORD_IF_EXISTS_FAIL</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01078">AST_RECORD_IF_EXISTS_OVERWRITE</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05849">ast_set_read_format()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01814">ast_stream_and_wait()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01063">ast_stream_rewind()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01048">ast_tellstream()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01043">ast_truncstream()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02473">ast_unlock_path()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l03171">ast_waitfor()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01361">ast_writefile()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00209">ast_writestream()</a>, <a class="el" href="../../d2/d7e/ael__lex_8c_source.html#l00976">comment</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00049">d</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">end</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01556">global_maxsilence</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01555">global_silence_threshold</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">ast_frame_subclass::integer</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01494">make_silence()</a>, <a class="el" href="../../d0/d8a/muted_8c_source.html#l00082">muted</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../db/db2/asterisk_8h_source.html#l00040">PATH_MAX</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01546">set_read_to_slin()</a>, <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>, and <a class="el" href="../../d5/d3b/dsp_8c_source.html#l00409">ast_dsp::totalsilence</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02002">ast_play_and_prepend()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01997">ast_play_and_record()</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01992">ast_play_and_record_full()</a>.</p>
<div class="fragment"><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;{</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a156f09c32102fa036620ad75c3ee4fbf">d</a> = 0;</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;   <span class="keywordtype">char</span> *fmts;</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d2/d7e/ael__lex_8c.html#a43be22b7a1b528eaf759e034ec581543">comment</a>[256];</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;   <span class="keywordtype">int</span> x, fmtcnt = 1, res = -1, outmsg = 0;</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *others[<a class="code" href="../../d3/d83/main_2app_8c.html#aa932272aad0c1610b79e9b04e54e57ea">AST_MAX_FORMATS</a>];</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *sfmt[<a class="code" href="../../d3/d83/main_2app_8c.html#aa932272aad0c1610b79e9b04e54e57ea">AST_MAX_FORMATS</a>];</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;   <span class="keywordtype">char</span> *stringp = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;   time_t start, <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/de5/structast__dsp.html">ast_dsp</a> *sildet = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;   <span class="comment">/* silence detector dsp */</span></div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d6/de5/structast__dsp.html#a37f3ccbb8c8ee286cec59a4b0340e924">totalsilence</a> = 0;</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;   <span class="keywordtype">int</span> dspsilence = 0;</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;   <span class="keywordtype">int</span> olddspsilence = 0;</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *rfmt = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/da1/structast__silence__generator.html">ast_silence_generator</a> *silgen = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;   <span class="keywordtype">char</span> prependfile[<a class="code" href="../../db/db2/asterisk_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>];</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;   <span class="keywordtype">int</span> ioflags;   <span class="comment">/* IO flags for writing output file */</span></div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;   ioflags = O_CREAT|O_WRONLY;</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;   <span class="keywordflow">switch</span> (if_exists) {</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac665722c9bfe6d9b506df95184aa236da1bede8c45deb750da65ee623e4f40d40">AST_RECORD_IF_EXISTS_FAIL</a>:</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;      ioflags |= O_EXCL;</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac665722c9bfe6d9b506df95184aa236da8022c0ca0ab8535428aed27423a40e2c">AST_RECORD_IF_EXISTS_OVERWRITE</a>:</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;      ioflags |= O_TRUNC;</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac665722c9bfe6d9b506df95184aa236da2e88c94599603bf2929a8c9d1f58b13f">AST_RECORD_IF_EXISTS_APPEND</a>:</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;      ioflags |= O_APPEND;</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac665722c9bfe6d9b506df95184aa236dadba683b279266f012721bd3839da240d">AST_RECORD_IF_EXISTS_ERROR</a>:</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;   }</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/df4/app__voicemail_8c.html#abebd9f51e7ff2f4d68f3952210219b4e">silencethreshold</a> &lt; 0) {</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;      <a class="code" href="../../dc/df4/app__voicemail_8c.html#abebd9f51e7ff2f4d68f3952210219b4e">silencethreshold</a> = <a class="code" href="../../d3/d83/main_2app_8c.html#a3773ab842af7870b63ad24f3c4d4a541">global_silence_threshold</a>;</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;   }</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/df4/app__voicemail_8c.html#ad87fa9ba37f50714bc922335b3b7ea91">maxsilence</a> &lt; 0) {</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;      <a class="code" href="../../dc/df4/app__voicemail_8c.html#ad87fa9ba37f50714bc922335b3b7ea91">maxsilence</a> = <a class="code" href="../../d3/d83/main_2app_8c.html#a0442dc13ea144464c2b3f9aa6e2d6417">global_maxsilence</a>;</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;   }</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;   <span class="comment">/* barf if no pointer passed to store duration in */</span></div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;   <span class="keywordflow">if</span> (!duration) {</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Error play_and_record called without duration pointer\n&quot;</span>);</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;   }</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;play_and_record: %s, %s, &#39;%s&#39;\n&quot;</span>, playfile ? playfile : <span class="stringliteral">&quot;&lt;None&gt;&quot;</span>, recordfile, fmt);</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;   snprintf(comment, <span class="keyword">sizeof</span>(comment), <span class="stringliteral">&quot;Playing %s, Recording to: %s on %s\n&quot;</span>, playfile ? playfile : <span class="stringliteral">&quot;&lt;None&gt;&quot;</span>, recordfile, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;   <span class="keywordflow">if</span> (playfile || beep) {</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;      <span class="keywordflow">if</span> (!beep) {</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;         d = <a class="code" href="../../d3/d83/main_2app_8c.html#abbbec6ab9a303e865a1d1a261152540d">ast_play_and_wait</a>(chan, playfile);</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;      }</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;      <span class="keywordflow">if</span> (d &gt; -1) {</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;         d = <a class="code" href="../../d2/d4d/file_8h.html#a95b94a020720147325a486e210b36775">ast_stream_and_wait</a>(chan, <span class="stringliteral">&quot;beep&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;      }</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;      <span class="keywordflow">if</span> (d &lt; 0) {</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;      }</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;   }</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;   <span class="keywordflow">if</span> (prepend) {</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(prependfile, recordfile, <span class="keyword">sizeof</span>(prependfile));</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;      strncat(prependfile, <span class="stringliteral">&quot;-prepend&quot;</span>, <span class="keyword">sizeof</span>(prependfile) - strlen(prependfile) - 1);</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;   }</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;   fmts = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(fmt);</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;   stringp = fmts;</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;   <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;stringp, <span class="stringliteral">&quot;|&quot;</span>);</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Recording Formats: sfmts=%s\n&quot;</span>, fmts);</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;   sfmt[0] = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(fmts);</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;   <span class="keywordflow">while</span> ((fmt = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;stringp, <span class="stringliteral">&quot;|&quot;</span>))) {</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;      <span class="keywordflow">if</span> (fmtcnt &gt; <a class="code" href="../../d3/d83/main_2app_8c.html#aa932272aad0c1610b79e9b04e54e57ea">AST_MAX_FORMATS</a> - 1) {</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Please increase AST_MAX_FORMATS in file.h\n&quot;</span>);</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;      }</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;<span class="comment">       * Storage for &#39;fmt&#39; is on the stack and held by &#39;fmts&#39;, which is maintained for</span></div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;<span class="comment">       * the rest of this function. So okay to not duplicate &#39;fmt&#39; here, but only keep</span></div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;<span class="comment">       * a pointer to it.</span></div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;      sfmt[fmtcnt++] = fmt;</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;   }</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;   end = start = time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);  <span class="comment">/* pre-initialize end to be same as start in case we never get into loop */</span></div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; fmtcnt; x++) {</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;      others[x] = <a class="code" href="../../d2/d4d/file_8h.html#a964f8ef393c07609d7b9e02937faed52">ast_writefile</a>(prepend ? prependfile : recordfile, sfmt[x], comment, ioflags, 0, <a class="code" href="../../db/db2/asterisk_8h.html#aa6293b2dae52a2b470494df672a26c42">AST_FILE_MODE</a>);</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;x=%d, open writing:  %s format: %s, %p\n&quot;</span>, x, prepend ? prependfile : recordfile, sfmt[x], others[x]);</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;      <span class="keywordflow">if</span> (!others[x]) {</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;      }</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;   }</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;   <span class="keywordflow">if</span> (path) {</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;      <a class="code" href="../../d3/d83/main_2app_8c.html#af6428878db94a4adf8136850e6a654f5">ast_unlock_path</a>(path);</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;   }</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/df4/app__voicemail_8c.html#ad87fa9ba37f50714bc922335b3b7ea91">maxsilence</a> &gt; 0) {</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;      sildet = <a class="code" href="../../d3/d08/dsp_8h.html#a0a60e93006c8e1ca8fda922ae0e0da2c">ast_dsp_new</a>(); <span class="comment">/* Create the silence detector */</span></div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;      <span class="keywordflow">if</span> (!sildet) {</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to create silence detector :(\n&quot;</span>);</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;      }</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;      <a class="code" href="../../d3/d08/dsp_8h.html#a06a0b883127ba1f853e9e0fa5f29d81b">ast_dsp_set_threshold</a>(sildet, <a class="code" href="../../dc/df4/app__voicemail_8c.html#abebd9f51e7ff2f4d68f3952210219b4e">silencethreshold</a>);</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;      res = <a class="code" href="../../d3/d83/main_2app_8c.html#ae16884d936b144343ed8d1b9fbe60617">set_read_to_slin</a>(chan, &amp;rfmt);</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;      <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to set to linear mode, giving up\n&quot;</span>);</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;         <a class="code" href="../../d3/d08/dsp_8h.html#a0a57a1e374549eb2705068688f4046db">ast_dsp_free</a>(sildet);</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(rfmt);</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;      }</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;   }</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;   <span class="keywordflow">if</span> (!prepend) {</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;      <span class="comment">/* Request a video update */</span></div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(chan, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a417bc8ac5817cc1525a3b530abfc1528">AST_CONTROL_VIDUPDATE</a>);</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5b/options_8h.html#afe8795c4ec744506a9300700fc0813dc">ast_opt_transmit_silence</a>) {</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;         silgen = <a class="code" href="../../d5/d7b/channel_8h.html#a2a2e0ff24c57491a877cac39cb670024">ast_channel_start_silence_generator</a>(chan);</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;      }</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;   }</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;   <span class="keywordflow">if</span> (x == fmtcnt) {</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;      <span class="comment">/* Loop, writing the packets we read to the writer(s), until</span></div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;<span class="comment">       * we have reason to stop. */</span></div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f;</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;      <span class="keywordtype">int</span> paused = 0;</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="../../d0/d8a/muted_8c.html#a89e6edfc95e7880a0713bd96189f7ec3">muted</a> = 0;</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;      time_t pause_start = 0;</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;      <span class="keywordtype">int</span> paused_secs = 0;</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;      <span class="keywordtype">int</span> pausedsilence = 0;</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;      <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;         <span class="keywordflow">if</span> (!(res = <a class="code" href="../../d5/d7b/channel_8h.html#a60e0bcaed001e8d5ed1ba0eb2644b3cc">ast_waitfor</a>(chan, 2000))) {</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;One waitfor failed, trying another\n&quot;</span>);</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;            <span class="comment">/* Try one more time in case of masq */</span></div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;            <span class="keywordflow">if</span> (!(res = <a class="code" href="../../d5/d7b/channel_8h.html#a60e0bcaed001e8d5ed1ba0eb2644b3cc">ast_waitfor</a>(chan, 2000))) {</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No audio available on %s??\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;               res = -1;</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;            }</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;         }</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;         <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;            f = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;         }</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;         <span class="keywordflow">if</span> (!(f = <a class="code" href="../../d5/d7b/channel_8h.html#a7ef6737309dc9e8b6c4a7cb4800638b1">ast_read</a>(chan))) {</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;         }</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;         <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>) {</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;            <span class="comment">/* write each format */</span></div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;            <span class="keywordflow">if</span> (paused) {</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;               <span class="comment">/* It&#39;s all good */</span></div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;               res = 0;</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;               <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *silence = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;               <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *orig = f;</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;               <span class="keywordflow">if</span> (muted) {</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;                  silence = <a class="code" href="../../d3/d83/main_2app_8c.html#acebf42e1b2956855f73e9dd7ef66d785">make_silence</a>(orig);</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;                  <span class="keywordflow">if</span> (!silence) {</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;                     <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Error creating silence\n&quot;</span>);</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;                     <span class="keywordflow">break</span>;</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;                  }</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;                  f = silence;</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;               }</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;               <span class="keywordflow">for</span> (x = 0; x &lt; fmtcnt; x++) {</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;                  <span class="keywordflow">if</span> (prepend &amp;&amp; !others[x]) {</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;                     <span class="keywordflow">break</span>;</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;                  }</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;                  res = <a class="code" href="../../d2/d4d/file_8h.html#a3608386b919ef0949d2858cdeb02d12e">ast_writestream</a>(others[x], f);</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;               }</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;               <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a31a8e2bf0224cfe62148232ed25e1aea">ast_frame_dtor</a>(silence);</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;               f = orig;</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;            }</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;            <span class="comment">/* Silence Detection */</span></div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../dc/df4/app__voicemail_8c.html#ad87fa9ba37f50714bc922335b3b7ea91">maxsilence</a> &gt; 0) {</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;               dspsilence = 0;</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;               <a class="code" href="../../d3/d08/dsp_8h.html#a3f3b67988bffb3addfbc8a4688fa466d">ast_dsp_silence</a>(sildet, f, &amp;dspsilence);</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;               <span class="keywordflow">if</span> (olddspsilence &gt; dspsilence) {</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;                  totalsilence += olddspsilence;</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;               }</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;               olddspsilence = dspsilence;</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;               <span class="keywordflow">if</span> (paused) {</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;                  <span class="comment">/* record how much silence there was while we are paused */</span></div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;                  pausedsilence = dspsilence;</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;               } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dspsilence &gt; pausedsilence) {</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;                  <span class="comment">/* ignore the paused silence */</span></div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;                  dspsilence -= pausedsilence;</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;                  <span class="comment">/* dspsilence has reset, reset pausedsilence */</span></div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;                  pausedsilence = 0;</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;               }</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;               <span class="keywordflow">if</span> (dspsilence &gt; <a class="code" href="../../dc/df4/app__voicemail_8c.html#ad87fa9ba37f50714bc922335b3b7ea91">maxsilence</a>) {</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;                  <span class="comment">/* Ended happily with silence */</span></div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;                  <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Recording automatically stopped after a silence of %d seconds\n&quot;</span>, dspsilence/1000);</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;                  res = <span class="charliteral">&#39;S&#39;</span>;</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;                  outmsg = 2;</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;               }</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;            }</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;            <span class="comment">/* Exit on any error */</span></div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;            <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Error writing frame\n&quot;</span>);</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;            }</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30">AST_FRAME_VIDEO</a>) {</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;            <span class="comment">/* Write only once */</span></div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#a3608386b919ef0949d2858cdeb02d12e">ast_writestream</a>(others[0], f);</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a>) {</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;            <span class="keywordflow">if</span> (prepend) {</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;            <span class="comment">/* stop recording with any digit */</span></div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;User ended message by pressing %c\n&quot;</span>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>);</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;               res = <span class="charliteral">&#39;t&#39;</span>;</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;               outmsg = 2;</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;            }</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;            <span class="keywordflow">if</span> (strchr(acceptdtmf, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>)) {</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;User ended message by pressing %c\n&quot;</span>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>);</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;               res = f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>;</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;               outmsg = 2;</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;            }</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;            <span class="keywordflow">if</span> (strchr(canceldtmf, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>)) {</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;User canceled message by pressing %c\n&quot;</span>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>);</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;               res = f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>;</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;               outmsg = 0;</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;            }</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>) {</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;            <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a192282f4ac45366cf94839e59e4659c2">AST_CONTROL_RECORD_CANCEL</a>) {</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Message canceled by control\n&quot;</span>);</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;               outmsg = 0; <span class="comment">/* cancels the recording */</span></div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;               res = 0;</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a84c4783c63eaa92e3ae2230e7f506401">AST_CONTROL_RECORD_STOP</a>) {</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Message ended by control\n&quot;</span>);</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;               res = 0;</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aef1bbb9ea8c75f2833076b583f99cdec">AST_CONTROL_RECORD_SUSPEND</a>) {</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;               paused = !paused;</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Message %spaused by control\n&quot;</span>,</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;                  paused ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;un&quot;</span>);</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;               <span class="keywordflow">if</span> (paused) {</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;                  pause_start = time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;                  paused_secs += time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) - pause_start;</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;               }</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9ed4c9cba00cfa3b18500f56d6210523">AST_CONTROL_RECORD_MUTE</a>) {</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;               muted = !<a class="code" href="../../d0/d8a/muted_8c.html#a89e6edfc95e7880a0713bd96189f7ec3">muted</a>;</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Message %smuted by control\n&quot;</span>,</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;                  muted ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;un&quot;</span>);</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;               <span class="comment">/* We can only silence slin frames, so</span></div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;<span class="comment">                * set the mode, if we haven&#39;t already</span></div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;<span class="comment">                * for sildet</span></div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;<span class="comment">                */</span></div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;               <span class="keywordflow">if</span> (muted &amp;&amp; !rfmt) {</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;                  <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Setting read format to linear mode\n&quot;</span>);</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;                  res = <a class="code" href="../../d3/d83/main_2app_8c.html#ae16884d936b144343ed8d1b9fbe60617">set_read_to_slin</a>(chan, &amp;rfmt);</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;                  <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;                     <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to set to linear mode, giving up\n&quot;</span>);</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;                     <span class="keywordflow">break</span>;</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;                  }</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;               }</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;            }</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;         }</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;         <span class="keywordflow">if</span> (maxtime &amp;&amp; !paused) {</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;            end = time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;            <span class="keywordflow">if</span> (maxtime &lt; (end - start - paused_secs)) {</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Took too long, cutting it short...\n&quot;</span>);</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;               res = <span class="charliteral">&#39;t&#39;</span>;</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;               outmsg = 2;</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;            }</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;         }</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;         <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;      }</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;      <span class="keywordflow">if</span> (!f) {</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;User hung up\n&quot;</span>);</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;         res = -1;</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;         outmsg = 1;</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;         <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;      }</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Error creating writestream &#39;%s&#39;, format &#39;%s&#39;\n&quot;</span>, recordfile, sfmt[x]);</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;   }</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;   <span class="keywordflow">if</span> (!prepend) {</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;      <span class="keywordflow">if</span> (silgen) {</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a6643cbe766a051d2d06750ab5b3e933d">ast_channel_stop_silence_generator</a>(chan, silgen);</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;      }</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;   }</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;<span class="comment">   /*!\note</span></div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;<span class="comment">    * Instead of asking how much time passed (end - start), calculate the number</span></div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;<span class="comment">    * of seconds of audio which actually went into the file.  This fixes a</span></div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;<span class="comment">    * problem where audio is stopped up on the network and never gets to us.</span></div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;<span class="comment">    * Note that we still want to use the number of seconds passed for the max</span></div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;<span class="comment">    * message, otherwise we could get a situation where this stream is never</span></div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;<span class="comment">    * closed (which would create a resource leak).</span></div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;   *duration = others[0] ? <a class="code" href="../../d2/d4d/file_8h.html#a01771a318e7adea51499040f27b4278a">ast_tellstream</a>(others[0]) / 8000 : 0;</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;   <span class="keywordflow">if</span> (sound_duration) {</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;      *sound_duration = *duration;</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;   }</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;   <span class="keywordflow">if</span> (!prepend) {</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;      <span class="comment">/* Reduce duration by a total silence amount */</span></div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;      <span class="keywordflow">if</span> (olddspsilence &lt;= dspsilence) {</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;         totalsilence += dspsilence;</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;      }</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;      <span class="keywordflow">if</span> (sound_duration) {</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;         <span class="keywordflow">if</span> (totalsilence &gt; 0) {</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;            *sound_duration -= (totalsilence - 200) / 1000;</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;         }</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;         <span class="keywordflow">if</span> (*sound_duration &lt; 0) {</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;            *sound_duration = 0;</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;         }</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;      }</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;      <span class="keywordflow">if</span> (dspsilence &gt; 0) {</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;         *duration -= (dspsilence - 200) / 1000;</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;      }</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;      <span class="keywordflow">if</span> (*duration &lt; 0) {</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;         *duration = 0;</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;      }</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;      <span class="keywordflow">for</span> (x = 0; x &lt; fmtcnt; x++) {</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;         <span class="keywordflow">if</span> (!others[x]) {</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;         }<span class="comment"></span></div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;<span class="comment">         /*!\note</span></div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;<span class="comment">          * If we ended with silence, trim all but the first 200ms of silence</span></div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;<span class="comment">          * off the recording.  However, if we ended with &#39;#&#39;, we don&#39;t want</span></div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;<span class="comment">          * to trim ANY part of the recording.</span></div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;         <span class="keywordflow">if</span> (res &gt; 0 &amp;&amp; dspsilence) {</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;            <span class="comment">/* rewind only the trailing silence */</span></div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#a4c7c02a659b09bb06dd63e1f42692666">ast_stream_rewind</a>(others[x], dspsilence - 200);</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;         }</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;         <a class="code" href="../../d2/d4d/file_8h.html#aa647ac352a00b559131f90ffffea2c3c">ast_truncstream</a>(others[x]);</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;         <a class="code" href="../../d2/d4d/file_8h.html#ab53bd2c3c55d509790c7f7620aac6373">ast_closestream</a>(others[x]);</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;      }</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (prepend &amp;&amp; outmsg) {</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *realfiles[<a class="code" href="../../d3/d83/main_2app_8c.html#aa932272aad0c1610b79e9b04e54e57ea">AST_MAX_FORMATS</a>];</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *fr;</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;      <span class="keywordflow">for</span> (x = 0; x &lt; fmtcnt; x++) {</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;         snprintf(comment, <span class="keyword">sizeof</span>(comment), <span class="stringliteral">&quot;Opening the real file %s.%s\n&quot;</span>, recordfile, sfmt[x]);</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;         realfiles[x] = <a class="code" href="../../d2/d4d/file_8h.html#ad572060ea434390db3d1ccde4511dfcd">ast_readfile</a>(recordfile, sfmt[x], comment, O_RDONLY, 0, 0);</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;         <span class="keywordflow">if</span> (!others[x]) {</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;         }</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;         <span class="keywordflow">if</span> (!realfiles[x]) {</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#ab53bd2c3c55d509790c7f7620aac6373">ast_closestream</a>(others[x]);</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;         }<span class="comment"></span></div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;<span class="comment">         /*!\note Same logic as above. */</span></div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;         <span class="keywordflow">if</span> (dspsilence) {</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#a4c7c02a659b09bb06dd63e1f42692666">ast_stream_rewind</a>(others[x], dspsilence - 200);</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;         }</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;         <a class="code" href="../../d2/d4d/file_8h.html#aa647ac352a00b559131f90ffffea2c3c">ast_truncstream</a>(others[x]);</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;         <span class="comment">/* add the original file too */</span></div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;         <span class="keywordflow">while</span> ((fr = <a class="code" href="../../d2/d4d/file_8h.html#a962bc31d7a953b0a0290c72b168d41a7">ast_readframe</a>(realfiles[x]))) {</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#a3608386b919ef0949d2858cdeb02d12e">ast_writestream</a>(others[x], fr);</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;            <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(fr);</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;         }</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;         <a class="code" href="../../d2/d4d/file_8h.html#ab53bd2c3c55d509790c7f7620aac6373">ast_closestream</a>(others[x]);</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;         <a class="code" href="../../d2/d4d/file_8h.html#ab53bd2c3c55d509790c7f7620aac6373">ast_closestream</a>(realfiles[x]);</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;         <a class="code" href="../../d2/d4d/file_8h.html#a57ea6065cde7fb5258c1f6a4595643ba">ast_filerename</a>(prependfile, recordfile, sfmt[x]);</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;Recording Format: sfmts=%s, prependfile %s, recordfile %s\n&quot;</span>, sfmt[x], prependfile, recordfile);</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;         <a class="code" href="../../d2/d4d/file_8h.html#adb15d6efecc1a13b8835bee6d3562ddb">ast_filedelete</a>(prependfile, sfmt[x]);</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;      }</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;      <span class="keywordflow">for</span> (x = 0; x &lt; fmtcnt; x++) {</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;         <span class="keywordflow">if</span> (!others[x]) {</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;         }</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;         <a class="code" href="../../d2/d4d/file_8h.html#ab53bd2c3c55d509790c7f7620aac6373">ast_closestream</a>(others[x]);</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;      }</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;   }</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;   <span class="keywordflow">if</span> (rfmt &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#a9107a83365cbf327cc0d12cb0dbd28d8">ast_set_read_format</a>(chan, rfmt)) {</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to restore format %s to channel &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(rfmt), <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;   }</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(rfmt);</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;   <span class="keywordflow">if</span> ((outmsg == 2) &amp;&amp; (!skip_confirmation_sound)) {</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;      <a class="code" href="../../d2/d4d/file_8h.html#a95b94a020720147325a486e210b36775">ast_stream_and_wait</a>(chan, <span class="stringliteral">&quot;auth-thankyou&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;   }</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;   <span class="keywordflow">if</span> (sildet) {</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;      <a class="code" href="../../d3/d08/dsp_8h.html#a0a57a1e374549eb2705068688f4046db">ast_dsp_free</a>(sildet);</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;   }</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;}</div><div class="ttc" id="include_2asterisk_2app_8h_html_ac665722c9bfe6d9b506df95184aa236da1bede8c45deb750da65ee623e4f40d40"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac665722c9bfe6d9b506df95184aa236da1bede8c45deb750da65ee623e4f40d40">AST_RECORD_IF_EXISTS_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01076">include/asterisk/app.h:1076</a></div></div>
<div class="ttc" id="structast__silence__generator_html"><div class="ttname"><a href="../../d9/da1/structast__silence__generator.html">ast_silence_generator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08262">channel.c:8262</a></div></div>
<div class="ttc" id="channel_8h_html_aef2af15a597c948e97628da6c5c84f28"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a></div><div class="ttdeci">int ast_indicate(struct ast_channel *chan, int condition)</div><div class="ttdoc">Indicates condition of channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04322">channel.c:4322</a></div></div>
<div class="ttc" id="dsp_8h_html_a0a57a1e374549eb2705068688f4046db"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a0a57a1e374549eb2705068688f4046db">ast_dsp_free</a></div><div class="ttdeci">void ast_dsp_free(struct ast_dsp *dsp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01770">dsp.c:1770</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="app__voicemail_8c_html_ad87fa9ba37f50714bc922335b3b7ea91"><div class="ttname"><a href="../../dc/df4/app__voicemail_8c.html#ad87fa9ba37f50714bc922335b3b7ea91">maxsilence</a></div><div class="ttdeci">static int maxsilence</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l00919">app_voicemail.c:919</a></div></div>
<div class="ttc" id="main_2app_8c_html_af6428878db94a4adf8136850e6a654f5"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#af6428878db94a4adf8136850e6a654f5">ast_unlock_path</a></div><div class="ttdeci">int ast_unlock_path(const char *path)</div><div class="ttdoc">Unlock a path. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02473">main/app.c:2473</a></div></div>
<div class="ttc" id="muted_8c_html_a89e6edfc95e7880a0713bd96189f7ec3"><div class="ttname"><a href="../../d0/d8a/muted_8c.html#a89e6edfc95e7880a0713bd96189f7ec3">muted</a></div><div class="ttdeci">static int muted</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00082">muted.c:82</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a156f09c32102fa036620ad75c3ee4fbf"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a156f09c32102fa036620ad75c3ee4fbf">d</a></div><div class="ttdeci">static struct test_val d</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00049">test_linkedlists.c:49</a></div></div>
<div class="ttc" id="dsp_8h_html_a0a60e93006c8e1ca8fda922ae0e0da2c"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a0a60e93006c8e1ca8fda922ae0e0da2c">ast_dsp_new</a></div><div class="ttdeci">struct ast_dsp * ast_dsp_new(void)</div><div class="ttdoc">Allocates a new dsp, assumes 8khz for internal sample rate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01745">dsp.c:1745</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">include/asterisk/frame.h:101</a></div></div>
<div class="ttc" id="channel_8h_html_a7ef6737309dc9e8b6c4a7cb4800638b1"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ef6737309dc9e8b6c4a7cb4800638b1">ast_read</a></div><div class="ttdeci">struct ast_frame * ast_read(struct ast_channel *chan)</div><div class="ttdoc">Reads a frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04302">channel.c:4302</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a192282f4ac45366cf94839e59e4659c2"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a192282f4ac45366cf94839e59e4659c2">AST_CONTROL_RECORD_CANCEL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00339">include/asterisk/frame.h:339</a></div></div>
<div class="ttc" id="structast__format_html"><div class="ttname"><a href="../../d0/d98/structast__format.html">ast_format</a></div><div class="ttdoc">Definition of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00043">format.c:43</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="options_8h_html_afe8795c4ec744506a9300700fc0813dc"><div class="ttname"><a href="../../d7/d5b/options_8h.html#afe8795c4ec744506a9300700fc0813dc">ast_opt_transmit_silence</a></div><div class="ttdeci">#define ast_opt_transmit_silence</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00124">options.h:124</a></div></div>
<div class="ttc" id="format_8h_html_a082f0fca94b18ba466f6e28d3ccb2fc8"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a></div><div class="ttdeci">const char * ast_format_get_name(const struct ast_format *format)</div><div class="ttdoc">Get the name associated with a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00334">format.c:334</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="file_8h_html_adb15d6efecc1a13b8835bee6d3562ddb"><div class="ttname"><a href="../../d2/d4d/file_8h.html#adb15d6efecc1a13b8835bee6d3562ddb">ast_filedelete</a></div><div class="ttdeci">int ast_filedelete(const char *filename, const char *fmt)</div><div class="ttdoc">Deletes a file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01098">file.c:1098</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a248afd6c02044259a386f6b7aee922a2"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a></div><div class="ttdeci">#define AST_FRAME_DTMF</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00139">include/asterisk/frame.h:139</a></div></div>
<div class="ttc" id="asterisk_8h_html_aa6293b2dae52a2b470494df672a26c42"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#aa6293b2dae52a2b470494df672a26c42">AST_FILE_MODE</a></div><div class="ttdeci">#define AST_FILE_MODE</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db2/asterisk_8h_source.html#l00032">asterisk.h:32</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390aef1bbb9ea8c75f2833076b583f99cdec"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aef1bbb9ea8c75f2833076b583f99cdec">AST_CONTROL_RECORD_SUSPEND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00341">include/asterisk/frame.h:341</a></div></div>
<div class="ttc" id="structast__dsp_html_a37f3ccbb8c8ee286cec59a4b0340e924"><div class="ttname"><a href="../../d6/de5/structast__dsp.html#a37f3ccbb8c8ee286cec59a4b0340e924">ast_dsp::totalsilence</a></div><div class="ttdeci">int totalsilence</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l00409">dsp.c:409</a></div></div>
<div class="ttc" id="file_8h_html_a01771a318e7adea51499040f27b4278a"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a01771a318e7adea51499040f27b4278a">ast_tellstream</a></div><div class="ttdeci">off_t ast_tellstream(struct ast_filestream *fs)</div><div class="ttdoc">Tell where we are in a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01048">file.c:1048</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a31a8e2bf0224cfe62148232ed25e1aea"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a31a8e2bf0224cfe62148232ed25e1aea">ast_frame_dtor</a></div><div class="ttdeci">void ast_frame_dtor(struct ast_frame *frame)</div><div class="ttdoc">NULL-safe wrapper for ast_frfree, good for RAII_VAR. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d55/main_2frame_8c_source.html#l00187">main/frame.c:187</a></div></div>
<div class="ttc" id="main_2app_8c_html_ae16884d936b144343ed8d1b9fbe60617"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#ae16884d936b144343ed8d1b9fbe60617">set_read_to_slin</a></div><div class="ttdeci">static int set_read_to_slin(struct ast_channel *chan, struct ast_format **orig_format)</div><div class="ttdoc">Sets a channel&amp;#39;s read format to AST_FORMAT_SLINEAR, recording its original format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01546">main/app.c:1546</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_adece183191b0e700e039e59101e06105"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">ast_frame_subclass::integer</a></div><div class="ttdeci">int integer</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">include/asterisk/frame.h:152</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="main_2app_8c_html_acebf42e1b2956855f73e9dd7ef66d785"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#acebf42e1b2956855f73e9dd7ef66d785">make_silence</a></div><div class="ttdeci">static struct ast_frame * make_silence(const struct ast_frame *orig)</div><div class="ttdoc">Construct a silence frame of the same duration as orig. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01494">main/app.c:1494</a></div></div>
<div class="ttc" id="channel_8h_html_a9107a83365cbf327cc0d12cb0dbd28d8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9107a83365cbf327cc0d12cb0dbd28d8">ast_set_read_format</a></div><div class="ttdeci">int ast_set_read_format(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdoc">Sets read format on channel chan. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05849">channel.c:5849</a></div></div>
<div class="ttc" id="structast__dsp_html"><div class="ttname"><a href="../../d6/de5/structast__dsp.html">ast_dsp</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l00405">dsp.c:405</a></div></div>
<div class="ttc" id="app__voicemail_8c_html_abebd9f51e7ff2f4d68f3952210219b4e"><div class="ttname"><a href="../../dc/df4/app__voicemail_8c.html#abebd9f51e7ff2f4d68f3952210219b4e">silencethreshold</a></div><div class="ttdeci">static int silencethreshold</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l00922">app_voicemail.c:922</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">include/asterisk/frame.h:105</a></div></div>
<div class="ttc" id="dsp_8h_html_a06a0b883127ba1f853e9e0fa5f29d81b"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a06a0b883127ba1f853e9e0fa5f29d81b">ast_dsp_set_threshold</a></div><div class="ttdeci">void ast_dsp_set_threshold(struct ast_dsp *dsp, int threshold)</div><div class="ttdoc">Set the minimum average magnitude threshold to determine talking by the DSP. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01775">dsp.c:1775</a></div></div>
<div class="ttc" id="channel_8h_html_a2a2e0ff24c57491a877cac39cb670024"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a2a2e0ff24c57491a877cac39cb670024">ast_channel_start_silence_generator</a></div><div class="ttdeci">struct ast_silence_generator * ast_channel_start_silence_generator(struct ast_channel *chan)</div><div class="ttdoc">Starts a silence generator on the given channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08266">channel.c:8266</a></div></div>
<div class="ttc" id="file_8h_html_a962bc31d7a953b0a0290c72b168d41a7"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a962bc31d7a953b0a0290c72b168d41a7">ast_readframe</a></div><div class="ttdeci">struct ast_frame * ast_readframe(struct ast_filestream *s)</div><div class="ttdoc">Read a frame from a filestream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00899">file.c:899</a></div></div>
<div class="ttc" id="file_8h_html_a4c7c02a659b09bb06dd63e1f42692666"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a4c7c02a659b09bb06dd63e1f42692666">ast_stream_rewind</a></div><div class="ttdeci">int ast_stream_rewind(struct ast_filestream *fs, off_t ms)</div><div class="ttdoc">Rewind stream ms. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01063">file.c:1063</a></div></div>
<div class="ttc" id="ael__lex_8c_html_a43be22b7a1b528eaf759e034ec581543"><div class="ttname"><a href="../../d2/d7e/ael__lex_8c.html#a43be22b7a1b528eaf759e034ec581543">comment</a></div><div class="ttdeci">#define comment</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d7e/ael__lex_8c_source.html#l00976">ael_lex.c:976</a></div></div>
<div class="ttc" id="file_8h_html_a964f8ef393c07609d7b9e02937faed52"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a964f8ef393c07609d7b9e02937faed52">ast_writefile</a></div><div class="ttdeci">struct ast_filestream * ast_writefile(const char *filename, const char *type, const char *comment, int flags, int check, mode_t mode)</div><div class="ttdoc">Starts writing a file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01361">file.c:1361</a></div></div>
<div class="ttc" id="channel_8h_html_a6643cbe766a051d2d06750ab5b3e933d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6643cbe766a051d2d06750ab5b3e933d">ast_channel_stop_silence_generator</a></div><div class="ttdeci">void ast_channel_stop_silence_generator(struct ast_channel *chan, struct ast_silence_generator *state)</div><div class="ttdoc">Stops a previously-started silence generator on the given channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08312">channel.c:8312</a></div></div>
<div class="ttc" id="file_8h_html_a95b94a020720147325a486e210b36775"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a95b94a020720147325a486e210b36775">ast_stream_and_wait</a></div><div class="ttdeci">int ast_stream_and_wait(struct ast_channel *chan, const char *file, const char *digits)</div><div class="ttdoc">stream file until digit If the file name is non-empty, try to play it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01814">file.c:1814</a></div></div>
<div class="ttc" id="file_8h_html_ab53bd2c3c55d509790c7f7620aac6373"><div class="ttname"><a href="../../d2/d4d/file_8h.html#ab53bd2c3c55d509790c7f7620aac6373">ast_closestream</a></div><div class="ttdeci">int ast_closestream(struct ast_filestream *f)</div><div class="ttdoc">Closes a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01068">file.c:1068</a></div></div>
<div class="ttc" id="main_2app_8c_html_abbbec6ab9a303e865a1d1a261152540d"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#abbbec6ab9a303e865a1d1a261152540d">ast_play_and_wait</a></div><div class="ttdeci">int ast_play_and_wait(struct ast_channel *chan, const char *fn)</div><div class="ttdoc">Play a stream and wait for a digit, returning the digit that was pressed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01470">main/app.c:1470</a></div></div>
<div class="ttc" id="file_8h_html_aa647ac352a00b559131f90ffffea2c3c"><div class="ttname"><a href="../../d2/d4d/file_8h.html#aa647ac352a00b559131f90ffffea2c3c">ast_truncstream</a></div><div class="ttdeci">int ast_truncstream(struct ast_filestream *fs)</div><div class="ttdoc">Trunc stream at current location. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01043">file.c:1043</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a9ed4c9cba00cfa3b18500f56d6210523"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9ed4c9cba00cfa3b18500f56d6210523">AST_CONTROL_RECORD_MUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00342">include/asterisk/frame.h:342</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac665722c9bfe6d9b506df95184aa236da8022c0ca0ab8535428aed27423a40e2c"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac665722c9bfe6d9b506df95184aa236da8022c0ca0ab8535428aed27423a40e2c">AST_RECORD_IF_EXISTS_OVERWRITE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01078">include/asterisk/app.h:1078</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a417bc8ac5817cc1525a3b530abfc1528"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a417bc8ac5817cc1525a3b530abfc1528">AST_CONTROL_VIDUPDATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00295">include/asterisk/frame.h:295</a></div></div>
<div class="ttc" id="dsp_8h_html_a3f3b67988bffb3addfbc8a4688fa466d"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a3f3b67988bffb3addfbc8a4688fa466d">ast_dsp_silence</a></div><div class="ttdeci">int ast_dsp_silence(struct ast_dsp *dsp, struct ast_frame *f, int *totalsilence)</div><div class="ttdoc">Process the audio frame for silence. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01483">dsp.c:1483</a></div></div>
<div class="ttc" id="main_2app_8c_html_a3773ab842af7870b63ad24f3c4d4a541"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a3773ab842af7870b63ad24f3c4d4a541">global_silence_threshold</a></div><div class="ttdeci">static int global_silence_threshold</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01555">main/app.c:1555</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac665722c9bfe6d9b506df95184aa236da2e88c94599603bf2929a8c9d1f58b13f"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac665722c9bfe6d9b506df95184aa236da2e88c94599603bf2929a8c9d1f58b13f">AST_RECORD_IF_EXISTS_APPEND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01080">include/asterisk/app.h:1080</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a84c4783c63eaa92e3ae2230e7f506401"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a84c4783c63eaa92e3ae2230e7f506401">AST_CONTROL_RECORD_STOP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00340">include/asterisk/frame.h:340</a></div></div>
<div class="ttc" id="structast__filestream_html"><div class="ttname"><a href="../../db/dbc/structast__filestream.html">ast_filestream</a></div><div class="ttdoc">This structure is allocated by file.c in one chunk, together with buf_size and desc_size bytes of mem...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00101">mod_format.h:101</a></div></div>
<div class="ttc" id="channel_8h_html_a60e0bcaed001e8d5ed1ba0eb2644b3cc"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a60e0bcaed001e8d5ed1ba0eb2644b3cc">ast_waitfor</a></div><div class="ttdeci">int ast_waitfor(struct ast_channel *chan, int ms)</div><div class="ttdoc">Wait for input on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03171">channel.c:3171</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="file_8h_html_a3608386b919ef0949d2858cdeb02d12e"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a3608386b919ef0949d2858cdeb02d12e">ast_writestream</a></div><div class="ttdeci">int ast_writestream(struct ast_filestream *fs, struct ast_frame *f)</div><div class="ttdoc">Writes a frame to a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00209">file.c:209</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a6440d070425a2efe8e0aa71e8d9e47b7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a></div><div class="ttdeci">#define ast_frfree(fr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">include/asterisk/frame.h:556</a></div></div>
<div class="ttc" id="main_2app_8c_html_a0442dc13ea144464c2b3f9aa6e2d6417"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a0442dc13ea144464c2b3f9aa6e2d6417">global_maxsilence</a></div><div class="ttdeci">static int global_maxsilence</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01556">main/app.c:1556</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="file_8h_html_ad572060ea434390db3d1ccde4511dfcd"><div class="ttname"><a href="../../d2/d4d/file_8h.html#ad572060ea434390db3d1ccde4511dfcd">ast_readfile</a></div><div class="ttdeci">struct ast_filestream * ast_readfile(const char *filename, const char *type, const char *comment, int flags, int check, mode_t mode)</div><div class="ttdoc">Starts reading from a file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01309">file.c:1309</a></div></div>
<div class="ttc" id="file_8h_html_a57ea6065cde7fb5258c1f6a4595643ba"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a57ea6065cde7fb5258c1f6a4595643ba">ast_filerename</a></div><div class="ttdeci">int ast_filerename(const char *oldname, const char *newname, const char *fmt)</div><div class="ttdoc">Renames a file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01103">file.c:1103</a></div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="asterisk_8h_html_ae688d728e1acdfe5988c7db45d6f0166"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a></div><div class="ttdeci">#define PATH_MAX</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db2/asterisk_8h_source.html#l00040">asterisk.h:40</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac665722c9bfe6d9b506df95184aa236dadba683b279266f012721bd3839da240d"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac665722c9bfe6d9b506df95184aa236dadba683b279266f012721bd3839da240d">AST_RECORD_IF_EXISTS_ERROR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01074">include/asterisk/app.h:1074</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30">AST_FRAME_VIDEO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00103">include/asterisk/frame.h:103</a></div></div>
<div class="ttc" id="main_2app_8c_html_aa932272aad0c1610b79e9b04e54e57ea"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#aa932272aad0c1610b79e9b04e54e57ea">AST_MAX_FORMATS</a></div><div class="ttdeci">#define AST_MAX_FORMATS</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00121">main/app.c:121</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0354eb3cde675cc872e2e445ad7de7d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0354eb3cde675cc872e2e445ad7de7d7">&#9670;&nbsp;</a></span>__ast_vm_greeter_register()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __ast_vm_greeter_register </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d0/d1e/structast__vm__greeter__functions.html">ast_vm_greeter_functions</a> *&#160;</td>
          <td class="paramname"><em>vm_table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td>
          <td class="paramname"><em>module</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set voicemail greeter function callbacks. </p>
<dl class="section since"><dt>Since</dt><dd>13.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vm_table</td><td>Voicemail greeter function table to install. </td></tr>
    <tr><td class="paramname">module</td><td>Pointer to the module implementing the interface</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
    <tr><td class="paramname">AST_MODULE_LOAD_DECLINE</td><td>if there's already another greeter registered. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00552">552</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00369">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00406">ao2_alloc_options</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00908">ao2_global_obj_replace_unref</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00078">AST_MODULE_LOAD_DECLINE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00629">ast_vm_greeter_functions::module</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00627">ast_vm_greeter_functions::module_name</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00625">ast_vm_greeter_functions::module_version</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d8/d56/cdr__odbc_8c_source.html#l00058">table</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00615">VM_GREETER_MODULE_VERSION</a>, and <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l15020">vm_table</a>.</p>
<div class="fragment"><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;{</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d1e/structast__vm__greeter__functions.html">ast_vm_greeter_functions</a> *, <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;   <span class="keywordflow">if</span> (!vm_table-&gt;<a class="code" href="../../d0/d1e/structast__vm__greeter__functions.html#a4c2d9327de87c6be0b54f793adc7f1fb">module_name</a>) {</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Voicemail greeter provider missing required information.\n&quot;</span>);</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;   }</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;   <span class="keywordflow">if</span> (vm_table-&gt;<a class="code" href="../../d0/d1e/structast__vm__greeter__functions.html#a19dd3d3916fd1aa9a70c45c43d24b6f5">module_version</a> != <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a789b147df36d769c1c0d55051f655c7f">VM_GREETER_MODULE_VERSION</a>) {</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Voicemail greeter provider &#39;%s&#39; has incorrect version\n&quot;</span>,</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;         vm_table-&gt;<a class="code" href="../../d0/d1e/structast__vm__greeter__functions.html#a4c2d9327de87c6be0b54f793adc7f1fb">module_name</a>);</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;   }</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;   <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(vm_greeter_provider);</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>) {</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Voicemail greeter provider already registered by %s.\n&quot;</span>,</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;         <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>-&gt;module_name);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;   }</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;   <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a>(<span class="keyword">sizeof</span>(*<a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>) {</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;   }</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;   *<a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a> = *<a class="code" href="../../dc/df4/app__voicemail_8c.html#a20bc535b35844236bae4c89b484435c5">vm_table</a>;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;   <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>-&gt;module = module;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a3a11e1a1d3e99bed3ea0a7c57a3880d7">ao2_global_obj_replace_unref</a>(vm_greeter_provider, <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;}</div><div class="ttc" id="structast__vm__greeter__functions_html_a19dd3d3916fd1aa9a70c45c43d24b6f5"><div class="ttname"><a href="../../d0/d1e/structast__vm__greeter__functions.html#a19dd3d3916fd1aa9a70c45c43d24b6f5">ast_vm_greeter_functions::module_version</a></div><div class="ttdeci">unsigned int module_version</div><div class="ttdoc">The version of this function table. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00625">include/asterisk/app.h:625</a></div></div>
<div class="ttc" id="app__voicemail_8c_html_a20bc535b35844236bae4c89b484435c5"><div class="ttname"><a href="../../dc/df4/app__voicemail_8c.html#a20bc535b35844236bae4c89b484435c5">vm_table</a></div><div class="ttdeci">static const struct ast_vm_functions vm_table</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l15020">app_voicemail.c:15020</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structast__vm__greeter__functions_html"><div class="ttname"><a href="../../d0/d1e/structast__vm__greeter__functions.html">ast_vm_greeter_functions</a></div><div class="ttdoc">Voicemail greeter function table definition. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00618">include/asterisk/app.h:618</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a789b147df36d769c1c0d55051f655c7f"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a789b147df36d769c1c0d55051f655c7f">VM_GREETER_MODULE_VERSION</a></div><div class="ttdeci">#define VM_GREETER_MODULE_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00615">include/asterisk/app.h:615</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab3c44e28d661616129b7819069effe61"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a></div><div class="ttdeci">#define ao2_alloc_options(data_size, destructor_fn, options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00406">astobj2.h:406</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cdr__odbc_8c_html_a68d1e6e752f2cf81551fac543cae108a"><div class="ttname"><a href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a></div><div class="ttdeci">static char * table</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d56/cdr__odbc_8c_source.html#l00058">cdr_odbc.c:58</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structast__vm__greeter__functions_html_a4c2d9327de87c6be0b54f793adc7f1fb"><div class="ttname"><a href="../../d0/d1e/structast__vm__greeter__functions.html#a4c2d9327de87c6be0b54f793adc7f1fb">ast_vm_greeter_functions::module_name</a></div><div class="ttdeci">const char * module_name</div><div class="ttdoc">The name of the module that provides the voicemail greeter functionality. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00627">include/asterisk/app.h:627</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a></div><div class="ttdoc">Module has failed to load, may be in an inconsistent state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00078">module.h:78</a></div></div>
<div class="ttc" id="astobj2_8h_html_a3a11e1a1d3e99bed3ea0a7c57a3880d7"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a3a11e1a1d3e99bed3ea0a7c57a3880d7">ao2_global_obj_replace_unref</a></div><div class="ttdeci">#define ao2_global_obj_replace_unref(holder, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00908">astobj2.h:908</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1ab8f4fb96c8ae6e8a04d9dcd30f160b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ab8f4fb96c8ae6e8a04d9dcd30f160b">&#9670;&nbsp;</a></span>__ast_vm_register()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __ast_vm_register </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../df/d7c/structast__vm__functions.html">ast_vm_functions</a> *&#160;</td>
          <td class="paramname"><em>vm_table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td>
          <td class="paramname"><em>module</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set voicemail function callbacks. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vm_table</td><td>Voicemail function table to install. </td></tr>
    <tr><td class="paramname">module</td><td>Pointer to the module implementing the interface</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
    <tr><td class="paramname">AST_MODULE_LOAD_DECLINE</td><td>if there's already another provider registered. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00441">441</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00369">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00406">ao2_alloc_options</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00908">ao2_global_obj_replace_unref</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00078">AST_MODULE_LOAD_DECLINE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00550">ast_vm_functions::module</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00548">ast_vm_functions::module_name</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00546">ast_vm_functions::module_version</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d8/d56/cdr__odbc_8c_source.html#l00058">table</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00536">VM_MODULE_VERSION</a>, and <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l15020">vm_table</a>.</p>
<div class="fragment"><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;{</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7c/structast__vm__functions.html">ast_vm_functions</a> *, <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;   <span class="keywordflow">if</span> (!vm_table-&gt;<a class="code" href="../../df/d7c/structast__vm__functions.html#a4c2d9327de87c6be0b54f793adc7f1fb">module_name</a>) {</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Voicemail provider missing required information.\n&quot;</span>);</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;   }</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;   <span class="keywordflow">if</span> (vm_table-&gt;<a class="code" href="../../df/d7c/structast__vm__functions.html#a19dd3d3916fd1aa9a70c45c43d24b6f5">module_version</a> != <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a846b39f5cdf1508035ac658f26a5e933">VM_MODULE_VERSION</a>) {</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Voicemail provider &#39;%s&#39; has incorrect version\n&quot;</span>,</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;         vm_table-&gt;<a class="code" href="../../df/d7c/structast__vm__functions.html#a4c2d9327de87c6be0b54f793adc7f1fb">module_name</a>);</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;   }</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;   <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(vm_provider);</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>) {</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Voicemail provider already registered by %s.\n&quot;</span>,</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;         <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>-&gt;module_name);</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;   }</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;   <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a>(<span class="keyword">sizeof</span>(*<a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>);</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>) {</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;   }</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;   *<a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a> = *<a class="code" href="../../dc/df4/app__voicemail_8c.html#a20bc535b35844236bae4c89b484435c5">vm_table</a>;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;   <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>-&gt;module = module;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a3a11e1a1d3e99bed3ea0a7c57a3880d7">ao2_global_obj_replace_unref</a>(vm_provider, <a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>);</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;}</div><div class="ttc" id="app__voicemail_8c_html_a20bc535b35844236bae4c89b484435c5"><div class="ttname"><a href="../../dc/df4/app__voicemail_8c.html#a20bc535b35844236bae4c89b484435c5">vm_table</a></div><div class="ttdeci">static const struct ast_vm_functions vm_table</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l15020">app_voicemail.c:15020</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab3c44e28d661616129b7819069effe61"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a></div><div class="ttdeci">#define ao2_alloc_options(data_size, destructor_fn, options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00406">astobj2.h:406</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cdr__odbc_8c_html_a68d1e6e752f2cf81551fac543cae108a"><div class="ttname"><a href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a></div><div class="ttdeci">static char * table</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d56/cdr__odbc_8c_source.html#l00058">cdr_odbc.c:58</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a846b39f5cdf1508035ac658f26a5e933"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a846b39f5cdf1508035ac658f26a5e933">VM_MODULE_VERSION</a></div><div class="ttdeci">#define VM_MODULE_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00536">include/asterisk/app.h:536</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a></div><div class="ttdoc">Module has failed to load, may be in an inconsistent state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00078">module.h:78</a></div></div>
<div class="ttc" id="structast__vm__functions_html_a4c2d9327de87c6be0b54f793adc7f1fb"><div class="ttname"><a href="../../df/d7c/structast__vm__functions.html#a4c2d9327de87c6be0b54f793adc7f1fb">ast_vm_functions::module_name</a></div><div class="ttdeci">const char * module_name</div><div class="ttdoc">The name of the module that provides the voicemail functionality. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00548">include/asterisk/app.h:548</a></div></div>
<div class="ttc" id="astobj2_8h_html_a3a11e1a1d3e99bed3ea0a7c57a3880d7"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a3a11e1a1d3e99bed3ea0a7c57a3880d7">ao2_global_obj_replace_unref</a></div><div class="ttdeci">#define ao2_global_obj_replace_unref(holder, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00908">astobj2.h:908</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__vm__functions_html_a19dd3d3916fd1aa9a70c45c43d24b6f5"><div class="ttname"><a href="../../df/d7c/structast__vm__functions.html#a19dd3d3916fd1aa9a70c45c43d24b6f5">ast_vm_functions::module_version</a></div><div class="ttdeci">unsigned int module_version</div><div class="ttdoc">The version of this function table. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00546">include/asterisk/app.h:546</a></div></div>
<div class="ttc" id="structast__vm__functions_html"><div class="ttname"><a href="../../df/d7c/structast__vm__functions.html">ast_vm_functions</a></div><div class="ttdoc">Voicemail function table definition. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00539">include/asterisk/app.h:539</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aba1706218d4c0220a263a5e8b07c8f2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba1706218d4c0220a263a5e8b07c8f2c">&#9670;&nbsp;</a></span>AO2_GLOBAL_OBJ_STATIC() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static AO2_GLOBAL_OBJ_STATIC </td>
          <td>(</td>
          <td class="paramtype">vm_provider&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The container for the voicemail provider. </p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00401">ast_app_run_sub()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00515">ast_vm_test_swap_table_out()</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00473">ast_vm_unregister()</a>.</p>

</div>
</div>
<a id="a1c44cd15ab364586b066ec58eca1f13e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c44cd15ab364586b066ec58eca1f13e">&#9670;&nbsp;</a></span>AO2_GLOBAL_OBJ_STATIC() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static AO2_GLOBAL_OBJ_STATIC </td>
          <td>(</td>
          <td class="paramtype">vm_provider_holder&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Holding container for the voicemail provider used while testing. </p>

</div>
</div>
<a id="a01a381cedccc84e6e5480064e4ce7893"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01a381cedccc84e6e5480064e4ce7893">&#9670;&nbsp;</a></span>AO2_GLOBAL_OBJ_STATIC() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static AO2_GLOBAL_OBJ_STATIC </td>
          <td>(</td>
          <td class="paramtype">vm_greeter_provider&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The container for the voicemail greeter provider. </p>

</div>
</div>
<a id="a7ed4aae8b86b928d2c0e0b84db9f5a15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ed4aae8b86b928d2c0e0b84db9f5a15">&#9670;&nbsp;</a></span>app_cleanup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void app_cleanup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a457">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l03194">3194</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00085">child_cap</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l03205">app_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;{</div><div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;<span class="preprocessor">#ifdef HAS_CAP</span></div><div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;   cap_free(<a class="code" href="../../d3/d83/main_2app_8c.html#a0e01e4a7836c72a22f08f824d366ffb0">child_cap</a>);</div><div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(<a class="code" href="../../d3/d83/main_2app_8c.html#a674c31d6219e0edf34999357375f77da">queue_topic_pool</a>);</div><div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;   <a class="code" href="../../d3/d83/main_2app_8c.html#a674c31d6219e0edf34999357375f77da">queue_topic_pool</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(<a class="code" href="../../d3/d83/main_2app_8c.html#a6faa8563ee6f21a1e504dd8b7c3dd5b2">queue_topic_all</a>);</div><div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;   <a class="code" href="../../d3/d83/main_2app_8c.html#a6faa8563ee6f21a1e504dd8b7c3dd5b2">queue_topic_all</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;}</div><div class="ttc" id="main_2app_8c_html_a6faa8563ee6f21a1e504dd8b7c3dd5b2"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a6faa8563ee6f21a1e504dd8b7c3dd5b2">queue_topic_all</a></div><div class="ttdeci">static struct stasis_topic * queue_topic_all</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00090">main/app.c:90</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="main_2app_8c_html_a674c31d6219e0edf34999357375f77da"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a674c31d6219e0edf34999357375f77da">queue_topic_pool</a></div><div class="ttdeci">static struct stasis_topic_pool * queue_topic_pool</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00091">main/app.c:91</a></div></div>
<div class="ttc" id="main_2app_8c_html_a0e01e4a7836c72a22f08f824d366ffb0"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a0e01e4a7836c72a22f08f824d366ffb0">child_cap</a></div><div class="ttdeci">static cap_t child_cap</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00085">main/app.c:85</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2e2efabbeb1c8c68790bb90ce01c4578"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e2efabbeb1c8c68790bb90ce01c4578">&#9670;&nbsp;</a></span>app_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int app_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the application core. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l03205">3205</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c_source.html#l03194">app_cleanup()</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00019">ast_register_cleanup()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00085">child_cap</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l00618">stasis_topic_create()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01833">stasis_topic_pool_create()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d03/asterisk_8c_source.html#l03947">asterisk_daemon()</a>.</p>
<div class="fragment"><div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;{</div><div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;   <a class="code" href="../../db/db2/asterisk_8h.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a>(<a class="code" href="../../d3/d83/main_2app_8c.html#a7ed4aae8b86b928d2c0e0b84db9f5a15">app_cleanup</a>);</div><div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;<span class="preprocessor">#ifdef HAVE_CAP</span></div><div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;   <a class="code" href="../../d3/d83/main_2app_8c.html#a0e01e4a7836c72a22f08f824d366ffb0">child_cap</a> = cap_from_text(<span class="stringliteral">&quot;cap_net_admin-eip&quot;</span>);</div><div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;   <a class="code" href="../../d3/d83/main_2app_8c.html#a6faa8563ee6f21a1e504dd8b7c3dd5b2">queue_topic_all</a> = <a class="code" href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a>(<span class="stringliteral">&quot;queue:all&quot;</span>);</div><div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d83/main_2app_8c.html#a6faa8563ee6f21a1e504dd8b7c3dd5b2">queue_topic_all</a>) {</div><div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;   }</div><div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;   <a class="code" href="../../d3/d83/main_2app_8c.html#a674c31d6219e0edf34999357375f77da">queue_topic_pool</a> = <a class="code" href="../../dd/d79/stasis_8h.html#aeb9a69946c2be89329630328f125330d">stasis_topic_pool_create</a>(<a class="code" href="../../d3/d83/main_2app_8c.html#a6faa8563ee6f21a1e504dd8b7c3dd5b2">queue_topic_all</a>);</div><div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d83/main_2app_8c.html#a674c31d6219e0edf34999357375f77da">queue_topic_pool</a>) {</div><div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;   }</div><div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;}</div><div class="ttc" id="main_2app_8c_html_a6faa8563ee6f21a1e504dd8b7c3dd5b2"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a6faa8563ee6f21a1e504dd8b7c3dd5b2">queue_topic_all</a></div><div class="ttdeci">static struct stasis_topic * queue_topic_all</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00090">main/app.c:90</a></div></div>
<div class="ttc" id="main_2app_8c_html_a7ed4aae8b86b928d2c0e0b84db9f5a15"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a7ed4aae8b86b928d2c0e0b84db9f5a15">app_cleanup</a></div><div class="ttdeci">static void app_cleanup(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l03194">main/app.c:3194</a></div></div>
<div class="ttc" id="stasis_8h_html_aeb9a69946c2be89329630328f125330d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#aeb9a69946c2be89329630328f125330d">stasis_topic_pool_create</a></div><div class="ttdeci">struct stasis_topic_pool * stasis_topic_pool_create(struct stasis_topic *pooled_topic)</div><div class="ttdoc">Create a topic pool that routes messages from dynamically generated topics to the given topic...</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01833">stasis.c:1833</a></div></div>
<div class="ttc" id="main_2app_8c_html_a674c31d6219e0edf34999357375f77da"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a674c31d6219e0edf34999357375f77da">queue_topic_pool</a></div><div class="ttdeci">static struct stasis_topic_pool * queue_topic_pool</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00091">main/app.c:91</a></div></div>
<div class="ttc" id="asterisk_8h_html_a412442e1beffe5bec07ed2e9ea72afc3"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a></div><div class="ttdeci">int ast_register_cleanup(void(*func)(void))</div><div class="ttdoc">Register a function to be executed before Asterisk gracefully exits. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00019">clicompat.c:19</a></div></div>
<div class="ttc" id="stasis_8h_html_acac26206b971b094c90839b4049cb6cc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#acac26206b971b094c90839b4049cb6cc">stasis_topic_create</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_create(const char *name)</div><div class="ttdoc">Create a new topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00618">stasis.c:618</a></div></div>
<div class="ttc" id="main_2app_8c_html_a0e01e4a7836c72a22f08f824d366ffb0"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a0e01e4a7836c72a22f08f824d366ffb0">child_cap</a></div><div class="ttdeci">static cap_t child_cap</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00085">main/app.c:85</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9f71d68f1b317e6d4ad5f8f820d4b50a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f71d68f1b317e6d4ad5f8f820d4b50a">&#9670;&nbsp;</a></span>ast_app_copy_recording_to_vm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_app_copy_recording_to_vm </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d45/structast__vm__recording__data.html">ast_vm_recording_data</a> *&#160;</td>
          <td class="paramname"><em>vm_rec_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>param[in] vm_rec_data Contains data needed to make the recording. retval 0 voicemail successfully created from recording. retval -1 Failure </p>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00669">669</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00620">VM_API_CALL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l00635">copy_to_voicemail()</a>.</p>
<div class="fragment"><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;{</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;   <span class="keywordtype">int</span> res = -1;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;   <a class="code" href="../../d3/d83/main_2app_8c.html#a12c075dae5bb61a239b853abf865fd67">VM_API_CALL</a>(res, copy_recording_to_vm, (vm_rec_data));</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;}</div><div class="ttc" id="main_2app_8c_html_a12c075dae5bb61a239b853abf865fd67"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a12c075dae5bb61a239b853abf865fd67">VM_API_CALL</a></div><div class="ttdeci">#define VM_API_CALL(res, api_call, api_parms)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00620">main/app.c:620</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af4825b337b9cd145a059852ce85ec6cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4825b337b9cd145a059852ce85ec6cd">&#9670;&nbsp;</a></span>ast_app_dtget()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_app_dtget </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>collect</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function presents a dialtone and reads an extension into 'collect' which must be a pointer to a <b>pre-initialized</b> array of char having a size of 'size' suitable for writing to. It will collect no more than the smaller of 'maxlen' or 'size' minus the original strlen() of collect digits. </p>
<p>Present a dialtone and collect a certain length extension.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>struct. </td></tr>
    <tr><td class="paramname">context</td><td></td></tr>
    <tr><td class="paramname">collect</td><td></td></tr>
    <tr><td class="paramname">size</td><td></td></tr>
    <tr><td class="paramname">maxlen</td><td></td></tr>
    <tr><td class="paramname">timeout</td><td>timeout in milliseconds</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if extension does not exist, 1 if extension exists </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00139">139</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00888">ast_channel_caller()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00721">ast_channel_pbx()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00745">ast_channel_zone()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l04179">ast_exists_extension()</a>, <a class="el" href="../../df/d6e/indications_8c_source.html#l00455">ast_get_indication_tone()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l06921">ast_ignore_pattern()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l04199">ast_matchmore_extension()</a>, <a class="el" href="../../df/d6e/indications_8c_source.html#l00302">ast_playtones_start()</a>, <a class="el" href="../../df/d6e/indications_8c_source.html#l00393">ast_playtones_stop()</a>, <a class="el" href="../../d2/d0f/indications_8h_source.html#l00227">ast_tone_zone_sound_unref()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l03184">ast_waitfordigit()</a>, <a class="el" href="../../d2/d0f/indications_8h_source.html#l00052">ast_tone_zone_sound::data</a>, <a class="el" href="../../db/de0/pbx_8h_source.html#l00212">ast_pbx::dtimeoutms</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d6/d90/strings_8h_source.html#l00085">S_COR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l03160">grab_transfer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;{</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dab/structast__tone__zone__sound.html">ast_tone_zone_sound</a> *ts;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;   <span class="keywordtype">int</span> res = 0, x = 0;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;   <span class="keywordflow">if</span> (maxlen &gt; size) {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      maxlen = size;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;   }</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>) {</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a488b7d6f7488bedc53be45d4ef4471c9">ast_channel_pbx</a>(chan) &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#a488b7d6f7488bedc53be45d4ef4471c9">ast_channel_pbx</a>(chan)-&gt;dtimeoutms) {</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;         <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a488b7d6f7488bedc53be45d4ef4471c9">ast_channel_pbx</a>(chan)-&gt;<a class="code" href="../../d6/d83/structast__pbx.html#a80a133d151de25445e8dfd09953a0872">dtimeoutms</a>;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;         <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> = 5000;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      }</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;   }</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;   <span class="keywordflow">if</span> ((ts = <a class="code" href="../../d2/d0f/indications_8h.html#a516be2823557000dcd4be685a44d1d09">ast_get_indication_tone</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a673d53e20b8ac75477469442f51314e1">ast_channel_zone</a>(chan), <span class="stringliteral">&quot;dial&quot;</span>))) {</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      res = <a class="code" href="../../d2/d0f/indications_8h.html#a544e8a1dd4a986b00754103dda6a7d3b">ast_playtones_start</a>(chan, 0, ts-&gt;<a class="code" href="../../d5/dab/structast__tone__zone__sound.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>, 0);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      ts = <a class="code" href="../../d2/d0f/indications_8h.html#a8b52ace68f21c0ac24414f038471647d">ast_tone_zone_sound_unref</a>(ts);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Huh....? no dial for indications?\n&quot;</span>);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;   }</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;   <span class="keywordflow">for</span> (x = strlen(collect); x &lt; maxlen; ) {</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      res = <a class="code" href="../../d5/d7b/channel_8h.html#a050bec9a4abc1a599b6573a6091b080c">ast_waitfordigit</a>(chan, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>);</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../db/de0/pbx_8h.html#aa73d176ed4f1ce51e5db6beafba45fe3">ast_ignore_pattern</a>(<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, collect)) {</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;         <a class="code" href="../../d2/d0f/indications_8h.html#a9d5be069b7060d326a213f5d60b8dc77">ast_playtones_stop</a>(chan);</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      }</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      <span class="keywordflow">if</span> (res &lt; 1) {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      }</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      <span class="keywordflow">if</span> (res == <span class="charliteral">&#39;#&#39;</span>) {</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      }</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      collect[x++] = res;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../db/de0/pbx_8h.html#ac359af75b9494f50904583d2168a7577">ast_matchmore_extension</a>(chan, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, collect, 1,</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.valid, <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.str, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;      }</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;   }</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;   <span class="keywordflow">if</span> (res &gt;= 0) {</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      res = <a class="code" href="../../db/de0/pbx_8h.html#a64a5b8fdc919806135ad427aca9e71b7">ast_exists_extension</a>(chan, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, collect, 1,</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.valid, <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.str, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) ? 1 : 0;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;   }</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;}</div><div class="ttc" id="channel_8h_html_ac2dc872b606534943c98304aed841b34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a></div><div class="ttdeci">struct ast_party_caller * ast_channel_caller(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00888">channel_internal_api.c:888</a></div></div>
<div class="ttc" id="pbx_8h_html_ac359af75b9494f50904583d2168a7577"><div class="ttname"><a href="../../db/de0/pbx_8h.html#ac359af75b9494f50904583d2168a7577">ast_matchmore_extension</a></div><div class="ttdeci">int ast_matchmore_extension(struct ast_channel *c, const char *context, const char *exten, int priority, const char *callerid)</div><div class="ttdoc">Looks to see if adding anything to this extension might match something. (exists ^ canmatch) ...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04199">pbx.c:4199</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="channel_8h_html_a673d53e20b8ac75477469442f51314e1"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a673d53e20b8ac75477469442f51314e1">ast_channel_zone</a></div><div class="ttdeci">struct ast_tone_zone * ast_channel_zone(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00745">channel_internal_api.c:745</a></div></div>
<div class="ttc" id="pbx_8h_html_aa73d176ed4f1ce51e5db6beafba45fe3"><div class="ttname"><a href="../../db/de0/pbx_8h.html#aa73d176ed4f1ce51e5db6beafba45fe3">ast_ignore_pattern</a></div><div class="ttdeci">int ast_ignore_pattern(const char *context, const char *pattern)</div><div class="ttdoc">Checks to see if a number should be ignored. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l06921">pbx.c:6921</a></div></div>
<div class="ttc" id="indications_8h_html_a9d5be069b7060d326a213f5d60b8dc77"><div class="ttname"><a href="../../d2/d0f/indications_8h.html#a9d5be069b7060d326a213f5d60b8dc77">ast_playtones_stop</a></div><div class="ttdeci">void ast_playtones_stop(struct ast_channel *chan)</div><div class="ttdoc">Stop playing tones on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d6e/indications_8c_source.html#l00393">indications.c:393</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="channel_8h_html_a488b7d6f7488bedc53be45d4ef4471c9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a488b7d6f7488bedc53be45d4ef4471c9">ast_channel_pbx</a></div><div class="ttdeci">struct ast_pbx * ast_channel_pbx(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00721">channel_internal_api.c:721</a></div></div>
<div class="ttc" id="strings_8h_html_a38a896048b2ca84076864505f0aa8f01"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a></div><div class="ttdeci">#define S_COR(a, b, c)</div><div class="ttdoc">returns the equivalent of logic or for strings, with an additional boolean check: second one if not e...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00085">strings.h:85</a></div></div>
<div class="ttc" id="indications_8h_html_a8b52ace68f21c0ac24414f038471647d"><div class="ttname"><a href="../../d2/d0f/indications_8h.html#a8b52ace68f21c0ac24414f038471647d">ast_tone_zone_sound_unref</a></div><div class="ttdeci">static struct ast_tone_zone_sound * ast_tone_zone_sound_unref(struct ast_tone_zone_sound *ts)</div><div class="ttdoc">Release a reference to an ast_tone_zone_sound. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0f/indications_8h_source.html#l00227">indications.h:227</a></div></div>
<div class="ttc" id="pbx_8h_html_a64a5b8fdc919806135ad427aca9e71b7"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a64a5b8fdc919806135ad427aca9e71b7">ast_exists_extension</a></div><div class="ttdeci">int ast_exists_extension(struct ast_channel *c, const char *context, const char *exten, int priority, const char *callerid)</div><div class="ttdoc">Determine whether an extension exists. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04179">pbx.c:4179</a></div></div>
<div class="ttc" id="structast__tone__zone__sound_html"><div class="ttname"><a href="../../d5/dab/structast__tone__zone__sound.html">ast_tone_zone_sound</a></div><div class="ttdoc">Description of a tone. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0f/indications_8h_source.html#l00035">indications.h:35</a></div></div>
<div class="ttc" id="indications_8h_html_a516be2823557000dcd4be685a44d1d09"><div class="ttname"><a href="../../d2/d0f/indications_8h.html#a516be2823557000dcd4be685a44d1d09">ast_get_indication_tone</a></div><div class="ttdeci">struct ast_tone_zone_sound * ast_get_indication_tone(const struct ast_tone_zone *zone, const char *indication)</div><div class="ttdoc">Locate a tone zone sound. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d6e/indications_8c_source.html#l00455">indications.c:455</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="channel_8h_html_a050bec9a4abc1a599b6573a6091b080c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a050bec9a4abc1a599b6573a6091b080c">ast_waitfordigit</a></div><div class="ttdeci">int ast_waitfordigit(struct ast_channel *c, int ms)</div><div class="ttdoc">Waits for a digit. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03184">channel.c:3184</a></div></div>
<div class="ttc" id="structast__pbx_html_a80a133d151de25445e8dfd09953a0872"><div class="ttname"><a href="../../d6/d83/structast__pbx.html#a80a133d151de25445e8dfd09953a0872">ast_pbx::dtimeoutms</a></div><div class="ttdeci">int dtimeoutms</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l00212">pbx.h:212</a></div></div>
<div class="ttc" id="indications_8h_html_a544e8a1dd4a986b00754103dda6a7d3b"><div class="ttname"><a href="../../d2/d0f/indications_8h.html#a544e8a1dd4a986b00754103dda6a7d3b">ast_playtones_start</a></div><div class="ttdeci">int ast_playtones_start(struct ast_channel *chan, int vol, const char *tonelist, int interruptible)</div><div class="ttdoc">Start playing a list of tones on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d6e/indications_8c_source.html#l00302">indications.c:302</a></div></div>
<div class="ttc" id="structast__tone__zone__sound_html_a8f64897c7ccc5c13f276d1d07c4e7095"><div class="ttname"><a href="../../d5/dab/structast__tone__zone__sound.html#a8f64897c7ccc5c13f276d1d07c4e7095">ast_tone_zone_sound::data</a></div><div class="ttdeci">const char * data</div><div class="ttdoc">Description of a tone. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0f/indications_8h_source.html#l00052">indications.h:52</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaf3af8d672383b48d194deb468074cbe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf3af8d672383b48d194deb468074cbe">&#9670;&nbsp;</a></span>ast_app_exec_macro()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_app_exec_macro </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>autoservice_chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>macro_chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>macro_args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run a macro on a channel, placing an optional second channel into autoservice. </p>
<dl class="section since"><dt>Since</dt><dd>11.0</dd></dl>
<p>This is a shorthand method that makes it very easy to run a macro on any given channel. It is perfectly reasonable to supply a NULL autoservice_chan here in case there is no channel to place into autoservice.</p>
<dl class="section note"><dt>Note</dt><dd>Absolutely <em>NO</em> channel locks should be held before calling this function.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">autoservice_chan</td><td>A channel to place into autoservice while the macro is run </td></tr>
    <tr><td class="paramname">macro_chan</td><td>Channel to execute macro on. </td></tr>
    <tr><td class="paramname">macro_args</td><td>Macro application argument string.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">-1</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00273">273</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00200">ast_autoservice_start()</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00266">ast_autoservice_stop()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00344">ast_channel_context()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00353">ast_channel_exten()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00444">ast_channel_priority()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00459">ast_check_hangup_locked()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01150">ast_queue_hangup()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dd/d16/pbx__app_8c_source.html#l00471">pbx_exec()</a>, and <a class="el" href="../../d2/db7/ael__main_8c_source.html#l00165">pbx_findapp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00320">ast_app_run_macro()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02254">dial_exec_full()</a>, <a class="el" href="../../d3/d5a/ccss_8c_source.html#l02816">generic_recall()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01211">run_app_helper()</a>, and <a class="el" href="../../da/dfb/app__queue_8c_source.html#l06722">try_calling()</a>.</p>
<div class="fragment"><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;{</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/da3/structast__app.html">ast_app</a> *macro_app;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;   macro_app = <a class="code" href="../../db/de0/pbx_8h.html#ad4a6912dcd2ad44a186d0a284afafc51">pbx_findapp</a>(<span class="stringliteral">&quot;Macro&quot;</span>);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;   <span class="keywordflow">if</span> (!macro_app) {</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;         <span class="stringliteral">&quot;Cannot run &#39;Macro(%s)&#39;.  The application is not available.\n&quot;</span>, macro_args);</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;   }</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;   <span class="keywordflow">if</span> (autoservice_chan) {</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7a8f6a50f3db42cb40cad7cfbd1d54f9">ast_autoservice_start</a>(autoservice_chan);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;   }</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(4, <span class="stringliteral">&quot;%s Original location: %s,%s,%d\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(macro_chan),</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(macro_chan), <a class="code" href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a>(macro_chan),</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a6610c8171ced0a69738622c11736ff5e">ast_channel_priority</a>(macro_chan));</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;   res = <a class="code" href="../../db/de0/pbx_8h.html#a6e3dbc57c03c23543354ef108c31fac8">pbx_exec</a>(macro_chan, macro_app, macro_args);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(4, <span class="stringliteral">&quot;Macro exited with status %d\n&quot;</span>, res);</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">    * Assume anything negative from Macro is an error.</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">    * Anything else is success.</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      res = -1;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      res = 0;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;   }</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(4, <span class="stringliteral">&quot;%s Ending location: %s,%s,%d\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(macro_chan),</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(macro_chan), <a class="code" href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a>(macro_chan),</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a6610c8171ced0a69738622c11736ff5e">ast_channel_priority</a>(macro_chan));</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;   <span class="keywordflow">if</span> (autoservice_chan) {</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a>(autoservice_chan);</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   }</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a723ac44c92b9edb6c1a731e01edacb4a">ast_check_hangup_locked</a>(macro_chan)) {</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a30bcf0418189567bc84ff32034f79f28">ast_queue_hangup</a>(macro_chan);</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;   }</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;}</div><div class="ttc" id="channel_8h_html_a30bcf0418189567bc84ff32034f79f28"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a30bcf0418189567bc84ff32034f79f28">ast_queue_hangup</a></div><div class="ttdeci">int ast_queue_hangup(struct ast_channel *chan)</div><div class="ttdoc">Queue a hangup frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01150">channel.c:1150</a></div></div>
<div class="ttc" id="channel_8h_html_a7a8f6a50f3db42cb40cad7cfbd1d54f9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7a8f6a50f3db42cb40cad7cfbd1d54f9">ast_autoservice_start</a></div><div class="ttdeci">int ast_autoservice_start(struct ast_channel *chan)</div><div class="ttdoc">Automatically service a channel for us... </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00200">autoservice.c:200</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e3dbc57c03c23543354ef108c31fac8"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e3dbc57c03c23543354ef108c31fac8">pbx_exec</a></div><div class="ttdeci">int pbx_exec(struct ast_channel *c, struct ast_app *app, const char *data)</div><div class="ttdoc">Execute an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00471">pbx_app.c:471</a></div></div>
<div class="ttc" id="channel_8h_html_a723ac44c92b9edb6c1a731e01edacb4a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a723ac44c92b9edb6c1a731e01edacb4a">ast_check_hangup_locked</a></div><div class="ttdeci">int ast_check_hangup_locked(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00459">channel.c:459</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="channel_8h_html_a6610c8171ced0a69738622c11736ff5e"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6610c8171ced0a69738622c11736ff5e">ast_channel_priority</a></div><div class="ttdeci">int ast_channel_priority(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00444">channel_internal_api.c:444</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="channel_8h_html_aa8b52fbc8168e939bc5553502367d46a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa8b52fbc8168e939bc5553502367d46a">ast_channel_exten</a></div><div class="ttdeci">const char * ast_channel_exten(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00353">channel_internal_api.c:353</a></div></div>
<div class="ttc" id="channel_8h_html_a08bde7d8cf72457fc8c519a4443b413b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a></div><div class="ttdeci">int ast_autoservice_stop(struct ast_channel *chan)</div><div class="ttdoc">Stop servicing a channel for us... </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00266">autoservice.c:266</a></div></div>
<div class="ttc" id="structast__app_html"><div class="ttname"><a href="../../d0/da3/structast__app.html">ast_app</a></div><div class="ttdoc">ast_app: A registered application </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00045">pbx_app.c:45</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channel_8h_html_a582dee4d5ea9b2ff6f309f0c5239f6bd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a></div><div class="ttdeci">const char * ast_channel_context(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00344">channel_internal_api.c:344</a></div></div>
<div class="ttc" id="pbx_8h_html_ad4a6912dcd2ad44a186d0a284afafc51"><div class="ttname"><a href="../../db/de0/pbx_8h.html#ad4a6912dcd2ad44a186d0a284afafc51">pbx_findapp</a></div><div class="ttdeci">struct ast_app * pbx_findapp(const char *app)</div><div class="ttdoc">Look up an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db7/ael__main_8c_source.html#l00165">ael_main.c:165</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aee5e20694b04eee43463fde6cf121d06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee5e20694b04eee43463fde6cf121d06">&#9670;&nbsp;</a></span>ast_app_exec_sub()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_app_exec_sub </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>autoservice_chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>sub_chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>sub_args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ignore_hangup</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run a subroutine on a channel, placing an optional second channel into autoservice. </p>
<dl class="section since"><dt>Since</dt><dd>11</dd></dl>
<p>This is a shorthand method that makes it very easy to run a subroutine on any given channel. It is perfectly reasonable to supply a NULL autoservice_chan here in case there is no channel to place into autoservice.</p>
<dl class="section note"><dt>Note</dt><dd>Absolutely <em>NO</em> channel locks should be held before calling this function.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">autoservice_chan</td><td>A channel to place into autoservice while the subroutine is run </td></tr>
    <tr><td class="paramname">sub_chan</td><td>Channel to execute subroutine on. </td></tr>
    <tr><td class="paramname">sub_args</td><td>Gosub application argument string. </td></tr>
    <tr><td class="paramname">ignore_hangup</td><td>TRUE if a hangup does not stop execution of the routine.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">-1</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00370">370</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00344">app_stack_callbacks</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00200">ast_autoservice_start()</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00266">ast_autoservice_stop()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00459">ast_check_hangup_locked()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00455">ast_module_running_ref</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00469">ast_module_unref</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01150">ast_queue_hangup()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00195">ast_app_stack_funcs::module</a>, and <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00209">ast_app_stack_funcs::run_sub</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d55/app__followme_8c_source.html#l01339">app_exec()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00401">ast_app_run_sub()</a>, <a class="el" href="../../d9/d53/pbx__hangup__handler_8c_source.html#l00058">ast_pbx_hangup_handler_run()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l06536">ast_pre_call()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02254">dial_exec_full()</a>, <a class="el" href="../../d3/d5a/ccss_8c_source.html#l02816">generic_recall()</a>, <a class="el" href="../../da/db1/app__originate_8c_source.html#l00173">originate_exec()</a>, <a class="el" href="../../d3/da4/app__page_8c_source.html#l00250">page_exec()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l08183">queue_exec()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01211">run_app_helper()</a>, and <a class="el" href="../../da/dfb/app__queue_8c_source.html#l06722">try_calling()</a>.</p>
<div class="fragment"><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;{</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d9/d3e/structast__app__stack__funcs.html">ast_app_stack_funcs</a> *funcs;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;   funcs = <a class="code" href="../../d3/d83/main_2app_8c.html#a469da08184562e4040d91459db01be10">app_stack_callbacks</a>;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;   <span class="keywordflow">if</span> (!funcs || !funcs-&gt;<a class="code" href="../../d9/d3e/structast__app__stack__funcs.html#a55ff830cab7753e929ad073af898830d">run_sub</a> || !<a class="code" href="../../d5/d16/module_8h.html#ad2dd3dce05926913c40b883cc7cff0a8">ast_module_running_ref</a>(funcs-&gt;<a class="code" href="../../d9/d3e/structast__app__stack__funcs.html#a59fcda1946fe2178896b5967065904e6">module</a>)) {</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;         <span class="stringliteral">&quot;Cannot run &#39;Gosub(%s)&#39;.  The app_stack module is not available.\n&quot;</span>,</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;         sub_args);</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;   }</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;   <span class="keywordflow">if</span> (autoservice_chan) {</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7a8f6a50f3db42cb40cad7cfbd1d54f9">ast_autoservice_start</a>(autoservice_chan);</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;   }</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;   res = funcs-&gt;<a class="code" href="../../d9/d3e/structast__app__stack__funcs.html#a55ff830cab7753e929ad073af898830d">run_sub</a>(sub_chan, sub_args, <a class="code" href="../../de/d26/app__externalivr_8c.html#ad7e8792fbe134499827a9171f0f6491ea96a84a93b0268cefea3c2be2d521e2c5">ignore_hangup</a>);</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#a15896c26e51e8162df5eb9a0124c841f">ast_module_unref</a>(funcs-&gt;<a class="code" href="../../d9/d3e/structast__app__stack__funcs.html#a59fcda1946fe2178896b5967065904e6">module</a>);</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;   <span class="keywordflow">if</span> (autoservice_chan) {</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a>(autoservice_chan);</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;   }</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../de/d26/app__externalivr_8c.html#ad7e8792fbe134499827a9171f0f6491ea96a84a93b0268cefea3c2be2d521e2c5">ignore_hangup</a> &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#a723ac44c92b9edb6c1a731e01edacb4a">ast_check_hangup_locked</a>(sub_chan)) {</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a30bcf0418189567bc84ff32034f79f28">ast_queue_hangup</a>(sub_chan);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;   }</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;}</div><div class="ttc" id="channel_8h_html_a30bcf0418189567bc84ff32034f79f28"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a30bcf0418189567bc84ff32034f79f28">ast_queue_hangup</a></div><div class="ttdeci">int ast_queue_hangup(struct ast_channel *chan)</div><div class="ttdoc">Queue a hangup frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01150">channel.c:1150</a></div></div>
<div class="ttc" id="app__externalivr_8c_html_ad7e8792fbe134499827a9171f0f6491ea96a84a93b0268cefea3c2be2d521e2c5"><div class="ttname"><a href="../../de/d26/app__externalivr_8c.html#ad7e8792fbe134499827a9171f0f6491ea96a84a93b0268cefea3c2be2d521e2c5">ignore_hangup</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/app__externalivr_8c_source.html#l00119">app_externalivr.c:119</a></div></div>
<div class="ttc" id="channel_8h_html_a7a8f6a50f3db42cb40cad7cfbd1d54f9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7a8f6a50f3db42cb40cad7cfbd1d54f9">ast_autoservice_start</a></div><div class="ttdeci">int ast_autoservice_start(struct ast_channel *chan)</div><div class="ttdoc">Automatically service a channel for us... </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00200">autoservice.c:200</a></div></div>
<div class="ttc" id="channel_8h_html_a723ac44c92b9edb6c1a731e01edacb4a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a723ac44c92b9edb6c1a731e01edacb4a">ast_check_hangup_locked</a></div><div class="ttdeci">int ast_check_hangup_locked(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00459">channel.c:459</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="module_8h_html_a15896c26e51e8162df5eb9a0124c841f"><div class="ttname"><a href="../../d5/d16/module_8h.html#a15896c26e51e8162df5eb9a0124c841f">ast_module_unref</a></div><div class="ttdeci">#define ast_module_unref(mod)</div><div class="ttdoc">Release a reference to the module. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00469">module.h:469</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="channel_8h_html_a08bde7d8cf72457fc8c519a4443b413b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a></div><div class="ttdeci">int ast_autoservice_stop(struct ast_channel *chan)</div><div class="ttdoc">Stop servicing a channel for us... </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00266">autoservice.c:266</a></div></div>
<div class="ttc" id="structast__app__stack__funcs_html_a59fcda1946fe2178896b5967065904e6"><div class="ttname"><a href="../../d9/d3e/structast__app__stack__funcs.html#a59fcda1946fe2178896b5967065904e6">ast_app_stack_funcs::module</a></div><div class="ttdeci">void * module</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00195">include/asterisk/app.h:195</a></div></div>
<div class="ttc" id="structast__app__stack__funcs_html"><div class="ttname"><a href="../../d9/d3e/structast__app__stack__funcs.html">ast_app_stack_funcs</a></div><div class="ttdoc">Stack applications callback functions. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00190">include/asterisk/app.h:190</a></div></div>
<div class="ttc" id="main_2app_8c_html_a469da08184562e4040d91459db01be10"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a469da08184562e4040d91459db01be10">app_stack_callbacks</a></div><div class="ttdeci">static const struct ast_app_stack_funcs * app_stack_callbacks</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00344">main/app.c:344</a></div></div>
<div class="ttc" id="structast__app__stack__funcs_html_a55ff830cab7753e929ad073af898830d"><div class="ttname"><a href="../../d9/d3e/structast__app__stack__funcs.html#a55ff830cab7753e929ad073af898830d">ast_app_stack_funcs::run_sub</a></div><div class="ttdeci">int(* run_sub)(struct ast_channel *chan, const char *args, int ignore_hangup)</div><div class="ttdoc">Callback for the routine to run a subroutine on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00209">include/asterisk/app.h:209</a></div></div>
<div class="ttc" id="module_8h_html_ad2dd3dce05926913c40b883cc7cff0a8"><div class="ttname"><a href="../../d5/d16/module_8h.html#ad2dd3dce05926913c40b883cc7cff0a8">ast_module_running_ref</a></div><div class="ttdeci">#define ast_module_running_ref(mod)</div><div class="ttdoc">Hold a reference to the module if it is running. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00455">module.h:455</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1a168653d77787b51d3447e5e80d42bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a168653d77787b51d3447e5e80d42bb">&#9670;&nbsp;</a></span>ast_app_expand_sub_args()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_app_expand_sub_args </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add missing context/exten to subroutine argument string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>Channel to obtain context/exten. </td></tr>
    <tr><td class="paramname">args</td><td>Gosub application argument string.</td></tr>
  </table>
  </dd>
</dl>
<p>Fills in the optional context and exten from the given channel.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">New-args</td><td>Gosub argument string on success. Must be freed. </td></tr>
    <tr><td class="paramname">NULL</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00351">351</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00344">app_stack_callbacks</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00455">ast_module_running_ref</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00469">ast_module_unref</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00223">ast_app_stack_funcs::expand_sub_args</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00195">ast_app_stack_funcs::module</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d55/app__followme_8c_source.html#l01339">app_exec()</a>, <a class="el" href="../../d9/d53/pbx__hangup__handler_8c_source.html#l00138">ast_pbx_hangup_handler_push()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02254">dial_exec_full()</a>, and <a class="el" href="../../d3/da4/app__page_8c_source.html#l00250">page_exec()</a>.</p>
<div class="fragment"><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;{</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d9/d3e/structast__app__stack__funcs.html">ast_app_stack_funcs</a> *funcs;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *new_args;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;   funcs = <a class="code" href="../../d3/d83/main_2app_8c.html#a469da08184562e4040d91459db01be10">app_stack_callbacks</a>;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;   <span class="keywordflow">if</span> (!funcs || !funcs-&gt;<a class="code" href="../../d9/d3e/structast__app__stack__funcs.html#a8ff1d595c8e420c7910771bf9b24794e">expand_sub_args</a> || !<a class="code" href="../../d5/d16/module_8h.html#ad2dd3dce05926913c40b883cc7cff0a8">ast_module_running_ref</a>(funcs-&gt;<a class="code" href="../../d9/d3e/structast__app__stack__funcs.html#a59fcda1946fe2178896b5967065904e6">module</a>)) {</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;         <span class="stringliteral">&quot;Cannot expand &#39;Gosub(%s)&#39; arguments.  The app_stack module is not available.\n&quot;</span>,</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;         <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>);</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;   }</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;   new_args = funcs-&gt;<a class="code" href="../../d9/d3e/structast__app__stack__funcs.html#a8ff1d595c8e420c7910771bf9b24794e">expand_sub_args</a>(chan, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>);</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#a15896c26e51e8162df5eb9a0124c841f">ast_module_unref</a>(funcs-&gt;<a class="code" href="../../d9/d3e/structast__app__stack__funcs.html#a59fcda1946fe2178896b5967065904e6">module</a>);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;   <span class="keywordflow">return</span> new_args;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="module_8h_html_a15896c26e51e8162df5eb9a0124c841f"><div class="ttname"><a href="../../d5/d16/module_8h.html#a15896c26e51e8162df5eb9a0124c841f">ast_module_unref</a></div><div class="ttdeci">#define ast_module_unref(mod)</div><div class="ttdoc">Release a reference to the module. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00469">module.h:469</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__app__stack__funcs_html_a59fcda1946fe2178896b5967065904e6"><div class="ttname"><a href="../../d9/d3e/structast__app__stack__funcs.html#a59fcda1946fe2178896b5967065904e6">ast_app_stack_funcs::module</a></div><div class="ttdeci">void * module</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00195">include/asterisk/app.h:195</a></div></div>
<div class="ttc" id="structast__app__stack__funcs_html"><div class="ttname"><a href="../../d9/d3e/structast__app__stack__funcs.html">ast_app_stack_funcs</a></div><div class="ttdoc">Stack applications callback functions. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00190">include/asterisk/app.h:190</a></div></div>
<div class="ttc" id="main_2app_8c_html_a469da08184562e4040d91459db01be10"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a469da08184562e4040d91459db01be10">app_stack_callbacks</a></div><div class="ttdeci">static const struct ast_app_stack_funcs * app_stack_callbacks</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00344">main/app.c:344</a></div></div>
<div class="ttc" id="module_8h_html_ad2dd3dce05926913c40b883cc7cff0a8"><div class="ttname"><a href="../../d5/d16/module_8h.html#ad2dd3dce05926913c40b883cc7cff0a8">ast_module_running_ref</a></div><div class="ttdeci">#define ast_module_running_ref(mod)</div><div class="ttdoc">Hold a reference to the module if it is running. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00455">module.h:455</a></div></div>
<div class="ttc" id="structast__app__stack__funcs_html_a8ff1d595c8e420c7910771bf9b24794e"><div class="ttname"><a href="../../d9/d3e/structast__app__stack__funcs.html#a8ff1d595c8e420c7910771bf9b24794e">ast_app_stack_funcs::expand_sub_args</a></div><div class="ttdeci">const char *(* expand_sub_args)(struct ast_channel *chan, const char *args)</div><div class="ttdoc">Add missing context/exten to Gosub application argument string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00223">include/asterisk/app.h:223</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5d7f1014795ff9db542b44fbf4a83ce1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d7f1014795ff9db542b44fbf4a83ce1">&#9670;&nbsp;</a></span>ast_app_getdata()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#a10624bc470a4ac2634221dfa74bdb17f">ast_getdata_result</a> ast_app_getdata </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>prompt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ast_app_getdata </p>
<p>Plays a stream and gets DTMF data from a channel.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">c</td><td>The channel to read from </td></tr>
    <tr><td class="paramname">prompt</td><td>The file to stream to the channel </td></tr>
    <tr><td class="paramname">s</td><td>The string to read in to. Must be at least the size of your length </td></tr>
    <tr><td class="paramname">maxlen</td><td>How many digits to read (maximum) </td></tr>
    <tr><td class="paramname">timeout</td><td>set timeout to 0 for "standard" timeouts. Set timeout to -1 for "ludicrous time" (essentially never times out) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00197">197</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00721">ast_channel_pbx()</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01161">AST_GETDATA_EMPTY_END_TERMINATED</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l06655">ast_readstring()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01250">ast_streamfile()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../db/de0/pbx_8h_source.html#l00212">ast_pbx::dtimeoutms</a>, <a class="el" href="../../db/de0/pbx_8h_source.html#l00213">ast_pbx::rtimeoutms</a>, <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep()</a>, and <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00086">timeout</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/d0f/app__authenticate_8c_source.html#l00116">auth_exec()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l04837">conf_exec()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l02350">conf_get_pin()</a>, <a class="el" href="../../dd/d32/app__dictate_8c_source.html#l00087">dictate_exec()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l04688">find_conf()</a>, <a class="el" href="../../d6/dbb/app__read_8c_source.html#l00127">read_exec()</a>, <a class="el" href="../../de/dfb/app__test_8c_source.html#l00154">testclient_exec()</a>, <a class="el" href="../../de/dfb/app__test_8c_source.html#l00329">testserver_exec()</a>, and <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l12278">vm_exec()</a>.</p>
<div class="fragment"><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;{</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;   <span class="keywordtype">int</span> res = 0, to, fto;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;   <span class="keywordtype">char</span> *front, *filename;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;   <span class="comment">/* XXX Merge with full version? XXX */</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;   <span class="keywordflow">if</span> (maxlen)</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      s[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d03/asterisk_8c.html#a299365a3d8977a6c410c6cd924e33136">prompt</a>)</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <a class="code" href="../../d5/d03/asterisk_8c.html#a299365a3d8977a6c410c6cd924e33136">prompt</a> = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;   filename = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#a299365a3d8977a6c410c6cd924e33136">prompt</a>);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;   <span class="keywordflow">while</span> ((front = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;filename, <span class="stringliteral">&quot;&amp;&quot;</span>))) {</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(front)) {</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;         res = <a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(c, front, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(c));</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;         <span class="keywordflow">if</span> (res)</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(filename)) {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;         <span class="comment">/* set timeouts for the last prompt */</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;         fto = <a class="code" href="../../d5/d7b/channel_8h.html#a488b7d6f7488bedc53be45d4ef4471c9">ast_channel_pbx</a>(c) ? <a class="code" href="../../d5/d7b/channel_8h.html#a488b7d6f7488bedc53be45d4ef4471c9">ast_channel_pbx</a>(c)-&gt;<a class="code" href="../../d6/d83/structast__pbx.html#a765bfb11e07b0f90c235c9af9d7f46fa">rtimeoutms</a> : 6000;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;         to = <a class="code" href="../../d5/d7b/channel_8h.html#a488b7d6f7488bedc53be45d4ef4471c9">ast_channel_pbx</a>(c) ? <a class="code" href="../../d5/d7b/channel_8h.html#a488b7d6f7488bedc53be45d4ef4471c9">ast_channel_pbx</a>(c)-&gt;<a class="code" href="../../d6/d83/structast__pbx.html#a80a133d151de25445e8dfd09953a0872">dtimeoutms</a> : 2000;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> &gt; 0) {</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            fto = to = <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;         }</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> &lt; 0) {</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            fto = to = 1000000000;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;         }</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;         <span class="comment">/* there is more than one prompt, so</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">          * get rid of the long timeout between</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">          * prompts, and make it 50ms */</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;         fto = 50;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;         to = <a class="code" href="../../d5/d7b/channel_8h.html#a488b7d6f7488bedc53be45d4ef4471c9">ast_channel_pbx</a>(c) ? <a class="code" href="../../d5/d7b/channel_8h.html#a488b7d6f7488bedc53be45d4ef4471c9">ast_channel_pbx</a>(c)-&gt;<a class="code" href="../../d6/d83/structast__pbx.html#a80a133d151de25445e8dfd09953a0872">dtimeoutms</a> : 2000;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      }</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      res = <a class="code" href="../../d5/d7b/channel_8h.html#ae68c6e4af7aba456ec08906cb9fb3140">ast_readstring</a>(c, s, maxlen, to, fto, <span class="stringliteral">&quot;#&quot;</span>);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <span class="keywordflow">if</span> (res == <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a10624bc470a4ac2634221dfa74bdb17fa94425459ee6ac7993c6289fde4d4ea8c">AST_GETDATA_EMPTY_END_TERMINATED</a>) {</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;         <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      }</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(s)) {</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;         <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      }</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;   }</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;}</div><div class="ttc" id="file_8h_html_a67c7e271b4ca70aca6d48fd48d121857"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a></div><div class="ttdeci">int ast_streamfile(struct ast_channel *c, const char *filename, const char *preflang)</div><div class="ttdoc">Streams a file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01250">file.c:1250</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a10624bc470a4ac2634221dfa74bdb17fa94425459ee6ac7993c6289fde4d4ea8c"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a10624bc470a4ac2634221dfa74bdb17fa94425459ee6ac7993c6289fde4d4ea8c">AST_GETDATA_EMPTY_END_TERMINATED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01161">include/asterisk/app.h:1161</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="channel_8h_html_a488b7d6f7488bedc53be45d4ef4471c9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a488b7d6f7488bedc53be45d4ef4471c9">ast_channel_pbx</a></div><div class="ttdeci">struct ast_pbx * ast_channel_pbx(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00721">channel_internal_api.c:721</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
<div class="ttc" id="structast__pbx_html_a80a133d151de25445e8dfd09953a0872"><div class="ttname"><a href="../../d6/d83/structast__pbx.html#a80a133d151de25445e8dfd09953a0872">ast_pbx::dtimeoutms</a></div><div class="ttdeci">int dtimeoutms</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l00212">pbx.h:212</a></div></div>
<div class="ttc" id="channel_8h_html_a9abe31fe40dcd03cd2957e5309e32ac6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a></div><div class="ttdeci">const char * ast_channel_language(const struct ast_channel *chan)</div></div>
<div class="ttc" id="asterisk_8c_html_a299365a3d8977a6c410c6cd924e33136"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a299365a3d8977a6c410c6cd924e33136">prompt</a></div><div class="ttdeci">static struct ast_str * prompt</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02725">asterisk.c:2725</a></div></div>
<div class="ttc" id="channel_8h_html_ae68c6e4af7aba456ec08906cb9fb3140"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae68c6e4af7aba456ec08906cb9fb3140">ast_readstring</a></div><div class="ttdeci">int ast_readstring(struct ast_channel *c, char *s, int len, int timeout, int rtimeout, char *enders)</div><div class="ttdoc">Reads multiple digits. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06655">channel.c:6655</a></div></div>
<div class="ttc" id="structast__pbx_html_a765bfb11e07b0f90c235c9af9d7f46fa"><div class="ttname"><a href="../../d6/d83/structast__pbx.html#a765bfb11e07b0f90c235c9af9d7f46fa">ast_pbx::rtimeoutms</a></div><div class="ttdeci">int rtimeoutms</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l00213">pbx.h:213</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a102e325938d4d6617af28b7f1afce7ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a102e325938d4d6617af28b7f1afce7ef">&#9670;&nbsp;</a></span>ast_app_getdata_full()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_app_getdata_full </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>prompt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>audiofd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ctrlfd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Full version with audiofd and controlfd. NOTE: returns '2' on ctrlfd available, not '1' like other full functions. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00250">250</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l06660">ast_readstring_full()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01250">ast_streamfile()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, and <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00086">timeout</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02834">handle_getdata()</a>.</p>
<div class="fragment"><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;{</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;   <span class="keywordtype">int</span> res, to = 2000, fto = 6000;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/d03/asterisk_8c.html#a299365a3d8977a6c410c6cd924e33136">prompt</a>)) {</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      res = <a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(c, <a class="code" href="../../d5/d03/asterisk_8c.html#a299365a3d8977a6c410c6cd924e33136">prompt</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(c));</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;      <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;         <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      }</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;   }</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> &gt; 0) {</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      fto = to = <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;   }</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> &lt; 0) {</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      fto = to = 1000000000;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;   }</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;   res = <a class="code" href="../../d5/d7b/channel_8h.html#a1d7f4bf19db3f1b8a3524593f002fedf">ast_readstring_full</a>(c, s, maxlen, to, fto, <span class="stringliteral">&quot;#&quot;</span>, audiofd, ctrlfd);</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;}</div><div class="ttc" id="file_8h_html_a67c7e271b4ca70aca6d48fd48d121857"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a></div><div class="ttdeci">int ast_streamfile(struct ast_channel *c, const char *filename, const char *preflang)</div><div class="ttdoc">Streams a file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01250">file.c:1250</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="channel_8h_html_a1d7f4bf19db3f1b8a3524593f002fedf"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1d7f4bf19db3f1b8a3524593f002fedf">ast_readstring_full</a></div><div class="ttdeci">int ast_readstring_full(struct ast_channel *c, char *s, int len, int timeout, int rtimeout, char *enders, int audiofd, int ctrlfd)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06660">channel.c:6660</a></div></div>
<div class="ttc" id="channel_8h_html_a9abe31fe40dcd03cd2957e5309e32ac6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a></div><div class="ttdeci">const char * ast_channel_language(const struct ast_channel *chan)</div></div>
<div class="ttc" id="asterisk_8c_html_a299365a3d8977a6c410c6cd924e33136"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#a299365a3d8977a6c410c6cd924e33136">prompt</a></div><div class="ttdeci">static struct ast_str * prompt</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l02725">asterisk.c:2725</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="add0f96b4b815205f528f5248ccb3d515"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add0f96b4b815205f528f5248ccb3d515">&#9670;&nbsp;</a></span>ast_app_group_discard()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_app_group_discard </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Discard all group counting for a channel. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02162">2162</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00569">AST_RWLIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00544">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00616">AST_RWLIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02939">ast_group_info::chan</a>, <a class="el" href="../../d0/d07/structast__group__info.html#acd9586542829317c2b39f35b99d63d56">ast_group_info::group_list</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d28/channel_8c_source.html#l02192">ast_channel_destructor()</a>.</p>
<div class="fragment"><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;{</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d07/structast__group__info.html">ast_group_info</a> *gi = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d9/d28/structgroups.html">groups</a>);</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../d9/d28/structgroups.html">groups</a>, gi, <a class="code" href="../../d0/d07/structast__group__info.html#acd9586542829317c2b39f35b99d63d56">group_list</a>) {</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;      <span class="keywordflow">if</span> (gi-&gt;<a class="code" href="../../d0/d07/structast__group__info.html#a84d1435c5b8d387806714ea7079304b7">chan</a> == chan) {</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a>(<a class="code" href="../../d0/d07/structast__group__info.html#acd9586542829317c2b39f35b99d63d56">group_list</a>);</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(gi);</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;      }</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;   }</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d9/d28/structgroups.html">groups</a>);</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;}</div><div class="ttc" id="structast__group__info_html"><div class="ttname"><a href="../../d0/d07/structast__group__info.html">ast_group_info</a></div><div class="ttdoc">channel group info </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02938">channel.h:2938</a></div></div>
<div class="ttc" id="structgroups_html"><div class="ttname"><a href="../../d9/d28/structgroups.html">groups</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00123">main/app.c:123</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a02212548652c9eb0f3db38dc4e4bd285"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE_CURRENT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00569">linkedlists.h:569</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a21be6da4b2146b04b4868c2be5cae750"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00544">linkedlists.h:544</a></div></div>
<div class="ttc" id="structast__group__info_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d0/d07/structast__group__info.html#a84d1435c5b8d387806714ea7079304b7">ast_group_info::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02939">channel.h:2939</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__group__info_html_acd9586542829317c2b39f35b99d63d56"><div class="ttname"><a href="../../d0/d07/structast__group__info.html#acd9586542829317c2b39f35b99d63d56">ast_group_info::group_list</a></div><div class="ttdeci">struct ast_group_info::@248 group_list</div></div>
<div class="ttc" id="linkedlists_8h_html_a6bf0e81cb6ef01532ddebaba68f6de28"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_END</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00616">linkedlists.h:616</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a026ae712c21ad8f1e8cde66467153838"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a026ae712c21ad8f1e8cde66467153838">&#9670;&nbsp;</a></span>ast_app_group_get_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_app_group_get_count </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>group</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>category</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the current channel count of the specified group and category. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02083">2083</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02940">ast_group_info::category</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02941">ast_group_info::group</a>, <a class="el" href="../../d0/d07/structast__group__info.html#acd9586542829317c2b39f35b99d63d56">ast_group_info::group_list</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d15/func__groupcount_8c_source.html#l00098">group_count_function_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;{</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d07/structast__group__info.html">ast_group_info</a> *gi = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;   <span class="keywordtype">int</span> count = 0;</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d3/d08/structgroup.html">group</a>)) {</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;   }</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d9/d28/structgroups.html">groups</a>);</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d9/d28/structgroups.html">groups</a>, gi, <a class="code" href="../../d0/d07/structast__group__info.html#acd9586542829317c2b39f35b99d63d56">group_list</a>) {</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(gi-&gt;<a class="code" href="../../d0/d07/structast__group__info.html#a443519726cbe3c4f2b2fe1d42ce2fd2f">group</a>, <a class="code" href="../../d3/d08/structgroup.html">group</a>) &amp;&amp; (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d0/d07/structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">category</a>) || (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(gi-&gt;<a class="code" href="../../d0/d07/structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">category</a>) &amp;&amp; !strcasecmp(gi-&gt;<a class="code" href="../../d0/d07/structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">category</a>, <a class="code" href="../../d0/d07/structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">category</a>)))) {</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;         count++;</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;      }</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;   }</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d9/d28/structgroups.html">groups</a>);</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;   <span class="keywordflow">return</span> count;</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;}</div><div class="ttc" id="structast__group__info_html"><div class="ttname"><a href="../../d0/d07/structast__group__info.html">ast_group_info</a></div><div class="ttdoc">channel group info </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02938">channel.h:2938</a></div></div>
<div class="ttc" id="structgroups_html"><div class="ttname"><a href="../../d9/d28/structgroups.html">groups</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00123">main/app.c:123</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="structast__group__info_html_a443519726cbe3c4f2b2fe1d42ce2fd2f"><div class="ttname"><a href="../../d0/d07/structast__group__info.html#a443519726cbe3c4f2b2fe1d42ce2fd2f">ast_group_info::group</a></div><div class="ttdeci">char * group</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02941">channel.h:2941</a></div></div>
<div class="ttc" id="structgroup_html"><div class="ttname"><a href="../../d3/d08/structgroup.html">group</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d35/func__dialgroup_8c_source.html#l00084">func_dialgroup.c:84</a></div></div>
<div class="ttc" id="structast__group__info_html_a37188acb1b82f625d3313bc88ca82314"><div class="ttname"><a href="../../d0/d07/structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">ast_group_info::category</a></div><div class="ttdeci">char * category</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02940">channel.h:2940</a></div></div>
<div class="ttc" id="structast__group__info_html_acd9586542829317c2b39f35b99d63d56"><div class="ttname"><a href="../../d0/d07/structast__group__info.html#acd9586542829317c2b39f35b99d63d56">ast_group_info::group_list</a></div><div class="ttdeci">struct ast_group_info::@248 group_list</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae351dc6f23997a800e7a743d6411b8e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae351dc6f23997a800e7a743d6411b8e7">&#9670;&nbsp;</a></span>ast_app_group_list_head()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d0/d07/structast__group__info.html">ast_group_info</a>* ast_app_group_list_head </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the head of the group count list. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02189">2189</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00422">AST_RWLIST_FIRST</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d15/func__groupcount_8c_source.html#l00098">group_count_function_read()</a>, <a class="el" href="../../d7/d15/func__groupcount_8c_source.html#l00175">group_function_read()</a>, <a class="el" href="../../d7/d15/func__groupcount_8c_source.html#l00240">group_list_function_read()</a>, and <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l01865">group_show_channels()</a>.</p>
<div class="fragment"><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;{</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../df/d90/linkedlists_8h.html#a64835fe6d570951b2a0404799c3d116f">AST_RWLIST_FIRST</a>(&amp;<a class="code" href="../../d9/d28/structgroups.html">groups</a>);</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;}</div><div class="ttc" id="structgroups_html"><div class="ttname"><a href="../../d9/d28/structgroups.html">groups</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00123">main/app.c:123</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a64835fe6d570951b2a0404799c3d116f"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a64835fe6d570951b2a0404799c3d116f">AST_RWLIST_FIRST</a></div><div class="ttdeci">#define AST_RWLIST_FIRST</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00422">linkedlists.h:422</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afa354da7388ee1882ac981396f143bda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa354da7388ee1882ac981396f143bda">&#9670;&nbsp;</a></span>ast_app_group_list_rdlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_app_group_list_rdlock </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read Lock the group count list. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02184">2184</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d15/func__groupcount_8c_source.html#l00098">group_count_function_read()</a>, <a class="el" href="../../d7/d15/func__groupcount_8c_source.html#l00175">group_function_read()</a>, <a class="el" href="../../d7/d15/func__groupcount_8c_source.html#l00240">group_list_function_read()</a>, and <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l01865">group_show_channels()</a>.</p>
<div class="fragment"><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;{</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d9/d28/structgroups.html">groups</a>);</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;}</div><div class="ttc" id="structgroups_html"><div class="ttname"><a href="../../d9/d28/structgroups.html">groups</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00123">main/app.c:123</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa3d01e65e04cddfa84781590b37732e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3d01e65e04cddfa84781590b37732e8">&#9670;&nbsp;</a></span>ast_app_group_list_unlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_app_group_list_unlock </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unlock the group count list. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02194">2194</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d15/func__groupcount_8c_source.html#l00098">group_count_function_read()</a>, <a class="el" href="../../d7/d15/func__groupcount_8c_source.html#l00175">group_function_read()</a>, <a class="el" href="../../d7/d15/func__groupcount_8c_source.html#l00240">group_list_function_read()</a>, and <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l01865">group_show_channels()</a>.</p>
<div class="fragment"><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;{</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d9/d28/structgroups.html">groups</a>);</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;}</div><div class="ttc" id="structgroups_html"><div class="ttname"><a href="../../d9/d28/structgroups.html">groups</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00123">main/app.c:123</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6d1783b818b130e529c611e710beafe9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d1783b818b130e529c611e710beafe9">&#9670;&nbsp;</a></span>ast_app_group_list_wrlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_app_group_list_wrlock </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write Lock the group count list. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02179">2179</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>.</p>
<div class="fragment"><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;{</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d9/d28/structgroups.html">groups</a>);</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;}</div><div class="ttc" id="structgroups_html"><div class="ttname"><a href="../../d9/d28/structgroups.html">groups</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00123">main/app.c:123</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a687e664c7fb3bb2acb4f5fa17f28d3a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a687e664c7fb3bb2acb4f5fa17f28d3a2">&#9670;&nbsp;</a></span>ast_app_group_match_get_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_app_group_match_get_count </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>groupmatch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>category</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the current channel count of all groups that match the specified pattern and category. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02103">2103</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02940">ast_group_info::category</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02941">ast_group_info::group</a>, <a class="el" href="../../d0/d07/structast__group__info.html#acd9586542829317c2b39f35b99d63d56">ast_group_info::group_list</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/dc7/test__app_8c_source.html#l00124">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d7/d15/func__groupcount_8c_source.html#l00148">group_match_count_function_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;{</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d07/structast__group__info.html">ast_group_info</a> *gi = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;   regex_t regexbuf_group;</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;   regex_t regexbuf_category;</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;   <span class="keywordtype">int</span> count = 0;</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(groupmatch)) {</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;groupmatch empty\n&quot;</span>);</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;   }</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;   <span class="comment">/* if regex compilation fails, return zero matches */</span></div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;   <span class="keywordflow">if</span> (regcomp(&amp;regexbuf_group, groupmatch, REG_EXTENDED | REG_NOSUB)) {</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Regex compile failed on: %s\n&quot;</span>, groupmatch);</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;   }</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d0/d07/structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">category</a>) &amp;&amp; regcomp(&amp;regexbuf_category, <a class="code" href="../../d0/d07/structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">category</a>, REG_EXTENDED | REG_NOSUB)) {</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Regex compile failed on: %s\n&quot;</span>, <a class="code" href="../../d0/d07/structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">category</a>);</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;      regfree(&amp;regexbuf_group);</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;   }</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d9/d28/structgroups.html">groups</a>);</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d9/d28/structgroups.html">groups</a>, gi, <a class="code" href="../../d0/d07/structast__group__info.html#acd9586542829317c2b39f35b99d63d56">group_list</a>) {</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;      <span class="keywordflow">if</span> (!regexec(&amp;regexbuf_group, gi-&gt;<a class="code" href="../../d0/d07/structast__group__info.html#a443519726cbe3c4f2b2fe1d42ce2fd2f">group</a>, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0) &amp;&amp; (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d0/d07/structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">category</a>) || (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(gi-&gt;<a class="code" href="../../d0/d07/structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">category</a>) &amp;&amp; !regexec(&amp;regexbuf_category, gi-&gt;<a class="code" href="../../d0/d07/structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">category</a>, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0)))) {</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;         count++;</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;      }</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;   }</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d9/d28/structgroups.html">groups</a>);</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;   regfree(&amp;regexbuf_group);</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d0/d07/structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">category</a>)) {</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;      regfree(&amp;regexbuf_category);</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;   }</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;   <span class="keywordflow">return</span> count;</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;}</div><div class="ttc" id="structast__group__info_html"><div class="ttname"><a href="../../d0/d07/structast__group__info.html">ast_group_info</a></div><div class="ttdoc">channel group info </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02938">channel.h:2938</a></div></div>
<div class="ttc" id="structgroups_html"><div class="ttname"><a href="../../d9/d28/structgroups.html">groups</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00123">main/app.c:123</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="structast__group__info_html_a443519726cbe3c4f2b2fe1d42ce2fd2f"><div class="ttname"><a href="../../d0/d07/structast__group__info.html#a443519726cbe3c4f2b2fe1d42ce2fd2f">ast_group_info::group</a></div><div class="ttdeci">char * group</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02941">channel.h:2941</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="structast__group__info_html_a37188acb1b82f625d3313bc88ca82314"><div class="ttname"><a href="../../d0/d07/structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">ast_group_info::category</a></div><div class="ttdeci">char * category</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02940">channel.h:2940</a></div></div>
<div class="ttc" id="structast__group__info_html_acd9586542829317c2b39f35b99d63d56"><div class="ttname"><a href="../../d0/d07/structast__group__info.html#acd9586542829317c2b39f35b99d63d56">ast_group_info::group_list</a></div><div class="ttdeci">struct ast_group_info::@248 group_list</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6bd3fac13a76cd864600a84ffd66724e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bd3fac13a76cd864600a84ffd66724e">&#9670;&nbsp;</a></span>ast_app_group_set_channel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_app_group_set_channel </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the group for a channel, splitting the provided data into group and category, if specified. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02036">2036</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02009">ast_app_group_split_group()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00740">AST_RWLIST_INSERT_TAIL</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00569">AST_RWLIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00544">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00616">AST_RWLIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02940">ast_group_info::category</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02939">ast_group_info::chan</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02941">ast_group_info::group</a>, <a class="el" href="../../d0/d07/structast__group__info.html#acd9586542829317c2b39f35b99d63d56">ast_group_info::group_list</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/dc7/test__app_8c_source.html#l00124">AST_TEST_DEFINE()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02254">dial_exec_full()</a>, and <a class="el" href="../../d7/d15/func__groupcount_8c_source.html#l00207">group_function_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;{</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d3/d08/structgroup.html">group</a>[80] = <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="../../d0/d07/structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">category</a>[80] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d07/structast__group__info.html">ast_group_info</a> *gi = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;   <span class="keywordtype">size_t</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = 0;</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d83/main_2app_8c.html#ab926dd29fc418cde5b67a00ba914cd2c">ast_app_group_split_group</a>(data, group, <span class="keyword">sizeof</span>(group), <a class="code" href="../../d0/d07/structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">category</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d07/structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">category</a>))) {</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;   }</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;   <span class="comment">/* Calculate memory we will need if this is new */</span></div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;   len = <span class="keyword">sizeof</span>(*gi) + strlen(group) + 1;</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d0/d07/structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">category</a>)) {</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;      len += strlen(<a class="code" href="../../d0/d07/structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">category</a>) + 1;</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;   }</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d9/d28/structgroups.html">groups</a>);</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../d9/d28/structgroups.html">groups</a>, gi, <a class="code" href="../../d0/d07/structast__group__info.html#acd9586542829317c2b39f35b99d63d56">group_list</a>) {</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;      <span class="keywordflow">if</span> ((gi-&gt;<a class="code" href="../../d0/d07/structast__group__info.html#a84d1435c5b8d387806714ea7079304b7">chan</a> == chan) &amp;&amp; ((<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d0/d07/structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">category</a>) &amp;&amp; <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(gi-&gt;<a class="code" href="../../d0/d07/structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">category</a>)) || (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(gi-&gt;<a class="code" href="../../d0/d07/structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">category</a>) &amp;&amp; !strcasecmp(gi-&gt;<a class="code" href="../../d0/d07/structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">category</a>, <a class="code" href="../../d0/d07/structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">category</a>)))) {</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a>(<a class="code" href="../../d0/d07/structast__group__info.html#acd9586542829317c2b39f35b99d63d56">group_list</a>);</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(gi);</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;      }</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;   }</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(group)) {</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;      <span class="comment">/* Enable unsetting the group */</span></div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((gi = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, len))) {</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;      gi-&gt;<a class="code" href="../../d0/d07/structast__group__info.html#a84d1435c5b8d387806714ea7079304b7">chan</a> = <a class="code" href="../../d0/d07/structast__group__info.html#a84d1435c5b8d387806714ea7079304b7">chan</a>;</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;      gi-&gt;<a class="code" href="../../d0/d07/structast__group__info.html#a443519726cbe3c4f2b2fe1d42ce2fd2f">group</a> = (<span class="keywordtype">char</span> *) gi + <span class="keyword">sizeof</span>(*gi);</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;      strcpy(gi-&gt;<a class="code" href="../../d0/d07/structast__group__info.html#a443519726cbe3c4f2b2fe1d42ce2fd2f">group</a>, group);</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d0/d07/structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">category</a>)) {</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;         gi-&gt;<a class="code" href="../../d0/d07/structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">category</a> = (<span class="keywordtype">char</span> *) gi + <span class="keyword">sizeof</span>(*gi) + strlen(group) + 1;</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;         strcpy(gi-&gt;<a class="code" href="../../d0/d07/structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">category</a>, <a class="code" href="../../d0/d07/structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">category</a>);</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;      }</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d9/d28/structgroups.html">groups</a>, gi, <a class="code" href="../../d0/d07/structast__group__info.html#acd9586542829317c2b39f35b99d63d56">group_list</a>);</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;      res = -1;</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;   }</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d9/d28/structgroups.html">groups</a>);</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;}</div><div class="ttc" id="structast__group__info_html"><div class="ttname"><a href="../../d0/d07/structast__group__info.html">ast_group_info</a></div><div class="ttdoc">channel group info </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02938">channel.h:2938</a></div></div>
<div class="ttc" id="structgroups_html"><div class="ttname"><a href="../../d9/d28/structgroups.html">groups</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00123">main/app.c:123</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a02212548652c9eb0f3db38dc4e4bd285"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE_CURRENT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00569">linkedlists.h:569</a></div></div>
<div class="ttc" id="structast__group__info_html_a443519726cbe3c4f2b2fe1d42ce2fd2f"><div class="ttname"><a href="../../d0/d07/structast__group__info.html#a443519726cbe3c4f2b2fe1d42ce2fd2f">ast_group_info::group</a></div><div class="ttdeci">char * group</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02941">channel.h:2941</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a21be6da4b2146b04b4868c2be5cae750"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00544">linkedlists.h:544</a></div></div>
<div class="ttc" id="structast__group__info_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d0/d07/structast__group__info.html#a84d1435c5b8d387806714ea7079304b7">ast_group_info::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02939">channel.h:2939</a></div></div>
<div class="ttc" id="main_2app_8c_html_ab926dd29fc418cde5b67a00ba914cd2c"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#ab926dd29fc418cde5b67a00ba914cd2c">ast_app_group_split_group</a></div><div class="ttdeci">int ast_app_group_split_group(const char *data, char *group, int group_max, char *category, int category_max)</div><div class="ttdoc">Split a group string into group and category, returning a default category if none is provided...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02009">main/app.c:2009</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structgroup_html"><div class="ttname"><a href="../../d3/d08/structgroup.html">group</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d35/func__dialgroup_8c_source.html#l00084">func_dialgroup.c:84</a></div></div>
<div class="ttc" id="structast__group__info_html_a37188acb1b82f625d3313bc88ca82314"><div class="ttname"><a href="../../d0/d07/structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">ast_group_info::category</a></div><div class="ttdeci">char * category</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02940">channel.h:2940</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadda916488b2d151af4426e2f06ad332"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_TAIL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00740">linkedlists.h:740</a></div></div>
<div class="ttc" id="structast__group__info_html_acd9586542829317c2b39f35b99d63d56"><div class="ttname"><a href="../../d0/d07/structast__group__info.html#acd9586542829317c2b39f35b99d63d56">ast_group_info::group_list</a></div><div class="ttdeci">struct ast_group_info::@248 group_list</div></div>
<div class="ttc" id="linkedlists_8h_html_a6bf0e81cb6ef01532ddebaba68f6de28"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_END</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00616">linkedlists.h:616</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab926dd29fc418cde5b67a00ba914cd2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab926dd29fc418cde5b67a00ba914cd2c">&#9670;&nbsp;</a></span>ast_app_group_split_group()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_app_group_split_group </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>group</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>group_max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>category</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>category_max</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Split a group string into group and category, returning a default category if none is provided. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02009">2009</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02036">ast_app_group_set_channel()</a>, <a class="el" href="../../d7/d15/func__groupcount_8c_source.html#l00098">group_count_function_read()</a>, and <a class="el" href="../../d7/d15/func__groupcount_8c_source.html#l00148">group_match_count_function_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;{</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[256];</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;   <span class="keywordtype">char</span> *grp = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *cat = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(data)) {</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(tmp, data, <span class="keyword">sizeof</span>(tmp));</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;      grp = <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;      <span class="keywordflow">if</span> ((cat = strchr(tmp, <span class="charliteral">&#39;@&#39;</span>))) {</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;         *cat++ = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;      }</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;   }</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(grp)) {</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d3/d08/structgroup.html">group</a>, grp, group_max);</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;      *<a class="code" href="../../d3/d08/structgroup.html">group</a> = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;   }</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cat)) {</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d0/d07/structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">category</a>, cat, category_max);</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;   }</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;}</div><div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structgroup_html"><div class="ttname"><a href="../../d3/d08/structgroup.html">group</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d35/func__dialgroup_8c_source.html#l00084">func_dialgroup.c:84</a></div></div>
<div class="ttc" id="structast__group__info_html_a37188acb1b82f625d3313bc88ca82314"><div class="ttname"><a href="../../d0/d07/structast__group__info.html#a37188acb1b82f625d3313bc88ca82314">ast_group_info::category</a></div><div class="ttdeci">char * category</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02940">channel.h:2940</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3411b27185b9133f3084fa2de8cc4260"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3411b27185b9133f3084fa2de8cc4260">&#9670;&nbsp;</a></span>ast_app_group_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_app_group_update </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>old</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>new</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update all group counting for a channel to a new one. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02143">2143</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00569">AST_RWLIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00544">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00616">AST_RWLIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02939">ast_group_info::chan</a>, <a class="el" href="../../d0/d07/structast__group__info.html#acd9586542829317c2b39f35b99d63d56">ast_group_info::group_list</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d28/channel_8c_source.html#l06952">channel_do_masquerade()</a>.</p>
<div class="fragment"><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;{</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d07/structast__group__info.html">ast_group_info</a> *gi = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d9/d28/structgroups.html">groups</a>);</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../d9/d28/structgroups.html">groups</a>, gi, <a class="code" href="../../d0/d07/structast__group__info.html#acd9586542829317c2b39f35b99d63d56">group_list</a>) {</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;      <span class="keywordflow">if</span> (gi-&gt;<a class="code" href="../../d0/d07/structast__group__info.html#a84d1435c5b8d387806714ea7079304b7">chan</a> == old) {</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;         gi-&gt;<a class="code" href="../../d0/d07/structast__group__info.html#a84d1435c5b8d387806714ea7079304b7">chan</a> = <span class="keyword">new</span>;</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (gi-&gt;<a class="code" href="../../d0/d07/structast__group__info.html#a84d1435c5b8d387806714ea7079304b7">chan</a> == <span class="keyword">new</span>) {</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a>(<a class="code" href="../../d0/d07/structast__group__info.html#acd9586542829317c2b39f35b99d63d56">group_list</a>);</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(gi);</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;      }</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;   }</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d9/d28/structgroups.html">groups</a>);</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;}</div><div class="ttc" id="structast__group__info_html"><div class="ttname"><a href="../../d0/d07/structast__group__info.html">ast_group_info</a></div><div class="ttdoc">channel group info </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02938">channel.h:2938</a></div></div>
<div class="ttc" id="structgroups_html"><div class="ttname"><a href="../../d9/d28/structgroups.html">groups</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00123">main/app.c:123</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a02212548652c9eb0f3db38dc4e4bd285"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE_CURRENT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00569">linkedlists.h:569</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a21be6da4b2146b04b4868c2be5cae750"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00544">linkedlists.h:544</a></div></div>
<div class="ttc" id="structast__group__info_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d0/d07/structast__group__info.html#a84d1435c5b8d387806714ea7079304b7">ast_group_info::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02939">channel.h:2939</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__group__info_html_acd9586542829317c2b39f35b99d63d56"><div class="ttname"><a href="../../d0/d07/structast__group__info.html#acd9586542829317c2b39f35b99d63d56">ast_group_info::group_list</a></div><div class="ttdeci">struct ast_group_info::@248 group_list</div></div>
<div class="ttc" id="linkedlists_8h_html_a6bf0e81cb6ef01532ddebaba68f6de28"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_END</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00616">linkedlists.h:616</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a76b4d3927cacd1bcd5da9ca8fe375cb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76b4d3927cacd1bcd5da9ca8fe375cb6">&#9670;&nbsp;</a></span>ast_app_has_voicemail()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_app_has_voicemail </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>mailboxes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>folder</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine if a given mailbox has any voicemail If folder is NULL, defaults to "INBOX". If folder is "INBOX", includes the number of messages in the "Urgent" folder. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>Mailbox has voicemail </td></tr>
    <tr><td class="paramname">0</td><td>No new voicemail in specified mailbox </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00655">655</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l06124">has_voicemail()</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00620">VM_API_CALL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l05936">action_mailboxstatus()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l14576">AST_TEST_DEFINE()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l05033">has_voicemail()</a>, <a class="el" href="../../d4/d00/manager__mwi_8c_source.html#l00086">mwi_update_cb()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l08155">notify_new_message()</a>, <a class="el" href="../../d4/d7e/app__disa_8c_source.html#l00128">play_dialtone()</a>, <a class="el" href="../../d8/d96/res__smdi_8c_source.html#l00833">poll_mailbox()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l06234">run_externnotify()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l02258">skinny_register()</a>, and <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l05675">unistim_send_mwi_to_peer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;{</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;   <a class="code" href="../../d3/d83/main_2app_8c.html#a12c075dae5bb61a239b853abf865fd67">VM_API_CALL</a>(res, <a class="code" href="../../dc/df4/app__voicemail_8c.html#ae092e449709dbba8ef9a27ce9531b1d7">has_voicemail</a>, (<a class="code" href="../../d0/dd5/res__ari__mailboxes_8c.html#a29d08f8b2448744d75ca9ebc4e218419">mailboxes</a>, folder));</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;}</div><div class="ttc" id="res__ari__mailboxes_8c_html_a29d08f8b2448744d75ca9ebc4e218419"><div class="ttname"><a href="../../d0/dd5/res__ari__mailboxes_8c.html#a29d08f8b2448744d75ca9ebc4e218419">mailboxes</a></div><div class="ttdeci">static struct stasis_rest_handlers mailboxes</div><div class="ttdoc">REST handler for /api-docs/mailboxes.json. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd5/res__ari__mailboxes_8c_source.html#l00322">res_ari_mailboxes.c:322</a></div></div>
<div class="ttc" id="main_2app_8c_html_a12c075dae5bb61a239b853abf865fd67"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a12c075dae5bb61a239b853abf865fd67">VM_API_CALL</a></div><div class="ttdeci">#define VM_API_CALL(res, api_call, api_parms)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00620">main/app.c:620</a></div></div>
<div class="ttc" id="app__voicemail_8c_html_ae092e449709dbba8ef9a27ce9531b1d7"><div class="ttname"><a href="../../dc/df4/app__voicemail_8c.html#ae092e449709dbba8ef9a27ce9531b1d7">has_voicemail</a></div><div class="ttdeci">static int has_voicemail(const char *mailbox, const char *folder)</div><div class="ttdoc">Determines if the given folder has messages. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l06124">app_voicemail.c:6124</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab45a61007ccd8ca2ea062f42b83b18ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab45a61007ccd8ca2ea062f42b83b18ff">&#9670;&nbsp;</a></span>ast_app_inboxcount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_app_inboxcount </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>mailboxes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>newmsgs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>oldmsgs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine number of new/old messages in a mailbox. </p>
<dl class="section since"><dt>Since</dt><dd>1.0 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mailboxes</td><td>Mailbox specification in the format /code mbox[@context][&amp;mbox2[@context2]][...] /code </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">newmsgs</td><td>Number of messages in the "INBOX" folder. Includes number of messages in the "Urgent" folder, if any. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">oldmsgs</td><td>Number of messages in the "Old" folder. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00677">677</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l06224">inboxcount()</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00620">VM_API_CALL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l14576">AST_TEST_DEFINE()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l29756">sip_send_mwi_to_peer()</a>, and <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l09002">update_registry()</a>.</p>
<div class="fragment"><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;{</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;   <span class="keywordflow">if</span> (newmsgs) {</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;      *newmsgs = 0;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;   }</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;   <span class="keywordflow">if</span> (oldmsgs) {</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      *oldmsgs = 0;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;   }</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;   <a class="code" href="../../d3/d83/main_2app_8c.html#a12c075dae5bb61a239b853abf865fd67">VM_API_CALL</a>(res, <a class="code" href="../../dc/df4/app__voicemail_8c.html#aac932b3188d5baf5f0f91b47ee656b79">inboxcount</a>, (<a class="code" href="../../d0/dd5/res__ari__mailboxes_8c.html#a29d08f8b2448744d75ca9ebc4e218419">mailboxes</a>, newmsgs, oldmsgs));</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;}</div><div class="ttc" id="res__ari__mailboxes_8c_html_a29d08f8b2448744d75ca9ebc4e218419"><div class="ttname"><a href="../../d0/dd5/res__ari__mailboxes_8c.html#a29d08f8b2448744d75ca9ebc4e218419">mailboxes</a></div><div class="ttdeci">static struct stasis_rest_handlers mailboxes</div><div class="ttdoc">REST handler for /api-docs/mailboxes.json. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd5/res__ari__mailboxes_8c_source.html#l00322">res_ari_mailboxes.c:322</a></div></div>
<div class="ttc" id="main_2app_8c_html_a12c075dae5bb61a239b853abf865fd67"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a12c075dae5bb61a239b853abf865fd67">VM_API_CALL</a></div><div class="ttdeci">#define VM_API_CALL(res, api_call, api_parms)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00620">main/app.c:620</a></div></div>
<div class="ttc" id="app__voicemail_8c_html_aac932b3188d5baf5f0f91b47ee656b79"><div class="ttname"><a href="../../dc/df4/app__voicemail_8c.html#aac932b3188d5baf5f0f91b47ee656b79">inboxcount</a></div><div class="ttdeci">static int inboxcount(const char *mailbox, int *newmsgs, int *oldmsgs)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l06224">app_voicemail.c:6224</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ace2a3d783f4f79818e14265ae719f06c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace2a3d783f4f79818e14265ae719f06c">&#9670;&nbsp;</a></span>ast_app_inboxcount2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_app_inboxcount2 </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>mailboxes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>urgentmsgs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>newmsgs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>oldmsgs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine number of urgent/new/old messages in a mailbox. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mailboxes</td><td>the mailbox context to use </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">urgentmsgs</td><td>the urgent message count </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">newmsgs</td><td>the new message count </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">oldmsgs</td><td>the old message count </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns 0 for success, negative upon error </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.6.1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00692">692</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l06154">inboxcount2()</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00620">VM_API_CALL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l05953">action_mailboxcount()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l14576">AST_TEST_DEFINE()</a>, <a class="el" href="../../d6/db4/mwi_8c_source.html#l00138">mwi_retrieve_then_create_state()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l08155">notify_new_message()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l16131">notify_new_state()</a>, and <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l11503">vm_execmain()</a>.</p>
<div class="fragment"><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;{</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;   <span class="keywordflow">if</span> (newmsgs) {</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      *newmsgs = 0;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;   }</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;   <span class="keywordflow">if</span> (oldmsgs) {</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;      *oldmsgs = 0;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;   }</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;   <span class="keywordflow">if</span> (urgentmsgs) {</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      *urgentmsgs = 0;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;   }</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;   <a class="code" href="../../d3/d83/main_2app_8c.html#a12c075dae5bb61a239b853abf865fd67">VM_API_CALL</a>(res, <a class="code" href="../../dc/df4/app__voicemail_8c.html#ae5fdb2a8c5cd5f9cdcee895fa7ec421b">inboxcount2</a>, (<a class="code" href="../../d0/dd5/res__ari__mailboxes_8c.html#a29d08f8b2448744d75ca9ebc4e218419">mailboxes</a>, urgentmsgs, newmsgs, oldmsgs));</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;}</div><div class="ttc" id="res__ari__mailboxes_8c_html_a29d08f8b2448744d75ca9ebc4e218419"><div class="ttname"><a href="../../d0/dd5/res__ari__mailboxes_8c.html#a29d08f8b2448744d75ca9ebc4e218419">mailboxes</a></div><div class="ttdeci">static struct stasis_rest_handlers mailboxes</div><div class="ttdoc">REST handler for /api-docs/mailboxes.json. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd5/res__ari__mailboxes_8c_source.html#l00322">res_ari_mailboxes.c:322</a></div></div>
<div class="ttc" id="app__voicemail_8c_html_ae5fdb2a8c5cd5f9cdcee895fa7ec421b"><div class="ttname"><a href="../../dc/df4/app__voicemail_8c.html#ae5fdb2a8c5cd5f9cdcee895fa7ec421b">inboxcount2</a></div><div class="ttdeci">static int inboxcount2(const char *mailbox, int *urgentmsgs, int *newmsgs, int *oldmsgs)</div><div class="ttdoc">Check the given mailbox&amp;#39;s message count. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l06154">app_voicemail.c:6154</a></div></div>
<div class="ttc" id="main_2app_8c_html_a12c075dae5bb61a239b853abf865fd67"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a12c075dae5bb61a239b853abf865fd67">VM_API_CALL</a></div><div class="ttdeci">#define VM_API_CALL(res, api_call, api_parms)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00620">main/app.c:620</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a16254e1237610f11047a7558bbe1f207"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16254e1237610f11047a7558bbe1f207">&#9670;&nbsp;</a></span>ast_app_messagecount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_app_messagecount </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>mailbox_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>folder</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the number of messages in a given mailbox folder. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mailbox_id</td><td>Mailbox name </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">folder</td><td>The folder to look in. Default is INBOX if not provided.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>If requesting INBOX then the returned count is INBOX + Urgent.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>The number of messages in the mailbox folder (zero or more). </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00718">718</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l06048">messagecount()</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00620">VM_API_CALL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d18/func__vmcount_8c_source.html#l00063">acf_vmcount_exec()</a>, and <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l14576">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;{</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;   <a class="code" href="../../d3/d83/main_2app_8c.html#a12c075dae5bb61a239b853abf865fd67">VM_API_CALL</a>(res, <a class="code" href="../../dc/df4/app__voicemail_8c.html#a6d1280b868a461dc347430bff8922eaf">messagecount</a>, (mailbox_id, folder));</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;}</div><div class="ttc" id="app__voicemail_8c_html_a6d1280b868a461dc347430bff8922eaf"><div class="ttname"><a href="../../dc/df4/app__voicemail_8c.html#a6d1280b868a461dc347430bff8922eaf">messagecount</a></div><div class="ttdeci">static int messagecount(const char *mailbox_id, const char *folder)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l06048">app_voicemail.c:6048</a></div></div>
<div class="ttc" id="main_2app_8c_html_a12c075dae5bb61a239b853abf865fd67"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a12c075dae5bb61a239b853abf865fd67">VM_API_CALL</a></div><div class="ttdeci">#define VM_API_CALL(res, api_call, api_parms)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00620">main/app.c:620</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adc36d870f1a77a726a74f4891f1365d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc36d870f1a77a726a74f4891f1365d3">&#9670;&nbsp;</a></span>ast_app_options2str64()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_app_options2str64 </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d2/d8d/structast__app__option.html">ast_app_option</a> *&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/d10/structast__flags64.html">ast_flags64</a> *&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given a list of options array, return an option string based on passed flags. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">options</td><td>The array of possible options declared with AST_APP_OPTIONS </td></tr>
    <tr><td class="paramname">flags</td><td>The flags of the options that you wish to populate the buffer with </td></tr>
    <tr><td class="paramname">buf</td><td>The buffer to fill with the string of options </td></tr>
    <tr><td class="paramname">len</td><td>The maximum length of buf </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02916">2916</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00120">ast_test_flag64</a>, and <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>.</p>
<div class="fragment"><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;{</div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i, found = 0;</div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;   <span class="keywordflow">for</span> (i = 32; i &lt; 128 &amp;&amp; found &lt; <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>; i++) {</div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(flags, options[i].<a class="code" href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>)) {</div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;         <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[found++] = i;</div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;      }</div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;   }</div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;   <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[found] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="f2c_8h_html_abf5d144da384425ae6cb542ce6eec8d3"><div class="ttname"><a href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a></div><div class="ttdeci">long int flag</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc2/f2c_8h_source.html#l00083">f2c.h:83</a></div></div>
<div class="ttc" id="utils_8h_html_a17ef965a8317b037c32e9b58c3765b1a"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a></div><div class="ttdeci">#define ast_test_flag64(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00120">utils.h:120</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af40039f1c49c16d0f6fa33fe9c43a0cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af40039f1c49c16d0f6fa33fe9c43a0cb">&#9670;&nbsp;</a></span>ast_app_parse_options()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_app_parse_options </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d2/d8d/structast__app__option.html">ast_app_option</a> *&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dc/dac/structast__flags.html">ast_flags</a> *&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>optstr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parses a string containing application options and sets flags/arguments. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">options</td><td>The array of possible options declared with AST_APP_OPTIONS </td></tr>
    <tr><td class="paramname">flags</td><td>The flag structure to have option flags set </td></tr>
    <tr><td class="paramname">args</td><td>The array of argument pointers to hold arguments found </td></tr>
    <tr><td class="paramname">optstr</td><td>The string containing the options to be parsed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>zero for success, non-zero if an error occurs </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#a520a3c6b7d57903d9a616051da1a019d" title="Declares an array of options for an application. ">AST_APP_OPTIONS</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02906">2906</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02826">parse_options()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02112">agent_login_exec()</a>, <a class="el" href="../../de/d26/app__externalivr_8c_source.html#l00392">app_exec()</a>, <a class="el" href="../../d4/d6e/res__rtp__multicast_8c_source.html#l00140">ast_multicast_rtp_create_options()</a>, <a class="el" href="../../d8/dc7/test__app_8c_source.html#l00042">AST_TEST_DEFINE()</a>, <a class="el" href="../../dd/d8a/chan__audiosocket_8c_source.html#l00139">audiosocket_request()</a>, <a class="el" href="../../d6/d0f/app__authenticate_8c_source.html#l00116">auth_exec()</a>, <a class="el" href="../../d5/d92/features_8c_source.html#l01007">bridge_exec()</a>, <a class="el" href="../../dc/d22/app__bridgewait_8c_source.html#l00416">bridgewait_exec()</a>, <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00248">cdr_read_callback()</a>, <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00357">cdr_write_callback()</a>, <a class="el" href="../../dc/d04/app__chanspy_8c_source.html#l01203">chanspy_exec()</a>, <a class="el" href="../../df/d38/func__callerid_8c_source.html#l01308">connectedline_write()</a>, <a class="el" href="../../d6/dde/app__controlplayback_8c_source.html#l00197">controlplayback_exec()</a>, <a class="el" href="../../d9/d4a/app__tonedetect_8c_source.html#l00399">detect_write()</a>, <a class="el" href="../../d0/de2/app__directory_8c_source.html#l00847">directory_exec()</a>, <a class="el" href="../../d4/d7e/app__disa_8c_source.html#l00146">disa_exec()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04215">dundi_query_read()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04137">dundifunc_read()</a>, <a class="el" href="../../dc/d04/app__chanspy_8c_source.html#l01322">extenspy_exec()</a>, <a class="el" href="../../d2/db9/app__forkcdr_8c_source.html#l00134">forkcdr_exec()</a>, <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00709">handle_options()</a>, <a class="el" href="../../d7/d0b/func__devstate_8c_source.html#l00146">hint_read()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l01500">manager_mixmonitor()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l02496">minivm_accmess_exec()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l02268">minivm_greet_exec()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l02215">minivm_record_exec()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l01115">mixmonitor_exec()</a>, <a class="el" href="../../d3/da4/app__page_8c_source.html#l00250">page_exec()</a>, <a class="el" href="../../da/ded/parking__applications_8c_source.html#l00278">park_app_parse_data()</a>, <a class="el" href="../../df/d1d/pbx__builtins_8c_source.html#l01144">pbx_builtin_background()</a>, <a class="el" href="../../df/d1d/pbx__builtins_8c_source.html#l01068">pbx_builtin_waitexten()</a>, <a class="el" href="../../d9/db1/app__directed__pickup_8c_source.html#l00420">pickupchan_exec()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l08183">queue_exec()</a>, <a class="el" href="../../d6/dbb/app__read_8c_source.html#l00127">read_exec()</a>, <a class="el" href="../../d7/d1d/app__mf_8c_source.html#l00551">read_mf_exec()</a>, <a class="el" href="../../d7/d1d/app__mf_8c_source.html#l00472">read_sf_exec()</a>, <a class="el" href="../../d2/de3/app__readexten_8c_source.html#l00119">readexten_exec()</a>, <a class="el" href="../../d2/d2c/pbx__realtime_8c_source.html#l00229">realtime_common()</a>, <a class="el" href="../../d0/d60/res__fax_8c_source.html#l02082">receivefax_exec()</a>, <a class="el" href="../../dd/dd5/app__record_8c_source.html#l00221">record_exec()</a>, <a class="el" href="../../df/d38/func__callerid_8c_source.html#l01549">redirecting_write()</a>, <a class="el" href="../../d1/da0/app__cdr_8c_source.html#l00188">resetcdr_exec()</a>, <a class="el" href="../../d0/d60/res__fax_8c_source.html#l02590">sendfax_exec()</a>, <a class="el" href="../../d8/d22/app__url_8c_source.html#l00095">sendurl_exec()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l07228">sla_trunk_exec()</a>, <a class="el" href="../../d8/d96/res__smdi_8c_source.html#l01202">smdi_msg_retrieve_read()</a>, <a class="el" href="../../d7/d81/app__sms_8c_source.html#l01881">sms_exec()</a>, <a class="el" href="../../dc/d05/app__softhangup_8c_source.html#l00074">softhangup_exec()</a>, <a class="el" href="../../d4/d5b/app__speech__utils_8c_source.html#l00700">speech_background()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00693">start_monitor_exec()</a>, <a class="el" href="../../d0/d2b/chan__rtp_8c_source.html#l00269">unicast_rtp_request()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l12278">vm_exec()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l11503">vm_execmain()</a>, <a class="el" href="../../db/d57/func__volume_8c_source.html#l00150">volume_write()</a>, and <a class="el" href="../../d9/d4a/app__tonedetect_8c_source.html#l00524">wait_exec()</a>.</p>
<div class="fragment"><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;{</div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d83/main_2app_8c.html#a16e02ee9c475cbde97e26554a975e7eb">parse_options</a>(options, flags, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, optstr, 32);</div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;}</div><div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="main_2app_8c_html_a16e02ee9c475cbde97e26554a975e7eb"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a16e02ee9c475cbde97e26554a975e7eb">parse_options</a></div><div class="ttdeci">static int parse_options(const struct ast_app_option *options, void *_flags, char **args, char *optstr, int flaglen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02826">main/app.c:2826</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af85cb9dfd2fea9cfe820d2323c7dd471"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af85cb9dfd2fea9cfe820d2323c7dd471">&#9670;&nbsp;</a></span>ast_app_parse_options64()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_app_parse_options64 </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d2/d8d/structast__app__option.html">ast_app_option</a> *&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/d10/structast__flags64.html">ast_flags64</a> *&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>optstr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parses a string containing application options and sets flags/arguments. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">options</td><td>The array of possible options declared with AST_APP_OPTIONS </td></tr>
    <tr><td class="paramname">flags</td><td>The 64-bit flag structure to have option flags set </td></tr>
    <tr><td class="paramname">args</td><td>The array of argument pointers to hold arguments found </td></tr>
    <tr><td class="paramname">optstr</td><td>The string containing the options to be parsed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>zero for success, non-zero if an error occurs </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#a520a3c6b7d57903d9a616051da1a019d" title="Declares an array of options for an application. ">AST_APP_OPTIONS</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02911">2911</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02826">parse_options()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/dc7/test__app_8c_source.html#l00042">AST_TEST_DEFINE()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l04837">conf_exec()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02254">dial_exec_full()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l04500">find_conf_realtime()</a>, <a class="el" href="../../da/db1/app__originate_8c_source.html#l00173">originate_exec()</a>, and <a class="el" href="../../da/df8/app__sayunixtime_8c_source.html#l00118">sayunixtime_exec()</a>.</p>
<div class="fragment"><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;{</div><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d83/main_2app_8c.html#a16e02ee9c475cbde97e26554a975e7eb">parse_options</a>(options, flags, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, optstr, 64);</div><div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;}</div><div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="main_2app_8c_html_a16e02ee9c475cbde97e26554a975e7eb"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a16e02ee9c475cbde97e26554a975e7eb">parse_options</a></div><div class="ttdeci">static int parse_options(const struct ast_app_option *options, void *_flags, char **args, char *optstr, int flaglen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02826">main/app.c:2826</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4b1abdb422e1ea79c303f7bcb3f4ff6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b1abdb422e1ea79c303f7bcb3f4ff6d">&#9670;&nbsp;</a></span>ast_app_parse_timelen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_app_parse_timelen </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>timestr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#ac1d6b3a36d31df3737b9a83c3a9b1155">ast_timelen</a>&#160;</td>
          <td class="paramname"><em>defunit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Common routine to parse time lengths, with optional time unit specifier. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">timestr</td><td>String to parse </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">defunit</td><td>Default unit type </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">result</td><td>Resulting value, specified in milliseconds </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.8 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l03113">3113</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c.html#a3dfb8ef0d04e938194da60b4420c7517">FMT</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00114">TIMELEN_HOURS</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00117">TIMELEN_MILLISECONDS</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00115">TIMELEN_MINUTES</a>, and <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00116">TIMELEN_SECONDS</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d26/app__externalivr_8c_source.html#l00356">ast_eivr_senddtmf()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l03657">ast_parse_arg()</a>, <a class="el" href="../../d6/dbf/res__config__sqlite3_8c_source.html#l00388">new_realtime_sqlite3_db()</a>, <a class="el" href="../../df/d1d/pbx__builtins_8c_source.html#l01013">pbx_builtin_wait()</a>, <a class="el" href="../../df/d1d/pbx__builtins_8c_source.html#l01027">pbx_builtin_waitdigit()</a>, <a class="el" href="../../df/d1d/pbx__builtins_8c_source.html#l01068">pbx_builtin_waitexten()</a>, <a class="el" href="../../dc/d37/app__senddtmf_8c_source.html#l00095">senddtmf_exec()</a>, and <a class="el" href="../../d7/d1d/app__mf_8c_source.html#l00620">sendmf_exec()</a>.</p>
<div class="fragment"><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;{</div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;   <span class="keywordtype">char</span> u[10];</div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;<span class="preprocessor">#ifdef HAVE_LONG_DOUBLE_WIDER</span></div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;   <span class="keywordtype">long</span> <span class="keywordtype">double</span> amount;</div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;<span class="preprocessor">   #define FMT &quot;%30Lf%9s&quot;</span></div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;   <span class="keywordtype">double</span> amount;</div><div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;<span class="preprocessor">   #define FMT &quot;%30lf%9s&quot;</span></div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;   <span class="keywordflow">if</span> (!timestr) {</div><div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;   }</div><div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;</div><div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;   res = sscanf(timestr, <a class="code" href="../../d3/d83/main_2app_8c.html#a3dfb8ef0d04e938194da60b4420c7517">FMT</a>, &amp;amount, u);</div><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;</div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;   <span class="keywordflow">if</span> (res == 0 || res == EOF) {</div><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;<span class="preprocessor">#undef FMT</span></div><div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (res == 2) {</div><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;      <span class="keywordflow">switch</span> (u[0]) {</div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;h&#39;</span>:</div><div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;H&#39;</span>:</div><div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;         unit = <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac1d6b3a36d31df3737b9a83c3a9b1155a9e86fde4889019aa4529786d4cc7246a">TIMELEN_HOURS</a>;</div><div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;         <span class="keywordflow">if</span> (u[1] != <span class="charliteral">&#39;\0&#39;</span>) {</div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;         }</div><div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;s&#39;</span>:</div><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;S&#39;</span>:</div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;         unit = <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac1d6b3a36d31df3737b9a83c3a9b1155a99025f253e368c2e42b6e431451a518b">TIMELEN_SECONDS</a>;</div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;         <span class="keywordflow">if</span> (u[1] != <span class="charliteral">&#39;\0&#39;</span>) {</div><div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;         }</div><div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;m&#39;</span>:</div><div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;M&#39;</span>:</div><div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;         <span class="keywordflow">if</span> (toupper(u[1]) == <span class="charliteral">&#39;S&#39;</span>) {</div><div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;            unit = <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac1d6b3a36d31df3737b9a83c3a9b1155a018e6dbbefd4b00f8c5c45df1f371d1b">TIMELEN_MILLISECONDS</a>;</div><div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;            <span class="keywordflow">if</span> (u[2] != <span class="charliteral">&#39;\0&#39;</span>) {</div><div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;               <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;            }</div><div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (u[1] == <span class="charliteral">&#39;\0&#39;</span>) {</div><div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;            unit = <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac1d6b3a36d31df3737b9a83c3a9b1155a3f58d4b5b86ee51110b8cf9afd803a06">TIMELEN_MINUTES</a>;</div><div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;         }</div><div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;      }</div><div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;   }</div><div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;</div><div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;   <span class="keywordflow">switch</span> (unit) {</div><div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac1d6b3a36d31df3737b9a83c3a9b1155a9e86fde4889019aa4529786d4cc7246a">TIMELEN_HOURS</a>:</div><div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;      amount *= 60;</div><div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;      <span class="comment">/* fall-through */</span></div><div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac1d6b3a36d31df3737b9a83c3a9b1155a3f58d4b5b86ee51110b8cf9afd803a06">TIMELEN_MINUTES</a>:</div><div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;      amount *= 60;</div><div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;      <span class="comment">/* fall-through */</span></div><div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac1d6b3a36d31df3737b9a83c3a9b1155a99025f253e368c2e42b6e431451a518b">TIMELEN_SECONDS</a>:</div><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;      amount *= 1000;</div><div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;      <span class="comment">/* fall-through */</span></div><div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac1d6b3a36d31df3737b9a83c3a9b1155a018e6dbbefd4b00f8c5c45df1f371d1b">TIMELEN_MILLISECONDS</a>:</div><div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;      ;</div><div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;   }</div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;   *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> = amount &gt; INT_MAX ? INT_MAX : (int) amount;</div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;}</div><div class="ttc" id="include_2asterisk_2app_8h_html_ac1d6b3a36d31df3737b9a83c3a9b1155a3f58d4b5b86ee51110b8cf9afd803a06"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac1d6b3a36d31df3737b9a83c3a9b1155a3f58d4b5b86ee51110b8cf9afd803a06">TIMELEN_MINUTES</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00115">include/asterisk/app.h:115</a></div></div>
<div class="ttc" id="main_2app_8c_html_a3dfb8ef0d04e938194da60b4420c7517"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a3dfb8ef0d04e938194da60b4420c7517">FMT</a></div><div class="ttdeci">#define FMT</div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac1d6b3a36d31df3737b9a83c3a9b1155a9e86fde4889019aa4529786d4cc7246a"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac1d6b3a36d31df3737b9a83c3a9b1155a9e86fde4889019aa4529786d4cc7246a">TIMELEN_HOURS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00114">include/asterisk/app.h:114</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac1d6b3a36d31df3737b9a83c3a9b1155a99025f253e368c2e42b6e431451a518b"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac1d6b3a36d31df3737b9a83c3a9b1155a99025f253e368c2e42b6e431451a518b">TIMELEN_SECONDS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00116">include/asterisk/app.h:116</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac1d6b3a36d31df3737b9a83c3a9b1155a018e6dbbefd4b00f8c5c45df1f371d1b"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac1d6b3a36d31df3737b9a83c3a9b1155a018e6dbbefd4b00f8c5c45df1f371d1b">TIMELEN_MILLISECONDS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00117">include/asterisk/app.h:117</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2fdf117969c2c1d8e1f0044d7c3ecd3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fdf117969c2c1d8e1f0044d7c3ecd3b">&#9670;&nbsp;</a></span>ast_app_run_macro()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_app_run_macro </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>autoservice_chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>macro_chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>macro_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>macro_args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run a macro on a channel, placing an optional second channel into autoservice. </p>
<dl class="section since"><dt>Since</dt><dd>1.8</dd></dl>
<p>This is a shorthand method that makes it very easy to run a macro on any given channel. It is perfectly reasonable to supply a NULL autoservice_chan here in case there is no channel to place into autoservice.</p>
<dl class="section note"><dt>Note</dt><dd>Absolutely <em>NO</em> channel locks should be held before calling this function.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">autoservice_chan</td><td>A channel to place into autoservice while the macro is run </td></tr>
    <tr><td class="paramname">macro_chan</td><td>Channel to execute macro on. </td></tr>
    <tr><td class="paramname">macro_name</td><td>The name of the macro to run. </td></tr>
    <tr><td class="paramname">macro_args</td><td>The arguments to pass to the macro.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">-1</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00320">320</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00273">ast_app_exec_macro()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, and <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d28/channel_8c_source.html#l10435">ast_channel_connected_line_macro()</a>, and <a class="el" href="../../d4/d28/channel_8c_source.html#l10487">ast_channel_redirecting_macro()</a>.</p>
<div class="fragment"><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;{</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;   <span class="keywordtype">char</span> *args_str;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;   <span class="keywordtype">size_t</span> args_len;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(macro_args)) {</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d3/d83/main_2app_8c.html#aaf3af8d672383b48d194deb468074cbe">ast_app_exec_macro</a>(autoservice_chan, macro_chan, macro_name);</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;   }</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;   <span class="comment">/* Create the Macro application argument string. */</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;   args_len = strlen(macro_name) + strlen(macro_args) + 2;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;   args_str = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(args_len);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;   <span class="keywordflow">if</span> (!args_str) {</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;   }</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;   snprintf(args_str, args_len, <span class="stringliteral">&quot;%s,%s&quot;</span>, macro_name, macro_args);</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;   res = <a class="code" href="../../d3/d83/main_2app_8c.html#aaf3af8d672383b48d194deb468074cbe">ast_app_exec_macro</a>(autoservice_chan, macro_chan, args_str);</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(args_str);</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;}</div><div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="main_2app_8c_html_aaf3af8d672383b48d194deb468074cbe"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#aaf3af8d672383b48d194deb468074cbe">ast_app_exec_macro</a></div><div class="ttdeci">int ast_app_exec_macro(struct ast_channel *autoservice_chan, struct ast_channel *macro_chan, const char *macro_args)</div><div class="ttdoc">Run a macro on a channel, placing an optional second channel into autoservice. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00273">main/app.c:273</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a437a314deb7eb7260014426c55e8289c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a437a314deb7eb7260014426c55e8289c">&#9670;&nbsp;</a></span>ast_app_run_sub()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_app_run_sub </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>autoservice_chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>sub_chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>sub_location</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>sub_args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ignore_hangup</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run a subroutine on a channel, placing an optional second channel into autoservice. </p>
<dl class="section since"><dt>Since</dt><dd>11</dd></dl>
<p>This is a shorthand method that makes it very easy to run a subroutine on any given channel. It is perfectly reasonable to supply a NULL autoservice_chan here in case there is no channel to place into autoservice.</p>
<dl class="section note"><dt>Note</dt><dd>Absolutely <em>NO</em> channel locks should be held before calling this function.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">autoservice_chan</td><td>A channel to place into autoservice while the subroutine is run </td></tr>
    <tr><td class="paramname">sub_chan</td><td>Channel to execute subroutine on. </td></tr>
    <tr><td class="paramname">sub_location</td><td>The location of the subroutine to run. </td></tr>
    <tr><td class="paramname">sub_args</td><td>The arguments to pass to the subroutine. </td></tr>
    <tr><td class="paramname">ignore_hangup</td><td>TRUE if a hangup does not stop execution of the routine.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">-1</td><td>on error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00401">401</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c.html#aba1706218d4c0220a263a5e8b07c8f2c">AO2_GLOBAL_OBJ_STATIC()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00370">ast_app_exec_sub()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, and <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d28/channel_8c_source.html#l10539">ast_channel_connected_line_sub()</a>, and <a class="el" href="../../d4/d28/channel_8c_source.html#l10584">ast_channel_redirecting_sub()</a>.</p>
<div class="fragment"><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;{</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;   <span class="keywordtype">char</span> *args_str;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;   <span class="keywordtype">size_t</span> args_len;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(sub_args)) {</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d3/d83/main_2app_8c.html#aee5e20694b04eee43463fde6cf121d06">ast_app_exec_sub</a>(autoservice_chan, sub_chan, sub_location, <a class="code" href="../../de/d26/app__externalivr_8c.html#ad7e8792fbe134499827a9171f0f6491ea96a84a93b0268cefea3c2be2d521e2c5">ignore_hangup</a>);</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;   }</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;   <span class="comment">/* Create the Gosub application argument string. */</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;   args_len = strlen(sub_location) + strlen(sub_args) + 3;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;   args_str = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(args_len);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;   <span class="keywordflow">if</span> (!args_str) {</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;   }</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;   snprintf(args_str, args_len, <span class="stringliteral">&quot;%s(%s)&quot;</span>, sub_location, sub_args);</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;   res = <a class="code" href="../../d3/d83/main_2app_8c.html#aee5e20694b04eee43463fde6cf121d06">ast_app_exec_sub</a>(autoservice_chan, sub_chan, args_str, <a class="code" href="../../de/d26/app__externalivr_8c.html#ad7e8792fbe134499827a9171f0f6491ea96a84a93b0268cefea3c2be2d521e2c5">ignore_hangup</a>);</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(args_str);</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;}</div><div class="ttc" id="app__externalivr_8c_html_ad7e8792fbe134499827a9171f0f6491ea96a84a93b0268cefea3c2be2d521e2c5"><div class="ttname"><a href="../../de/d26/app__externalivr_8c.html#ad7e8792fbe134499827a9171f0f6491ea96a84a93b0268cefea3c2be2d521e2c5">ignore_hangup</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d26/app__externalivr_8c_source.html#l00119">app_externalivr.c:119</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="main_2app_8c_html_aee5e20694b04eee43463fde6cf121d06"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#aee5e20694b04eee43463fde6cf121d06">ast_app_exec_sub</a></div><div class="ttdeci">int ast_app_exec_sub(struct ast_channel *autoservice_chan, struct ast_channel *sub_chan, const char *sub_args, int ignore_hangup)</div><div class="ttdoc">Run a subroutine on a channel, placing an optional second channel into autoservice. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00370">main/app.c:370</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac225a06b0204b02af4a1b22976383336"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac225a06b0204b02af4a1b22976383336">&#9670;&nbsp;</a></span>ast_app_sayname()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_app_sayname </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>mailbox_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Play a recorded user name for the mailbox to the specified channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>Where to play the recorded name file. </td></tr>
    <tr><td class="paramname">mailbox_id</td><td>The mailbox name.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Name played without interruption </td></tr>
    <tr><td class="paramname">dtmf</td><td>ASCII value of the DTMF which interrupted playback. </td></tr>
    <tr><td class="paramname">-1</td><td>Unable to locate mailbox or hangup occurred. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00710">710</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l14359">sayname()</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00641">VM_GREETER_API_CALL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/de2/app__directory_8c_source.html#l00286">play_mailbox_owner()</a>, and <a class="el" href="../../dc/d04/app__chanspy_8c_source.html#l00883">spy_sayname()</a>.</p>
<div class="fragment"><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;{</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;   <span class="keywordtype">int</span> res = -1;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;   <a class="code" href="../../d3/d83/main_2app_8c.html#a83280de5f04985d9f2f1c2485ae5d906">VM_GREETER_API_CALL</a>(res, <a class="code" href="../../dc/df4/app__voicemail_8c.html#aeab26b22621adc0bfdd81bca08ea0acf">sayname</a>, (chan, mailbox_id));</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;}</div><div class="ttc" id="app__voicemail_8c_html_aeab26b22621adc0bfdd81bca08ea0acf"><div class="ttname"><a href="../../dc/df4/app__voicemail_8c.html#aeab26b22621adc0bfdd81bca08ea0acf">sayname</a></div><div class="ttdeci">static int sayname(struct ast_channel *chan, const char *mailbox, const char *context)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l14359">app_voicemail.c:14359</a></div></div>
<div class="ttc" id="main_2app_8c_html_a83280de5f04985d9f2f1c2485ae5d906"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a83280de5f04985d9f2f1c2485ae5d906">VM_GREETER_API_CALL</a></div><div class="ttdeci">#define VM_GREETER_API_CALL(res, api_call, api_parms)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00641">main/app.c:641</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afcbfdd6dfc8c5f0f549b0a5d7e263e97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcbfdd6dfc8c5f0f549b0a5d7e263e97">&#9670;&nbsp;</a></span>ast_close_fds_above_n()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_close_fds_above_n </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Common routine for child processes, to close all fds prior to exec(2) </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>starting file descriptor number for closing all higher file descriptors </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.6.1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l03042">3042</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d1e/strcompat_8c_source.html#l00429">closefrom()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d26/app__externalivr_8c_source.html#l00392">app_exec()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l03947">asterisk_daemon()</a>, <a class="el" href="../../da/d8a/app__ices_8c_source.html#l00075">icesencode()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02200">launch_script()</a>, <a class="el" href="../../d1/d9a/app__mp3_8c_source.html#l00079">mp3play()</a>, <a class="el" href="../../df/d1d/app__nbscat_8c_source.html#l00071">NBScatplay()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l01093">safe_exec_prep()</a>, <a class="el" href="../../d5/dd6/app__festival_8c_source.html#l00140">send_waveform_to_fd()</a>, <a class="el" href="../../d3/d97/res__musiconhold_8c_source.html#l00584">spawn_mp3()</a>, <a class="el" href="../../d3/d3a/app__dahdiras_8c_source.html#l00075">spawn_ras()</a>, and <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l01391">vm_check_password_shell()</a>.</p>
<div class="fragment"><div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;{</div><div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;   <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#aae1c872491c8aaf5d990b5a868cb22ca">closefrom</a>(n + 1);</div><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;}</div><div class="ttc" id="include_2asterisk_2compat_8h_html_aae1c872491c8aaf5d990b5a868cb22ca"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#aae1c872491c8aaf5d990b5a868cb22ca">closefrom</a></div><div class="ttdeci">void closefrom(int lowfd)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d1e/strcompat_8c_source.html#l00429">strcompat.c:429</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a47eb74d2a849cccfb2e159714295ac56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47eb74d2a849cccfb2e159714295ac56">&#9670;&nbsp;</a></span>ast_control_streamfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_control_streamfile </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fwd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>rev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>stop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pause</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>restart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>skipms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long *&#160;</td>
          <td class="paramname"><em>offsetms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stream a file with fast forward, pause, reverse, restart. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>Channel </td></tr>
    <tr><td class="paramname">file</td><td>File to play. </td></tr>
    <tr><td class="paramname">fwd,rev,stop,pause,restart</td><td>DTMF keys for media control </td></tr>
    <tr><td class="paramname">skipms</td><td>Number of milliseconds to skip for fwd/rev. </td></tr>
    <tr><td class="paramname">offsetms</td><td>Number of milliseconds to skip when starting the media.</td></tr>
  </table>
  </dd>
</dl>
<p>Before calling this function, set this to be the number of ms to start from the beginning of the file. When the function returns, it will be the number of ms from the beginning where the playback stopped. Pass NULL if you don't care.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">Non-zero</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01319">1319</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01131">control_streamfile()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d6/dde/app__controlplayback_8c_source.html#l00197">controlplayback_exec()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02495">handle_controlstreamfile()</a>, and <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l08617">wait_file()</a>.</p>
<div class="fragment"><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;{</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d83/main_2app_8c.html#a320dd3e6327e693d76625f9bed7a7a81">control_streamfile</a>(chan, <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, fwd, rev, <a class="code" href="../../df/d44/app__meetme_8c.html#a111277a0849f92b793ed6aa1efe54462">stop</a>, <a class="code" href="../../d3/d5a/ccss_8c.html#a8bd1c39b4993f80f1bf674e3a1d717dd">suspend</a>, restart, <a class="code" href="../../dc/df4/app__voicemail_8c.html#a1df943a05a384a407a19cf8831b2d237">skipms</a>, offsetms, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;}</div><div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a111277a0849f92b793ed6aa1efe54462"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a111277a0849f92b793ed6aa1efe54462">stop</a></div><div class="ttdeci">unsigned int stop</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01096">app_meetme.c:1096</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="app__voicemail_8c_html_a1df943a05a384a407a19cf8831b2d237"><div class="ttname"><a href="../../dc/df4/app__voicemail_8c.html#a1df943a05a384a407a19cf8831b2d237">skipms</a></div><div class="ttdeci">static int skipms</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l00932">app_voicemail.c:932</a></div></div>
<div class="ttc" id="ccss_8c_html_a8bd1c39b4993f80f1bf674e3a1d717dd"><div class="ttname"><a href="../../d3/d5a/ccss_8c.html#a8bd1c39b4993f80f1bf674e3a1d717dd">suspend</a></div><div class="ttdeci">static void suspend(struct cc_core_instance *core_instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/ccss_8c_source.html#l03193">ccss.c:3193</a></div></div>
<div class="ttc" id="main_2app_8c_html_a320dd3e6327e693d76625f9bed7a7a81"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a320dd3e6327e693d76625f9bed7a7a81">control_streamfile</a></div><div class="ttdeci">static int control_streamfile(struct ast_channel *chan, const char *file, const char *fwd, const char *rev, const char *stop, const char *suspend, const char *restart, int skipms, long *offsetms, const char *lang, ast_waitstream_fr_cb cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01131">main/app.c:1131</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abef8d08064d7b1ea69da238a4d9fff9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abef8d08064d7b1ea69da238a4d9fff9c">&#9670;&nbsp;</a></span>ast_control_streamfile_lang()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_control_streamfile_lang </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fwd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>rev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>stop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>suspend</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>restart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>skipms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>lang</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long *&#160;</td>
          <td class="paramname"><em>offsetms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Version of <a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#a3405b1282cefdceebba734b8e756c55d" title="Stream a file with fast forward, pause, reverse, restart. ">ast_control_streamfile()</a> which allows the language of the media file to be specified. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">Non-zero</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01327">1327</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01131">control_streamfile()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/de1/res__stasis__playback_8c_source.html#l00285">play_on_channel()</a>.</p>
<div class="fragment"><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;{</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d83/main_2app_8c.html#a320dd3e6327e693d76625f9bed7a7a81">control_streamfile</a>(chan, <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, fwd, rev, <a class="code" href="../../df/d44/app__meetme_8c.html#a111277a0849f92b793ed6aa1efe54462">stop</a>, <a class="code" href="../../d3/d5a/ccss_8c.html#a8bd1c39b4993f80f1bf674e3a1d717dd">suspend</a>, restart, <a class="code" href="../../dc/df4/app__voicemail_8c.html#a1df943a05a384a407a19cf8831b2d237">skipms</a>, offsetms, lang, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;}</div><div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a111277a0849f92b793ed6aa1efe54462"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a111277a0849f92b793ed6aa1efe54462">stop</a></div><div class="ttdeci">unsigned int stop</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01096">app_meetme.c:1096</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="app__voicemail_8c_html_a1df943a05a384a407a19cf8831b2d237"><div class="ttname"><a href="../../dc/df4/app__voicemail_8c.html#a1df943a05a384a407a19cf8831b2d237">skipms</a></div><div class="ttdeci">static int skipms</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l00932">app_voicemail.c:932</a></div></div>
<div class="ttc" id="ccss_8c_html_a8bd1c39b4993f80f1bf674e3a1d717dd"><div class="ttname"><a href="../../d3/d5a/ccss_8c.html#a8bd1c39b4993f80f1bf674e3a1d717dd">suspend</a></div><div class="ttdeci">static void suspend(struct cc_core_instance *core_instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/ccss_8c_source.html#l03193">ccss.c:3193</a></div></div>
<div class="ttc" id="main_2app_8c_html_a320dd3e6327e693d76625f9bed7a7a81"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a320dd3e6327e693d76625f9bed7a7a81">control_streamfile</a></div><div class="ttdeci">static int control_streamfile(struct ast_channel *chan, const char *file, const char *fwd, const char *rev, const char *stop, const char *suspend, const char *restart, int skipms, long *offsetms, const char *lang, ast_waitstream_fr_cb cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01131">main/app.c:1131</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a277a7a0118b7f4c0f6fb5d402547928a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a277a7a0118b7f4c0f6fb5d402547928a">&#9670;&nbsp;</a></span>ast_control_streamfile_w_cb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_control_streamfile_w_cb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fwd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>rev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>stop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pause</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>restart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>skipms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long *&#160;</td>
          <td class="paramname"><em>offsetms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d4d/file_8h.html#a2d5138e99197a1d01f7a2ed07830476e">ast_waitstream_fr_cb</a>&#160;</td>
          <td class="paramname"><em>cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stream a file with fast forward, pause, reverse, restart. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td></td></tr>
    <tr><td class="paramname">file</td><td>filename </td></tr>
    <tr><td class="paramname">fwd,rev,stop,pause,restart,skipms,offsetms</td><td></td></tr>
    <tr><td class="paramname">cb</td><td>waitstream callback to invoke when fastforward or rewind occurrs.</td></tr>
  </table>
  </dd>
</dl>
<p>Before calling this function, set this to be the number of ms to start from the beginning of the file. When the function returns, it will be the number of ms from the beginning where the playback stopped. Pass NULL if you don't care. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01305">1305</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01131">control_streamfile()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>
<div class="fragment"><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;{</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d83/main_2app_8c.html#a320dd3e6327e693d76625f9bed7a7a81">control_streamfile</a>(chan, <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, fwd, rev, <a class="code" href="../../df/d44/app__meetme_8c.html#a111277a0849f92b793ed6aa1efe54462">stop</a>, <a class="code" href="../../d3/d5a/ccss_8c.html#a8bd1c39b4993f80f1bf674e3a1d717dd">suspend</a>, restart, <a class="code" href="../../dc/df4/app__voicemail_8c.html#a1df943a05a384a407a19cf8831b2d237">skipms</a>, offsetms, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, cb);</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;}</div><div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a111277a0849f92b793ed6aa1efe54462"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a111277a0849f92b793ed6aa1efe54462">stop</a></div><div class="ttdeci">unsigned int stop</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01096">app_meetme.c:1096</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="app__voicemail_8c_html_a1df943a05a384a407a19cf8831b2d237"><div class="ttname"><a href="../../dc/df4/app__voicemail_8c.html#a1df943a05a384a407a19cf8831b2d237">skipms</a></div><div class="ttdeci">static int skipms</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l00932">app_voicemail.c:932</a></div></div>
<div class="ttc" id="ccss_8c_html_a8bd1c39b4993f80f1bf674e3a1d717dd"><div class="ttname"><a href="../../d3/d5a/ccss_8c.html#a8bd1c39b4993f80f1bf674e3a1d717dd">suspend</a></div><div class="ttdeci">static void suspend(struct cc_core_instance *core_instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/ccss_8c_source.html#l03193">ccss.c:3193</a></div></div>
<div class="ttc" id="main_2app_8c_html_a320dd3e6327e693d76625f9bed7a7a81"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a320dd3e6327e693d76625f9bed7a7a81">control_streamfile</a></div><div class="ttdeci">static int control_streamfile(struct ast_channel *chan, const char *file, const char *fwd, const char *rev, const char *stop, const char *suspend, const char *restart, int skipms, long *offsetms, const char *lang, ast_waitstream_fr_cb cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01131">main/app.c:1131</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a52431d7ad64408a4a7abbaad3f34acea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52431d7ad64408a4a7abbaad3f34acea">&#9670;&nbsp;</a></span>ast_control_tone()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_control_tone </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>tone</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Controls playback of a tone. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">Non-zero</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01399">1399</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00745">ast_channel_zone()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">AST_FRAME_CONTROL</a>, <a class="el" href="../../df/d6e/indications_8c_source.html#l00455">ast_get_indication_tone()</a>, <a class="el" href="../../df/d6e/indications_8c_source.html#l00433">ast_get_indication_zone()</a>, <a class="el" href="../../df/d6e/indications_8c_source.html#l00302">ast_playtones_start()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04312">ast_read_noaudio()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d2/d0f/indications_8h_source.html#l00227">ast_tone_zone_sound_unref()</a>, <a class="el" href="../../d2/d0f/indications_8h_source.html#l00205">ast_tone_zone_unref()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l03171">ast_waitfor()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01340">control_tone_frame_response()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01335">CONTROL_TONE_RESPONSE_FAILED</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01337">CONTROL_TONE_RESPONSE_FINISHED</a>, <a class="el" href="../../d2/d0f/indications_8h_source.html#l00052">ast_tone_zone_sound::data</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01378">parse_tone_uri()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/de1/res__stasis__playback_8c_source.html#l00285">play_on_channel()</a>.</p>
<div class="fragment"><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;{</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d77/structast__tone__zone.html">ast_tone_zone</a> *zone = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dab/structast__tone__zone__sound.html">ast_tone_zone_sound</a> *ts;</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;   <span class="keywordtype">int</span> paused = 0;</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *tone_indication = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *tone_zone = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;   <span class="keywordtype">char</span> *tone_uri_parser;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(tone)) {</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;   }</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;   tone_uri_parser = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(tone);</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d83/main_2app_8c.html#af6b32f07971af303a81aa940a347fddb">parse_tone_uri</a>(tone_uri_parser, &amp;tone_indication, &amp;tone_zone)) {</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;   }</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;   <span class="keywordflow">if</span> (tone_zone) {</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;      zone = <a class="code" href="../../d2/d0f/indications_8h.html#a52513ad3507d90dc2baf7cfec7b201a7">ast_get_indication_zone</a>(tone_zone);</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;   }</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;   ts = <a class="code" href="../../d2/d0f/indications_8h.html#a516be2823557000dcd4be685a44d1d09">ast_get_indication_tone</a>(zone ? zone : <a class="code" href="../../d5/d7b/channel_8h.html#a673d53e20b8ac75477469442f51314e1">ast_channel_zone</a>(chan), tone_indication);</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d2/d0f/indications_8h.html#a544e8a1dd4a986b00754103dda6a7d3b">ast_playtones_start</a>(chan, 0, ts ? ts-&gt;<a class="code" href="../../d5/dab/structast__tone__zone__sound.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a> : tone_indication, 0)) {</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;      res = -1;</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;   }</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;   <span class="keywordflow">while</span> (!res) {</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *fr;</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a60e0bcaed001e8d5ed1ba0eb2644b3cc">ast_waitfor</a>(chan, -1) &lt; 0) {</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;         res = -1;</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;      }</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;      fr = <a class="code" href="../../d5/d7b/channel_8h.html#a1950f7fe77c02d233de02d299bab8c15">ast_read_noaudio</a>(chan);</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;      <span class="keywordflow">if</span> (!fr) {</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;         res = -1;</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;      }</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;      <span class="keywordflow">if</span> (fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> != <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>) {</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;      }</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;      res = <a class="code" href="../../d3/d83/main_2app_8c.html#a00f5bb2146302815137be471686d1b23">control_tone_frame_response</a>(chan, fr, ts, tone_indication, &amp;paused);</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;      <span class="keywordflow">if</span> (res == <a class="code" href="../../d3/d83/main_2app_8c.html#a8a71094a6fa4c99ee8ba96185eab3ea5aefb1f436a8fb0238eb8c6dcb092431f5">CONTROL_TONE_RESPONSE_FINISHED</a>) {</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;         res = 0;</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (res == <a class="code" href="../../d3/d83/main_2app_8c.html#a8a71094a6fa4c99ee8ba96185eab3ea5a44b954d1e48690a36cb2e1a054132635">CONTROL_TONE_RESPONSE_FAILED</a>) {</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;         res = -1;</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;      }</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;   }</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;   <span class="keywordflow">if</span> (ts) {</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;      <a class="code" href="../../d2/d0f/indications_8h.html#a8b52ace68f21c0ac24414f038471647d">ast_tone_zone_sound_unref</a>(ts);</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;   }</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;   <span class="keywordflow">if</span> (zone) {</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;      <a class="code" href="../../d2/d0f/indications_8h.html#ae4e735983064b7fe22ffc0fc046d700e">ast_tone_zone_unref</a>(zone);</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;   }</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;}</div><div class="ttc" id="indications_8h_html_ae4e735983064b7fe22ffc0fc046d700e"><div class="ttname"><a href="../../d2/d0f/indications_8h.html#ae4e735983064b7fe22ffc0fc046d700e">ast_tone_zone_unref</a></div><div class="ttdeci">static struct ast_tone_zone * ast_tone_zone_unref(struct ast_tone_zone *tz)</div><div class="ttdoc">Release a reference to an ast_tone_zone. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0f/indications_8h_source.html#l00205">indications.h:205</a></div></div>
<div class="ttc" id="main_2app_8c_html_af6b32f07971af303a81aa940a347fddb"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#af6b32f07971af303a81aa940a347fddb">parse_tone_uri</a></div><div class="ttdeci">static int parse_tone_uri(char *tone_parser, const char **tone_indication, const char **tone_zone)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01378">main/app.c:1378</a></div></div>
<div class="ttc" id="channel_8h_html_a673d53e20b8ac75477469442f51314e1"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a673d53e20b8ac75477469442f51314e1">ast_channel_zone</a></div><div class="ttdeci">struct ast_tone_zone * ast_channel_zone(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00745">channel_internal_api.c:745</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__tone__zone_html"><div class="ttname"><a href="../../dd/d77/structast__tone__zone.html">ast_tone_zone</a></div><div class="ttdoc">A set of tones for a given locale. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0f/indications_8h_source.html#l00074">indications.h:74</a></div></div>
<div class="ttc" id="main_2app_8c_html_a8a71094a6fa4c99ee8ba96185eab3ea5aefb1f436a8fb0238eb8c6dcb092431f5"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a8a71094a6fa4c99ee8ba96185eab3ea5aefb1f436a8fb0238eb8c6dcb092431f5">CONTROL_TONE_RESPONSE_FINISHED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01337">main/app.c:1337</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="indications_8h_html_a8b52ace68f21c0ac24414f038471647d"><div class="ttname"><a href="../../d2/d0f/indications_8h.html#a8b52ace68f21c0ac24414f038471647d">ast_tone_zone_sound_unref</a></div><div class="ttdeci">static struct ast_tone_zone_sound * ast_tone_zone_sound_unref(struct ast_tone_zone_sound *ts)</div><div class="ttdoc">Release a reference to an ast_tone_zone_sound. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0f/indications_8h_source.html#l00227">indications.h:227</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">include/asterisk/frame.h:105</a></div></div>
<div class="ttc" id="indications_8h_html_a52513ad3507d90dc2baf7cfec7b201a7"><div class="ttname"><a href="../../d2/d0f/indications_8h.html#a52513ad3507d90dc2baf7cfec7b201a7">ast_get_indication_zone</a></div><div class="ttdeci">struct ast_tone_zone * ast_get_indication_zone(const char *country)</div><div class="ttdoc">locate ast_tone_zone </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d6e/indications_8c_source.html#l00433">indications.c:433</a></div></div>
<div class="ttc" id="structast__tone__zone__sound_html"><div class="ttname"><a href="../../d5/dab/structast__tone__zone__sound.html">ast_tone_zone_sound</a></div><div class="ttdoc">Description of a tone. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0f/indications_8h_source.html#l00035">indications.h:35</a></div></div>
<div class="ttc" id="indications_8h_html_a516be2823557000dcd4be685a44d1d09"><div class="ttname"><a href="../../d2/d0f/indications_8h.html#a516be2823557000dcd4be685a44d1d09">ast_get_indication_tone</a></div><div class="ttdeci">struct ast_tone_zone_sound * ast_get_indication_tone(const struct ast_tone_zone *zone, const char *indication)</div><div class="ttdoc">Locate a tone zone sound. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d6e/indications_8c_source.html#l00455">indications.c:455</a></div></div>
<div class="ttc" id="main_2app_8c_html_a00f5bb2146302815137be471686d1b23"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a00f5bb2146302815137be471686d1b23">control_tone_frame_response</a></div><div class="ttdeci">static enum control_tone_frame_response_result control_tone_frame_response(struct ast_channel *chan, struct ast_frame *fr, struct ast_tone_zone_sound *ts, const char *tone, int *paused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01340">main/app.c:1340</a></div></div>
<div class="ttc" id="channel_8h_html_a60e0bcaed001e8d5ed1ba0eb2644b3cc"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a60e0bcaed001e8d5ed1ba0eb2644b3cc">ast_waitfor</a></div><div class="ttdeci">int ast_waitfor(struct ast_channel *chan, int ms)</div><div class="ttdoc">Wait for input on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03171">channel.c:3171</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="indications_8h_html_a544e8a1dd4a986b00754103dda6a7d3b"><div class="ttname"><a href="../../d2/d0f/indications_8h.html#a544e8a1dd4a986b00754103dda6a7d3b">ast_playtones_start</a></div><div class="ttdeci">int ast_playtones_start(struct ast_channel *chan, int vol, const char *tonelist, int interruptible)</div><div class="ttdoc">Start playing a list of tones on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d6e/indications_8c_source.html#l00302">indications.c:302</a></div></div>
<div class="ttc" id="structast__tone__zone__sound_html_a8f64897c7ccc5c13f276d1d07c4e7095"><div class="ttname"><a href="../../d5/dab/structast__tone__zone__sound.html#a8f64897c7ccc5c13f276d1d07c4e7095">ast_tone_zone_sound::data</a></div><div class="ttdeci">const char * data</div><div class="ttdoc">Description of a tone. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0f/indications_8h_source.html#l00052">indications.h:52</a></div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="channel_8h_html_a1950f7fe77c02d233de02d299bab8c15"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1950f7fe77c02d233de02d299bab8c15">ast_read_noaudio</a></div><div class="ttdeci">struct ast_frame * ast_read_noaudio(struct ast_channel *chan)</div><div class="ttdoc">Reads a frame, returning AST_FRAME_NULL frame if audio. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04312">channel.c:4312</a></div></div>
<div class="ttc" id="main_2app_8c_html_a8a71094a6fa4c99ee8ba96185eab3ea5a44b954d1e48690a36cb2e1a054132635"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a8a71094a6fa4c99ee8ba96185eab3ea5a44b954d1e48690a36cb2e1a054132635">CONTROL_TONE_RESPONSE_FAILED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01335">main/app.c:1335</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af20b8ac2e28e659be352bbaecdf0ab03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af20b8ac2e28e659be352bbaecdf0ab03">&#9670;&nbsp;</a></span>ast_dtmf_stream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_dtmf_stream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>peer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>digits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>between</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>duration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a string of DTMF digits to a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>The channel that will receive the DTMF frames </td></tr>
    <tr><td class="paramname">peer</td><td>(optional) Peer channel that will be autoserviced while the primary channel is receiving DTMF </td></tr>
    <tr><td class="paramname">digits</td><td>This is a string of characters representing the DTMF digits to be sent to the channel. Valid characters are "0123456789*#abcdABCD". Note: You can pass arguments 'f' or 'F', if you want to Flash the channel (if supported by the channel), or 'w' to add a 500 millisecond pause to the DTMF sequence. </td></tr>
    <tr><td class="paramname">between</td><td>This is the number of milliseconds to wait in between each DTMF digit. If zero milliseconds is specified, then the default value of 100 will be used. </td></tr>
    <tr><td class="paramname">duration</td><td>This is the duration that each DTMF digit should have.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>This must only be called by the channel's media handler thread.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on failure or a channel hung up. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00981">981</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00200">ast_autoservice_start()</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00266">ast_autoservice_stop()</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00899">dtmf_stream()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d26/app__externalivr_8c_source.html#l00356">ast_eivr_senddtmf()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01926">bridge_channel_dtmf_stream()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02254">dial_exec_full()</a>, <a class="el" href="../../de/de3/control_8c_source.html#l00534">dtmf_no_bridge()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l05509">handle_cli_misdn_send_digit()</a>, <a class="el" href="../../dc/d37/app__senddtmf_8c_source.html#l00095">senddtmf_exec()</a>, <a class="el" href="../../de/dfb/app__test_8c_source.html#l00154">testclient_exec()</a>, <a class="el" href="../../de/dfb/app__test_8c_source.html#l00329">testserver_exec()</a>, and <a class="el" href="../../d9/d12/app__dial_8c_source.html#l01202">wait_for_answer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;{</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;   <span class="keywordflow">if</span> (peer &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#a7a8f6a50f3db42cb40cad7cfbd1d54f9">ast_autoservice_start</a>(peer)) {</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;   }</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;   res = <a class="code" href="../../d3/d83/main_2app_8c.html#a47f4c14a6af38c0332d1e7b5639ce3a1">dtmf_stream</a>(chan, digits, between, duration, 0);</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;   <span class="keywordflow">if</span> (peer &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a>(peer)) {</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;      res = -1;</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;   }</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;}</div><div class="ttc" id="channel_8h_html_a7a8f6a50f3db42cb40cad7cfbd1d54f9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7a8f6a50f3db42cb40cad7cfbd1d54f9">ast_autoservice_start</a></div><div class="ttdeci">int ast_autoservice_start(struct ast_channel *chan)</div><div class="ttdoc">Automatically service a channel for us... </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00200">autoservice.c:200</a></div></div>
<div class="ttc" id="main_2app_8c_html_a47f4c14a6af38c0332d1e7b5639ce3a1"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a47f4c14a6af38c0332d1e7b5639ce3a1">dtmf_stream</a></div><div class="ttdeci">static int dtmf_stream(struct ast_channel *chan, const char *digits, int between, unsigned int duration, int is_external)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00899">main/app.c:899</a></div></div>
<div class="ttc" id="channel_8h_html_a08bde7d8cf72457fc8c519a4443b413b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a></div><div class="ttdeci">int ast_autoservice_stop(struct ast_channel *chan)</div><div class="ttdoc">Stop servicing a channel for us... </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00266">autoservice.c:266</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a36e4844e25a7e967607eb4812667a26a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36e4844e25a7e967607eb4812667a26a">&#9670;&nbsp;</a></span>ast_dtmf_stream_external()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_dtmf_stream_external </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>digits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>between</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>duration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a string of DTMF digits to a channel from an external thread. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>The channel that will receive the DTMF frames </td></tr>
    <tr><td class="paramname">digits</td><td>This is a string of characters representing the DTMF digits to be sent to the channel. Valid characters are "0123456789*#abcdABCD". Note: You can pass arguments 'f' or 'F', if you want to Flash the channel (if supported by the channel), or 'w' to add a 500 millisecond pause to the DTMF sequence. </td></tr>
    <tr><td class="paramname">between</td><td>This is the number of milliseconds to wait in between each DTMF digit. If zero milliseconds is specified, then the default value of 100 will be used. </td></tr>
    <tr><td class="paramname">duration</td><td>This is the duration that each DTMF digit should have.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>This must only be called by threads that are not the channel's media handler thread.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00996">996</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00899">dtmf_stream()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/de3/control_8c_source.html#l00521">dtmf_in_bridge()</a>.</p>
<div class="fragment"><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;{</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;   <a class="code" href="../../d3/d83/main_2app_8c.html#a47f4c14a6af38c0332d1e7b5639ce3a1">dtmf_stream</a>(chan, digits, between, duration, 1);</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;}</div><div class="ttc" id="main_2app_8c_html_a47f4c14a6af38c0332d1e7b5639ce3a1"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a47f4c14a6af38c0332d1e7b5639ce3a1">dtmf_stream</a></div><div class="ttdeci">static int dtmf_stream(struct ast_channel *chan, const char *digits, int between, unsigned int duration, int is_external)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00899">main/app.c:899</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1e8f73e62b3c2243eca582ee0d8d6147"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e8f73e62b3c2243eca582ee0d8d6147">&#9670;&nbsp;</a></span>ast_get_encoded_char()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_get_encoded_char </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>consumed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decode an encoded control or extended ASCII character. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">stream</td><td>String to decode </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">result</td><td>Decoded character </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">consumed</td><td>Number of characters used in stream to encode the character </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>Stream is of zero length </td></tr>
    <tr><td class="paramname">0</td><td>Success </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02927">2927</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l03002">ast_get_encoded_str()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l03015">ast_str_get_encoded_str()</a>, <a class="el" href="../../da/db0/func__cut_8c_source.html#l00153">cut_internal()</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l00709">filter()</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l00503">function_fieldnum_helper()</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l00440">function_fieldqty_helper()</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l00790">replace()</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01568">shift_pop()</a>, and <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01628">unshift_push()</a>.</p>
<div class="fragment"><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;{</div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;   *consumed = 1;</div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;   *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> = 0;</div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(stream)) {</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;      *consumed = 0;</div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;   }</div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;</div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;   <span class="keywordflow">if</span> (*stream == <span class="charliteral">&#39;\\&#39;</span>) {</div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;      *consumed = 2;</div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;      <span class="keywordflow">switch</span> (*(stream + 1)) {</div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;n&#39;</span>:</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;         *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> = <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;r&#39;</span>:</div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;         *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> = <span class="charliteral">&#39;\r&#39;</span>;</div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;t&#39;</span>:</div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;         *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> = <span class="charliteral">&#39;\t&#39;</span>;</div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;x&#39;</span>:</div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;         <span class="comment">/* Hexadecimal */</span></div><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;         <span class="keywordflow">if</span> (strchr(<span class="stringliteral">&quot;0123456789ABCDEFabcdef&quot;</span>, *(stream + 2)) &amp;&amp; *(stream + 2) != <span class="charliteral">&#39;\0&#39;</span>) {</div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;            *consumed = 3;</div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;            <span class="keywordflow">if</span> (*(stream + 2) &lt;= <span class="charliteral">&#39;9&#39;</span>) {</div><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;               *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> = *(stream + 2) - <span class="charliteral">&#39;0&#39;</span>;</div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*(stream + 2) &lt;= <span class="charliteral">&#39;F&#39;</span>) {</div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;               *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> = *(stream + 2) - <span class="charliteral">&#39;A&#39;</span> + 10;</div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;               *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> = *(stream + 2) - <span class="charliteral">&#39;a&#39;</span> + 10;</div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;            }</div><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Illegal character &#39;%c&#39; in hexadecimal string\n&quot;</span>, *(stream + 2));</div><div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;         }</div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;</div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;         <span class="keywordflow">if</span> (strchr(<span class="stringliteral">&quot;0123456789ABCDEFabcdef&quot;</span>, *(stream + 3)) &amp;&amp; *(stream + 3) != <span class="charliteral">&#39;\0&#39;</span>) {</div><div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;            *consumed = 4;</div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;            *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> &lt;&lt;= 4;</div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;            <span class="keywordflow">if</span> (*(stream + 3) &lt;= <span class="charliteral">&#39;9&#39;</span>) {</div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;               *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> += *(stream + 3) - <span class="charliteral">&#39;0&#39;</span>;</div><div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*(stream + 3) &lt;= <span class="charliteral">&#39;F&#39;</span>) {</div><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;               *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> += *(stream + 3) - <span class="charliteral">&#39;A&#39;</span> + 10;</div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;               *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> += *(stream + 3) - <span class="charliteral">&#39;a&#39;</span> + 10;</div><div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;            }</div><div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;         }</div><div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;0&#39;</span>:</div><div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;         <span class="comment">/* Octal */</span></div><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;         *consumed = 2;</div><div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;         <span class="keywordflow">for</span> (i = 2; ; i++) {</div><div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;            <span class="keywordflow">if</span> (strchr(<span class="stringliteral">&quot;01234567&quot;</span>, *(stream + i)) &amp;&amp; *(stream + i) != <span class="charliteral">&#39;\0&#39;</span>) {</div><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;               (*consumed)++;</div><div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;result was %d, &quot;</span>, *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>);</div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;               *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> &lt;&lt;= 3;</div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;               *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> += *(stream + i) - <span class="charliteral">&#39;0&#39;</span>;</div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(5, <span class="stringliteral">&quot;is now %d\n&quot;</span>, *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>);</div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;            }</div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;         }</div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;         *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> = *(stream + 1);</div><div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;      }</div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;      *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> = *stream;</div><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;      *consumed = 1;</div><div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;   }</div><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;}</div><div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7bfeeacfbb61627afb3bc534e208d48e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bfeeacfbb61627afb3bc534e208d48e">&#9670;&nbsp;</a></span>ast_get_encoded_str()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_get_encoded_str </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>result_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decode a stream of encoded control or extended ASCII characters. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">stream</td><td>Encoded string </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">result</td><td>Decoded string </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">result_len</td><td>Maximum size of the result buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the result string </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l03002">3002</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02927">ast_get_encoded_char()</a>, and <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00547">chan_pjsip_new()</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l00582">listfilter()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01494">mgcp_new()</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l00790">replace()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l34078">sip_addheader()</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l08161">sip_new()</a>.</p>
<div class="fragment"><div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;{</div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;   <span class="keywordtype">char</span> *cur = <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;   <span class="keywordtype">size_t</span> consumed;</div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;</div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;   <span class="keywordflow">while</span> (cur &lt; <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> + result_size - 1 &amp;&amp; !<a class="code" href="../../d3/d83/main_2app_8c.html#a1e8f73e62b3c2243eca582ee0d8d6147">ast_get_encoded_char</a>(stream, cur, &amp;consumed)) {</div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;      cur++;</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;      stream += consumed;</div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;   }</div><div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;   *cur = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;}</div><div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="main_2app_8c_html_a1e8f73e62b3c2243eca582ee0d8d6147"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a1e8f73e62b3c2243eca582ee0d8d6147">ast_get_encoded_char</a></div><div class="ttdeci">int ast_get_encoded_char(const char *stream, char *result, size_t *consumed)</div><div class="ttdoc">Decode an encoded control or extended ASCII character. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02927">main/app.c:2927</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a82224d29f5f5288c09279a9a6a69f09c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82224d29f5f5288c09279a9a6a69f09c">&#9670;&nbsp;</a></span>ast_install_stack_functions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_install_stack_functions </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d9/d3e/structast__app__stack__funcs.html">ast_app_stack_funcs</a> *&#160;</td>
          <td class="paramname"><em>funcs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set stack application function callbacks. </p>
<dl class="section since"><dt>Since</dt><dd>11 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">funcs</td><td>Stack applications callback functions. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00346">346</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/d71/app__stack_8c_source.html#l01295">load_module()</a>, and <a class="el" href="../../d1/d71/app__stack_8c_source.html#l01278">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;{</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;   <a class="code" href="../../d3/d83/main_2app_8c.html#a469da08184562e4040d91459db01be10">app_stack_callbacks</a> = funcs;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;}</div><div class="ttc" id="main_2app_8c_html_a469da08184562e4040d91459db01be10"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a469da08184562e4040d91459db01be10">app_stack_callbacks</a></div><div class="ttdeci">static const struct ast_app_stack_funcs * app_stack_callbacks</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00344">main/app.c:344</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a479e9d3cae1218f0f55e27d874a07a96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a479e9d3cae1218f0f55e27d874a07a96">&#9670;&nbsp;</a></span>ast_install_vm_test_functions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_install_vm_test_functions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#aeb09d8464050290e0a6f655e1f99497d">ast_vm_test_create_user_fn</a> *&#160;</td>
          <td class="paramname"><em>vm_test_create_user_func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#a4261c8076caaeb90e900f834b912ee4b">ast_vm_test_destroy_user_fn</a> *&#160;</td>
          <td class="paramname"><em>vm_test_destroy_user_func</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00599">599</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00596">ast_vm_test_create_user_func</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00597">ast_vm_test_destroy_user_func</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l15123">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;{</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;   <a class="code" href="../../d3/d83/main_2app_8c.html#ad3925a12ca1909720e1f4d7ea01fa8a3">ast_vm_test_create_user_func</a> = vm_test_create_user_func;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;   <a class="code" href="../../d3/d83/main_2app_8c.html#ac6b468fe42cea720c3ce8c7c4f0ea2c9">ast_vm_test_destroy_user_func</a> = vm_test_destroy_user_func;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;}</div><div class="ttc" id="main_2app_8c_html_ad3925a12ca1909720e1f4d7ea01fa8a3"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#ad3925a12ca1909720e1f4d7ea01fa8a3">ast_vm_test_create_user_func</a></div><div class="ttdeci">static ast_vm_test_create_user_fn * ast_vm_test_create_user_func</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00596">main/app.c:596</a></div></div>
<div class="ttc" id="main_2app_8c_html_ac6b468fe42cea720c3ce8c7c4f0ea2c9"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#ac6b468fe42cea720c3ce8c7c4f0ea2c9">ast_vm_test_destroy_user_func</a></div><div class="ttdeci">static ast_vm_test_destroy_user_fn * ast_vm_test_destroy_user_func</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00597">main/app.c:597</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac8ce675aa305c7c3236ab1816d78d611"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8ce675aa305c7c3236ab1816d78d611">&#9670;&nbsp;</a></span>ast_ivr_menu_run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_ivr_menu_run </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d62/structast__ivr__menu.html">ast_ivr_menu</a> *&#160;</td>
          <td class="paramname"><em>menu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>cbdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Runs an IVR menu. </p>
<dl class="section return"><dt>Returns</dt><dd>returns 0 on successful completion, -1 on hangup, or -2 on user error in menu </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02785">2785</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02700">ast_ivr_menu_run_internal()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/d14/app__ivrdemo_8c_source.html#l00095">skel_exec()</a>.</p>
<div class="fragment"><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;{</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;   <span class="keywordtype">int</span> res = <a class="code" href="../../d3/d83/main_2app_8c.html#a09ef1fec8abab2315272f9300705ef04">ast_ivr_menu_run_internal</a>(chan, menu, cbdata);</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;   <span class="comment">/* Hide internal coding */</span></div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;   <span class="keywordflow">return</span> res &gt; 0 ? 0 : res;</div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;}</div><div class="ttc" id="main_2app_8c_html_a09ef1fec8abab2315272f9300705ef04"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a09ef1fec8abab2315272f9300705ef04">ast_ivr_menu_run_internal</a></div><div class="ttdeci">static int ast_ivr_menu_run_internal(struct ast_channel *chan, struct ast_ivr_menu *menu, void *cbdata)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02700">main/app.c:2700</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a09ef1fec8abab2315272f9300705ef04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a09ef1fec8abab2315272f9300705ef04">&#9670;&nbsp;</a></span>ast_ivr_menu_run_internal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_ivr_menu_run_internal </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d62/structast__ivr__menu.html">ast_ivr_menu</a> *&#160;</td>
          <td class="paramname"><em>menu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>cbdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a379">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02700">2700</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d2/d4d/file_8h_source.html#l00048">AST_DIGIT_ANY</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00135">AST_MAX_EXTENSION</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00118">exten</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02590">ivr_dispatch()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dd/d27/res__adsi_8c_source.html#l00060">maxretries</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00075">ast_ivr_option::option</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02659">option_exists()</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00083">ast_ivr_menu::options</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02682">read_newoption()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02584">RES_EXIT</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02585">RES_REPEAT</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02586">RES_RESTART</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02583">RES_UPONE</a>, and <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00081">ast_ivr_menu::title</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02785">ast_ivr_menu_run()</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02590">ivr_dispatch()</a>.</p>
<div class="fragment"><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;{</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;   <span class="comment">/* Execute an IVR menu structure */</span></div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;   <span class="keywordtype">int</span> pos = 0;</div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;   <span class="keywordtype">int</span> retries = 0;</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>[<a class="code" href="../../d5/d7b/channel_8h.html#af4e59494f74ad9e0c50170d9e276ad31">AST_MAX_EXTENSION</a>] = <span class="stringliteral">&quot;s&quot;</span>;</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d83/main_2app_8c.html#a1b6fbacce14cf53fecf5be43487c0493">option_exists</a>(menu, <span class="stringliteral">&quot;s&quot;</span>) &lt; 0) {</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;      strcpy(exten, <span class="stringliteral">&quot;g&quot;</span>);</div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/d83/main_2app_8c.html#a1b6fbacce14cf53fecf5be43487c0493">option_exists</a>(menu, <span class="stringliteral">&quot;g&quot;</span>) &lt; 0) {</div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No &#39;s&#39; nor &#39;g&#39; extension in menu &#39;%s&#39;!\n&quot;</span>, menu-&gt;<a class="code" href="../../dd/d62/structast__ivr__menu.html#af06d911bb9e05f491ef3da520d03796c">title</a>);</div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;      }</div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;   }</div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;   <span class="keywordflow">while</span> (!res) {</div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;      <span class="keywordflow">while</span> (menu-&gt;<a class="code" href="../../dd/d62/structast__ivr__menu.html#a8c135e2e13bd106dbf11387dba36d840">options</a>[pos].<a class="code" href="../../d1/d18/structast__ivr__option.html#a756aafa2c9b99eaa7eb7f8886c7a8cb2">option</a>) {</div><div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;         <span class="keywordflow">if</span> (!strcasecmp(menu-&gt;<a class="code" href="../../dd/d62/structast__ivr__menu.html#a8c135e2e13bd106dbf11387dba36d840">options</a>[pos].<a class="code" href="../../d1/d18/structast__ivr__option.html#a756aafa2c9b99eaa7eb7f8886c7a8cb2">option</a>, exten)) {</div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;            res = <a class="code" href="../../d3/d83/main_2app_8c.html#af708a8d2a35e2699cd5b4851c20110e1">ivr_dispatch</a>(chan, menu-&gt;<a class="code" href="../../dd/d62/structast__ivr__menu.html#a8c135e2e13bd106dbf11387dba36d840">options</a> + pos, exten, cbdata);</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;IVR Dispatch of &#39;%s&#39; (pos %d) yields %d\n&quot;</span>, exten, pos, res);</div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;            <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (res &amp; <a class="code" href="../../d3/d83/main_2app_8c.html#a99e8fc9c191dce9a869c02541d31d178">RES_UPONE</a>) {</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;               <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (res &amp; <a class="code" href="../../d3/d83/main_2app_8c.html#ac68f484b9b363ef1c76def178529aadf">RES_EXIT</a>) {</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;               <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (res &amp; <a class="code" href="../../d3/d83/main_2app_8c.html#add236e92599b4e2157db3bb1fc4a2757">RES_REPEAT</a>) {</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;               <span class="keywordtype">int</span> <a class="code" href="../../dd/d27/res__adsi_8c.html#ac35730743cfe5d3cb0971c186fb1788a">maxretries</a> = res &amp; 0xffff;</div><div class="line"><a name="l02727"></a><span class="lineno"> 2727</span>&#160;               <span class="keywordflow">if</span> ((res &amp; <a class="code" href="../../d3/d83/main_2app_8c.html#afe510b02adee23bac957dd9db3333dba">RES_RESTART</a>) == RES_RESTART) {</div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;                  retries = 0;</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;                  retries++;</div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;               }</div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;               <span class="keywordflow">if</span> (!maxretries) {</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;                  maxretries = 3;</div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;               }</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;               <span class="keywordflow">if</span> ((maxretries &gt; 0) &amp;&amp; (retries &gt;= maxretries)) {</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;                  <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Max retries %d exceeded\n&quot;</span>, maxretries);</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;                  <span class="keywordflow">return</span> -2;</div><div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;                  <span class="keywordflow">if</span> (<a class="code" href="../../d3/d83/main_2app_8c.html#a1b6fbacce14cf53fecf5be43487c0493">option_exists</a>(menu, <span class="stringliteral">&quot;g&quot;</span>) &gt; -1) {</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;                     strcpy(exten, <span class="stringliteral">&quot;g&quot;</span>);</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;                  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d3/d83/main_2app_8c.html#a1b6fbacce14cf53fecf5be43487c0493">option_exists</a>(menu, <span class="stringliteral">&quot;s&quot;</span>) &gt; -1) {</div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;                     strcpy(exten, <span class="stringliteral">&quot;s&quot;</span>);</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;                  }</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;               }</div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;               pos = 0;</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;               <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (res &amp;&amp; strchr(<a class="code" href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a>, res)) {</div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Got start of extension, %c\n&quot;</span>, res);</div><div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;               exten[1] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;               exten[0] = res;</div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;               <span class="keywordflow">if</span> ((res = <a class="code" href="../../d3/d83/main_2app_8c.html#a8e4d0cf43a02ec7e663a50cee18315d2">read_newoption</a>(chan, menu, exten, <span class="keyword">sizeof</span>(exten)))) {</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;               }</div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../d3/d83/main_2app_8c.html#a1b6fbacce14cf53fecf5be43487c0493">option_exists</a>(menu, exten) &lt; 0) {</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;                  <span class="keywordflow">if</span> (<a class="code" href="../../d3/d83/main_2app_8c.html#a1b6fbacce14cf53fecf5be43487c0493">option_exists</a>(menu, <span class="stringliteral">&quot;i&quot;</span>)) {</div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;                     <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Invalid extension entered, going to &#39;i&#39;!\n&quot;</span>);</div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;                     strcpy(exten, <span class="stringliteral">&quot;i&quot;</span>);</div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;                     pos = 0;</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;                     <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;                  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;                     <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Aborting on invalid entry, with no &#39;i&#39; option!\n&quot;</span>);</div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;                     res = -2;</div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;                     <span class="keywordflow">break</span>;</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;                  }</div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;                  <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;New existing extension: %s\n&quot;</span>, exten);</div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;                  pos = 0;</div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;                  <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;               }</div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;            }</div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;         }</div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;         pos++;</div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;      }</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Stopping option &#39;%s&#39;, res is %d\n&quot;</span>, exten, res);</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;      pos = 0;</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(exten, <span class="stringliteral">&quot;s&quot;</span>)) {</div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;         strcpy(exten, <span class="stringliteral">&quot;g&quot;</span>);</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;      }</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;   }</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;}</div><div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="main_2app_8c_html_ac68f484b9b363ef1c76def178529aadf"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#ac68f484b9b363ef1c76def178529aadf">RES_EXIT</a></div><div class="ttdeci">#define RES_EXIT</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02584">main/app.c:2584</a></div></div>
<div class="ttc" id="file_8h_html_afa92b0106fb7a918ea994c2867ac0a04"><div class="ttname"><a href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a></div><div class="ttdeci">#define AST_DIGIT_ANY</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00048">file.h:48</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structast__ivr__option_html_a756aafa2c9b99eaa7eb7f8886c7a8cb2"><div class="ttname"><a href="../../d1/d18/structast__ivr__option.html#a756aafa2c9b99eaa7eb7f8886c7a8cb2">ast_ivr_option::option</a></div><div class="ttdeci">char * option</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00075">include/asterisk/app.h:75</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="main_2app_8c_html_a1b6fbacce14cf53fecf5be43487c0493"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a1b6fbacce14cf53fecf5be43487c0493">option_exists</a></div><div class="ttdeci">static int option_exists(struct ast_ivr_menu *menu, char *option)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02659">main/app.c:2659</a></div></div>
<div class="ttc" id="structast__ivr__menu_html_af06d911bb9e05f491ef3da520d03796c"><div class="ttname"><a href="../../dd/d62/structast__ivr__menu.html#af06d911bb9e05f491ef3da520d03796c">ast_ivr_menu::title</a></div><div class="ttdeci">char * title</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00081">include/asterisk/app.h:81</a></div></div>
<div class="ttc" id="channel_8h_html_af4e59494f74ad9e0c50170d9e276ad31"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af4e59494f74ad9e0c50170d9e276ad31">AST_MAX_EXTENSION</a></div><div class="ttdeci">#define AST_MAX_EXTENSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00135">channel.h:135</a></div></div>
<div class="ttc" id="main_2app_8c_html_add236e92599b4e2157db3bb1fc4a2757"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#add236e92599b4e2157db3bb1fc4a2757">RES_REPEAT</a></div><div class="ttdeci">#define RES_REPEAT</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02585">main/app.c:2585</a></div></div>
<div class="ttc" id="main_2app_8c_html_a8e4d0cf43a02ec7e663a50cee18315d2"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a8e4d0cf43a02ec7e663a50cee18315d2">read_newoption</a></div><div class="ttdeci">static int read_newoption(struct ast_channel *chan, struct ast_ivr_menu *menu, char *exten, int maxexten)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02682">main/app.c:2682</a></div></div>
<div class="ttc" id="res__adsi_8c_html_ac35730743cfe5d3cb0971c186fb1788a"><div class="ttname"><a href="../../dd/d27/res__adsi_8c.html#ac35730743cfe5d3cb0971c186fb1788a">maxretries</a></div><div class="ttdeci">static int maxretries</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d27/res__adsi_8c_source.html#l00060">res_adsi.c:60</a></div></div>
<div class="ttc" id="structast__ivr__menu_html_a8c135e2e13bd106dbf11387dba36d840"><div class="ttname"><a href="../../dd/d62/structast__ivr__menu.html#a8c135e2e13bd106dbf11387dba36d840">ast_ivr_menu::options</a></div><div class="ttdeci">struct ast_ivr_option * options</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00083">include/asterisk/app.h:83</a></div></div>
<div class="ttc" id="main_2app_8c_html_a99e8fc9c191dce9a869c02541d31d178"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a99e8fc9c191dce9a869c02541d31d178">RES_UPONE</a></div><div class="ttdeci">#define RES_UPONE</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02583">main/app.c:2583</a></div></div>
<div class="ttc" id="main_2app_8c_html_af708a8d2a35e2699cd5b4851c20110e1"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#af708a8d2a35e2699cd5b4851c20110e1">ivr_dispatch</a></div><div class="ttdeci">static int ivr_dispatch(struct ast_channel *chan, struct ast_ivr_option *option, char *exten, void *cbdata)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02590">main/app.c:2590</a></div></div>
<div class="ttc" id="main_2app_8c_html_afe510b02adee23bac957dd9db3333dba"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#afe510b02adee23bac957dd9db3333dba">RES_RESTART</a></div><div class="ttdeci">#define RES_RESTART</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02586">main/app.c:2586</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2566e275a6e912943c68cbfc867cc60a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2566e275a6e912943c68cbfc867cc60a">&#9670;&nbsp;</a></span>ast_linear_stream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_linear_stream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>allowoverride</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stream a filename (or file descriptor) as a generator. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01089">1089</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01004">linear_state::allowoverride</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02960">ast_activate_generator()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00158">ast_config_AST_DATA_DIR</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01003">linear_state::autoclose</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01002">linear_state::fd</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>.</p>
<div class="fragment"><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;{</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d07/structlinear__state.html">linear_state</a> *lin;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;   <span class="keywordtype">char</span> tmpf[256];</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../db/d07/structlinear__state.html#a766c6d52861f6f0ddb14b6d579ecb331">autoclose</a> = 0;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/d07/structlinear__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a> &lt; 0) {</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(filename)) {</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;      }</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;      autoclose = 1;</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;      <span class="keywordflow">if</span> (filename[0] == <span class="charliteral">&#39;/&#39;</span>) {</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(tmpf, filename, <span class="keyword">sizeof</span>(tmpf));</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;         snprintf(tmpf, <span class="keyword">sizeof</span>(tmpf), <span class="stringliteral">&quot;%s/%s/%s&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#a63af4213b5b83f717398d8d62008a50d">ast_config_AST_DATA_DIR</a>, <span class="stringliteral">&quot;sounds&quot;</span>, filename);</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;      }</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;      <a class="code" href="../../db/d07/structlinear__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a> = open(tmpf, O_RDONLY);</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/d07/structlinear__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a> &lt; 0) {</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to open file &#39;%s&#39;: %s\n&quot;</span>, tmpf, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;      }</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;   }</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;   lin = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*lin));</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;   <span class="keywordflow">if</span> (!lin) {</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;      <span class="keywordflow">if</span> (autoclose) {</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;         close(<a class="code" href="../../db/d07/structlinear__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>);</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;      }</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;   }</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;   lin-&gt;<a class="code" href="../../db/d07/structlinear__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a> = <a class="code" href="../../db/d07/structlinear__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;   lin-&gt;<a class="code" href="../../db/d07/structlinear__state.html#ab6d0ae4f4fba3a46c253a118a8d1bf72">allowoverride</a> = <a class="code" href="../../db/d07/structlinear__state.html#ab6d0ae4f4fba3a46c253a118a8d1bf72">allowoverride</a>;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;   lin-&gt;<a class="code" href="../../db/d07/structlinear__state.html#a766c6d52861f6f0ddb14b6d579ecb331">autoclose</a> = <a class="code" href="../../db/d07/structlinear__state.html#a766c6d52861f6f0ddb14b6d579ecb331">autoclose</a>;</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d7b/channel_8h.html#a12a58dda74a19f383f6b77cf7fa88b54">ast_activate_generator</a>(chan, &amp;<a class="code" href="../../d3/d83/main_2app_8c.html#a50b7bd92df6d7d96811b86030c0265b1">linearstream</a>, lin);</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;}</div><div class="ttc" id="channel_8h_html_a12a58dda74a19f383f6b77cf7fa88b54"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a12a58dda74a19f383f6b77cf7fa88b54">ast_activate_generator</a></div><div class="ttdeci">int ast_activate_generator(struct ast_channel *chan, struct ast_generator *gen, void *params)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02960">channel.c:2960</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structlinear__state_html_a766c6d52861f6f0ddb14b6d579ecb331"><div class="ttname"><a href="../../db/d07/structlinear__state.html#a766c6d52861f6f0ddb14b6d579ecb331">linear_state::autoclose</a></div><div class="ttdeci">int autoclose</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01003">main/app.c:1003</a></div></div>
<div class="ttc" id="paths_8h_html_a63af4213b5b83f717398d8d62008a50d"><div class="ttname"><a href="../../dd/df2/paths_8h.html#a63af4213b5b83f717398d8d62008a50d">ast_config_AST_DATA_DIR</a></div><div class="ttdeci">const char * ast_config_AST_DATA_DIR</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00158">options.c:158</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="main_2app_8c_html_a50b7bd92df6d7d96811b86030c0265b1"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a50b7bd92df6d7d96811b86030c0265b1">linearstream</a></div><div class="ttdeci">static struct ast_generator linearstream</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01082">main/app.c:1082</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structlinear__state_html_ab6d0ae4f4fba3a46c253a118a8d1bf72"><div class="ttname"><a href="../../db/d07/structlinear__state.html#ab6d0ae4f4fba3a46c253a118a8d1bf72">linear_state::allowoverride</a></div><div class="ttdeci">int allowoverride</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01004">main/app.c:1004</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="structlinear__state_html"><div class="ttname"><a href="../../db/d07/structlinear__state.html">linear_state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01001">main/app.c:1001</a></div></div>
<div class="ttc" id="structlinear__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../db/d07/structlinear__state.html#a6f8059414f0228f0256115e024eeed4b">linear_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01002">main/app.c:1002</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a74c57b5a842dcbc15cc991a31f679a13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74c57b5a842dcbc15cc991a31f679a13">&#9670;&nbsp;</a></span>ast_lock_path()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8c">AST_LOCK_RESULT</a> ast_lock_path </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lock a filesystem path. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>the path to be locked </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>one of <a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8c">AST_LOCK_RESULT</a> values </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02457">2457</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01168">AST_LOCK_FAILURE</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02337">ast_lock_path_flock()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02263">ast_lock_path_lockfile()</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01174">AST_LOCK_TYPE_FLOCK</a>, and <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01173">AST_LOCK_TYPE_LOCKFILE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d96/loader_8c_source.html#l01562">ast_module_reload()</a>, <a class="el" href="../../d2/da2/test__voicemail__api_8c_source.html#l00445">test_vm_api_create_voicemail_files()</a>, and <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l03302">vm_lock_path()</a>.</p>
<div class="fragment"><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;{</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8c">AST_LOCK_RESULT</a> r = <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8cac59129c6f641d69ad14017c1ba1f2635">AST_LOCK_FAILURE</a>;</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;   <span class="keywordflow">switch</span> (<a class="code" href="../../dd/d42/lock_8h.html#a91005557686d603e1210a200ef97153d">ast_lock_type</a>) {</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a889fad4c6cc627add80454ae61b53241a599f18fdf355d7530bb754b8c66d6de7">AST_LOCK_TYPE_LOCKFILE</a>:</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;      r = <a class="code" href="../../d3/d83/main_2app_8c.html#a5e3efda31e8018f394246681664d447c">ast_lock_path_lockfile</a>(path);</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a889fad4c6cc627add80454ae61b53241a78cd7e44280d287fc0168a0c31b75e3f">AST_LOCK_TYPE_FLOCK</a>:</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;      r = <a class="code" href="../../d3/d83/main_2app_8c.html#a631aa3756c80daa3b4c825189cfc183c">ast_lock_path_flock</a>(path);</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;   }</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;   <span class="keywordflow">return</span> r;</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;}</div><div class="ttc" id="include_2asterisk_2app_8h_html_a382bf96f47f0b7fa86ae5ed0644b3f8c"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8c">AST_LOCK_RESULT</a></div><div class="ttdeci">AST_LOCK_RESULT</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01164">include/asterisk/app.h:1164</a></div></div>
<div class="ttc" id="main_2app_8c_html_a5e3efda31e8018f394246681664d447c"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a5e3efda31e8018f394246681664d447c">ast_lock_path_lockfile</a></div><div class="ttdeci">static enum AST_LOCK_RESULT ast_lock_path_lockfile(const char *path)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02263">main/app.c:2263</a></div></div>
<div class="ttc" id="lock_8h_html_a91005557686d603e1210a200ef97153d"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a91005557686d603e1210a200ef97153d">ast_lock_type</a></div><div class="ttdeci">ast_lock_type</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00252">lock.h:252</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a889fad4c6cc627add80454ae61b53241a78cd7e44280d287fc0168a0c31b75e3f"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a889fad4c6cc627add80454ae61b53241a78cd7e44280d287fc0168a0c31b75e3f">AST_LOCK_TYPE_FLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01174">include/asterisk/app.h:1174</a></div></div>
<div class="ttc" id="main_2app_8c_html_a631aa3756c80daa3b4c825189cfc183c"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a631aa3756c80daa3b4c825189cfc183c">ast_lock_path_flock</a></div><div class="ttdeci">static enum AST_LOCK_RESULT ast_lock_path_flock(const char *path)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02337">main/app.c:2337</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a889fad4c6cc627add80454ae61b53241a599f18fdf355d7530bb754b8c66d6de7"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a889fad4c6cc627add80454ae61b53241a599f18fdf355d7530bb754b8c66d6de7">AST_LOCK_TYPE_LOCKFILE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01173">include/asterisk/app.h:1173</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a382bf96f47f0b7fa86ae5ed0644b3f8cac59129c6f641d69ad14017c1ba1f2635"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8cac59129c6f641d69ad14017c1ba1f2635">AST_LOCK_FAILURE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01168">include/asterisk/app.h:1168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a631aa3756c80daa3b4c825189cfc183c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a631aa3756c80daa3b4c825189cfc183c">&#9670;&nbsp;</a></span>ast_lock_path_flock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8c">AST_LOCK_RESULT</a> ast_lock_path_flock </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a366">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02337">2337</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00730">AST_LIST_INSERT_TAIL</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01168">AST_LOCK_FAILURE</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01167">AST_LOCK_PATH_NOT_FOUND</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01165">AST_LOCK_SUCCESS</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01166">AST_LOCK_TIMEOUT</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02320">path_lock::fd</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02321">path_lock::path</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02326">path_lock_destroy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02457">ast_lock_path()</a>.</p>
<div class="fragment"><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;{</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;   <span class="keywordtype">char</span> *fs;</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../db/d07/structlinear__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>;</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;   time_t start;</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/da7/structpath__lock.html">path_lock</a> *pl;</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;   <span class="keyword">struct </span>stat st, ost;</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;   fs = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(strlen(path) + 20);</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;   snprintf(fs, strlen(path) + 19, <span class="stringliteral">&quot;%s/lock&quot;</span>, path);</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;   <span class="keywordflow">if</span> (lstat(fs, &amp;st) == 0) {</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;      <span class="keywordflow">if</span> ((st.st_mode &amp; S_IFMT) == S_IFLNK) {</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to create lock file &quot;</span></div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;               <span class="stringliteral">&quot;&#39;%s&#39;: it&#39;s already a symbolic link\n&quot;</span>,</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;               fs);</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8cac59129c6f641d69ad14017c1ba1f2635">AST_LOCK_FAILURE</a>;</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;      }</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;      <span class="keywordflow">if</span> (st.st_nlink &gt; 1) {</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to create lock file &quot;</span></div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;               <span class="stringliteral">&quot;&#39;%s&#39;: %u hard links exist\n&quot;</span>,</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;               fs, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) st.st_nlink);</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8cac59129c6f641d69ad14017c1ba1f2635">AST_LOCK_FAILURE</a>;</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;      }</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;   }</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;   <span class="keywordflow">if</span> ((fd = open(fs, O_WRONLY | O_CREAT, 0600)) &lt; 0) {</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to create lock file &#39;%s&#39;: %s\n&quot;</span>,</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;            fs, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8ca46f6f55c5ee9576afd8dde6376c2b01a">AST_LOCK_PATH_NOT_FOUND</a>;</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;   }</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;   <span class="keywordflow">if</span> (!(pl = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*pl)))) {</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;      <span class="comment">/* We don&#39;t unlink the lock file here, on the possibility that</span></div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;<span class="comment">       * someone else created it - better to leave a little mess</span></div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;<span class="comment">       * than create a big one by destroying someone else&#39;s lock</span></div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;<span class="comment">       * and causing something to be corrupted.</span></div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;      close(fd);</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8cac59129c6f641d69ad14017c1ba1f2635">AST_LOCK_FAILURE</a>;</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;   }</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;   pl-&gt;<a class="code" href="../../da/da7/structpath__lock.html#a6f8059414f0228f0256115e024eeed4b">fd</a> = fd;</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;   pl-&gt;<a class="code" href="../../da/da7/structpath__lock.html#a44196e6a5696d10442c29e639437196e">path</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(path);</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;   time(&amp;start);</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;   <span class="keywordflow">while</span> (</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;      #ifdef SOLARIS</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;      ((res = fcntl(pl-&gt;<a class="code" href="../../da/da7/structpath__lock.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, F_SETLK, fcntl(pl-&gt;<a class="code" href="../../da/da7/structpath__lock.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, F_GETFL) | O_NONBLOCK)) &lt; 0) &amp;&amp;</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;      #else</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;      ((res = flock(pl-&gt;<a class="code" href="../../da/da7/structpath__lock.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, LOCK_EX | LOCK_NB)) &lt; 0) &amp;&amp;</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;      #endif</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;         (<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> == EWOULDBLOCK) &amp;&amp;</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;         (time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) - start &lt; 5))</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;      usleep(1000);</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to lock path &#39;%s&#39;: %s\n&quot;</span>,</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;            path, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;      <span class="comment">/* No unlinking of lock done, since we tried and failed to</span></div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;<span class="comment">       * flock() it.</span></div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;      <a class="code" href="../../d3/d83/main_2app_8c.html#a76f6ec06f0249fceeecd10687cb62e7d">path_lock_destroy</a>(pl);</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8ca9c0f41302de02bb0130a92669d17333d">AST_LOCK_TIMEOUT</a>;</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;   }</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;   <span class="comment">/* Check for the race where the file is recreated or deleted out from</span></div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;<span class="comment">    * underneath us.</span></div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;   <span class="keywordflow">if</span> (lstat(fs, &amp;st) != 0 &amp;&amp; fstat(pl-&gt;<a class="code" href="../../da/da7/structpath__lock.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, &amp;ost) != 0 &amp;&amp;</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;         st.st_dev != ost.st_dev &amp;&amp;</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;         st.st_ino != ost.st_ino) {</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to create lock file &#39;%s&#39;: &quot;</span></div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;            <span class="stringliteral">&quot;file changed underneath us\n&quot;</span>, fs);</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;      <a class="code" href="../../d3/d83/main_2app_8c.html#a76f6ec06f0249fceeecd10687cb62e7d">path_lock_destroy</a>(pl);</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8cac59129c6f641d69ad14017c1ba1f2635">AST_LOCK_FAILURE</a>;</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;   }</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;   <span class="comment">/* Success: file created, flocked, and is the one we started with */</span></div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d4/d9f/structpath__lock__list.html">path_lock_list</a>);</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d4/d9f/structpath__lock__list.html">path_lock_list</a>, pl, le);</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d4/d9f/structpath__lock__list.html">path_lock_list</a>);</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Locked path &#39;%s&#39;\n&quot;</span>, path);</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8ca37bdbc92223520af2a24d5bfd6f561bb">AST_LOCK_SUCCESS</a>;</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;}</div><div class="ttc" id="structpath__lock_html"><div class="ttname"><a href="../../da/da7/structpath__lock.html">path_lock</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02318">main/app.c:2318</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a382bf96f47f0b7fa86ae5ed0644b3f8ca37bdbc92223520af2a24d5bfd6f561bb"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8ca37bdbc92223520af2a24d5bfd6f561bb">AST_LOCK_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01165">include/asterisk/app.h:1165</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="structpath__lock_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../da/da7/structpath__lock.html#a6f8059414f0228f0256115e024eeed4b">path_lock::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02320">main/app.c:2320</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a382bf96f47f0b7fa86ae5ed0644b3f8ca9c0f41302de02bb0130a92669d17333d"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8ca9c0f41302de02bb0130a92669d17333d">AST_LOCK_TIMEOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01166">include/asterisk/app.h:1166</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a382bf96f47f0b7fa86ae5ed0644b3f8ca46f6f55c5ee9576afd8dde6376c2b01a"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8ca46f6f55c5ee9576afd8dde6376c2b01a">AST_LOCK_PATH_NOT_FOUND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01167">include/asterisk/app.h:1167</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4d258b4525e63c435d7de579d3f46960"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_LIST_INSERT_TAIL(head, elm, field)</div><div class="ttdoc">Appends a list entry to the tail of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00730">linkedlists.h:730</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structpath__lock_html_a44196e6a5696d10442c29e639437196e"><div class="ttname"><a href="../../da/da7/structpath__lock.html#a44196e6a5696d10442c29e639437196e">path_lock::path</a></div><div class="ttdeci">char * path</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02321">main/app.c:2321</a></div></div>
<div class="ttc" id="structpath__lock__list_html"><div class="ttname"><a href="../../d4/d9f/structpath__lock__list.html">path_lock_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02324">main/app.c:2324</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a382bf96f47f0b7fa86ae5ed0644b3f8cac59129c6f641d69ad14017c1ba1f2635"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8cac59129c6f641d69ad14017c1ba1f2635">AST_LOCK_FAILURE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01168">include/asterisk/app.h:1168</a></div></div>
<div class="ttc" id="main_2app_8c_html_a76f6ec06f0249fceeecd10687cb62e7d"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a76f6ec06f0249fceeecd10687cb62e7d">path_lock_destroy</a></div><div class="ttdeci">static void path_lock_destroy(struct path_lock *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02326">main/app.c:2326</a></div></div>
<div class="ttc" id="structlinear__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../db/d07/structlinear__state.html#a6f8059414f0228f0256115e024eeed4b">linear_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01002">main/app.c:1002</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5e3efda31e8018f394246681664d447c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e3efda31e8018f394246681664d447c">&#9670;&nbsp;</a></span>ast_lock_path_lockfile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8c">AST_LOCK_RESULT</a> ast_lock_path_lockfile </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a355">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02263">2263</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../db/db2/asterisk_8h_source.html#l00032">AST_FILE_MODE</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01167">AST_LOCK_PATH_NOT_FOUND</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01165">AST_LOCK_SUCCESS</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01166">AST_LOCK_TIMEOUT</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02064">ast_random()</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02457">ast_lock_path()</a>.</p>
<div class="fragment"><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;{</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;   <span class="keywordtype">char</span> *s;</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;   <span class="keywordtype">char</span> *fs;</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;   <span class="keywordtype">int</span> fd;</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;   <span class="keywordtype">int</span> lp = strlen(path);</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;   time_t start;</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;   s = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(lp + 10);</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;   fs = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(lp + 20);</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;   snprintf(fs, strlen(path) + 19, <span class="stringliteral">&quot;%s/.lock-%08lx&quot;</span>, path, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)<a class="code" href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a>());</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;   fd = open(fs, O_WRONLY | O_CREAT | O_EXCL, <a class="code" href="../../db/db2/asterisk_8h.html#aa6293b2dae52a2b470494df672a26c42">AST_FILE_MODE</a>);</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;   <span class="keywordflow">if</span> (fd &lt; 0) {</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to create lock file &#39;%s&#39;: %s\n&quot;</span>, path, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8ca46f6f55c5ee9576afd8dde6376c2b01a">AST_LOCK_PATH_NOT_FOUND</a>;</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;   }</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;   close(fd);</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;   snprintf(s, strlen(path) + 9, <span class="stringliteral">&quot;%s/.lock&quot;</span>, path);</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;   start = time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;   <span class="keywordflow">while</span> (((res = link(fs, s)) &lt; 0) &amp;&amp; (<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> == EEXIST) &amp;&amp; (time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) - start &lt; 5)) {</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;      sched_yield();</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;   }</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;   unlink(fs);</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to lock path &#39;%s&#39;: %s\n&quot;</span>, path, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8ca9c0f41302de02bb0130a92669d17333d">AST_LOCK_TIMEOUT</a>;</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Locked path &#39;%s&#39;\n&quot;</span>, path);</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8ca37bdbc92223520af2a24d5bfd6f561bb">AST_LOCK_SUCCESS</a>;</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;   }</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;}</div><div class="ttc" id="include_2asterisk_2app_8h_html_a382bf96f47f0b7fa86ae5ed0644b3f8ca37bdbc92223520af2a24d5bfd6f561bb"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8ca37bdbc92223520af2a24d5bfd6f561bb">AST_LOCK_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01165">include/asterisk/app.h:1165</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a382bf96f47f0b7fa86ae5ed0644b3f8ca9c0f41302de02bb0130a92669d17333d"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8ca9c0f41302de02bb0130a92669d17333d">AST_LOCK_TIMEOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01166">include/asterisk/app.h:1166</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="asterisk_8h_html_aa6293b2dae52a2b470494df672a26c42"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#aa6293b2dae52a2b470494df672a26c42">AST_FILE_MODE</a></div><div class="ttdeci">#define AST_FILE_MODE</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db2/asterisk_8h_source.html#l00032">asterisk.h:32</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a382bf96f47f0b7fa86ae5ed0644b3f8ca46f6f55c5ee9576afd8dde6376c2b01a"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a382bf96f47f0b7fa86ae5ed0644b3f8ca46f6f55c5ee9576afd8dde6376c2b01a">AST_LOCK_PATH_NOT_FOUND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01167">include/asterisk/app.h:1167</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="utils_8h_html_a7b4f10b070e95ba413e258a3e4b03c20"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a></div><div class="ttdeci">long int ast_random(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02064">main/utils.c:2064</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aea588ff21e48ab0fcdaef5beb911ea56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea588ff21e48ab0fcdaef5beb911ea56">&#9670;&nbsp;</a></span>ast_mf_stream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_mf_stream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>peer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>digits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>between</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>duration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>durationkp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>durationst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>is_external</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a string of MF digits to a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>The channel that will receive the MF frames </td></tr>
    <tr><td class="paramname">peer</td><td>(optional) Peer channel that will be autoserviced while the primary channel is receiving MF </td></tr>
    <tr><td class="paramname">digits</td><td>This is a string of characters representing the MF digits to be sent to the channel. Valid characters are "0123456789*#abcdABCD". Note: You can pass arguments 'f' or 'F', if you want to Flash the channel (if supported by the channel), or 'w' or 'W' to add a wink (if supported by the channel). </td></tr>
    <tr><td class="paramname">between</td><td>This is the number of milliseconds to wait in between each MF digit. If zero milliseconds is specified, then the default value of 50 will be used. </td></tr>
    <tr><td class="paramname">duration</td><td>This is the duration that each numeric MF digit should have. Default value is 55. </td></tr>
    <tr><td class="paramname">durationkp</td><td>This is the duration that each KP digit should have. Default is 120. </td></tr>
    <tr><td class="paramname">durationst</td><td>This is the duration that each ST, STP, ST2P, or ST3P digit should have. Default is 65. </td></tr>
    <tr><td class="paramname">is_external</td><td>1 if called by a thread that is not the channel's media handler thread, 0 if called by the channel's media handler thread.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on failure or a channel hung up. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00967">967</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00200">ast_autoservice_start()</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00266">ast_autoservice_stop()</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00836">mf_stream()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02254">dial_exec_full()</a>, <a class="el" href="../../d7/d1d/app__mf_8c_source.html#l00682">manager_play_mf()</a>, <a class="el" href="../../d7/d1d/app__mf_8c_source.html#l00620">sendmf_exec()</a>, and <a class="el" href="../../d9/d12/app__dial_8c_source.html#l01202">wait_for_answer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;{</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;   <span class="keywordflow">if</span> (!is_external &amp;&amp; peer &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#a7a8f6a50f3db42cb40cad7cfbd1d54f9">ast_autoservice_start</a>(peer)) {</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;   }</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;   res = <a class="code" href="../../d3/d83/main_2app_8c.html#a05cbe2ad6e9abffb950e49b86e17b6a3">mf_stream</a>(chan, digits, between, duration, durationkp, durationst, is_external);</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;   <span class="keywordflow">if</span> (!is_external &amp;&amp; peer &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a>(peer)) {</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;      res = -1;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;   }</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;}</div><div class="ttc" id="channel_8h_html_a7a8f6a50f3db42cb40cad7cfbd1d54f9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7a8f6a50f3db42cb40cad7cfbd1d54f9">ast_autoservice_start</a></div><div class="ttdeci">int ast_autoservice_start(struct ast_channel *chan)</div><div class="ttdoc">Automatically service a channel for us... </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00200">autoservice.c:200</a></div></div>
<div class="ttc" id="main_2app_8c_html_a05cbe2ad6e9abffb950e49b86e17b6a3"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a05cbe2ad6e9abffb950e49b86e17b6a3">mf_stream</a></div><div class="ttdeci">static int mf_stream(struct ast_channel *chan, const char *digits, int between, unsigned int duration, unsigned int durationkp, unsigned int durationst, int is_external)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00836">main/app.c:836</a></div></div>
<div class="ttc" id="channel_8h_html_a08bde7d8cf72457fc8c519a4443b413b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a></div><div class="ttdeci">int ast_autoservice_stop(struct ast_channel *chan)</div><div class="ttdoc">Stop servicing a channel for us... </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00266">autoservice.c:266</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3166745891066af991b134a88991b8ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3166745891066af991b134a88991b8ea">&#9670;&nbsp;</a></span>ast_play_and_prepend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_play_and_prepend </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>playfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>recordfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxtime_sec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>duration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>sound_duration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>beep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>silencethreshold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxsilence_ms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Record a file based on input frm a channel. Recording is performed in 'prepend' mode which works a little differently from normal recordings This function will not play a success message due to post-recording control in the application this was added for. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>the channel being recorded </td></tr>
    <tr><td class="paramname">playfile</td><td>Filename of sound to play before recording begins </td></tr>
    <tr><td class="paramname">recordfile</td><td>Filename to save the recording </td></tr>
    <tr><td class="paramname">maxtime_sec</td><td>Longest possible message length in seconds </td></tr>
    <tr><td class="paramname">fmt</td><td>string containing all formats to be recorded delimited by '|' </td></tr>
    <tr><td class="paramname">duration</td><td>pointer to integer for storing length of the recording </td></tr>
    <tr><td class="paramname">sound_duration</td><td>pointer to integer for storing length of the recording minus all silence </td></tr>
    <tr><td class="paramname">beep</td><td>whether to play a beep to prompt the recording </td></tr>
    <tr><td class="paramname">silencethreshold</td><td>tolerance of noise levels that can be considered silence for the purpose of silence timeout, -1 for default </td></tr>
    <tr><td class="paramname">maxsilence_ms</td><td>length of time in milliseconds which will trigger a timeout from silence, -1 for default.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>failure or hangup </td></tr>
    <tr><td class="paramname">'S'</td><td>Recording ended from silence timeout </td></tr>
    <tr><td class="paramname">'t'</td><td>Recording either exceeded maximum duration or the call was ended via DTMF </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02002">2002</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01580">__ast_play_and_record()</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01078">AST_RECORD_IF_EXISTS_OVERWRITE</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01989">default_acceptdtmf</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01990">default_canceldtmf</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l07948">vm_forwardoptions()</a>.</p>
<div class="fragment"><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;{</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d83/main_2app_8c.html#a62eed141a738ca542b4373a0b078e431">__ast_play_and_record</a>(chan, playfile, recordfile, maxtime, fmt, duration, sound_duration, beep, <a class="code" href="../../dc/df4/app__voicemail_8c.html#abebd9f51e7ff2f4d68f3952210219b4e">silencethreshold</a>, <a class="code" href="../../dc/df4/app__voicemail_8c.html#ad87fa9ba37f50714bc922335b3b7ea91">maxsilence</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 1, <a class="code" href="../../d3/d83/main_2app_8c.html#a28df6ce01a3a3bc9f0495c070443b4ee">default_acceptdtmf</a>, <a class="code" href="../../d3/d83/main_2app_8c.html#a652c75796183b2b640cc95dc58b76bab">default_canceldtmf</a>, 1, <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac665722c9bfe6d9b506df95184aa236da8022c0ca0ab8535428aed27423a40e2c">AST_RECORD_IF_EXISTS_OVERWRITE</a>);</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;}</div><div class="ttc" id="main_2app_8c_html_a62eed141a738ca542b4373a0b078e431"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a62eed141a738ca542b4373a0b078e431">__ast_play_and_record</a></div><div class="ttdeci">static int __ast_play_and_record(struct ast_channel *chan, const char *playfile, const char *recordfile, int maxtime, const char *fmt, int *duration, int *sound_duration, int beep, int silencethreshold, int maxsilence, const char *path, int prepend, const char *acceptdtmf, const char *canceldtmf, int skip_confirmation_sound, enum ast_record_if_exists if_exists)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01580">main/app.c:1580</a></div></div>
<div class="ttc" id="main_2app_8c_html_a28df6ce01a3a3bc9f0495c070443b4ee"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a28df6ce01a3a3bc9f0495c070443b4ee">default_acceptdtmf</a></div><div class="ttdeci">static const char default_acceptdtmf[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01989">main/app.c:1989</a></div></div>
<div class="ttc" id="main_2app_8c_html_a652c75796183b2b640cc95dc58b76bab"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a652c75796183b2b640cc95dc58b76bab">default_canceldtmf</a></div><div class="ttdeci">static const char default_canceldtmf[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01990">main/app.c:1990</a></div></div>
<div class="ttc" id="app__voicemail_8c_html_ad87fa9ba37f50714bc922335b3b7ea91"><div class="ttname"><a href="../../dc/df4/app__voicemail_8c.html#ad87fa9ba37f50714bc922335b3b7ea91">maxsilence</a></div><div class="ttdeci">static int maxsilence</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l00919">app_voicemail.c:919</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="app__voicemail_8c_html_abebd9f51e7ff2f4d68f3952210219b4e"><div class="ttname"><a href="../../dc/df4/app__voicemail_8c.html#abebd9f51e7ff2f4d68f3952210219b4e">silencethreshold</a></div><div class="ttdeci">static int silencethreshold</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l00922">app_voicemail.c:922</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac665722c9bfe6d9b506df95184aa236da8022c0ca0ab8535428aed27423a40e2c"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac665722c9bfe6d9b506df95184aa236da8022c0ca0ab8535428aed27423a40e2c">AST_RECORD_IF_EXISTS_OVERWRITE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01078">include/asterisk/app.h:1078</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adfe53155f5f51d40905d4d75b74cf85f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfe53155f5f51d40905d4d75b74cf85f">&#9670;&nbsp;</a></span>ast_play_and_record()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_play_and_record </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>playfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>recordfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxtime_sec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>duration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>sound_duration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>silencethreshold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxsilence_ms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Record a file based on input from a channel. Use default accept and cancel DTMF. This function will play "auth-thankyou" upon successful recording. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>the channel being recorded </td></tr>
    <tr><td class="paramname">playfile</td><td>Filename of sound to play before recording begins </td></tr>
    <tr><td class="paramname">recordfile</td><td>Filename to save the recording </td></tr>
    <tr><td class="paramname">maxtime_sec</td><td>Longest possible message length in seconds </td></tr>
    <tr><td class="paramname">fmt</td><td>string containing all formats to be recorded delimited by '|' </td></tr>
    <tr><td class="paramname">duration</td><td>pointer to integer for storing length of the recording </td></tr>
    <tr><td class="paramname">sound_duration</td><td>pointer to integer for storing length of the recording minus all silence </td></tr>
    <tr><td class="paramname">silencethreshold</td><td>tolerance of noise levels that can be considered silence for the purpose of silence timeout, -1 for default </td></tr>
    <tr><td class="paramname">maxsilence_ms</td><td>length of time in milliseconds which will trigger a timeout from silence, -1 for default </td></tr>
    <tr><td class="paramname">path</td><td>Optional filesystem path to unlock</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>failure or hangup </td></tr>
    <tr><td class="paramname">'S'</td><td>Recording ended from silence timeout </td></tr>
    <tr><td class="paramname">'t'</td><td>Recording ended from the message exceeding the maximum duration </td></tr>
    <tr><td class="paramname">dtmfchar</td><td>Recording ended via the return value's DTMF character for either cancel or accept. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01997">1997</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01580">__ast_play_and_record()</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01078">AST_RECORD_IF_EXISTS_OVERWRITE</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01989">default_acceptdtmf</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01990">default_canceldtmf</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d55/app__followme_8c_source.html#l01339">app_exec()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02489">ast_record_review()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l02399">conf_rec_name()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l03177">conf_run()</a>, and <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02075">setup_privacy_args()</a>.</p>
<div class="fragment"><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;{</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d83/main_2app_8c.html#a62eed141a738ca542b4373a0b078e431">__ast_play_and_record</a>(chan, playfile, recordfile, maxtime, fmt, duration, sound_duration, 0, <a class="code" href="../../dc/df4/app__voicemail_8c.html#abebd9f51e7ff2f4d68f3952210219b4e">silencethreshold</a>, <a class="code" href="../../dc/df4/app__voicemail_8c.html#ad87fa9ba37f50714bc922335b3b7ea91">maxsilence</a>, path, 0, <a class="code" href="../../d3/d83/main_2app_8c.html#a28df6ce01a3a3bc9f0495c070443b4ee">default_acceptdtmf</a>, <a class="code" href="../../d3/d83/main_2app_8c.html#a652c75796183b2b640cc95dc58b76bab">default_canceldtmf</a>, 0, <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac665722c9bfe6d9b506df95184aa236da8022c0ca0ab8535428aed27423a40e2c">AST_RECORD_IF_EXISTS_OVERWRITE</a>);</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;}</div><div class="ttc" id="main_2app_8c_html_a62eed141a738ca542b4373a0b078e431"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a62eed141a738ca542b4373a0b078e431">__ast_play_and_record</a></div><div class="ttdeci">static int __ast_play_and_record(struct ast_channel *chan, const char *playfile, const char *recordfile, int maxtime, const char *fmt, int *duration, int *sound_duration, int beep, int silencethreshold, int maxsilence, const char *path, int prepend, const char *acceptdtmf, const char *canceldtmf, int skip_confirmation_sound, enum ast_record_if_exists if_exists)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01580">main/app.c:1580</a></div></div>
<div class="ttc" id="main_2app_8c_html_a28df6ce01a3a3bc9f0495c070443b4ee"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a28df6ce01a3a3bc9f0495c070443b4ee">default_acceptdtmf</a></div><div class="ttdeci">static const char default_acceptdtmf[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01989">main/app.c:1989</a></div></div>
<div class="ttc" id="main_2app_8c_html_a652c75796183b2b640cc95dc58b76bab"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a652c75796183b2b640cc95dc58b76bab">default_canceldtmf</a></div><div class="ttdeci">static const char default_canceldtmf[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01990">main/app.c:1990</a></div></div>
<div class="ttc" id="app__voicemail_8c_html_ad87fa9ba37f50714bc922335b3b7ea91"><div class="ttname"><a href="../../dc/df4/app__voicemail_8c.html#ad87fa9ba37f50714bc922335b3b7ea91">maxsilence</a></div><div class="ttdeci">static int maxsilence</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l00919">app_voicemail.c:919</a></div></div>
<div class="ttc" id="app__voicemail_8c_html_abebd9f51e7ff2f4d68f3952210219b4e"><div class="ttname"><a href="../../dc/df4/app__voicemail_8c.html#abebd9f51e7ff2f4d68f3952210219b4e">silencethreshold</a></div><div class="ttdeci">static int silencethreshold</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l00922">app_voicemail.c:922</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac665722c9bfe6d9b506df95184aa236da8022c0ca0ab8535428aed27423a40e2c"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac665722c9bfe6d9b506df95184aa236da8022c0ca0ab8535428aed27423a40e2c">AST_RECORD_IF_EXISTS_OVERWRITE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01078">include/asterisk/app.h:1078</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0feee747237e8203c4ed9067fd4059d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0feee747237e8203c4ed9067fd4059d0">&#9670;&nbsp;</a></span>ast_play_and_record_full()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_play_and_record_full </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>playfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>recordfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxtime_sec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>duration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>sound_duration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>beep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>silencethreshold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxsilence_ms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>acceptdtmf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>canceldtmf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>skip_confirmation_sound</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#ac665722c9bfe6d9b506df95184aa236d">ast_record_if_exists</a>&#160;</td>
          <td class="paramname"><em>if_exists</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Record a file based on input from a channel This function will play "auth-thankyou" upon successful recording if skip_confirmation_sound is false. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>the channel being recorded </td></tr>
    <tr><td class="paramname">playfile</td><td>Filename of sound to play before recording begins. A beep is also played when playfile completes, before the recording begins. </td></tr>
    <tr><td class="paramname">recordfile</td><td>Filename to save the recording </td></tr>
    <tr><td class="paramname">maxtime_sec</td><td>Longest possible message length in seconds </td></tr>
    <tr><td class="paramname">fmt</td><td>string containing all formats to be recorded delimited by '|' </td></tr>
    <tr><td class="paramname">duration</td><td>pointer to integer for storing length of the recording </td></tr>
    <tr><td class="paramname">beep</td><td>If true, play a beep before recording begins (and doesn't play <em>playfile</em>) </td></tr>
    <tr><td class="paramname">sound_duration</td><td>pointer to integer for storing length of the recording minus all silence </td></tr>
    <tr><td class="paramname">silencethreshold</td><td>tolerance of noise levels that can be considered silence for the purpose of silence timeout, -1 for default </td></tr>
    <tr><td class="paramname">maxsilence_ms</td><td>Length of time in milliseconds which will trigger a timeout from silence, -1 for default </td></tr>
    <tr><td class="paramname">path</td><td>Optional filesystem path to unlock </td></tr>
    <tr><td class="paramname">acceptdtmf</td><td>Character of DTMF to end and accept the recording </td></tr>
    <tr><td class="paramname">canceldtmf</td><td>Character of DTMF to end and cancel the recording </td></tr>
    <tr><td class="paramname">skip_confirmation_sound</td><td>If true, don't play auth-thankyou at end. Nice for custom recording prompts in apps. </td></tr>
    <tr><td class="paramname">if_exists</td><td>Action to take if recording already exists.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>failure or hangup </td></tr>
    <tr><td class="paramname">'S'</td><td>Recording ended from silence timeout </td></tr>
    <tr><td class="paramname">'t'</td><td>Recording ended from the message exceeding the maximum duration </td></tr>
    <tr><td class="paramname">dtmfchar</td><td>Recording ended via the return value's DTMF character for either cancel or accept. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01992">1992</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01580">__ast_play_and_record()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01990">default_canceldtmf</a>, and <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l01644">play_record_review()</a>, and <a class="el" href="../../d8/d4c/res__stasis__recording_8c_source.html#l00296">record_file()</a>.</p>
<div class="fragment"><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;{</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d83/main_2app_8c.html#a62eed141a738ca542b4373a0b078e431">__ast_play_and_record</a>(chan, playfile, recordfile, maxtime, fmt, duration, sound_duration, beep, <a class="code" href="../../dc/df4/app__voicemail_8c.html#abebd9f51e7ff2f4d68f3952210219b4e">silencethreshold</a>, <a class="code" href="../../dc/df4/app__voicemail_8c.html#ad87fa9ba37f50714bc922335b3b7ea91">maxsilence</a>, path, 0, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(acceptdtmf, <span class="stringliteral">&quot;&quot;</span>), <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(canceldtmf, <a class="code" href="../../d3/d83/main_2app_8c.html#a652c75796183b2b640cc95dc58b76bab">default_canceldtmf</a>), skip_confirmation_sound, if_exists);</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;}</div><div class="ttc" id="main_2app_8c_html_a62eed141a738ca542b4373a0b078e431"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a62eed141a738ca542b4373a0b078e431">__ast_play_and_record</a></div><div class="ttdeci">static int __ast_play_and_record(struct ast_channel *chan, const char *playfile, const char *recordfile, int maxtime, const char *fmt, int *duration, int *sound_duration, int beep, int silencethreshold, int maxsilence, const char *path, int prepend, const char *acceptdtmf, const char *canceldtmf, int skip_confirmation_sound, enum ast_record_if_exists if_exists)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01580">main/app.c:1580</a></div></div>
<div class="ttc" id="main_2app_8c_html_a652c75796183b2b640cc95dc58b76bab"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a652c75796183b2b640cc95dc58b76bab">default_canceldtmf</a></div><div class="ttdeci">static const char default_canceldtmf[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01990">main/app.c:1990</a></div></div>
<div class="ttc" id="app__voicemail_8c_html_ad87fa9ba37f50714bc922335b3b7ea91"><div class="ttname"><a href="../../dc/df4/app__voicemail_8c.html#ad87fa9ba37f50714bc922335b3b7ea91">maxsilence</a></div><div class="ttdeci">static int maxsilence</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l00919">app_voicemail.c:919</a></div></div>
<div class="ttc" id="app__voicemail_8c_html_abebd9f51e7ff2f4d68f3952210219b4e"><div class="ttname"><a href="../../dc/df4/app__voicemail_8c.html#abebd9f51e7ff2f4d68f3952210219b4e">silencethreshold</a></div><div class="ttdeci">static int silencethreshold</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l00922">app_voicemail.c:922</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abbbec6ab9a303e865a1d1a261152540d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbbec6ab9a303e865a1d1a261152540d">&#9670;&nbsp;</a></span>ast_play_and_wait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_play_and_wait </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Play a stream and wait for a digit, returning the digit that was pressed. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01470">1470</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language()</a>, <a class="el" href="../../d2/d4d/file_8h_source.html#l00048">AST_DIGIT_ANY</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00187">ast_stopstream()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01250">ast_streamfile()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01776">ast_waitstream()</a>, and <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00049">d</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01580">__ast_play_and_record()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l15305">advanced_options()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02489">ast_record_review()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l09577">ast_say_counted_adjective()</a>, <a class="el" href="../../d7/d01/say_8c_source.html#l09535">ast_say_counted_noun()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l15233">dialout()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l08269">forward_message()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l07819">get_folder()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l07904">get_folder2()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l07865">get_folder_ja()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l06601">leave_voicemail()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l02268">minivm_greet_exec()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l08623">play_message_category()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l08793">play_message_duration()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l01644">play_record_review()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l01928">valid_priv_reply()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l02021">vm_allocate_dh()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l11226">vm_authenticate()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l11015">vm_browse_messages_en()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l11096">vm_browse_messages_es()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l10963">vm_browse_messages_gr()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l10991">vm_browse_messages_he()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l11043">vm_browse_messages_it()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l11069">vm_browse_messages_ja()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l11122">vm_browse_messages_pt()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l11176">vm_browse_messages_vi()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l11148">vm_browse_messages_zh()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l12278">vm_exec()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l11503">vm_execmain()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l07948">vm_forwardoptions()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l10427">vm_instructions_en()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l10515">vm_instructions_ja()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l10611">vm_instructions_zh()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l10361">vm_intro()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l10231">vm_intro_cs()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l09927">vm_intro_de()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l09607">vm_intro_en()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l09976">vm_intro_es()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l10074">vm_intro_fr()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l09367">vm_intro_gr()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l09501">vm_intro_he()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l09664">vm_intro_is()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l09733">vm_intro_it()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l09568">vm_intro_ja()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l09461">vm_intro_multilang()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l10117">vm_intro_nl()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l09883">vm_intro_no()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l09768">vm_intro_pl()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l10168">vm_intro_pt()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l10029">vm_intro_pt_BR()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l09839">vm_intro_se()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l10331">vm_intro_vi()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l10292">vm_intro_zh()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l10646">vm_newuser_setup()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l10744">vm_options()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l09328">vm_play_folder_name()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l09268">vm_play_folder_name_gr()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l09286">vm_play_folder_name_ja()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l09299">vm_play_folder_name_pl()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l09315">vm_play_folder_name_ua()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l10888">vm_tempgreeting()</a>, and <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l12765">vmauthenticate()</a>.</p>
<div class="fragment"><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;{</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a156f09c32102fa036620ad75c3ee4fbf">d</a> = 0;</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;   <span class="keywordflow">if</span> ((d = <a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, fn, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan)))) {</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a156f09c32102fa036620ad75c3ee4fbf">d</a>;</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;   }</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;   d = <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <a class="code" href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a>);</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;   <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(chan);</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a156f09c32102fa036620ad75c3ee4fbf">d</a>;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;}</div><div class="ttc" id="file_8h_html_a67c7e271b4ca70aca6d48fd48d121857"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a></div><div class="ttdeci">int ast_streamfile(struct ast_channel *c, const char *filename, const char *preflang)</div><div class="ttdoc">Streams a file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01250">file.c:1250</a></div></div>
<div class="ttc" id="file_8h_html_afa92b0106fb7a918ea994c2867ac0a04"><div class="ttname"><a href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a></div><div class="ttdeci">#define AST_DIGIT_ANY</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00048">file.h:48</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a156f09c32102fa036620ad75c3ee4fbf"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a156f09c32102fa036620ad75c3ee4fbf">d</a></div><div class="ttdeci">static struct test_val d</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00049">test_linkedlists.c:49</a></div></div>
<div class="ttc" id="file_8h_html_affc21cb57c6bf72a2cb7ec8a379b2137"><div class="ttname"><a href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a></div><div class="ttdeci">int ast_waitstream(struct ast_channel *c, const char *breakon)</div><div class="ttdoc">Waits for a stream to stop or digit to be pressed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01776">file.c:1776</a></div></div>
<div class="ttc" id="channel_8h_html_a9abe31fe40dcd03cd2957e5309e32ac6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a></div><div class="ttdeci">const char * ast_channel_language(const struct ast_channel *chan)</div></div>
<div class="ttc" id="file_8h_html_a3092bf11d4bba66f646562759608b1bc"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a></div><div class="ttdeci">int ast_stopstream(struct ast_channel *c)</div><div class="ttdoc">Stops a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00187">file.c:187</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a88bee182f285c3e0b206c1de01324fc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88bee182f285c3e0b206c1de01324fc4">&#9670;&nbsp;</a></span>ast_queue_topic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a>* ast_queue_topic </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>queuename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the <a class="el" href="../../dd/dfd/stasis.html">Stasis Message Bus API</a> topic for queue messages for a particular queue name. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">queuename</td><td>The name for which to get the topic </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">The</td><td>topic structure for queue messages for a given name </td></tr>
    <tr><td class="paramname">NULL</td><td>if it failed to be found or allocated </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l03189">3189</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/df4/stasis_8c_source.html#l01884">stasis_topic_pool_get_topic()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/dfb/app__queue_8c_source.html#l05864">send_agent_complete()</a>.</p>
<div class="fragment"><div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;{</div><div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/d79/stasis_8h.html#a1ee1df597af46f3b489cce002b604a89">stasis_topic_pool_get_topic</a>(<a class="code" href="../../d3/d83/main_2app_8c.html#a674c31d6219e0edf34999357375f77da">queue_topic_pool</a>, queuename);</div><div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;}</div><div class="ttc" id="stasis_8h_html_a1ee1df597af46f3b489cce002b604a89"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a1ee1df597af46f3b489cce002b604a89">stasis_topic_pool_get_topic</a></div><div class="ttdeci">struct stasis_topic * stasis_topic_pool_get_topic(struct stasis_topic_pool *pool, const char *topic_name)</div><div class="ttdoc">Find or create a topic in the pool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01884">stasis.c:1884</a></div></div>
<div class="ttc" id="main_2app_8c_html_a674c31d6219e0edf34999357375f77da"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a674c31d6219e0edf34999357375f77da">queue_topic_pool</a></div><div class="ttdeci">static struct stasis_topic_pool * queue_topic_pool</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00091">main/app.c:91</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ade65e4a6a8802772595db25eb8e500ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade65e4a6a8802772595db25eb8e500ea">&#9670;&nbsp;</a></span>ast_queue_topic_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a>* ast_queue_topic_all </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the <a class="el" href="../../dd/dfd/stasis.html">Stasis Message Bus API</a> topic for queue messages. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">The</td><td>topic structure for queue messages </td></tr>
    <tr><td class="paramname">NULL</td><td>if it has not been allocated </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l03184">3184</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00090">queue_topic_all</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/dfb/app__queue_8c_source.html#l11324">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;{</div><div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d83/main_2app_8c.html#a6faa8563ee6f21a1e504dd8b7c3dd5b2">queue_topic_all</a>;</div><div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;}</div><div class="ttc" id="main_2app_8c_html_a6faa8563ee6f21a1e504dd8b7c3dd5b2"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a6faa8563ee6f21a1e504dd8b7c3dd5b2">queue_topic_all</a></div><div class="ttdeci">static struct stasis_topic * queue_topic_all</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00090">main/app.c:90</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ada8f5c9b9add1caf6e275238d46cec8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada8f5c9b9add1caf6e275238d46cec8c">&#9670;&nbsp;</a></span>ast_read_textfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_read_textfile </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a file into asterisk. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02792">2792</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d9b/tcptls_8c_source.html#l00685">ast_tcptls_server_start()</a>.</p>
<div class="fragment"><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;{</div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;   <span class="keywordtype">int</span> fd, count = 0, res;</div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;   <span class="keywordtype">char</span> *output = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;   <span class="keyword">struct </span>stat filesize;</div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;</div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;   <span class="keywordflow">if</span> (stat(filename, &amp;filesize) == -1) {</div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Error can&#39;t stat %s\n&quot;</span>, filename);</div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;   }</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;   count = filesize.st_size + 1;</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;   <span class="keywordflow">if</span> ((fd = open(filename, O_RDONLY)) &lt; 0) {</div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Cannot open file &#39;%s&#39; for reading: %s\n&quot;</span>, filename, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;   }</div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;</div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;   <span class="keywordflow">if</span> ((output = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(count))) {</div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;      res = read(fd, output, count - 1);</div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;      <span class="keywordflow">if</span> (res == count - 1) {</div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;         output[res] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Short read of %s (%d of %d): %s\n&quot;</span>, filename, res, count - 1, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(output);</div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;         output = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;      }</div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;   }</div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;</div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;   close(fd);</div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;</div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;   <span class="keywordflow">return</span> output;</div><div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a88b6ee77eea0c8a6cc0a315e1c1fc815"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b6ee77eea0c8a6cc0a315e1c1fc815">&#9670;&nbsp;</a></span>ast_record_review()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_record_review </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>playfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>recordfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxtime</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>duration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allow to record message and have a review option. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02489">2489</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d4d/file_8h_source.html#l00048">AST_DIGIT_ANY</a>, <a class="el" href="../../d5/d3b/dsp_8c_source.html#l01996">ast_dsp_get_threshold_from_settings()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01997">ast_play_and_record()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01470">ast_play_and_wait()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01814">ast_stream_and_wait()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l03184">ast_waitfordigit()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l00919">maxsilence</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l00922">silencethreshold</a>, and <a class="el" href="../../d3/d08/dsp_8h_source.html#l00073">THRESHOLD_SILENCE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l02399">conf_rec_name()</a>, and <a class="el" href="../../df/d44/app__meetme_8c_source.html#l03177">conf_run()</a>.</p>
<div class="fragment"><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;{</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../dc/df4/app__voicemail_8c.html#abebd9f51e7ff2f4d68f3952210219b4e">silencethreshold</a>;</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../dc/df4/app__voicemail_8c.html#ad87fa9ba37f50714bc922335b3b7ea91">maxsilence</a> = 0;</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;   <span class="keywordtype">int</span> cmd = 0;</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;   <span class="keywordtype">int</span> max_attempts = 3;</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;   <span class="keywordtype">int</span> attempts = 0;</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;   <span class="keywordtype">int</span> recorded = 0;</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;   <span class="keywordtype">int</span> message_exists = 0;</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;   <span class="comment">/* Note that urgent and private are for flagging messages as such in the future */</span></div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;   <span class="comment">/* barf if no pointer passed to store duration in */</span></div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;   <span class="keywordflow">if</span> (!duration) {</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Error ast_record_review called without duration pointer\n&quot;</span>);</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;   }</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;   cmd = <span class="charliteral">&#39;3&#39;</span>;   <span class="comment">/* Want to start by recording */</span></div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;   silencethreshold = <a class="code" href="../../d3/d08/dsp_8h.html#aab28c68838eaed4e0c89460a4e554cca">ast_dsp_get_threshold_from_settings</a>(<a class="code" href="../../d3/d08/dsp_8h.html#a11a8ce2b7eba2230cab37aad708d9abfa40278495f8621707b864e57e1110d20f">THRESHOLD_SILENCE</a>);</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;   <span class="keywordflow">while</span> ((cmd &gt;= 0) &amp;&amp; (cmd != <span class="charliteral">&#39;t&#39;</span>)) {</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;      <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;1&#39;</span>:</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;         <span class="keywordflow">if</span> (!message_exists) {</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;            <span class="comment">/* In this case, 1 is to record a message */</span></div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;            cmd = <span class="charliteral">&#39;3&#39;</span>;</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#a95b94a020720147325a486e210b36775">ast_stream_and_wait</a>(chan, <span class="stringliteral">&quot;vm-msgsaved&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;            cmd = <span class="charliteral">&#39;t&#39;</span>;</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;            <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;         }</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;2&#39;</span>:</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;         <span class="comment">/* Review */</span></div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Reviewing the recording\n&quot;</span>);</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;         cmd = <a class="code" href="../../d2/d4d/file_8h.html#a95b94a020720147325a486e210b36775">ast_stream_and_wait</a>(chan, recordfile, <a class="code" href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a>);</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;3&#39;</span>:</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;         message_exists = 0;</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;         <span class="comment">/* Record */</span></div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;R%secording\n&quot;</span>, recorded == 1 ? <span class="stringliteral">&quot;e-r&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;         recorded = 1;</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;         <span class="keywordflow">if</span> ((cmd = <a class="code" href="../../d3/d83/main_2app_8c.html#adfe53155f5f51d40905d4d75b74cf85f">ast_play_and_record</a>(chan, playfile, recordfile, maxtime, fmt, duration, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, silencethreshold, maxsilence, path)) == -1) {</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;            <span class="comment">/* User has hung up, no options to give */</span></div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;            <span class="keywordflow">return</span> cmd;</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;         }</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;         <span class="keywordflow">if</span> (cmd == <span class="charliteral">&#39;0&#39;</span>) {</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cmd == <span class="charliteral">&#39;*&#39;</span>) {</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;            <span class="comment">/* If all is well, a message exists */</span></div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;            message_exists = 1;</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;            cmd = 0;</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;         }</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;4&#39;</span>:</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;5&#39;</span>:</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;6&#39;</span>:</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;7&#39;</span>:</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;8&#39;</span>:</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;9&#39;</span>:</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;*&#39;</span>:</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;#&#39;</span>:</div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;         cmd = <a class="code" href="../../d3/d83/main_2app_8c.html#abbbec6ab9a303e865a1d1a261152540d">ast_play_and_wait</a>(chan, <span class="stringliteral">&quot;vm-sorry&quot;</span>);</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;         <span class="keywordflow">if</span> (message_exists) {</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;            cmd = <a class="code" href="../../d3/d83/main_2app_8c.html#abbbec6ab9a303e865a1d1a261152540d">ast_play_and_wait</a>(chan, <span class="stringliteral">&quot;vm-review&quot;</span>);</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;            <span class="keywordflow">if</span> (!(cmd = <a class="code" href="../../d3/d83/main_2app_8c.html#abbbec6ab9a303e865a1d1a261152540d">ast_play_and_wait</a>(chan, <span class="stringliteral">&quot;vm-torerecord&quot;</span>))) {</div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;               cmd = <a class="code" href="../../d5/d7b/channel_8h.html#a050bec9a4abc1a599b6573a6091b080c">ast_waitfordigit</a>(chan, 600);</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;            }</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;         }</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;         <span class="keywordflow">if</span> (!cmd) {</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;            cmd = <a class="code" href="../../d5/d7b/channel_8h.html#a050bec9a4abc1a599b6573a6091b080c">ast_waitfordigit</a>(chan, 6000);</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;         }</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;         <span class="keywordflow">if</span> (!cmd) {</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;            attempts++;</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;         }</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;         <span class="keywordflow">if</span> (attempts &gt; max_attempts) {</div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;            cmd = <span class="charliteral">&#39;t&#39;</span>;</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;         }</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;      }</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;   }</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;   <span class="keywordflow">if</span> (cmd == <span class="charliteral">&#39;t&#39;</span>) {</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;      cmd = 0;</div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;   }</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;   <span class="keywordflow">return</span> cmd;</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;}</div><div class="ttc" id="file_8h_html_afa92b0106fb7a918ea994c2867ac0a04"><div class="ttname"><a href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a></div><div class="ttdeci">#define AST_DIGIT_ANY</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00048">file.h:48</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="app__voicemail_8c_html_ad87fa9ba37f50714bc922335b3b7ea91"><div class="ttname"><a href="../../dc/df4/app__voicemail_8c.html#ad87fa9ba37f50714bc922335b3b7ea91">maxsilence</a></div><div class="ttdeci">static int maxsilence</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l00919">app_voicemail.c:919</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="dsp_8h_html_a11a8ce2b7eba2230cab37aad708d9abfa40278495f8621707b864e57e1110d20f"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a11a8ce2b7eba2230cab37aad708d9abfa40278495f8621707b864e57e1110d20f">THRESHOLD_SILENCE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d08/dsp_8h_source.html#l00073">dsp.h:73</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="app__voicemail_8c_html_abebd9f51e7ff2f4d68f3952210219b4e"><div class="ttname"><a href="../../dc/df4/app__voicemail_8c.html#abebd9f51e7ff2f4d68f3952210219b4e">silencethreshold</a></div><div class="ttdeci">static int silencethreshold</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l00922">app_voicemail.c:922</a></div></div>
<div class="ttc" id="main_2app_8c_html_adfe53155f5f51d40905d4d75b74cf85f"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#adfe53155f5f51d40905d4d75b74cf85f">ast_play_and_record</a></div><div class="ttdeci">int ast_play_and_record(struct ast_channel *chan, const char *playfile, const char *recordfile, int maxtime, const char *fmt, int *duration, int *sound_duration, int silencethreshold, int maxsilence, const char *path)</div><div class="ttdoc">Record a file based on input from a channel. Use default accept and cancel DTMF. This function will p...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01997">main/app.c:1997</a></div></div>
<div class="ttc" id="file_8h_html_a95b94a020720147325a486e210b36775"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a95b94a020720147325a486e210b36775">ast_stream_and_wait</a></div><div class="ttdeci">int ast_stream_and_wait(struct ast_channel *chan, const char *file, const char *digits)</div><div class="ttdoc">stream file until digit If the file name is non-empty, try to play it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01814">file.c:1814</a></div></div>
<div class="ttc" id="main_2app_8c_html_abbbec6ab9a303e865a1d1a261152540d"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#abbbec6ab9a303e865a1d1a261152540d">ast_play_and_wait</a></div><div class="ttdeci">int ast_play_and_wait(struct ast_channel *chan, const char *fn)</div><div class="ttdoc">Play a stream and wait for a digit, returning the digit that was pressed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01470">main/app.c:1470</a></div></div>
<div class="ttc" id="channel_8h_html_a050bec9a4abc1a599b6573a6091b080c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a050bec9a4abc1a599b6573a6091b080c">ast_waitfordigit</a></div><div class="ttdeci">int ast_waitfordigit(struct ast_channel *c, int ms)</div><div class="ttdoc">Waits for a digit. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03184">channel.c:3184</a></div></div>
<div class="ttc" id="dsp_8h_html_aab28c68838eaed4e0c89460a4e554cca"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#aab28c68838eaed4e0c89460a4e554cca">ast_dsp_get_threshold_from_settings</a></div><div class="ttdeci">int ast_dsp_get_threshold_from_settings(enum threshold which)</div><div class="ttdoc">Get silence threshold from dsp.conf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01996">dsp.c:1996</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7a4c7e208ffc4d11a1918beb0e920ec0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a4c7e208ffc4d11a1918beb0e920ec0">&#9670;&nbsp;</a></span>ast_safe_fork()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_safe_fork </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stop_reaper</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Common routine to safely fork without a chance of a signal handler firing badly in the child. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">stop_reaper</td><td>flag to determine if sigchld handler is replaced or not </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.6.1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l03047">3047</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00730">AST_LIST_INSERT_TAIL</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00567">ast_pthread_create_background</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00066">AST_PTHREADT_NULL</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l00801">ast_replace_sigchld()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00085">child_cap</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d9/dee/structzombie.html#a5bd10d1c7630722dd91dbfca2156072c">zombie::list</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00078">zombie::pid</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00094">shaun_of_the_dead()</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00075">shaun_of_the_dead_thread</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d26/app__externalivr_8c_source.html#l00392">app_exec()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00383">filestream_destructor()</a>, <a class="el" href="../../da/d8a/app__ices_8c_source.html#l00075">icesencode()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02200">launch_script()</a>, <a class="el" href="../../d1/d9a/app__mp3_8c_source.html#l00079">mp3play()</a>, <a class="el" href="../../df/d1d/app__nbscat_8c_source.html#l00071">NBScatplay()</a>, <a class="el" href="../../d5/dd6/app__festival_8c_source.html#l00140">send_waveform_to_fd()</a>, <a class="el" href="../../d3/d97/res__musiconhold_8c_source.html#l00584">spawn_mp3()</a>, <a class="el" href="../../d3/d3a/app__dahdiras_8c_source.html#l00075">spawn_ras()</a>, and <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l01391">vm_check_password_shell()</a>.</p>
<div class="fragment"><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;{</div><div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;   sigset_t signal_set, old_set;</div><div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;   <span class="keywordtype">int</span> pid;</div><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;</div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;   <span class="comment">/* Don&#39;t let the default signal handler for children reap our status */</span></div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;   <span class="keywordflow">if</span> (stop_reaper) {</div><div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a6de8ef28c39cc39978497de1918bfd70">ast_replace_sigchld</a>();</div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;   }</div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;</div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;   <span class="comment">/* GCC 4.9 gives a bogus &quot;right-hand operand of comma expression has</span></div><div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;<span class="comment">    * no effect&quot; warning */</span></div><div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;   (void) sigfillset(&amp;signal_set);</div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;   pthread_sigmask(SIG_BLOCK, &amp;signal_set, &amp;old_set);</div><div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;</div><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;   pid = fork();</div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;</div><div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;   <span class="keywordflow">if</span> (pid != 0) {</div><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;      <span class="comment">/* Fork failed or parent */</span></div><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;      pthread_sigmask(SIG_SETMASK, &amp;old_set, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;      <span class="keywordflow">if</span> (!stop_reaper &amp;&amp; pid &gt; 0) {</div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d9/dee/structzombie.html">zombie</a> *cur = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*cur));</div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;         <span class="keywordflow">if</span> (cur) {</div><div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;            cur-&gt;<a class="code" href="../../d9/dee/structzombie.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a> = <a class="code" href="../../d9/dee/structzombie.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>;</div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../dc/d57/structzombies.html">zombies</a>);</div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../dc/d57/structzombies.html">zombies</a>, cur, <a class="code" href="../../d9/dee/structzombie.html#a5bd10d1c7630722dd91dbfca2156072c">list</a>);</div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../dc/d57/structzombies.html">zombies</a>);</div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d3/d83/main_2app_8c.html#a30573cb092e715a2e4bbc2d77b9fc1df">shaun_of_the_dead_thread</a> == <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>) {</div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a595e2f8aa398f4bd21e381c3211235fe">ast_pthread_create_background</a>(&amp;<a class="code" href="../../d3/d83/main_2app_8c.html#a30573cb092e715a2e4bbc2d77b9fc1df">shaun_of_the_dead_thread</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d3/d83/main_2app_8c.html#a7696b4a837797103e8fad638d5b4615d">shaun_of_the_dead</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;                  <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Shaun of the Dead wants to kill zombies, but can&#39;t?!!\n&quot;</span>);</div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;                  <a class="code" href="../../d3/d83/main_2app_8c.html#a30573cb092e715a2e4bbc2d77b9fc1df">shaun_of_the_dead_thread</a> = <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>;</div><div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;               }</div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;            }</div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;         }</div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;      }</div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d9/dee/structzombie.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>;</div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;      <span class="comment">/* Child */</span></div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;<span class="preprocessor">#ifdef HAVE_CAP</span></div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;      cap_set_proc(<a class="code" href="../../d3/d83/main_2app_8c.html#a0e01e4a7836c72a22f08f824d366ffb0">child_cap</a>);</div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;</div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;      <span class="comment">/* Before we unblock our signals, return our trapped signals back to the defaults */</span></div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;      signal(SIGHUP, SIG_DFL);</div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;      signal(SIGCHLD, SIG_DFL);</div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;      signal(SIGINT, SIG_DFL);</div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;      signal(SIGURG, SIG_DFL);</div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;      signal(SIGTERM, SIG_DFL);</div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;      signal(SIGPIPE, SIG_DFL);</div><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;      signal(SIGXFSZ, SIG_DFL);</div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;</div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;      <span class="comment">/* unblock important signal handlers */</span></div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;      <span class="keywordflow">if</span> (pthread_sigmask(SIG_UNBLOCK, &amp;signal_set, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;unable to unblock signals: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;         _exit(1);</div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;      }</div><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;</div><div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d9/dee/structzombie.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>;</div><div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;   }</div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;}</div><div class="ttc" id="structzombie_html_ae0d46a978d5cd6707411f276ad869b9c"><div class="ttname"><a href="../../d9/dee/structzombie.html#ae0d46a978d5cd6707411f276ad869b9c">zombie::pid</a></div><div class="ttdeci">pid_t pid</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00078">main/app.c:78</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="main_2app_8c_html_a30573cb092e715a2e4bbc2d77b9fc1df"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a30573cb092e715a2e4bbc2d77b9fc1df">shaun_of_the_dead_thread</a></div><div class="ttdeci">static pthread_t shaun_of_the_dead_thread</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00075">main/app.c:75</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="utils_8h_html_a595e2f8aa398f4bd21e381c3211235fe"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a595e2f8aa398f4bd21e381c3211235fe">ast_pthread_create_background</a></div><div class="ttdeci">#define ast_pthread_create_background(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00567">utils.h:567</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="lock_8h_html_a6009440c7a72f8e2e3b1ec97641ad160"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></div><div class="ttdeci">#define AST_PTHREADT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00066">lock.h:66</a></div></div>
<div class="ttc" id="structzombies_html"><div class="ttname"><a href="../../dc/d57/structzombies.html">zombies</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00082">main/app.c:82</a></div></div>
<div class="ttc" id="structzombie_html_a5bd10d1c7630722dd91dbfca2156072c"><div class="ttname"><a href="../../d9/dee/structzombie.html#a5bd10d1c7630722dd91dbfca2156072c">zombie::list</a></div><div class="ttdeci">struct zombie::@333 list</div></div>
<div class="ttc" id="main_2app_8c_html_a7696b4a837797103e8fad638d5b4615d"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a7696b4a837797103e8fad638d5b4615d">shaun_of_the_dead</a></div><div class="ttdeci">static void * shaun_of_the_dead(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00094">main/app.c:94</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a6de8ef28c39cc39978497de1918bfd70"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a6de8ef28c39cc39978497de1918bfd70">ast_replace_sigchld</a></div><div class="ttdeci">void ast_replace_sigchld(void)</div><div class="ttdoc">Replace the SIGCHLD handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l00801">extconf.c:801</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4d258b4525e63c435d7de579d3f46960"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_LIST_INSERT_TAIL(head, elm, field)</div><div class="ttdoc">Appends a list entry to the tail of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00730">linkedlists.h:730</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="main_2app_8c_html_a0e01e4a7836c72a22f08f824d366ffb0"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a0e01e4a7836c72a22f08f824d366ffb0">child_cap</a></div><div class="ttdeci">static cap_t child_cap</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00085">main/app.c:85</a></div></div>
<div class="ttc" id="structzombie_html"><div class="ttname"><a href="../../d9/dee/structzombie.html">zombie</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00077">main/app.c:77</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1044fae6847dc8986a212af0af492a23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1044fae6847dc8986a212af0af492a23">&#9670;&nbsp;</a></span>ast_safe_fork_cleanup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_safe_fork_cleanup </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Common routine to cleanup after fork'ed process is complete (if reaping was stopped) </p>
<dl class="section since"><dt>Since</dt><dd>1.6.1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l03108">3108</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/dc5/extconf_8c_source.html#l00815">ast_unreplace_sigchld()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04494">agi_exec_full()</a>, and <a class="el" href="../../d3/d3a/app__dahdiras_8c_source.html#l00128">run_ras()</a>.</p>
<div class="fragment"><div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;{</div><div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ad7c2a7da4125347c06d9719580731228">ast_unreplace_sigchld</a>();</div><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;}</div><div class="ttc" id="include_2asterisk_2app_8h_html_ad7c2a7da4125347c06d9719580731228"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ad7c2a7da4125347c06d9719580731228">ast_unreplace_sigchld</a></div><div class="ttdeci">void ast_unreplace_sigchld(void)</div><div class="ttdoc">Restore the SIGCHLD handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l00815">extconf.c:815</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaef9c9ee6c9e05a6675201486ea2f02e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaef9c9ee6c9e05a6675201486ea2f02e">&#9670;&nbsp;</a></span>ast_set_lock_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_set_lock_type </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#a889fad4c6cc627add80454ae61b53241">AST_LOCK_TYPE</a>&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the type of locks used by <a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#a74c57b5a842dcbc15cc991a31f679a13" title="Lock a filesystem path. ">ast_lock_path()</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">type</td><td>the locking type to use </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02452">2452</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/dc5/options_8c_source.html#l00210">load_asterisk_conf()</a>.</p>
<div class="fragment"><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;{</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a91005557686d603e1210a200ef97153d">ast_lock_type</a> = <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="lock_8h_html_a91005557686d603e1210a200ef97153d"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a91005557686d603e1210a200ef97153d">ast_lock_type</a></div><div class="ttdeci">ast_lock_type</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00252">lock.h:252</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1528703fa0e2ea11fcab7e04f8e0a6cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1528703fa0e2ea11fcab7e04f8e0a6cb">&#9670;&nbsp;</a></span>ast_str_get_encoded_str()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_str_get_encoded_str </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>stream</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decode a stream of encoded control or extended ASCII characters. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l03015">3015</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02927">ast_get_encoded_char()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00780">ast_str_make_space</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00699">ast_str_size()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00663">ast_str_update()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00079">zombie::next</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d89/app__sendtext_8c_source.html#l00149">sendtext_exec()</a>, and <a class="el" href="../../d8/d40/app__system_8c_source.html#l00115">system_exec_helper()</a>.</p>
<div class="fragment"><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;{</div><div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d9/dee/structzombie.html#a5f5910a6fe98c12053e406a34e17f076">next</a>, *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;   <span class="keywordtype">size_t</span> offset = 0;</div><div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;   <span class="keywordtype">size_t</span> consumed;</div><div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;</div><div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;   <span class="keywordflow">if</span> (strchr(stream, <span class="charliteral">&#39;\\&#39;</span>)) {</div><div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;      <span class="keywordflow">while</span> (!<a class="code" href="../../d3/d83/main_2app_8c.html#a1e8f73e62b3c2243eca582ee0d8d6147">ast_get_encoded_char</a>(stream, &amp;next, &amp;consumed)) {</div><div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;         <span class="keywordflow">if</span> (offset + 2 &gt; <a class="code" href="../../d6/d90/strings_8h.html#ae99d6f51ac4be6b72f8b63892cd949e1">ast_str_size</a>(*str) &amp;&amp; maxlen &gt; -1) {</div><div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#aa3d67163f6a94e575ee602933adf1eab">ast_str_make_space</a>(str, maxlen &gt; 0 ? maxlen : (<a class="code" href="../../d6/d90/strings_8h.html#ae99d6f51ac4be6b72f8b63892cd949e1">ast_str_size</a>(*str) + 48) * 2 - 48);</div><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;         }</div><div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;         <span class="keywordflow">if</span> (offset + 2 &gt; <a class="code" href="../../d6/d90/strings_8h.html#ae99d6f51ac4be6b72f8b63892cd949e1">ast_str_size</a>(*str)) {</div><div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;         }</div><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;         buf = <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(*str);</div><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;         buf[offset++] = <a class="code" href="../../d9/dee/structzombie.html#a5f5910a6fe98c12053e406a34e17f076">next</a>;</div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;         stream += consumed;</div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;      }</div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;      buf = <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(*str);</div><div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;      buf[offset++] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#aa64825674476f476402283fe4bd7ee51">ast_str_update</a>(*str);</div><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(str, maxlen, <span class="stringliteral">&quot;%s&quot;</span>, stream);</div><div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;   }</div><div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;}</div><div class="ttc" id="strings_8h_html_ae99d6f51ac4be6b72f8b63892cd949e1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ae99d6f51ac4be6b72f8b63892cd949e1">ast_str_size</a></div><div class="ttdeci">size_t ast_str_size(const struct ast_str *buf)</div><div class="ttdoc">Returns the current maximum length (without reallocation) of the current buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00699">strings.h:699</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="strings_8h_html_aa3d67163f6a94e575ee602933adf1eab"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3d67163f6a94e575ee602933adf1eab">ast_str_make_space</a></div><div class="ttdeci">#define ast_str_make_space(buf, new_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00780">strings.h:780</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="structzombie_html_a5f5910a6fe98c12053e406a34e17f076"><div class="ttname"><a href="../../d9/dee/structzombie.html#a5f5910a6fe98c12053e406a34e17f076">zombie::next</a></div><div class="ttdeci">struct zombie * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00079">main/app.c:79</a></div></div>
<div class="ttc" id="strings_8h_html_aa64825674476f476402283fe4bd7ee51"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa64825674476f476402283fe4bd7ee51">ast_str_update</a></div><div class="ttdeci">void ast_str_update(struct ast_str *buf)</div><div class="ttdoc">Update the length of the buffer, after using ast_str merely as a buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00663">strings.h:663</a></div></div>
<div class="ttc" id="main_2app_8c_html_a1e8f73e62b3c2243eca582ee0d8d6147"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a1e8f73e62b3c2243eca582ee0d8d6147">ast_get_encoded_char</a></div><div class="ttdeci">int ast_get_encoded_char(const char *stream, char *result, size_t *consumed)</div><div class="ttdoc">Decode an encoded control or extended ASCII character. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02927">main/app.c:2927</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a081cae3d9afd0b524cb602f94091ed7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a081cae3d9afd0b524cb602f94091ed7a">&#9670;&nbsp;</a></span>AST_THREADSTORAGE_PUBLIC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_THREADSTORAGE_PUBLIC </td>
          <td>(</td>
          <td class="paramtype">ast_str_thread_global_buf&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a0">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
</div>
</div>
<a id="aec0281ec0a6743121492b2194649922f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec0281ec0a6743121492b2194649922f">&#9670;&nbsp;</a></span>ast_uninstall_vm_test_functions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_uninstall_vm_test_functions </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00606">606</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00596">ast_vm_test_create_user_func</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00597">ast_vm_test_destroy_user_func</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l15050">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;{</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;   <a class="code" href="../../d3/d83/main_2app_8c.html#ad3925a12ca1909720e1f4d7ea01fa8a3">ast_vm_test_create_user_func</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;   <a class="code" href="../../d3/d83/main_2app_8c.html#ac6b468fe42cea720c3ce8c7c4f0ea2c9">ast_vm_test_destroy_user_func</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;}</div><div class="ttc" id="main_2app_8c_html_ad3925a12ca1909720e1f4d7ea01fa8a3"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#ad3925a12ca1909720e1f4d7ea01fa8a3">ast_vm_test_create_user_func</a></div><div class="ttdeci">static ast_vm_test_create_user_fn * ast_vm_test_create_user_func</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00596">main/app.c:596</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="main_2app_8c_html_ac6b468fe42cea720c3ce8c7c4f0ea2c9"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#ac6b468fe42cea720c3ce8c7c4f0ea2c9">ast_vm_test_destroy_user_func</a></div><div class="ttdeci">static ast_vm_test_destroy_user_fn * ast_vm_test_destroy_user_func</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00597">main/app.c:597</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af6428878db94a4adf8136850e6a654f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6428878db94a4adf8136850e6a654f5">&#9670;&nbsp;</a></span>ast_unlock_path()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_unlock_path </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unlock a path. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02473">2473</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01174">AST_LOCK_TYPE_FLOCK</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01173">AST_LOCK_TYPE_LOCKFILE</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02422">ast_unlock_path_flock()</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02300">ast_unlock_path_lockfile()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01580">__ast_play_and_record()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l03319">access_counter_file()</a>, <a class="el" href="../../d3/d96/loader_8c_source.html#l01562">ast_module_reload()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l09152">close_mailbox()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l05982">copy_message()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l04524">count_messages()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l06601">leave_voicemail()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l06315">msg_create_from_file()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l09099">open_mailbox()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l07177">resequence_mailbox()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l07214">save_to_folder()</a>, and <a class="el" href="../../d2/da2/test__voicemail__api_8c_source.html#l00445">test_vm_api_create_voicemail_files()</a>.</p>
<div class="fragment"><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;{</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;   <span class="keywordtype">int</span> r = 0;</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;   <span class="keywordflow">switch</span> (<a class="code" href="../../dd/d42/lock_8h.html#a91005557686d603e1210a200ef97153d">ast_lock_type</a>) {</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a889fad4c6cc627add80454ae61b53241a599f18fdf355d7530bb754b8c66d6de7">AST_LOCK_TYPE_LOCKFILE</a>:</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;      r = <a class="code" href="../../d3/d83/main_2app_8c.html#a41764988af00a30b8de64b8a37e8228d">ast_unlock_path_lockfile</a>(path);</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a889fad4c6cc627add80454ae61b53241a78cd7e44280d287fc0168a0c31b75e3f">AST_LOCK_TYPE_FLOCK</a>:</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;      r = <a class="code" href="../../d3/d83/main_2app_8c.html#a195e5dc48a8d508fb6d85597ce9df398">ast_unlock_path_flock</a>(path);</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;   }</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;   <span class="keywordflow">return</span> r;</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;}</div><div class="ttc" id="main_2app_8c_html_a195e5dc48a8d508fb6d85597ce9df398"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a195e5dc48a8d508fb6d85597ce9df398">ast_unlock_path_flock</a></div><div class="ttdeci">static int ast_unlock_path_flock(const char *path)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02422">main/app.c:2422</a></div></div>
<div class="ttc" id="lock_8h_html_a91005557686d603e1210a200ef97153d"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a91005557686d603e1210a200ef97153d">ast_lock_type</a></div><div class="ttdeci">ast_lock_type</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00252">lock.h:252</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a889fad4c6cc627add80454ae61b53241a78cd7e44280d287fc0168a0c31b75e3f"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a889fad4c6cc627add80454ae61b53241a78cd7e44280d287fc0168a0c31b75e3f">AST_LOCK_TYPE_FLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01174">include/asterisk/app.h:1174</a></div></div>
<div class="ttc" id="main_2app_8c_html_a41764988af00a30b8de64b8a37e8228d"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a41764988af00a30b8de64b8a37e8228d">ast_unlock_path_lockfile</a></div><div class="ttdeci">static int ast_unlock_path_lockfile(const char *path)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02300">main/app.c:2300</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a889fad4c6cc627add80454ae61b53241a599f18fdf355d7530bb754b8c66d6de7"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a889fad4c6cc627add80454ae61b53241a599f18fdf355d7530bb754b8c66d6de7">AST_LOCK_TYPE_LOCKFILE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01173">include/asterisk/app.h:1173</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a195e5dc48a8d508fb6d85597ce9df398"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a195e5dc48a8d508fb6d85597ce9df398">&#9670;&nbsp;</a></span>ast_unlock_path_flock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_unlock_path_flock </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a370">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02422">2422</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00556">AST_LIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00528">AST_LIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00614">AST_LIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../da/da7/structpath__lock.html#ab7e7a3bd703a1bac62bcb7bb93580399">path_lock::le</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02321">path_lock::path</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02326">path_lock_destroy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02473">ast_unlock_path()</a>.</p>
<div class="fragment"><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;{</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;   <span class="keywordtype">char</span> *s;</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/da7/structpath__lock.html">path_lock</a> *p;</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;   s = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(strlen(<a class="code" href="../../da/da7/structpath__lock.html#a44196e6a5696d10442c29e639437196e">path</a>) + 20);</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../d4/d9f/structpath__lock__list.html">path_lock_list</a>);</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../d4/d9f/structpath__lock__list.html">path_lock_list</a>, p, <a class="code" href="../../da/da7/structpath__lock.html#ab7e7a3bd703a1bac62bcb7bb93580399">le</a>) {</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;      <span class="keywordflow">if</span> (!strcmp(p-&gt;<a class="code" href="../../da/da7/structpath__lock.html#a44196e6a5696d10442c29e639437196e">path</a>, <a class="code" href="../../da/da7/structpath__lock.html#a44196e6a5696d10442c29e639437196e">path</a>)) {</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a>(<a class="code" href="../../da/da7/structpath__lock.html#ab7e7a3bd703a1bac62bcb7bb93580399">le</a>);</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;      }</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;   }</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../d4/d9f/structpath__lock__list.html">path_lock_list</a>);</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;   <span class="keywordflow">if</span> (p) {</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;      snprintf(s, strlen(<a class="code" href="../../da/da7/structpath__lock.html#a44196e6a5696d10442c29e639437196e">path</a>) + 19, <span class="stringliteral">&quot;%s/lock&quot;</span>, <a class="code" href="../../da/da7/structpath__lock.html#a44196e6a5696d10442c29e639437196e">path</a>);</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;      unlink(s);</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;      <a class="code" href="../../d3/d83/main_2app_8c.html#a76f6ec06f0249fceeecd10687cb62e7d">path_lock_destroy</a>(p);</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Unlocked path &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../da/da7/structpath__lock.html#a44196e6a5696d10442c29e639437196e">path</a>);</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Failed to unlock path &#39;%s&#39;: &quot;</span></div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;            <span class="stringliteral">&quot;lock not found\n&quot;</span>, <a class="code" href="../../da/da7/structpath__lock.html#a44196e6a5696d10442c29e639437196e">path</a>);</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;   }</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;}</div><div class="ttc" id="structpath__lock_html"><div class="ttname"><a href="../../da/da7/structpath__lock.html">path_lock</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02318">main/app.c:2318</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a712c04b4493919a7052399cd30ee8fb9"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_END</div><div class="ttdoc">Closes a safe loop traversal block. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00614">linkedlists.h:614</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa8ac496fa9c717d5afb99a02e1e2760c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_LIST_REMOVE_CURRENT(field)</div><div class="ttdoc">Removes the current entry from a list during a traversal. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00556">linkedlists.h:556</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="structpath__lock_html_a44196e6a5696d10442c29e639437196e"><div class="ttname"><a href="../../da/da7/structpath__lock.html#a44196e6a5696d10442c29e639437196e">path_lock::path</a></div><div class="ttdeci">char * path</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02321">main/app.c:2321</a></div></div>
<div class="ttc" id="structpath__lock__list_html"><div class="ttname"><a href="../../d4/d9f/structpath__lock__list.html">path_lock_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02324">main/app.c:2324</a></div></div>
<div class="ttc" id="structpath__lock_html_ab7e7a3bd703a1bac62bcb7bb93580399"><div class="ttname"><a href="../../da/da7/structpath__lock.html#ab7e7a3bd703a1bac62bcb7bb93580399">path_lock::le</a></div><div class="ttdeci">struct path_lock::@334 le</div></div>
<div class="ttc" id="linkedlists_8h_html_aa5be52067bf16bdc7e56ca19b5ba858d"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_BEGIN(head, var, field)</div><div class="ttdoc">Loops safely over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00528">linkedlists.h:528</a></div></div>
<div class="ttc" id="main_2app_8c_html_a76f6ec06f0249fceeecd10687cb62e7d"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a76f6ec06f0249fceeecd10687cb62e7d">path_lock_destroy</a></div><div class="ttdeci">static void path_lock_destroy(struct path_lock *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02326">main/app.c:2326</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a41764988af00a30b8de64b8a37e8228d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41764988af00a30b8de64b8a37e8228d">&#9670;&nbsp;</a></span>ast_unlock_path_lockfile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_unlock_path_lockfile </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a360">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02300">2300</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02473">ast_unlock_path()</a>.</p>
<div class="fragment"><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;{</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;   <span class="keywordtype">char</span> *s;</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;   s = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(strlen(<a class="code" href="../../da/da7/structpath__lock.html#a44196e6a5696d10442c29e639437196e">path</a>) + 10);</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;   snprintf(s, strlen(<a class="code" href="../../da/da7/structpath__lock.html#a44196e6a5696d10442c29e639437196e">path</a>) + 9, <span class="stringliteral">&quot;%s/%s&quot;</span>, <a class="code" href="../../da/da7/structpath__lock.html#a44196e6a5696d10442c29e639437196e">path</a>, <span class="stringliteral">&quot;.lock&quot;</span>);</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;   <span class="keywordflow">if</span> ((res = unlink(s))) {</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not unlock path &#39;%s&#39;: %s\n&quot;</span>, <a class="code" href="../../da/da7/structpath__lock.html#a44196e6a5696d10442c29e639437196e">path</a>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Unlocked path &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../da/da7/structpath__lock.html#a44196e6a5696d10442c29e639437196e">path</a>);</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;   }</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;}</div><div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="structpath__lock_html_a44196e6a5696d10442c29e639437196e"><div class="ttname"><a href="../../da/da7/structpath__lock.html#a44196e6a5696d10442c29e639437196e">path_lock::path</a></div><div class="ttdeci">char * path</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02321">main/app.c:2321</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa0ccb2aa4c974e75e9654a0e0a03ebc6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0ccb2aa4c974e75e9654a0e0a03ebc6">&#9670;&nbsp;</a></span>ast_vm_greeter_is_registered()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_vm_greeter_is_registered </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine if a voicemail greeter provider is registered. </p>
<dl class="section since"><dt>Since</dt><dd>13.0.0</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if no provider registered. </td></tr>
    <tr><td class="paramname">1</td><td>if a provider is registered. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00541">541</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, and <a class="el" href="../../d8/d56/cdr__odbc_8c_source.html#l00058">table</a>.</p>
<div class="fragment"><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;{</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d1e/structast__vm__greeter__functions.html">ast_vm_greeter_functions</a> *<a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;   <span class="keywordtype">int</span> is_registered;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;   table = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(vm_greeter_provider);</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;   is_registered = table ? 1 : 0;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(table);</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;   <span class="keywordflow">return</span> is_registered;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;}</div><div class="ttc" id="structast__vm__greeter__functions_html"><div class="ttname"><a href="../../d0/d1e/structast__vm__greeter__functions.html">ast_vm_greeter_functions</a></div><div class="ttdoc">Voicemail greeter function table definition. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00618">include/asterisk/app.h:618</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="cdr__odbc_8c_html_a68d1e6e752f2cf81551fac543cae108a"><div class="ttname"><a href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a></div><div class="ttdeci">static char * table</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d56/cdr__odbc_8c_source.html#l00058">cdr_odbc.c:58</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a50ae61db871bd4f0e0b8caa6c3e56810"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50ae61db871bd4f0e0b8caa6c3e56810">&#9670;&nbsp;</a></span>ast_vm_greeter_unregister()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_vm_greeter_unregister </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>module_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregister the specified voicemail greeter provider. </p>
<dl class="section since"><dt>Since</dt><dd>13.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">The</td><td>module name of the provider to unregister</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00584">584</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00865">ao2_global_obj_release</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00627">ast_vm_greeter_functions::module_name</a>, and <a class="el" href="../../d8/d56/cdr__odbc_8c_source.html#l00058">table</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l15050">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;{</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d1e/structast__vm__greeter__functions.html">ast_vm_greeter_functions</a> *<a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;   table = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(vm_greeter_provider);</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;   <span class="keywordflow">if</span> (table &amp;&amp; !strcmp(table-&gt;<a class="code" href="../../d0/d1e/structast__vm__greeter__functions.html#a4c2d9327de87c6be0b54f793adc7f1fb">module_name</a>, <a class="code" href="../../d0/d1e/structast__vm__greeter__functions.html#a4c2d9327de87c6be0b54f793adc7f1fb">module_name</a>)) {</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#ac0e1cbc7cf050c8b7b8e3a8fee92c50e">ao2_global_obj_release</a>(vm_greeter_provider);</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;   }</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(table);</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;}</div><div class="ttc" id="structast__vm__greeter__functions_html"><div class="ttname"><a href="../../d0/d1e/structast__vm__greeter__functions.html">ast_vm_greeter_functions</a></div><div class="ttdoc">Voicemail greeter function table definition. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00618">include/asterisk/app.h:618</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="cdr__odbc_8c_html_a68d1e6e752f2cf81551fac543cae108a"><div class="ttname"><a href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a></div><div class="ttdeci">static char * table</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d56/cdr__odbc_8c_source.html#l00058">cdr_odbc.c:58</a></div></div>
<div class="ttc" id="structast__vm__greeter__functions_html_a4c2d9327de87c6be0b54f793adc7f1fb"><div class="ttname"><a href="../../d0/d1e/structast__vm__greeter__functions.html#a4c2d9327de87c6be0b54f793adc7f1fb">ast_vm_greeter_functions::module_name</a></div><div class="ttdeci">const char * module_name</div><div class="ttdoc">The name of the module that provides the voicemail greeter functionality. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00627">include/asterisk/app.h:627</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac0e1cbc7cf050c8b7b8e3a8fee92c50e"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac0e1cbc7cf050c8b7b8e3a8fee92c50e">ao2_global_obj_release</a></div><div class="ttdeci">#define ao2_global_obj_release(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00865">astobj2.h:865</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad88659eefe2c62ca92a698a2f2d0afb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad88659eefe2c62ca92a698a2f2d0afb9">&#9670;&nbsp;</a></span>ast_vm_index_to_foldername()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_vm_index_to_foldername </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return name of folder, given an id. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>Folder id </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Name of folder </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00726">726</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00620">VM_API_CALL</a>.</p>
<div class="fragment"><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;{</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *res = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;   <a class="code" href="../../d3/d83/main_2app_8c.html#a12c075dae5bb61a239b853abf865fd67">VM_API_CALL</a>(res, index_to_foldername, (<span class="keywordtype">id</span>));</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="main_2app_8c_html_a12c075dae5bb61a239b853abf865fd67"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a12c075dae5bb61a239b853abf865fd67">VM_API_CALL</a></div><div class="ttdeci">#define VM_API_CALL(res, api_call, api_parms)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00620">main/app.c:620</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae0d83cafb3ae5725be81625b4a211f84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0d83cafb3ae5725be81625b4a211f84">&#9670;&nbsp;</a></span>ast_vm_is_registered()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_vm_is_registered </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine if a voicemail provider is registered. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if no provider registered. </td></tr>
    <tr><td class="paramname">1</td><td>if a provider is registered. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00430">430</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, and <a class="el" href="../../d8/d56/cdr__odbc_8c_source.html#l00058">table</a>.</p>
<div class="fragment"><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;{</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d7c/structast__vm__functions.html">ast_vm_functions</a> *<a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;   <span class="keywordtype">int</span> is_registered;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;   table = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(vm_provider);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;   is_registered = table ? 1 : 0;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(table);</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;   <span class="keywordflow">return</span> is_registered;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="cdr__odbc_8c_html_a68d1e6e752f2cf81551fac543cae108a"><div class="ttname"><a href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a></div><div class="ttdeci">static char * table</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d56/cdr__odbc_8c_source.html#l00058">cdr_odbc.c:58</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__vm__functions_html"><div class="ttname"><a href="../../df/d7c/structast__vm__functions.html">ast_vm_functions</a></div><div class="ttdoc">Voicemail function table definition. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00539">include/asterisk/app.h:539</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae5d77d1c2cf9d8e187cb6559021f87c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5d77d1c2cf9d8e187cb6559021f87c5">&#9670;&nbsp;</a></span>ast_vm_mailbox_snapshot_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d3/dbc/structast__vm__mailbox__snapshot.html">ast_vm_mailbox_snapshot</a>* ast_vm_mailbox_snapshot_create </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>mailbox</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>folder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>descending</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#a67fca777538364c249bf1b66b2a22491">ast_vm_snapshot_sort_val</a>&#160;</td>
          <td class="paramname"><em>sort_val</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>combine_INBOX_and_OLD</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a snapshot of a mailbox which contains information about every msg. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mailbox,the</td><td>mailbox to look for </td></tr>
    <tr><td class="paramname">context,the</td><td>context to look for the mailbox in </td></tr>
    <tr><td class="paramname">folder,OPTIONAL.</td><td>When not NULL only msgs from the specified folder will be included. </td></tr>
    <tr><td class="paramname">descending,list</td><td>the msgs in descending order rather than ascending order. </td></tr>
    <tr><td class="paramname">combine_INBOX_and_OLD,When</td><td>this argument is set, The OLD folder will be represented in the INBOX folder of the snapshot. This allows the snapshot to represent the OLD and INBOX messages in sorted order merged together.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">snapshot</td><td>on success </td></tr>
    <tr><td class="paramname">NULL</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00734">734</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00620">VM_API_CALL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/da2/test__voicemail__api_8c_source.html#l00589">test_vm_api_remove_all_messages()</a>.</p>
<div class="fragment"><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;{</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/dbc/structast__vm__mailbox__snapshot.html">ast_vm_mailbox_snapshot</a> *res = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;   <a class="code" href="../../d3/d83/main_2app_8c.html#a12c075dae5bb61a239b853abf865fd67">VM_API_CALL</a>(res, mailbox_snapshot_create, (<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a>, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, folder, descending,</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;      sort_val, combine_INBOX_and_OLD));</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a6b49cafa2a3d359a2e865992f551874a"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a></div><div class="ttdeci">static char mailbox[AST_MAX_MAILBOX_UNIQUEID]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00204">chan_mgcp.c:204</a></div></div>
<div class="ttc" id="main_2app_8c_html_a12c075dae5bb61a239b853abf865fd67"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a12c075dae5bb61a239b853abf865fd67">VM_API_CALL</a></div><div class="ttdeci">#define VM_API_CALL(res, api_call, api_parms)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00620">main/app.c:620</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="structast__vm__mailbox__snapshot_html"><div class="ttname"><a href="../../d3/dbc/structast__vm__mailbox__snapshot.html">ast_vm_mailbox_snapshot</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00317">include/asterisk/app.h:317</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a632bfa316101ce8087f60f59ff909294"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a632bfa316101ce8087f60f59ff909294">&#9670;&nbsp;</a></span>ast_vm_mailbox_snapshot_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d3/dbc/structast__vm__mailbox__snapshot.html">ast_vm_mailbox_snapshot</a>* ast_vm_mailbox_snapshot_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dbc/structast__vm__mailbox__snapshot.html">ast_vm_mailbox_snapshot</a> *&#160;</td>
          <td class="paramname"><em>mailbox_snapshot</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>destroy a snapshot </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mailbox_snapshot</td><td>The snapshot to destroy. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00748">748</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00620">VM_API_CALL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/da2/test__voicemail__api_8c_source.html#l00840">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d2/da2/test__voicemail__api_8c_source.html#l00589">test_vm_api_remove_all_messages()</a>.</p>
<div class="fragment"><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;{</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/dbc/structast__vm__mailbox__snapshot.html">ast_vm_mailbox_snapshot</a> *res = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;   <a class="code" href="../../d3/d83/main_2app_8c.html#a12c075dae5bb61a239b853abf865fd67">VM_API_CALL</a>(res, mailbox_snapshot_destroy, (mailbox_snapshot));</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="main_2app_8c_html_a12c075dae5bb61a239b853abf865fd67"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a12c075dae5bb61a239b853abf865fd67">VM_API_CALL</a></div><div class="ttdeci">#define VM_API_CALL(res, api_call, api_parms)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00620">main/app.c:620</a></div></div>
<div class="ttc" id="structast__vm__mailbox__snapshot_html"><div class="ttname"><a href="../../d3/dbc/structast__vm__mailbox__snapshot.html">ast_vm_mailbox_snapshot</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00317">include/asterisk/app.h:317</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a89e14848a8f26e967c13e5be34db8154"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89e14848a8f26e967c13e5be34db8154">&#9670;&nbsp;</a></span>ast_vm_msg_forward()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_vm_msg_forward </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>from_mailbox</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>from_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>from_folder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>to_mailbox</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>to_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>to_folder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num_msgs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>msg_ids</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>delete_old</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>forward a message from one mailbox to another. </p>
<p>from_mailbox The original mailbox the message is being forwarded from from_context The voicemail context of the from_mailbox from_folder The folder from which the message is being forwarded to_mailbox The mailbox to forward the message to to_context The voicemail context of the to_mailbox to_folder The folder to which the message is being forwarded num_msgs The number of messages being forwarded msg_ids The message IDs of the messages in from_mailbox to forward delete_old If non-zero, the forwarded messages are also deleted from from_mailbox. Otherwise, the messages will remain in the from_mailbox.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
    <tr><td class="paramname">0</td><td>Success </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00782">782</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00620">VM_API_CALL</a>.</p>
<div class="fragment"><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;{</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;   <a class="code" href="../../d3/d83/main_2app_8c.html#a12c075dae5bb61a239b853abf865fd67">VM_API_CALL</a>(res, msg_forward, (<a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#a4540ed6a1ea3b69a813ff82e0cfb7587">from_mailbox</a>, from_context, from_folder, to_mailbox,</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;      to_context, to_folder, num_msgs, msg_ids, delete_old));</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;}</div><div class="ttc" id="namespacesip__to__pjsip_html_a4540ed6a1ea3b69a813ff82e0cfb7587"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#a4540ed6a1ea3b69a813ff82e0cfb7587">sip_to_pjsip.from_mailbox</a></div><div class="ttdeci">def from_mailbox(key, val, section, pjsip, nmapped)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l00360">sip_to_pjsip.py:360</a></div></div>
<div class="ttc" id="main_2app_8c_html_a12c075dae5bb61a239b853abf865fd67"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a12c075dae5bb61a239b853abf865fd67">VM_API_CALL</a></div><div class="ttdeci">#define VM_API_CALL(res, api_call, api_parms)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00620">main/app.c:620</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad3e7b70282176e60ba4ec190646960f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3e7b70282176e60ba4ec190646960f5">&#9670;&nbsp;</a></span>ast_vm_msg_move()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_vm_msg_move </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>mailbox</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num_msgs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>oldfolder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>old_msg_ids</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>newfolder</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Move messages from one folder to another. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mailbox</td><td>The mailbox to which the folders belong </td></tr>
    <tr><td class="paramname">context</td><td>The voicemail context for the mailbox </td></tr>
    <tr><td class="paramname">num_msgs</td><td>The number of messages to move </td></tr>
    <tr><td class="paramname">oldfolder</td><td>The folder from where messages should be moved </td></tr>
    <tr><td class="paramname">old_msg_ids</td><td>The message IDs of the messages to move </td></tr>
    <tr><td class="paramname">newfolder</td><td>The folder to which messages should be moved new folder. This array must be num_msgs sized.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
    <tr><td class="paramname">0</td><td>Success </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00756">756</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00620">VM_API_CALL</a>.</p>
<div class="fragment"><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;{</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;   <a class="code" href="../../d3/d83/main_2app_8c.html#a12c075dae5bb61a239b853abf865fd67">VM_API_CALL</a>(res, msg_move, (<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a>, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, num_msgs, oldfolder, old_msg_ids,</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      newfolder));</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;}</div><div class="ttc" id="chan__mgcp_8c_html_a6b49cafa2a3d359a2e865992f551874a"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a></div><div class="ttdeci">static char mailbox[AST_MAX_MAILBOX_UNIQUEID]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00204">chan_mgcp.c:204</a></div></div>
<div class="ttc" id="main_2app_8c_html_a12c075dae5bb61a239b853abf865fd67"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a12c075dae5bb61a239b853abf865fd67">VM_API_CALL</a></div><div class="ttdeci">#define VM_API_CALL(res, api_call, api_parms)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00620">main/app.c:620</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a36f60973de7a0415ed23fb2d635b8613"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36f60973de7a0415ed23fb2d635b8613">&#9670;&nbsp;</a></span>ast_vm_msg_play()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_vm_msg_play </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>mailbox</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>folder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>msg_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#ac0c37deb099c676114ef0032ad449375">ast_vm_msg_play_cb</a> *&#160;</td>
          <td class="paramname"><em>cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Play a voicemail msg back on a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td></td></tr>
    <tr><td class="paramname">mailbox</td><td>msg is in. </td></tr>
    <tr><td class="paramname">context</td><td>of mailbox. </td></tr>
    <tr><td class="paramname">folder</td><td>voicemail folder to look in. </td></tr>
    <tr><td class="paramname">msg_num</td><td>message number in the voicemailbox to playback to the channel. </td></tr>
    <tr><td class="paramname">cb</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">-1</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00799">799</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00620">VM_API_CALL</a>.</p>
<div class="fragment"><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;{</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;   <a class="code" href="../../d3/d83/main_2app_8c.html#a12c075dae5bb61a239b853abf865fd67">VM_API_CALL</a>(res, msg_play, (chan, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a>, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, folder, msg_num, cb));</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;}</div><div class="ttc" id="chan__mgcp_8c_html_a6b49cafa2a3d359a2e865992f551874a"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a></div><div class="ttdeci">static char mailbox[AST_MAX_MAILBOX_UNIQUEID]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00204">chan_mgcp.c:204</a></div></div>
<div class="ttc" id="main_2app_8c_html_a12c075dae5bb61a239b853abf865fd67"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a12c075dae5bb61a239b853abf865fd67">VM_API_CALL</a></div><div class="ttdeci">#define VM_API_CALL(res, api_call, api_parms)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00620">main/app.c:620</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af5e9114c54a30de9136f699a43ca7740"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5e9114c54a30de9136f699a43ca7740">&#9670;&nbsp;</a></span>ast_vm_msg_remove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_vm_msg_remove </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>mailbox</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num_msgs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>folder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>msgs</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove/delete messages from a mailbox folder. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mailbox</td><td>The mailbox from which to delete messages </td></tr>
    <tr><td class="paramname">context</td><td>The voicemail context for the mailbox </td></tr>
    <tr><td class="paramname">num_msgs</td><td>The number of messages to delete </td></tr>
    <tr><td class="paramname">folder</td><td>The folder from which to remove messages </td></tr>
    <tr><td class="paramname">msgs</td><td>The message IDs of the messages to delete</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
    <tr><td class="paramname">0</td><td>Success </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00770">770</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00620">VM_API_CALL</a>.</p>
<div class="fragment"><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;{</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;   <a class="code" href="../../d3/d83/main_2app_8c.html#a12c075dae5bb61a239b853abf865fd67">VM_API_CALL</a>(res, msg_remove, (<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a>, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, num_msgs, folder, msgs));</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;}</div><div class="ttc" id="chan__mgcp_8c_html_a6b49cafa2a3d359a2e865992f551874a"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a></div><div class="ttdeci">static char mailbox[AST_MAX_MAILBOX_UNIQUEID]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00204">chan_mgcp.c:204</a></div></div>
<div class="ttc" id="main_2app_8c_html_a12c075dae5bb61a239b853abf865fd67"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a12c075dae5bb61a239b853abf865fd67">VM_API_CALL</a></div><div class="ttdeci">#define VM_API_CALL(res, api_call, api_parms)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00620">main/app.c:620</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="addab2e19809d9d8d6dcde9548982b4bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#addab2e19809d9d8d6dcde9548982b4bd">&#9670;&nbsp;</a></span>ast_vm_test_create_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_vm_test_create_user </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>mailbox</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00813">813</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00596">ast_vm_test_create_user_func</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/da2/test__voicemail__api_8c_source.html#l00626">test_vm_api_test_setup()</a>.</p>
<div class="fragment"><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;{</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d83/main_2app_8c.html#ad3925a12ca1909720e1f4d7ea01fa8a3">ast_vm_test_create_user_func</a>) {</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d3/d83/main_2app_8c.html#ad3925a12ca1909720e1f4d7ea01fa8a3">ast_vm_test_create_user_func</a>(<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a>);</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;   }</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;}</div><div class="ttc" id="main_2app_8c_html_ad3925a12ca1909720e1f4d7ea01fa8a3"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#ad3925a12ca1909720e1f4d7ea01fa8a3">ast_vm_test_create_user_func</a></div><div class="ttdeci">static ast_vm_test_create_user_fn * ast_vm_test_create_user_func</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00596">main/app.c:596</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a6b49cafa2a3d359a2e865992f551874a"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a></div><div class="ttdeci">static char mailbox[AST_MAX_MAILBOX_UNIQUEID]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00204">chan_mgcp.c:204</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a93e94d3cc629fd826c72c14f59367e1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93e94d3cc629fd826c72c14f59367e1e">&#9670;&nbsp;</a></span>ast_vm_test_destroy_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_vm_test_destroy_user </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>mailbox</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00821">821</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00597">ast_vm_test_destroy_user_func</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/da2/test__voicemail__api_8c_source.html#l00716">test_vm_api_test_teardown()</a>.</p>
<div class="fragment"><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;{</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d83/main_2app_8c.html#ac6b468fe42cea720c3ce8c7c4f0ea2c9">ast_vm_test_destroy_user_func</a>) {</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d3/d83/main_2app_8c.html#ac6b468fe42cea720c3ce8c7c4f0ea2c9">ast_vm_test_destroy_user_func</a>(<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a>);</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;   }</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;}</div><div class="ttc" id="chan__mgcp_8c_html_a6b49cafa2a3d359a2e865992f551874a"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a></div><div class="ttdeci">static char mailbox[AST_MAX_MAILBOX_UNIQUEID]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00204">chan_mgcp.c:204</a></div></div>
<div class="ttc" id="main_2app_8c_html_ac6b468fe42cea720c3ce8c7c4f0ea2c9"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#ac6b468fe42cea720c3ce8c7c4f0ea2c9">ast_vm_test_destroy_user_func</a></div><div class="ttdeci">static ast_vm_test_destroy_user_fn * ast_vm_test_destroy_user_func</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00597">main/app.c:597</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a014da687f3ee9369aaccf3535cbca3ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a014da687f3ee9369aaccf3535cbca3ef">&#9670;&nbsp;</a></span>ast_vm_test_swap_table_in()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_vm_test_swap_table_in </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../df/d7c/structast__vm__functions.html">ast_vm_functions</a> *&#160;</td>
          <td class="paramname"><em>vm_table</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Swap out existing voicemail functions with a temporary set of functions for use with unit tests. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vm_table</td><td>function table to use for testing</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>ast_vm_test_swap_table_out should be called to restore the original set before testing concludes </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00489">489</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00369">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00406">ao2_alloc_options</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00908">ao2_global_obj_replace_unref</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00487">provider_is_swapped</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l15020">vm_table</a>.</p>
<div class="fragment"><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;{</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7c/structast__vm__functions.html">ast_vm_functions</a> *, holding_table, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7c/structast__vm__functions.html">ast_vm_functions</a> *, new_table, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d83/main_2app_8c.html#a0140ad24206ae7215b855360b9f3c2af">provider_is_swapped</a>) {</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Attempted to swap in test function table without swapping out old test table.\n&quot;</span>);</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;   }</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;   holding_table = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(vm_provider);</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;   <span class="keywordflow">if</span> (holding_table) {</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a3a11e1a1d3e99bed3ea0a7c57a3880d7">ao2_global_obj_replace_unref</a>(vm_provider_holder, holding_table);</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;   }</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;   new_table = <a class="code" href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a>(<span class="keyword">sizeof</span>(*new_table), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>);</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;   <span class="keywordflow">if</span> (!new_table) {</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;   }</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   *new_table = *<a class="code" href="../../dc/df4/app__voicemail_8c.html#a20bc535b35844236bae4c89b484435c5">vm_table</a>;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a3a11e1a1d3e99bed3ea0a7c57a3880d7">ao2_global_obj_replace_unref</a>(vm_provider, new_table);</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;   <a class="code" href="../../d3/d83/main_2app_8c.html#a0140ad24206ae7215b855360b9f3c2af">provider_is_swapped</a> = 1;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;}</div><div class="ttc" id="app__voicemail_8c_html_a20bc535b35844236bae4c89b484435c5"><div class="ttname"><a href="../../dc/df4/app__voicemail_8c.html#a20bc535b35844236bae4c89b484435c5">vm_table</a></div><div class="ttdeci">static const struct ast_vm_functions vm_table</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l15020">app_voicemail.c:15020</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab3c44e28d661616129b7819069effe61"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a></div><div class="ttdeci">#define ao2_alloc_options(data_size, destructor_fn, options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00406">astobj2.h:406</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="main_2app_8c_html_a0140ad24206ae7215b855360b9f3c2af"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a0140ad24206ae7215b855360b9f3c2af">provider_is_swapped</a></div><div class="ttdeci">static int provider_is_swapped</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00487">main/app.c:487</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="astobj2_8h_html_a3a11e1a1d3e99bed3ea0a7c57a3880d7"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a3a11e1a1d3e99bed3ea0a7c57a3880d7">ao2_global_obj_replace_unref</a></div><div class="ttdeci">#define ao2_global_obj_replace_unref(holder, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00908">astobj2.h:908</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__vm__functions_html"><div class="ttname"><a href="../../df/d7c/structast__vm__functions.html">ast_vm_functions</a></div><div class="ttdoc">Voicemail function table definition. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00539">include/asterisk/app.h:539</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a049ae8f14b4d323f5c357f6956b909b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a049ae8f14b4d323f5c357f6956b909b0">&#9670;&nbsp;</a></span>ast_vm_test_swap_table_out()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_vm_test_swap_table_out </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Used after ast_vm_test_swap_table_in to restore the original set of voicemail functions. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00515">515</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00865">ao2_global_obj_release</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00908">ao2_global_obj_replace_unref</a>, <a class="el" href="../../d3/d83/main_2app_8c.html#aba1706218d4c0220a263a5e8b07c8f2c">AO2_GLOBAL_OBJ_STATIC()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00487">provider_is_swapped</a>, and <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>.</p>
<div class="fragment"><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;{</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d7c/structast__vm__functions.html">ast_vm_functions</a> *, held_table, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d83/main_2app_8c.html#a0140ad24206ae7215b855360b9f3c2af">provider_is_swapped</a>) {</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Attempted to swap out test function table, but none is currently installed.\n&quot;</span>);</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;   }</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;   held_table = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(vm_provider_holder);</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;   <span class="keywordflow">if</span> (!held_table) {</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;   }</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a3a11e1a1d3e99bed3ea0a7c57a3880d7">ao2_global_obj_replace_unref</a>(vm_provider, held_table);</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ac0e1cbc7cf050c8b7b8e3a8fee92c50e">ao2_global_obj_release</a>(vm_provider_holder);</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;   <a class="code" href="../../d3/d83/main_2app_8c.html#a0140ad24206ae7215b855360b9f3c2af">provider_is_swapped</a> = 0;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="main_2app_8c_html_a0140ad24206ae7215b855360b9f3c2af"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a0140ad24206ae7215b855360b9f3c2af">provider_is_swapped</a></div><div class="ttdeci">static int provider_is_swapped</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00487">main/app.c:487</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac0e1cbc7cf050c8b7b8e3a8fee92c50e"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac0e1cbc7cf050c8b7b8e3a8fee92c50e">ao2_global_obj_release</a></div><div class="ttdeci">#define ao2_global_obj_release(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00865">astobj2.h:865</a></div></div>
<div class="ttc" id="astobj2_8h_html_a3a11e1a1d3e99bed3ea0a7c57a3880d7"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a3a11e1a1d3e99bed3ea0a7c57a3880d7">ao2_global_obj_replace_unref</a></div><div class="ttdeci">#define ao2_global_obj_replace_unref(holder, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00908">astobj2.h:908</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__vm__functions_html"><div class="ttname"><a href="../../df/d7c/structast__vm__functions.html">ast_vm_functions</a></div><div class="ttdoc">Voicemail function table definition. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00539">include/asterisk/app.h:539</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aab65d2013da7fcbb28da422712bac5e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab65d2013da7fcbb28da422712bac5e8">&#9670;&nbsp;</a></span>ast_vm_unregister()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_vm_unregister </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>module_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregister the specified voicemail provider. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">The</td><td>module name of the provider to unregister</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00473">473</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00865">ao2_global_obj_release</a>, <a class="el" href="../../d3/d83/main_2app_8c.html#aba1706218d4c0220a263a5e8b07c8f2c">AO2_GLOBAL_OBJ_STATIC()</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00548">ast_vm_functions::module_name</a>, and <a class="el" href="../../d8/d56/cdr__odbc_8c_source.html#l00058">table</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l15050">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;{</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d7c/structast__vm__functions.html">ast_vm_functions</a> *<a class="code" href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a>;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;   table = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(vm_provider);</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;   <span class="keywordflow">if</span> (table &amp;&amp; !strcmp(table-&gt;<a class="code" href="../../df/d7c/structast__vm__functions.html#a4c2d9327de87c6be0b54f793adc7f1fb">module_name</a>, <a class="code" href="../../df/d7c/structast__vm__functions.html#a4c2d9327de87c6be0b54f793adc7f1fb">module_name</a>)) {</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#ac0e1cbc7cf050c8b7b8e3a8fee92c50e">ao2_global_obj_release</a>(vm_provider);</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;   }</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(table);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="cdr__odbc_8c_html_a68d1e6e752f2cf81551fac543cae108a"><div class="ttname"><a href="../../d8/d56/cdr__odbc_8c.html#a68d1e6e752f2cf81551fac543cae108a">table</a></div><div class="ttdeci">static char * table</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d56/cdr__odbc_8c_source.html#l00058">cdr_odbc.c:58</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac0e1cbc7cf050c8b7b8e3a8fee92c50e"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac0e1cbc7cf050c8b7b8e3a8fee92c50e">ao2_global_obj_release</a></div><div class="ttdeci">#define ao2_global_obj_release(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00865">astobj2.h:865</a></div></div>
<div class="ttc" id="structast__vm__functions_html_a4c2d9327de87c6be0b54f793adc7f1fb"><div class="ttname"><a href="../../df/d7c/structast__vm__functions.html#a4c2d9327de87c6be0b54f793adc7f1fb">ast_vm_functions::module_name</a></div><div class="ttdeci">const char * module_name</div><div class="ttdoc">The name of the module that provides the voicemail functionality. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00548">include/asterisk/app.h:548</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__vm__functions_html"><div class="ttname"><a href="../../df/d7c/structast__vm__functions.html">ast_vm_functions</a></div><div class="ttdoc">Voicemail function table definition. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00539">include/asterisk/app.h:539</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a320dd3e6327e693d76625f9bed7a7a81"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a320dd3e6327e693d76625f9bed7a7a81">&#9670;&nbsp;</a></span>control_streamfile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int control_streamfile </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fwd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>rev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>stop</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>suspend</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>restart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>skipms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long *&#160;</td>
          <td class="paramname"><em>offsetms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>lang</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d4d/file_8h.html#a2d5138e99197a1d01f7a2ed07830476e">ast_waitstream_fr_cb</a>&#160;</td>
          <td class="paramname"><em>cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a222">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01131">1131</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l08266">ast_channel_start_silence_generator()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l08312">ast_channel_stop_silence_generator()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00621">ast_channel_stream()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00335">AST_CONTROL_STREAM_RESTART</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00333">AST_CONTROL_STREAM_STOP</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00334">AST_CONTROL_STREAM_SUSPEND</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d7/d5b/options_8h_source.html#l00124">ast_opt_transmit_silence</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01038">ast_seekstream()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00187">ast_stopstream()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01250">ast_streamfile()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01048">ast_tellstream()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00196">ast_test_suite_event_notify</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l03184">ast_waitfordigit()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01745">ast_waitstream_fr()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01734">ast_waitstream_fr_w_cb()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">end</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01319">ast_control_streamfile()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01327">ast_control_streamfile_lang()</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01305">ast_control_streamfile_w_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;{</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;   <span class="keywordtype">char</span> *breaks = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;   <span class="keywordtype">int</span> blen = 2;</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;   <span class="keywordtype">long</span> pause_restart_point = 0;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;   <span class="keywordtype">long</span> offset = 0;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/da1/structast__silence__generator.html">ast_silence_generator</a> *silgen = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>) {</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;   }</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;   <span class="keywordflow">if</span> (offsetms) {</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;      offset = *offsetms * 8; <span class="comment">/* XXX Assumes 8kHz */</span></div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;   }</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;   <span class="keywordflow">if</span> (lang == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;      lang = <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan);</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;   }</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d44/app__meetme_8c.html#a111277a0849f92b793ed6aa1efe54462">stop</a>) {</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;      blen += strlen(<a class="code" href="../../df/d44/app__meetme_8c.html#a111277a0849f92b793ed6aa1efe54462">stop</a>);</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;   }</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d5a/ccss_8c.html#a8bd1c39b4993f80f1bf674e3a1d717dd">suspend</a>) {</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;      blen += strlen(<a class="code" href="../../d3/d5a/ccss_8c.html#a8bd1c39b4993f80f1bf674e3a1d717dd">suspend</a>);</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;   }</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;   <span class="keywordflow">if</span> (restart) {</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;      blen += strlen(restart);</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;   }</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;   <span class="keywordflow">if</span> (blen &gt; 2) {</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;      breaks = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(blen + 1);</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;      breaks[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d44/app__meetme_8c.html#a111277a0849f92b793ed6aa1efe54462">stop</a>) {</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;         strcat(breaks, <a class="code" href="../../df/d44/app__meetme_8c.html#a111277a0849f92b793ed6aa1efe54462">stop</a>);</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;      }</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/d5a/ccss_8c.html#a8bd1c39b4993f80f1bf674e3a1d717dd">suspend</a>) {</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;         strcat(breaks, <a class="code" href="../../d3/d5a/ccss_8c.html#a8bd1c39b4993f80f1bf674e3a1d717dd">suspend</a>);</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;      }</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;      <span class="keywordflow">if</span> (restart) {</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;         strcat(breaks, restart);</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;      }</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;   }</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;   <span class="keywordflow">if</span> ((end = strchr(<a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, <span class="charliteral">&#39;:&#39;</span>))) {</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(end, <span class="stringliteral">&quot;:end&quot;</span>)) {</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;         *end = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;         end++;</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;         end = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;      }</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;   }</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;      <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(chan);</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;      res = <a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, lang);</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;      <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;         <span class="keywordflow">if</span> (pause_restart_point) {</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#a36f6bba05952162d5d1ee7fb9819bd07">ast_seekstream</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a043ef90a065fe177af7b21a6045b6506">ast_channel_stream</a>(chan), pause_restart_point, SEEK_SET);</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;            pause_restart_point = 0;</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;         }</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (end || offset &lt; 0) {</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;            <span class="keywordflow">if</span> (offset == -8) {</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;               offset = 0;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;            }</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;ControlPlayback seek to offset %ld from end\n&quot;</span>, offset);</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#a36f6bba05952162d5d1ee7fb9819bd07">ast_seekstream</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a043ef90a065fe177af7b21a6045b6506">ast_channel_stream</a>(chan), offset, SEEK_END);</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;            end = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;            offset = 0;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (offset) {</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;ControlPlayback seek to offset %ld\n&quot;</span>, offset);</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#a36f6bba05952162d5d1ee7fb9819bd07">ast_seekstream</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a043ef90a065fe177af7b21a6045b6506">ast_channel_stream</a>(chan), offset, SEEK_SET);</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;            offset = 0;</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;         }</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;         <span class="keywordflow">if</span> (cb) {</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;            res = <a class="code" href="../../d2/d4d/file_8h.html#a1d269d89440f69d13458394efc73f2d2">ast_waitstream_fr_w_cb</a>(chan, breaks, fwd, rev, <a class="code" href="../../dc/df4/app__voicemail_8c.html#a1df943a05a384a407a19cf8831b2d237">skipms</a>, cb);</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;            res = <a class="code" href="../../d2/d4d/file_8h.html#a5ce837632e3746a3af17f8311060e510">ast_waitstream_fr</a>(chan, breaks, fwd, rev, <a class="code" href="../../dc/df4/app__voicemail_8c.html#a1df943a05a384a407a19cf8831b2d237">skipms</a>);</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;         }</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;      }</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;      <span class="keywordflow">if</span> (res &lt; 1) {</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;      }</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;      <span class="comment">/* We go at next loop if we got the restart char */</span></div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;      <span class="keywordflow">if</span> ((restart &amp;&amp; strchr(restart, res)) || res == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a32b72bba20e26bcd2d5a299c5d939bce">AST_CONTROL_STREAM_RESTART</a>) {</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;we&#39;ll restart the stream here at next loop\n&quot;</span>);</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;         pause_restart_point = 0;</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a>(<span class="stringliteral">&quot;PLAYBACK&quot;</span>,<span class="stringliteral">&quot;Channel: %s\r\n&quot;</span></div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;            <span class="stringliteral">&quot;Control: %s\r\n&quot;</span>,</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan),</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;            <span class="stringliteral">&quot;Restart&quot;</span>);</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;      }</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="../../d3/d5a/ccss_8c.html#a8bd1c39b4993f80f1bf674e3a1d717dd">suspend</a> &amp;&amp; strchr(<a class="code" href="../../d3/d5a/ccss_8c.html#a8bd1c39b4993f80f1bf674e3a1d717dd">suspend</a>, res)) || res == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a32e9dbe9416e847668084be16d4698c9">AST_CONTROL_STREAM_SUSPEND</a>) {</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;         pause_restart_point = <a class="code" href="../../d2/d4d/file_8h.html#a01771a318e7adea51499040f27b4278a">ast_tellstream</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a043ef90a065fe177af7b21a6045b6506">ast_channel_stream</a>(chan));</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5b/options_8h.html#afe8795c4ec744506a9300700fc0813dc">ast_opt_transmit_silence</a>) {</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;            silgen = <a class="code" href="../../d5/d7b/channel_8h.html#a2a2e0ff24c57491a877cac39cb670024">ast_channel_start_silence_generator</a>(chan);</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;         }</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a>(<span class="stringliteral">&quot;PLAYBACK&quot;</span>,<span class="stringliteral">&quot;Channel: %s\r\n&quot;</span></div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;            <span class="stringliteral">&quot;Control: %s\r\n&quot;</span>,</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan),</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;            <span class="stringliteral">&quot;Pause&quot;</span>);</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;         <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(chan);</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;            <span class="keywordflow">if</span> (!(res = <a class="code" href="../../d5/d7b/channel_8h.html#a050bec9a4abc1a599b6573a6091b080c">ast_waitfordigit</a>(chan, 1000))) {</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;               <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (res == -1 || (<a class="code" href="../../d3/d5a/ccss_8c.html#a8bd1c39b4993f80f1bf674e3a1d717dd">suspend</a> &amp;&amp; strchr(<a class="code" href="../../d3/d5a/ccss_8c.html#a8bd1c39b4993f80f1bf674e3a1d717dd">suspend</a>, res)) || (<a class="code" href="../../df/d44/app__meetme_8c.html#a111277a0849f92b793ed6aa1efe54462">stop</a> &amp;&amp; strchr(<a class="code" href="../../df/d44/app__meetme_8c.html#a111277a0849f92b793ed6aa1efe54462">stop</a>, res))</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;                  || res == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a32e9dbe9416e847668084be16d4698c9">AST_CONTROL_STREAM_SUSPEND</a> || res == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa95eb913e6cbbac8a34e69905245fdf4">AST_CONTROL_STREAM_STOP</a>) {</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;            }</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;         }</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;         <span class="keywordflow">if</span> (silgen) {</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a6643cbe766a051d2d06750ab5b3e933d">ast_channel_stop_silence_generator</a>(chan, silgen);</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;            silgen = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;         }</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;         <span class="keywordflow">if</span> ((<a class="code" href="../../d3/d5a/ccss_8c.html#a8bd1c39b4993f80f1bf674e3a1d717dd">suspend</a> &amp;&amp; (res == *<a class="code" href="../../d3/d5a/ccss_8c.html#a8bd1c39b4993f80f1bf674e3a1d717dd">suspend</a>)) || res == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a32e9dbe9416e847668084be16d4698c9">AST_CONTROL_STREAM_SUSPEND</a>) {</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;            res = 0;</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;            <a class="code" href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a>(<span class="stringliteral">&quot;PLAYBACK&quot;</span>,<span class="stringliteral">&quot;Channel: %s\r\n&quot;</span></div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;               <span class="stringliteral">&quot;Control: %s\r\n&quot;</span>,</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan),</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;               <span class="stringliteral">&quot;Unpause&quot;</span>);</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;         }</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;      }</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;      <span class="keywordflow">if</span> (res == -1) {</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;      }</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;      <span class="comment">/* if we get one of our stop chars, return it to the calling function */</span></div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="../../df/d44/app__meetme_8c.html#a111277a0849f92b793ed6aa1efe54462">stop</a> &amp;&amp; strchr(<a class="code" href="../../df/d44/app__meetme_8c.html#a111277a0849f92b793ed6aa1efe54462">stop</a>, res)) || res == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa95eb913e6cbbac8a34e69905245fdf4">AST_CONTROL_STREAM_STOP</a>) {</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a>(<span class="stringliteral">&quot;PLAYBACK&quot;</span>,<span class="stringliteral">&quot;Channel: %s\r\n&quot;</span></div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;            <span class="stringliteral">&quot;Control: %s\r\n&quot;</span>,</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan),</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;            <span class="stringliteral">&quot;Stop&quot;</span>);</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;      }</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;   }</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;   <span class="keywordflow">if</span> (pause_restart_point) {</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;      offset = pause_restart_point;</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a043ef90a065fe177af7b21a6045b6506">ast_channel_stream</a>(chan)) {</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;         offset = <a class="code" href="../../d2/d4d/file_8h.html#a01771a318e7adea51499040f27b4278a">ast_tellstream</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a043ef90a065fe177af7b21a6045b6506">ast_channel_stream</a>(chan));</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;         offset = -8;  <span class="comment">/* indicate end of file */</span></div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;      }</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;   }</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;   <span class="keywordflow">if</span> (offsetms) {</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;      *offsetms = offset / 8; <span class="comment">/* samples --&gt; ms ... XXX Assumes 8 kHz */</span></div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;   }</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;   <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(chan);</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;}</div><div class="ttc" id="file_8h_html_a67c7e271b4ca70aca6d48fd48d121857"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a></div><div class="ttdeci">int ast_streamfile(struct ast_channel *c, const char *filename, const char *preflang)</div><div class="ttdoc">Streams a file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01250">file.c:1250</a></div></div>
<div class="ttc" id="structast__silence__generator_html"><div class="ttname"><a href="../../d9/da1/structast__silence__generator.html">ast_silence_generator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08262">channel.c:8262</a></div></div>
<div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a111277a0849f92b793ed6aa1efe54462"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a111277a0849f92b793ed6aa1efe54462">stop</a></div><div class="ttdeci">unsigned int stop</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01096">app_meetme.c:1096</a></div></div>
<div class="ttc" id="options_8h_html_afe8795c4ec744506a9300700fc0813dc"><div class="ttname"><a href="../../d7/d5b/options_8h.html#afe8795c4ec744506a9300700fc0813dc">ast_opt_transmit_silence</a></div><div class="ttdeci">#define ast_opt_transmit_silence</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00124">options.h:124</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a32e9dbe9416e847668084be16d4698c9"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a32e9dbe9416e847668084be16d4698c9">AST_CONTROL_STREAM_SUSPEND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00334">include/asterisk/frame.h:334</a></div></div>
<div class="ttc" id="file_8h_html_a01771a318e7adea51499040f27b4278a"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a01771a318e7adea51499040f27b4278a">ast_tellstream</a></div><div class="ttdeci">off_t ast_tellstream(struct ast_filestream *fs)</div><div class="ttdoc">Tell where we are in a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01048">file.c:1048</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a32b72bba20e26bcd2d5a299c5d939bce"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a32b72bba20e26bcd2d5a299c5d939bce">AST_CONTROL_STREAM_RESTART</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00335">include/asterisk/frame.h:335</a></div></div>
<div class="ttc" id="file_8h_html_a5ce837632e3746a3af17f8311060e510"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a5ce837632e3746a3af17f8311060e510">ast_waitstream_fr</a></div><div class="ttdeci">int ast_waitstream_fr(struct ast_channel *c, const char *breakon, const char *forward, const char *rewind, int ms)</div><div class="ttdoc">Same as waitstream but allows stream to be forwarded or rewound. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01745">file.c:1745</a></div></div>
<div class="ttc" id="test_8h_html_a9482d93ea3931853331bdbc745ce7cb4"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a></div><div class="ttdeci">#define ast_test_suite_event_notify(s, f,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00196">test.h:196</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="channel_8h_html_a2a2e0ff24c57491a877cac39cb670024"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a2a2e0ff24c57491a877cac39cb670024">ast_channel_start_silence_generator</a></div><div class="ttdeci">struct ast_silence_generator * ast_channel_start_silence_generator(struct ast_channel *chan)</div><div class="ttdoc">Starts a silence generator on the given channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08266">channel.c:8266</a></div></div>
<div class="ttc" id="app__voicemail_8c_html_a1df943a05a384a407a19cf8831b2d237"><div class="ttname"><a href="../../dc/df4/app__voicemail_8c.html#a1df943a05a384a407a19cf8831b2d237">skipms</a></div><div class="ttdeci">static int skipms</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l00932">app_voicemail.c:932</a></div></div>
<div class="ttc" id="file_8h_html_a36f6bba05952162d5d1ee7fb9819bd07"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a36f6bba05952162d5d1ee7fb9819bd07">ast_seekstream</a></div><div class="ttdeci">int ast_seekstream(struct ast_filestream *fs, off_t sample_offset, int whence)</div><div class="ttdoc">Seeks into stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01038">file.c:1038</a></div></div>
<div class="ttc" id="channel_8h_html_a6643cbe766a051d2d06750ab5b3e933d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6643cbe766a051d2d06750ab5b3e933d">ast_channel_stop_silence_generator</a></div><div class="ttdeci">void ast_channel_stop_silence_generator(struct ast_channel *chan, struct ast_silence_generator *state)</div><div class="ttdoc">Stops a previously-started silence generator on the given channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08312">channel.c:8312</a></div></div>
<div class="ttc" id="channel_8h_html_a043ef90a065fe177af7b21a6045b6506"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a043ef90a065fe177af7b21a6045b6506">ast_channel_stream</a></div><div class="ttdeci">struct ast_filestream * ast_channel_stream(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00621">channel_internal_api.c:621</a></div></div>
<div class="ttc" id="ccss_8c_html_a8bd1c39b4993f80f1bf674e3a1d717dd"><div class="ttname"><a href="../../d3/d5a/ccss_8c.html#a8bd1c39b4993f80f1bf674e3a1d717dd">suspend</a></div><div class="ttdeci">static void suspend(struct cc_core_instance *core_instance)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/ccss_8c_source.html#l03193">ccss.c:3193</a></div></div>
<div class="ttc" id="channel_8h_html_a050bec9a4abc1a599b6573a6091b080c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a050bec9a4abc1a599b6573a6091b080c">ast_waitfordigit</a></div><div class="ttdeci">int ast_waitfordigit(struct ast_channel *c, int ms)</div><div class="ttdoc">Waits for a digit. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03184">channel.c:3184</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390aa95eb913e6cbbac8a34e69905245fdf4"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa95eb913e6cbbac8a34e69905245fdf4">AST_CONTROL_STREAM_STOP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00333">include/asterisk/frame.h:333</a></div></div>
<div class="ttc" id="channel_8h_html_a9abe31fe40dcd03cd2957e5309e32ac6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a></div><div class="ttdeci">const char * ast_channel_language(const struct ast_channel *chan)</div></div>
<div class="ttc" id="file_8h_html_a3092bf11d4bba66f646562759608b1bc"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a></div><div class="ttdeci">int ast_stopstream(struct ast_channel *c)</div><div class="ttdoc">Stops a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00187">file.c:187</a></div></div>
<div class="ttc" id="file_8h_html_a1d269d89440f69d13458394efc73f2d2"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a1d269d89440f69d13458394efc73f2d2">ast_waitstream_fr_w_cb</a></div><div class="ttdeci">int ast_waitstream_fr_w_cb(struct ast_channel *c, const char *breakon, const char *forward, const char *rewind, int ms, ast_waitstream_fr_cb cb)</div><div class="ttdoc">Same as waitstream_fr but allows a callback to be alerted when a user fastforwards or rewinds the fil...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01734">file.c:1734</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a00f5bb2146302815137be471686d1b23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00f5bb2146302815137be471686d1b23">&#9670;&nbsp;</a></span>control_tone_frame_response()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../d3/d83/main_2app_8c.html#a8a71094a6fa4c99ee8ba96185eab3ea5">control_tone_frame_response_result</a> control_tone_frame_response </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>fr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/dab/structast__tone__zone__sound.html">ast_tone_zone_sound</a> *&#160;</td>
          <td class="paramname"><em>ts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>tone</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>paused</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a246">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01340">1340</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00282">AST_CONTROL_BUSY</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00285">AST_CONTROL_CONGESTION</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00278">AST_CONTROL_HANGUP</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00337">AST_CONTROL_STREAM_FORWARD</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00335">AST_CONTROL_STREAM_RESTART</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00336">AST_CONTROL_STREAM_REVERSE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00333">AST_CONTROL_STREAM_STOP</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00334">AST_CONTROL_STREAM_SUSPEND</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../df/d6e/indications_8c_source.html#l00302">ast_playtones_start()</a>, <a class="el" href="../../df/d6e/indications_8c_source.html#l00393">ast_playtones_stop()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01335">CONTROL_TONE_RESPONSE_FAILED</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01337">CONTROL_TONE_RESPONSE_FINISHED</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01336">CONTROL_TONE_RESPONSE_NORMAL</a>, <a class="el" href="../../d2/d0f/indications_8h_source.html#l00052">ast_tone_zone_sound::data</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">ast_frame_subclass::integer</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01399">ast_control_tone()</a>.</p>
<div class="fragment"><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;{</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;   <span class="keywordflow">switch</span> (fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>) {</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa95eb913e6cbbac8a34e69905245fdf4">AST_CONTROL_STREAM_STOP</a>:</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;      <a class="code" href="../../d2/d0f/indications_8h.html#a9d5be069b7060d326a213f5d60b8dc77">ast_playtones_stop</a>(chan);</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d3/d83/main_2app_8c.html#a8a71094a6fa4c99ee8ba96185eab3ea5aefb1f436a8fb0238eb8c6dcb092431f5">CONTROL_TONE_RESPONSE_FINISHED</a>;</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a32e9dbe9416e847668084be16d4698c9">AST_CONTROL_STREAM_SUSPEND</a>:</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;      <span class="keywordflow">if</span> (*paused) {</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;         *paused = 0;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d2/d0f/indications_8h.html#a544e8a1dd4a986b00754103dda6a7d3b">ast_playtones_start</a>(chan, 0, ts ? ts-&gt;<a class="code" href="../../d5/dab/structast__tone__zone__sound.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a> : tone, 0)) {</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../d3/d83/main_2app_8c.html#a8a71094a6fa4c99ee8ba96185eab3ea5a44b954d1e48690a36cb2e1a054132635">CONTROL_TONE_RESPONSE_FAILED</a>;</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;         }</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;         *paused = 1;</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;         <a class="code" href="../../d2/d0f/indications_8h.html#a9d5be069b7060d326a213f5d60b8dc77">ast_playtones_stop</a>(chan);</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;      }</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d3/d83/main_2app_8c.html#a8a71094a6fa4c99ee8ba96185eab3ea5a5818a4ce31515b52e000e1050d93c8c6">CONTROL_TONE_RESPONSE_NORMAL</a>;</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a32b72bba20e26bcd2d5a299c5d939bce">AST_CONTROL_STREAM_RESTART</a>:</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;      <a class="code" href="../../d2/d0f/indications_8h.html#a9d5be069b7060d326a213f5d60b8dc77">ast_playtones_stop</a>(chan);</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d2/d0f/indications_8h.html#a544e8a1dd4a986b00754103dda6a7d3b">ast_playtones_start</a>(chan, 0, ts ? ts-&gt;<a class="code" href="../../d5/dab/structast__tone__zone__sound.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a> : tone, 0)) {</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d3/d83/main_2app_8c.html#a8a71094a6fa4c99ee8ba96185eab3ea5a44b954d1e48690a36cb2e1a054132635">CONTROL_TONE_RESPONSE_FAILED</a>;</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;      }</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d3/d83/main_2app_8c.html#a8a71094a6fa4c99ee8ba96185eab3ea5a5818a4ce31515b52e000e1050d93c8c6">CONTROL_TONE_RESPONSE_NORMAL</a>;</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a4e1f998aacd5c878a02040883b846bd7">AST_CONTROL_STREAM_REVERSE</a>:</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Media control operation &#39;reverse&#39; not supported for media type &#39;tone&#39;\n&quot;</span>);</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d3/d83/main_2app_8c.html#a8a71094a6fa4c99ee8ba96185eab3ea5a5818a4ce31515b52e000e1050d93c8c6">CONTROL_TONE_RESPONSE_NORMAL</a>;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae8e6b1d91a861c33a3de923b24f54dec">AST_CONTROL_STREAM_FORWARD</a>:</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Media control operation &#39;forward&#39; not supported for media type &#39;tone&#39;\n&quot;</span>);</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d3/d83/main_2app_8c.html#a8a71094a6fa4c99ee8ba96185eab3ea5a5818a4ce31515b52e000e1050d93c8c6">CONTROL_TONE_RESPONSE_NORMAL</a>;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba">AST_CONTROL_HANGUP</a>:</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875">AST_CONTROL_BUSY</a>:</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a850bb06a1702741c93a3fd67cc9637ab">AST_CONTROL_CONGESTION</a>:</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d3/d83/main_2app_8c.html#a8a71094a6fa4c99ee8ba96185eab3ea5aefb1f436a8fb0238eb8c6dcb092431f5">CONTROL_TONE_RESPONSE_FINISHED</a>;</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;   }</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d83/main_2app_8c.html#a8a71094a6fa4c99ee8ba96185eab3ea5a5818a4ce31515b52e000e1050d93c8c6">CONTROL_TONE_RESPONSE_NORMAL</a>;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;}</div><div class="ttc" id="main_2app_8c_html_a8a71094a6fa4c99ee8ba96185eab3ea5a5818a4ce31515b52e000e1050d93c8c6"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a8a71094a6fa4c99ee8ba96185eab3ea5a5818a4ce31515b52e000e1050d93c8c6">CONTROL_TONE_RESPONSE_NORMAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01336">main/app.c:1336</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ae8e6b1d91a861c33a3de923b24f54dec"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae8e6b1d91a861c33a3de923b24f54dec">AST_CONTROL_STREAM_FORWARD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00337">include/asterisk/frame.h:337</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875">AST_CONTROL_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00282">include/asterisk/frame.h:282</a></div></div>
<div class="ttc" id="indications_8h_html_a9d5be069b7060d326a213f5d60b8dc77"><div class="ttname"><a href="../../d2/d0f/indications_8h.html#a9d5be069b7060d326a213f5d60b8dc77">ast_playtones_stop</a></div><div class="ttdeci">void ast_playtones_stop(struct ast_channel *chan)</div><div class="ttdoc">Stop playing tones on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d6e/indications_8c_source.html#l00393">indications.c:393</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a32e9dbe9416e847668084be16d4698c9"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a32e9dbe9416e847668084be16d4698c9">AST_CONTROL_STREAM_SUSPEND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00334">include/asterisk/frame.h:334</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_adece183191b0e700e039e59101e06105"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">ast_frame_subclass::integer</a></div><div class="ttdeci">int integer</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">include/asterisk/frame.h:152</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a32b72bba20e26bcd2d5a299c5d939bce"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a32b72bba20e26bcd2d5a299c5d939bce">AST_CONTROL_STREAM_RESTART</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00335">include/asterisk/frame.h:335</a></div></div>
<div class="ttc" id="main_2app_8c_html_a8a71094a6fa4c99ee8ba96185eab3ea5aefb1f436a8fb0238eb8c6dcb092431f5"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a8a71094a6fa4c99ee8ba96185eab3ea5aefb1f436a8fb0238eb8c6dcb092431f5">CONTROL_TONE_RESPONSE_FINISHED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01337">main/app.c:1337</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a4e1f998aacd5c878a02040883b846bd7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a4e1f998aacd5c878a02040883b846bd7">AST_CONTROL_STREAM_REVERSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00336">include/asterisk/frame.h:336</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa7dac1c1896ab418c2ff351aae707fba">AST_CONTROL_HANGUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00278">include/asterisk/frame.h:278</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390aa95eb913e6cbbac8a34e69905245fdf4"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa95eb913e6cbbac8a34e69905245fdf4">AST_CONTROL_STREAM_STOP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00333">include/asterisk/frame.h:333</a></div></div>
<div class="ttc" id="indications_8h_html_a544e8a1dd4a986b00754103dda6a7d3b"><div class="ttname"><a href="../../d2/d0f/indications_8h.html#a544e8a1dd4a986b00754103dda6a7d3b">ast_playtones_start</a></div><div class="ttdeci">int ast_playtones_start(struct ast_channel *chan, int vol, const char *tonelist, int interruptible)</div><div class="ttdoc">Start playing a list of tones on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d6e/indications_8c_source.html#l00302">indications.c:302</a></div></div>
<div class="ttc" id="structast__tone__zone__sound_html_a8f64897c7ccc5c13f276d1d07c4e7095"><div class="ttname"><a href="../../d5/dab/structast__tone__zone__sound.html#a8f64897c7ccc5c13f276d1d07c4e7095">ast_tone_zone_sound::data</a></div><div class="ttdeci">const char * data</div><div class="ttdoc">Description of a tone. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0f/indications_8h_source.html#l00052">indications.h:52</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a850bb06a1702741c93a3fd67cc9637ab"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a850bb06a1702741c93a3fd67cc9637ab">AST_CONTROL_CONGESTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00285">include/asterisk/frame.h:285</a></div></div>
<div class="ttc" id="main_2app_8c_html_a8a71094a6fa4c99ee8ba96185eab3ea5a44b954d1e48690a36cb2e1a054132635"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a8a71094a6fa4c99ee8ba96185eab3ea5a44b954d1e48690a36cb2e1a054132635">CONTROL_TONE_RESPONSE_FAILED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01335">main/app.c:1335</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a47f4c14a6af38c0332d1e7b5639ce3a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47f4c14a6af38c0332d1e7b5639ce3a1">&#9670;&nbsp;</a></span>dtmf_stream()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int dtmf_stream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>digits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>between</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>duration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>is_external</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a177">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00899">899</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d28/channel_8c_source.html#l08266">ast_channel_start_silence_generator()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l08312">ast_channel_stop_silence_generator()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00286">AST_CONTROL_FLASH</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04322">ast_indicate()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d7/d5b/options_8h_source.html#l00124">ast_opt_transmit_silence</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01574">ast_safe_sleep()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05019">ast_senddigit()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05032">ast_senddigit_external()</a>, <a class="el" href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">digit</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00830">external_sleep()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00981">ast_dtmf_stream()</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00996">ast_dtmf_stream_external()</a>.</p>
<div class="fragment"><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;{</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *ptr;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/da1/structast__silence__generator.html">ast_silence_generator</a> *silgen = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;   int (*my_sleep)(<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">int</span> ms);</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;   int (*my_senddigit)(<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">char</span> <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> duration);</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;   <span class="keywordflow">if</span> (is_external) {</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      my_sleep = <a class="code" href="../../d3/d83/main_2app_8c.html#a8a4b283e6ec48c7198ec3444e70c7398">external_sleep</a>;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;      my_senddigit = <a class="code" href="../../d5/d7b/channel_8h.html#a82a0d60133ec689b693bcbe296914c75">ast_senddigit_external</a>;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      my_sleep = <a class="code" href="../../d5/d7b/channel_8h.html#af10e3bd01602095e1908d3926afc3b76">ast_safe_sleep</a>;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;      my_senddigit = <a class="code" href="../../d5/d7b/channel_8h.html#a48a8b376caf908979e96af8641591c92">ast_senddigit</a>;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;   }</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;   <span class="keywordflow">if</span> (!between) {</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      between = 100;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;   }</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;   <span class="comment">/* Need a quiet time before sending digits. */</span></div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5b/options_8h.html#afe8795c4ec744506a9300700fc0813dc">ast_opt_transmit_silence</a>) {</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;      silgen = <a class="code" href="../../d5/d7b/channel_8h.html#a2a2e0ff24c57491a877cac39cb670024">ast_channel_start_silence_generator</a>(chan);</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;   }</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;   res = my_sleep(chan, 100);</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;      <span class="keywordflow">goto</span> dtmf_stream_cleanup;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;   }</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;   <span class="keywordflow">for</span> (ptr = digits; *ptr; ptr++) {</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      <span class="keywordflow">if</span> (*ptr == <span class="charliteral">&#39;w&#39;</span>) {</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;         <span class="comment">/* &#39;w&#39; -- wait half a second */</span></div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;         res = my_sleep(chan, 500);</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;         <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;         }</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*ptr == <span class="charliteral">&#39;W&#39;</span>) {</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;         <span class="comment">/* &#39;W&#39; -- wait a second */</span></div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;         res = my_sleep(chan, 1000);</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;         <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;         }</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strchr(<span class="stringliteral">&quot;0123456789*#abcdfABCDF&quot;</span>, *ptr)) {</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;         <span class="keywordflow">if</span> (*ptr == <span class="charliteral">&#39;f&#39;</span> || *ptr == <span class="charliteral">&#39;F&#39;</span>) {</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;            <span class="comment">/* ignore return values if not supported by channel */</span></div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(chan, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae8f2cd460fdc81e0a774434fa002e4bf">AST_CONTROL_FLASH</a>);</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;            <span class="comment">/* Character represents valid DTMF */</span></div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;            my_senddigit(chan, *ptr, duration);</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;         }</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;         <span class="comment">/* pause between digits */</span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;         res = my_sleep(chan, between);</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;         <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;         }</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Illegal DTMF character &#39;%c&#39; in string. (0-9*#aAbBcCdD allowed)\n&quot;</span>, *ptr);</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;      }</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;   }</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;dtmf_stream_cleanup:</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;   <span class="keywordflow">if</span> (silgen) {</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a6643cbe766a051d2d06750ab5b3e933d">ast_channel_stop_silence_generator</a>(chan, silgen);</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;   }</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;}</div><div class="ttc" id="channel_8h_html_af10e3bd01602095e1908d3926afc3b76"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af10e3bd01602095e1908d3926afc3b76">ast_safe_sleep</a></div><div class="ttdeci">int ast_safe_sleep(struct ast_channel *chan, int ms)</div><div class="ttdoc">Wait for a specified amount of time, looking for hangups. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01574">channel.c:1574</a></div></div>
<div class="ttc" id="app__alarmreceiver_8c_html_ac2c887b7f7b359bfdda8a128980f5081"><div class="ttname"><a href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a></div><div class="ttdeci">char digit</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">app_alarmreceiver.c:131</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ae8f2cd460fdc81e0a774434fa002e4bf"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae8f2cd460fdc81e0a774434fa002e4bf">AST_CONTROL_FLASH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00286">include/asterisk/frame.h:286</a></div></div>
<div class="ttc" id="structast__silence__generator_html"><div class="ttname"><a href="../../d9/da1/structast__silence__generator.html">ast_silence_generator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08262">channel.c:8262</a></div></div>
<div class="ttc" id="channel_8h_html_aef2af15a597c948e97628da6c5c84f28"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a></div><div class="ttdeci">int ast_indicate(struct ast_channel *chan, int condition)</div><div class="ttdoc">Indicates condition of channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04322">channel.c:4322</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="channel_8h_html_a82a0d60133ec689b693bcbe296914c75"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82a0d60133ec689b693bcbe296914c75">ast_senddigit_external</a></div><div class="ttdeci">int ast_senddigit_external(struct ast_channel *chan, char digit, unsigned int duration)</div><div class="ttdoc">Send a DTMF digit to a channel from an external thread. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05032">channel.c:5032</a></div></div>
<div class="ttc" id="options_8h_html_afe8795c4ec744506a9300700fc0813dc"><div class="ttname"><a href="../../d7/d5b/options_8h.html#afe8795c4ec744506a9300700fc0813dc">ast_opt_transmit_silence</a></div><div class="ttdeci">#define ast_opt_transmit_silence</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00124">options.h:124</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="channel_8h_html_a48a8b376caf908979e96af8641591c92"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a48a8b376caf908979e96af8641591c92">ast_senddigit</a></div><div class="ttdeci">int ast_senddigit(struct ast_channel *chan, char digit, unsigned int duration)</div><div class="ttdoc">Send a DTMF digit to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05019">channel.c:5019</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="channel_8h_html_a2a2e0ff24c57491a877cac39cb670024"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a2a2e0ff24c57491a877cac39cb670024">ast_channel_start_silence_generator</a></div><div class="ttdeci">struct ast_silence_generator * ast_channel_start_silence_generator(struct ast_channel *chan)</div><div class="ttdoc">Starts a silence generator on the given channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08266">channel.c:8266</a></div></div>
<div class="ttc" id="channel_8h_html_a6643cbe766a051d2d06750ab5b3e933d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6643cbe766a051d2d06750ab5b3e933d">ast_channel_stop_silence_generator</a></div><div class="ttdeci">void ast_channel_stop_silence_generator(struct ast_channel *chan, struct ast_silence_generator *state)</div><div class="ttdoc">Stops a previously-started silence generator on the given channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08312">channel.c:8312</a></div></div>
<div class="ttc" id="main_2app_8c_html_a8a4b283e6ec48c7198ec3444e70c7398"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a8a4b283e6ec48c7198ec3444e70c7398">external_sleep</a></div><div class="ttdeci">static int external_sleep(struct ast_channel *chan, int ms)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00830">main/app.c:830</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8a4b283e6ec48c7198ec3444e70c7398"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a4b283e6ec48c7198ec3444e70c7398">&#9670;&nbsp;</a></span>external_sleep()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int external_sleep </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a165">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00830">830</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00899">dtmf_stream()</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00836">mf_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;{</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;   usleep(ms * 1000);</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="af708a8d2a35e2699cd5b4851c20110e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af708a8d2a35e2699cd5b4851c20110e1">&#9670;&nbsp;</a></span>ivr_dispatch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ivr_dispatch </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d1/d18/structast__ivr__option.html">ast_ivr_option</a> *&#160;</td>
          <td class="paramname"><em>option</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>exten</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>cbdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a381">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02590">2590</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00076">ast_ivr_option::action</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00077">ast_ivr_option::adata</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00054">AST_ACTION_BACKGROUND</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00062">AST_ACTION_BACKLIST</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00052">AST_ACTION_CALLBACK</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00051">AST_ACTION_EXIT</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00056">AST_ACTION_MENU</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00061">AST_ACTION_NOOP</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00053">AST_ACTION_PLAYBACK</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00055">AST_ACTION_PLAYLIST</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00057">AST_ACTION_REPEAT</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00058">AST_ACTION_RESTART</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00059">AST_ACTION_TRANSFER</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00050">AST_ACTION_UPONE</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00060">AST_ACTION_WAITOPTION</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00721">ast_channel_pbx()</a>, <a class="el" href="../../d2/d4d/file_8h_source.html#l00048">AST_DIGIT_ANY</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02700">ast_ivr_menu_run_internal()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l08859">ast_parseable_goto()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00187">ast_stopstream()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01814">ast_stream_and_wait()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l03184">ast_waitfordigit()</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02584">RES_EXIT</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02585">RES_REPEAT</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02586">RES_RESTART</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02583">RES_UPONE</a>, and <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02700">ast_ivr_menu_run_internal()</a>.</p>
<div class="fragment"><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;{</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;   int (*ivr_func)(<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, <span class="keywordtype">void</span> *);</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;   <span class="keywordtype">char</span> *n;</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;   <span class="keywordflow">switch</span> (option-&gt;<a class="code" href="../../d1/d18/structast__ivr__option.html#af5aafe3716e15fcb2fb46ac4a7dc10d1">action</a>) {</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a23d56e69a479b44ce2f89034fda4ed9a">AST_ACTION_UPONE</a>:</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d3/d83/main_2app_8c.html#a99e8fc9c191dce9a869c02541d31d178">RES_UPONE</a>;</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a9f49762cd1386370ddc2f8fc64965b88">AST_ACTION_EXIT</a>:</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d3/d83/main_2app_8c.html#ac68f484b9b363ef1c76def178529aadf">RES_EXIT</a> | (((<span class="keywordtype">unsigned</span> long)(option-&gt;<a class="code" href="../../d1/d18/structast__ivr__option.html#a473bb69c3a842a12c60b111dc807bf64">adata</a>)) &amp; 0xffff);</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5ae951cfbea814df40816b70a1eeba65e8">AST_ACTION_REPEAT</a>:</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d3/d83/main_2app_8c.html#add236e92599b4e2157db3bb1fc4a2757">RES_REPEAT</a> | (((<span class="keywordtype">unsigned</span> long)(option-&gt;<a class="code" href="../../d1/d18/structast__ivr__option.html#a473bb69c3a842a12c60b111dc807bf64">adata</a>)) &amp; 0xffff);</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a53ddb6911a10ea526b86f4cde6b2ce80">AST_ACTION_RESTART</a>:</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d3/d83/main_2app_8c.html#afe510b02adee23bac957dd9db3333dba">RES_RESTART</a> ;</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a9470126e5a37e3044d577f6ba1140644">AST_ACTION_NOOP</a>:</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5ab738e4ae4a7e6b7cd68b13d2a58985ba">AST_ACTION_BACKGROUND</a>:</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;      res = <a class="code" href="../../d2/d4d/file_8h.html#a95b94a020720147325a486e210b36775">ast_stream_and_wait</a>(chan, (<span class="keywordtype">char</span> *)option-&gt;<a class="code" href="../../d1/d18/structast__ivr__option.html#a473bb69c3a842a12c60b111dc807bf64">adata</a>, <a class="code" href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a>);</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;      <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Unable to find file &#39;%s&#39;!\n&quot;</span>, (<span class="keywordtype">char</span> *)option-&gt;<a class="code" href="../../d1/d18/structast__ivr__option.html#a473bb69c3a842a12c60b111dc807bf64">adata</a>);</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;         res = 0;</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;      }</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;      <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a4bd0306ccd5256f1b150ec9b1d220f0f">AST_ACTION_PLAYBACK</a>:</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;      res = <a class="code" href="../../d2/d4d/file_8h.html#a95b94a020720147325a486e210b36775">ast_stream_and_wait</a>(chan, (<span class="keywordtype">char</span> *)option-&gt;<a class="code" href="../../d1/d18/structast__ivr__option.html#a473bb69c3a842a12c60b111dc807bf64">adata</a>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;      <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Unable to find file &#39;%s&#39;!\n&quot;</span>, (<span class="keywordtype">char</span> *)option-&gt;<a class="code" href="../../d1/d18/structast__ivr__option.html#a473bb69c3a842a12c60b111dc807bf64">adata</a>);</div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;         res = 0;</div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;      }</div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;      <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5adc38e521e86969765c95912988cf6e2a">AST_ACTION_MENU</a>:</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;      <span class="keywordflow">if</span> ((res = <a class="code" href="../../d3/d83/main_2app_8c.html#a09ef1fec8abab2315272f9300705ef04">ast_ivr_menu_run_internal</a>(chan, (<span class="keyword">struct</span> <a class="code" href="../../dd/d62/structast__ivr__menu.html">ast_ivr_menu</a> *)option-&gt;<a class="code" href="../../d1/d18/structast__ivr__option.html#a473bb69c3a842a12c60b111dc807bf64">adata</a>, cbdata)) == -2) {</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;         <span class="comment">/* Do not pass entry errors back up, treat as though it was an &quot;UPONE&quot; */</span></div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;         res = 0;</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;      }</div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;      <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5ac8b97828ca2347ecf4bf942478ddf0ba">AST_ACTION_WAITOPTION</a>:</div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;      <span class="keywordflow">if</span> (!(res = <a class="code" href="../../d5/d7b/channel_8h.html#a050bec9a4abc1a599b6573a6091b080c">ast_waitfordigit</a>(chan, <a class="code" href="../../d5/d7b/channel_8h.html#a488b7d6f7488bedc53be45d4ef4471c9">ast_channel_pbx</a>(chan) ? <a class="code" href="../../d5/d7b/channel_8h.html#a488b7d6f7488bedc53be45d4ef4471c9">ast_channel_pbx</a>(chan)-&gt;rtimeoutms : 10000))) {</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;         <span class="keywordflow">return</span> <span class="charliteral">&#39;t&#39;</span>;</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;      }</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;      <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a911a0be3e05292936e4e6f8646194f7f">AST_ACTION_CALLBACK</a>:</div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;      ivr_func = option-&gt;<a class="code" href="../../d1/d18/structast__ivr__option.html#a473bb69c3a842a12c60b111dc807bf64">adata</a>;</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;      res = ivr_func(chan, cbdata);</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;      <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5af34630ccb66618ee9dfef4d14423a6d0">AST_ACTION_TRANSFER</a>:</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;      res = <a class="code" href="../../db/de0/pbx_8h.html#ae9b65b0515d88371a5293dd354bfd92f">ast_parseable_goto</a>(chan, option-&gt;<a class="code" href="../../d1/d18/structast__ivr__option.html#a473bb69c3a842a12c60b111dc807bf64">adata</a>);</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a5a5e2a82ee86aab6a69decbb02514e68">AST_ACTION_PLAYLIST</a>:</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a363ce24d1bbcbf4687e4fd21aa1ee621">AST_ACTION_BACKLIST</a>:</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;      res = 0;</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;      c = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(option-&gt;<a class="code" href="../../d1/d18/structast__ivr__option.html#a473bb69c3a842a12c60b111dc807bf64">adata</a>);</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;      <span class="keywordflow">while</span> ((n = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;c, <span class="stringliteral">&quot;;&quot;</span>))) {</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;         <span class="keywordflow">if</span> ((res = <a class="code" href="../../d2/d4d/file_8h.html#a95b94a020720147325a486e210b36775">ast_stream_and_wait</a>(chan, n,</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;               (option-&gt;<a class="code" href="../../d1/d18/structast__ivr__option.html#af5aafe3716e15fcb2fb46ac4a7dc10d1">action</a> == <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a363ce24d1bbcbf4687e4fd21aa1ee621">AST_ACTION_BACKLIST</a>) ? <a class="code" href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a> : <span class="stringliteral">&quot;&quot;</span>))) {</div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;         }</div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;      }</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;      <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(chan);</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;      <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Unknown dispatch function %u, ignoring!\n&quot;</span>, option-&gt;<a class="code" href="../../d1/d18/structast__ivr__option.html#af5aafe3716e15fcb2fb46ac4a7dc10d1">action</a>);</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;   }</div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="main_2app_8c_html_ac68f484b9b363ef1c76def178529aadf"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#ac68f484b9b363ef1c76def178529aadf">RES_EXIT</a></div><div class="ttdeci">#define RES_EXIT</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02584">main/app.c:2584</a></div></div>
<div class="ttc" id="structast__ivr__option_html_af5aafe3716e15fcb2fb46ac4a7dc10d1"><div class="ttname"><a href="../../d1/d18/structast__ivr__option.html#af5aafe3716e15fcb2fb46ac4a7dc10d1">ast_ivr_option::action</a></div><div class="ttdeci">ast_ivr_action action</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00076">include/asterisk/app.h:76</a></div></div>
<div class="ttc" id="file_8h_html_afa92b0106fb7a918ea994c2867ac0a04"><div class="ttname"><a href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a></div><div class="ttdeci">#define AST_DIGIT_ANY</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00048">file.h:48</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ad4d301d1d98ab8020c6104e3fb58e2d5a53ddb6911a10ea526b86f4cde6b2ce80"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a53ddb6911a10ea526b86f4cde6b2ce80">AST_ACTION_RESTART</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00058">include/asterisk/app.h:58</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ad4d301d1d98ab8020c6104e3fb58e2d5a23d56e69a479b44ce2f89034fda4ed9a"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a23d56e69a479b44ce2f89034fda4ed9a">AST_ACTION_UPONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00050">include/asterisk/app.h:50</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="main_2app_8c_html_a09ef1fec8abab2315272f9300705ef04"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a09ef1fec8abab2315272f9300705ef04">ast_ivr_menu_run_internal</a></div><div class="ttdeci">static int ast_ivr_menu_run_internal(struct ast_channel *chan, struct ast_ivr_menu *menu, void *cbdata)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02700">main/app.c:2700</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ad4d301d1d98ab8020c6104e3fb58e2d5ab738e4ae4a7e6b7cd68b13d2a58985ba"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5ab738e4ae4a7e6b7cd68b13d2a58985ba">AST_ACTION_BACKGROUND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00054">include/asterisk/app.h:54</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ad4d301d1d98ab8020c6104e3fb58e2d5af34630ccb66618ee9dfef4d14423a6d0"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5af34630ccb66618ee9dfef4d14423a6d0">AST_ACTION_TRANSFER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00059">include/asterisk/app.h:59</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ad4d301d1d98ab8020c6104e3fb58e2d5ac8b97828ca2347ecf4bf942478ddf0ba"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5ac8b97828ca2347ecf4bf942478ddf0ba">AST_ACTION_WAITOPTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00060">include/asterisk/app.h:60</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ad4d301d1d98ab8020c6104e3fb58e2d5a9470126e5a37e3044d577f6ba1140644"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a9470126e5a37e3044d577f6ba1140644">AST_ACTION_NOOP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00061">include/asterisk/app.h:61</a></div></div>
<div class="ttc" id="structast__ivr__option_html_a473bb69c3a842a12c60b111dc807bf64"><div class="ttname"><a href="../../d1/d18/structast__ivr__option.html#a473bb69c3a842a12c60b111dc807bf64">ast_ivr_option::adata</a></div><div class="ttdeci">void * adata</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00077">include/asterisk/app.h:77</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="channel_8h_html_a488b7d6f7488bedc53be45d4ef4471c9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a488b7d6f7488bedc53be45d4ef4471c9">ast_channel_pbx</a></div><div class="ttdeci">struct ast_pbx * ast_channel_pbx(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00721">channel_internal_api.c:721</a></div></div>
<div class="ttc" id="pbx_8h_html_ae9b65b0515d88371a5293dd354bfd92f"><div class="ttname"><a href="../../db/de0/pbx_8h.html#ae9b65b0515d88371a5293dd354bfd92f">ast_parseable_goto</a></div><div class="ttdeci">int ast_parseable_goto(struct ast_channel *chan, const char *goto_string)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l08859">pbx.c:8859</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ad4d301d1d98ab8020c6104e3fb58e2d5a4bd0306ccd5256f1b150ec9b1d220f0f"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a4bd0306ccd5256f1b150ec9b1d220f0f">AST_ACTION_PLAYBACK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00053">include/asterisk/app.h:53</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="main_2app_8c_html_add236e92599b4e2157db3bb1fc4a2757"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#add236e92599b4e2157db3bb1fc4a2757">RES_REPEAT</a></div><div class="ttdeci">#define RES_REPEAT</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02585">main/app.c:2585</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ad4d301d1d98ab8020c6104e3fb58e2d5ae951cfbea814df40816b70a1eeba65e8"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5ae951cfbea814df40816b70a1eeba65e8">AST_ACTION_REPEAT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00057">include/asterisk/app.h:57</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ad4d301d1d98ab8020c6104e3fb58e2d5a5a5e2a82ee86aab6a69decbb02514e68"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a5a5e2a82ee86aab6a69decbb02514e68">AST_ACTION_PLAYLIST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00055">include/asterisk/app.h:55</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="file_8h_html_a95b94a020720147325a486e210b36775"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a95b94a020720147325a486e210b36775">ast_stream_and_wait</a></div><div class="ttdeci">int ast_stream_and_wait(struct ast_channel *chan, const char *file, const char *digits)</div><div class="ttdoc">stream file until digit If the file name is non-empty, try to play it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01814">file.c:1814</a></div></div>
<div class="ttc" id="main_2app_8c_html_a99e8fc9c191dce9a869c02541d31d178"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a99e8fc9c191dce9a869c02541d31d178">RES_UPONE</a></div><div class="ttdeci">#define RES_UPONE</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02583">main/app.c:2583</a></div></div>
<div class="ttc" id="channel_8h_html_a050bec9a4abc1a599b6573a6091b080c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a050bec9a4abc1a599b6573a6091b080c">ast_waitfordigit</a></div><div class="ttdeci">int ast_waitfordigit(struct ast_channel *c, int ms)</div><div class="ttdoc">Waits for a digit. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03184">channel.c:3184</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ad4d301d1d98ab8020c6104e3fb58e2d5a9f49762cd1386370ddc2f8fc64965b88"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a9f49762cd1386370ddc2f8fc64965b88">AST_ACTION_EXIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00051">include/asterisk/app.h:51</a></div></div>
<div class="ttc" id="structast__ivr__menu_html"><div class="ttname"><a href="../../dd/d62/structast__ivr__menu.html">ast_ivr_menu</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00080">include/asterisk/app.h:80</a></div></div>
<div class="ttc" id="main_2app_8c_html_afe510b02adee23bac957dd9db3333dba"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#afe510b02adee23bac957dd9db3333dba">RES_RESTART</a></div><div class="ttdeci">#define RES_RESTART</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02586">main/app.c:2586</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ad4d301d1d98ab8020c6104e3fb58e2d5a911a0be3e05292936e4e6f8646194f7f"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a911a0be3e05292936e4e6f8646194f7f">AST_ACTION_CALLBACK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00052">include/asterisk/app.h:52</a></div></div>
<div class="ttc" id="file_8h_html_a3092bf11d4bba66f646562759608b1bc"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a></div><div class="ttdeci">int ast_stopstream(struct ast_channel *c)</div><div class="ttdoc">Stops a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00187">file.c:187</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ad4d301d1d98ab8020c6104e3fb58e2d5a363ce24d1bbcbf4687e4fd21aa1ee621"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5a363ce24d1bbcbf4687e4fd21aa1ee621">AST_ACTION_BACKLIST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00062">include/asterisk/app.h:62</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ad4d301d1d98ab8020c6104e3fb58e2d5adc38e521e86969765c95912988cf6e2a"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ad4d301d1d98ab8020c6104e3fb58e2d5adc38e521e86969765c95912988cf6e2a">AST_ACTION_MENU</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00056">include/asterisk/app.h:56</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9917c0ec59881e0ae404e044bf8628cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9917c0ec59881e0ae404e044bf8628cb">&#9670;&nbsp;</a></span>linear_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* linear_alloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a205">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01055">1055</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01004">linear_state::allowoverride</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01260">ast_channel_flags()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00860">ast_channel_writeformat()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00077">ast_clear_flag</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00984">AST_FLAG_WRITE_INT</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00041">ast_format_slin</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05890">ast_set_write_format()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01005">linear_state::origwfmt</a>.</p>
<div class="fragment"><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;{</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d07/structlinear__state.html">linear_state</a> *ls = params;</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;   <span class="keywordflow">if</span> (!params) {</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;   }</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;   <span class="comment">/* In this case, params is already malloc&#39;d */</span></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;   <span class="keywordflow">if</span> (ls-&gt;<a class="code" href="../../db/d07/structlinear__state.html#ab6d0ae4f4fba3a46c253a118a8d1bf72">allowoverride</a>) {</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a9deec175d13a40a6a5fdb527b13c6878">AST_FLAG_WRITE_INT</a>);</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a9deec175d13a40a6a5fdb527b13c6878">AST_FLAG_WRITE_INT</a>);</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;   }</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;   ls-&gt;<a class="code" href="../../db/d07/structlinear__state.html#a67c7e065450c2a224e067625e9cdaa0c">origwfmt</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a>(chan));</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#abbdfb98077180544657b2d16c5d25f74">ast_set_write_format</a>(chan, <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>)) {</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to set &#39;%s&#39; to linear format (write)\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(ls-&gt;<a class="code" href="../../db/d07/structlinear__state.html#a67c7e065450c2a224e067625e9cdaa0c">origwfmt</a>);</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(ls);</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;      ls = params = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;   }</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;   <span class="keywordflow">return</span> params;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;}</div><div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="channel_8h_html_abbdfb98077180544657b2d16c5d25f74"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abbdfb98077180544657b2d16c5d25f74">ast_set_write_format</a></div><div class="ttdeci">int ast_set_write_format(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdoc">Sets write format on channel chan. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05890">channel.c:5890</a></div></div>
<div class="ttc" id="structlinear__state_html_a67c7e065450c2a224e067625e9cdaa0c"><div class="ttname"><a href="../../db/d07/structlinear__state.html#a67c7e065450c2a224e067625e9cdaa0c">linear_state::origwfmt</a></div><div class="ttdeci">struct ast_format * origwfmt</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01005">main/app.c:1005</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5a9deec175d13a40a6a5fdb527b13c6878"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a9deec175d13a40a6a5fdb527b13c6878">AST_FLAG_WRITE_INT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00984">channel.h:984</a></div></div>
<div class="ttc" id="structlinear__state_html_ab6d0ae4f4fba3a46c253a118a8d1bf72"><div class="ttname"><a href="../../db/d07/structlinear__state.html#ab6d0ae4f4fba3a46c253a118a8d1bf72">linear_state::allowoverride</a></div><div class="ttdeci">int allowoverride</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01004">main/app.c:1004</a></div></div>
<div class="ttc" id="utils_8h_html_a7b260320610a09017a9416398acd0a70"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a></div><div class="ttdeci">#define ast_clear_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00077">utils.h:77</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="structlinear__state_html"><div class="ttname"><a href="../../db/d07/structlinear__state.html">linear_state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01001">main/app.c:1001</a></div></div>
<div class="ttc" id="channel_8h_html_a91de92158876186d28ba1773877f2732"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a></div><div class="ttdeci">struct ast_flags * ast_channel_flags(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01260">channel_internal_api.c:1260</a></div></div>
<div class="ttc" id="format__cache_8h_html_a771d7c34570e8e492c25a0c2eb41889d"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a></div><div class="ttdeci">struct ast_format * ast_format_slin</div><div class="ttdoc">Built-in cached signed linear 8kHz format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00041">format_cache.c:41</a></div></div>
<div class="ttc" id="channel_8h_html_a1dc625bd14a7875b04bfe0c388858929"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a></div><div class="ttdeci">struct ast_format * ast_channel_writeformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00860">channel_internal_api.c:860</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3c664af67de1b256b0fa742ec5b8fff2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c664af67de1b256b0fa742ec5b8fff2">&#9670;&nbsp;</a></span>linear_generator()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int linear_generator </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>samples</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a192">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01025">1025</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00041">ast_format_slin</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">AST_FRAME_VOICE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00229">AST_FRIENDLY_OFFSET</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05189">ast_write()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01002">linear_state::fd</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">ast_frame_subclass::format</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">ast_frame::samples</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>.</p>
<div class="fragment"><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;{</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;   <span class="keywordtype">short</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[2048 + <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a> / 2];</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d07/structlinear__state.html">linear_state</a> *ls = data;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> f = {</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;      .<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>,</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;      .data.ptr = buf + <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a> / 2,</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;      .offset = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a>,</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;   };</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;   f.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a> = <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;   <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = <a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> * 2;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> &gt; <span class="keyword">sizeof</span>(buf) - <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a>) {</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Can&#39;t generate %d bytes of data!\n&quot;</span> , <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>);</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;      <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = <span class="keyword">sizeof</span>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>) - <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a>;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;   }</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;   res = read(ls-&gt;<a class="code" href="../../db/d07/structlinear__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, buf + <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a>/2, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>);</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;   <span class="keywordflow">if</span> (res &gt; 0) {</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;      f.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> = res;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;      f.<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> = res / 2;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a79c413d51b7135404d5cacf811649a61">ast_write</a>(chan, &amp;f);</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;      <span class="keywordflow">if</span> (res == <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>) {</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      }</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;   }</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">include/asterisk/frame.h:101</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ac8f7380b8620c80443286b44481f641c"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a></div><div class="ttdeci">#define AST_FRIENDLY_OFFSET</div><div class="ttdoc">Offset into a frame&amp;#39;s data buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00229">include/asterisk/frame.h:229</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="channel_8h_html_a79c413d51b7135404d5cacf811649a61"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a79c413d51b7135404d5cacf811649a61">ast_write</a></div><div class="ttdeci">int ast_write(struct ast_channel *chan, struct ast_frame *frame)</div><div class="ttdoc">Write a frame to a channel This function writes the given frame to the indicated channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05189">channel.c:5189</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="structlinear__state_html"><div class="ttname"><a href="../../db/d07/structlinear__state.html">linear_state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01001">main/app.c:1001</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">ast_frame_subclass::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">include/asterisk/frame.h:155</a></div></div>
<div class="ttc" id="format__cache_8h_html_a771d7c34570e8e492c25a0c2eb41889d"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a></div><div class="ttdeci">struct ast_format * ast_format_slin</div><div class="ttdoc">Built-in cached signed linear 8kHz format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00041">format_cache.c:41</a></div></div>
<div class="ttc" id="structast__frame_html_a37672e6b906143604cefd3e959777b31"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">ast_frame::samples</a></div><div class="ttdeci">int samples</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">include/asterisk/frame.h:173</a></div></div>
<div class="ttc" id="structlinear__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../db/d07/structlinear__state.html#a6f8059414f0228f0256115e024eeed4b">linear_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01002">main/app.c:1002</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afc3d301641817be1e994258ceb1960c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc3d301641817be1e994258ceb1960c4">&#9670;&nbsp;</a></span>linear_release()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void linear_release </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a186">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01008">1008</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00334">ast_format_get_name()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05890">ast_set_write_format()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01003">linear_state::autoclose</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01002">linear_state::fd</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01005">linear_state::origwfmt</a>.</p>
<div class="fragment"><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;{</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d07/structlinear__state.html">linear_state</a> *ls = params;</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;   <span class="keywordflow">if</span> (ls-&gt;<a class="code" href="../../db/d07/structlinear__state.html#a67c7e065450c2a224e067625e9cdaa0c">origwfmt</a> &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#abbdfb98077180544657b2d16c5d25f74">ast_set_write_format</a>(chan, ls-&gt;<a class="code" href="../../db/d07/structlinear__state.html#a67c7e065450c2a224e067625e9cdaa0c">origwfmt</a>)) {</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to restore channel &#39;%s&#39; to format &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(ls-&gt;<a class="code" href="../../db/d07/structlinear__state.html#a67c7e065450c2a224e067625e9cdaa0c">origwfmt</a>));</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;   }</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(ls-&gt;<a class="code" href="../../db/d07/structlinear__state.html#a67c7e065450c2a224e067625e9cdaa0c">origwfmt</a>);</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;   <span class="keywordflow">if</span> (ls-&gt;<a class="code" href="../../db/d07/structlinear__state.html#a766c6d52861f6f0ddb14b6d579ecb331">autoclose</a>) {</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;      close(ls-&gt;<a class="code" href="../../db/d07/structlinear__state.html#a6f8059414f0228f0256115e024eeed4b">fd</a>);</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;   }</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(params);</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="format_8h_html_a082f0fca94b18ba466f6e28d3ccb2fc8"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a></div><div class="ttdeci">const char * ast_format_get_name(const struct ast_format *format)</div><div class="ttdoc">Get the name associated with a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00334">format.c:334</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structlinear__state_html_a766c6d52861f6f0ddb14b6d579ecb331"><div class="ttname"><a href="../../db/d07/structlinear__state.html#a766c6d52861f6f0ddb14b6d579ecb331">linear_state::autoclose</a></div><div class="ttdeci">int autoclose</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01003">main/app.c:1003</a></div></div>
<div class="ttc" id="channel_8h_html_abbdfb98077180544657b2d16c5d25f74"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abbdfb98077180544657b2d16c5d25f74">ast_set_write_format</a></div><div class="ttdeci">int ast_set_write_format(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdoc">Sets write format on channel chan. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05890">channel.c:5890</a></div></div>
<div class="ttc" id="structlinear__state_html_a67c7e065450c2a224e067625e9cdaa0c"><div class="ttname"><a href="../../db/d07/structlinear__state.html#a67c7e065450c2a224e067625e9cdaa0c">linear_state::origwfmt</a></div><div class="ttdeci">struct ast_format * origwfmt</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01005">main/app.c:1005</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="structlinear__state_html"><div class="ttname"><a href="../../db/d07/structlinear__state.html">linear_state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01001">main/app.c:1001</a></div></div>
<div class="ttc" id="structlinear__state_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../db/d07/structlinear__state.html#a6f8059414f0228f0256115e024eeed4b">linear_state::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01002">main/app.c:1002</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acebf42e1b2956855f73e9dd7ef66d785"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acebf42e1b2956855f73e9dd7ef66d785">&#9670;&nbsp;</a></span>make_silence()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a>* make_silence </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>orig</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct a silence frame of the same duration as <em>orig</em>. </p>
<p>The <em>orig</em> frame must be AST_FORMAT_SLINEAR.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">orig</td><td>Frame as basis for silence to generate. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>New frame of silence; free with <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree()</a>. </dd>
<dd>
<code>NULL</code> on error. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a265">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01494">1494</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00201">ast_format_cmp()</a>, <a class="el" href="../../d0/d0a/format_8h_source.html#l00038">AST_FORMAT_CMP_NOT_EQUAL</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00041">ast_format_slin</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">AST_FRAME_VOICE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00438">AST_LIST_NEXT</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00233">AST_MALLOCD_HDR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">ast_frame_subclass::format</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00175">ast_frame::mallocd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">ast_frame::ptr</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">ast_frame::samples</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01580">__ast_play_and_record()</a>.</p>
<div class="fragment"><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;{</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *silence;</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;   <span class="keywordtype">size_t</span> size;</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;   <span class="keywordtype">size_t</span> <a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>;</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;   <span class="keywordtype">size_t</span> <a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> = 0;</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;   <span class="keywordflow">if</span> (!orig) {</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;   }</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;   <span class="keywordflow">do</span> {</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(orig-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a>) {</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Attempting to silence non-slin frame\n&quot;</span>);</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;      }</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;      samples += orig-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>;</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;      orig = <a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(orig, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;   } <span class="keywordflow">while</span> (orig);</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;Silencing %zu samples\n&quot;</span>, samples);</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;   datalen = <span class="keyword">sizeof</span>(short) * samples;</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;   size = <span class="keyword">sizeof</span>(*silence) + <a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>;</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;   silence = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, size);</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;   <span class="keywordflow">if</span> (!silence) {</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;   }</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;   silence-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aed16590d48f41d89f31e0cf347f5cd99">mallocd</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a22c49dfda592a2adb1fbaeaaa6ed3b7f">AST_MALLOCD_HDR</a>;</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;   silence-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>;</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;   silence-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a> = (<span class="keywordtype">void</span> *)(silence + 1);</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;   silence-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> = <a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>;</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;   silence-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> = <a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>;</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;   silence-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(<a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>);</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;   <span class="keywordflow">return</span> silence;</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;}</div><div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">include/asterisk/frame.h:101</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ae234825bcb65b88c0554b995ff1b8ba6"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a></div><div class="ttdeci">#define AST_LIST_NEXT(elm, field)</div><div class="ttdoc">Returns the next entry in the list after the given entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00438">linkedlists.h:438</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a22c49dfda592a2adb1fbaeaaa6ed3b7f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a22c49dfda592a2adb1fbaeaaa6ed3b7f">AST_MALLOCD_HDR</a></div><div class="ttdeci">#define AST_MALLOCD_HDR</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00233">include/asterisk/frame.h:233</a></div></div>
<div class="ttc" id="format_8h_html_a738c58eca291b71de4422e95bff27400"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a></div><div class="ttdeci">enum ast_format_cmp_res ast_format_cmp(const struct ast_format *format1, const struct ast_format *format2)</div><div class="ttdoc">Compare two formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00201">format.c:201</a></div></div>
<div class="ttc" id="format_8h_html_a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0a/format_8h_source.html#l00038">format.h:38</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="structframe__list_html"><div class="ttname"><a href="../../d9/d42/structframe__list.html">frame_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00590">res_rtp_asterisk.c:590</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structast__frame_html_aed16590d48f41d89f31e0cf347f5cd99"><div class="ttname"><a href="../../d0/d99/structast__frame.html#aed16590d48f41d89f31e0cf347f5cd99">ast_frame::mallocd</a></div><div class="ttdeci">int mallocd</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00175">include/asterisk/frame.h:175</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">ast_frame_subclass::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">include/asterisk/frame.h:155</a></div></div>
<div class="ttc" id="format__cache_8h_html_a771d7c34570e8e492c25a0c2eb41889d"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a></div><div class="ttdeci">struct ast_format * ast_format_slin</div><div class="ttdoc">Built-in cached signed linear 8kHz format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00041">format_cache.c:41</a></div></div>
<div class="ttc" id="structast__frame_html_a37672e6b906143604cefd3e959777b31"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">ast_frame::samples</a></div><div class="ttdeci">int samples</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">include/asterisk/frame.h:173</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a05cbe2ad6e9abffb950e49b86e17b6a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05cbe2ad6e9abffb950e49b86e17b6a3">&#9670;&nbsp;</a></span>mf_stream()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int mf_stream </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>digits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>between</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>duration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>durationkp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>durationst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>is_external</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a166">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00836">836</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d28/channel_8c_source.html#l08266">ast_channel_start_silence_generator()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l08312">ast_channel_stop_silence_generator()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00286">AST_CONTROL_FLASH</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00287">AST_CONTROL_WINK</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04322">ast_indicate()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d7/d5b/options_8h_source.html#l00124">ast_opt_transmit_silence</a>, <a class="el" href="../../df/d6e/indications_8c_source.html#l00302">ast_playtones_start()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01574">ast_safe_sleep()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04997">ast_senddigit_mf()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04988">ast_senddigit_mf_end()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00830">external_sleep()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00967">ast_mf_stream()</a>.</p>
<div class="fragment"><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;{</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/da1/structast__silence__generator.html">ast_silence_generator</a> *silgen = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;   int (*my_sleep)(<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">int</span> ms);</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;   <span class="keywordflow">if</span> (is_external) {</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;      my_sleep = <a class="code" href="../../d3/d83/main_2app_8c.html#a8a4b283e6ec48c7198ec3444e70c7398">external_sleep</a>;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      my_sleep = <a class="code" href="../../d5/d7b/channel_8h.html#af10e3bd01602095e1908d3926afc3b76">ast_safe_sleep</a>;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;   }</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;   <span class="keywordflow">if</span> (!between) {</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;      between = 100;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;   }</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;   <span class="comment">/* Need a quiet time before sending digits. */</span></div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5b/options_8h.html#afe8795c4ec744506a9300700fc0813dc">ast_opt_transmit_silence</a>) {</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;      silgen = <a class="code" href="../../d5/d7b/channel_8h.html#a2a2e0ff24c57491a877cac39cb670024">ast_channel_start_silence_generator</a>(chan);</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;   }</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;   res = my_sleep(chan, 100);</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;      <span class="keywordflow">goto</span> mf_stream_cleanup;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;   }</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;   <span class="keywordflow">for</span> (ptr = digits; *ptr; ptr++) {</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;      <span class="keywordflow">if</span> (strchr(<span class="stringliteral">&quot;0123456789*#ABCwWfF&quot;</span>, *ptr)) {</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;         <span class="keywordflow">if</span> (*ptr == <span class="charliteral">&#39;f&#39;</span> || *ptr == <span class="charliteral">&#39;F&#39;</span>) {</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;            <span class="comment">/* ignore return values if not supported by channel */</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(chan, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae8f2cd460fdc81e0a774434fa002e4bf">AST_CONTROL_FLASH</a>);</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*ptr == <span class="charliteral">&#39;w&#39;</span> || *ptr == <span class="charliteral">&#39;W&#39;</span>) {</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;            <span class="comment">/* ignore return values if not supported by channel */</span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(chan, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a195b2c39c09113953814aa800dd06e7f">AST_CONTROL_WINK</a>);</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;            <span class="comment">/* Character represents valid MF */</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#ac48cc3fb7a20c85c97950b685e756ef7">ast_senddigit_mf</a>(chan, *ptr, duration, durationkp, durationst, is_external);</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;         }</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;         <span class="comment">/* pause between digits */</span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;         <span class="comment">/* The DSP code in Asterisk does not currently properly receive repeated tones</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="comment">            if no audio is sent in the middle. Simply sending audio (even 0 Hz)</span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="comment">            works around this limitation and guarantees the correct behavior.</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="comment">            */</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;         <a class="code" href="../../d2/d0f/indications_8h.html#a544e8a1dd4a986b00754103dda6a7d3b">ast_playtones_start</a>(chan, 0, <span class="stringliteral">&quot;0&quot;</span>, 0);</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;         res = my_sleep(chan, between);</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7f947d997e2f6c1a995d2e093240cbc9">ast_senddigit_mf_end</a>(chan);</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;         <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;         }</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Illegal MF character &#39;%c&#39; in string. (0-9*#ABCwWfF allowed)\n&quot;</span>, *ptr);</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;      }</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;   }</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;mf_stream_cleanup:</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;   <span class="keywordflow">if</span> (silgen) {</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a6643cbe766a051d2d06750ab5b3e933d">ast_channel_stop_silence_generator</a>(chan, silgen);</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;   }</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;}</div><div class="ttc" id="channel_8h_html_af10e3bd01602095e1908d3926afc3b76"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af10e3bd01602095e1908d3926afc3b76">ast_safe_sleep</a></div><div class="ttdeci">int ast_safe_sleep(struct ast_channel *chan, int ms)</div><div class="ttdoc">Wait for a specified amount of time, looking for hangups. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01574">channel.c:1574</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ae8f2cd460fdc81e0a774434fa002e4bf"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ae8f2cd460fdc81e0a774434fa002e4bf">AST_CONTROL_FLASH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00286">include/asterisk/frame.h:286</a></div></div>
<div class="ttc" id="structast__silence__generator_html"><div class="ttname"><a href="../../d9/da1/structast__silence__generator.html">ast_silence_generator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08262">channel.c:8262</a></div></div>
<div class="ttc" id="channel_8h_html_aef2af15a597c948e97628da6c5c84f28"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a></div><div class="ttdeci">int ast_indicate(struct ast_channel *chan, int condition)</div><div class="ttdoc">Indicates condition of channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04322">channel.c:4322</a></div></div>
<div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="options_8h_html_afe8795c4ec744506a9300700fc0813dc"><div class="ttname"><a href="../../d7/d5b/options_8h.html#afe8795c4ec744506a9300700fc0813dc">ast_opt_transmit_silence</a></div><div class="ttdeci">#define ast_opt_transmit_silence</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00124">options.h:124</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a195b2c39c09113953814aa800dd06e7f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a195b2c39c09113953814aa800dd06e7f">AST_CONTROL_WINK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00287">include/asterisk/frame.h:287</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="channel_8h_html_a2a2e0ff24c57491a877cac39cb670024"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a2a2e0ff24c57491a877cac39cb670024">ast_channel_start_silence_generator</a></div><div class="ttdeci">struct ast_silence_generator * ast_channel_start_silence_generator(struct ast_channel *chan)</div><div class="ttdoc">Starts a silence generator on the given channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08266">channel.c:8266</a></div></div>
<div class="ttc" id="channel_8h_html_a7f947d997e2f6c1a995d2e093240cbc9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7f947d997e2f6c1a995d2e093240cbc9">ast_senddigit_mf_end</a></div><div class="ttdeci">int ast_senddigit_mf_end(struct ast_channel *chan)</div><div class="ttdoc">End sending an MF digit to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04988">channel.c:4988</a></div></div>
<div class="ttc" id="channel_8h_html_a6643cbe766a051d2d06750ab5b3e933d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6643cbe766a051d2d06750ab5b3e933d">ast_channel_stop_silence_generator</a></div><div class="ttdeci">void ast_channel_stop_silence_generator(struct ast_channel *chan, struct ast_silence_generator *state)</div><div class="ttdoc">Stops a previously-started silence generator on the given channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08312">channel.c:8312</a></div></div>
<div class="ttc" id="indications_8h_html_a544e8a1dd4a986b00754103dda6a7d3b"><div class="ttname"><a href="../../d2/d0f/indications_8h.html#a544e8a1dd4a986b00754103dda6a7d3b">ast_playtones_start</a></div><div class="ttdeci">int ast_playtones_start(struct ast_channel *chan, int vol, const char *tonelist, int interruptible)</div><div class="ttdoc">Start playing a list of tones on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d6e/indications_8c_source.html#l00302">indications.c:302</a></div></div>
<div class="ttc" id="main_2app_8c_html_a8a4b283e6ec48c7198ec3444e70c7398"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a8a4b283e6ec48c7198ec3444e70c7398">external_sleep</a></div><div class="ttdeci">static int external_sleep(struct ast_channel *chan, int ms)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00830">main/app.c:830</a></div></div>
<div class="ttc" id="channel_8h_html_ac48cc3fb7a20c85c97950b685e756ef7"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac48cc3fb7a20c85c97950b685e756ef7">ast_senddigit_mf</a></div><div class="ttdeci">int ast_senddigit_mf(struct ast_channel *chan, char digit, unsigned int duration, unsigned int durationkp, unsigned int durationst, int is_external)</div><div class="ttdoc">Send an MF digit to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04997">channel.c:4997</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1b6fbacce14cf53fecf5be43487c0493"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b6fbacce14cf53fecf5be43487c0493">&#9670;&nbsp;</a></span>option_exists()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int option_exists </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d62/structast__ivr__menu.html">ast_ivr_menu</a> *&#160;</td>
          <td class="paramname"><em>menu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>option</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a404">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02659">2659</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00075">ast_ivr_option::option</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00083">ast_ivr_menu::options</a>, and <a class="el" href="../../d4/dc5/extconf_8c_source.html#l00081">ast_channel::x</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02700">ast_ivr_menu_run_internal()</a>.</p>
<div class="fragment"><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;{</div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../df/d3c/structast__channel.html#ab06e9aa782b61ccfb42f7c48996f6ed4">x</a>;</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;   <span class="keywordflow">for</span> (x = 0; menu-&gt;<a class="code" href="../../dd/d62/structast__ivr__menu.html#a8c135e2e13bd106dbf11387dba36d840">options</a>[<a class="code" href="../../df/d3c/structast__channel.html#ab06e9aa782b61ccfb42f7c48996f6ed4">x</a>].<a class="code" href="../../d1/d18/structast__ivr__option.html#a756aafa2c9b99eaa7eb7f8886c7a8cb2">option</a>; x++) {</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(menu-&gt;<a class="code" href="../../dd/d62/structast__ivr__menu.html#a8c135e2e13bd106dbf11387dba36d840">options</a>[x].<a class="code" href="../../d1/d18/structast__ivr__option.html#a756aafa2c9b99eaa7eb7f8886c7a8cb2">option</a>, option)) {</div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../df/d3c/structast__channel.html#ab06e9aa782b61ccfb42f7c48996f6ed4">x</a>;</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;      }</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;   }</div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;}</div><div class="ttc" id="structast__ivr__option_html_a756aafa2c9b99eaa7eb7f8886c7a8cb2"><div class="ttname"><a href="../../d1/d18/structast__ivr__option.html#a756aafa2c9b99eaa7eb7f8886c7a8cb2">ast_ivr_option::option</a></div><div class="ttdeci">char * option</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00075">include/asterisk/app.h:75</a></div></div>
<div class="ttc" id="structast__ivr__menu_html_a8c135e2e13bd106dbf11387dba36d840"><div class="ttname"><a href="../../dd/d62/structast__ivr__menu.html#a8c135e2e13bd106dbf11387dba36d840">ast_ivr_menu::options</a></div><div class="ttdeci">struct ast_ivr_option * options</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00083">include/asterisk/app.h:83</a></div></div>
<div class="ttc" id="structast__channel_html_ab06e9aa782b61ccfb42f7c48996f6ed4"><div class="ttname"><a href="../../df/d3c/structast__channel.html#ab06e9aa782b61ccfb42f7c48996f6ed4">ast_channel::x</a></div><div class="ttdeci">char x</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l00081">extconf.c:81</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a490ba593992b218981f3dc2a41f15ac4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a490ba593992b218981f3dc2a41f15ac4">&#9670;&nbsp;</a></span>option_matchmore()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int option_matchmore </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d62/structast__ivr__menu.html">ast_ivr_menu</a> *&#160;</td>
          <td class="paramname"><em>menu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>option</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a408">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02670">2670</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00075">ast_ivr_option::option</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00083">ast_ivr_menu::options</a>, and <a class="el" href="../../d4/dc5/extconf_8c_source.html#l00081">ast_channel::x</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02682">read_newoption()</a>.</p>
<div class="fragment"><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;{</div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../df/d3c/structast__channel.html#ab06e9aa782b61ccfb42f7c48996f6ed4">x</a>;</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;   <span class="keywordflow">for</span> (x = 0; menu-&gt;<a class="code" href="../../dd/d62/structast__ivr__menu.html#a8c135e2e13bd106dbf11387dba36d840">options</a>[<a class="code" href="../../df/d3c/structast__channel.html#ab06e9aa782b61ccfb42f7c48996f6ed4">x</a>].<a class="code" href="../../d1/d18/structast__ivr__option.html#a756aafa2c9b99eaa7eb7f8886c7a8cb2">option</a>; x++) {</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;      <span class="keywordflow">if</span> ((!strncasecmp(menu-&gt;<a class="code" href="../../dd/d62/structast__ivr__menu.html#a8c135e2e13bd106dbf11387dba36d840">options</a>[x].<a class="code" href="../../d1/d18/structast__ivr__option.html#a756aafa2c9b99eaa7eb7f8886c7a8cb2">option</a>, option, strlen(option))) &amp;&amp;</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;            (menu-&gt;<a class="code" href="../../dd/d62/structast__ivr__menu.html#a8c135e2e13bd106dbf11387dba36d840">options</a>[x].<a class="code" href="../../d1/d18/structast__ivr__option.html#a756aafa2c9b99eaa7eb7f8886c7a8cb2">option</a>[strlen(option)])) {</div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../df/d3c/structast__channel.html#ab06e9aa782b61ccfb42f7c48996f6ed4">x</a>;</div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;      }</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;   }</div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;}</div><div class="ttc" id="structast__ivr__option_html_a756aafa2c9b99eaa7eb7f8886c7a8cb2"><div class="ttname"><a href="../../d1/d18/structast__ivr__option.html#a756aafa2c9b99eaa7eb7f8886c7a8cb2">ast_ivr_option::option</a></div><div class="ttdeci">char * option</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00075">include/asterisk/app.h:75</a></div></div>
<div class="ttc" id="structast__ivr__menu_html_a8c135e2e13bd106dbf11387dba36d840"><div class="ttname"><a href="../../dd/d62/structast__ivr__menu.html#a8c135e2e13bd106dbf11387dba36d840">ast_ivr_menu::options</a></div><div class="ttdeci">struct ast_ivr_option * options</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l00083">include/asterisk/app.h:83</a></div></div>
<div class="ttc" id="structast__channel_html_ab06e9aa782b61ccfb42f7c48996f6ed4"><div class="ttname"><a href="../../df/d3c/structast__channel.html#ab06e9aa782b61ccfb42f7c48996f6ed4">ast_channel::x</a></div><div class="ttdeci">char x</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l00081">extconf.c:81</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a16e02ee9c475cbde97e26554a975e7eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16e02ee9c475cbde97e26554a975e7eb">&#9670;&nbsp;</a></span>parse_options()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int parse_options </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d2/d8d/structast__app__option.html">ast_app_option</a> *&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>_flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>optstr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flaglen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a415">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02826">2826</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01340">ast_app_option::arg_index</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00077">ast_clear_flag</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00196">AST_FLAGS_ALL</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00127">ast_set_flag64</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00200">ast_flags::flags</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00205">ast_flags64::flags</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d2/d7e/ael__lex_8c_source.html#l00973">paren</a>, and <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01270">quote()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02906">ast_app_parse_options()</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02911">ast_app_parse_options64()</a>.</p>
<div class="fragment"><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;{</div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;   <span class="keywordtype">char</span> *s, *arg;</div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;   <span class="keywordtype">int</span> curarg, res = 0;</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> argloc;</div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> *<a class="code" href="../../dc/dac/structast__flags.html#ac92588540e8c1d014a08cd8a45462b19">flags</a> = _flags;</div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d10/structast__flags64.html">ast_flags64</a> *flags64 = _flags;</div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;</div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;   <span class="keywordflow">if</span> (flaglen == 32) {</div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(flags, <a class="code" href="../../d5/d60/utils_8h.html#afb8683b4d96960d7a82a86a974a57599">AST_FLAGS_ALL</a>);</div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;      flags64-&gt;<a class="code" href="../../d5/d10/structast__flags64.html#a899a76dc5f03f0d4ea3793c339e07ee9">flags</a> = 0;</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;   }</div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;</div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;   <span class="keywordflow">if</span> (!optstr) {</div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;   }</div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;</div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;   s = optstr;</div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;   <span class="keywordflow">while</span> (*s) {</div><div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;      curarg = *s++ &amp; 0x7f;   <span class="comment">/* the array (in app.h) has 128 entries */</span></div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;      argloc = options[curarg].<a class="code" href="../../d2/d8d/structast__app__option.html#a7fba4686db1ab2c33d8920fb7019d916">arg_index</a>;</div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;      <span class="keywordflow">if</span> (*s == <span class="charliteral">&#39;(&#39;</span>) {</div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;         <span class="keywordtype">int</span> <a class="code" href="../../d2/d7e/ael__lex_8c.html#a0dec70156318396f15cc8305df9918ab">paren</a> = 1, <a class="code" href="../../d9/d1e/func__strings_8c.html#ab8fe909862ff885d9e233ff9ad5e54dd">quote</a> = 0;</div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;         <span class="keywordtype">int</span> parsequotes = (s[1] == <span class="charliteral">&#39;&quot;&#39;</span>) ? 1 : 0;</div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;</div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;         <span class="comment">/* Has argument */</span></div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;         arg = ++s;</div><div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;         <span class="keywordflow">for</span> (; *s; s++) {</div><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;            <span class="keywordflow">if</span> (*s == <span class="charliteral">&#39;(&#39;</span> &amp;&amp; !<a class="code" href="../../d9/d1e/func__strings_8c.html#ab8fe909862ff885d9e233ff9ad5e54dd">quote</a>) {</div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;               paren++;</div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*s == <span class="charliteral">&#39;)&#39;</span> &amp;&amp; !<a class="code" href="../../d9/d1e/func__strings_8c.html#ab8fe909862ff885d9e233ff9ad5e54dd">quote</a>) {</div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;               <span class="comment">/* Count parentheses, unless they&#39;re within quotes (or backslashed, below) */</span></div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;               paren--;</div><div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*s == <span class="charliteral">&#39;&quot;&#39;</span> &amp;&amp; parsequotes) {</div><div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;               <span class="comment">/* Leave embedded quotes alone, unless they are the first character */</span></div><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;               <a class="code" href="../../d9/d1e/func__strings_8c.html#ab8fe909862ff885d9e233ff9ad5e54dd">quote</a> = <a class="code" href="../../d9/d1e/func__strings_8c.html#ab8fe909862ff885d9e233ff9ad5e54dd">quote</a> ? 0 : 1;</div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(s, s + 1, INT_MAX);</div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;               s--;</div><div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*s == <span class="charliteral">&#39;\\&#39;</span>) {</div><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;               <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d1e/func__strings_8c.html#ab8fe909862ff885d9e233ff9ad5e54dd">quote</a>) {</div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;                  <span class="comment">/* If a backslash is found outside of quotes, remove it */</span></div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;                  <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(s, s + 1, INT_MAX);</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;               } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d9/d1e/func__strings_8c.html#ab8fe909862ff885d9e233ff9ad5e54dd">quote</a> &amp;&amp; s[1] == <span class="charliteral">&#39;&quot;&#39;</span>) {</div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;                  <span class="comment">/* Backslash for a quote character within quotes, remove the backslash */</span></div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;                  <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(s, s + 1, INT_MAX);</div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;                  <span class="comment">/* Backslash within quotes, keep both characters */</span></div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;                  s++;</div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;               }</div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;            }</div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;</div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;            <span class="keywordflow">if</span> (paren == 0) {</div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;            }</div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;         }</div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;         <span class="comment">/* This will find the closing paren we found above, or none, if the string ended before we found one. */</span></div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;         <span class="keywordflow">if</span> ((s = strchr(s, <span class="charliteral">&#39;)&#39;</span>))) {</div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;            <span class="keywordflow">if</span> (argloc) {</div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;               <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>[argloc - 1] = arg;</div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;            }</div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;            *s++ = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Missing closing parenthesis for argument &#39;%c&#39; in string &#39;%s&#39;\n&quot;</span>, curarg, arg);</div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;            res = -1;</div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;         }</div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (argloc) {</div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;         <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>[argloc - 1] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;      }</div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;      <span class="keywordflow">if</span> (flaglen == 32) {</div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(flags, options[curarg].<a class="code" href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>);</div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab2de736b42974f12ec7d57c41d234bf4">ast_set_flag64</a>(flags64, options[curarg].<a class="code" href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a>);</div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;      }</div><div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;   }</div><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;</div><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;}</div><div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structast__flags_html_ac92588540e8c1d014a08cd8a45462b19"><div class="ttname"><a href="../../dc/dac/structast__flags.html#ac92588540e8c1d014a08cd8a45462b19">ast_flags::flags</a></div><div class="ttdeci">unsigned int flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00200">utils.h:200</a></div></div>
<div class="ttc" id="utils_8h_html_ab2de736b42974f12ec7d57c41d234bf4"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab2de736b42974f12ec7d57c41d234bf4">ast_set_flag64</a></div><div class="ttdeci">#define ast_set_flag64(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00127">utils.h:127</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="structast__flags64_html"><div class="ttname"><a href="../../d5/d10/structast__flags64.html">ast_flags64</a></div><div class="ttdoc">Structure used to handle a large number of boolean flags == used only in app_dial? </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00204">utils.h:204</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="func__strings_8c_html_ab8fe909862ff885d9e233ff9ad5e54dd"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#ab8fe909862ff885d9e233ff9ad5e54dd">quote</a></div><div class="ttdeci">static int quote(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01270">func_strings.c:1270</a></div></div>
<div class="ttc" id="structast__flags64_html_a899a76dc5f03f0d4ea3793c339e07ee9"><div class="ttname"><a href="../../d5/d10/structast__flags64.html#a899a76dc5f03f0d4ea3793c339e07ee9">ast_flags64::flags</a></div><div class="ttdeci">uint64_t flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00205">utils.h:205</a></div></div>
<div class="ttc" id="f2c_8h_html_abf5d144da384425ae6cb542ce6eec8d3"><div class="ttname"><a href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a></div><div class="ttdeci">long int flag</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc2/f2c_8h_source.html#l00083">f2c.h:83</a></div></div>
<div class="ttc" id="utils_8h_html_afb8683b4d96960d7a82a86a974a57599"><div class="ttname"><a href="../../d5/d60/utils_8h.html#afb8683b4d96960d7a82a86a974a57599">AST_FLAGS_ALL</a></div><div class="ttdeci">#define AST_FLAGS_ALL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00196">utils.h:196</a></div></div>
<div class="ttc" id="structast__app__option_html_a7fba4686db1ab2c33d8920fb7019d916"><div class="ttname"><a href="../../d2/d8d/structast__app__option.html#a7fba4686db1ab2c33d8920fb7019d916">ast_app_option::arg_index</a></div><div class="ttdeci">unsigned int arg_index</div><div class="ttdoc">The index of the entry in the arguments array that should be used for this option&amp;#39;s argument...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01340">include/asterisk/app.h:1340</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="utils_8h_html_a7b260320610a09017a9416398acd0a70"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a></div><div class="ttdeci">#define ast_clear_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00077">utils.h:77</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="ael__lex_8c_html_a0dec70156318396f15cc8305df9918ab"><div class="ttname"><a href="../../d2/d7e/ael__lex_8c.html#a0dec70156318396f15cc8305df9918ab">paren</a></div><div class="ttdeci">#define paren</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d7e/ael__lex_8c_source.html#l00973">ael_lex.c:973</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af6b32f07971af303a81aa940a347fddb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6b32f07971af303a81aa940a347fddb">&#9670;&nbsp;</a></span>parse_tone_uri()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int parse_tone_uri </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>tone_parser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>tone_indication</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>tone_zone</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a253">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01378">1378</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, and <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01399">ast_control_tone()</a>.</p>
<div class="fragment"><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;{</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;   *tone_indication = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;tone_parser, <span class="stringliteral">&quot;;&quot;</span>);</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(tone_parser)) {</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;      <span class="comment">/* Only the indication is included */</span></div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;   }</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;   <span class="keywordflow">if</span> (!(strncmp(tone_parser, <span class="stringliteral">&quot;tonezone=&quot;</span>, 9))) {</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;      *tone_zone = tone_parser + 9;</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unexpected Tone URI component: %s\n&quot;</span>, tone_parser);</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;   }</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;}</div><div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a76f6ec06f0249fceeecd10687cb62e7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76f6ec06f0249fceeecd10687cb62e7d">&#9670;&nbsp;</a></span>path_lock_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void path_lock_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../da/da7/structpath__lock.html">path_lock</a> *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a363">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02326">2326</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02320">path_lock::fd</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02321">path_lock::path</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02337">ast_lock_path_flock()</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02422">ast_unlock_path_flock()</a>.</p>
<div class="fragment"><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;{</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;   <span class="keywordflow">if</span> (obj-&gt;<a class="code" href="../../da/da7/structpath__lock.html#a6f8059414f0228f0256115e024eeed4b">fd</a> &gt;= 0) {</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;      close(obj-&gt;<a class="code" href="../../da/da7/structpath__lock.html#a6f8059414f0228f0256115e024eeed4b">fd</a>);</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;   }</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;   <span class="keywordflow">if</span> (obj-&gt;<a class="code" href="../../da/da7/structpath__lock.html#a44196e6a5696d10442c29e639437196e">path</a>) {</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(obj-&gt;<a class="code" href="../../da/da7/structpath__lock.html#a44196e6a5696d10442c29e639437196e">path</a>);</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;   }</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(obj);</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;}</div><div class="ttc" id="structpath__lock_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../da/da7/structpath__lock.html#a6f8059414f0228f0256115e024eeed4b">path_lock::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02320">main/app.c:2320</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structpath__lock_html_a44196e6a5696d10442c29e639437196e"><div class="ttname"><a href="../../da/da7/structpath__lock.html#a44196e6a5696d10442c29e639437196e">path_lock::path</a></div><div class="ttdeci">char * path</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02321">main/app.c:2321</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8e4d0cf43a02ec7e663a50cee18315d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e4d0cf43a02ec7e663a50cee18315d2">&#9670;&nbsp;</a></span>read_newoption()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int read_newoption </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d62/structast__ivr__menu.html">ast_ivr_menu</a> *&#160;</td>
          <td class="paramname"><em>menu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>exten</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxexten</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a409">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02682">2682</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00721">ast_channel_pbx()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l03184">ast_waitfordigit()</a>, <a class="el" href="../../db/de0/pbx_8h_source.html#l00212">ast_pbx::dtimeoutms</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02670">option_matchmore()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02700">ast_ivr_menu_run_internal()</a>.</p>
<div class="fragment"><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;{</div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;   <span class="keywordtype">int</span> ms;</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;   <span class="keywordflow">while</span> (<a class="code" href="../../d3/d83/main_2app_8c.html#a490ba593992b218981f3dc2a41f15ac4">option_matchmore</a>(menu, <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>)) {</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;      ms = <a class="code" href="../../d5/d7b/channel_8h.html#a488b7d6f7488bedc53be45d4ef4471c9">ast_channel_pbx</a>(chan) ? <a class="code" href="../../d5/d7b/channel_8h.html#a488b7d6f7488bedc53be45d4ef4471c9">ast_channel_pbx</a>(chan)-&gt;<a class="code" href="../../d6/d83/structast__pbx.html#a80a133d151de25445e8dfd09953a0872">dtimeoutms</a> : 5000;</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;      <span class="keywordflow">if</span> (strlen(<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>) &gt;= maxexten - 1) {</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;      }</div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;      <span class="keywordflow">if</span> ((res = <a class="code" href="../../d5/d7b/channel_8h.html#a050bec9a4abc1a599b6573a6091b080c">ast_waitfordigit</a>(chan, ms)) &lt; 1) {</div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;      }</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;      <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>[strlen(<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>) + 1] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;      <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>[strlen(<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>)] = res;</div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;   }</div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;   <span class="keywordflow">return</span> res &gt; 0 ? 0 : res;</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;}</div><div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="main_2app_8c_html_a490ba593992b218981f3dc2a41f15ac4"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#a490ba593992b218981f3dc2a41f15ac4">option_matchmore</a></div><div class="ttdeci">static int option_matchmore(struct ast_ivr_menu *menu, char *option)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02670">main/app.c:2670</a></div></div>
<div class="ttc" id="channel_8h_html_a488b7d6f7488bedc53be45d4ef4471c9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a488b7d6f7488bedc53be45d4ef4471c9">ast_channel_pbx</a></div><div class="ttdeci">struct ast_pbx * ast_channel_pbx(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00721">channel_internal_api.c:721</a></div></div>
<div class="ttc" id="channel_8h_html_a050bec9a4abc1a599b6573a6091b080c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a050bec9a4abc1a599b6573a6091b080c">ast_waitfordigit</a></div><div class="ttdeci">int ast_waitfordigit(struct ast_channel *c, int ms)</div><div class="ttdoc">Waits for a digit. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03184">channel.c:3184</a></div></div>
<div class="ttc" id="structast__pbx_html_a80a133d151de25445e8dfd09953a0872"><div class="ttname"><a href="../../d6/d83/structast__pbx.html#a80a133d151de25445e8dfd09953a0872">ast_pbx::dtimeoutms</a></div><div class="ttdeci">int dtimeoutms</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l00212">pbx.h:212</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae16884d936b144343ed8d1b9fbe60617"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae16884d936b144343ed8d1b9fbe60617">&#9670;&nbsp;</a></span>set_read_to_slin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int set_read_to_slin </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> **&#160;</td>
          <td class="paramname"><em>orig_format</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets a channel's read format to AST_FORMAT_SLINEAR, recording its original format. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">chan</td><td>Channel to modify. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">orig_format</td><td>Output variable to store channel's original read format. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success. </dd>
<dd>
-1 on error. </dd></dl>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a274">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01546">1546</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00856">ast_channel_readformat()</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00041">ast_format_slin</a>, and <a class="el" href="../../d4/d28/channel_8c_source.html#l05849">ast_set_read_format()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01580">__ast_play_and_record()</a>.</p>
<div class="fragment"><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;{</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;   <span class="keywordflow">if</span> (!chan || !orig_format) {</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;   }</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;   *orig_format = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a>(chan));</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d7b/channel_8h.html#a9107a83365cbf327cc0d12cb0dbd28d8">ast_set_read_format</a>(chan, <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>);</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;}</div><div class="ttc" id="channel_8h_html_aaced431562223538a94e0e69cf94151a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a></div><div class="ttdeci">struct ast_format * ast_channel_readformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00856">channel_internal_api.c:856</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="channel_8h_html_a9107a83365cbf327cc0d12cb0dbd28d8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9107a83365cbf327cc0d12cb0dbd28d8">ast_set_read_format</a></div><div class="ttdeci">int ast_set_read_format(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdoc">Sets read format on channel chan. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05849">channel.c:5849</a></div></div>
<div class="ttc" id="format__cache_8h_html_a771d7c34570e8e492c25a0c2eb41889d"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a></div><div class="ttdeci">struct ast_format * ast_format_slin</div><div class="ttdoc">Built-in cached signed linear 8kHz format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00041">format_cache.c:41</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7696b4a837797103e8fad638d5b4615d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7696b4a837797103e8fad638d5b4615d">&#9670;&nbsp;</a></span>shaun_of_the_dead()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* shaun_of_the_dead </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a14">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00094">94</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00449">AST_LIST_EMPTY</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00420">AST_LIST_FIRST</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00039">AST_LIST_LOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00556">AST_LIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00528">AST_LIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00614">AST_LIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00139">AST_LIST_UNLOCK</a>, <a class="el" href="../../d4/dfb/poll-compat_8h_source.html#l00088">ast_poll</a>, <a class="el" href="../../d9/dee/structzombie.html#a5bd10d1c7630722dd91dbfca2156072c">zombie::list</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00078">zombie::pid</a>, and <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00146">status</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l03047">ast_safe_fork()</a>.</p>
<div class="fragment"><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;{</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/dee/structzombie.html">zombie</a> *cur;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(&amp;<a class="code" href="../../dc/d57/structzombies.html">zombies</a>)) {</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;         <span class="comment">/* Don&#39;t allow cancellation while we have a lock. */</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;         pthread_setcancelstate(PTHREAD_CANCEL_DISABLE, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../dc/d57/structzombies.html">zombies</a>);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../dc/d57/structzombies.html">zombies</a>, cur, <a class="code" href="../../d9/dee/structzombie.html#a5bd10d1c7630722dd91dbfca2156072c">list</a>) {</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            <span class="keywordflow">if</span> (waitpid(cur-&gt;<a class="code" href="../../d9/dee/structzombie.html#ae0d46a978d5cd6707411f276ad869b9c">pid</a>, &amp;status, WNOHANG) != 0) {</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;               <a class="code" href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a>(<a class="code" href="../../d9/dee/structzombie.html#a5bd10d1c7630722dd91dbfca2156072c">list</a>);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;               <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(cur);</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            }</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;         }</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../dc/d57/structzombies.html">zombies</a>);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;         pthread_setcancelstate(PTHREAD_CANCEL_ENABLE, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      }</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      pthread_testcancel();</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      <span class="comment">/* Wait for 60 seconds, without engaging in a busy loop. */</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      <a class="code" href="../../d4/dfb/poll-compat_8h.html#a5a0c58fa8311e94cd0ed34382aa822f9">ast_poll</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a>(&amp;<a class="code" href="../../dc/d57/structzombies.html">zombies</a>) ? 5000 : 60000);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;   }</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;}</div><div class="ttc" id="structzombie_html_ae0d46a978d5cd6707411f276ad869b9c"><div class="ttname"><a href="../../d9/dee/structzombie.html#ae0d46a978d5cd6707411f276ad869b9c">zombie::pid</a></div><div class="ttdeci">pid_t pid</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00078">main/app.c:78</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="linkedlists_8h_html_adf1959c5c03a3a706da97ad2f49617e5"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#adf1959c5c03a3a706da97ad2f49617e5">AST_LIST_FIRST</a></div><div class="ttdeci">#define AST_LIST_FIRST(head)</div><div class="ttdoc">Returns the first entry contained in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00420">linkedlists.h:420</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4a1884cde93e53bef32ca85c194a1d05"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a></div><div class="ttdeci">#define AST_LIST_EMPTY(head)</div><div class="ttdoc">Checks whether the specified list contains any entries. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00449">linkedlists.h:449</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a712c04b4493919a7052399cd30ee8fb9"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_END</div><div class="ttdoc">Closes a safe loop traversal block. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00614">linkedlists.h:614</a></div></div>
<div class="ttc" id="poll-compat_8h_html_a5a0c58fa8311e94cd0ed34382aa822f9"><div class="ttname"><a href="../../d4/dfb/poll-compat_8h.html#a5a0c58fa8311e94cd0ed34382aa822f9">ast_poll</a></div><div class="ttdeci">#define ast_poll(a, b, c)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/poll-compat_8h_source.html#l00088">poll-compat.h:88</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa8ac496fa9c717d5afb99a02e1e2760c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_LIST_REMOVE_CURRENT(field)</div><div class="ttdoc">Removes the current entry from a list during a traversal. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00556">linkedlists.h:556</a></div></div>
<div class="ttc" id="structzombies_html"><div class="ttname"><a href="../../dc/d57/structzombies.html">zombies</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00082">main/app.c:82</a></div></div>
<div class="ttc" id="structzombie_html_a5bd10d1c7630722dd91dbfca2156072c"><div class="ttname"><a href="../../d9/dee/structzombie.html#a5bd10d1c7630722dd91dbfca2156072c">zombie::list</a></div><div class="ttdeci">struct zombie::@333 list</div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structzombie_html"><div class="ttname"><a href="../../d9/dee/structzombie.html">zombie</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00077">main/app.c:77</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa5be52067bf16bdc7e56ca19b5ba858d"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_BEGIN(head, var, field)</div><div class="ttdoc">Loops safely over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00528">linkedlists.h:528</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad6e29bc97e7d1b6d5bcc5199f16d9853"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6e29bc97e7d1b6d5bcc5199f16d9853">&#9670;&nbsp;</a></span>vm_greeter_warn_no_provider()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void vm_greeter_warn_no_provider </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a136">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00634">634</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00539">vm_greeter_warnings</a>.</p>
<div class="fragment"><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;{</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d83/main_2app_8c.html#ab690c43575fbc376d43f93e542265f2d">vm_greeter_warnings</a>++ % 10 == 0) {</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;No voicemail greeter provider registered.\n&quot;</span>);</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;   }</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;}</div><div class="ttc" id="main_2app_8c_html_ab690c43575fbc376d43f93e542265f2d"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#ab690c43575fbc376d43f93e542265f2d">vm_greeter_warnings</a></div><div class="ttdeci">static int vm_greeter_warnings</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00539">main/app.c:539</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aed4788fab39ac1980d266aba2cbc6fc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed4788fab39ac1980d266aba2cbc6fc4">&#9670;&nbsp;</a></span>vm_warn_no_provider()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void vm_warn_no_provider </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a134">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00613">613</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00428">vm_warnings</a>.</p>
<div class="fragment"><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;{</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d83/main_2app_8c.html#ac3f5ef8c1385be5dc0d39b54436fbb85">vm_warnings</a>++ % 10 == 0) {</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;No voicemail provider registered.\n&quot;</span>);</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;   }</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;}</div><div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="main_2app_8c_html_ac3f5ef8c1385be5dc0d39b54436fbb85"><div class="ttname"><a href="../../d3/d83/main_2app_8c.html#ac3f5ef8c1385be5dc0d39b54436fbb85">vm_warnings</a></div><div class="ttdeci">static int vm_warnings</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00428">main/app.c:428</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a469da08184562e4040d91459db01be10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a469da08184562e4040d91459db01be10">&#9670;&nbsp;</a></span>app_stack_callbacks</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../d9/d3e/structast__app__stack__funcs.html">ast_app_stack_funcs</a>* app_stack_callbacks</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a82">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00344">344</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00370">ast_app_exec_sub()</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00351">ast_app_expand_sub_args()</a>.</p>

</div>
</div>
<a id="a6bcfb001b39f6049c25a2635de1dc17f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bcfb001b39f6049c25a2635de1dc17f">&#9670;&nbsp;</a></span>ast_lock_type</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#a889fad4c6cc627add80454ae61b53241">AST_LOCK_TYPE</a> <a class="el" href="../../dd/d42/lock_8h.html#a91005557686d603e1210a200ef97153d">ast_lock_type</a> = <a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#a889fad4c6cc627add80454ae61b53241a599f18fdf355d7530bb754b8c66d6de7">AST_LOCK_TYPE_LOCKFILE</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00248">248</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

</div>
</div>
<a id="ad3925a12ca1909720e1f4d7ea01fa8a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3925a12ca1909720e1f4d7ea01fa8a3">&#9670;&nbsp;</a></span>ast_vm_test_create_user_func</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#aeb09d8464050290e0a6f655e1f99497d">ast_vm_test_create_user_fn</a>* ast_vm_test_create_user_func = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a129">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00596">596</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00599">ast_install_vm_test_functions()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00606">ast_uninstall_vm_test_functions()</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00813">ast_vm_test_create_user()</a>.</p>

</div>
</div>
<a id="ac6b468fe42cea720c3ce8c7c4f0ea2c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6b468fe42cea720c3ce8c7c4f0ea2c9">&#9670;&nbsp;</a></span>ast_vm_test_destroy_user_func</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/d93/include_2asterisk_2app_8h.html#a4261c8076caaeb90e900f834b912ee4b">ast_vm_test_destroy_user_fn</a>* ast_vm_test_destroy_user_func = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a131">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00597">597</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00599">ast_install_vm_test_functions()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00606">ast_uninstall_vm_test_functions()</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00821">ast_vm_test_destroy_user()</a>.</p>

</div>
</div>
<a id="a0e01e4a7836c72a22f08f824d366ffb0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e01e4a7836c72a22f08f824d366ffb0">&#9670;&nbsp;</a></span>child_cap</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cap_t child_cap</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a9">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00085">85</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l03194">app_cleanup()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l03205">app_init()</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l03047">ast_safe_fork()</a>.</p>

</div>
</div>
<a id="a28df6ce01a3a3bc9f0495c070443b4ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28df6ce01a3a3bc9f0495c070443b4ee">&#9670;&nbsp;</a></span>default_acceptdtmf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char default_acceptdtmf[] = &quot;#&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a320">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01989">1989</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02002">ast_play_and_prepend()</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01997">ast_play_and_record()</a>.</p>

</div>
</div>
<a id="a652c75796183b2b640cc95dc58b76bab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a652c75796183b2b640cc95dc58b76bab">&#9670;&nbsp;</a></span>default_canceldtmf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char default_canceldtmf[] = &quot;&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a321">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01990">1990</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02002">ast_play_and_prepend()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01997">ast_play_and_record()</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01992">ast_play_and_record_full()</a>.</p>

</div>
</div>
<a id="a0442dc13ea144464c2b3f9aa6e2d6417"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0442dc13ea144464c2b3f9aa6e2d6417">&#9670;&nbsp;</a></span>global_maxsilence</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int global_maxsilence = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01556">1556</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01580">__ast_play_and_record()</a>.</p>

</div>
</div>
<a id="a3773ab842af7870b63ad24f3c4d4a541"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3773ab842af7870b63ad24f3c4d4a541">&#9670;&nbsp;</a></span>global_silence_threshold</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int global_silence_threshold = 128</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a277">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01555">1555</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01580">__ast_play_and_record()</a>.</p>

</div>
</div>
<a id="a4c64cde04fcdfadca23c715d24981888"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c64cde04fcdfadca23c715d24981888">&#9670;&nbsp;</a></span>groups</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/d28/structgroups.html">groups</a>   <a class="el" href="../../d9/d28/structgroups.html">groups</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../d4/d28/channel_8c_source.html#l07838">ast_ref_namedgroups()</a>.</p>

</div>
</div>
<a id="a50b7bd92df6d7d96811b86030c0265b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50b7bd92df6d7d96811b86030c0265b1">&#9670;&nbsp;</a></span>linearstream</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../de/d2a/structast__generator.html">ast_generator</a> linearstream</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a214">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l01082">1082</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

</div>
</div>
<a id="a102babd01c6a9963b7e80cf36faf0c65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a102babd01c6a9963b7e80cf36faf0c65">&#9670;&nbsp;</a></span>path_lock_list</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d9f/structpath__lock__list.html">path_lock_list</a>   <a class="el" href="../../d4/d9f/structpath__lock__list.html">path_lock_list</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a0140ad24206ae7215b855360b9f3c2af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0140ad24206ae7215b855360b9f3c2af">&#9670;&nbsp;</a></span>provider_is_swapped</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int provider_is_swapped = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a116">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00487">487</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00489">ast_vm_test_swap_table_in()</a>, and <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00515">ast_vm_test_swap_table_out()</a>.</p>

</div>
</div>
<a id="a6faa8563ee6f21a1e504dd8b7c3dd5b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6faa8563ee6f21a1e504dd8b7c3dd5b2">&#9670;&nbsp;</a></span>queue_topic_all</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/d1d/structstasis__topic.html">stasis_topic</a>* queue_topic_all</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a11">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00090">90</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l03184">ast_queue_topic_all()</a>.</p>

</div>
</div>
<a id="a674c31d6219e0edf34999357375f77da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a674c31d6219e0edf34999357375f77da">&#9670;&nbsp;</a></span>queue_topic_pool</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d1/d65/structstasis__topic__pool.html">stasis_topic_pool</a>* queue_topic_pool</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a13">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00091">91</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

</div>
</div>
<a id="a30573cb092e715a2e4bbc2d77b9fc1df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30573cb092e715a2e4bbc2d77b9fc1df">&#9670;&nbsp;</a></span>shaun_of_the_dead_thread</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pthread_t shaun_of_the_dead_thread = <a class="el" href="../../d4/dc5/extconf_8c.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a1">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00075">75</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l03047">ast_safe_fork()</a>.</p>

</div>
</div>
<a id="ab690c43575fbc376d43f93e542265f2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab690c43575fbc376d43f93e542265f2d">&#9670;&nbsp;</a></span>vm_greeter_warnings</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int vm_greeter_warnings</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Voicemail greeter not registered warning </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a119">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00539">539</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00634">vm_greeter_warn_no_provider()</a>.</p>

</div>
</div>
<a id="ac3f5ef8c1385be5dc0d39b54436fbb85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3f5ef8c1385be5dc0d39b54436fbb85">&#9670;&nbsp;</a></span>vm_warnings</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int vm_warnings</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Voicemail not registered warning </p>
<dl><dt><b>Examples: </b></dt><dd><a class="el" href="../../d4/dca/_2usr_2src_2asterisk-18_85_80_2main_2app_8c-example.html#a95">/usr/src/asterisk-18.5.0/main/app.c</a>.</dd>
</dl>
<p class="definition">Definition at line <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00428">428</a> of file <a class="el" href="../../d3/d83/main_2app_8c_source.html">main/app.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d83/main_2app_8c_source.html#l00613">vm_warn_no_provider()</a>.</p>

</div>
</div>
<a id="ac56f76fcde470c1d00ea52c3cd657b3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac56f76fcde470c1d00ea52c3cd657b3c">&#9670;&nbsp;</a></span>zombies</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dc/d57/structzombies.html">zombies</a>   <a class="el" href="../../dc/d57/structzombies.html">zombies</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:44:29 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
