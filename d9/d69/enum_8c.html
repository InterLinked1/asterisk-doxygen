<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: enum.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">enum.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>ENUM Support for Asterisk.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &lt;sys/socket.h&gt;</code><br />
<code>#include &lt;netinet/in.h&gt;</code><br />
<code>#include &lt;arpa/nameser.h&gt;</code><br />
<code>#include &lt;resolv.h&gt;</code><br />
<code>#include &lt;ctype.h&gt;</code><br />
<code>#include &lt;regex.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/d9b/enum_8h_source.html">asterisk/enum.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d2e/dns_8h_source.html">asterisk/dns.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d7b/channel_8h_source.html">asterisk/channel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html">asterisk/config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d60/utils_8h_source.html">asterisk/utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d45/manager_8h_source.html">asterisk/manager.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for enum.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/d43/enum_8c__incl.png" border="0" usemap="#enum_8c" alt=""/></div>
<map name="enum_8c" id="enum_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="2319,304,2403,331"/>
<area shape="rect" id="node22" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="525,155,661,181"/>
<area shape="rect" id="node23" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="496,304,611,331"/>
<area shape="rect" id="node33" href="../../d0/d9b/enum_8h.html" title="DNS and ENUM functions. " alt="" coords="1132,80,1257,107"/>
<area shape="rect" id="node34" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1469,155,1608,181"/>
<area shape="rect" id="node40" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="315,229,442,256"/>
<area shape="rect" id="node48" href="../../db/d45/manager_8h.html" title="The AMI &#45; Asterisk Manager Interface &#45; is a TCP protocol created to manage Asterisk with third&#45;party ..." alt="" coords="993,304,1138,331"/>
<area shape="rect" id="node50" href="../../d5/d2e/dns_8h.html" title="DNS support for Asterisk. " alt="" coords="2725,80,2835,107"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="1787,752,1941,779"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="1730,528,1867,555"/>
<area shape="rect" id="node15" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="2242,379,2377,405"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="1791,827,1937,853"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="1285,677,1427,704"/>
<area shape="rect" id="node24" href="../../d9/d94/network_8h.html" title="Wrapper for network related headers, masking differences between various operating systems..." alt="" coords="949,379,1088,405"/>
<area shape="rect" id="node25" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="1145,677,1207,704"/>
<area shape="rect" id="node26" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1119,603,1233,629"/>
<area shape="rect" id="node27" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="593,677,719,704"/>
<area shape="rect" id="node28" href="../../d5/deb/localtime_8h.html" title="Custom localtime functions for multiple timezones. " alt="" coords="445,379,592,405"/>
<area shape="rect" id="node29" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="768,379,925,405"/>
<area shape="rect" id="node30" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="291,379,421,405"/>
<area shape="rect" id="node31" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="1462,453,1597,480"/>
<area shape="rect" id="node32" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="1555,528,1706,555"/>
<area shape="rect" id="node35" href="../../dc/d4d/alertpipe_8h.html" title="asterisk/alertpipe.h" alt="" coords="517,229,661,256"/>
<area shape="rect" id="node36" href="../../dc/d14/abstract__jb_8h.html" title="Common implementation&#45;independent jitterbuffer stuff. " alt="" coords="1214,229,1373,256"/>
<area shape="rect" id="node37" href="../../d4/dfb/poll-compat_8h.html" title="asterisk/poll&#45;compat.h" alt="" coords="1397,229,1561,256"/>
<area shape="rect" id="node38" href="../../d6/d66/include_2asterisk_2frame_8h.html" title="Asterisk internal frame definitions. " alt="" coords="1673,304,1799,331"/>
<area shape="rect" id="node39" href="../../d9/de7/chanvars_8h.html" title="Channel Variables. " alt="" coords="1969,304,2116,331"/>
<area shape="rect" id="node41" href="../../dc/d07/cdr_8h.html" title="Call Detail Record API. " alt="" coords="2161,229,2268,256"/>
<area shape="rect" id="node42" href="../../d9/db6/datastore_8h.html" title="Asterisk datastore objects. " alt="" coords="1723,379,1874,405"/>
<area shape="rect" id="node43" href="../../d0/d3c/format__cap_8h.html" title="Format Capabilities API. " alt="" coords="2293,229,2454,256"/>
<area shape="rect" id="node44" href="../../d9/d95/channelstate_8h.html" title="Channel states. " alt="" coords="2479,229,2649,256"/>
<area shape="rect" id="node45" href="../../de/dc8/ccss_8h.html" title="Call Completion Supplementary Services API. " alt="" coords="2021,229,2137,256"/>
<area shape="rect" id="node46" href="../../db/d3c/framehook_8h.html" title="FrameHook Architecture. " alt="" coords="1737,229,1895,256"/>
<area shape="rect" id="node47" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="1013,229,1139,256"/>
<area shape="rect" id="node49" href="../../d4/d61/endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="787,229,938,256"/>
</map>
</div>
</div>
<p><a href="../../d9/d69/enum_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d18/structebl__context.html">ebl_context</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d24/structtxt__context.html">txt_context</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a4e7355b2e878225f47929cd3bb0276bc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d69/enum_8c.html#a4e7355b2e878225f47929cd3bb0276bc">ENUMLOOKUP_BLR_CC</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:a4e7355b2e878225f47929cd3bb0276bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e005634423607f0e6b0217338a162eb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d69/enum_8c.html#a8e005634423607f0e6b0217338a162eb">ENUMLOOKUP_BLR_EBL</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a8e005634423607f0e6b0217338a162eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f852d573c62b08575b25c76d5e837f6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d69/enum_8c.html#a3f852d573c62b08575b25c76d5e837f6">ENUMLOOKUP_BLR_TXT</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a3f852d573c62b08575b25c76d5e837f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80568ff5362beeb0051699a8deaf1f1e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d69/enum_8c.html#a80568ff5362beeb0051699a8deaf1f1e">ENUMLOOKUP_OPTIONS_COUNT</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a80568ff5362beeb0051699a8deaf1f1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfc40e04d7adfed812da4647e65d683e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d69/enum_8c.html#adfc40e04d7adfed812da4647e65d683e">ENUMLOOKUP_OPTIONS_DIRECT</a>&#160;&#160;&#160;8</td></tr>
<tr class="separator:adfc40e04d7adfed812da4647e65d683e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acafdc00da9410652ffa46b5cc6653f90"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d69/enum_8c.html#acafdc00da9410652ffa46b5cc6653f90">ENUMLOOKUP_OPTIONS_IENUM</a>&#160;&#160;&#160;4</td></tr>
<tr class="separator:acafdc00da9410652ffa46b5cc6653f90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab63c80a29b183ad5b4f85fb5cdfcbf11"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d69/enum_8c.html#ab63c80a29b183ad5b4f85fb5cdfcbf11">ENUMLOOKUP_OPTIONS_ISN</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:ab63c80a29b183ad5b4f85fb5cdfcbf11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c884729687293ffab765d9e2671d7d3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d69/enum_8c.html#a0c884729687293ffab765d9e2671d7d3">T_EBL</a>&#160;&#160;&#160;65300</td></tr>
<tr class="separator:a0c884729687293ffab765d9e2671d7d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d69/enum_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d69/enum_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73438392283d552379c47739980c6bdd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d69/enum_8c.html#a73438392283d552379c47739980c6bdd">ast_get_enum</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *<a class="el" href="../../d6/d49/structnumber.html">number</a>, char *dst, int dstlen, char *tech, int techlen, char *suffix, char *<a class="el" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>, unsigned int record, struct <a class="el" href="../../d7/d26/structenum__context.html">enum_context</a> **argcontext)</td></tr>
<tr class="memdesc:a73438392283d552379c47739980c6bdd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lookup entry in ENUM.  <a href="#a73438392283d552379c47739980c6bdd">More...</a><br /></td></tr>
<tr class="separator:a73438392283d552379c47739980c6bdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5ca3b2f15708286d89601ca842fc406"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d69/enum_8c.html#aa5ca3b2f15708286d89601ca842fc406">ast_get_txt</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *<a class="el" href="../../d6/d49/structnumber.html">number</a>, char *txt, int txtlen, char *suffix)</td></tr>
<tr class="memdesc:aa5ca3b2f15708286d89601ca842fc406"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lookup DNS TXT record (used by app TXTCIDnum)  <a href="#aa5ca3b2f15708286d89601ca842fc406">More...</a><br /></td></tr>
<tr class="separator:aa5ca3b2f15708286d89601ca842fc406"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d69/enum_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13d957694dbb782613d0050d80492766"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d69/enum_8c.html#a13d957694dbb782613d0050d80492766">blr_ebl</a> (const char *cc, const char *suffix, char *separator, int sep_len, char *apex, int apex_len)</td></tr>
<tr class="memdesc:a13d957694dbb782613d0050d80492766"><td class="mdescLeft">&#160;</td><td class="mdescRight">Evaluate the I-ENUM branch as stored in an EBL record.  <a href="#a13d957694dbb782613d0050d80492766">More...</a><br /></td></tr>
<tr class="separator:a13d957694dbb782613d0050d80492766"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb116596bc2ed451c606f1a45a16b3b2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d69/enum_8c.html#abb116596bc2ed451c606f1a45a16b3b2">blr_txt</a> (const char *cc, const char *suffix)</td></tr>
<tr class="memdesc:abb116596bc2ed451c606f1a45a16b3b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine the branch location record as stored in a TXT record.  <a href="#abb116596bc2ed451c606f1a45a16b3b2">More...</a><br /></td></tr>
<tr class="separator:abb116596bc2ed451c606f1a45a16b3b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2e89a9afd23d7f94e608e1474832091"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d69/enum_8c.html#aa2e89a9afd23d7f94e608e1474832091">cclen</a> (const char *<a class="el" href="../../d6/d49/structnumber.html">number</a>)</td></tr>
<tr class="memdesc:aa2e89a9afd23d7f94e608e1474832091"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine the length of a country code when given an E.164 string.  <a href="#aa2e89a9afd23d7f94e608e1474832091">More...</a><br /></td></tr>
<tr class="separator:aa2e89a9afd23d7f94e608e1474832091"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6470fc87061b2ff61ab281df67d7644f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d69/enum_8c.html#a6470fc87061b2ff61ab281df67d7644f">ebl_callback</a> (void *<a class="el" href="../../da/dde/chan__phone_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, unsigned char *<a class="el" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a>, int <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, unsigned char *fullanswer)</td></tr>
<tr class="memdesc:a6470fc87061b2ff61ab281df67d7644f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback for EBL record lookup.  <a href="#a6470fc87061b2ff61ab281df67d7644f">More...</a><br /></td></tr>
<tr class="separator:a6470fc87061b2ff61ab281df67d7644f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ba49a39ba5f3482aaf36940bd3596e1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d69/enum_8c.html#a9ba49a39ba5f3482aaf36940bd3596e1">enum_callback</a> (void *<a class="el" href="../../da/dde/chan__phone_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, unsigned char *<a class="el" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a>, int <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, unsigned char *fullanswer)</td></tr>
<tr class="memdesc:a9ba49a39ba5f3482aaf36940bd3596e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback from ENUM lookup function.  <a href="#a9ba49a39ba5f3482aaf36940bd3596e1">More...</a><br /></td></tr>
<tr class="separator:a9ba49a39ba5f3482aaf36940bd3596e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7ed966c35564a15cb41b284e0688875"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d69/enum_8c.html#ad7ed966c35564a15cb41b284e0688875">format_numeric_domain</a> (const char *<a class="el" href="../../d6/d49/structnumber.html">number</a>, const char *suffix)</td></tr>
<tr class="separator:ad7ed966c35564a15cb41b284e0688875"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d69/enum_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f695c1adce235a5659ddec89e5747a3"><td class="memItemLeft" align="right" valign="top">static unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d69/enum_8c.html#a5f695c1adce235a5659ddec89e5747a3">parse_ie</a> (char *data, unsigned int maxdatalen, unsigned char *src, unsigned int srclen)</td></tr>
<tr class="memdesc:a5f695c1adce235a5659ddec89e5747a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse NAPTR record information elements.  <a href="#a5f695c1adce235a5659ddec89e5747a3">More...</a><br /></td></tr>
<tr class="separator:a5f695c1adce235a5659ddec89e5747a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cae26ce88d9ff89dfecd075d1c89791"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d69/enum_8c.html#a0cae26ce88d9ff89dfecd075d1c89791">parse_naptr</a> (unsigned char *dst, int dstsize, char *tech, int techsize, unsigned char *<a class="el" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a>, int <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, unsigned char *naptrinput)</td></tr>
<tr class="memdesc:a0cae26ce88d9ff89dfecd075d1c89791"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse DNS NAPTR record used in ENUM &mdash;.  <a href="#a0cae26ce88d9ff89dfecd075d1c89791">More...</a><br /></td></tr>
<tr class="separator:a0cae26ce88d9ff89dfecd075d1c89791"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0865ccd46f3c83ea5c2818ec14e56425"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d69/enum_8c.html#a0865ccd46f3c83ea5c2818ec14e56425">private_enum_init</a> (int <a class="el" href="../../dc/d6b/res__xmpp_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a>)</td></tr>
<tr class="memdesc:a0865ccd46f3c83ea5c2818ec14e56425"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the ENUM support subsystem.  <a href="#a0865ccd46f3c83ea5c2818ec14e56425">More...</a><br /></td></tr>
<tr class="separator:a0865ccd46f3c83ea5c2818ec14e56425"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c6ac25ea7536c0bc9ed18cbcf917527"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d69/enum_8c.html#a7c6ac25ea7536c0bc9ed18cbcf917527">reload_module</a> (void)</td></tr>
<tr class="separator:a7c6ac25ea7536c0bc9ed18cbcf917527"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a2531890675bb9a57fa13f5de4e6077"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d69/enum_8c.html#a3a2531890675bb9a57fa13f5de4e6077">txt_callback</a> (void *<a class="el" href="../../da/dde/chan__phone_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, unsigned char *<a class="el" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a>, int <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, unsigned char *fullanswer)</td></tr>
<tr class="memdesc:a3a2531890675bb9a57fa13f5de4e6077"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback for TXT record lookup, /ol version.  <a href="#a3a2531890675bb9a57fa13f5de4e6077">More...</a><br /></td></tr>
<tr class="separator:a3a2531890675bb9a57fa13f5de4e6077"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d69/enum_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d69/enum_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a835b27a90d895a488e4e14cc3d2dee8c">AST_MODFLAG_GLOBAL_SYMBOLS</a> | <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;ENUM Support&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_CORE, .load = load_module, .unload = unload_module, .reload = reload_module, .load_pri = AST_MODPRI_CORE, .requires = &quot;extconfig&quot;, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d69/enum_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe913060145c35f4046f5245b2534cf9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d69/enum_8c.html#afe913060145c35f4046f5245b2534cf9">ebl_alg</a> = <a class="el" href="../../d9/d69/enum_8c.html#a4e7355b2e878225f47929cd3bb0276bc">ENUMLOOKUP_BLR_CC</a></td></tr>
<tr class="separator:afe913060145c35f4046f5245b2534cf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5b4e17c6fe8b24534ed09383f512b06"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d69/enum_8c.html#ab5b4e17c6fe8b24534ed09383f512b06">enumlock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td></tr>
<tr class="separator:ab5b4e17c6fe8b24534ed09383f512b06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48dbbc896e14cd8cab443a8066ea1e8b"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d69/enum_8c.html#a48dbbc896e14cd8cab443a8066ea1e8b">ienum_branchlabel</a> [32] = &quot;i&quot;</td></tr>
<tr class="separator:a48dbbc896e14cd8cab443a8066ea1e8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>ENUM Support for Asterisk. </p>
<dl class="section author"><dt>Author</dt><dd>Mark Spencer <a href="#" onclick="location.href='mai'+'lto:'+'mar'+'ks'+'ter'+'@d'+'igi'+'um'+'.co'+'m'; return false;">marks<span style="display: none;">.nosp@m.</span>ter@<span style="display: none;">.nosp@m.</span>digiu<span style="display: none;">.nosp@m.</span>m.co<span style="display: none;">.nosp@m.</span>m</a></dd></dl>
<ul>
<li>Funding provided by nic.at</li>
</ul>
<dl class="section user"><dt>Enum standards</dt><dd></dd></dl>
<ul>
<li>NAPTR records: <a href="http://ietf.nri.reston.va.us/rfc/rfc2915.txt">http://ietf.nri.reston.va.us/rfc/rfc2915.txt</a></li>
<li>DNS SRV records: <a href="http://www.ietf.org/rfc/rfc2782.txt">http://www.ietf.org/rfc/rfc2782.txt</a></li>
<li>ENUM <a href="http://www.ietf.org/rfc/rfc3761.txt">http://www.ietf.org/rfc/rfc3761.txt</a></li>
<li>ENUM for H.323: <a href="http://www.ietf.org/rfc/rfc3762.txt">http://www.ietf.org/rfc/rfc3762.txt</a></li>
<li>ENUM SIP: <a href="http://www.ietf.org/rfc/rfc3764.txt">http://www.ietf.org/rfc/rfc3764.txt</a></li>
<li>IANA ENUM Services: <a href="http://www.iana.org/assignments/enum-services">http://www.iana.org/assignments/enum-services</a></li>
<li>I-ENUM: <a href="http://tools.ietf.org/wg/enum/draft-ietf-enum-combined/">http://tools.ietf.org/wg/enum/draft-ietf-enum-combined/</a> <a href="http://tools.ietf.org/wg/enum/draft-ietf-enum-branch-location-record/">http://tools.ietf.org/wg/enum/draft-ietf-enum-branch-location-record/</a></li>
</ul>
<dl class="section user"><dt>Possible improvement</dt><dd></dd></dl>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000071">Todo:</a></b></dt><dd><p class="startdd">Implement a caching mechanism for multile enum lookups</p><ul>
<li>See <a href="https://issues.asterisk.org/view.php?id=6739">https://issues.asterisk.org/view.php?id=6739</a> </li>
</ul>
<p class="enddd">The service type selection needs to be redone. </p>
</dd></dl>

<p class="definition">Definition in file <a class="el" href="../../d9/d69/enum_8c_source.html">enum.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a4e7355b2e878225f47929cd3bb0276bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e7355b2e878225f47929cd3bb0276bc">&#9670;&nbsp;</a></span>ENUMLOOKUP_BLR_CC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ENUMLOOKUP_BLR_CC&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d69/enum_8c_source.html#l00093">93</a> of file <a class="el" href="../../d9/d69/enum_8c_source.html">enum.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d69/enum_8c_source.html#l00649">ast_get_enum()</a>, and <a class="el" href="../../d9/d69/enum_8c_source.html#l01030">private_enum_init()</a>.</p>

</div>
</div>
<a id="a8e005634423607f0e6b0217338a162eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e005634423607f0e6b0217338a162eb">&#9670;&nbsp;</a></span>ENUMLOOKUP_BLR_EBL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ENUMLOOKUP_BLR_EBL&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d69/enum_8c_source.html#l00095">95</a> of file <a class="el" href="../../d9/d69/enum_8c_source.html">enum.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d69/enum_8c_source.html#l00649">ast_get_enum()</a>, and <a class="el" href="../../d9/d69/enum_8c_source.html#l01030">private_enum_init()</a>.</p>

</div>
</div>
<a id="a3f852d573c62b08575b25c76d5e837f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f852d573c62b08575b25c76d5e837f6">&#9670;&nbsp;</a></span>ENUMLOOKUP_BLR_TXT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ENUMLOOKUP_BLR_TXT&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d69/enum_8c_source.html#l00094">94</a> of file <a class="el" href="../../d9/d69/enum_8c_source.html">enum.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d69/enum_8c_source.html#l00649">ast_get_enum()</a>, and <a class="el" href="../../d9/d69/enum_8c_source.html#l01030">private_enum_init()</a>.</p>

</div>
</div>
<a id="a80568ff5362beeb0051699a8deaf1f1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80568ff5362beeb0051699a8deaf1f1e">&#9670;&nbsp;</a></span>ENUMLOOKUP_OPTIONS_COUNT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ENUMLOOKUP_OPTIONS_COUNT&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d69/enum_8c_source.html#l00607">607</a> of file <a class="el" href="../../d9/d69/enum_8c_source.html">enum.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d69/enum_8c_source.html#l00649">ast_get_enum()</a>, and <a class="el" href="../../d9/d69/enum_8c_source.html#l00616">enum_callback()</a>.</p>

</div>
</div>
<a id="adfc40e04d7adfed812da4647e65d683e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfc40e04d7adfed812da4647e65d683e">&#9670;&nbsp;</a></span>ENUMLOOKUP_OPTIONS_DIRECT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ENUMLOOKUP_OPTIONS_DIRECT&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d69/enum_8c_source.html#l00613">613</a> of file <a class="el" href="../../d9/d69/enum_8c_source.html">enum.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d69/enum_8c_source.html#l00649">ast_get_enum()</a>.</p>

</div>
</div>
<a id="acafdc00da9410652ffa46b5cc6653f90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acafdc00da9410652ffa46b5cc6653f90">&#9670;&nbsp;</a></span>ENUMLOOKUP_OPTIONS_IENUM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ENUMLOOKUP_OPTIONS_IENUM&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d69/enum_8c_source.html#l00611">611</a> of file <a class="el" href="../../d9/d69/enum_8c_source.html">enum.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d69/enum_8c_source.html#l00649">ast_get_enum()</a>.</p>

</div>
</div>
<a id="ab63c80a29b183ad5b4f85fb5cdfcbf11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab63c80a29b183ad5b4f85fb5cdfcbf11">&#9670;&nbsp;</a></span>ENUMLOOKUP_OPTIONS_ISN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ENUMLOOKUP_OPTIONS_ISN&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d69/enum_8c_source.html#l00609">609</a> of file <a class="el" href="../../d9/d69/enum_8c_source.html">enum.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d69/enum_8c_source.html#l00649">ast_get_enum()</a>.</p>

</div>
</div>
<a id="a0c884729687293ffab765d9e2671d7d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c884729687293ffab765d9e2671d7d3">&#9670;&nbsp;</a></span>T_EBL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define T_EBL&#160;&#160;&#160;65300</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d69/enum_8c_source.html#l00099">99</a> of file <a class="el" href="../../d9/d69/enum_8c_source.html">enum.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d69/enum_8c_source.html#l00330">blr_ebl()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d69/enum_8c_source.html#l01089">1089</a> of file <a class="el" href="../../d9/d69/enum_8c_source.html">enum.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d69/enum_8c_source.html#l01089">1089</a> of file <a class="el" href="../../d9/d69/enum_8c_source.html">enum.c</a>.</p>

</div>
</div>
<a id="a73438392283d552379c47739980c6bdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73438392283d552379c47739980c6bdd">&#9670;&nbsp;</a></span>ast_get_enum()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_get_enum </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>location</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxloc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>technology</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxtech</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>suffix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>record</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d26/structenum__context.html">enum_context</a> **&#160;</td>
          <td class="paramname"><em>argcontext</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lookup entry in ENUM. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>Channel </td></tr>
    <tr><td class="paramname">number</td><td>E164 number with or without the leading + </td></tr>
    <tr><td class="paramname">location</td><td>Number returned (or SIP uri) </td></tr>
    <tr><td class="paramname">maxloc</td><td>Max length </td></tr>
    <tr><td class="paramname">technology</td><td>Technology (from url scheme in response) You can set it to get particular answer RR, if there are many techs in DNS response, example: "sip" If you need any record, then set it to "ALL" string </td></tr>
    <tr><td class="paramname">maxtech</td><td>Max length </td></tr>
    <tr><td class="paramname">suffix</td><td>Zone suffix (WARNING: No defaults here any more) </td></tr>
    <tr><td class="paramname">options</td><td>Options 'c' - Count number of NAPTR RR number - Position of the requested RR in the answer list 'u' - Full URI return (does not strip URI scheme) 'i' - Infrastructure ENUM lookup 's' - ISN based lookup 'd' - Direct DNS query </td></tr>
    <tr><td class="paramname">record</td><td>The position of required RR in the answer list </td></tr>
    <tr><td class="paramname">argcontext</td><td>Argument for caching results into an <a class="el" href="../../d7/d26/structenum__context.html">enum_context</a> pointer (NULL is used for not caching) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>if found </td></tr>
    <tr><td class="paramname">0</td><td>if not found </td></tr>
    <tr><td class="paramname">-1</td><td>on hangup </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d69/enum_8c_source.html#l00649">649</a> of file <a class="el" href="../../d9/d69/enum_8c_source.html">enum.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00200">ast_autoservice_start()</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00266">ast_autoservice_stop()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d9/d54/dns_8c_source.html#l00493">ast_search_dns()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00330">blr_ebl()</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00201">blr_txt()</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00116">cclen()</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00116">context</a>, <a class="el" href="../../d0/d9b/enum_8h_source.html#l00049">enum_context::count</a>, <a class="el" href="../../d0/d9b/enum_8h_source.html#l00041">enum_context::dst</a>, <a class="el" href="../../d0/d9b/enum_8h_source.html#l00042">enum_context::dstlen</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00096">ebl_alg</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00616">enum_callback()</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00101">enumlock</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00093">ENUMLOOKUP_BLR_CC</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00095">ENUMLOOKUP_BLR_EBL</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00094">ENUMLOOKUP_BLR_TXT</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00607">ENUMLOOKUP_OPTIONS_COUNT</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00613">ENUMLOOKUP_OPTIONS_DIRECT</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00611">ENUMLOOKUP_OPTIONS_IENUM</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00609">ENUMLOOKUP_OPTIONS_ISN</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00091">ienum_branchlabel</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d0/d9b/enum_8h_source.html#l00034">enum_naptr_rr::naptr</a>, <a class="el" href="../../d0/d9b/enum_8h_source.html#l00051">enum_context::naptr_rrs</a>, <a class="el" href="../../d0/d9b/enum_8h_source.html#l00052">enum_context::naptr_rrs_count</a>, <a class="el" href="../../d0/d9b/enum_8h_source.html#l00047">enum_context::naptrinput</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d9b/enum_8h_source.html#l00050">enum_context::options</a>, <a class="el" href="../../d0/d9b/enum_8h_source.html#l00029">naptr::order</a>, <a class="el" href="../../d0/d9b/enum_8h_source.html#l00048">enum_context::position</a>, <a class="el" href="../../d0/d9b/enum_8h_source.html#l00030">naptr::pref</a>, <a class="el" href="../../d0/d9b/enum_8h_source.html#l00035">enum_naptr_rr::result</a>, <a class="el" href="../../d0/d9b/enum_8h_source.html#l00037">enum_naptr_rr::sort_pos</a>, <a class="el" href="../../d0/d9b/enum_8h_source.html#l00036">enum_naptr_rr::tech</a>, <a class="el" href="../../d0/d9b/enum_8h_source.html#l00043">enum_context::tech</a>, <a class="el" href="../../d0/d9b/enum_8h_source.html#l00044">enum_context::techlen</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d5e/func__enum_8c_source.html#l00252">enum_query_read()</a>, and <a class="el" href="../../d9/d5e/func__enum_8c_source.html#l00156">function_enum()</a>.</p>
<div class="fragment"><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;{</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d26/structenum__context.html">enum_context</a> *<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[512];</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/dac/structdomain.html">domain</a>[256];</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;   <span class="keywordtype">char</span> left[128];</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;   <span class="keywordtype">char</span> middle[128];</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d7/d26/structenum__context.html#a4d469e97d6119219edc9215e90622397">naptrinput</a>[128];</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;   <span class="keywordtype">char</span> apex[128] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;   <span class="keywordtype">int</span> ret = -1;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;   <span class="comment">/* for ISN rewrite */</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;   <span class="keywordtype">char</span> *p1 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;   <span class="keywordtype">char</span> *p2 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;   <span class="keywordtype">char</span> *p3 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;   <span class="keywordtype">int</span> k = 0;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;   <span class="keywordtype">int</span> i = 0;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;   <span class="keywordtype">int</span> z = 0;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;   <span class="keywordtype">int</span> spaceleft = 0;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;   <span class="keyword">struct </span>timeval time_start, time_end;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(suffix)) {</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;ast_get_enum need a suffix parameter now.\n&quot;</span>);</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;   }</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;num=&#39;%s&#39;, tech=&#39;%s&#39;, suffix=&#39;%s&#39;, options=&#39;%s&#39;, record=%u\n&quot;</span>, <a class="code" href="../../d6/d49/structnumber.html">number</a>, tech, suffix, <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>, record);</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="comment">  We don&#39;t need that any more, that &quot;n&quot; preceding the number has been replaced by a flag</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;<span class="comment">  in the options paramter.</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;<span class="comment">   ast_copy_string(naptrinput, number, sizeof(naptrinput));</span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="comment"> * The &quot;number&quot; parameter includes a leading &#39;+&#39; if it&#39;s a full E.164 number (and not ISN)</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="comment"> * We need to preserve that as the regex inside NAPTRs expect the +.</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="comment"> * But for the domain generation, the &#39;+&#39; is a nuissance, so we get rid of it.</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(naptrinput, <a class="code" href="../../d6/d49/structnumber.html">number</a>[0] == <span class="charliteral">&#39;n&#39;</span> ? <a class="code" href="../../d6/d49/structnumber.html">number</a> + 1 : <a class="code" href="../../d6/d49/structnumber.html">number</a>, <span class="keyword">sizeof</span>(naptrinput));</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d49/structnumber.html">number</a>[0] == <span class="charliteral">&#39;+&#39;</span>) {</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      <a class="code" href="../../d6/d49/structnumber.html">number</a>++;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;   }</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;   <span class="keywordflow">if</span> (!(context = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*context)))) {</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;   }</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;   <span class="keywordflow">if</span> ((p3 = strchr(naptrinput, <span class="charliteral">&#39;*&#39;</span>))) {</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      *p3=<span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;   }</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;   context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a4d469e97d6119219edc9215e90622397">naptrinput</a> = naptrinput;   <span class="comment">/* The number */</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;   context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a4f15ee8aa627692edfd6bdfe9a45fbf9">dst</a> = dst;        <span class="comment">/* Return string */</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;   context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a09933d827be564d0a0afebe6ffa00773">dstlen</a> = dstlen;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;   context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#aeca41cda3ae501467b8637dbb685443b">tech</a> = tech;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;   context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a970f0bd322ba19ad9f14eaa6ecb1a814">techlen</a> = techlen;</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;   context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a849fa981f121eb25a67e4e14392840ba">options</a> = 0;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;   context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a401e942526aac47cef94f478182486e7">position</a> = record &gt; 0 ? record : 1;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;   context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a> = 0;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;   context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;   context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#aa0068b75c25dfc2c01a7c2471978e0c4">naptr_rrs_count</a> = 0;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="comment">    * Process options:</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="comment">    * c  Return count, not URI</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment">    * i  Use infrastructure ENUM</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="comment">    * s  Do ISN transformation</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="comment">    * d  Direct DNS query: no reversing.</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;      <span class="keywordflow">if</span> (strchr(<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>,<span class="charliteral">&#39;s&#39;</span>)) {</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;         context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a849fa981f121eb25a67e4e14392840ba">options</a> |= <a class="code" href="../../d9/d69/enum_8c.html#ab63c80a29b183ad5b4f85fb5cdfcbf11">ENUMLOOKUP_OPTIONS_ISN</a>;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strchr(<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>,<span class="charliteral">&#39;i&#39;</span>)) {</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;         context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a849fa981f121eb25a67e4e14392840ba">options</a> |= <a class="code" href="../../d9/d69/enum_8c.html#acafdc00da9410652ffa46b5cc6653f90">ENUMLOOKUP_OPTIONS_IENUM</a>;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strchr(<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>,<span class="charliteral">&#39;d&#39;</span>)) {</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;         context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a849fa981f121eb25a67e4e14392840ba">options</a> |= <a class="code" href="../../d9/d69/enum_8c.html#adfc40e04d7adfed812da4647e65d683e">ENUMLOOKUP_OPTIONS_DIRECT</a>;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      }</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      <span class="keywordflow">if</span> (strchr(<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>,<span class="charliteral">&#39;c&#39;</span>)) {</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;         context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a849fa981f121eb25a67e4e14392840ba">options</a> |= <a class="code" href="../../d9/d69/enum_8c.html#a80568ff5362beeb0051699a8deaf1f1e">ENUMLOOKUP_OPTIONS_COUNT</a>;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      }</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      <span class="keywordflow">if</span> (strchr(<a class="code" href="../../d6/d49/structnumber.html">number</a>,<span class="charliteral">&#39;*&#39;</span>)) {</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;         context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a849fa981f121eb25a67e4e14392840ba">options</a> |= <a class="code" href="../../d9/d69/enum_8c.html#ab63c80a29b183ad5b4f85fb5cdfcbf11">ENUMLOOKUP_OPTIONS_ISN</a>;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      }</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;   }</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;ENUM options(%s): pos=%d, options=&#39;%d&#39;\n&quot;</span>, <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>, context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a401e942526aac47cef94f478182486e7">position</a>, context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a849fa981f121eb25a67e4e14392840ba">options</a>);</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;n=&#39;%s&#39;, tech=&#39;%s&#39;, suffix=&#39;%s&#39;, options=&#39;%d&#39;, record=&#39;%d&#39;\n&quot;</span>,</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;         <a class="code" href="../../d6/d49/structnumber.html">number</a>, tech, suffix, context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a849fa981f121eb25a67e4e14392840ba">options</a>, context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a401e942526aac47cef94f478182486e7">position</a>);</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="comment">    * This code does more than simple RFC3261 ENUM. All these rewriting</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="comment">    * schemes have in common that they build the FQDN for the NAPTR lookup</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="comment">    * by concatenating</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="comment">    *    - a number which needs be flipped and &quot;.&quot;-seperated   (left)</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="comment">    *    - some fixed string              (middle)</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="comment">    *    - an Apex.                 (apex)</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="comment">    * The RFC3261 ENUM is: left=full number, middle=&quot;&quot;, apex=from args.</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="comment">    * ISN:  number = &quot;middle*left&quot;, apex=from args</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment">    * I-ENUM: EBL parameters build the split, can change apex</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment">    * Direct: left=&quot;&quot;, middle=argument, apex=from args</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;   <span class="comment">/* default: the whole number will be flipped, no middle domain component */</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(left, <a class="code" href="../../d6/d49/structnumber.html">number</a>, <span class="keyword">sizeof</span>(left));</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;   middle[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment">    * I-ENUM can change the apex, thus we copy it</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(apex, suffix, <span class="keyword">sizeof</span>(apex));</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;   <span class="comment">/* ISN rewrite */</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;   <span class="keywordflow">if</span> ((context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a849fa981f121eb25a67e4e14392840ba">options</a> &amp; <a class="code" href="../../d9/d69/enum_8c.html#ab63c80a29b183ad5b4f85fb5cdfcbf11">ENUMLOOKUP_OPTIONS_ISN</a>) &amp;&amp; (p1 = strchr(<a class="code" href="../../d6/d49/structnumber.html">number</a>, <span class="charliteral">&#39;*&#39;</span>))) {</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      *p1++ = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(left, <a class="code" href="../../d6/d49/structnumber.html">number</a>, <span class="keyword">sizeof</span>(left));</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(middle, p1, <span class="keyword">sizeof</span>(middle) - 1);</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      strcat(middle, <span class="stringliteral">&quot;.&quot;</span>);</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;ISN ENUM: left=%s, middle=&#39;%s&#39;\n&quot;</span>, left, middle);</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;   <span class="comment">/* Direct DNS lookup rewrite */</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a849fa981f121eb25a67e4e14392840ba">options</a> &amp; <a class="code" href="../../d9/d69/enum_8c.html#adfc40e04d7adfed812da4647e65d683e">ENUMLOOKUP_OPTIONS_DIRECT</a>) {</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;      left[0] = 0; <span class="comment">/* nothing to flip around */</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(middle, <a class="code" href="../../d6/d49/structnumber.html">number</a>, <span class="keyword">sizeof</span>(middle) - 1);</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;      strcat(middle, <span class="stringliteral">&quot;.&quot;</span>);</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;DIRECT ENUM:  middle=&#39;%s&#39;\n&quot;</span>, middle);</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;   <span class="comment">/* Infrastructure ENUM rewrite */</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a849fa981f121eb25a67e4e14392840ba">options</a> &amp; <a class="code" href="../../d9/d69/enum_8c.html#acafdc00da9410652ffa46b5cc6653f90">ENUMLOOKUP_OPTIONS_IENUM</a>) {</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;      <span class="keywordtype">int</span> sdl = 0;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;      <span class="keywordtype">char</span> cc[8];</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;      <span class="keywordtype">char</span> sep[256], n_apex[256];</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;      <span class="keywordtype">int</span> cc_len = <a class="code" href="../../d9/d69/enum_8c.html#aa2e89a9afd23d7f94e608e1474832091">cclen</a>(<a class="code" href="../../d6/d49/structnumber.html">number</a>);</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      sdl = cc_len;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d9/d69/enum_8c.html#ab5b4e17c6fe8b24534ed09383f512b06">enumlock</a>);</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(sep, <a class="code" href="../../d9/d69/enum_8c.html#a48dbbc896e14cd8cab443a8066ea1e8b">ienum_branchlabel</a>, <span class="keyword">sizeof</span>(sep)); <span class="comment">/* default */</span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d9/d69/enum_8c.html#ab5b4e17c6fe8b24534ed09383f512b06">enumlock</a>);</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      <span class="keywordflow">switch</span> (<a class="code" href="../../d9/d69/enum_8c.html#afe913060145c35f4046f5245b2534cf9">ebl_alg</a>) {</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d9/d69/enum_8c.html#a8e005634423607f0e6b0217338a162eb">ENUMLOOKUP_BLR_EBL</a>:</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(cc, <a class="code" href="../../d6/d49/structnumber.html">number</a>, cc_len); <span class="comment">/* cclen() never returns more than 3 */</span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;         sdl = <a class="code" href="../../d9/d69/enum_8c.html#a13d957694dbb782613d0050d80492766">blr_ebl</a>(cc, suffix, sep, <span class="keyword">sizeof</span>(sep) - 1, n_apex, <span class="keyword">sizeof</span>(n_apex) - 1);</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;         <span class="keywordflow">if</span> (sdl &gt;= 0) {</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(apex, n_apex, <span class="keyword">sizeof</span>(apex));</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;EBL ENUM: sep=%s, apex=&#39;%s&#39;\n&quot;</span>, sep, n_apex);</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;            sdl = cc_len;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;         }</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d9/d69/enum_8c.html#a3f852d573c62b08575b25c76d5e837f6">ENUMLOOKUP_BLR_TXT</a>:</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(cc, <a class="code" href="../../d6/d49/structnumber.html">number</a>, cc_len); <span class="comment">/* cclen() never returns more than 3 */</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;         sdl = <a class="code" href="../../d9/d69/enum_8c.html#abb116596bc2ed451c606f1a45a16b3b2">blr_txt</a>(cc, suffix);</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;         <span class="keywordflow">if</span> (sdl &lt; 0) {</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;            sdl = cc_len;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;         }</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../d9/d69/enum_8c.html#a4e7355b2e878225f47929cd3bb0276bc">ENUMLOOKUP_BLR_CC</a>: <span class="comment">/* BLR is at the country-code level */</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;         sdl = cc_len;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;      }</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;      <span class="keywordflow">if</span> (sdl &gt; strlen(<a class="code" href="../../d6/d49/structnumber.html">number</a>)) {   <span class="comment">/* Number too short for this sdl? */</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;I-ENUM: subdomain location %d behind number %s\n&quot;</span>, sdl, <a class="code" href="../../d6/d49/structnumber.html">number</a>);</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(context);</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      }</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(left, <a class="code" href="../../d6/d49/structnumber.html">number</a> + sdl, <span class="keyword">sizeof</span>(left));</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d9/d69/enum_8c.html#ab5b4e17c6fe8b24534ed09383f512b06">enumlock</a>);</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(middle, sep, <span class="keyword">sizeof</span>(middle) - 1);</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;      strcat(middle, <span class="stringliteral">&quot;.&quot;</span>);</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d9/d69/enum_8c.html#ab5b4e17c6fe8b24534ed09383f512b06">enumlock</a>);</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      <span class="comment">/* check the space we need for middle */</span></div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;      <span class="keywordflow">if</span> ((sdl * 2 + strlen(middle) + 2) &gt; <span class="keyword">sizeof</span>(middle)) {</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;ast_get_enum: not enough space for I-ENUM rewrite.\n&quot;</span>);</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(context);</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;      }</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      p1 = middle + strlen(middle);</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;      <span class="keywordflow">for</span> (p2 = (<span class="keywordtype">char</span> *) <a class="code" href="../../d6/d49/structnumber.html">number</a> + sdl - 1; p2 &gt;= <a class="code" href="../../d6/d49/structnumber.html">number</a>; p2--) {</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;         <span class="keywordflow">if</span> (isdigit(*p2)) {</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;            *p1++ = *p2;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;            *p1++ = <span class="charliteral">&#39;.&#39;</span>;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;         }</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      }</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      *p1 = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;I-ENUM: cclen=%d, left=%s, middle=&#39;%s&#39;, apex=&#39;%s&#39;\n&quot;</span>, cc_len, left, middle, apex);</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;   }</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;   <span class="keywordflow">if</span> (strlen(left) * 2 + 2 &gt; <span class="keyword">sizeof</span>(domain)) {</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;string to long in ast_get_enum\n&quot;</span>);</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(context);</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;   }</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;   <span class="comment">/* flip left into domain */</span></div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;   p1 = domain;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;   <span class="keywordflow">for</span> (p2 = left + strlen(left); p2 &gt;= left; p2--) {</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;      <span class="keywordflow">if</span> (isdigit(*p2)) {</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;         *p1++ = *p2;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;         *p1++ = <span class="charliteral">&#39;.&#39;</span>;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;      }</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;   }</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;   *p1 = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;   <span class="keywordflow">if</span> (chan &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#a7a8f6a50f3db42cb40cad7cfbd1d54f9">ast_autoservice_start</a>(chan) &lt; 0) {</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(context);</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;   }</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;   spaceleft = <span class="keyword">sizeof</span>(<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>) - 2;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(tmp, domain, spaceleft);</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;   spaceleft -= strlen(domain);</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;   <span class="keywordflow">if</span> (*middle) {</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;      strncat(tmp, middle, spaceleft);</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;      spaceleft -= strlen(middle);</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;   }</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;   strncat(tmp,apex,spaceleft);</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;   time_start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;   ret = <a class="code" href="../../d5/d2e/dns_8h.html#abc8f5d3913800604e2dc0e00d24d3bec">ast_search_dns</a>(context, tmp, C_IN, T_NAPTR, <a class="code" href="../../d9/d69/enum_8c.html#a9ba49a39ba5f3482aaf36940bd3596e1">enum_callback</a>);</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;   time_end = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;profiling: %s, %s, %&quot;</span> PRIi64 <span class="stringliteral">&quot; ms\n&quot;</span>,</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;         (ret == 0) ? <span class="stringliteral">&quot;OK&quot;</span> : <span class="stringliteral">&quot;FAIL&quot;</span>, tmp, <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(time_end, time_start));</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;   <span class="keywordflow">if</span> (ret &lt; 0) {</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;No such number found: %s (%s)\n&quot;</span>, tmp, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;      context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#aa0068b75c25dfc2c01a7c2471978e0c4">naptr_rrs_count</a> = -1;</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;      strcpy(dst, <span class="stringliteral">&quot;0&quot;</span>);</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;      ret = 0;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;   }</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;   <span class="keywordflow">if</span> (context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#aa0068b75c25dfc2c01a7c2471978e0c4">naptr_rrs_count</a> &gt;= context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a401e942526aac47cef94f478182486e7">position</a> &amp;&amp; ! (context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a849fa981f121eb25a67e4e14392840ba">options</a> &amp; <a class="code" href="../../d9/d69/enum_8c.html#a80568ff5362beeb0051699a8deaf1f1e">ENUMLOOKUP_OPTIONS_COUNT</a>)) {</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;      <span class="comment">/* sort array by NAPTR order/preference */</span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;      <span class="keywordflow">for</span> (k = 0; k &lt; context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#aa0068b75c25dfc2c01a7c2471978e0c4">naptr_rrs_count</a>; k++) {</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;         <span class="keywordflow">for</span> (i = 0; i &lt; context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#aa0068b75c25dfc2c01a7c2471978e0c4">naptr_rrs_count</a>; i++) {</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;            <span class="comment">/* use order first and then preference to compare */</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;            <span class="keywordflow">if</span> ((ntohs(context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[k].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#ae0f28558d5a1f46cb7f1b6dc3831f777">naptr</a>.<a class="code" href="../../dd/d3d/structnaptr.html#a1236fced09ddfa5eb51667d641632420">order</a>) &lt; ntohs(context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[i].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#ae0f28558d5a1f46cb7f1b6dc3831f777">naptr</a>.<a class="code" href="../../dd/d3d/structnaptr.html#a1236fced09ddfa5eb51667d641632420">order</a>)</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                 &amp;&amp; context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[k].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#af361f106e0a09ecd7f57c18d63ab969a">sort_pos</a> &gt; context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[i].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#af361f106e0a09ecd7f57c18d63ab969a">sort_pos</a>)</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                 || (ntohs(context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[k].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#ae0f28558d5a1f46cb7f1b6dc3831f777">naptr</a>.<a class="code" href="../../dd/d3d/structnaptr.html#a1236fced09ddfa5eb51667d641632420">order</a>) &gt; ntohs(context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[i].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#ae0f28558d5a1f46cb7f1b6dc3831f777">naptr</a>.<a class="code" href="../../dd/d3d/structnaptr.html#a1236fced09ddfa5eb51667d641632420">order</a>)</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                 &amp;&amp; context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[k].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#af361f106e0a09ecd7f57c18d63ab969a">sort_pos</a> &lt; context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[i].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#af361f106e0a09ecd7f57c18d63ab969a">sort_pos</a>)) {</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;               z = context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[k].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#af361f106e0a09ecd7f57c18d63ab969a">sort_pos</a>;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;               context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[k].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#af361f106e0a09ecd7f57c18d63ab969a">sort_pos</a> = context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[i].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#af361f106e0a09ecd7f57c18d63ab969a">sort_pos</a>;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;               context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[i].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#af361f106e0a09ecd7f57c18d63ab969a">sort_pos</a> = z;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;               <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;            }</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;            <span class="keywordflow">if</span> (ntohs(context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[k].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#ae0f28558d5a1f46cb7f1b6dc3831f777">naptr</a>.<a class="code" href="../../dd/d3d/structnaptr.html#a1236fced09ddfa5eb51667d641632420">order</a>) == ntohs(context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[i].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#ae0f28558d5a1f46cb7f1b6dc3831f777">naptr</a>.<a class="code" href="../../dd/d3d/structnaptr.html#a1236fced09ddfa5eb51667d641632420">order</a>)) {</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;               <span class="keywordflow">if</span> ((ntohs(context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[k].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#ae0f28558d5a1f46cb7f1b6dc3831f777">naptr</a>.<a class="code" href="../../dd/d3d/structnaptr.html#af3c600e3fe56bb2df9789ddb9e305492">pref</a>) &lt; ntohs(context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[i].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#ae0f28558d5a1f46cb7f1b6dc3831f777">naptr</a>.<a class="code" href="../../dd/d3d/structnaptr.html#af3c600e3fe56bb2df9789ddb9e305492">pref</a>)</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                    &amp;&amp; context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[k].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#af361f106e0a09ecd7f57c18d63ab969a">sort_pos</a> &gt; context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[i].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#af361f106e0a09ecd7f57c18d63ab969a">sort_pos</a>)</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                    || (ntohs(context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[k].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#ae0f28558d5a1f46cb7f1b6dc3831f777">naptr</a>.<a class="code" href="../../dd/d3d/structnaptr.html#af3c600e3fe56bb2df9789ddb9e305492">pref</a>) &gt; ntohs(context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[i].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#ae0f28558d5a1f46cb7f1b6dc3831f777">naptr</a>.<a class="code" href="../../dd/d3d/structnaptr.html#af3c600e3fe56bb2df9789ddb9e305492">pref</a>)</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                    &amp;&amp; context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[k].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#af361f106e0a09ecd7f57c18d63ab969a">sort_pos</a> &lt; context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[i].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#af361f106e0a09ecd7f57c18d63ab969a">sort_pos</a>)) {</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                  z = context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[k].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#af361f106e0a09ecd7f57c18d63ab969a">sort_pos</a>;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                  context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[k].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#af361f106e0a09ecd7f57c18d63ab969a">sort_pos</a> = context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[i].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#af361f106e0a09ecd7f57c18d63ab969a">sort_pos</a>;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                  context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[i].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#af361f106e0a09ecd7f57c18d63ab969a">sort_pos</a> = z;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;               }</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;            }</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;         }</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;      }</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;      <span class="keywordflow">for</span> (k = 0; k &lt; context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#aa0068b75c25dfc2c01a7c2471978e0c4">naptr_rrs_count</a>; k++) {</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;         <span class="keywordflow">if</span> (context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[k].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#af361f106e0a09ecd7f57c18d63ab969a">sort_pos</a> == context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a401e942526aac47cef94f478182486e7">position</a> - 1) {</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a4f15ee8aa627692edfd6bdfe9a45fbf9">dst</a>, context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[k].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#a179b70ad0fead86555368dc8edf9469e">result</a>, dstlen);</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#aeca41cda3ae501467b8637dbb685443b">tech</a>, context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[k].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#aeca41cda3ae501467b8637dbb685443b">tech</a>, techlen);</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;         }</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;      }</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!(context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a849fa981f121eb25a67e4e14392840ba">options</a> &amp; <a class="code" href="../../d9/d69/enum_8c.html#a80568ff5362beeb0051699a8deaf1f1e">ENUMLOOKUP_OPTIONS_COUNT</a>)) {</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;      context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a4f15ee8aa627692edfd6bdfe9a45fbf9">dst</a>[0] = 0;</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a849fa981f121eb25a67e4e14392840ba">options</a> &amp; <a class="code" href="../../d9/d69/enum_8c.html#a80568ff5362beeb0051699a8deaf1f1e">ENUMLOOKUP_OPTIONS_COUNT</a>)) {</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;      snprintf(context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a4f15ee8aa627692edfd6bdfe9a45fbf9">dst</a>, context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a09933d827be564d0a0afebe6ffa00773">dstlen</a>, <span class="stringliteral">&quot;%d&quot;</span>, context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#aa0068b75c25dfc2c01a7c2471978e0c4">naptr_rrs_count</a> + context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a>);</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;   }</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;   <span class="keywordflow">if</span> (chan) {</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;      ret |= <a class="code" href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a>(chan);</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;   }</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;   <span class="keywordflow">if</span> (!argcontext) {</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;      <span class="keywordflow">for</span> (k = 0; k &lt; context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#aa0068b75c25dfc2c01a7c2471978e0c4">naptr_rrs_count</a>; k++) {</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[k].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#a179b70ad0fead86555368dc8edf9469e">result</a>);</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[k].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#aeca41cda3ae501467b8637dbb685443b">tech</a>);</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;      }</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(context-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>);</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(context);</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;      *argcontext = <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;   }</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;}</div><div class="ttc" id="enum_8c_html_a9ba49a39ba5f3482aaf36940bd3596e1"><div class="ttname"><a href="../../d9/d69/enum_8c.html#a9ba49a39ba5f3482aaf36940bd3596e1">enum_callback</a></div><div class="ttdeci">static int enum_callback(void *context, unsigned char *answer, int len, unsigned char *fullanswer)</div><div class="ttdoc">Callback from ENUM lookup function. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00616">enum.c:616</a></div></div>
<div class="ttc" id="enum_8c_html_a80568ff5362beeb0051699a8deaf1f1e"><div class="ttname"><a href="../../d9/d69/enum_8c.html#a80568ff5362beeb0051699a8deaf1f1e">ENUMLOOKUP_OPTIONS_COUNT</a></div><div class="ttdeci">#define ENUMLOOKUP_OPTIONS_COUNT</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00607">enum.c:607</a></div></div>
<div class="ttc" id="channel_8h_html_a7a8f6a50f3db42cb40cad7cfbd1d54f9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7a8f6a50f3db42cb40cad7cfbd1d54f9">ast_autoservice_start</a></div><div class="ttdeci">int ast_autoservice_start(struct ast_channel *chan)</div><div class="ttdoc">Automatically service a channel for us... </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00200">autoservice.c:200</a></div></div>
<div class="ttc" id="structenum__context_html_ad43c3812e6d13e0518d9f8b8f463ffcf"><div class="ttname"><a href="../../d7/d26/structenum__context.html#ad43c3812e6d13e0518d9f8b8f463ffcf">enum_context::count</a></div><div class="ttdeci">int count</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00049">enum.h:49</a></div></div>
<div class="ttc" id="enum_8c_html_a48dbbc896e14cd8cab443a8066ea1e8b"><div class="ttname"><a href="../../d9/d69/enum_8c.html#a48dbbc896e14cd8cab443a8066ea1e8b">ienum_branchlabel</a></div><div class="ttdeci">static char ienum_branchlabel[32]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00091">enum.c:91</a></div></div>
<div class="ttc" id="structenum__context_html_accaf620f3e890f0fbf1c86a605f65472"><div class="ttname"><a href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">enum_context::naptr_rrs</a></div><div class="ttdeci">struct enum_naptr_rr * naptr_rrs</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00051">enum.h:51</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="dns_8h_html_abc8f5d3913800604e2dc0e00d24d3bec"><div class="ttname"><a href="../../d5/d2e/dns_8h.html#abc8f5d3913800604e2dc0e00d24d3bec">ast_search_dns</a></div><div class="ttdeci">int ast_search_dns(void *context, const char *dname, int class, int type, int(*callback)(void *context, unsigned char *answer, int len, unsigned char *fullanswer))</div><div class="ttdoc">Perform DNS lookup (used by DNS, enum and SRV lookups) </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d54/dns_8c_source.html#l00493">dns.c:493</a></div></div>
<div class="ttc" id="enum_8c_html_aa2e89a9afd23d7f94e608e1474832091"><div class="ttname"><a href="../../d9/d69/enum_8c.html#aa2e89a9afd23d7f94e608e1474832091">cclen</a></div><div class="ttdeci">static int cclen(const char *number)</div><div class="ttdoc">Determine the length of a country code when given an E.164 string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00116">enum.c:116</a></div></div>
<div class="ttc" id="enum_8c_html_ab5b4e17c6fe8b24534ed09383f512b06"><div class="ttname"><a href="../../d9/d69/enum_8c.html#ab5b4e17c6fe8b24534ed09383f512b06">enumlock</a></div><div class="ttdeci">static ast_mutex_t enumlock</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00101">enum.c:101</a></div></div>
<div class="ttc" id="enum_8c_html_afe913060145c35f4046f5245b2534cf9"><div class="ttname"><a href="../../d9/d69/enum_8c.html#afe913060145c35f4046f5245b2534cf9">ebl_alg</a></div><div class="ttdeci">static int ebl_alg</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00096">enum.c:96</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="structnaptr_html_af3c600e3fe56bb2df9789ddb9e305492"><div class="ttname"><a href="../../dd/d3d/structnaptr.html#af3c600e3fe56bb2df9789ddb9e305492">naptr::pref</a></div><div class="ttdeci">unsigned short pref</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00030">enum.h:30</a></div></div>
<div class="ttc" id="structenum__context_html_a09933d827be564d0a0afebe6ffa00773"><div class="ttname"><a href="../../d7/d26/structenum__context.html#a09933d827be564d0a0afebe6ffa00773">enum_context::dstlen</a></div><div class="ttdeci">int dstlen</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00042">enum.h:42</a></div></div>
<div class="ttc" id="structenum__context_html_a401e942526aac47cef94f478182486e7"><div class="ttname"><a href="../../d7/d26/structenum__context.html#a401e942526aac47cef94f478182486e7">enum_context::position</a></div><div class="ttdeci">int position</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00048">enum.h:48</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structdomain_html"><div class="ttname"><a href="../../dd/dac/structdomain.html">domain</a></div><div class="ttdoc">Domain data structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00888">sip.h:888</a></div></div>
<div class="ttc" id="enum_8c_html_adfc40e04d7adfed812da4647e65d683e"><div class="ttname"><a href="../../d9/d69/enum_8c.html#adfc40e04d7adfed812da4647e65d683e">ENUMLOOKUP_OPTIONS_DIRECT</a></div><div class="ttdeci">#define ENUMLOOKUP_OPTIONS_DIRECT</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00613">enum.c:613</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="enum_8c_html_a4e7355b2e878225f47929cd3bb0276bc"><div class="ttname"><a href="../../d9/d69/enum_8c.html#a4e7355b2e878225f47929cd3bb0276bc">ENUMLOOKUP_BLR_CC</a></div><div class="ttdeci">#define ENUMLOOKUP_BLR_CC</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00093">enum.c:93</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="enum_8c_html_a8e005634423607f0e6b0217338a162eb"><div class="ttname"><a href="../../d9/d69/enum_8c.html#a8e005634423607f0e6b0217338a162eb">ENUMLOOKUP_BLR_EBL</a></div><div class="ttdeci">#define ENUMLOOKUP_BLR_EBL</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00095">enum.c:95</a></div></div>
<div class="ttc" id="structenum__context_html_a970f0bd322ba19ad9f14eaa6ecb1a814"><div class="ttname"><a href="../../d7/d26/structenum__context.html#a970f0bd322ba19ad9f14eaa6ecb1a814">enum_context::techlen</a></div><div class="ttdeci">int techlen</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00044">enum.h:44</a></div></div>
<div class="ttc" id="structenum__context_html_a4f15ee8aa627692edfd6bdfe9a45fbf9"><div class="ttname"><a href="../../d7/d26/structenum__context.html#a4f15ee8aa627692edfd6bdfe9a45fbf9">enum_context::dst</a></div><div class="ttdeci">char * dst</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00041">enum.h:41</a></div></div>
<div class="ttc" id="structenum__context_html"><div class="ttname"><a href="../../d7/d26/structenum__context.html">enum_context</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00040">enum.h:40</a></div></div>
<div class="ttc" id="structnaptr_html_a1236fced09ddfa5eb51667d641632420"><div class="ttname"><a href="../../dd/d3d/structnaptr.html#a1236fced09ddfa5eb51667d641632420">naptr::order</a></div><div class="ttdeci">unsigned short order</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00029">enum.h:29</a></div></div>
<div class="ttc" id="structenum__naptr__rr_html_ae0f28558d5a1f46cb7f1b6dc3831f777"><div class="ttname"><a href="../../d2/d04/structenum__naptr__rr.html#ae0f28558d5a1f46cb7f1b6dc3831f777">enum_naptr_rr::naptr</a></div><div class="ttdeci">struct naptr naptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00034">enum.h:34</a></div></div>
<div class="ttc" id="structenum__context_html_a4d469e97d6119219edc9215e90622397"><div class="ttname"><a href="../../d7/d26/structenum__context.html#a4d469e97d6119219edc9215e90622397">enum_context::naptrinput</a></div><div class="ttdeci">char * naptrinput</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00047">enum.h:47</a></div></div>
<div class="ttc" id="structenum__naptr__rr_html_aeca41cda3ae501467b8637dbb685443b"><div class="ttname"><a href="../../d2/d04/structenum__naptr__rr.html#aeca41cda3ae501467b8637dbb685443b">enum_naptr_rr::tech</a></div><div class="ttdeci">char * tech</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00036">enum.h:36</a></div></div>
<div class="ttc" id="channel_8h_html_a08bde7d8cf72457fc8c519a4443b413b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a></div><div class="ttdeci">int ast_autoservice_stop(struct ast_channel *chan)</div><div class="ttdoc">Stop servicing a channel for us... </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00266">autoservice.c:266</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structenum__naptr__rr_html_a179b70ad0fead86555368dc8edf9469e"><div class="ttname"><a href="../../d2/d04/structenum__naptr__rr.html#a179b70ad0fead86555368dc8edf9469e">enum_naptr_rr::result</a></div><div class="ttdeci">char * result</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00035">enum.h:35</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="structenum__context_html_aa0068b75c25dfc2c01a7c2471978e0c4"><div class="ttname"><a href="../../d7/d26/structenum__context.html#aa0068b75c25dfc2c01a7c2471978e0c4">enum_context::naptr_rrs_count</a></div><div class="ttdeci">int naptr_rrs_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00052">enum.h:52</a></div></div>
<div class="ttc" id="enum_8c_html_acafdc00da9410652ffa46b5cc6653f90"><div class="ttname"><a href="../../d9/d69/enum_8c.html#acafdc00da9410652ffa46b5cc6653f90">ENUMLOOKUP_OPTIONS_IENUM</a></div><div class="ttdeci">#define ENUMLOOKUP_OPTIONS_IENUM</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00611">enum.c:611</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="structenum__context_html_aeca41cda3ae501467b8637dbb685443b"><div class="ttname"><a href="../../d7/d26/structenum__context.html#aeca41cda3ae501467b8637dbb685443b">enum_context::tech</a></div><div class="ttdeci">char * tech</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00043">enum.h:43</a></div></div>
<div class="ttc" id="structenum__naptr__rr_html_af361f106e0a09ecd7f57c18d63ab969a"><div class="ttname"><a href="../../d2/d04/structenum__naptr__rr.html#af361f106e0a09ecd7f57c18d63ab969a">enum_naptr_rr::sort_pos</a></div><div class="ttdeci">int sort_pos</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00037">enum.h:37</a></div></div>
<div class="ttc" id="enum_8c_html_ab63c80a29b183ad5b4f85fb5cdfcbf11"><div class="ttname"><a href="../../d9/d69/enum_8c.html#ab63c80a29b183ad5b4f85fb5cdfcbf11">ENUMLOOKUP_OPTIONS_ISN</a></div><div class="ttdeci">#define ENUMLOOKUP_OPTIONS_ISN</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00609">enum.c:609</a></div></div>
<div class="ttc" id="structenum__context_html_a849fa981f121eb25a67e4e14392840ba"><div class="ttname"><a href="../../d7/d26/structenum__context.html#a849fa981f121eb25a67e4e14392840ba">enum_context::options</a></div><div class="ttdeci">int options</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00050">enum.h:50</a></div></div>
<div class="ttc" id="enum_8c_html_a3f852d573c62b08575b25c76d5e837f6"><div class="ttname"><a href="../../d9/d69/enum_8c.html#a3f852d573c62b08575b25c76d5e837f6">ENUMLOOKUP_BLR_TXT</a></div><div class="ttdeci">#define ENUMLOOKUP_BLR_TXT</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00094">enum.c:94</a></div></div>
<div class="ttc" id="enum_8c_html_abb116596bc2ed451c606f1a45a16b3b2"><div class="ttname"><a href="../../d9/d69/enum_8c.html#abb116596bc2ed451c606f1a45a16b3b2">blr_txt</a></div><div class="ttdeci">static int blr_txt(const char *cc, const char *suffix)</div><div class="ttdoc">Determine the branch location record as stored in a TXT record. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00201">enum.c:201</a></div></div>
<div class="ttc" id="enum_8c_html_a13d957694dbb782613d0050d80492766"><div class="ttname"><a href="../../d9/d69/enum_8c.html#a13d957694dbb782613d0050d80492766">blr_ebl</a></div><div class="ttdeci">static int blr_ebl(const char *cc, const char *suffix, char *separator, int sep_len, char *apex, int apex_len)</div><div class="ttdoc">Evaluate the I-ENUM branch as stored in an EBL record. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00330">enum.c:330</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa5ca3b2f15708286d89601ca842fc406"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5ca3b2f15708286d89601ca842fc406">&#9670;&nbsp;</a></span>ast_get_txt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_get_txt </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>txt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxtxt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>suffix</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lookup DNS TXT record (used by app TXTCIDnum) </p>
<p>Really has nothing to do with enum, but anyway... Actually, there is now an internet-draft which describes how callerID should be stored in ENUM domains: draft-ietf-enum-cnam-04.txt The algorithm implemented here will thus be obsolete soon.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>Channel </td></tr>
    <tr><td class="paramname">number</td><td>E164 number with or without the leading + </td></tr>
    <tr><td class="paramname">txt</td><td>Text string (return value) </td></tr>
    <tr><td class="paramname">maxtxt</td><td>Max length of "txt" </td></tr>
    <tr><td class="paramname">suffix</td><td>Zone suffix </td></tr>
  </table>
  </dd>
</dl>
<dl class="section version"><dt>Version</dt><dd>1.6.1 new suffix parameter to take into account caller ids that aren't in e164.arpa </dd>
<dd>
1.6.1 removed parameters location, maxloc, technology, maxtech as all the information is stored the txt string </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d69/enum_8c_source.html#l00995">995</a> of file <a class="el" href="../../d9/d69/enum_8c_source.html">enum.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00200">ast_autoservice_start()</a>, <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00266">ast_autoservice_stop()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d9/d54/dns_8c_source.html#l00493">ast_search_dns()</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00955">format_numeric_domain()</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00146">txt_context::txt</a>, and <a class="el" href="../../d9/d69/enum_8c_source.html#l00151">txt_callback()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d5e/func__enum_8c_source.html#l00415">function_txtcidname()</a>.</p>
<div class="fragment"><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;{</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d24/structtxt__context.html">txt_context</a> <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dd/dac/structdomain.html">domain</a>;</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;   <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;   <span class="keywordtype">int</span> autoservice = 0;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(4, <span class="stringliteral">&quot;ast_get_txt: Number = &#39;%s&#39;, suffix = &#39;%s&#39;\n&quot;</span>, <a class="code" href="../../d6/d49/structnumber.html">number</a>, suffix);</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;   domain = <a class="code" href="../../d9/d69/enum_8c.html#ad7ed966c35564a15cb41b284e0688875">format_numeric_domain</a>(<a class="code" href="../../d6/d49/structnumber.html">number</a>, suffix);</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;   <span class="keywordflow">if</span> (!domain) {</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;   }</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;   <span class="keywordflow">if</span> (chan) {</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;      <span class="comment">/* DNS might take a while, so service the channel while we&#39;re blocked */</span></div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;      autoservice = !<a class="code" href="../../d5/d7b/channel_8h.html#a7a8f6a50f3db42cb40cad7cfbd1d54f9">ast_autoservice_start</a>(chan);</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;   }</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;   ret = <a class="code" href="../../d5/d2e/dns_8h.html#abc8f5d3913800604e2dc0e00d24d3bec">ast_search_dns</a>(&amp;<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, domain, C_IN, T_TXT, <a class="code" href="../../d9/d69/enum_8c.html#a3a2531890675bb9a57fa13f5de4e6077">txt_callback</a>);</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;   <span class="keywordflow">if</span> (ret &gt; 0) {</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d9/d24/structtxt__context.html#acb36e435643b51ae1771f87bb67234f6">txt</a>, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>.txt, <a class="code" href="../../d9/d24/structtxt__context.html#a44c4a1bb01729a965d38e3e59d601f93">txtlen</a>);</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;No such number found in ENUM: %s (%s)\n&quot;</span>, domain, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;   }</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;   <span class="keywordflow">if</span> (autoservice) {</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a>(chan);</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;   }</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(domain);</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;}</div><div class="ttc" id="structtxt__context_html_acb36e435643b51ae1771f87bb67234f6"><div class="ttname"><a href="../../d9/d24/structtxt__context.html#acb36e435643b51ae1771f87bb67234f6">txt_context::txt</a></div><div class="ttdeci">char txt[1024]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00146">enum.c:146</a></div></div>
<div class="ttc" id="channel_8h_html_a7a8f6a50f3db42cb40cad7cfbd1d54f9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7a8f6a50f3db42cb40cad7cfbd1d54f9">ast_autoservice_start</a></div><div class="ttdeci">int ast_autoservice_start(struct ast_channel *chan)</div><div class="ttdoc">Automatically service a channel for us... </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00200">autoservice.c:200</a></div></div>
<div class="ttc" id="dns_8h_html_abc8f5d3913800604e2dc0e00d24d3bec"><div class="ttname"><a href="../../d5/d2e/dns_8h.html#abc8f5d3913800604e2dc0e00d24d3bec">ast_search_dns</a></div><div class="ttdeci">int ast_search_dns(void *context, const char *dname, int class, int type, int(*callback)(void *context, unsigned char *answer, int len, unsigned char *fullanswer))</div><div class="ttdoc">Perform DNS lookup (used by DNS, enum and SRV lookups) </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d54/dns_8c_source.html#l00493">dns.c:493</a></div></div>
<div class="ttc" id="structdomain_html"><div class="ttname"><a href="../../dd/dac/structdomain.html">domain</a></div><div class="ttdoc">Domain data structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00888">sip.h:888</a></div></div>
<div class="ttc" id="structtxt__context_html_a44c4a1bb01729a965d38e3e59d601f93"><div class="ttname"><a href="../../d9/d24/structtxt__context.html#a44c4a1bb01729a965d38e3e59d601f93">txt_context::txtlen</a></div><div class="ttdeci">int txtlen</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00147">enum.c:147</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="structtxt__context_html"><div class="ttname"><a href="../../d9/d24/structtxt__context.html">txt_context</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00145">enum.c:145</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="enum_8c_html_ad7ed966c35564a15cb41b284e0688875"><div class="ttname"><a href="../../d9/d69/enum_8c.html#ad7ed966c35564a15cb41b284e0688875">format_numeric_domain</a></div><div class="ttdeci">static char * format_numeric_domain(const char *number, const char *suffix)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00955">enum.c:955</a></div></div>
<div class="ttc" id="channel_8h_html_a08bde7d8cf72457fc8c519a4443b413b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a></div><div class="ttdeci">int ast_autoservice_stop(struct ast_channel *chan)</div><div class="ttdoc">Stop servicing a channel for us... </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00266">autoservice.c:266</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="enum_8c_html_a3a2531890675bb9a57fa13f5de4e6077"><div class="ttname"><a href="../../d9/d69/enum_8c.html#a3a2531890675bb9a57fa13f5de4e6077">txt_callback</a></div><div class="ttdeci">static int txt_callback(void *context, unsigned char *answer, int len, unsigned char *fullanswer)</div><div class="ttdoc">Callback for TXT record lookup, /ol version. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00151">enum.c:151</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d69/enum_8c_source.html#l01089">1089</a> of file <a class="el" href="../../d9/d69/enum_8c_source.html">enum.c</a>.</p>

</div>
</div>
<a id="a13d957694dbb782613d0050d80492766"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13d957694dbb782613d0050d80492766">&#9670;&nbsp;</a></span>blr_ebl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int blr_ebl </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>suffix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>separator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sep_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>apex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>apex_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Evaluate the I-ENUM branch as stored in an EBL record. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d69/enum_8c_source.html#l00330">330</a> of file <a class="el" href="../../d9/d69/enum_8c_source.html">enum.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d69/enum_8c_source.html#l00251">ebl_context::apex</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d9/d54/dns_8c_source.html#l00493">ast_search_dns()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00256">ebl_callback()</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00101">enumlock</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00091">ienum_branchlabel</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00248">ebl_context::pos</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00249">ebl_context::separator</a>, and <a class="el" href="../../d9/d69/enum_8c_source.html#l00099">T_EBL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d69/enum_8c_source.html#l00649">ast_get_enum()</a>.</p>
<div class="fragment"><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;{</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d18/structebl__context.html">ebl_context</a> <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/dac/structdomain.html">domain</a>[128] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;   <span class="keywordtype">char</span> *p1,*p2;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;   <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d9/d69/enum_8c.html#ab5b4e17c6fe8b24534ed09383f512b06">enumlock</a>);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;blr_ebl()  cc=&#39;%s&#39;, suffix=&#39;%s&#39;, c_bl=&#39;%s&#39;\n&quot;</span>, cc, suffix, <a class="code" href="../../d9/d69/enum_8c.html#a48dbbc896e14cd8cab443a8066ea1e8b">ienum_branchlabel</a>);</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;   <span class="keywordflow">if</span> (<span class="keyword">sizeof</span>(domain) &lt; (strlen(cc) * 2 + strlen(<a class="code" href="../../d9/d69/enum_8c.html#a48dbbc896e14cd8cab443a8066ea1e8b">ienum_branchlabel</a>) + strlen(suffix) + 2)) {</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d9/d69/enum_8c.html#ab5b4e17c6fe8b24534ed09383f512b06">enumlock</a>);</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;ERROR: string sizing in blr_EBL.\n&quot;</span>);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;   }</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;   p1 = domain + snprintf(domain, <span class="keyword">sizeof</span>(domain), <span class="stringliteral">&quot;%s.&quot;</span>, <a class="code" href="../../d9/d69/enum_8c.html#a48dbbc896e14cd8cab443a8066ea1e8b">ienum_branchlabel</a>);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d9/d69/enum_8c.html#ab5b4e17c6fe8b24534ed09383f512b06">enumlock</a>);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;   <span class="keywordflow">for</span> (p2 = (<span class="keywordtype">char</span> *) cc + strlen(cc) - 1; p2 &gt;= cc; p2--) {</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      <span class="keywordflow">if</span> (isdigit(*p2)) {</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;         *p1++ = *p2;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;         *p1++ = <span class="charliteral">&#39;.&#39;</span>;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      }</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   }</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;   strcat(p1, suffix);</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;blr_ebl() FQDN for EBL record: %s, cc was %s\n&quot;</span>, domain, cc);</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;   ret = <a class="code" href="../../d5/d2e/dns_8h.html#abc8f5d3913800604e2dc0e00d24d3bec">ast_search_dns</a>(&amp;<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, domain, C_IN, <a class="code" href="../../d9/d69/enum_8c.html#a0c884729687293ffab765d9e2671d7d3">T_EBL</a>, <a class="code" href="../../d9/d69/enum_8c.html#a6470fc87061b2ff61ab281df67d7644f">ebl_callback</a>);</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;   <span class="keywordflow">if</span> (ret &gt; 0) {</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      ret = <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>.pos;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      <span class="keywordflow">if</span> ((ret &gt;= 0) &amp;&amp; (ret &lt; 20)) {</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;blr_txt() BLR EBL record for %s is %d/%s/%s)\n&quot;</span>, cc, ret, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>.separator, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>.apex);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d2/d18/structebl__context.html#a23a5fb0219b2e3e690b50c7f452bb15f">separator</a>, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>.separator, <a class="code" href="../../d2/d18/structebl__context.html#af4bc4973ff0431233213c465f50a575a">sep_len</a>);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d2/d18/structebl__context.html#a05b12e2b60387c5a39427ab646768bff">apex</a>, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>.apex, <a class="code" href="../../d2/d18/structebl__context.html#a9481efdd361e31c5b20056e16a33bab7">apex_len</a>);</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;         <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      }</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;   }</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;blr_txt() BLR EBL record for %s not found (apex: %s)\n&quot;</span>, cc, suffix);</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;}</div><div class="ttc" id="enum_8c_html_a48dbbc896e14cd8cab443a8066ea1e8b"><div class="ttname"><a href="../../d9/d69/enum_8c.html#a48dbbc896e14cd8cab443a8066ea1e8b">ienum_branchlabel</a></div><div class="ttdeci">static char ienum_branchlabel[32]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00091">enum.c:91</a></div></div>
<div class="ttc" id="structebl__context_html_a9481efdd361e31c5b20056e16a33bab7"><div class="ttname"><a href="../../d2/d18/structebl__context.html#a9481efdd361e31c5b20056e16a33bab7">ebl_context::apex_len</a></div><div class="ttdeci">int apex_len</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00252">enum.c:252</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="dns_8h_html_abc8f5d3913800604e2dc0e00d24d3bec"><div class="ttname"><a href="../../d5/d2e/dns_8h.html#abc8f5d3913800604e2dc0e00d24d3bec">ast_search_dns</a></div><div class="ttdeci">int ast_search_dns(void *context, const char *dname, int class, int type, int(*callback)(void *context, unsigned char *answer, int len, unsigned char *fullanswer))</div><div class="ttdoc">Perform DNS lookup (used by DNS, enum and SRV lookups) </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d54/dns_8c_source.html#l00493">dns.c:493</a></div></div>
<div class="ttc" id="enum_8c_html_ab5b4e17c6fe8b24534ed09383f512b06"><div class="ttname"><a href="../../d9/d69/enum_8c.html#ab5b4e17c6fe8b24534ed09383f512b06">enumlock</a></div><div class="ttdeci">static ast_mutex_t enumlock</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00101">enum.c:101</a></div></div>
<div class="ttc" id="structebl__context_html"><div class="ttname"><a href="../../d2/d18/structebl__context.html">ebl_context</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00247">enum.c:247</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="structdomain_html"><div class="ttname"><a href="../../dd/dac/structdomain.html">domain</a></div><div class="ttdoc">Domain data structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00888">sip.h:888</a></div></div>
<div class="ttc" id="structebl__context_html_a23a5fb0219b2e3e690b50c7f452bb15f"><div class="ttname"><a href="../../d2/d18/structebl__context.html#a23a5fb0219b2e3e690b50c7f452bb15f">ebl_context::separator</a></div><div class="ttdeci">char separator[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00249">enum.c:249</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="structebl__context_html_af4bc4973ff0431233213c465f50a575a"><div class="ttname"><a href="../../d2/d18/structebl__context.html#af4bc4973ff0431233213c465f50a575a">ebl_context::sep_len</a></div><div class="ttdeci">int sep_len</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00250">enum.c:250</a></div></div>
<div class="ttc" id="structebl__context_html_a05b12e2b60387c5a39427ab646768bff"><div class="ttname"><a href="../../d2/d18/structebl__context.html#a05b12e2b60387c5a39427ab646768bff">ebl_context::apex</a></div><div class="ttdeci">char apex[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00251">enum.c:251</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="enum_8c_html_a0c884729687293ffab765d9e2671d7d3"><div class="ttname"><a href="../../d9/d69/enum_8c.html#a0c884729687293ffab765d9e2671d7d3">T_EBL</a></div><div class="ttdeci">#define T_EBL</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00099">enum.c:99</a></div></div>
<div class="ttc" id="enum_8c_html_a6470fc87061b2ff61ab281df67d7644f"><div class="ttname"><a href="../../d9/d69/enum_8c.html#a6470fc87061b2ff61ab281df67d7644f">ebl_callback</a></div><div class="ttdeci">static int ebl_callback(void *context, unsigned char *answer, int len, unsigned char *fullanswer)</div><div class="ttdoc">Callback for EBL record lookup. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00256">enum.c:256</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abb116596bc2ed451c606f1a45a16b3b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb116596bc2ed451c606f1a45a16b3b2">&#9670;&nbsp;</a></span>blr_txt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int blr_txt </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>suffix</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine the branch location record as stored in a TXT record. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d69/enum_8c_source.html#l00201">201</a> of file <a class="el" href="../../d9/d69/enum_8c_source.html">enum.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d9/d54/dns_8c_source.html#l00493">ast_search_dns()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00101">enumlock</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00091">ienum_branchlabel</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00146">txt_context::txt</a>, and <a class="el" href="../../d9/d69/enum_8c_source.html#l00151">txt_callback()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d69/enum_8c_source.html#l00649">ast_get_enum()</a>.</p>
<div class="fragment"><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;{</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d24/structtxt__context.html">txt_context</a> <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/dac/structdomain.html">domain</a>[128] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;   <span class="keywordtype">char</span> *p1, *p2;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;   <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d9/d69/enum_8c.html#ab5b4e17c6fe8b24534ed09383f512b06">enumlock</a>);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;blr_txt()  cc=&#39;%s&#39;, suffix=&#39;%s&#39;, c_bl=&#39;%s&#39;\n&quot;</span>, cc, suffix, <a class="code" href="../../d9/d69/enum_8c.html#a48dbbc896e14cd8cab443a8066ea1e8b">ienum_branchlabel</a>);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;   <span class="keywordflow">if</span> (<span class="keyword">sizeof</span>(domain) &lt; (strlen(cc) * 2 + strlen(<a class="code" href="../../d9/d69/enum_8c.html#a48dbbc896e14cd8cab443a8066ea1e8b">ienum_branchlabel</a>) + strlen(suffix) + 2)) {</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d9/d69/enum_8c.html#ab5b4e17c6fe8b24534ed09383f512b06">enumlock</a>);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;ERROR: string sizing in blr_txt.\n&quot;</span>);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;   }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;   p1 = domain + snprintf(domain, <span class="keyword">sizeof</span>(domain), <span class="stringliteral">&quot;%s.&quot;</span>, <a class="code" href="../../d9/d69/enum_8c.html#a48dbbc896e14cd8cab443a8066ea1e8b">ienum_branchlabel</a>);</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d9/d69/enum_8c.html#ab5b4e17c6fe8b24534ed09383f512b06">enumlock</a>);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;   <span class="keywordflow">for</span> (p2 = (<span class="keywordtype">char</span> *) cc + strlen(cc) - 1; p2 &gt;= cc; p2--) {</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <span class="keywordflow">if</span> (isdigit(*p2)) {</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;         *p1++ = *p2;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;         *p1++ = <span class="charliteral">&#39;.&#39;</span>;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      }</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;   }</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;   strcat(p1, suffix);</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;blr_txt() FQDN for TXT record: %s, cc was %s\n&quot;</span>, domain, cc);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;   ret = <a class="code" href="../../d5/d2e/dns_8h.html#abc8f5d3913800604e2dc0e00d24d3bec">ast_search_dns</a>(&amp;<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, domain, C_IN, T_TXT, <a class="code" href="../../d9/d69/enum_8c.html#a3a2531890675bb9a57fa13f5de4e6077">txt_callback</a>);</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;   <span class="keywordflow">if</span> (ret &gt; 0) {</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      ret = atoi(<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>.txt);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;      <span class="keywordflow">if</span> ((ret &gt;= 0) &amp;&amp; (ret &lt; 20)) {</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;blr_txt() BLR TXT record for %s is %d (apex: %s)\n&quot;</span>, cc, ret, suffix);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;         <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      }</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;   }</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;blr_txt() BLR TXT record for %s not found (apex: %s)\n&quot;</span>, cc, suffix);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;}</div><div class="ttc" id="enum_8c_html_a48dbbc896e14cd8cab443a8066ea1e8b"><div class="ttname"><a href="../../d9/d69/enum_8c.html#a48dbbc896e14cd8cab443a8066ea1e8b">ienum_branchlabel</a></div><div class="ttdeci">static char ienum_branchlabel[32]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00091">enum.c:91</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="dns_8h_html_abc8f5d3913800604e2dc0e00d24d3bec"><div class="ttname"><a href="../../d5/d2e/dns_8h.html#abc8f5d3913800604e2dc0e00d24d3bec">ast_search_dns</a></div><div class="ttdeci">int ast_search_dns(void *context, const char *dname, int class, int type, int(*callback)(void *context, unsigned char *answer, int len, unsigned char *fullanswer))</div><div class="ttdoc">Perform DNS lookup (used by DNS, enum and SRV lookups) </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d54/dns_8c_source.html#l00493">dns.c:493</a></div></div>
<div class="ttc" id="enum_8c_html_ab5b4e17c6fe8b24534ed09383f512b06"><div class="ttname"><a href="../../d9/d69/enum_8c.html#ab5b4e17c6fe8b24534ed09383f512b06">enumlock</a></div><div class="ttdeci">static ast_mutex_t enumlock</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00101">enum.c:101</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="structdomain_html"><div class="ttname"><a href="../../dd/dac/structdomain.html">domain</a></div><div class="ttdoc">Domain data structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00888">sip.h:888</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="structtxt__context_html"><div class="ttname"><a href="../../d9/d24/structtxt__context.html">txt_context</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00145">enum.c:145</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="enum_8c_html_a3a2531890675bb9a57fa13f5de4e6077"><div class="ttname"><a href="../../d9/d69/enum_8c.html#a3a2531890675bb9a57fa13f5de4e6077">txt_callback</a></div><div class="ttdeci">static int txt_callback(void *context, unsigned char *answer, int len, unsigned char *fullanswer)</div><div class="ttdoc">Callback for TXT record lookup, /ol version. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00151">enum.c:151</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa2e89a9afd23d7f94e608e1474832091"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2e89a9afd23d7f94e608e1474832091">&#9670;&nbsp;</a></span>cclen()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int cclen </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>number</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine the length of a country code when given an E.164 string. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d69/enum_8c_source.html#l00116">116</a> of file <a class="el" href="../../d9/d69/enum_8c_source.html">enum.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d69/enum_8c_source.html#l00649">ast_get_enum()</a>.</p>
<div class="fragment"><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;{</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;   <span class="keywordtype">int</span> cc;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;   <span class="keywordtype">char</span> digits[3] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d49/structnumber.html">number</a> || (strlen(<a class="code" href="../../d6/d49/structnumber.html">number</a>) &lt; 3)) {</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;   }</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;   strncpy(digits, <a class="code" href="../../d6/d49/structnumber.html">number</a>, 2);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;   <span class="keywordflow">if</span> (!sscanf(digits, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;cc)) {</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;   }</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;   <span class="keywordflow">if</span> (cc / 10 == 1 || cc / 10 == 7)</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;   <span class="keywordflow">if</span> (cc == 20 || cc == 27 || (cc &gt;= 30 &amp;&amp; cc &lt;= 34) || cc == 36 ||</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;       cc == 39 || cc == 40 || cc == 41 || (cc &gt;= 40 &amp;&amp; cc &lt;= 41) ||</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;       (cc &gt;= 43 &amp;&amp; cc &lt;= 49) || (cc &gt;= 51 &amp;&amp; cc &lt;= 58) ||</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;       (cc &gt;= 60 &amp;&amp; cc &lt;= 66) || cc == 81 || cc == 82 || cc == 84 ||</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;       cc == 86 || (cc &gt;= 90 &amp;&amp; cc &lt;= 95) || cc == 98) {</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;      <span class="keywordflow">return</span> 2;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;   }</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;   <span class="keywordflow">return</span> 3;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;}</div><div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6470fc87061b2ff61ab281df67d7644f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6470fc87061b2ff61ab281df67d7644f">&#9670;&nbsp;</a></span>ebl_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ebl_callback </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>answer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>fullanswer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback for EBL record lookup. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d69/enum_8c_source.html#l00256">256</a> of file <a class="el" href="../../d9/d69/enum_8c_source.html">enum.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d69/enum_8c_source.html#l00251">ebl_context::apex</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00252">ebl_context::apex_len</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00116">context</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00248">ebl_context::pos</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00250">ebl_context::sep_len</a>, and <a class="el" href="../../d9/d69/enum_8c_source.html#l00249">ebl_context::separator</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d69/enum_8c_source.html#l00330">blr_ebl()</a>.</p>
<div class="fragment"><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;{</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d18/structebl__context.html">ebl_context</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a> = <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;   c-&gt;<a class="code" href="../../d2/d18/structebl__context.html#a41131cac800b4397c812f7b18ad18c73">pos</a> = 0; <span class="comment">/* default to empty */</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;   c-&gt;<a class="code" href="../../d2/d18/structebl__context.html#a23a5fb0219b2e3e690b50c7f452bb15f">separator</a>[0] = 0;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;   c-&gt;<a class="code" href="../../d2/d18/structebl__context.html#af4bc4973ff0431233213c465f50a575a">sep_len</a> = 0;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;   c-&gt;<a class="code" href="../../d2/d18/structebl__context.html#a05b12e2b60387c5a39427ab646768bff">apex</a>[0] = 0;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;   c-&gt;<a class="code" href="../../d2/d18/structebl__context.html#a9481efdd361e31c5b20056e16a33bab7">apex_len</a> = 0;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a> == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;   }</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;   <span class="comment">/* draft-lendl-enum-branch-location-record-00</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">    *      0  1  2  3  4  5  6  7</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">    *    +--+--+--+--+--+--+--+--+</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">    *    |       POSITION        |</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">    *    +--+--+--+--+--+--+--+--+</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">    *    /       SEPARATOR       /</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">    *    +--+--+--+--+--+--+--+--+</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">    *    /         APEX          /</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">    *    +--+--+--+--+--+--+--+--+</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">    *  where POSITION is a single byte, SEPARATOR is a &lt;character-string&gt;</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">    *  and APEX is a &lt;domain-name&gt;.</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;   c-&gt;<a class="code" href="../../d2/d18/structebl__context.html#a41131cac800b4397c812f7b18ad18c73">pos</a> = *<a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a>++;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;   <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> -= 1;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;   <span class="keywordflow">if</span> ((c-&gt;<a class="code" href="../../d2/d18/structebl__context.html#a41131cac800b4397c812f7b18ad18c73">pos</a> &gt; 15) || <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> &lt; 2) {  <span class="comment">/* illegal packet */</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;ebl_callback: malformed EBL record.\n&quot;</span>);</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;   }</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;   i = *<a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a>++;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;   <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> -= 1;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;   <span class="keywordflow">if</span> (i &gt; <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>) { <span class="comment">/* illegal packet */</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;ebl_callback: malformed EBL record.\n&quot;</span>);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;   }</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(c-&gt;<a class="code" href="../../d2/d18/structebl__context.html#a23a5fb0219b2e3e690b50c7f452bb15f">separator</a>, (<span class="keywordtype">char</span> *)<a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a>, i + 1);</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;   c-&gt;<a class="code" href="../../d2/d18/structebl__context.html#af4bc4973ff0431233213c465f50a575a">sep_len</a> = i;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;   <a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a> += i;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;   <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> -= i;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;   <span class="keywordflow">if</span> ((i = dn_expand((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)fullanswer, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a> + <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>,</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;            (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a>, c-&gt;<a class="code" href="../../d2/d18/structebl__context.html#a05b12e2b60387c5a39427ab646768bff">apex</a>, <span class="keyword">sizeof</span>(c-&gt;<a class="code" href="../../d2/d18/structebl__context.html#a05b12e2b60387c5a39427ab646768bff">apex</a>) - 1)) &lt; 0) {</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to expand hostname\n&quot;</span>);</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;   }</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;   c-&gt;<a class="code" href="../../d2/d18/structebl__context.html#a05b12e2b60387c5a39427ab646768bff">apex</a>[i] = 0;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;   c-&gt;<a class="code" href="../../d2/d18/structebl__context.html#a9481efdd361e31c5b20056e16a33bab7">apex_len</a> = i;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;}</div><div class="ttc" id="structebl__context_html_a9481efdd361e31c5b20056e16a33bab7"><div class="ttname"><a href="../../d2/d18/structebl__context.html#a9481efdd361e31c5b20056e16a33bab7">ebl_context::apex_len</a></div><div class="ttdeci">int apex_len</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00252">enum.c:252</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structebl__context_html"><div class="ttname"><a href="../../d2/d18/structebl__context.html">ebl_context</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00247">enum.c:247</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structebl__context_html_a23a5fb0219b2e3e690b50c7f452bb15f"><div class="ttname"><a href="../../d2/d18/structebl__context.html#a23a5fb0219b2e3e690b50c7f452bb15f">ebl_context::separator</a></div><div class="ttdeci">char separator[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00249">enum.c:249</a></div></div>
<div class="ttc" id="structebl__context_html_a41131cac800b4397c812f7b18ad18c73"><div class="ttname"><a href="../../d2/d18/structebl__context.html#a41131cac800b4397c812f7b18ad18c73">ebl_context::pos</a></div><div class="ttdeci">unsigned char pos</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00248">enum.c:248</a></div></div>
<div class="ttc" id="structebl__context_html_af4bc4973ff0431233213c465f50a575a"><div class="ttname"><a href="../../d2/d18/structebl__context.html#af4bc4973ff0431233213c465f50a575a">ebl_context::sep_len</a></div><div class="ttdeci">int sep_len</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00250">enum.c:250</a></div></div>
<div class="ttc" id="structebl__context_html_a05b12e2b60387c5a39427ab646768bff"><div class="ttname"><a href="../../d2/d18/structebl__context.html#a05b12e2b60387c5a39427ab646768bff">ebl_context::apex</a></div><div class="ttdeci">char apex[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00251">enum.c:251</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_ab8dde573cc3974acd626c5626fae14b4"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a></div><div class="ttdeci">static int answer(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00682">chan_pjsip.c:682</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9ba49a39ba5f3482aaf36940bd3596e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ba49a39ba5f3482aaf36940bd3596e1">&#9670;&nbsp;</a></span>enum_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int enum_callback </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>answer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>fullanswer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback from ENUM lookup function. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d69/enum_8c_source.html#l00616">616</a> of file <a class="el" href="../../d9/d69/enum_8c_source.html">enum.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00228">ast_realloc</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00116">context</a>, <a class="el" href="../../d0/d9b/enum_8h_source.html#l00049">enum_context::count</a>, <a class="el" href="../../d0/d9b/enum_8h_source.html#l00041">enum_context::dst</a>, <a class="el" href="../../d0/d9b/enum_8h_source.html#l00042">enum_context::dstlen</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00607">ENUMLOOKUP_OPTIONS_COUNT</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d0/d9b/enum_8h_source.html#l00034">enum_naptr_rr::naptr</a>, <a class="el" href="../../d0/d9b/enum_8h_source.html#l00051">enum_context::naptr_rrs</a>, <a class="el" href="../../d0/d9b/enum_8h_source.html#l00052">enum_context::naptr_rrs_count</a>, <a class="el" href="../../d0/d9b/enum_8h_source.html#l00047">enum_context::naptrinput</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d9b/enum_8h_source.html#l00050">enum_context::options</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00397">parse_naptr()</a>, <a class="el" href="../../d0/d9b/enum_8h_source.html#l00035">enum_naptr_rr::result</a>, <a class="el" href="../../d0/d9b/enum_8h_source.html#l00037">enum_naptr_rr::sort_pos</a>, <a class="el" href="../../d0/d9b/enum_8h_source.html#l00036">enum_naptr_rr::tech</a>, <a class="el" href="../../d0/d9b/enum_8h_source.html#l00043">enum_context::tech</a>, and <a class="el" href="../../d0/d9b/enum_8h_source.html#l00044">enum_context::techlen</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d69/enum_8c_source.html#l00649">ast_get_enum()</a>.</p>
<div class="fragment"><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;{</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d26/structenum__context.html">enum_context</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a> = <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;   <span class="keywordtype">void</span> *p = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;   res = <a class="code" href="../../d9/d69/enum_8c.html#a0cae26ce88d9ff89dfecd075d1c89791">parse_naptr</a>((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)c-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a4f15ee8aa627692edfd6bdfe9a45fbf9">dst</a>, c-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a09933d827be564d0a0afebe6ffa00773">dstlen</a>, c-&gt;<a class="code" href="../../d7/d26/structenum__context.html#aeca41cda3ae501467b8637dbb685443b">tech</a>, c-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a970f0bd322ba19ad9f14eaa6ecb1a814">techlen</a>, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a>, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)c-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a4d469e97d6119219edc9215e90622397">naptrinput</a>);</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to parse naptr\n&quot;</span>);</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((res == 0) &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(c-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a4f15ee8aa627692edfd6bdfe9a45fbf9">dst</a>)) { <span class="comment">/* ok, we got needed NAPTR */</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;      <span class="keywordflow">if</span> (c-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a849fa981f121eb25a67e4e14392840ba">options</a> &amp; <a class="code" href="../../d9/d69/enum_8c.html#a80568ff5362beeb0051699a8deaf1f1e">ENUMLOOKUP_OPTIONS_COUNT</a>) { <span class="comment">/* counting RRs */</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;         c-&gt;<a class="code" href="../../d7/d26/structenum__context.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a>++;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;         snprintf(c-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a4f15ee8aa627692edfd6bdfe9a45fbf9">dst</a>, c-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a09933d827be564d0a0afebe6ffa00773">dstlen</a>, <span class="stringliteral">&quot;%d&quot;</span>, c-&gt;<a class="code" href="../../d7/d26/structenum__context.html#ad43c3812e6d13e0518d9f8b8f463ffcf">count</a>);</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      } <span class="keywordflow">else</span>  {</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;         <span class="keywordflow">if</span> ((p = <a class="code" href="../../d8/d8a/astmm_8h.html#aa6bcdb74dc1508c22986f0adf171a0f2">ast_realloc</a>(c-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>, <span class="keyword">sizeof</span>(*c-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>) * (c-&gt;<a class="code" href="../../d7/d26/structenum__context.html#aa0068b75c25dfc2c01a7c2471978e0c4">naptr_rrs_count</a> + 1)))) {</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            c-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a> = p;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            memcpy(&amp;c-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[c-&gt;<a class="code" href="../../d7/d26/structenum__context.html#aa0068b75c25dfc2c01a7c2471978e0c4">naptr_rrs_count</a>].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#ae0f28558d5a1f46cb7f1b6dc3831f777">naptr</a>, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a>, <span class="keyword">sizeof</span>(c-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>-&gt;<a class="code" href="../../d2/d04/structenum__naptr__rr.html#ae0f28558d5a1f46cb7f1b6dc3831f777">naptr</a>));</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            c-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[c-&gt;<a class="code" href="../../d7/d26/structenum__context.html#aa0068b75c25dfc2c01a7c2471978e0c4">naptr_rrs_count</a>].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#a179b70ad0fead86555368dc8edf9469e">result</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(c-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a4f15ee8aa627692edfd6bdfe9a45fbf9">dst</a>);</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;            c-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[c-&gt;<a class="code" href="../../d7/d26/structenum__context.html#aa0068b75c25dfc2c01a7c2471978e0c4">naptr_rrs_count</a>].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#aeca41cda3ae501467b8637dbb685443b">tech</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(c-&gt;<a class="code" href="../../d7/d26/structenum__context.html#aeca41cda3ae501467b8637dbb685443b">tech</a>);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            c-&gt;<a class="code" href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">naptr_rrs</a>[c-&gt;<a class="code" href="../../d7/d26/structenum__context.html#aa0068b75c25dfc2c01a7c2471978e0c4">naptr_rrs_count</a>].<a class="code" href="../../d2/d04/structenum__naptr__rr.html#af361f106e0a09ecd7f57c18d63ab969a">sort_pos</a> = c-&gt;<a class="code" href="../../d7/d26/structenum__context.html#aa0068b75c25dfc2c01a7c2471978e0c4">naptr_rrs_count</a>;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            c-&gt;<a class="code" href="../../d7/d26/structenum__context.html#aa0068b75c25dfc2c01a7c2471978e0c4">naptr_rrs_count</a>++;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;         }</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;         c-&gt;<a class="code" href="../../d7/d26/structenum__context.html#a4f15ee8aa627692edfd6bdfe9a45fbf9">dst</a>[0] = 0;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      }</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;   }</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;}</div><div class="ttc" id="enum_8c_html_a80568ff5362beeb0051699a8deaf1f1e"><div class="ttname"><a href="../../d9/d69/enum_8c.html#a80568ff5362beeb0051699a8deaf1f1e">ENUMLOOKUP_OPTIONS_COUNT</a></div><div class="ttdeci">#define ENUMLOOKUP_OPTIONS_COUNT</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00607">enum.c:607</a></div></div>
<div class="ttc" id="astmm_8h_html_aa6bcdb74dc1508c22986f0adf171a0f2"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#aa6bcdb74dc1508c22986f0adf171a0f2">ast_realloc</a></div><div class="ttdeci">#define ast_realloc(p, len)</div><div class="ttdoc">A wrapper for realloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00228">astmm.h:228</a></div></div>
<div class="ttc" id="structenum__context_html_ad43c3812e6d13e0518d9f8b8f463ffcf"><div class="ttname"><a href="../../d7/d26/structenum__context.html#ad43c3812e6d13e0518d9f8b8f463ffcf">enum_context::count</a></div><div class="ttdeci">int count</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00049">enum.h:49</a></div></div>
<div class="ttc" id="structenum__context_html_accaf620f3e890f0fbf1c86a605f65472"><div class="ttname"><a href="../../d7/d26/structenum__context.html#accaf620f3e890f0fbf1c86a605f65472">enum_context::naptr_rrs</a></div><div class="ttdeci">struct enum_naptr_rr * naptr_rrs</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00051">enum.h:51</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structenum__context_html_a09933d827be564d0a0afebe6ffa00773"><div class="ttname"><a href="../../d7/d26/structenum__context.html#a09933d827be564d0a0afebe6ffa00773">enum_context::dstlen</a></div><div class="ttdeci">int dstlen</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00042">enum.h:42</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structenum__context_html_a970f0bd322ba19ad9f14eaa6ecb1a814"><div class="ttname"><a href="../../d7/d26/structenum__context.html#a970f0bd322ba19ad9f14eaa6ecb1a814">enum_context::techlen</a></div><div class="ttdeci">int techlen</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00044">enum.h:44</a></div></div>
<div class="ttc" id="structenum__context_html_a4f15ee8aa627692edfd6bdfe9a45fbf9"><div class="ttname"><a href="../../d7/d26/structenum__context.html#a4f15ee8aa627692edfd6bdfe9a45fbf9">enum_context::dst</a></div><div class="ttdeci">char * dst</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00041">enum.h:41</a></div></div>
<div class="ttc" id="structenum__context_html"><div class="ttname"><a href="../../d7/d26/structenum__context.html">enum_context</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00040">enum.h:40</a></div></div>
<div class="ttc" id="structenum__naptr__rr_html_ae0f28558d5a1f46cb7f1b6dc3831f777"><div class="ttname"><a href="../../d2/d04/structenum__naptr__rr.html#ae0f28558d5a1f46cb7f1b6dc3831f777">enum_naptr_rr::naptr</a></div><div class="ttdeci">struct naptr naptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00034">enum.h:34</a></div></div>
<div class="ttc" id="structenum__context_html_a4d469e97d6119219edc9215e90622397"><div class="ttname"><a href="../../d7/d26/structenum__context.html#a4d469e97d6119219edc9215e90622397">enum_context::naptrinput</a></div><div class="ttdeci">char * naptrinput</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00047">enum.h:47</a></div></div>
<div class="ttc" id="structenum__naptr__rr_html_aeca41cda3ae501467b8637dbb685443b"><div class="ttname"><a href="../../d2/d04/structenum__naptr__rr.html#aeca41cda3ae501467b8637dbb685443b">enum_naptr_rr::tech</a></div><div class="ttdeci">char * tech</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00036">enum.h:36</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_ab8dde573cc3974acd626c5626fae14b4"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a></div><div class="ttdeci">static int answer(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00682">chan_pjsip.c:682</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="enum_8c_html_a0cae26ce88d9ff89dfecd075d1c89791"><div class="ttname"><a href="../../d9/d69/enum_8c.html#a0cae26ce88d9ff89dfecd075d1c89791">parse_naptr</a></div><div class="ttdeci">static int parse_naptr(unsigned char *dst, int dstsize, char *tech, int techsize, unsigned char *answer, int len, unsigned char *naptrinput)</div><div class="ttdoc">Parse DNS NAPTR record used in ENUM —. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00397">enum.c:397</a></div></div>
<div class="ttc" id="structenum__naptr__rr_html_a179b70ad0fead86555368dc8edf9469e"><div class="ttname"><a href="../../d2/d04/structenum__naptr__rr.html#a179b70ad0fead86555368dc8edf9469e">enum_naptr_rr::result</a></div><div class="ttdeci">char * result</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00035">enum.h:35</a></div></div>
<div class="ttc" id="structenum__context_html_aa0068b75c25dfc2c01a7c2471978e0c4"><div class="ttname"><a href="../../d7/d26/structenum__context.html#aa0068b75c25dfc2c01a7c2471978e0c4">enum_context::naptr_rrs_count</a></div><div class="ttdeci">int naptr_rrs_count</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00052">enum.h:52</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="structenum__context_html_aeca41cda3ae501467b8637dbb685443b"><div class="ttname"><a href="../../d7/d26/structenum__context.html#aeca41cda3ae501467b8637dbb685443b">enum_context::tech</a></div><div class="ttdeci">char * tech</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00043">enum.h:43</a></div></div>
<div class="ttc" id="structenum__naptr__rr_html_af361f106e0a09ecd7f57c18d63ab969a"><div class="ttname"><a href="../../d2/d04/structenum__naptr__rr.html#af361f106e0a09ecd7f57c18d63ab969a">enum_naptr_rr::sort_pos</a></div><div class="ttdeci">int sort_pos</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00037">enum.h:37</a></div></div>
<div class="ttc" id="structenum__context_html_a849fa981f121eb25a67e4e14392840ba"><div class="ttname"><a href="../../d7/d26/structenum__context.html#a849fa981f121eb25a67e4e14392840ba">enum_context::options</a></div><div class="ttdeci">int options</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00050">enum.h:50</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad7ed966c35564a15cb41b284e0688875"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7ed966c35564a15cb41b284e0688875">&#9670;&nbsp;</a></span>format_numeric_domain()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* format_numeric_domain </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>suffix</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d69/enum_8c_source.html#l00955">955</a> of file <a class="el" href="../../d9/d69/enum_8c_source.html">enum.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d69/enum_8c_source.html#l00995">ast_get_txt()</a>.</p>
<div class="fragment"><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;{</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;   <span class="keywordtype">char</span> *buffer, *<a class="code" href="../../d7/d26/structenum__context.html#a4f15ee8aa627692edfd6bdfe9a45fbf9">dst</a>;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;   <span class="keywordtype">size_t</span> suffix_length;</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;   <span class="keywordtype">size_t</span> number_length = strlen(<a class="code" href="../../d6/d49/structnumber.html">number</a>);</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *src = <a class="code" href="../../d6/d49/structnumber.html">number</a> + number_length - 1;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;   <span class="keywordflow">if</span> (!suffix) {</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;      suffix = <span class="stringliteral">&quot;e164.arpa&quot;</span>;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;   }</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;   suffix_length = strlen(suffix);</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;   dst = buffer = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;      (number_length * 2) <span class="comment">/* We need 2 bytes per input digit */</span></div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;      + suffix_length     <span class="comment">/* ... plus however long the suffix is */</span></div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;      + 1                 <span class="comment">/* ... plus room for the &#39;.&#39; separator */</span></div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;      + 1                 <span class="comment">/* ... and room for the \0 byte at the end */</span>);</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;   <span class="keywordflow">if</span> (buffer) {</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      <span class="keywordflow">while</span> (src &gt;= <a class="code" href="../../d6/d49/structnumber.html">number</a>) {</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;         <span class="keywordflow">if</span> (isdigit(*src)) {</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;            *dst++ = *src;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;            *dst++ = <span class="charliteral">&#39;.&#39;</span>;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;         }</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;         src--;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;      }</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;      <span class="comment">/* The length arguments below make sure that the \0 byte is copied into</span></div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;<span class="comment">         the final string */</span></div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;      <span class="keywordflow">if</span> (*suffix == <span class="charliteral">&#39;.&#39;</span>) {</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;         memcpy(dst, &amp;suffix[1], suffix_length);</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;         memcpy(dst, suffix, suffix_length + 1);</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;      }</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;   }</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;   <span class="keywordflow">return</span> buffer;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;}</div><div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="structenum__context_html_a4f15ee8aa627692edfd6bdfe9a45fbf9"><div class="ttname"><a href="../../d7/d26/structenum__context.html#a4f15ee8aa627692edfd6bdfe9a45fbf9">enum_context::dst</a></div><div class="ttdeci">char * dst</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00041">enum.h:41</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d69/enum_8c_source.html#l01067">1067</a> of file <a class="el" href="../../d9/d69/enum_8c_source.html">enum.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d16/module_8h_source.html#l00102">AST_MODULE_LOAD_FAILURE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, and <a class="el" href="../../d9/d69/enum_8c_source.html#l01030">private_enum_init()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d69/enum_8c_source.html#l01077">reload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;{</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d9/d69/enum_8c.html#a0865ccd46f3c83ea5c2818ec14e56425">private_enum_init</a>(0) ? <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa8724da3ad620df86524280e760add388">AST_MODULE_LOAD_FAILURE</a> : <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;}</div><div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="enum_8c_html_a0865ccd46f3c83ea5c2818ec14e56425"><div class="ttname"><a href="../../d9/d69/enum_8c.html#a0865ccd46f3c83ea5c2818ec14e56425">private_enum_init</a></div><div class="ttdeci">static int private_enum_init(int reload)</div><div class="ttdoc">Initialize the ENUM support subsystem. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l01030">enum.c:1030</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa8724da3ad620df86524280e760add388"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa8724da3ad620df86524280e760add388">AST_MODULE_LOAD_FAILURE</a></div><div class="ttdoc">Module could not be loaded properly. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00102">module.h:102</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5f695c1adce235a5659ddec89e5747a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f695c1adce235a5659ddec89e5747a3">&#9670;&nbsp;</a></span>parse_ie()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned int parse_ie </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>maxdatalen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>srclen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Parse NAPTR record information elements. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d69/enum_8c_source.html#l00376">376</a> of file <a class="el" href="../../d9/d69/enum_8c_source.html">enum.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d69/enum_8c_source.html#l00397">parse_naptr()</a>.</p>
<div class="fragment"><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;{</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, olen;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;   len = olen = (<span class="keywordtype">unsigned</span> int) src[0];</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;   src++;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;   srclen--;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;   <span class="keywordflow">if</span> (len &gt; srclen) {</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;ENUM parsing failed: Wanted %u characters, got %u\n&quot;</span>, len, srclen);</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;   }</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;   <span class="keywordflow">if</span> (len &gt; maxdatalen)</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      len = maxdatalen;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;   memcpy(data, src, len);</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;   <span class="keywordflow">return</span> olen + 1;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0cae26ce88d9ff89dfecd075d1c89791"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cae26ce88d9ff89dfecd075d1c89791">&#9670;&nbsp;</a></span>parse_naptr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int parse_naptr </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>dstsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>tech</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>techsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>answer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>naptrinput</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Parse DNS NAPTR record used in ENUM &mdash;. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d69/enum_8c_source.html#l00397">397</a> of file <a class="el" href="../../d9/d69/enum_8c_source.html">enum.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00049">d</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d9/d69/enum_8c_source.html#l00376">parse_ie()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d69/enum_8c_source.html#l00616">enum_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;{</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;   <span class="keywordtype">char</span> tech_return[80];</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;   <span class="keywordtype">char</span> *oanswer = (<span class="keywordtype">char</span> *)<a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a>;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;   <span class="keywordtype">char</span> flags[512] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;   <span class="keywordtype">char</span> services[512] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;   <span class="keywordtype">char</span> *p;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;   <span class="keywordtype">char</span> regexp[512] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;   <span class="keywordtype">char</span> repl[512] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;   <span class="keywordtype">char</span> tempdst[512] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;   <span class="keywordtype">char</span> errbuff[512] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;   <span class="keywordtype">char</span> delim;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;   <span class="keywordtype">char</span> *delim2;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;   <span class="keywordtype">char</span> *pattern, *subst, *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a156f09c32102fa036620ad75c3ee4fbf">d</a>;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;   <span class="keywordtype">int</span> regexp_len, rc;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> max_bt = 10; <span class="comment">/* max num of regexp backreference allowed, must remain 10 to guarantee a valid backreference index */</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;   <span class="keywordtype">int</span> size, matchindex; <span class="comment">/* size is the size of the backreference sub. */</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;   <span class="keywordtype">size_t</span> d_len = <span class="keyword">sizeof</span>(tempdst) - 1;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;   regex_t preg;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;   <span class="keywordtype">int</span> re_flags = REG_EXTENDED | REG_NEWLINE;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;   regmatch_t pmatch[max_bt];</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;   tech_return[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;   <a class="code" href="../../d7/d26/structenum__context.html#a4f15ee8aa627692edfd6bdfe9a45fbf9">dst</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> &lt; <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../dd/d3d/structnaptr.html">naptr</a>)) {</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;NAPTR record length too short\n&quot;</span>);</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;   }</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;   <a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a> += <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="../../dd/d3d/structnaptr.html">naptr</a>);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;   <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> -= <span class="keyword">sizeof</span>(<span class="keyword">struct </span><a class="code" href="../../dd/d3d/structnaptr.html">naptr</a>);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;   <span class="keywordflow">if</span> ((res = <a class="code" href="../../d9/d69/enum_8c.html#a5f695c1adce235a5659ddec89e5747a3">parse_ie</a>(flags, <span class="keyword">sizeof</span>(flags) - 1, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a>, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>)) &lt; 0) {</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to get flags from NAPTR record\n&quot;</span>);</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      <a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a> += res;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> -= res;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;   }</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;   <span class="keywordflow">if</span> ((res = <a class="code" href="../../d9/d69/enum_8c.html#a5f695c1adce235a5659ddec89e5747a3">parse_ie</a>(services, <span class="keyword">sizeof</span>(services) - 1, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a>, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>)) &lt; 0) {</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to get services from NAPTR record\n&quot;</span>);</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      <a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a> += res;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> -= res;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;   }</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;   <span class="keywordflow">if</span> ((res = <a class="code" href="../../d9/d69/enum_8c.html#a5f695c1adce235a5659ddec89e5747a3">parse_ie</a>(regexp, <span class="keyword">sizeof</span>(regexp) - 1, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a>, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>)) &lt; 0) {</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to get regexp from NAPTR record\n&quot;</span>);</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      <a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a> += res;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> -= res;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;   }</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;   <span class="keywordflow">if</span> ((res = dn_expand((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)oanswer, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a> + <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)<a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a>, repl, <span class="keyword">sizeof</span>(repl) - 1)) &lt; 0) {</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to expand hostname\n&quot;</span>);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;   }</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;NAPTR input=&#39;%s&#39;, flags=&#39;%s&#39;, services=&#39;%s&#39;, regexp=&#39;%s&#39;, repl=&#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      naptrinput, flags, services, regexp, repl);</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;   <span class="keywordflow">if</span> (tolower(flags[0]) != <span class="charliteral">&#39;u&#39;</span>) {</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;NAPTR Flag must be &#39;U&#39; or &#39;u&#39;.\n&quot;</span>);</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;   }</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;   p = strstr(services, <span class="stringliteral">&quot;e2u+&quot;</span>);</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;   <span class="keywordflow">if</span> (p == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      p = strstr(services, <span class="stringliteral">&quot;E2U+&quot;</span>);</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   <span class="keywordflow">if</span> (p){</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      p = p + 4;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;      <span class="keywordflow">if</span> (strchr(p, <span class="charliteral">&#39;:&#39;</span>)){</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;         p = strchr(p, <span class="charliteral">&#39;:&#39;</span>) + 1;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      }</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(tech_return, p, <span class="keyword">sizeof</span>(tech_return));</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      p = strstr(services, <span class="stringliteral">&quot;+e2u&quot;</span>);</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <span class="keywordflow">if</span> (p == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;         p = strstr(services, <span class="stringliteral">&quot;+E2U&quot;</span>);</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      <span class="keywordflow">if</span> (p) {</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;         *p = 0;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;         p = strchr(services, <span class="charliteral">&#39;:&#39;</span>);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;         <span class="keywordflow">if</span> (p)</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            *p = 0;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(tech_return, services, <span class="keyword">sizeof</span>(tech_return));</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      }</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;   }</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;   regexp_len = strlen(regexp);</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;   <span class="keywordflow">if</span> (regexp_len &lt; 7) {</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Regex too short to be meaningful.\n&quot;</span>);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;   }</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;   <span class="comment">/* this takes the first character of the regexp (which is a delimiter)</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">    * and uses that character to find the index of the second delimiter */</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;   delim = regexp[0];</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;   delim2 = strchr(regexp + 1, delim);</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;   <span class="keywordflow">if</span> ((delim2 == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      || ((regexp[regexp_len - 1] != <span class="charliteral">&#39;i&#39;</span> || regexp[regexp_len - 2] != delim)</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;         &amp;&amp; regexp[regexp_len - 1] != delim)) {</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Regex delimiter error (on \&quot;%s\&quot;).\n&quot;</span>, regexp);</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strchr((delim2 + 1), delim) == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) { <span class="comment">/* if the second delimiter is found, make sure there is a third instance.  this could be the end one instead of the middle */</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Regex delimiter error (on \&quot;%s\&quot;).\n&quot;</span>, regexp);</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;   }</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   <span class="comment">/* Make the regex case-insensitive if the &#39;i&#39; flag is present. This assumes you</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">    * aren&#39;t using &#39;i&#39; as a delimiter which, altough dubious, does not appear to be</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">    * explicitly non-compliant */</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;   <span class="keywordflow">if</span> (regexp[regexp_len - 1] == <span class="charliteral">&#39;i&#39;</span>) {</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      re_flags |= REG_ICASE;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;   }</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;   pattern = regexp + 1;   <span class="comment">/* pattern is the regex without the begining and ending delimiter */</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;   *delim2 = 0;    <span class="comment">/* zero out the middle delimiter */</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;   subst   = delim2 + 1; <span class="comment">/* dst substring is everything after the second delimiter. */</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;   regexp[regexp_len - 1] = 0; <span class="comment">/* zero out the last delimiter */</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment"> * now do the regex wizardry.</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;   <span class="keywordflow">if</span> (regcomp(&amp;preg, pattern, re_flags)) {</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;NAPTR Regex compilation error (regex = \&quot;%s\&quot;).\n&quot;</span>, regexp);</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;   }</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;   <span class="keywordflow">if</span> (preg.re_nsub &gt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(pmatch)) {</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;NAPTR Regex compilation error: too many subs.\n&quot;</span>);</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      regfree(&amp;preg);</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;   }</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;   <span class="comment">/* pmatch is an array containing the substring indexes for the regex backreference sub.</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment">    * max_bt is the maximum number of backreferences allowed to be stored in pmatch */</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;   <span class="keywordflow">if</span> ((rc = regexec(&amp;preg, (<span class="keywordtype">char</span> *) naptrinput, max_bt, pmatch, 0))) {</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      regerror(rc, &amp;preg, errbuff, <span class="keyword">sizeof</span>(errbuff));</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;NAPTR Regex match failed. Reason: %s\n&quot;</span>, errbuff);</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      regfree(&amp;preg);</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;   }</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;   regfree(&amp;preg);</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;   d = tempdst;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;   d_len--;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;   <span class="comment">/* perform the backreference sub. Search the subst for backreferences,</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment">    * when a backreference is found, retrieve the backreferences number.</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment">    * use the backreference number as an index for pmatch to retrieve the</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment">    * beginning and ending indexes of the substring to insert as the backreference.</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment">    * if no backreference is found, continue copying the subst into tempdst */</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;   <span class="keywordflow">while</span> (*subst &amp;&amp; (d_len &gt; 0)) {</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <span class="keywordflow">if</span> ((subst[0] == <span class="charliteral">&#39;\\&#39;</span>) &amp;&amp; isdigit(subst[1])) { <span class="comment">/* is this character the beginning of a backreference */</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;         matchindex = (int) (subst[1] - <span class="charliteral">&#39;0&#39;</span>);</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;         <span class="keywordflow">if</span> (matchindex &gt;= <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(pmatch)) {</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Error during regex substitution. Invalid pmatch index.\n&quot;</span>);</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;         }</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;         <span class="comment">/* pmatch len is 10. we are garanteed a single char 0-9 is a valid index */</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;         size = pmatch[matchindex].rm_eo - pmatch[matchindex].rm_so;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;         <span class="keywordflow">if</span> (size &gt; d_len) {</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Not enough space during NAPTR regex substitution.\n&quot;</span>);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;         }</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;         <span class="comment">/* are the pmatch indexes valid for the input length */</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;         <span class="keywordflow">if</span> ((strlen((<span class="keywordtype">char</span> *) naptrinput) &gt;= pmatch[matchindex].rm_eo) &amp;&amp; (pmatch[matchindex].rm_so &lt;= pmatch[matchindex].rm_eo)) {</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            memcpy(d, (naptrinput + (<span class="keywordtype">int</span>) pmatch[matchindex].rm_so), size);  <span class="comment">/* copy input substring into backreference marker */</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;            d_len -= size;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;            subst += 2;  <span class="comment">/* skip over backreference characters to next valid character */</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            d += size;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Error during regex substitution. Invalid backreference index.\n&quot;</span>);</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;         }</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (isprint(*subst)) {</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;         *d++ = *subst++;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;         d_len--;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Error during regex substitution.\n&quot;</span>);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      }</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;   }</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;   *d = 0;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>((<span class="keywordtype">char</span> *) dst, tempdst, dstsize);</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;   dst[dstsize - 1] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;   <span class="keywordflow">if</span> (*tech != <span class="charliteral">&#39;\0&#39;</span>){ <span class="comment">/* check if it is requested NAPTR */</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      <span class="keywordflow">if</span> (!strncasecmp(tech, <span class="stringliteral">&quot;ALL&quot;</span>, techsize)){</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;         <span class="keywordflow">return</span> 0; <span class="comment">/* return or count any RR */</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;      }</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;      <span class="keywordflow">if</span> (!strncasecmp(tech_return, tech, <span class="keyword">sizeof</span>(tech_return) &lt; techsize ? <span class="keyword">sizeof</span>(tech_return): techsize)){</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(tech, tech_return, techsize);</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;         <span class="keywordflow">return</span> 0; <span class="comment">/* we got our RR */</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      } <span class="keywordflow">else</span> { <span class="comment">/* go to the next RR in the DNS answer */</span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;         <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      }</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;   }</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;   <span class="comment">/* tech was not specified, return first parsed RR */</span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(tech, tech_return, techsize);</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a156f09c32102fa036620ad75c3ee4fbf"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a156f09c32102fa036620ad75c3ee4fbf">d</a></div><div class="ttdeci">static struct test_val d</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00049">test_linkedlists.c:49</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structenum__context_html_a4f15ee8aa627692edfd6bdfe9a45fbf9"><div class="ttname"><a href="../../d7/d26/structenum__context.html#a4f15ee8aa627692edfd6bdfe9a45fbf9">enum_context::dst</a></div><div class="ttdeci">char * dst</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00041">enum.h:41</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_ab8dde573cc3974acd626c5626fae14b4"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a></div><div class="ttdeci">static int answer(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00682">chan_pjsip.c:682</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="enum_8c_html_a5f695c1adce235a5659ddec89e5747a3"><div class="ttname"><a href="../../d9/d69/enum_8c.html#a5f695c1adce235a5659ddec89e5747a3">parse_ie</a></div><div class="ttdeci">static unsigned int parse_ie(char *data, unsigned int maxdatalen, unsigned char *src, unsigned int srclen)</div><div class="ttdoc">Parse NAPTR record information elements. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00376">enum.c:376</a></div></div>
<div class="ttc" id="structnaptr_html"><div class="ttname"><a href="../../dd/d3d/structnaptr.html">naptr</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d9b/enum_8h_source.html#l00028">enum.h:28</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0865ccd46f3c83ea5c2818ec14e56425"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0865ccd46f3c83ea5c2818ec14e56425">&#9670;&nbsp;</a></span>private_enum_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int private_enum_init </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>reload</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initialize the ENUM support subsystem. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d69/enum_8c_source.html#l01030">1030</a> of file <a class="el" href="../../d9/d69/enum_8c_source.html">enum.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/dc5/extconf_8c_source.html#l01290">ast_config_destroy()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l03154">ast_config_load2()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l00694">ast_variable_retrieve()</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00043">CONFIG_FLAG_FILEUNCHANGED</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00060">CONFIG_STATUS_FILEINVALID</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00058">CONFIG_STATUS_FILEMISSING</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00059">CONFIG_STATUS_FILEUNCHANGED</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00096">ebl_alg</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00101">enumlock</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00093">ENUMLOOKUP_BLR_CC</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00095">ENUMLOOKUP_BLR_EBL</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00094">ENUMLOOKUP_BLR_TXT</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00091">ienum_branchlabel</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../d5/d07/presencestate_8c_source.html#l00071">string</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d69/enum_8c_source.html#l01067">load_module()</a>, and <a class="el" href="../../d9/d69/enum_8c_source.html#l01077">reload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;{</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d18/structast__config.html">ast_config</a> *cfg;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d07/presencestate_8c.html#ae1adbce218e7a9d09164012443191d24">string</a>;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> config_flags = { <a class="code" href="../../d0/d29/cdr__mysql_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a> ? <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fafa887389dc380bbdcffb65fec379f037">CONFIG_FLAG_FILEUNCHANGED</a> : 0 };</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;   <span class="keywordflow">if</span> ((cfg = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aab3eac8fa82a86a93c074deb7b77dbc9">ast_config_load2</a>(<span class="stringliteral">&quot;enum.conf&quot;</span>, <span class="stringliteral">&quot;enum&quot;</span>, config_flags)) == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a846844eb2c4eb44554445936b3770711">CONFIG_STATUS_FILEUNCHANGED</a>)</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;   <span class="keywordflow">if</span> (cfg == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a39bacaabcacf47583204c7634e64a2a0">CONFIG_STATUS_FILEMISSING</a> || cfg == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a846844eb2c4eb44554445936b3770711">CONFIG_STATUS_FILEUNCHANGED</a> || cfg == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a>) {</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;   }</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;   <span class="comment">/* Destroy existing list */</span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d9/d69/enum_8c.html#ab5b4e17c6fe8b24534ed09383f512b06">enumlock</a>);</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;   <span class="keywordflow">if</span> (cfg) {</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;      <span class="keywordflow">if</span> ((<span class="keywordtype">string</span> = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, <span class="stringliteral">&quot;ienum&quot;</span>, <span class="stringliteral">&quot;branchlabel&quot;</span>))) {</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../d9/d69/enum_8c.html#a48dbbc896e14cd8cab443a8066ea1e8b">ienum_branchlabel</a>, <span class="keywordtype">string</span>, <span class="keyword">sizeof</span>(<a class="code" href="../../d9/d69/enum_8c.html#a48dbbc896e14cd8cab443a8066ea1e8b">ienum_branchlabel</a>));</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;      }</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      <span class="keywordflow">if</span> ((<span class="keywordtype">string</span> = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, <span class="stringliteral">&quot;ienum&quot;</span>, <span class="stringliteral">&quot;ebl_alg&quot;</span>))) {</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;         <a class="code" href="../../d9/d69/enum_8c.html#afe913060145c35f4046f5245b2534cf9">ebl_alg</a> = <a class="code" href="../../d9/d69/enum_8c.html#a4e7355b2e878225f47929cd3bb0276bc">ENUMLOOKUP_BLR_CC</a>; <span class="comment">/* default */</span></div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;         <span class="keywordflow">if</span> (!strcasecmp(<span class="keywordtype">string</span>, <span class="stringliteral">&quot;txt&quot;</span>))</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;            <a class="code" href="../../d9/d69/enum_8c.html#afe913060145c35f4046f5245b2534cf9">ebl_alg</a> = <a class="code" href="../../d9/d69/enum_8c.html#a3f852d573c62b08575b25c76d5e837f6">ENUMLOOKUP_BLR_TXT</a>;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<span class="keywordtype">string</span>, <span class="stringliteral">&quot;ebl&quot;</span>))</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;            <a class="code" href="../../d9/d69/enum_8c.html#afe913060145c35f4046f5245b2534cf9">ebl_alg</a> = <a class="code" href="../../d9/d69/enum_8c.html#a8e005634423607f0e6b0217338a162eb">ENUMLOOKUP_BLR_EBL</a>;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<span class="keywordtype">string</span>, <span class="stringliteral">&quot;cc&quot;</span>))</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;            <a class="code" href="../../d9/d69/enum_8c.html#afe913060145c35f4046f5245b2534cf9">ebl_alg</a> = <a class="code" href="../../d9/d69/enum_8c.html#a4e7355b2e878225f47929cd3bb0276bc">ENUMLOOKUP_BLR_CC</a>;</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;         <span class="keywordflow">else</span></div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No valid parameter for ienum/ebl_alg.\n&quot;</span>);</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;      }</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;      <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a>(cfg);</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;   }</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d9/d69/enum_8c.html#ab5b4e17c6fe8b24534ed09383f512b06">enumlock</a>);</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;}</div><div class="ttc" id="enum_8c_html_a48dbbc896e14cd8cab443a8066ea1e8b"><div class="ttname"><a href="../../d9/d69/enum_8c.html#a48dbbc896e14cd8cab443a8066ea1e8b">ienum_branchlabel</a></div><div class="ttdeci">static char ienum_branchlabel[32]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00091">enum.c:91</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="enum_8c_html_ab5b4e17c6fe8b24534ed09383f512b06"><div class="ttname"><a href="../../d9/d69/enum_8c.html#ab5b4e17c6fe8b24534ed09383f512b06">enumlock</a></div><div class="ttdeci">static ast_mutex_t enumlock</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00101">enum.c:101</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a8d1a63cdf2c7aff22a77b6e75d93b377"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a></div><div class="ttdeci">#define CONFIG_STATUS_FILEINVALID</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00060">include/asterisk/config.h:60</a></div></div>
<div class="ttc" id="enum_8c_html_afe913060145c35f4046f5245b2534cf9"><div class="ttname"><a href="../../d9/d69/enum_8c.html#afe913060145c35f4046f5245b2534cf9">ebl_alg</a></div><div class="ttdeci">static int ebl_alg</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00096">enum.c:96</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_aab3eac8fa82a86a93c074deb7b77dbc9"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#aab3eac8fa82a86a93c074deb7b77dbc9">ast_config_load2</a></div><div class="ttdeci">struct ast_config * ast_config_load2(const char *filename, const char *who_asked, struct ast_flags flags)</div><div class="ttdoc">Load a config file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l03154">main/config.c:3154</a></div></div>
<div class="ttc" id="presencestate_8c_html_ae1adbce218e7a9d09164012443191d24"><div class="ttname"><a href="../../d5/d07/presencestate_8c.html#ae1adbce218e7a9d09164012443191d24">string</a></div><div class="ttdeci">const char * string</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d07/presencestate_8c_source.html#l00071">presencestate.c:71</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="enum_8c_html_a4e7355b2e878225f47929cd3bb0276bc"><div class="ttname"><a href="../../d9/d69/enum_8c.html#a4e7355b2e878225f47929cd3bb0276bc">ENUMLOOKUP_BLR_CC</a></div><div class="ttdeci">#define ENUMLOOKUP_BLR_CC</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00093">enum.c:93</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="enum_8c_html_a8e005634423607f0e6b0217338a162eb"><div class="ttname"><a href="../../d9/d69/enum_8c.html#a8e005634423607f0e6b0217338a162eb">ENUMLOOKUP_BLR_EBL</a></div><div class="ttdeci">#define ENUMLOOKUP_BLR_EBL</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00095">enum.c:95</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a6b4d4d929013de7812fbba4e58353078"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a></div><div class="ttdeci">void ast_config_destroy(struct ast_config *config)</div><div class="ttdoc">Destroys a config. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01290">extconf.c:1290</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a846844eb2c4eb44554445936b3770711"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a846844eb2c4eb44554445936b3770711">CONFIG_STATUS_FILEUNCHANGED</a></div><div class="ttdeci">#define CONFIG_STATUS_FILEUNCHANGED</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00059">include/asterisk/config.h:59</a></div></div>
<div class="ttc" id="structast__config_html"><div class="ttname"><a href="../../dd/d18/structast__config.html">ast_config</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00249">main/config.c:249</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_ad1982509765f4870f1f63412a53ea668"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a></div><div class="ttdeci">static int reload(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00741">cdr_mysql.c:741</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a39bacaabcacf47583204c7634e64a2a0"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a39bacaabcacf47583204c7634e64a2a0">CONFIG_STATUS_FILEMISSING</a></div><div class="ttdeci">#define CONFIG_STATUS_FILEMISSING</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00058">include/asterisk/config.h:58</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a9ff7aa27ae5f1a980bcf81f91cd6e470"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a></div><div class="ttdeci">const char * ast_variable_retrieve(struct ast_config *config, const char *category, const char *variable)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00694">main/config.c:694</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="enum_8c_html_a3f852d573c62b08575b25c76d5e837f6"><div class="ttname"><a href="../../d9/d69/enum_8c.html#a3f852d573c62b08575b25c76d5e837f6">ENUMLOOKUP_BLR_TXT</a></div><div class="ttdeci">#define ENUMLOOKUP_BLR_TXT</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00094">enum.c:94</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a103e76ed4bd42f776f7f260080b98b3fafa887389dc380bbdcffb65fec379f037"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fafa887389dc380bbdcffb65fec379f037">CONFIG_FLAG_FILEUNCHANGED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00043">include/asterisk/config.h:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7c6ac25ea7536c0bc9ed18cbcf917527"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c6ac25ea7536c0bc9ed18cbcf917527">&#9670;&nbsp;</a></span>reload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int reload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d69/enum_8c_source.html#l01077">1077</a> of file <a class="el" href="../../d9/d69/enum_8c_source.html">enum.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d16/module_8h_source.html#l00316">AST_MODFLAG_GLOBAL_SYMBOLS</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00317">AST_MODFLAG_LOAD_ORDER</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00324">AST_MODPRI_CORE</a>, <a class="el" href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00121">AST_MODULE_SUPPORT_CORE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00046">ASTERISK_GPL_KEY</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l01067">load_module()</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l01030">private_enum_init()</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00741">reload()</a>, and <a class="el" href="../../d9/d69/enum_8c_source.html#l01072">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;{</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d9/d69/enum_8c.html#a0865ccd46f3c83ea5c2818ec14e56425">private_enum_init</a>(1);</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;}</div><div class="ttc" id="enum_8c_html_a0865ccd46f3c83ea5c2818ec14e56425"><div class="ttname"><a href="../../d9/d69/enum_8c.html#a0865ccd46f3c83ea5c2818ec14e56425">private_enum_init</a></div><div class="ttdeci">static int private_enum_init(int reload)</div><div class="ttdoc">Initialize the ENUM support subsystem. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l01030">enum.c:1030</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3a2531890675bb9a57fa13f5de4e6077"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a2531890675bb9a57fa13f5de4e6077">&#9670;&nbsp;</a></span>txt_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int txt_callback </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>answer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>fullanswer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback for TXT record lookup, /ol version. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d69/enum_8c_source.html#l00151">151</a> of file <a class="el" href="../../d9/d69/enum_8c_source.html">enum.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, <a class="el" href="../../da/d45/chan__alsa_8c_source.html#l00116">context</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00146">txt_context::txt</a>, and <a class="el" href="../../d9/d69/enum_8c_source.html#l00147">txt_context::txtlen</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d69/enum_8c_source.html#l00995">ast_get_txt()</a>, and <a class="el" href="../../d9/d69/enum_8c_source.html#l00201">blr_txt()</a>.</p>
<div class="fragment"><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;{</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d24/structtxt__context.html">txt_context</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a> = <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;   c-&gt;<a class="code" href="../../d9/d24/structtxt__context.html#acb36e435643b51ae1771f87bb67234f6">txt</a>[0] = 0; <span class="comment">/* default to empty */</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;   c-&gt;<a class="code" href="../../d9/d24/structtxt__context.html#a44c4a1bb01729a965d38e3e59d601f93">txtlen</a> = 0;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a> == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;   }</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;   <span class="comment">/* RFC1035:</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">    * &lt;character-string&gt; is a single length octet followed by that number of characters.</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">    * TXT-DATA        One or more &lt;character-string&gt;s.</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">    * We only take the first string here.</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;   i = *<a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a>++;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;   <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> -= 1;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;   <span class="keywordflow">if</span> (i &gt; <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>) { <span class="comment">/* illegal packet */</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;txt_callback: malformed TXT record.\n&quot;</span>);</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;   }</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;   <span class="keywordflow">if</span> (i &gt;= <span class="keyword">sizeof</span>(c-&gt;<a class="code" href="../../d9/d24/structtxt__context.html#acb36e435643b51ae1771f87bb67234f6">txt</a>)) { <span class="comment">/* too long? */</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;txt_callback: TXT record too long.\n&quot;</span>);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      i = <span class="keyword">sizeof</span>(c-&gt;<a class="code" href="../../d9/d24/structtxt__context.html#acb36e435643b51ae1771f87bb67234f6">txt</a>) - 1;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;   }</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(c-&gt;<a class="code" href="../../d9/d24/structtxt__context.html#acb36e435643b51ae1771f87bb67234f6">txt</a>, (<span class="keywordtype">char</span> *)<a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a>, i + 1);  <span class="comment">/* this handles the \0 termination */</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;   c-&gt;<a class="code" href="../../d9/d24/structtxt__context.html#a44c4a1bb01729a965d38e3e59d601f93">txtlen</a> = i;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;}</div><div class="ttc" id="structtxt__context_html_acb36e435643b51ae1771f87bb67234f6"><div class="ttname"><a href="../../d9/d24/structtxt__context.html#acb36e435643b51ae1771f87bb67234f6">txt_context::txt</a></div><div class="ttdeci">char txt[1024]</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00146">enum.c:146</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structtxt__context_html_a44c4a1bb01729a965d38e3e59d601f93"><div class="ttname"><a href="../../d9/d24/structtxt__context.html#a44c4a1bb01729a965d38e3e59d601f93">txt_context::txtlen</a></div><div class="ttdeci">int txtlen</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00147">enum.c:147</a></div></div>
<div class="ttc" id="structtxt__context_html"><div class="ttname"><a href="../../d9/d24/structtxt__context.html">txt_context</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d69/enum_8c_source.html#l00145">enum.c:145</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_ab8dde573cc3974acd626c5626fae14b4"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a></div><div class="ttdeci">static int answer(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00682">chan_pjsip.c:682</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d69/enum_8c_source.html#l01072">1072</a> of file <a class="el" href="../../d9/d69/enum_8c_source.html">enum.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d69/enum_8c_source.html#l01077">reload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;{</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a835b27a90d895a488e4e14cc3d2dee8c">AST_MODFLAG_GLOBAL_SYMBOLS</a> | <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;ENUM Support&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_CORE, .load = load_module, .unload = unload_module, .reload = reload_module, .load_pri = AST_MODPRI_CORE, .requires = &quot;extconfig&quot;, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d69/enum_8c_source.html#l01089">1089</a> of file <a class="el" href="../../d9/d69/enum_8c_source.html">enum.c</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d69/enum_8c_source.html#l01089">1089</a> of file <a class="el" href="../../d9/d69/enum_8c_source.html">enum.c</a>.</p>

</div>
</div>
<a id="afe913060145c35f4046f5245b2534cf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe913060145c35f4046f5245b2534cf9">&#9670;&nbsp;</a></span>ebl_alg</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int ebl_alg = <a class="el" href="../../d9/d69/enum_8c.html#a4e7355b2e878225f47929cd3bb0276bc">ENUMLOOKUP_BLR_CC</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d69/enum_8c_source.html#l00096">96</a> of file <a class="el" href="../../d9/d69/enum_8c_source.html">enum.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d69/enum_8c_source.html#l00649">ast_get_enum()</a>, and <a class="el" href="../../d9/d69/enum_8c_source.html#l01030">private_enum_init()</a>.</p>

</div>
</div>
<a id="ab5b4e17c6fe8b24534ed09383f512b06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5b4e17c6fe8b24534ed09383f512b06">&#9670;&nbsp;</a></span>enumlock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a> enumlock = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d69/enum_8c_source.html#l00101">101</a> of file <a class="el" href="../../d9/d69/enum_8c_source.html">enum.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d69/enum_8c_source.html#l00649">ast_get_enum()</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00330">blr_ebl()</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00201">blr_txt()</a>, and <a class="el" href="../../d9/d69/enum_8c_source.html#l01030">private_enum_init()</a>.</p>

</div>
</div>
<a id="a48dbbc896e14cd8cab443a8066ea1e8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48dbbc896e14cd8cab443a8066ea1e8b">&#9670;&nbsp;</a></span>ienum_branchlabel</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char ienum_branchlabel[32] = &quot;i&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d69/enum_8c_source.html#l00091">91</a> of file <a class="el" href="../../d9/d69/enum_8c_source.html">enum.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d69/enum_8c_source.html#l00649">ast_get_enum()</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00330">blr_ebl()</a>, <a class="el" href="../../d9/d69/enum_8c_source.html#l00201">blr_txt()</a>, and <a class="el" href="../../d9/d69/enum_8c_source.html#l01030">private_enum_init()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:45:51 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
