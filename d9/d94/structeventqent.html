<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: eventqent Struct Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">eventqent Struct Reference<div class="ingroups"><a class="el" href="../../df/d72/group__Group__AMI.html">AMI functions</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a60863e080514b398bce285b4d087dcf1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d94/structeventqent.html#a60863e080514b398bce285b4d087dcf1">category</a></td></tr>
<tr class="separator:a60863e080514b398bce285b4d087dcf1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1db4845df10d789835dcc97c392a2fe6"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d94/structeventqent.html#a1db4845df10d789835dcc97c392a2fe6">seq</a></td></tr>
<tr class="separator:a1db4845df10d789835dcc97c392a2fe6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cf96982557d56650f0f4cd3762f05a0"><td class="memItemLeft" align="right" valign="top">struct timeval&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d94/structeventqent.html#a9cf96982557d56650f0f4cd3762f05a0">tv</a></td></tr>
<tr class="separator:a9cf96982557d56650f0f4cd3762f05a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0f2e84f976dc042139d37fd1c28d73b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d94/structeventqent.html#ab0f2e84f976dc042139d37fd1c28d73b">usecount</a></td></tr>
<tr class="separator:ab0f2e84f976dc042139d37fd1c28d73b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Linked list of events. Global events are appended to the list by <a class="el" href="../../df/d72/group__Group__AMI.html#gae456544c8bf8d684b871f41851f8eab1" title="events are appended to a queue from where they can be dispatched to clients. ">append_event()</a>. The usecount is the number of stored pointers to the element, excluding the list pointers. So an element that is only in the list has a usecount of 0, not 1.</p>
<p>Clients have a pointer to the last event processed, and for each of these clients we track the usecount of the elements. If we have a pointer to an entry in the list, it is safe to navigate it forward because elements will not be deleted, but only appended. The worst that can happen is seeing the pointer still NULL.</p>
<p>When the usecount of an element drops to 0, and the element is the first in the list, we can remove it. Removal is done within the main thread, which is woken up for the purpose.</p>
<p>For simplicity of implementation, we make sure the list is never empty. </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01459">1459</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>
</div><h2 class="groupheader">Field Documentation</h2>
<a id="a60863e080514b398bce285b4d087dcf1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60863e080514b398bce285b4d087dcf1">&#9670;&nbsp;</a></span>category</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int category</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01461">1461</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l03620">action_getconfig()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03750">action_getconfigjson()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03682">action_listcategories()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04206">action_waitevent()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07068">append_event()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02706">handle_showmaneventq()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03819">handle_updates()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l06227">process_events()</a>.</p>

</div>
</div>
<a id="a1db4845df10d789835dcc97c392a2fe6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1db4845df10d789835dcc97c392a2fe6">&#9670;&nbsp;</a></span>seq</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int seq</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>sequence number </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01462">1462</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l07112">__manager_event_sessions_va()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l07068">append_event()</a>.</p>

</div>
</div>
<a id="a9cf96982557d56650f0f4cd3762f05a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cf96982557d56650f0f4cd3762f05a0">&#9670;&nbsp;</a></span>tv</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct timeval tv</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>When event was allocated </p>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01463">1463</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l07068">append_event()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l01983">purge_events()</a>.</p>

</div>
</div>
<a id="ab0f2e84f976dc042139d37fd1c28d73b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0f2e84f976dc042139d37fd1c28d73b">&#9670;&nbsp;</a></span>usecount</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int usecount</td>
        </tr>
      </table>
</div><div class="memdoc">
<h1>of clients who still need the event</h1>

<p class="definition">Definition at line <a class="el" href="../../d4/d10/manager_8c_source.html#l01460">1460</a> of file <a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l02753">advance_event()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07068">append_event()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01963">grab_last()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02706">handle_showmaneventq()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01983">purge_events()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l02198">session_destructor()</a>.</p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li><a class="el" href="../../d4/d10/manager_8c_source.html">manager.c</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:47:25 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
