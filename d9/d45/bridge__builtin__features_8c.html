<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: bridge_builtin_features.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_248c5494cbf50d375c6b51a2b292aa12.html">bridges</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">bridge_builtin_features.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Built in bridging features.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d7b/channel_8h_source.html">asterisk/channel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d56/bridge_8h_source.html">asterisk/bridge.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/d3b/bridge__technology_8h_source.html">asterisk/bridge_technology.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html">asterisk/frame.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d4d/file_8h_source.html">asterisk/file.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html">asterisk/app.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/da5/astobj2_8h_source.html">asterisk/astobj2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/de0/pbx_8h_source.html">asterisk/pbx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d33/parking_8h_source.html">asterisk/parking.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/daa/include_2asterisk_2features__config_8h_source.html">asterisk/features_config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d60/monitor_8h_source.html">asterisk/monitor.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/d40/mixmonitor_8h_source.html">asterisk/mixmonitor.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/d79/audiohook_8h_source.html">asterisk/audiohook.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/da3/causes_8h_source.html">asterisk/causes.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for bridge_builtin_features.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/d46/bridge__builtin__features_8c__incl.png" border="0" usemap="#bridge__builtin__features_8c" alt=""/></div>
<map name="bridge__builtin__features_8c" id="bridge__builtin__features_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="343,528,427,555"/>
<area shape="rect" id="node11" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="2461,155,2597,181"/>
<area shape="rect" id="node15" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1594,379,1733,405"/>
<area shape="rect" id="node20" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="632,528,767,555"/>
<area shape="rect" id="node23" href="../../d6/d66/include_2asterisk_2frame_8h.html" title="Asterisk internal frame definitions. " alt="" coords="1265,528,1392,555"/>
<area shape="rect" id="node35" href="../../d4/d56/bridge_8h.html" title="Bridging API. " alt="" coords="1953,155,2081,181"/>
<area shape="rect" id="node38" href="../../d0/d3b/bridge__technology_8h.html" title="Channel Bridging API. " alt="" coords="1914,304,2117,331"/>
<area shape="rect" id="node42" href="../../d2/d4d/file_8h.html" title="Generic File Format Support. Should be included by clients of the file handling routines. File service providers should instead include mod_format.h. " alt="" coords="2898,453,3005,480"/>
<area shape="rect" id="node43" href="../../d3/d93/include_2asterisk_2app_8h.html" title="Application convenience functions, designed to give consistent look and feel to Asterisk apps..." alt="" coords="2735,379,2847,405"/>
<area shape="rect" id="node44" href="../../db/de0/pbx_8h.html" title="Core PBX routines and definitions. " alt="" coords="2141,304,2252,331"/>
<area shape="rect" id="node45" href="../../d2/d33/parking_8h.html" title="Call Parking API. " alt="" coords="2001,80,2136,107"/>
<area shape="rect" id="node46" href="../../d0/daa/include_2asterisk_2features__config_8h.html" title="asterisk/features_config.h" alt="" coords="3230,155,3417,181"/>
<area shape="rect" id="node47" href="../../d5/d60/monitor_8h.html" title="Channel monitoring. " alt="" coords="1720,155,1857,181"/>
<area shape="rect" id="node48" href="../../d9/d40/mixmonitor_8h.html" title="loadable MixMonitor functionality " alt="" coords="3139,80,3299,107"/>
<area shape="rect" id="node49" href="../../d0/d79/audiohook_8h.html" title="Audiohooks Architecture. " alt="" coords="3130,528,3285,555"/>
<area shape="rect" id="node50" href="../../d4/da3/causes_8h.html" title="Internal Asterisk hangup causes. " alt="" coords="3374,80,3507,107"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="307,603,462,629"/>
<area shape="rect" id="node4" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="487,603,624,629"/>
<area shape="rect" id="node9" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="148,603,283,629"/>
<area shape="rect" id="node12" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="2399,528,2514,555"/>
<area shape="rect" id="node13" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="2400,677,2513,704"/>
<area shape="rect" id="node14" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="2839,603,2997,629"/>
<area shape="rect" id="node16" href="../../dc/d4d/alertpipe_8h.html" title="asterisk/alertpipe.h" alt="" coords="2074,453,2218,480"/>
<area shape="rect" id="node17" href="../../dc/d14/abstract__jb_8h.html" title="Common implementation&#45;independent jitterbuffer stuff. " alt="" coords="1416,528,1575,555"/>
<area shape="rect" id="node21" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="1803,603,1953,629"/>
<area shape="rect" id="node22" href="../../d4/dfb/poll-compat_8h.html" title="asterisk/poll&#45;compat.h" alt="" coords="737,453,901,480"/>
<area shape="rect" id="node25" href="../../d9/de7/chanvars_8h.html" title="Channel Variables. " alt="" coords="1853,453,1999,480"/>
<area shape="rect" id="node26" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="2243,453,2369,480"/>
<area shape="rect" id="node27" href="../../dc/d07/cdr_8h.html" title="Call Detail Record API. " alt="" coords="926,453,1033,480"/>
<area shape="rect" id="node28" href="../../d9/db6/datastore_8h.html" title="Asterisk datastore objects. " alt="" coords="1803,528,1953,555"/>
<area shape="rect" id="node29" href="../../d0/d3c/format__cap_8h.html" title="Format Capabilities API. " alt="" coords="1057,453,1219,480"/>
<area shape="rect" id="node30" href="../../d9/d95/channelstate_8h.html" title="Channel states. " alt="" coords="299,453,470,480"/>
<area shape="rect" id="node31" href="../../de/dc8/ccss_8h.html" title="Call Completion Supplementary Services API. " alt="" coords="545,453,661,480"/>
<area shape="rect" id="node32" href="../../db/d3c/framehook_8h.html" title="FrameHook Architecture. " alt="" coords="1469,453,1626,480"/>
<area shape="rect" id="node33" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="2445,453,2570,480"/>
<area shape="rect" id="node34" href="../../d4/d61/endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="1243,453,1393,480"/>
<area shape="rect" id="node19" href="../../d0/d0a/format_8h.html" title="Media Format API. " alt="" coords="1481,603,1611,629"/>
<area shape="rect" id="node24" href="../../d1/d84/endian_8h.html" title="Asterisk architecture endianess compatibility definitions. " alt="" coords="1214,603,1345,629"/>
<area shape="rect" id="node36" href="../../dc/d7a/bridge__features_8h.html" title="Channel Bridging API. " alt="" coords="1701,304,1889,331"/>
<area shape="rect" id="node37" href="../../de/d41/bridge__channel_8h.html" title="asterisk/bridge_channel.h" alt="" coords="1752,229,1937,256"/>
<area shape="rect" id="node39" href="../../dd/dff/bridge__roles_8h.html" title="Channel Bridging Roles API. " alt="" coords="2091,379,2257,405"/>
<area shape="rect" id="node40" href="../../d3/d08/dsp_8h.html" title="Convenient Signal Processing routines. " alt="" coords="1961,229,2072,256"/>
<area shape="rect" id="node41" href="../../dd/d1d/uuid_8h.html" title="Universally unique identifier support. " alt="" coords="2097,229,2211,256"/>
</map>
</div>
</div>
<p><a href="../../d9/d45/bridge__builtin__features_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a6e5445e57fb73ec4bdf501f84dc3711b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711b">set_touch_variables_res</a> { <a class="el" href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711ba2073e3a7574dca4f4a2dbb97f7ed8423">SET_TOUCH_SUCCESS</a>, 
<a class="el" href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711ba7e481fd7e2c86948792c62fc8a416ff8">SET_TOUCH_UNSET</a>, 
<a class="el" href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711ba6e35ae560fc674b2a03bea542c1350e7">SET_TOUCH_ALLOC_FAILURE</a>
 }</td></tr>
<tr class="separator:a6e5445e57fb73ec4bdf501f84dc3711b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d45/bridge__builtin__features_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d45/bridge__builtin__features_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d45/bridge__builtin__features_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f9975616ebf4def0c5af655077e7f19"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d45/bridge__builtin__features_8c.html#a4f9975616ebf4def0c5af655077e7f19">feature_automixmonitor</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, void *hook_pvt)</td></tr>
<tr class="separator:a4f9975616ebf4def0c5af655077e7f19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2851c8bd60bfcec6a9c21628c9f795ea"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d45/bridge__builtin__features_8c.html#a2851c8bd60bfcec6a9c21628c9f795ea">feature_automonitor</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, void *hook_pvt)</td></tr>
<tr class="separator:a2851c8bd60bfcec6a9c21628c9f795ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01aba9ff5202d5f214f88fa0847b25ee"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d45/bridge__builtin__features_8c.html#a01aba9ff5202d5f214f88fa0847b25ee">feature_hangup</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, void *hook_pvt)</td></tr>
<tr class="memdesc:a01aba9ff5202d5f214f88fa0847b25ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal built in feature for hangup.  <a href="#a01aba9ff5202d5f214f88fa0847b25ee">More...</a><br /></td></tr>
<tr class="separator:a01aba9ff5202d5f214f88fa0847b25ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d45/bridge__builtin__features_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37673ab28e3aab412a99889ebc977e13"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d45/bridge__builtin__features_8c.html#a37673ab28e3aab412a99889ebc977e13">set_touch_variable</a> (enum <a class="el" href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711b">set_touch_variables_res</a> *res, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *var_name, char **touch)</td></tr>
<tr class="separator:a37673ab28e3aab412a99889ebc977e13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86d0deeb6631fb3a7c4d62f5bbecae8a"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711b">set_touch_variables_res</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d45/bridge__builtin__features_8c.html#a86d0deeb6631fb3a7c4d62f5bbecae8a">set_touch_variables</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, int is_mixmonitor, char **touch_format, char **touch_monitor, char **touch_monitor_prefix)</td></tr>
<tr class="separator:a86d0deeb6631fb3a7c4d62f5bbecae8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bf65ff932c85fdccfe3a0194d74ebc2"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d45/bridge__builtin__features_8c.html#a3bf65ff932c85fdccfe3a0194d74ebc2">start_automixmonitor</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *peer_chan, struct <a class="el" href="../../db/da0/structast__features__general__config.html">ast_features_general_config</a> *features_cfg, const char *start_message)</td></tr>
<tr class="separator:a3bf65ff932c85fdccfe3a0194d74ebc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c15c0bd39a35b178f7ddfb7ff84acfd"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d45/bridge__builtin__features_8c.html#a9c15c0bd39a35b178f7ddfb7ff84acfd">start_automonitor</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *peer_chan, struct <a class="el" href="../../db/da0/structast__features__general__config.html">ast_features_general_config</a> *features_cfg, const char *start_message)</td></tr>
<tr class="separator:a9c15c0bd39a35b178f7ddfb7ff84acfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aed48fa319acfecc595c03370161592"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d45/bridge__builtin__features_8c.html#a8aed48fa319acfecc595c03370161592">stop_automixmonitor</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *peer_chan, struct <a class="el" href="../../db/da0/structast__features__general__config.html">ast_features_general_config</a> *features_cfg, const char *stop_message)</td></tr>
<tr class="separator:a8aed48fa319acfecc595c03370161592"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0074d3c04d3dbf8bbe6f3f7c31715288"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d45/bridge__builtin__features_8c.html#a0074d3c04d3dbf8bbe6f3f7c31715288">stop_automonitor</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *peer_chan, struct <a class="el" href="../../db/da0/structast__features__general__config.html">ast_features_general_config</a> *features_cfg, const char *stop_message)</td></tr>
<tr class="separator:a0074d3c04d3dbf8bbe6f3f7c31715288"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d45/bridge__builtin__features_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d45/bridge__builtin__features_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a54af2a9b29d140908cc9dffd0618951b">AST_MODFLAG_DEFAULT</a> , .description = &quot;Built <a class="el" href="../../da/d7c/utils_2frame_8h.html#aca392a8d3941cd0740aef3ad92545d67">in</a> bridging features&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_CORE, .load = load_module, .unload = unload_module, .optional_modules = &quot;res_monitor&quot;, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d45/bridge__builtin__features_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Built in bridging features. </p>
<dl class="section author"><dt>Author</dt><dd>Joshua Colp <a href="#" onclick="location.href='mai'+'lto:'+'jco'+'lp'+'@di'+'gi'+'um.'+'co'+'m'; return false;">jcolp<span style="display: none;">.nosp@m.</span>@dig<span style="display: none;">.nosp@m.</span>ium.c<span style="display: none;">.nosp@m.</span>om</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html">bridge_builtin_features.c</a>.</p>
</div><h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a6e5445e57fb73ec4bdf501f84dc3711b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e5445e57fb73ec4bdf501f84dc3711b">&#9670;&nbsp;</a></span>set_touch_variables_res</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711b">set_touch_variables_res</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a6e5445e57fb73ec4bdf501f84dc3711ba2073e3a7574dca4f4a2dbb97f7ed8423"></a>SET_TOUCH_SUCCESS&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a6e5445e57fb73ec4bdf501f84dc3711ba7e481fd7e2c86948792c62fc8a416ff8"></a>SET_TOUCH_UNSET&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a6e5445e57fb73ec4bdf501f84dc3711ba6e35ae560fc674b2a03bea542c1350e7"></a>SET_TOUCH_ALLOC_FAILURE&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00057">57</a> of file <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html">bridge_builtin_features.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;                             {</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;   <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711ba2073e3a7574dca4f4a2dbb97f7ed8423">SET_TOUCH_SUCCESS</a>,</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;   <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711ba7e481fd7e2c86948792c62fc8a416ff8">SET_TOUCH_UNSET</a>,</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;   <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711ba6e35ae560fc674b2a03bea542c1350e7">SET_TOUCH_ALLOC_FAILURE</a>,</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;};</div><div class="ttc" id="bridge__builtin__features_8c_html_a6e5445e57fb73ec4bdf501f84dc3711ba6e35ae560fc674b2a03bea542c1350e7"><div class="ttname"><a href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711ba6e35ae560fc674b2a03bea542c1350e7">SET_TOUCH_ALLOC_FAILURE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d45/bridge__builtin__features_8c_source.html#l00060">bridge_builtin_features.c:60</a></div></div>
<div class="ttc" id="bridge__builtin__features_8c_html_a6e5445e57fb73ec4bdf501f84dc3711ba2073e3a7574dca4f4a2dbb97f7ed8423"><div class="ttname"><a href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711ba2073e3a7574dca4f4a2dbb97f7ed8423">SET_TOUCH_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d45/bridge__builtin__features_8c_source.html#l00058">bridge_builtin_features.c:58</a></div></div>
<div class="ttc" id="bridge__builtin__features_8c_html_a6e5445e57fb73ec4bdf501f84dc3711ba7e481fd7e2c86948792c62fc8a416ff8"><div class="ttname"><a href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711ba7e481fd7e2c86948792c62fc8a416ff8">SET_TOUCH_UNSET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d45/bridge__builtin__features_8c_source.html#l00059">bridge_builtin_features.c:59</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00529">529</a> of file <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html">bridge_builtin_features.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00529">529</a> of file <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html">bridge_builtin_features.c</a>.</p>

</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00529">529</a> of file <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html">bridge_builtin_features.c</a>.</p>

</div>
</div>
<a id="a4f9975616ebf4def0c5af655077e7f19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f9975616ebf4def0c5af655077e7f19">&#9670;&nbsp;</a></span>feature_automixmonitor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int feature_automixmonitor </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>hook_pvt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00408">408</a> of file <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html">bridge_builtin_features.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d0/d79/audiohook_8h_source.html#l00036">AST_AUDIOHOOK_TYPE_SPY</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00222">ast_bridge_channel_lock_bridge()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01404">ast_bridge_channel_queue_playfile()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l04114">ast_bridge_peer_nolock()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00493">ast_bridge_unlock</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l01157">ast_channel_audiohook_count_by_source()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02992">ast_channel_cleanup</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../de/d71/features__config_8c_source.html#l01123">ast_get_chan_features_general_config()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00314">AUTO_MONITOR_START</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00316">AUTO_MONITOR_STOP</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00312">AUTO_MONITOR_TOGGLE</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00100">ast_bridge_channel::bridge</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l00354">mixmonitor_spy_type</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">options</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_builtin_getvar_helper()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00323">start_automixmonitor()</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00326">ast_bridge_features_automixmonitor::start_stop</a>, and <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00300">stop_automixmonitor()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00512">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;{</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d8/d93/app__mixmonitor_8c.html#ae4d8626bafc0788638c26976d170ed44">mixmonitor_spy_type</a> = <span class="stringliteral">&quot;MixMonitor&quot;</span>;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *stop_message;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *start_message;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d41/structast__bridge__features__automixmonitor.html">ast_bridge_features_automixmonitor</a> *<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a> = hook_pvt;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../dc/d7a/bridge__features_8h.html#ac5edca1f8aa8a5ea765cea146507a882">ast_bridge_features_monitor</a> <a class="code" href="../../d7/d41/structast__bridge__features__automixmonitor.html#a2e911a04575a1931bc544696762088e5">start_stop</a> = options ? options-&gt;<a class="code" href="../../d7/d41/structast__bridge__features__automixmonitor.html#a2e911a04575a1931bc544696762088e5">start_stop</a> : <a class="code" href="../../dc/d7a/bridge__features_8h.html#ac5edca1f8aa8a5ea765cea146507a882aeba3f2626bed370d217a903b930c574f">AUTO_MONITOR_TOGGLE</a>;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;   <span class="keywordtype">int</span> is_monitoring;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, peer_chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a>);</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../db/da0/structast__features__general__config.html">ast_features_general_config</a> *, features_cfg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;   features_cfg = <a class="code" href="../../d0/daa/include_2asterisk_2features__config_8h.html#a23084fc291f5d68ffa0a4e5a5ee39949">ast_get_chan_features_general_config</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a>(bridge_channel);</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;   peer_chan = <a class="code" href="../../d4/d56/bridge_8h.html#a446fdf2b4bc50dd4cf7325c6b01c075c">ast_bridge_peer_nolock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;   <span class="keywordflow">if</span> (!peer_chan) {</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;Cannot start AutoMixMonitor for %s - cannot determine peer in bridge.\n&quot;</span>,</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      <span class="keywordflow">if</span> (features_cfg &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(features_cfg-&gt;recordingfailsound)) {</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;         <a class="code" href="../../de/d41/bridge__channel_8h.html#ac352fd6d6188d7431155f34ae2a38799">ast_bridge_channel_queue_playfile</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, features_cfg-&gt;recordingfailsound, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      }</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;   }</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;   start_message = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>,</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      <span class="stringliteral">&quot;TOUCH_MIXMONITOR_MESSAGE_START&quot;</span>);</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;   start_message = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(start_message, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;   stop_message = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>,</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      <span class="stringliteral">&quot;TOUCH_MIXMONITOR_MESSAGE_STOP&quot;</span>);</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;   stop_message = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(stop_message, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;   is_monitoring =</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      0 &lt; <a class="code" href="../../d0/d79/audiohook_8h.html#a86f07afe75e6c2405d124d98faaf9800">ast_channel_audiohook_count_by_source</a>(peer_chan, mixmonitor_spy_type, <a class="code" href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0a29865bbf4732a7e78748db47b91e46f5">AST_AUDIOHOOK_TYPE_SPY</a>);</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;   <span class="keywordflow">switch</span> (start_stop) {</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/d7a/bridge__features_8h.html#ac5edca1f8aa8a5ea765cea146507a882aeba3f2626bed370d217a903b930c574f">AUTO_MONITOR_TOGGLE</a>:</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      <span class="keywordflow">if</span> (is_monitoring) {</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;         <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a8aed48fa319acfecc595c03370161592">stop_automixmonitor</a>(bridge_channel, peer_chan, features_cfg, stop_message);</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;         <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a3bf65ff932c85fdccfe3a0194d74ebc2">start_automixmonitor</a>(bridge_channel, peer_chan, features_cfg, start_message);</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      }</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/d7a/bridge__features_8h.html#ac5edca1f8aa8a5ea765cea146507a882a26916a61be33d13623f6fd1d8865d7ca">AUTO_MONITOR_START</a>:</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      <span class="keywordflow">if</span> (!is_monitoring) {</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;         <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a3bf65ff932c85fdccfe3a0194d74ebc2">start_automixmonitor</a>(bridge_channel, peer_chan, features_cfg, start_message);</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      }</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;AutoMixMonitor already recording call.\n&quot;</span>);</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/d7a/bridge__features_8h.html#ac5edca1f8aa8a5ea765cea146507a882a880ad3ad184ec2bab1b23a4e8b4c3e0c">AUTO_MONITOR_STOP</a>:</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;      <span class="keywordflow">if</span> (is_monitoring) {</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;         <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a8aed48fa319acfecc595c03370161592">stop_automixmonitor</a>(bridge_channel, peer_chan, features_cfg, stop_message);</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      }</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;AutoMixMonitor already stopped on call.\n&quot;</span>);</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   }</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">    * Fake start/stop to invoker so will think it did something but</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">    * was already in that mode.</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;   <span class="keywordflow">if</span> (features_cfg &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(features_cfg-&gt;courtesytone)) {</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#ac352fd6d6188d7431155f34ae2a38799">ast_bridge_channel_queue_playfile</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, features_cfg-&gt;courtesytone, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;   }</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;   <span class="keywordflow">if</span> (is_monitoring) {</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(start_message)) {</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;         <a class="code" href="../../de/d41/bridge__channel_8h.html#ac352fd6d6188d7431155f34ae2a38799">ast_bridge_channel_queue_playfile</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, start_message, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      }</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(stop_message)) {</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;         <a class="code" href="../../de/d41/bridge__channel_8h.html#ac352fd6d6188d7431155f34ae2a38799">ast_bridge_channel_queue_playfile</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, stop_message, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      }</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;   }</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="bridge__builtin__features_8c_html_a3bf65ff932c85fdccfe3a0194d74ebc2"><div class="ttname"><a href="../../d9/d45/bridge__builtin__features_8c.html#a3bf65ff932c85fdccfe3a0194d74ebc2">start_automixmonitor</a></div><div class="ttdeci">static void start_automixmonitor(struct ast_bridge_channel *bridge_channel, struct ast_channel *peer_chan, struct ast_features_general_config *features_cfg, const char *start_message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d45/bridge__builtin__features_8c_source.html#l00323">bridge_builtin_features.c:323</a></div></div>
<div class="ttc" id="bridge_8h_html_a446fdf2b4bc50dd4cf7325c6b01c075c"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a446fdf2b4bc50dd4cf7325c6b01c075c">ast_bridge_peer_nolock</a></div><div class="ttdeci">struct ast_channel * ast_bridge_peer_nolock(struct ast_bridge *bridge, struct ast_channel *chan)</div><div class="ttdoc">Get the channel&amp;#39;s bridge peer only if the bridge is two-party. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l04114">bridge.c:4114</a></div></div>
<div class="ttc" id="structast__features__general__config_html"><div class="ttname"><a href="../../db/da0/structast__features__general__config.html">ast_features_general_config</a></div><div class="ttdoc">General features configuration items. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00029">include/asterisk/features_config.h:29</a></div></div>
<div class="ttc" id="bridge__features_8h_html_ac5edca1f8aa8a5ea765cea146507a882"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#ac5edca1f8aa8a5ea765cea146507a882">ast_bridge_features_monitor</a></div><div class="ttdeci">ast_bridge_features_monitor</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00310">bridge_features.h:310</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="pbx_8h_html_a98c5425b90ec7c5e136a40f529170b1b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a></div><div class="ttdeci">const char * pbx_builtin_getvar_helper(struct ast_channel *chan, const char *name)</div><div class="ttdoc">Return a pointer to the value of the corresponding channel variable. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_variables.c:1000</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="include_2asterisk_2features__config_8h_html_a23084fc291f5d68ffa0a4e5a5ee39949"><div class="ttname"><a href="../../d0/daa/include_2asterisk_2features__config_8h.html#a23084fc291f5d68ffa0a4e5a5ee39949">ast_get_chan_features_general_config</a></div><div class="ttdeci">struct ast_features_general_config * ast_get_chan_features_general_config(struct ast_channel *chan)</div><div class="ttdoc">Get the general configuration options for a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d71/features__config_8c_source.html#l01123">features_config.c:1123</a></div></div>
<div class="ttc" id="audiohook_8h_html_a86f07afe75e6c2405d124d98faaf9800"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#a86f07afe75e6c2405d124d98faaf9800">ast_channel_audiohook_count_by_source</a></div><div class="ttdeci">int ast_channel_audiohook_count_by_source(struct ast_channel *chan, const char *source, enum ast_audiohook_type type)</div><div class="ttdoc">Find out how many audiohooks from a certain source exist on a given channel, regardless of status...</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4f/audiohook_8c_source.html#l01157">audiohook.c:1157</a></div></div>
<div class="ttc" id="app__mixmonitor_8c_html_ae4d8626bafc0788638c26976d170ed44"><div class="ttname"><a href="../../d8/d93/app__mixmonitor_8c.html#ae4d8626bafc0788638c26976d170ed44">mixmonitor_spy_type</a></div><div class="ttdeci">static const char *const mixmonitor_spy_type</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d93/app__mixmonitor_8c_source.html#l00354">app_mixmonitor.c:354</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="channel_8h_html_ae93ebb3372a2d9495ae3c5417dd95cd5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a></div><div class="ttdeci">#define ast_channel_cleanup(c)</div><div class="ttdoc">Cleanup a channel reference. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02992">channel.h:2992</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="bridge_8h_html_a0fb66f4741ca8d106af1917a2f1aab6e"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a></div><div class="ttdeci">#define ast_bridge_unlock(bridge)</div><div class="ttdoc">Unlock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00493">bridge.h:493</a></div></div>
<div class="ttc" id="structast__bridge__features__automixmonitor_html"><div class="ttname"><a href="../../d7/d41/structast__bridge__features__automixmonitor.html">ast_bridge_features_automixmonitor</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00324">bridge_features.h:324</a></div></div>
<div class="ttc" id="bridge__features_8h_html_ac5edca1f8aa8a5ea765cea146507a882aeba3f2626bed370d217a903b930c574f"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#ac5edca1f8aa8a5ea765cea146507a882aeba3f2626bed370d217a903b930c574f">AUTO_MONITOR_TOGGLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00312">bridge_features.h:312</a></div></div>
<div class="ttc" id="bridge__builtin__features_8c_html_a8aed48fa319acfecc595c03370161592"><div class="ttname"><a href="../../d9/d45/bridge__builtin__features_8c.html#a8aed48fa319acfecc595c03370161592">stop_automixmonitor</a></div><div class="ttdeci">static void stop_automixmonitor(struct ast_bridge_channel *bridge_channel, struct ast_channel *peer_chan, struct ast_features_general_config *features_cfg, const char *stop_message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d45/bridge__builtin__features_8c_source.html#l00300">bridge_builtin_features.c:300</a></div></div>
<div class="ttc" id="bridge__features_8h_html_ac5edca1f8aa8a5ea765cea146507a882a26916a61be33d13623f6fd1d8865d7ca"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#ac5edca1f8aa8a5ea765cea146507a882a26916a61be33d13623f6fd1d8865d7ca">AUTO_MONITOR_START</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00314">bridge_features.h:314</a></div></div>
<div class="ttc" id="audiohook_8h_html_abce1d2faae234aa016905215014542b0a29865bbf4732a7e78748db47b91e46f5"><div class="ttname"><a href="../../d0/d79/audiohook_8h.html#abce1d2faae234aa016905215014542b0a29865bbf4732a7e78748db47b91e46f5">AST_AUDIOHOOK_TYPE_SPY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d79/audiohook_8h_source.html#l00036">audiohook.h:36</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_a7d01ff5caf025a97796d2dbb78f5f02c"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a></div><div class="ttdeci">void ast_bridge_channel_lock_bridge(struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Lock the bridge associated with the bridge channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00222">bridge_channel.c:222</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="bridge__channel_8h_html_ac352fd6d6188d7431155f34ae2a38799"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ac352fd6d6188d7431155f34ae2a38799">ast_bridge_channel_queue_playfile</a></div><div class="ttdeci">int ast_bridge_channel_queue_playfile(struct ast_bridge_channel *bridge_channel, ast_bridge_custom_play_fn custom_play, const char *playfile, const char *moh_class)</div><div class="ttdoc">Queue a bridge action play file frame onto the bridge channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01404">bridge_channel.c:1404</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="structast__bridge__features__automixmonitor_html_a2e911a04575a1931bc544696762088e5"><div class="ttname"><a href="../../d7/d41/structast__bridge__features__automixmonitor.html#a2e911a04575a1931bc544696762088e5">ast_bridge_features_automixmonitor::start_stop</a></div><div class="ttdeci">enum ast_bridge_features_monitor start_stop</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00326">bridge_features.h:326</a></div></div>
<div class="ttc" id="bridge__features_8h_html_ac5edca1f8aa8a5ea765cea146507a882a880ad3ad184ec2bab1b23a4e8b4c3e0c"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#ac5edca1f8aa8a5ea765cea146507a882a880ad3ad184ec2bab1b23a4e8b4c3e0c">AUTO_MONITOR_STOP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00316">bridge_features.h:316</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2851c8bd60bfcec6a9c21628c9f795ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2851c8bd60bfcec6a9c21628c9f795ea">&#9670;&nbsp;</a></span>feature_automonitor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int feature_automonitor </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>hook_pvt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00220">220</a> of file <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html">bridge_builtin_features.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00222">ast_bridge_channel_lock_bridge()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01404">ast_bridge_channel_queue_playfile()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l04114">ast_bridge_peer_nolock()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00493">ast_bridge_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02992">ast_channel_cleanup</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00613">ast_channel_monitor()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../de/d71/features__config_8c_source.html#l01123">ast_get_chan_features_general_config()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00314">AUTO_MONITOR_START</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00316">AUTO_MONITOR_STOP</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00312">AUTO_MONITOR_TOGGLE</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00100">ast_bridge_channel::bridge</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">options</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_builtin_getvar_helper()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00139">start_automonitor()</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00321">ast_bridge_features_automonitor::start_stop</a>, and <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00106">stop_automonitor()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00512">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;{</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *start_message;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *stop_message;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d21/structast__bridge__features__automonitor.html">ast_bridge_features_automonitor</a> *<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a> = hook_pvt;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../dc/d7a/bridge__features_8h.html#ac5edca1f8aa8a5ea765cea146507a882">ast_bridge_features_monitor</a> <a class="code" href="../../df/d21/structast__bridge__features__automonitor.html#a2e911a04575a1931bc544696762088e5">start_stop</a> = options ? options-&gt;<a class="code" href="../../df/d21/structast__bridge__features__automonitor.html#a2e911a04575a1931bc544696762088e5">start_stop</a> : <a class="code" href="../../dc/d7a/bridge__features_8h.html#ac5edca1f8aa8a5ea765cea146507a882aeba3f2626bed370d217a903b930c574f">AUTO_MONITOR_TOGGLE</a>;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;   <span class="keywordtype">int</span> is_monitoring;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, peer_chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a>);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../db/da0/structast__features__general__config.html">ast_features_general_config</a> *, features_cfg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;   features_cfg = <a class="code" href="../../d0/daa/include_2asterisk_2features__config_8h.html#a23084fc291f5d68ffa0a4e5a5ee39949">ast_get_chan_features_general_config</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a>(bridge_channel);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;   peer_chan = <a class="code" href="../../d4/d56/bridge_8h.html#a446fdf2b4bc50dd4cf7325c6b01c075c">ast_bridge_peer_nolock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;   <span class="keywordflow">if</span> (!peer_chan) {</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;Cannot start AutoMonitor for %s - can not determine peer in bridge.\n&quot;</span>,</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      <span class="keywordflow">if</span> (features_cfg &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(features_cfg-&gt;recordingfailsound)) {</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;         <a class="code" href="../../de/d41/bridge__channel_8h.html#ac352fd6d6188d7431155f34ae2a38799">ast_bridge_channel_queue_playfile</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, features_cfg-&gt;recordingfailsound, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      }</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;   }</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;   start_message = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>,</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;      <span class="stringliteral">&quot;TOUCH_MONITOR_MESSAGE_START&quot;</span>);</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;   start_message = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(start_message, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;   stop_message = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>,</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      <span class="stringliteral">&quot;TOUCH_MONITOR_MESSAGE_STOP&quot;</span>);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;   stop_message = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(stop_message, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;   is_monitoring = <a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(peer_chan) != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;   <span class="keywordflow">switch</span> (start_stop) {</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/d7a/bridge__features_8h.html#ac5edca1f8aa8a5ea765cea146507a882aeba3f2626bed370d217a903b930c574f">AUTO_MONITOR_TOGGLE</a>:</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      <span class="keywordflow">if</span> (is_monitoring) {</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;         <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a0074d3c04d3dbf8bbe6f3f7c31715288">stop_automonitor</a>(bridge_channel, peer_chan, features_cfg, stop_message);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;         <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a9c15c0bd39a35b178f7ddfb7ff84acfd">start_automonitor</a>(bridge_channel, peer_chan, features_cfg, start_message);</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      }</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/d7a/bridge__features_8h.html#ac5edca1f8aa8a5ea765cea146507a882a26916a61be33d13623f6fd1d8865d7ca">AUTO_MONITOR_START</a>:</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      <span class="keywordflow">if</span> (!is_monitoring) {</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;         <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a9c15c0bd39a35b178f7ddfb7ff84acfd">start_automonitor</a>(bridge_channel, peer_chan, features_cfg, start_message);</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;      }</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;AutoMonitor already recording call.\n&quot;</span>);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/d7a/bridge__features_8h.html#ac5edca1f8aa8a5ea765cea146507a882a880ad3ad184ec2bab1b23a4e8b4c3e0c">AUTO_MONITOR_STOP</a>:</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      <span class="keywordflow">if</span> (is_monitoring) {</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;         <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a0074d3c04d3dbf8bbe6f3f7c31715288">stop_automonitor</a>(bridge_channel, peer_chan, features_cfg, stop_message);</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;      }</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;AutoMonitor already stopped on call.\n&quot;</span>);</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;   }</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">    * Fake start/stop to invoker so will think it did something but</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">    * was already in that mode.</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;   <span class="keywordflow">if</span> (features_cfg &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(features_cfg-&gt;courtesytone)) {</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#ac352fd6d6188d7431155f34ae2a38799">ast_bridge_channel_queue_playfile</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, features_cfg-&gt;courtesytone, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;   }</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;   <span class="keywordflow">if</span> (is_monitoring) {</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(start_message)) {</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;         <a class="code" href="../../de/d41/bridge__channel_8h.html#ac352fd6d6188d7431155f34ae2a38799">ast_bridge_channel_queue_playfile</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, start_message, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;      }</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(stop_message)) {</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;         <a class="code" href="../../de/d41/bridge__channel_8h.html#ac352fd6d6188d7431155f34ae2a38799">ast_bridge_channel_queue_playfile</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, stop_message, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      }</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;   }</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="structast__bridge__features__automonitor_html_a2e911a04575a1931bc544696762088e5"><div class="ttname"><a href="../../df/d21/structast__bridge__features__automonitor.html#a2e911a04575a1931bc544696762088e5">ast_bridge_features_automonitor::start_stop</a></div><div class="ttdeci">enum ast_bridge_features_monitor start_stop</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00321">bridge_features.h:321</a></div></div>
<div class="ttc" id="bridge_8h_html_a446fdf2b4bc50dd4cf7325c6b01c075c"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a446fdf2b4bc50dd4cf7325c6b01c075c">ast_bridge_peer_nolock</a></div><div class="ttdeci">struct ast_channel * ast_bridge_peer_nolock(struct ast_bridge *bridge, struct ast_channel *chan)</div><div class="ttdoc">Get the channel&amp;#39;s bridge peer only if the bridge is two-party. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l04114">bridge.c:4114</a></div></div>
<div class="ttc" id="structast__features__general__config_html"><div class="ttname"><a href="../../db/da0/structast__features__general__config.html">ast_features_general_config</a></div><div class="ttdoc">General features configuration items. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00029">include/asterisk/features_config.h:29</a></div></div>
<div class="ttc" id="bridge__features_8h_html_ac5edca1f8aa8a5ea765cea146507a882"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#ac5edca1f8aa8a5ea765cea146507a882">ast_bridge_features_monitor</a></div><div class="ttdeci">ast_bridge_features_monitor</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00310">bridge_features.h:310</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="pbx_8h_html_a98c5425b90ec7c5e136a40f529170b1b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a></div><div class="ttdeci">const char * pbx_builtin_getvar_helper(struct ast_channel *chan, const char *name)</div><div class="ttdoc">Return a pointer to the value of the corresponding channel variable. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_variables.c:1000</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="include_2asterisk_2features__config_8h_html_a23084fc291f5d68ffa0a4e5a5ee39949"><div class="ttname"><a href="../../d0/daa/include_2asterisk_2features__config_8h.html#a23084fc291f5d68ffa0a4e5a5ee39949">ast_get_chan_features_general_config</a></div><div class="ttdeci">struct ast_features_general_config * ast_get_chan_features_general_config(struct ast_channel *chan)</div><div class="ttdoc">Get the general configuration options for a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d71/features__config_8c_source.html#l01123">features_config.c:1123</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="channel_8h_html_ae93ebb3372a2d9495ae3c5417dd95cd5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae93ebb3372a2d9495ae3c5417dd95cd5">ast_channel_cleanup</a></div><div class="ttdeci">#define ast_channel_cleanup(c)</div><div class="ttdoc">Cleanup a channel reference. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02992">channel.h:2992</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="bridge_8h_html_a0fb66f4741ca8d106af1917a2f1aab6e"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a></div><div class="ttdeci">#define ast_bridge_unlock(bridge)</div><div class="ttdoc">Unlock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00493">bridge.h:493</a></div></div>
<div class="ttc" id="bridge__features_8h_html_ac5edca1f8aa8a5ea765cea146507a882aeba3f2626bed370d217a903b930c574f"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#ac5edca1f8aa8a5ea765cea146507a882aeba3f2626bed370d217a903b930c574f">AUTO_MONITOR_TOGGLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00312">bridge_features.h:312</a></div></div>
<div class="ttc" id="bridge__features_8h_html_ac5edca1f8aa8a5ea765cea146507a882a26916a61be33d13623f6fd1d8865d7ca"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#ac5edca1f8aa8a5ea765cea146507a882a26916a61be33d13623f6fd1d8865d7ca">AUTO_MONITOR_START</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00314">bridge_features.h:314</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_a7d01ff5caf025a97796d2dbb78f5f02c"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a></div><div class="ttdeci">void ast_bridge_channel_lock_bridge(struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Lock the bridge associated with the bridge channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00222">bridge_channel.c:222</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="bridge__channel_8h_html_ac352fd6d6188d7431155f34ae2a38799"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ac352fd6d6188d7431155f34ae2a38799">ast_bridge_channel_queue_playfile</a></div><div class="ttdeci">int ast_bridge_channel_queue_playfile(struct ast_bridge_channel *bridge_channel, ast_bridge_custom_play_fn custom_play, const char *playfile, const char *moh_class)</div><div class="ttdoc">Queue a bridge action play file frame onto the bridge channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01404">bridge_channel.c:1404</a></div></div>
<div class="ttc" id="structast__bridge__features__automonitor_html"><div class="ttname"><a href="../../df/d21/structast__bridge__features__automonitor.html">ast_bridge_features_automonitor</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00319">bridge_features.h:319</a></div></div>
<div class="ttc" id="bridge__builtin__features_8c_html_a0074d3c04d3dbf8bbe6f3f7c31715288"><div class="ttname"><a href="../../d9/d45/bridge__builtin__features_8c.html#a0074d3c04d3dbf8bbe6f3f7c31715288">stop_automonitor</a></div><div class="ttdeci">static void stop_automonitor(struct ast_bridge_channel *bridge_channel, struct ast_channel *peer_chan, struct ast_features_general_config *features_cfg, const char *stop_message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d45/bridge__builtin__features_8c_source.html#l00106">bridge_builtin_features.c:106</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="channel_8h_html_abdebed775647544929616b09a8487817"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a></div><div class="ttdeci">struct ast_channel_monitor * ast_channel_monitor(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00613">channel_internal_api.c:613</a></div></div>
<div class="ttc" id="bridge__builtin__features_8c_html_a9c15c0bd39a35b178f7ddfb7ff84acfd"><div class="ttname"><a href="../../d9/d45/bridge__builtin__features_8c.html#a9c15c0bd39a35b178f7ddfb7ff84acfd">start_automonitor</a></div><div class="ttdeci">static void start_automonitor(struct ast_bridge_channel *bridge_channel, struct ast_channel *peer_chan, struct ast_features_general_config *features_cfg, const char *start_message)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d45/bridge__builtin__features_8c_source.html#l00139">bridge_builtin_features.c:139</a></div></div>
<div class="ttc" id="bridge__features_8h_html_ac5edca1f8aa8a5ea765cea146507a882a880ad3ad184ec2bab1b23a4e8b4c3e0c"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#ac5edca1f8aa8a5ea765cea146507a882a880ad3ad184ec2bab1b23a4e8b4c3e0c">AUTO_MONITOR_STOP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00316">bridge_features.h:316</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a01aba9ff5202d5f214f88fa0847b25ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01aba9ff5202d5f214f88fa0847b25ee">&#9670;&nbsp;</a></span>feature_hangup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int feature_hangup </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>hook_pvt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Internal built in feature for hangup. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00491">491</a> of file <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html">bridge_builtin_features.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00314">ast_bridge_channel_leave_bridge()</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00105">AST_CAUSE_NORMAL_CLEARING</a>, and <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00064">BRIDGE_CHANNEL_STATE_END</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00512">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;{</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment">    * This is very simple, we simply change the state on the</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment">    * bridge_channel to force the channel out of the bridge and the</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">    * core takes care of the rest.</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a>(bridge_channel, <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326">BRIDGE_CHANNEL_STATE_END</a>,</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>);</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;}</div><div class="ttc" id="causes_8h_html_af2235eb1c27925e4020ce286255d165f"><div class="ttname"><a href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a></div><div class="ttdeci">#define AST_CAUSE_NORMAL_CLEARING</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00105">causes.h:105</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326">BRIDGE_CHANNEL_STATE_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00064">bridge_channel.h:64</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ad58d921ec1c5a6f12be8f94327dd98c0"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a></div><div class="ttdeci">void ast_bridge_channel_leave_bridge(struct ast_bridge_channel *bridge_channel, enum bridge_channel_state new_state, int cause)</div><div class="ttdoc">Set bridge channel state to leave bridge (if not leaving already). </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00314">bridge_channel.c:314</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00512">512</a> of file <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html">bridge_builtin_features.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00104">AST_BRIDGE_BUILTIN_AUTOMIXMON</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00098">AST_BRIDGE_BUILTIN_AUTOMON</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00085">AST_BRIDGE_BUILTIN_HANGUP</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03123">ast_bridge_features_register()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00315">AST_MODFLAG_DEFAULT</a>, <a class="el" href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00464">ast_module_shutdown_ref</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00121">AST_MODULE_SUPPORT_CORE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00046">ASTERISK_GPL_KEY</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00408">feature_automixmonitor()</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00220">feature_automonitor()</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00491">feature_hangup()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00342">ast_module_info::self</a>, and <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00503">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;{</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;   <a class="code" href="../../dc/d7a/bridge__features_8h.html#ae364d78e48f19a0d5ceedc6d18cda52d">ast_bridge_features_register</a>(<a class="code" href="../../dc/d7a/bridge__features_8h.html#a59c3a69424e1d3c627ece7aeb5f0bdb3a96d5e1a5c56634eb48dd78965e5e2ba4">AST_BRIDGE_BUILTIN_HANGUP</a>, <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a01aba9ff5202d5f214f88fa0847b25ee">feature_hangup</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;   <a class="code" href="../../dc/d7a/bridge__features_8h.html#ae364d78e48f19a0d5ceedc6d18cda52d">ast_bridge_features_register</a>(<a class="code" href="../../dc/d7a/bridge__features_8h.html#a59c3a69424e1d3c627ece7aeb5f0bdb3ac032caab7558973327322c284b748bf0">AST_BRIDGE_BUILTIN_AUTOMON</a>, <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a2851c8bd60bfcec6a9c21628c9f795ea">feature_automonitor</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;   <a class="code" href="../../dc/d7a/bridge__features_8h.html#ae364d78e48f19a0d5ceedc6d18cda52d">ast_bridge_features_register</a>(<a class="code" href="../../dc/d7a/bridge__features_8h.html#a59c3a69424e1d3c627ece7aeb5f0bdb3a9075785271a9e2a18bb65c99a6bd7744">AST_BRIDGE_BUILTIN_AUTOMIXMON</a>, <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a4f9975616ebf4def0c5af655077e7f19">feature_automixmonitor</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;   <span class="comment">/* This module cannot be unloaded until shutdown */</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#a9967b09817639f2e15c3f074a60b6379">ast_module_shutdown_ref</a>(<a class="code" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>-&gt;<a class="code" href="../../dd/d5f/structast__module__info.html#a1aff0615d43e1dfa5c72c1c7d1c6d709">self</a>);</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;}</div><div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a59c3a69424e1d3c627ece7aeb5f0bdb3ac032caab7558973327322c284b748bf0"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a59c3a69424e1d3c627ece7aeb5f0bdb3ac032caab7558973327322c284b748bf0">AST_BRIDGE_BUILTIN_AUTOMON</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00098">bridge_features.h:98</a></div></div>
<div class="ttc" id="structast__module__info_html"><div class="ttname"><a href="../../dd/d5f/structast__module__info.html">ast_module_info</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00336">module.h:336</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__module__info_html_a1aff0615d43e1dfa5c72c1c7d1c6d709"><div class="ttname"><a href="../../dd/d5f/structast__module__info.html#a1aff0615d43e1dfa5c72c1c7d1c6d709">ast_module_info::self</a></div><div class="ttdeci">struct ast_module * self</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00342">module.h:342</a></div></div>
<div class="ttc" id="bridge__builtin__features_8c_html_a01aba9ff5202d5f214f88fa0847b25ee"><div class="ttname"><a href="../../d9/d45/bridge__builtin__features_8c.html#a01aba9ff5202d5f214f88fa0847b25ee">feature_hangup</a></div><div class="ttdeci">static int feature_hangup(struct ast_bridge_channel *bridge_channel, void *hook_pvt)</div><div class="ttdoc">Internal built in feature for hangup. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d45/bridge__builtin__features_8c_source.html#l00491">bridge_builtin_features.c:491</a></div></div>
<div class="ttc" id="module_8h_html_a9967b09817639f2e15c3f074a60b6379"><div class="ttname"><a href="../../d5/d16/module_8h.html#a9967b09817639f2e15c3f074a60b6379">ast_module_shutdown_ref</a></div><div class="ttdeci">#define ast_module_shutdown_ref(mod)</div><div class="ttdoc">Prevent unload of the module before shutdown. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00464">module.h:464</a></div></div>
<div class="ttc" id="bridge__features_8h_html_ae364d78e48f19a0d5ceedc6d18cda52d"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#ae364d78e48f19a0d5ceedc6d18cda52d">ast_bridge_features_register</a></div><div class="ttdeci">int ast_bridge_features_register(enum ast_bridge_builtin_feature feature, ast_bridge_hook_callback callback, const char *dtmf)</div><div class="ttdoc">Register a handler for a built in feature. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03123">bridge.c:3123</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a59c3a69424e1d3c627ece7aeb5f0bdb3a96d5e1a5c56634eb48dd78965e5e2ba4"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a59c3a69424e1d3c627ece7aeb5f0bdb3a96d5e1a5c56634eb48dd78965e5e2ba4">AST_BRIDGE_BUILTIN_HANGUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00085">bridge_features.h:85</a></div></div>
<div class="ttc" id="bridge__builtin__features_8c_html_a4f9975616ebf4def0c5af655077e7f19"><div class="ttname"><a href="../../d9/d45/bridge__builtin__features_8c.html#a4f9975616ebf4def0c5af655077e7f19">feature_automixmonitor</a></div><div class="ttdeci">static int feature_automixmonitor(struct ast_bridge_channel *bridge_channel, void *hook_pvt)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d45/bridge__builtin__features_8c_source.html#l00408">bridge_builtin_features.c:408</a></div></div>
<div class="ttc" id="bridge__builtin__features_8c_html_a2851c8bd60bfcec6a9c21628c9f795ea"><div class="ttname"><a href="../../d9/d45/bridge__builtin__features_8c.html#a2851c8bd60bfcec6a9c21628c9f795ea">feature_automonitor</a></div><div class="ttdeci">static int feature_automonitor(struct ast_bridge_channel *bridge_channel, void *hook_pvt)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d45/bridge__builtin__features_8c_source.html#l00220">bridge_builtin_features.c:220</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a59c3a69424e1d3c627ece7aeb5f0bdb3a9075785271a9e2a18bb65c99a6bd7744"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a59c3a69424e1d3c627ece7aeb5f0bdb3a9075785271a9e2a18bb65c99a6bd7744">AST_BRIDGE_BUILTIN_AUTOMIXMON</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00104">bridge_features.h:104</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a37673ab28e3aab412a99889ebc977e13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37673ab28e3aab412a99889ebc977e13">&#9670;&nbsp;</a></span>set_touch_variable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void set_touch_variable </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711b">set_touch_variables_res</a> *&#160;</td>
          <td class="paramname"><em>res</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>var_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>touch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00063">63</a> of file <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html">bridge_builtin_features.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_builtin_getvar_helper()</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00060">SET_TOUCH_ALLOC_FAILURE</a>, and <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00058">SET_TOUCH_SUCCESS</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00081">set_touch_variables()</a>.</p>
<div class="fragment"><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;{</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *c_touch;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;   <span class="keywordflow">if</span> (*res == <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711ba6e35ae560fc674b2a03bea542c1350e7">SET_TOUCH_ALLOC_FAILURE</a>) {</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;   }</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;   c_touch = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, var_name);</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(c_touch)) {</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;      *touch = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(c_touch);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;      <span class="keywordflow">if</span> (!*touch) {</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;         *res = <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711ba6e35ae560fc674b2a03bea542c1350e7">SET_TOUCH_ALLOC_FAILURE</a>;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;         *res = <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711ba2073e3a7574dca4f4a2dbb97f7ed8423">SET_TOUCH_SUCCESS</a>;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      }</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;   }</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;}</div><div class="ttc" id="bridge__builtin__features_8c_html_a6e5445e57fb73ec4bdf501f84dc3711ba6e35ae560fc674b2a03bea542c1350e7"><div class="ttname"><a href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711ba6e35ae560fc674b2a03bea542c1350e7">SET_TOUCH_ALLOC_FAILURE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d45/bridge__builtin__features_8c_source.html#l00060">bridge_builtin_features.c:60</a></div></div>
<div class="ttc" id="bridge__builtin__features_8c_html_a6e5445e57fb73ec4bdf501f84dc3711ba2073e3a7574dca4f4a2dbb97f7ed8423"><div class="ttname"><a href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711ba2073e3a7574dca4f4a2dbb97f7ed8423">SET_TOUCH_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d45/bridge__builtin__features_8c_source.html#l00058">bridge_builtin_features.c:58</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="pbx_8h_html_a98c5425b90ec7c5e136a40f529170b1b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a></div><div class="ttdeci">const char * pbx_builtin_getvar_helper(struct ast_channel *chan, const char *name)</div><div class="ttdoc">Return a pointer to the value of the corresponding channel variable. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_variables.c:1000</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a86d0deeb6631fb3a7c4d62f5bbecae8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86d0deeb6631fb3a7c4d62f5bbecae8a">&#9670;&nbsp;</a></span>set_touch_variables()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711b">set_touch_variables_res</a> set_touch_variables </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>is_mixmonitor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>touch_format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>touch_monitor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>touch_monitor_prefix</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00081">81</a> of file <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html">bridge_builtin_features.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00617">SCOPED_CHANNELLOCK</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00059">SET_TOUCH_UNSET</a>, and <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00063">set_touch_variable()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00323">start_automixmonitor()</a>, and <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00139">start_automonitor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;{</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711b">set_touch_variables_res</a> res = <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711ba7e481fd7e2c86948792c62fc8a416ff8">SET_TOUCH_UNSET</a>;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *var_format;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *var_monitor;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *var_prefix;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#aa11d2e2d6aaa7048d48491842c1de738">SCOPED_CHANNELLOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, chan);</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;   <span class="keywordflow">if</span> (is_mixmonitor) {</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      var_format = <span class="stringliteral">&quot;TOUCH_MIXMONITOR_FORMAT&quot;</span>;</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      var_monitor = <span class="stringliteral">&quot;TOUCH_MIXMONITOR&quot;</span>;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;      var_prefix = <span class="stringliteral">&quot;TOUCH_MIXMONITOR_PREFIX&quot;</span>;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      var_format = <span class="stringliteral">&quot;TOUCH_MONITOR_FORMAT&quot;</span>;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;      var_monitor = <span class="stringliteral">&quot;TOUCH_MONITOR&quot;</span>;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      var_prefix = <span class="stringliteral">&quot;TOUCH_MONITOR_PREFIX&quot;</span>;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;   }</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;   <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a37673ab28e3aab412a99889ebc977e13">set_touch_variable</a>(&amp;res, chan, var_format, touch_format);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;   <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a37673ab28e3aab412a99889ebc977e13">set_touch_variable</a>(&amp;res, chan, var_monitor, touch_monitor);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;   <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a37673ab28e3aab412a99889ebc977e13">set_touch_variable</a>(&amp;res, chan, var_prefix, touch_monitor_prefix);</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;}</div><div class="ttc" id="bridge__builtin__features_8c_html_a37673ab28e3aab412a99889ebc977e13"><div class="ttname"><a href="../../d9/d45/bridge__builtin__features_8c.html#a37673ab28e3aab412a99889ebc977e13">set_touch_variable</a></div><div class="ttdeci">static void set_touch_variable(enum set_touch_variables_res *res, struct ast_channel *chan, const char *var_name, char **touch)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d45/bridge__builtin__features_8c_source.html#l00063">bridge_builtin_features.c:63</a></div></div>
<div class="ttc" id="lock_8h_html_aa11d2e2d6aaa7048d48491842c1de738"><div class="ttname"><a href="../../dd/d42/lock_8h.html#aa11d2e2d6aaa7048d48491842c1de738">SCOPED_CHANNELLOCK</a></div><div class="ttdeci">#define SCOPED_CHANNELLOCK(varname, chan)</div><div class="ttdoc">scoped lock specialization for channels. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00617">lock.h:617</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="bridge__builtin__features_8c_html_a6e5445e57fb73ec4bdf501f84dc3711b"><div class="ttname"><a href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711b">set_touch_variables_res</a></div><div class="ttdeci">set_touch_variables_res</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d45/bridge__builtin__features_8c_source.html#l00057">bridge_builtin_features.c:57</a></div></div>
<div class="ttc" id="bridge__builtin__features_8c_html_a6e5445e57fb73ec4bdf501f84dc3711ba7e481fd7e2c86948792c62fc8a416ff8"><div class="ttname"><a href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711ba7e481fd7e2c86948792c62fc8a416ff8">SET_TOUCH_UNSET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d45/bridge__builtin__features_8c_source.html#l00059">bridge_builtin_features.c:59</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3bf65ff932c85fdccfe3a0194d74ebc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bf65ff932c85fdccfe3a0194d74ebc2">&#9670;&nbsp;</a></span>start_automixmonitor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void start_automixmonitor </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>peer_chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../db/da0/structast__features__general__config.html">ast_features_general_config</a> *&#160;</td>
          <td class="paramname"><em>features_cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>start_message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00323">323</a> of file <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html">bridge_builtin_features.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01404">ast_bridge_channel_queue_playfile()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01398">ast_bridge_channel_write_playfile()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00888">ast_channel_caller()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d7/dd8/mixmonitor_8c_source.html#l00074">ast_start_mixmonitor()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00035">ast_features_general_config::courtesytone</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00421">ast_party_caller::id</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00343">ast_party_id::number</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_builtin_setvar_helper()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00035">ast_features_general_config::recordingfailsound</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00085">S_COR</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00060">SET_TOUCH_ALLOC_FAILURE</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00058">SET_TOUCH_SUCCESS</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00059">SET_TOUCH_UNSET</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00081">set_touch_variables()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00292">ast_party_number::str</a>, and <a class="el" href="../../d5/d7b/channel_8h_source.html#l00298">ast_party_number::valid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00408">feature_automixmonitor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;{</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;   <span class="keywordtype">char</span> *touch_filename;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;   <span class="keywordtype">size_t</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711b">set_touch_variables_res</a> set_touch_res;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, touch_format, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, touch_monitor, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, touch_monitor_prefix, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;   set_touch_res = <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a86d0deeb6631fb3a7c4d62f5bbecae8a">set_touch_variables</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, 1, &amp;touch_format,</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      &amp;touch_monitor, &amp;touch_monitor_prefix);</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;   <span class="keywordflow">switch</span> (set_touch_res) {</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711ba2073e3a7574dca4f4a2dbb97f7ed8423">SET_TOUCH_SUCCESS</a>:</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711ba7e481fd7e2c86948792c62fc8a416ff8">SET_TOUCH_UNSET</a>:</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      set_touch_res = <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a86d0deeb6631fb3a7c4d62f5bbecae8a">set_touch_variables</a>(peer_chan, 1, &amp;touch_format, &amp;touch_monitor,</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;         &amp;touch_monitor_prefix);</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      <span class="keywordflow">if</span> (set_touch_res == <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711ba6e35ae560fc674b2a03bea542c1350e7">SET_TOUCH_ALLOC_FAILURE</a>) {</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      }</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711ba6e35ae560fc674b2a03bea542c1350e7">SET_TOUCH_ALLOC_FAILURE</a>:</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;   }</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(touch_monitor)) {</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;      len = strlen(touch_monitor) + 50;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      touch_filename = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(len);</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      snprintf(touch_filename, len, <span class="stringliteral">&quot;%s-%ld-%s.%s&quot;</span>,</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(touch_monitor_prefix, <span class="stringliteral">&quot;auto&quot;</span>),</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;         (<span class="keywordtype">long</span>) time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>),</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;         touch_monitor,</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(touch_format, <span class="stringliteral">&quot;wav&quot;</span>));</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <span class="keywordtype">char</span> *caller_chan_id;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      <span class="keywordtype">char</span> *peer_chan_id;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      caller_chan_id = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>,</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)));</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      peer_chan_id = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(peer_chan)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.valid,</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(peer_chan)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.str, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(peer_chan)));</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      len = strlen(caller_chan_id) + strlen(peer_chan_id) + 50;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      touch_filename = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(len);</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      snprintf(touch_filename, len, <span class="stringliteral">&quot;%s-%ld-%s-%s.%s&quot;</span>,</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(touch_monitor_prefix, <span class="stringliteral">&quot;auto&quot;</span>),</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;         (<span class="keywordtype">long</span>) time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>),</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;         caller_chan_id,</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;         peer_chan_id,</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(touch_format, <span class="stringliteral">&quot;wav&quot;</span>));</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;   }</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; strlen(touch_filename); x++) {</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      <span class="keywordflow">if</span> (touch_filename[x] == <span class="charliteral">&#39;/&#39;</span>) {</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;         touch_filename[x] = <span class="charliteral">&#39;-&#39;</span>;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      }</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;   }</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;AutoMixMonitor used to record call. Filename: %s\n&quot;</span>, touch_filename);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d40/mixmonitor_8h.html#aa149ed49d6cff18515821855abd9fc17">ast_start_mixmonitor</a>(peer_chan, touch_filename, <span class="stringliteral">&quot;b&quot;</span>)) {</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;AutoMixMonitor feature was tried by &#39;%s&#39; but MixMonitor failed to start.\n&quot;</span>,</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      <span class="keywordflow">if</span> (features_cfg &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(features_cfg-&gt;<a class="code" href="../../db/da0/structast__features__general__config.html#a66689cc46ff40bcc6e1240cf6db9d2fd">recordingfailsound</a>)) {</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;         <a class="code" href="../../de/d41/bridge__channel_8h.html#ac352fd6d6188d7431155f34ae2a38799">ast_bridge_channel_queue_playfile</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, features_cfg-&gt;<a class="code" href="../../db/da0/structast__features__general__config.html#a66689cc46ff40bcc6e1240cf6db9d2fd">recordingfailsound</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      }</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;   }</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;   <span class="keywordflow">if</span> (features_cfg &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(features_cfg-&gt;<a class="code" href="../../db/da0/structast__features__general__config.html#ad208812969821245417dc865a8c1b691">courtesytone</a>)) {</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#ac352fd6d6188d7431155f34ae2a38799">ast_bridge_channel_queue_playfile</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, features_cfg-&gt;<a class="code" href="../../db/da0/structast__features__general__config.html#ad208812969821245417dc865a8c1b691">courtesytone</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#ad30f159c66c054fd95a739c087a6c5e9">ast_bridge_channel_write_playfile</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, features_cfg-&gt;<a class="code" href="../../db/da0/structast__features__general__config.html#ad208812969821245417dc865a8c1b691">courtesytone</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;   }</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(start_message)) {</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#ac352fd6d6188d7431155f34ae2a38799">ast_bridge_channel_queue_playfile</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, start_message, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#ad30f159c66c054fd95a739c087a6c5e9">ast_bridge_channel_write_playfile</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, start_message, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;   }</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="stringliteral">&quot;TOUCH_MIXMONITOR_OUTPUT&quot;</span>, touch_filename);</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(peer_chan, <span class="stringliteral">&quot;TOUCH_MIXMONITOR_OUTPUT&quot;</span>, touch_filename);</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;}</div><div class="ttc" id="channel_8h_html_ac2dc872b606534943c98304aed841b34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a></div><div class="ttdeci">struct ast_party_caller * ast_channel_caller(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00888">channel_internal_api.c:888</a></div></div>
<div class="ttc" id="structast__party__number_html_ab50d783982593ef993ea0b68f7ad8b80"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">ast_party_number::str</a></div><div class="ttdeci">char * str</div><div class="ttdoc">Subscriber phone number (Malloced) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00292">channel.h:292</a></div></div>
<div class="ttc" id="bridge__builtin__features_8c_html_a6e5445e57fb73ec4bdf501f84dc3711ba6e35ae560fc674b2a03bea542c1350e7"><div class="ttname"><a href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711ba6e35ae560fc674b2a03bea542c1350e7">SET_TOUCH_ALLOC_FAILURE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d45/bridge__builtin__features_8c_source.html#l00060">bridge_builtin_features.c:60</a></div></div>
<div class="ttc" id="bridge__builtin__features_8c_html_a6e5445e57fb73ec4bdf501f84dc3711ba2073e3a7574dca4f4a2dbb97f7ed8423"><div class="ttname"><a href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711ba2073e3a7574dca4f4a2dbb97f7ed8423">SET_TOUCH_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d45/bridge__builtin__features_8c_source.html#l00058">bridge_builtin_features.c:58</a></div></div>
<div class="ttc" id="mixmonitor_8h_html_aa149ed49d6cff18515821855abd9fc17"><div class="ttname"><a href="../../d9/d40/mixmonitor_8h.html#aa149ed49d6cff18515821855abd9fc17">ast_start_mixmonitor</a></div><div class="ttdeci">int ast_start_mixmonitor(struct ast_channel *chan, const char *filename, const char *options)</div><div class="ttdoc">Start a mixmonitor on a channel with the given parameters. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd8/mixmonitor_8c_source.html#l00074">mixmonitor.c:74</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__features__general__config_html_ad208812969821245417dc865a8c1b691"><div class="ttname"><a href="../../db/da0/structast__features__general__config.html#ad208812969821245417dc865a8c1b691">ast_features_general_config::courtesytone</a></div><div class="ttdeci">const ast_string_field courtesytone</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00035">include/asterisk/features_config.h:35</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="structast__party__caller_html_a8791d240f8a9c2dc271a1c8542cfe8cc"><div class="ttname"><a href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">ast_party_caller::id</a></div><div class="ttdeci">struct ast_party_id id</div><div class="ttdoc">Caller party ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00421">channel.h:421</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="strings_8h_html_a38a896048b2ca84076864505f0aa8f01"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a></div><div class="ttdeci">#define S_COR(a, b, c)</div><div class="ttdoc">returns the equivalent of logic or for strings, with an additional boolean check: second one if not e...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00085">strings.h:85</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ad30f159c66c054fd95a739c087a6c5e9"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ad30f159c66c054fd95a739c087a6c5e9">ast_bridge_channel_write_playfile</a></div><div class="ttdeci">int ast_bridge_channel_write_playfile(struct ast_bridge_channel *bridge_channel, ast_bridge_custom_play_fn custom_play, const char *playfile, const char *moh_class)</div><div class="ttdoc">Write a bridge action play file frame into the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01398">bridge_channel.c:1398</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="bridge__builtin__features_8c_html_a6e5445e57fb73ec4bdf501f84dc3711b"><div class="ttname"><a href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711b">set_touch_variables_res</a></div><div class="ttdeci">set_touch_variables_res</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d45/bridge__builtin__features_8c_source.html#l00057">bridge_builtin_features.c:57</a></div></div>
<div class="ttc" id="bridge__builtin__features_8c_html_a86d0deeb6631fb3a7c4d62f5bbecae8a"><div class="ttname"><a href="../../d9/d45/bridge__builtin__features_8c.html#a86d0deeb6631fb3a7c4d62f5bbecae8a">set_touch_variables</a></div><div class="ttdeci">static enum set_touch_variables_res set_touch_variables(struct ast_channel *chan, int is_mixmonitor, char **touch_format, char **touch_monitor, char **touch_monitor_prefix)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d45/bridge__builtin__features_8c_source.html#l00081">bridge_builtin_features.c:81</a></div></div>
<div class="ttc" id="structast__features__general__config_html_a66689cc46ff40bcc6e1240cf6db9d2fd"><div class="ttname"><a href="../../db/da0/structast__features__general__config.html#a66689cc46ff40bcc6e1240cf6db9d2fd">ast_features_general_config::recordingfailsound</a></div><div class="ttdeci">const ast_string_field recordingfailsound</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00035">include/asterisk/features_config.h:35</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="bridge__channel_8h_html_ac352fd6d6188d7431155f34ae2a38799"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ac352fd6d6188d7431155f34ae2a38799">ast_bridge_channel_queue_playfile</a></div><div class="ttdeci">int ast_bridge_channel_queue_playfile(struct ast_bridge_channel *bridge_channel, ast_bridge_custom_play_fn custom_play, const char *playfile, const char *moh_class)</div><div class="ttdoc">Queue a bridge action play file frame onto the bridge channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01404">bridge_channel.c:1404</a></div></div>
<div class="ttc" id="bridge__builtin__features_8c_html_a6e5445e57fb73ec4bdf501f84dc3711ba7e481fd7e2c86948792c62fc8a416ff8"><div class="ttname"><a href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711ba7e481fd7e2c86948792c62fc8a416ff8">SET_TOUCH_UNSET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d45/bridge__builtin__features_8c_source.html#l00059">bridge_builtin_features.c:59</a></div></div>
<div class="ttc" id="structast__party__number_html_aaa04218f9e3a9065afa8be2491da8904"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">ast_party_number::valid</a></div><div class="ttdeci">unsigned char valid</div><div class="ttdoc">TRUE if the number information is valid/present. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00298">channel.h:298</a></div></div>
<div class="ttc" id="structast__party__id_html_aca2d7de6c89f201dc8bd0a2642d2a352"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">ast_party_id::number</a></div><div class="ttdeci">struct ast_party_number number</div><div class="ttdoc">Subscriber phone number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00343">channel.h:343</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9c15c0bd39a35b178f7ddfb7ff84acfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c15c0bd39a35b178f7ddfb7ff84acfd">&#9670;&nbsp;</a></span>start_automonitor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void start_automonitor </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>peer_chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../db/da0/structast__features__general__config.html">ast_features_general_config</a> *&#160;</td>
          <td class="paramname"><em>features_cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>start_message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00139">139</a> of file <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html">bridge_builtin_features.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01404">ast_bridge_channel_queue_playfile()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01398">ast_bridge_channel_write_playfile()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00888">ast_channel_caller()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00926">ast_monitor_setjoinfiles()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00305">ast_monitor_start()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00035">ast_features_general_config::courtesytone</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00421">ast_party_caller::id</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00343">ast_party_id::number</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_builtin_setvar_helper()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00085">S_COR</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00060">SET_TOUCH_ALLOC_FAILURE</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00058">SET_TOUCH_SUCCESS</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00059">SET_TOUCH_UNSET</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00081">set_touch_variables()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00292">ast_party_number::str</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00298">ast_party_number::valid</a>, <a class="el" href="../../d5/d60/monitor_8h_source.html#l00030">X_REC_IN</a>, and <a class="el" href="../../d5/d60/monitor_8h_source.html#l00031">X_REC_OUT</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00220">feature_automonitor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;{</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;   <span class="keywordtype">char</span> *touch_filename;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;   <span class="keywordtype">size_t</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711b">set_touch_variables_res</a> set_touch_res;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, touch_format, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, touch_monitor, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, touch_monitor_prefix, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;   set_touch_res = <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a86d0deeb6631fb3a7c4d62f5bbecae8a">set_touch_variables</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, 0, &amp;touch_format,</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      &amp;touch_monitor, &amp;touch_monitor_prefix);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;   <span class="keywordflow">switch</span> (set_touch_res) {</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711ba2073e3a7574dca4f4a2dbb97f7ed8423">SET_TOUCH_SUCCESS</a>:</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711ba7e481fd7e2c86948792c62fc8a416ff8">SET_TOUCH_UNSET</a>:</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      set_touch_res = <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a86d0deeb6631fb3a7c4d62f5bbecae8a">set_touch_variables</a>(peer_chan, 0, &amp;touch_format, &amp;touch_monitor,</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;         &amp;touch_monitor_prefix);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      <span class="keywordflow">if</span> (set_touch_res == <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711ba6e35ae560fc674b2a03bea542c1350e7">SET_TOUCH_ALLOC_FAILURE</a>) {</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      }</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711ba6e35ae560fc674b2a03bea542c1350e7">SET_TOUCH_ALLOC_FAILURE</a>:</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;   }</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(touch_monitor)) {</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;      len = strlen(touch_monitor) + 50;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      touch_filename = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(len);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      snprintf(touch_filename, len, <span class="stringliteral">&quot;%s-%ld-%s&quot;</span>,</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(touch_monitor_prefix, <span class="stringliteral">&quot;auto&quot;</span>),</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;         (<span class="keywordtype">long</span>) time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>),</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;         touch_monitor);</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      <span class="keywordtype">char</span> *caller_chan_id;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      <span class="keywordtype">char</span> *peer_chan_id;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;      caller_chan_id = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>,</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)));</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      peer_chan_id = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(peer_chan)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.valid,</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(peer_chan)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.str, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(peer_chan)));</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      len = strlen(caller_chan_id) + strlen(peer_chan_id) + 50;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      touch_filename = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(len);</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      snprintf(touch_filename, len, <span class="stringliteral">&quot;%s-%ld-%s-%s&quot;</span>,</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(touch_monitor_prefix, <span class="stringliteral">&quot;auto&quot;</span>),</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;         (<span class="keywordtype">long</span>) time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>),</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;         caller_chan_id,</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;         peer_chan_id);</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;   }</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; strlen(touch_filename); x++) {</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <span class="keywordflow">if</span> (touch_filename[x] == <span class="charliteral">&#39;/&#39;</span>) {</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;         touch_filename[x] = <span class="charliteral">&#39;-&#39;</span>;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      }</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;   }</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;AutoMonitor used to record call. Filename: %s\n&quot;</span>, touch_filename);</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d2/d1b/res__monitor_8c.html#acbcd8e50de0a8867d7a843c2b6915e0d">ast_monitor_start</a>(peer_chan, touch_format, touch_filename, 1, <a class="code" href="../../d5/d60/monitor_8h.html#a95b90f61870300ea984afae5123dd44f">X_REC_IN</a> | <a class="code" href="../../d5/d60/monitor_8h.html#ac03869f26afacb6d45355d401ced19d8">X_REC_OUT</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;AutoMonitor feature was tried by &#39;%s&#39; but monitor failed to start.\n&quot;</span>,</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;   }</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;   <a class="code" href="../../d2/d1b/res__monitor_8c.html#a24009cd78ef05c71b550254624eb6c13">ast_monitor_setjoinfiles</a>(peer_chan, 1);</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;   <span class="keywordflow">if</span> (features_cfg &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(features_cfg-&gt;<a class="code" href="../../db/da0/structast__features__general__config.html#ad208812969821245417dc865a8c1b691">courtesytone</a>)) {</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#ac352fd6d6188d7431155f34ae2a38799">ast_bridge_channel_queue_playfile</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, features_cfg-&gt;<a class="code" href="../../db/da0/structast__features__general__config.html#ad208812969821245417dc865a8c1b691">courtesytone</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#ad30f159c66c054fd95a739c087a6c5e9">ast_bridge_channel_write_playfile</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, features_cfg-&gt;<a class="code" href="../../db/da0/structast__features__general__config.html#ad208812969821245417dc865a8c1b691">courtesytone</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;   }</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(start_message)) {</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#ac352fd6d6188d7431155f34ae2a38799">ast_bridge_channel_queue_playfile</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, start_message, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#ad30f159c66c054fd95a739c087a6c5e9">ast_bridge_channel_write_playfile</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, start_message, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;   }</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="stringliteral">&quot;TOUCH_MONITOR_OUTPUT&quot;</span>, touch_filename);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(peer_chan, <span class="stringliteral">&quot;TOUCH_MONITOR_OUTPUT&quot;</span>, touch_filename);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;}</div><div class="ttc" id="channel_8h_html_ac2dc872b606534943c98304aed841b34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a></div><div class="ttdeci">struct ast_party_caller * ast_channel_caller(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00888">channel_internal_api.c:888</a></div></div>
<div class="ttc" id="monitor_8h_html_a95b90f61870300ea984afae5123dd44f"><div class="ttname"><a href="../../d5/d60/monitor_8h.html#a95b90f61870300ea984afae5123dd44f">X_REC_IN</a></div><div class="ttdeci">#define X_REC_IN</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/monitor_8h_source.html#l00030">monitor.h:30</a></div></div>
<div class="ttc" id="structast__party__number_html_ab50d783982593ef993ea0b68f7ad8b80"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">ast_party_number::str</a></div><div class="ttdeci">char * str</div><div class="ttdoc">Subscriber phone number (Malloced) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00292">channel.h:292</a></div></div>
<div class="ttc" id="bridge__builtin__features_8c_html_a6e5445e57fb73ec4bdf501f84dc3711ba6e35ae560fc674b2a03bea542c1350e7"><div class="ttname"><a href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711ba6e35ae560fc674b2a03bea542c1350e7">SET_TOUCH_ALLOC_FAILURE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d45/bridge__builtin__features_8c_source.html#l00060">bridge_builtin_features.c:60</a></div></div>
<div class="ttc" id="bridge__builtin__features_8c_html_a6e5445e57fb73ec4bdf501f84dc3711ba2073e3a7574dca4f4a2dbb97f7ed8423"><div class="ttname"><a href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711ba2073e3a7574dca4f4a2dbb97f7ed8423">SET_TOUCH_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d45/bridge__builtin__features_8c_source.html#l00058">bridge_builtin_features.c:58</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="monitor_8h_html_ac03869f26afacb6d45355d401ced19d8"><div class="ttname"><a href="../../d5/d60/monitor_8h.html#ac03869f26afacb6d45355d401ced19d8">X_REC_OUT</a></div><div class="ttdeci">#define X_REC_OUT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/monitor_8h_source.html#l00031">monitor.h:31</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__features__general__config_html_ad208812969821245417dc865a8c1b691"><div class="ttname"><a href="../../db/da0/structast__features__general__config.html#ad208812969821245417dc865a8c1b691">ast_features_general_config::courtesytone</a></div><div class="ttdeci">const ast_string_field courtesytone</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00035">include/asterisk/features_config.h:35</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="structast__party__caller_html_a8791d240f8a9c2dc271a1c8542cfe8cc"><div class="ttname"><a href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">ast_party_caller::id</a></div><div class="ttdeci">struct ast_party_id id</div><div class="ttdoc">Caller party ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00421">channel.h:421</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="res__monitor_8c_html_acbcd8e50de0a8867d7a843c2b6915e0d"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#acbcd8e50de0a8867d7a843c2b6915e0d">ast_monitor_start</a></div><div class="ttdeci">int AST_OPTIONAL_API_NAME() ast_monitor_start(struct ast_channel *chan, const char *format_spec, const char *fname_base, int need_lock, int stream_action, const char *beep_id)</div><div class="ttdoc">Start monitoring a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00305">res_monitor.c:305</a></div></div>
<div class="ttc" id="strings_8h_html_a38a896048b2ca84076864505f0aa8f01"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a></div><div class="ttdeci">#define S_COR(a, b, c)</div><div class="ttdoc">returns the equivalent of logic or for strings, with an additional boolean check: second one if not e...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00085">strings.h:85</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ad30f159c66c054fd95a739c087a6c5e9"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ad30f159c66c054fd95a739c087a6c5e9">ast_bridge_channel_write_playfile</a></div><div class="ttdeci">int ast_bridge_channel_write_playfile(struct ast_bridge_channel *bridge_channel, ast_bridge_custom_play_fn custom_play, const char *playfile, const char *moh_class)</div><div class="ttdoc">Write a bridge action play file frame into the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01398">bridge_channel.c:1398</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="bridge__builtin__features_8c_html_a6e5445e57fb73ec4bdf501f84dc3711b"><div class="ttname"><a href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711b">set_touch_variables_res</a></div><div class="ttdeci">set_touch_variables_res</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d45/bridge__builtin__features_8c_source.html#l00057">bridge_builtin_features.c:57</a></div></div>
<div class="ttc" id="bridge__builtin__features_8c_html_a86d0deeb6631fb3a7c4d62f5bbecae8a"><div class="ttname"><a href="../../d9/d45/bridge__builtin__features_8c.html#a86d0deeb6631fb3a7c4d62f5bbecae8a">set_touch_variables</a></div><div class="ttdeci">static enum set_touch_variables_res set_touch_variables(struct ast_channel *chan, int is_mixmonitor, char **touch_format, char **touch_monitor, char **touch_monitor_prefix)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d45/bridge__builtin__features_8c_source.html#l00081">bridge_builtin_features.c:81</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="res__monitor_8c_html_a24009cd78ef05c71b550254624eb6c13"><div class="ttname"><a href="../../d2/d1b/res__monitor_8c.html#a24009cd78ef05c71b550254624eb6c13">ast_monitor_setjoinfiles</a></div><div class="ttdeci">void AST_OPTIONAL_API_NAME() ast_monitor_setjoinfiles(struct ast_channel *chan, int turnon)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d1b/res__monitor_8c_source.html#l00926">res_monitor.c:926</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="bridge__channel_8h_html_ac352fd6d6188d7431155f34ae2a38799"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ac352fd6d6188d7431155f34ae2a38799">ast_bridge_channel_queue_playfile</a></div><div class="ttdeci">int ast_bridge_channel_queue_playfile(struct ast_bridge_channel *bridge_channel, ast_bridge_custom_play_fn custom_play, const char *playfile, const char *moh_class)</div><div class="ttdoc">Queue a bridge action play file frame onto the bridge channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01404">bridge_channel.c:1404</a></div></div>
<div class="ttc" id="bridge__builtin__features_8c_html_a6e5445e57fb73ec4bdf501f84dc3711ba7e481fd7e2c86948792c62fc8a416ff8"><div class="ttname"><a href="../../d9/d45/bridge__builtin__features_8c.html#a6e5445e57fb73ec4bdf501f84dc3711ba7e481fd7e2c86948792c62fc8a416ff8">SET_TOUCH_UNSET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d45/bridge__builtin__features_8c_source.html#l00059">bridge_builtin_features.c:59</a></div></div>
<div class="ttc" id="structast__party__number_html_aaa04218f9e3a9065afa8be2491da8904"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">ast_party_number::valid</a></div><div class="ttdeci">unsigned char valid</div><div class="ttdoc">TRUE if the number information is valid/present. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00298">channel.h:298</a></div></div>
<div class="ttc" id="structast__party__id_html_aca2d7de6c89f201dc8bd0a2642d2a352"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">ast_party_id::number</a></div><div class="ttdeci">struct ast_party_number number</div><div class="ttdoc">Subscriber phone number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00343">channel.h:343</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8aed48fa319acfecc595c03370161592"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8aed48fa319acfecc595c03370161592">&#9670;&nbsp;</a></span>stop_automixmonitor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void stop_automixmonitor </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>peer_chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../db/da0/structast__features__general__config.html">ast_features_general_config</a> *&#160;</td>
          <td class="paramname"><em>features_cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>stop_message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00300">300</a> of file <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html">bridge_builtin_features.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01404">ast_bridge_channel_queue_playfile()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01398">ast_bridge_channel_write_playfile()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d7/dd8/mixmonitor_8c_source.html#l00086">ast_stop_mixmonitor()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00035">ast_features_general_config::courtesytone</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00035">ast_features_general_config::recordingfailsound</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00408">feature_automixmonitor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;{</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;AutoMixMonitor used to stop recording call.\n&quot;</span>);</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d40/mixmonitor_8h.html#a3c311ce3da3d7eb7bc90737a17a2132b">ast_stop_mixmonitor</a>(peer_chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;Failed to stop AutoMixMonitor for %s.\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <span class="keywordflow">if</span> (features_cfg &amp;&amp; !(<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(features_cfg-&gt;<a class="code" href="../../db/da0/structast__features__general__config.html#a66689cc46ff40bcc6e1240cf6db9d2fd">recordingfailsound</a>))) {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;         <a class="code" href="../../de/d41/bridge__channel_8h.html#ac352fd6d6188d7431155f34ae2a38799">ast_bridge_channel_queue_playfile</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, features_cfg-&gt;<a class="code" href="../../db/da0/structast__features__general__config.html#a66689cc46ff40bcc6e1240cf6db9d2fd">recordingfailsound</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      }</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;   }</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;   <span class="keywordflow">if</span> (features_cfg &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(features_cfg-&gt;<a class="code" href="../../db/da0/structast__features__general__config.html#ad208812969821245417dc865a8c1b691">courtesytone</a>)) {</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#ac352fd6d6188d7431155f34ae2a38799">ast_bridge_channel_queue_playfile</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, features_cfg-&gt;<a class="code" href="../../db/da0/structast__features__general__config.html#ad208812969821245417dc865a8c1b691">courtesytone</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#ad30f159c66c054fd95a739c087a6c5e9">ast_bridge_channel_write_playfile</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, features_cfg-&gt;<a class="code" href="../../db/da0/structast__features__general__config.html#ad208812969821245417dc865a8c1b691">courtesytone</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;   }</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(stop_message)) {</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#ac352fd6d6188d7431155f34ae2a38799">ast_bridge_channel_queue_playfile</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, stop_message, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#ad30f159c66c054fd95a739c087a6c5e9">ast_bridge_channel_write_playfile</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, stop_message, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   }</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__features__general__config_html_ad208812969821245417dc865a8c1b691"><div class="ttname"><a href="../../db/da0/structast__features__general__config.html#ad208812969821245417dc865a8c1b691">ast_features_general_config::courtesytone</a></div><div class="ttdeci">const ast_string_field courtesytone</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00035">include/asterisk/features_config.h:35</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ad30f159c66c054fd95a739c087a6c5e9"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ad30f159c66c054fd95a739c087a6c5e9">ast_bridge_channel_write_playfile</a></div><div class="ttdeci">int ast_bridge_channel_write_playfile(struct ast_bridge_channel *bridge_channel, ast_bridge_custom_play_fn custom_play, const char *playfile, const char *moh_class)</div><div class="ttdoc">Write a bridge action play file frame into the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01398">bridge_channel.c:1398</a></div></div>
<div class="ttc" id="mixmonitor_8h_html_a3c311ce3da3d7eb7bc90737a17a2132b"><div class="ttname"><a href="../../d9/d40/mixmonitor_8h.html#a3c311ce3da3d7eb7bc90737a17a2132b">ast_stop_mixmonitor</a></div><div class="ttdeci">int ast_stop_mixmonitor(struct ast_channel *chan, const char *mixmon_id)</div><div class="ttdoc">Stop a mixmonitor on a channel with the given parameters. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dd8/mixmonitor_8c_source.html#l00086">mixmonitor.c:86</a></div></div>
<div class="ttc" id="structast__features__general__config_html_a66689cc46ff40bcc6e1240cf6db9d2fd"><div class="ttname"><a href="../../db/da0/structast__features__general__config.html#a66689cc46ff40bcc6e1240cf6db9d2fd">ast_features_general_config::recordingfailsound</a></div><div class="ttdeci">const ast_string_field recordingfailsound</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00035">include/asterisk/features_config.h:35</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="bridge__channel_8h_html_ac352fd6d6188d7431155f34ae2a38799"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ac352fd6d6188d7431155f34ae2a38799">ast_bridge_channel_queue_playfile</a></div><div class="ttdeci">int ast_bridge_channel_queue_playfile(struct ast_bridge_channel *bridge_channel, ast_bridge_custom_play_fn custom_play, const char *playfile, const char *moh_class)</div><div class="ttdoc">Queue a bridge action play file frame onto the bridge channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01404">bridge_channel.c:1404</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0074d3c04d3dbf8bbe6f3f7c31715288"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0074d3c04d3dbf8bbe6f3f7c31715288">&#9670;&nbsp;</a></span>stop_automonitor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void stop_automonitor </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>peer_chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../db/da0/structast__features__general__config.html">ast_features_general_config</a> *&#160;</td>
          <td class="paramname"><em>features_cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>stop_message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00106">106</a> of file <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html">bridge_builtin_features.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01404">ast_bridge_channel_queue_playfile()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01398">ast_bridge_channel_write_playfile()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00613">ast_channel_monitor()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00035">ast_features_general_config::courtesytone</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00035">ast_features_general_config::recordingfailsound</a>, and <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01096">stop</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00220">feature_automonitor()</a>.</p>
<div class="fragment"><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;{</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;AutoMonitor used to stop recording call.\n&quot;</span>);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(peer_chan);</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(peer_chan)) {</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(peer_chan)-&gt;<a class="code" href="../../df/d44/app__meetme_8c.html#a111277a0849f92b793ed6aa1efe54462">stop</a>(peer_chan, 1)) {</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;Cannot stop AutoMonitor for %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;         <span class="keywordflow">if</span> (features_cfg &amp;&amp; !(<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(features_cfg-&gt;<a class="code" href="../../db/da0/structast__features__general__config.html#a66689cc46ff40bcc6e1240cf6db9d2fd">recordingfailsound</a>))) {</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            <a class="code" href="../../de/d41/bridge__channel_8h.html#ac352fd6d6188d7431155f34ae2a38799">ast_bridge_channel_queue_playfile</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, features_cfg-&gt;<a class="code" href="../../db/da0/structast__features__general__config.html#a66689cc46ff40bcc6e1240cf6db9d2fd">recordingfailsound</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;         }</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(peer_chan);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      }</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;      <span class="comment">/* Something else removed the Monitor before we got to it. */</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(peer_chan);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;   }</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(peer_chan);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;   <span class="keywordflow">if</span> (features_cfg &amp;&amp; !(<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(features_cfg-&gt;<a class="code" href="../../db/da0/structast__features__general__config.html#ad208812969821245417dc865a8c1b691">courtesytone</a>))) {</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#ac352fd6d6188d7431155f34ae2a38799">ast_bridge_channel_queue_playfile</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, features_cfg-&gt;<a class="code" href="../../db/da0/structast__features__general__config.html#ad208812969821245417dc865a8c1b691">courtesytone</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#ad30f159c66c054fd95a739c087a6c5e9">ast_bridge_channel_write_playfile</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, features_cfg-&gt;<a class="code" href="../../db/da0/structast__features__general__config.html#ad208812969821245417dc865a8c1b691">courtesytone</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;   }</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(stop_message)) {</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#ac352fd6d6188d7431155f34ae2a38799">ast_bridge_channel_queue_playfile</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, stop_message, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#ad30f159c66c054fd95a739c087a6c5e9">ast_bridge_channel_write_playfile</a>(bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, stop_message, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;   }</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a111277a0849f92b793ed6aa1efe54462"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a111277a0849f92b793ed6aa1efe54462">stop</a></div><div class="ttdeci">unsigned int stop</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01096">app_meetme.c:1096</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__features__general__config_html_ad208812969821245417dc865a8c1b691"><div class="ttname"><a href="../../db/da0/structast__features__general__config.html#ad208812969821245417dc865a8c1b691">ast_features_general_config::courtesytone</a></div><div class="ttdeci">const ast_string_field courtesytone</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00035">include/asterisk/features_config.h:35</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ad30f159c66c054fd95a739c087a6c5e9"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ad30f159c66c054fd95a739c087a6c5e9">ast_bridge_channel_write_playfile</a></div><div class="ttdeci">int ast_bridge_channel_write_playfile(struct ast_bridge_channel *bridge_channel, ast_bridge_custom_play_fn custom_play, const char *playfile, const char *moh_class)</div><div class="ttdoc">Write a bridge action play file frame into the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01398">bridge_channel.c:1398</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="structast__features__general__config_html_a66689cc46ff40bcc6e1240cf6db9d2fd"><div class="ttname"><a href="../../db/da0/structast__features__general__config.html#a66689cc46ff40bcc6e1240cf6db9d2fd">ast_features_general_config::recordingfailsound</a></div><div class="ttdeci">const ast_string_field recordingfailsound</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00035">include/asterisk/features_config.h:35</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="bridge__channel_8h_html_ac352fd6d6188d7431155f34ae2a38799"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ac352fd6d6188d7431155f34ae2a38799">ast_bridge_channel_queue_playfile</a></div><div class="ttdeci">int ast_bridge_channel_queue_playfile(struct ast_bridge_channel *bridge_channel, ast_bridge_custom_play_fn custom_play, const char *playfile, const char *moh_class)</div><div class="ttdoc">Queue a bridge action play file frame onto the bridge channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01404">bridge_channel.c:1404</a></div></div>
<div class="ttc" id="channel_8h_html_abdebed775647544929616b09a8487817"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a></div><div class="ttdeci">struct ast_channel_monitor * ast_channel_monitor(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00613">channel_internal_api.c:613</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00503">503</a> of file <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html">bridge_builtin_features.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00104">AST_BRIDGE_BUILTIN_AUTOMIXMON</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00098">AST_BRIDGE_BUILTIN_AUTOMON</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00085">AST_BRIDGE_BUILTIN_HANGUP</a>, and <a class="el" href="../../d0/d95/bridge_8c_source.html#l03139">ast_bridge_features_unregister()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00512">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;{</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;   <a class="code" href="../../dc/d7a/bridge__features_8h.html#a395272994b2af7bd55f871b02d2d42e4">ast_bridge_features_unregister</a>(<a class="code" href="../../dc/d7a/bridge__features_8h.html#a59c3a69424e1d3c627ece7aeb5f0bdb3a96d5e1a5c56634eb48dd78965e5e2ba4">AST_BRIDGE_BUILTIN_HANGUP</a>);</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;   <a class="code" href="../../dc/d7a/bridge__features_8h.html#a395272994b2af7bd55f871b02d2d42e4">ast_bridge_features_unregister</a>(<a class="code" href="../../dc/d7a/bridge__features_8h.html#a59c3a69424e1d3c627ece7aeb5f0bdb3ac032caab7558973327322c284b748bf0">AST_BRIDGE_BUILTIN_AUTOMON</a>);</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;   <a class="code" href="../../dc/d7a/bridge__features_8h.html#a395272994b2af7bd55f871b02d2d42e4">ast_bridge_features_unregister</a>(<a class="code" href="../../dc/d7a/bridge__features_8h.html#a59c3a69424e1d3c627ece7aeb5f0bdb3a9075785271a9e2a18bb65c99a6bd7744">AST_BRIDGE_BUILTIN_AUTOMIXMON</a>);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;}</div><div class="ttc" id="bridge__features_8h_html_a59c3a69424e1d3c627ece7aeb5f0bdb3ac032caab7558973327322c284b748bf0"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a59c3a69424e1d3c627ece7aeb5f0bdb3ac032caab7558973327322c284b748bf0">AST_BRIDGE_BUILTIN_AUTOMON</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00098">bridge_features.h:98</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a395272994b2af7bd55f871b02d2d42e4"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a395272994b2af7bd55f871b02d2d42e4">ast_bridge_features_unregister</a></div><div class="ttdeci">int ast_bridge_features_unregister(enum ast_bridge_builtin_feature feature)</div><div class="ttdoc">Unregister a handler for a built in feature. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03139">bridge.c:3139</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a59c3a69424e1d3c627ece7aeb5f0bdb3a96d5e1a5c56634eb48dd78965e5e2ba4"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a59c3a69424e1d3c627ece7aeb5f0bdb3a96d5e1a5c56634eb48dd78965e5e2ba4">AST_BRIDGE_BUILTIN_HANGUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00085">bridge_features.h:85</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a59c3a69424e1d3c627ece7aeb5f0bdb3a9075785271a9e2a18bb65c99a6bd7744"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a59c3a69424e1d3c627ece7aeb5f0bdb3a9075785271a9e2a18bb65c99a6bd7744">AST_BRIDGE_BUILTIN_AUTOMIXMON</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00104">bridge_features.h:104</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a54af2a9b29d140908cc9dffd0618951b">AST_MODFLAG_DEFAULT</a> , .description = &quot;Built <a class="el" href="../../da/d7c/utils_2frame_8h.html#aca392a8d3941cd0740aef3ad92545d67">in</a> bridging features&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_CORE, .load = load_module, .unload = unload_module, .optional_modules = &quot;res_monitor&quot;, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00529">529</a> of file <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html">bridge_builtin_features.c</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00529">529</a> of file <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html">bridge_builtin_features.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:44:53 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
