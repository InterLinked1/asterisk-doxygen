<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: dns_resolver.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="../../dir_6d4b1cdb59e2db6ad82005b337288fef.html">asterisk</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">dns_resolver.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>DNS Resolver API.  
<a href="#details">More...</a></p>
<div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d34/dns__resolver_8h__dep__incl.png" border="0" usemap="#dns__resolver_8hdep" alt=""/></div>
<map name="dns__resolver_8hdep" id="dns__resolver_8hdep">
<area shape="rect" id="node2" href="../../dc/d00/dns__core_8c.html" title="Core DNS Functionality. " alt="" coords="5,80,96,107"/>
<area shape="rect" id="node3" href="../../d5/da5/dns__query__set_8c.html" title="DNS Query Set API. " alt="" coords="121,80,247,107"/>
<area shape="rect" id="node4" href="../../df/d3a/dns__system__resolver_8c.html" title="The default DNS resolver for Asterisk. " alt="" coords="271,80,438,107"/>
<area shape="rect" id="node5" href="../../d0/d5c/res__resolver__unbound_8c.html" title="res_resolver_unbound.c" alt="" coords="462,80,637,107"/>
<area shape="rect" id="node6" href="../../da/d14/test__dns_8c.html" title="test_dns.c" alt="" coords="661,80,749,107"/>
<area shape="rect" id="node7" href="../../d4/db3/test__dns__naptr_8c.html" title="test_dns_naptr.c" alt="" coords="773,80,901,107"/>
<area shape="rect" id="node8" href="../../d3/d10/test__dns__query__set_8c.html" title="test_dns_query_set.c" alt="" coords="926,80,1085,107"/>
<area shape="rect" id="node9" href="../../d5/d36/test__dns__recurring_8c.html" title="test_dns_recurring.c" alt="" coords="1109,80,1261,107"/>
<area shape="rect" id="node10" href="../../da/d22/test__dns__srv_8c.html" title="test_dns_srv.c" alt="" coords="1286,80,1399,107"/>
</map>
</div>
</div>
<p><a href="../../d9/da7/dns__resolver_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6f/structast__dns__resolver.html">ast_dns_resolver</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">DNS resolver implementation.  <a href="../../de/d6f/structast__dns__resolver.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae88ff57fdf06ba45b931609978be2611"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da7/dns__resolver_8h.html#ae88ff57fdf06ba45b931609978be2611">ast_dns_resolver_add_record</a> (struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *query, int rr_type, int rr_class, int ttl, const char *data, const size_t size)</td></tr>
<tr class="memdesc:ae88ff57fdf06ba45b931609978be2611"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a DNS record to the result of a DNS query.  <a href="#ae88ff57fdf06ba45b931609978be2611">More...</a><br /></td></tr>
<tr class="separator:ae88ff57fdf06ba45b931609978be2611"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3eae81285310e1c64e8cb9e59e79d2e9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da7/dns__resolver_8h.html#a3eae81285310e1c64e8cb9e59e79d2e9">ast_dns_resolver_completed</a> (struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *query)</td></tr>
<tr class="memdesc:a3eae81285310e1c64e8cb9e59e79d2e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark a DNS query as having been completed.  <a href="#a3eae81285310e1c64e8cb9e59e79d2e9">More...</a><br /></td></tr>
<tr class="separator:a3eae81285310e1c64e8cb9e59e79d2e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf3d87b8ca10deacf438c70e030f9f8e"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da7/dns__resolver_8h.html#aaf3d87b8ca10deacf438c70e030f9f8e">ast_dns_resolver_get_data</a> (const struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *query)</td></tr>
<tr class="memdesc:aaf3d87b8ca10deacf438c70e030f9f8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve resolver specific data.  <a href="#aaf3d87b8ca10deacf438c70e030f9f8e">More...</a><br /></td></tr>
<tr class="separator:aaf3d87b8ca10deacf438c70e030f9f8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cf990e0d32f790b61b1cdffc6f005a2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da7/dns__resolver_8h.html#a7cf990e0d32f790b61b1cdffc6f005a2">ast_dns_resolver_register</a> (struct <a class="el" href="../../de/d6f/structast__dns__resolver.html">ast_dns_resolver</a> *resolver)</td></tr>
<tr class="memdesc:a7cf990e0d32f790b61b1cdffc6f005a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a DNS resolver.  <a href="#a7cf990e0d32f790b61b1cdffc6f005a2">More...</a><br /></td></tr>
<tr class="separator:a7cf990e0d32f790b61b1cdffc6f005a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a017e82027ca36bc66b610de1bc75c926"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da7/dns__resolver_8h.html#a017e82027ca36bc66b610de1bc75c926">ast_dns_resolver_set_data</a> (struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *query, void *data)</td></tr>
<tr class="memdesc:a017e82027ca36bc66b610de1bc75c926"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set resolver specific data on a query.  <a href="#a017e82027ca36bc66b610de1bc75c926">More...</a><br /></td></tr>
<tr class="separator:a017e82027ca36bc66b610de1bc75c926"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a321df8f3250551f796c99524dbcc2567"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da7/dns__resolver_8h.html#a321df8f3250551f796c99524dbcc2567">ast_dns_resolver_set_result</a> (struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *query, unsigned int secure, unsigned int bogus, unsigned int rcode, const char *canonical, const char *<a class="el" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a>, size_t answer_size)</td></tr>
<tr class="memdesc:a321df8f3250551f796c99524dbcc2567"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set result information for a DNS query.  <a href="#a321df8f3250551f796c99524dbcc2567">More...</a><br /></td></tr>
<tr class="separator:a321df8f3250551f796c99524dbcc2567"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef7d827099f07e77891ab28255079399"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/da7/dns__resolver_8h.html#aef7d827099f07e77891ab28255079399">ast_dns_resolver_unregister</a> (struct <a class="el" href="../../de/d6f/structast__dns__resolver.html">ast_dns_resolver</a> *resolver)</td></tr>
<tr class="memdesc:aef7d827099f07e77891ab28255079399"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister a DNS resolver.  <a href="#aef7d827099f07e77891ab28255079399">More...</a><br /></td></tr>
<tr class="separator:aef7d827099f07e77891ab28255079399"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>DNS Resolver API. </p>
<dl class="section author"><dt>Author</dt><dd>Joshua Colp <a href="#" onclick="location.href='mai'+'lto:'+'jco'+'lp'+'@di'+'gi'+'um.'+'co'+'m'; return false;">jcolp<span style="display: none;">.nosp@m.</span>@dig<span style="display: none;">.nosp@m.</span>ium.c<span style="display: none;">.nosp@m.</span>om</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../d9/da7/dns__resolver_8h_source.html">dns_resolver.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ae88ff57fdf06ba45b931609978be2611"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae88ff57fdf06ba45b931609978be2611">&#9670;&nbsp;</a></span>ast_dns_resolver_add_record()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_dns_resolver_add_record </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *&#160;</td>
          <td class="paramname"><em>query</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rr_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rr_class</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ttl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a DNS record to the result of a DNS query. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">query</td><td>The DNS query </td></tr>
    <tr><td class="paramname">rr_type</td><td>Resource record type </td></tr>
    <tr><td class="paramname">rr_class</td><td>Resource record class </td></tr>
    <tr><td class="paramname">ttl</td><td>TTL of the record </td></tr>
    <tr><td class="paramname">data</td><td>The raw DNS record </td></tr>
    <tr><td class="paramname">size</td><td>The size of the raw DNS record</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">-1</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00535">535</a> of file <a class="el" href="../../dc/d00/dns__core_8c_source.html">dns_core.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00524">allocate_dns_record()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00730">AST_LIST_INSERT_TAIL</a>, <a class="el" href="../../d4/d07/dns__internal_8h_source.html#l00047">ast_dns_record::data_len</a>, <a class="el" href="../../d4/d07/dns__internal_8h_source.html#l00058">ast_dns_record::data_ptr</a>, <a class="el" href="../../d3/db7/structast__dns__record.html#afdb663a535e9da7df1d270a5e96a3001">ast_dns_record::list</a>, <a class="el" href="../../d5/d8d/structast__dns__result.html#a85249bc4c3b2ab860d0dd551444a3ed4">ast_dns_result::records</a>, <a class="el" href="../../d4/d07/dns__internal_8h_source.html#l00147">ast_dns_query::result</a>, <a class="el" href="../../d4/d07/dns__internal_8h_source.html#l00043">ast_dns_record::rr_class</a>, <a class="el" href="../../d4/d07/dns__internal_8h_source.html#l00041">ast_dns_record::rr_type</a>, and <a class="el" href="../../d4/d07/dns__internal_8h_source.html#l00045">ast_dns_record::ttl</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d14/test__dns_8c_source.html#l00421">AST_TEST_DEFINE()</a>, <a class="el" href="../../df/d3a/dns__system__resolver_8c_source.html#l00084">dns_system_resolver_add_record()</a>, <a class="el" href="../../d4/db3/test__dns__naptr_8c_source.html#l00110">naptr_thread()</a>, <a class="el" href="../../da/d14/test__dns_8c_source.html#l00670">resolution_thread()</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00081">srv_thread()</a>, and <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00256">unbound_resolver_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;{</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db7/structast__dns__record.html">ast_dns_record</a> *record;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/db7/structast__dns__record.html#ac0d0e7420a9c7f7247c0f3068225df09">rr_type</a> &lt; 0) {</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Query &#39;%p&#39;: Could not add record, invalid resource record type &#39;%d&#39;\n&quot;</span>,</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;         query, <a class="code" href="../../d3/db7/structast__dns__record.html#ac0d0e7420a9c7f7247c0f3068225df09">rr_type</a>);</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d3/db7/structast__dns__record.html#ac0d0e7420a9c7f7247c0f3068225df09">rr_type</a> &gt; 65536) {</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Query &#39;%p&#39;: Could not add record, resource record type &#39;%d&#39; exceeds maximum\n&quot;</span>,</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;         query, <a class="code" href="../../d3/db7/structast__dns__record.html#ac0d0e7420a9c7f7247c0f3068225df09">rr_type</a>);</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d3/db7/structast__dns__record.html#abfde4c5353bcaf8fb444b116ef5cc8df">rr_class</a> &lt; 0) {</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Query &#39;%p&#39;: Could not add record, invalid resource record class &#39;%d&#39;\n&quot;</span>,</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;         query, <a class="code" href="../../d3/db7/structast__dns__record.html#abfde4c5353bcaf8fb444b116ef5cc8df">rr_class</a>);</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d3/db7/structast__dns__record.html#abfde4c5353bcaf8fb444b116ef5cc8df">rr_class</a> &gt; 65536) {</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Query &#39;%p&#39;: Could not add record, resource record class &#39;%d&#39; exceeds maximum\n&quot;</span>,</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;         query, <a class="code" href="../../d3/db7/structast__dns__record.html#abfde4c5353bcaf8fb444b116ef5cc8df">rr_class</a>);</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d3/db7/structast__dns__record.html#a869bf8a50756e5adbdb1cf05a99c0a45">ttl</a> &lt; 0) {</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Query &#39;%p&#39;: Could not add record, invalid TTL &#39;%d&#39;\n&quot;</span>,</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;         query, <a class="code" href="../../d3/db7/structast__dns__record.html#a869bf8a50756e5adbdb1cf05a99c0a45">ttl</a>);</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d3/db7/structast__dns__record.html#a9a3b4be1b9151b0369d7fca9911c7ecd">data</a> || !size) {</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Query &#39;%p&#39;: Could not add record, no data specified\n&quot;</span>,</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;         query);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!query-&gt;<a class="code" href="../../dd/daa/structast__dns__query.html#a739d372feb17d2aa4aefab56762623e4">result</a>) {</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Query &#39;%p&#39;: No result was set on the query, thus records can not be added\n&quot;</span>,</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;         query);</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;   }</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;   record = <a class="code" href="../../dc/d00/dns__core_8c.html#a4d4f8e24ed56c3c2534692f0dc921688">allocate_dns_record</a>(<a class="code" href="../../d3/db7/structast__dns__record.html#ac0d0e7420a9c7f7247c0f3068225df09">rr_type</a>, query, <a class="code" href="../../d3/db7/structast__dns__record.html#a9a3b4be1b9151b0369d7fca9911c7ecd">data</a>, size);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;   <span class="keywordflow">if</span> (!record) {</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;   }</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;   record-&gt;<a class="code" href="../../d3/db7/structast__dns__record.html#ac0d0e7420a9c7f7247c0f3068225df09">rr_type</a> = <a class="code" href="../../d3/db7/structast__dns__record.html#ac0d0e7420a9c7f7247c0f3068225df09">rr_type</a>;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;   record-&gt;<a class="code" href="../../d3/db7/structast__dns__record.html#abfde4c5353bcaf8fb444b116ef5cc8df">rr_class</a> = <a class="code" href="../../d3/db7/structast__dns__record.html#abfde4c5353bcaf8fb444b116ef5cc8df">rr_class</a>;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;   record-&gt;<a class="code" href="../../d3/db7/structast__dns__record.html#a869bf8a50756e5adbdb1cf05a99c0a45">ttl</a> = <a class="code" href="../../d3/db7/structast__dns__record.html#a869bf8a50756e5adbdb1cf05a99c0a45">ttl</a>;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;   record-&gt;<a class="code" href="../../d3/db7/structast__dns__record.html#ace1c2e33b74df8973a7d9a19c935af80">data_len</a> = size;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;   memcpy(record-&gt;<a class="code" href="../../d3/db7/structast__dns__record.html#ae7533305b03c676bd7047f6d2c3aa7b2">data_ptr</a>, <a class="code" href="../../d3/db7/structast__dns__record.html#a9a3b4be1b9151b0369d7fca9911c7ecd">data</a>, size);</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;query-&gt;<a class="code" href="../../dd/daa/structast__dns__query.html#a739d372feb17d2aa4aefab56762623e4">result</a>-&gt;<a class="code" href="../../d5/d8d/structast__dns__result.html#a85249bc4c3b2ab860d0dd551444a3ed4">records</a>, record, <a class="code" href="../../d3/db7/structast__dns__record.html#afdb663a535e9da7df1d270a5e96a3001">list</a>);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;}</div><div class="ttc" id="structast__dns__record_html_ae7533305b03c676bd7047f6d2c3aa7b2"><div class="ttname"><a href="../../d3/db7/structast__dns__record.html#ae7533305b03c676bd7047f6d2c3aa7b2">ast_dns_record::data_ptr</a></div><div class="ttdeci">char * data_ptr</div><div class="ttdoc">pointer to record-specific data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00058">dns_internal.h:58</a></div></div>
<div class="ttc" id="structast__dns__record_html"><div class="ttname"><a href="../../d3/db7/structast__dns__record.html">ast_dns_record</a></div><div class="ttdoc">For AST_LIST. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00039">dns_internal.h:39</a></div></div>
<div class="ttc" id="structast__dns__record_html_afdb663a535e9da7df1d270a5e96a3001"><div class="ttname"><a href="../../d3/db7/structast__dns__record.html#afdb663a535e9da7df1d270a5e96a3001">ast_dns_record::list</a></div><div class="ttdeci">struct ast_dns_record::@253 list</div><div class="ttdoc">Linked list information. </div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="dns__core_8c_html_a4d4f8e24ed56c3c2534692f0dc921688"><div class="ttname"><a href="../../dc/d00/dns__core_8c.html#a4d4f8e24ed56c3c2534692f0dc921688">allocate_dns_record</a></div><div class="ttdeci">static struct ast_dns_record * allocate_dns_record(unsigned int rr_type, struct ast_dns_query *query, const char *data, const size_t size)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00524">dns_core.c:524</a></div></div>
<div class="ttc" id="structast__dns__record_html_a9a3b4be1b9151b0369d7fca9911c7ecd"><div class="ttname"><a href="../../d3/db7/structast__dns__record.html#a9a3b4be1b9151b0369d7fca9911c7ecd">ast_dns_record::data</a></div><div class="ttdeci">char data[0]</div><div class="ttdoc">The raw DNS record. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00060">dns_internal.h:60</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4d258b4525e63c435d7de579d3f46960"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_LIST_INSERT_TAIL(head, elm, field)</div><div class="ttdoc">Appends a list entry to the tail of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00730">linkedlists.h:730</a></div></div>
<div class="ttc" id="structast__dns__record_html_ace1c2e33b74df8973a7d9a19c935af80"><div class="ttname"><a href="../../d3/db7/structast__dns__record.html#ace1c2e33b74df8973a7d9a19c935af80">ast_dns_record::data_len</a></div><div class="ttdeci">size_t data_len</div><div class="ttdoc">The size of the raw DNS record. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00047">dns_internal.h:47</a></div></div>
<div class="ttc" id="structast__dns__query_html_a739d372feb17d2aa4aefab56762623e4"><div class="ttname"><a href="../../dd/daa/structast__dns__query.html#a739d372feb17d2aa4aefab56762623e4">ast_dns_query::result</a></div><div class="ttdeci">struct ast_dns_result * result</div><div class="ttdoc">Result of the DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00147">dns_internal.h:147</a></div></div>
<div class="ttc" id="structast__dns__record_html_a869bf8a50756e5adbdb1cf05a99c0a45"><div class="ttname"><a href="../../d3/db7/structast__dns__record.html#a869bf8a50756e5adbdb1cf05a99c0a45">ast_dns_record::ttl</a></div><div class="ttdeci">int ttl</div><div class="ttdoc">Time-to-live of the record. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00045">dns_internal.h:45</a></div></div>
<div class="ttc" id="structast__dns__result_html_a85249bc4c3b2ab860d0dd551444a3ed4"><div class="ttname"><a href="../../d5/d8d/structast__dns__result.html#a85249bc4c3b2ab860d0dd551444a3ed4">ast_dns_result::records</a></div><div class="ttdeci">struct ast_dns_result::dns_records records</div></div>
<div class="ttc" id="structast__dns__record_html_ac0d0e7420a9c7f7247c0f3068225df09"><div class="ttname"><a href="../../d3/db7/structast__dns__record.html#ac0d0e7420a9c7f7247c0f3068225df09">ast_dns_record::rr_type</a></div><div class="ttdeci">int rr_type</div><div class="ttdoc">Resource record type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00041">dns_internal.h:41</a></div></div>
<div class="ttc" id="structast__dns__record_html_abfde4c5353bcaf8fb444b116ef5cc8df"><div class="ttname"><a href="../../d3/db7/structast__dns__record.html#abfde4c5353bcaf8fb444b116ef5cc8df">ast_dns_record::rr_class</a></div><div class="ttdeci">int rr_class</div><div class="ttdoc">Resource record class. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00043">dns_internal.h:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3eae81285310e1c64e8cb9e59e79d2e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3eae81285310e1c64e8cb9e59e79d2e9">&#9670;&nbsp;</a></span>ast_dns_resolver_completed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_dns_resolver_completed </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *&#160;</td>
          <td class="paramname"><em>query</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mark a DNS query as having been completed. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">query</td><td>The DNS query </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00599">599</a> of file <a class="el" href="../../dc/d00/dns__core_8c_source.html">dns_core.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00062">ast_dns_query_get_rr_type()</a>, <a class="el" href="../../d4/d07/dns__internal_8h_source.html#l00139">ast_dns_query::callback</a>, <a class="el" href="../../d4/d07/dns__internal_8h_source.html#l00147">ast_dns_query::result</a>, and <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00592">sort_result()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/dns__system__resolver_8c_source.html#l00140">dns_system_resolver_process_query()</a>, <a class="el" href="../../d4/db3/test__dns__naptr_8c_source.html#l00110">naptr_thread()</a>, <a class="el" href="../../da/d14/test__dns_8c_source.html#l00670">resolution_thread()</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00081">srv_thread()</a>, and <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00256">unbound_resolver_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;{</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;   <a class="code" href="../../dc/d00/dns__core_8c.html#ae5abbc73e6703be2da200f5cb445b5a0">sort_result</a>(<a class="code" href="../../dc/d00/dns__core_8c.html#a049ce2f7e998d2635a005c51ab8c7fc7">ast_dns_query_get_rr_type</a>(query), query-&gt;<a class="code" href="../../dd/daa/structast__dns__query.html#a739d372feb17d2aa4aefab56762623e4">result</a>);</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;   query-&gt;<a class="code" href="../../dd/daa/structast__dns__query.html#a4bd02e416911ded4d9bd5c018f45dcce">callback</a>(query);</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;}</div><div class="ttc" id="structast__dns__query_html_a739d372feb17d2aa4aefab56762623e4"><div class="ttname"><a href="../../dd/daa/structast__dns__query.html#a739d372feb17d2aa4aefab56762623e4">ast_dns_query::result</a></div><div class="ttdeci">struct ast_dns_result * result</div><div class="ttdoc">Result of the DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00147">dns_internal.h:147</a></div></div>
<div class="ttc" id="structast__dns__query_html_a4bd02e416911ded4d9bd5c018f45dcce"><div class="ttname"><a href="../../dd/daa/structast__dns__query.html#a4bd02e416911ded4d9bd5c018f45dcce">ast_dns_query::callback</a></div><div class="ttdeci">ast_dns_resolve_callback callback</div><div class="ttdoc">Callback to invoke upon completion. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00139">dns_internal.h:139</a></div></div>
<div class="ttc" id="dns__core_8c_html_a049ce2f7e998d2635a005c51ab8c7fc7"><div class="ttname"><a href="../../dc/d00/dns__core_8c.html#a049ce2f7e998d2635a005c51ab8c7fc7">ast_dns_query_get_rr_type</a></div><div class="ttdeci">int ast_dns_query_get_rr_type(const struct ast_dns_query *query)</div><div class="ttdoc">Get the record resource type of a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00062">dns_core.c:62</a></div></div>
<div class="ttc" id="dns__core_8c_html_ae5abbc73e6703be2da200f5cb445b5a0"><div class="ttname"><a href="../../dc/d00/dns__core_8c.html#ae5abbc73e6703be2da200f5cb445b5a0">sort_result</a></div><div class="ttdeci">static void sort_result(int rr_type, struct ast_dns_result *result)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00592">dns_core.c:592</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaf3d87b8ca10deacf438c70e030f9f8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf3d87b8ca10deacf438c70e030f9f8e">&#9670;&nbsp;</a></span>ast_dns_resolver_get_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* ast_dns_resolver_get_data </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *&#160;</td>
          <td class="paramname"><em>query</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve resolver specific data. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">query</td><td>The DNS query</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the resolver specific data</dd></dl>
<dl class="section note"><dt>Note</dt><dd>The reference count of the resolver data is NOT incremented on return </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00451">451</a> of file <a class="el" href="../../dc/d00/dns__core_8c_source.html">dns_core.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d07/dns__internal_8h_source.html#l00145">ast_dns_query::resolver_data</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d14/test__dns_8c_source.html#l00189">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00316">unbound_resolver_cancel()</a>.</p>
<div class="fragment"><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;{</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;   <span class="keywordflow">return</span> query-&gt;<a class="code" href="../../dd/daa/structast__dns__query.html#a3d23214857478ba05a0b6e9903197c80">resolver_data</a>;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;}</div><div class="ttc" id="structast__dns__query_html_a3d23214857478ba05a0b6e9903197c80"><div class="ttname"><a href="../../dd/daa/structast__dns__query.html#a3d23214857478ba05a0b6e9903197c80">ast_dns_query::resolver_data</a></div><div class="ttdeci">void * resolver_data</div><div class="ttdoc">Resolver-specific data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00145">dns_internal.h:145</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7cf990e0d32f790b61b1cdffc6f005a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cf990e0d32f790b61b1cdffc6f005a2">&#9670;&nbsp;</a></span>ast_dns_resolver_register()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_dns_resolver_register </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d6f/structast__dns__resolver.html">ast_dns_resolver</a> *&#160;</td>
          <td class="paramname"><em>resolver</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a DNS resolver. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">resolver</td><td>A DNS resolver implementation</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">-1</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00630">630</a> of file <a class="el" href="../../dc/d00/dns__core_8c_source.html">dns_core.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00609">AST_RWLIST_INSERT_BEFORE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00740">AST_RWLIST_INSERT_TAIL</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00544">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00616">AST_RWLIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d9/da7/dns__resolver_8h_source.html#l00048">ast_dns_resolver::cancel</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d9/da7/dns__resolver_8h_source.html#l00034">ast_dns_resolver::name</a>, <a class="el" href="../../d9/da7/dns__resolver_8h_source.html#l00037">ast_dns_resolver::priority</a>, and <a class="el" href="../../d9/da7/dns__resolver_8h_source.html#l00045">ast_dns_resolver::resolve</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/d3a/dns__system__resolver_8c_source.html#l00243">ast_dns_system_resolver_init()</a>, <a class="el" href="../../da/d14/test__dns_8c_source.html#l00047">AST_TEST_DEFINE()</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00452">invalid_record_test()</a>, <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l01423">load_module()</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00125">nominal_test()</a>, <a class="el" href="../../d4/db3/test__dns__naptr_8c_source.html#l00275">off_nominal_test()</a>, and <a class="el" href="../../d3/d10/test__dns__query__set_8c_source.html#l00181">query_set_test()</a>.</p>
<div class="fragment"><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;{</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d6f/structast__dns__resolver.html">ast_dns_resolver</a> *iter;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;   <span class="keywordtype">int</span> inserted = 0;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;   <span class="keywordflow">if</span> (!resolver) {</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(resolver-&gt;<a class="code" href="../../de/d6f/structast__dns__resolver.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)) {</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Registration of DNS resolver failed as it does not have a name\n&quot;</span>);</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!resolver-&gt;<a class="code" href="../../de/d6f/structast__dns__resolver.html#ac550dfbe6159e3ff9f6169b68f8e25cf">resolve</a>) {</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;DNS resolver &#39;%s&#39; does not implement the resolve callback which is required\n&quot;</span>,</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;         resolver-&gt;<a class="code" href="../../de/d6f/structast__dns__resolver.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!resolver-&gt;<a class="code" href="../../de/d6f/structast__dns__resolver.html#a48a73dd75dc393a508239e8150a0b538">cancel</a>) {</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;DNS resolver &#39;%s&#39; does not implement the cancel callback which is required\n&quot;</span>,</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;         resolver-&gt;<a class="code" href="../../de/d6f/structast__dns__resolver.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;   }</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../dd/da1/structresolvers.html">resolvers</a>);</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../dd/da1/structresolvers.html">resolvers</a>, iter, next) {</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      <span class="keywordflow">if</span> (!strcmp(iter-&gt;<a class="code" href="../../de/d6f/structast__dns__resolver.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, resolver-&gt;<a class="code" href="../../de/d6f/structast__dns__resolver.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)) {</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;A DNS resolver with the name &#39;%s&#39; is already registered\n&quot;</span>, resolver-&gt;<a class="code" href="../../de/d6f/structast__dns__resolver.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../dd/da1/structresolvers.html">resolvers</a>);</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;      }</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;   }</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../dd/da1/structresolvers.html">resolvers</a>, iter, next) {</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      <span class="keywordflow">if</span> (iter-&gt;<a class="code" href="../../de/d6f/structast__dns__resolver.html#a1e440af9e86f7a3c2784c3e2bd687d25">priority</a> &gt; resolver-&gt;<a class="code" href="../../de/d6f/structast__dns__resolver.html#a1e440af9e86f7a3c2784c3e2bd687d25">priority</a>) {</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#acf8253a64f9a4e2170454f4bf0559e33">AST_RWLIST_INSERT_BEFORE_CURRENT</a>(resolver, next);</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;         inserted = 1;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;      }</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;   }</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;   <span class="keywordflow">if</span> (!inserted) {</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../dd/da1/structresolvers.html">resolvers</a>, resolver, next);</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;   }</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../dd/da1/structresolvers.html">resolvers</a>);</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;Registered DNS resolver &#39;%s&#39; with priority &#39;%d&#39;\n&quot;</span>, resolver-&gt;<a class="code" href="../../de/d6f/structast__dns__resolver.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, resolver-&gt;<a class="code" href="../../de/d6f/structast__dns__resolver.html#a1e440af9e86f7a3c2784c3e2bd687d25">priority</a>);</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structast__dns__resolver_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../de/d6f/structast__dns__resolver.html#a8f8f80d37794cde9472343e4487ba3eb">ast_dns_resolver::name</a></div><div class="ttdeci">const char * name</div><div class="ttdoc">The name of the resolver implementation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da7/dns__resolver_8h_source.html#l00034">dns_resolver.h:34</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="linkedlists_8h_html_acf8253a64f9a4e2170454f4bf0559e33"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#acf8253a64f9a4e2170454f4bf0559e33">AST_RWLIST_INSERT_BEFORE_CURRENT</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_BEFORE_CURRENT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00609">linkedlists.h:609</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a21be6da4b2146b04b4868c2be5cae750"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00544">linkedlists.h:544</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structast__dns__resolver_html_ac550dfbe6159e3ff9f6169b68f8e25cf"><div class="ttname"><a href="../../de/d6f/structast__dns__resolver.html#ac550dfbe6159e3ff9f6169b68f8e25cf">ast_dns_resolver::resolve</a></div><div class="ttdeci">int(* resolve)(struct ast_dns_query *query)</div><div class="ttdoc">Perform resolution of a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da7/dns__resolver_8h_source.html#l00045">dns_resolver.h:45</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structast__dns__resolver_html"><div class="ttname"><a href="../../de/d6f/structast__dns__resolver.html">ast_dns_resolver</a></div><div class="ttdoc">DNS resolver implementation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da7/dns__resolver_8h_source.html#l00032">dns_resolver.h:32</a></div></div>
<div class="ttc" id="structast__dns__resolver_html_a1e440af9e86f7a3c2784c3e2bd687d25"><div class="ttname"><a href="../../de/d6f/structast__dns__resolver.html#a1e440af9e86f7a3c2784c3e2bd687d25">ast_dns_resolver::priority</a></div><div class="ttdeci">unsigned int priority</div><div class="ttdoc">Priority for this resolver if multiple exist, lower being higher priority. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da7/dns__resolver_8h_source.html#l00037">dns_resolver.h:37</a></div></div>
<div class="ttc" id="structresolvers_html"><div class="ttname"><a href="../../dd/da1/structresolvers.html">resolvers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00048">dns_core.c:48</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadda916488b2d151af4426e2f06ad332"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_TAIL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00740">linkedlists.h:740</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6bf0e81cb6ef01532ddebaba68f6de28"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_END</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00616">linkedlists.h:616</a></div></div>
<div class="ttc" id="structast__dns__resolver_html_a48a73dd75dc393a508239e8150a0b538"><div class="ttname"><a href="../../de/d6f/structast__dns__resolver.html#a48a73dd75dc393a508239e8150a0b538">ast_dns_resolver::cancel</a></div><div class="ttdeci">int(* cancel)(struct ast_dns_query *query)</div><div class="ttdoc">Cancel resolution of a DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da7/dns__resolver_8h_source.html#l00048">dns_resolver.h:48</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a017e82027ca36bc66b610de1bc75c926"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a017e82027ca36bc66b610de1bc75c926">&#9670;&nbsp;</a></span>ast_dns_resolver_set_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_dns_resolver_set_data </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *&#160;</td>
          <td class="paramname"><em>query</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set resolver specific data on a query. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">query</td><td>The DNS query </td></tr>
    <tr><td class="paramname">data</td><td>The resolver specific data</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The resolver data MUST be an ao2 object</dd>
<dd>
This function increments the reference count of the resolver data, it does NOT steal</dd>
<dd>
Once resolver specific data has been set it can not be changed</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">-1</td><td>failure, resolver data is already set </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00440">440</a> of file <a class="el" href="../../dc/d00/dns__core_8c_source.html">dns_core.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, and <a class="el" href="../../d4/d07/dns__internal_8h_source.html#l00145">ast_dns_query::resolver_data</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d14/test__dns_8c_source.html#l00189">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00285">unbound_resolver_resolve()</a>.</p>
<div class="fragment"><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;{</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;   <span class="keywordflow">if</span> (query-&gt;<a class="code" href="../../dd/daa/structast__dns__query.html#a3d23214857478ba05a0b6e9903197c80">resolver_data</a>) {</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;   }</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;   query-&gt;<a class="code" href="../../dd/daa/structast__dns__query.html#a3d23214857478ba05a0b6e9903197c80">resolver_data</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(data);</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="structast__dns__query_html_a3d23214857478ba05a0b6e9903197c80"><div class="ttname"><a href="../../dd/daa/structast__dns__query.html#a3d23214857478ba05a0b6e9903197c80">ast_dns_query::resolver_data</a></div><div class="ttdeci">void * resolver_data</div><div class="ttdoc">Resolver-specific data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00145">dns_internal.h:145</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a321df8f3250551f796c99524dbcc2567"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a321df8f3250551f796c99524dbcc2567">&#9670;&nbsp;</a></span>ast_dns_resolver_set_result()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_dns_resolver_set_result </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/daa/structast__dns__query.html">ast_dns_query</a> *&#160;</td>
          <td class="paramname"><em>query</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>secure</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>bogus</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>rcode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>canonical</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>answer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>answer_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set result information for a DNS query. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">query</td><td>The DNS query </td></tr>
    <tr><td class="paramname">result</td><td>Whether the result is secured or not </td></tr>
    <tr><td class="paramname">bogus</td><td>Whether the result is bogus or not </td></tr>
    <tr><td class="paramname">rcode</td><td>Optional response code </td></tr>
    <tr><td class="paramname">canonical</td><td>The canonical name </td></tr>
    <tr><td class="paramname">answer</td><td>The raw DNS answer </td></tr>
    <tr><td class="paramname">answer_size</td><td>The size of the raw DNS answer</td></tr>
  </table>
  </dd>
</dl>
<p>Zero-sized and NULL answers are permitted by this function. This may be necessary if the query fails at an early stage and no actual DNS response has been received from a DNS server.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">-1</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00456">456</a> of file <a class="el" href="../../dc/d00/dns__core_8c_source.html">dns_core.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d07/dns__internal_8h_source.html#l00129">ast_dns_result::answer</a>, <a class="el" href="../../d4/d07/dns__internal_8h_source.html#l00131">ast_dns_result::answer_size</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00130">ast_dns_result_free()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d07/dns__internal_8h_source.html#l00121">ast_dns_result::bogus</a>, <a class="el" href="../../d4/d07/dns__internal_8h_source.html#l00133">ast_dns_result::buf</a>, <a class="el" href="../../d4/d07/dns__internal_8h_source.html#l00127">ast_dns_result::canonical</a>, <a class="el" href="../../d4/d07/dns__internal_8h_source.html#l00123">ast_dns_result::rcode</a>, <a class="el" href="../../d4/d07/dns__internal_8h_source.html#l00147">ast_dns_query::result</a>, and <a class="el" href="../../d4/d07/dns__internal_8h_source.html#l00119">ast_dns_result::secure</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d14/test__dns_8c_source.html#l00297">AST_TEST_DEFINE()</a>, <a class="el" href="../../df/d3a/dns__system__resolver_8c_source.html#l00210">dns_system_resolver_set_response()</a>, <a class="el" href="../../d4/db3/test__dns__naptr_8c_source.html#l00110">naptr_thread()</a>, <a class="el" href="../../da/d14/test__dns_8c_source.html#l00670">resolution_thread()</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00081">srv_thread()</a>, and <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00256">unbound_resolver_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;{</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;   <span class="keywordtype">char</span> *buf_ptr;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;   <span class="keywordflow">if</span> (secure &amp;&amp; bogus) {</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Query &#39;%p&#39;: Could not set result information, it can not be both secure and bogus\n&quot;</span>,</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;         query);</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;   }</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(canonical)) {</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Query &#39;%p&#39;: Could not set result information since no canonical name was provided\n&quot;</span>,</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;         query);</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;   }</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a>) {</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a> = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      answer_size = 0;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Query &#39;%p&#39;: Assuming zero-sized answer on NULL input\n&quot;</span>, query);</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;   }</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;   <a class="code" href="../../dc/d00/dns__core_8c.html#a9d8517652042a392b47003f26c9baeb5">ast_dns_result_free</a>(query-&gt;<a class="code" href="../../dd/daa/structast__dns__query.html#a739d372feb17d2aa4aefab56762623e4">result</a>);</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;   query-&gt;<a class="code" href="../../dd/daa/structast__dns__query.html#a739d372feb17d2aa4aefab56762623e4">result</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*query-&gt;<a class="code" href="../../dd/daa/structast__dns__query.html#a739d372feb17d2aa4aefab56762623e4">result</a>) + strlen(canonical) + 1 + answer_size);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;   <span class="keywordflow">if</span> (!query-&gt;<a class="code" href="../../dd/daa/structast__dns__query.html#a739d372feb17d2aa4aefab56762623e4">result</a>) {</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;   }</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;   query-&gt;<a class="code" href="../../dd/daa/structast__dns__query.html#a739d372feb17d2aa4aefab56762623e4">result</a>-&gt;<a class="code" href="../../d5/d8d/structast__dns__result.html#abba77e678a34722d786f3faa53262f75">secure</a> = secure;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;   query-&gt;<a class="code" href="../../dd/daa/structast__dns__query.html#a739d372feb17d2aa4aefab56762623e4">result</a>-&gt;<a class="code" href="../../d5/d8d/structast__dns__result.html#a9daf07459ff1c029a1a79ed17f96cc69">bogus</a> = bogus;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;   query-&gt;<a class="code" href="../../dd/daa/structast__dns__query.html#a739d372feb17d2aa4aefab56762623e4">result</a>-&gt;<a class="code" href="../../d5/d8d/structast__dns__result.html#ae5dc230a4eda6efe08aa6844505a3664">rcode</a> = rcode;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;   buf_ptr = query-&gt;<a class="code" href="../../dd/daa/structast__dns__query.html#a739d372feb17d2aa4aefab56762623e4">result</a>-&gt;<a class="code" href="../../d5/d8d/structast__dns__result.html#a103a957b017f6b717767bba130a02694">buf</a>;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   strcpy(buf_ptr, canonical); <span class="comment">/* SAFE */</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;   query-&gt;<a class="code" href="../../dd/daa/structast__dns__query.html#a739d372feb17d2aa4aefab56762623e4">result</a>-&gt;<a class="code" href="../../d5/d8d/structast__dns__result.html#a6022a9b552fa30c527144ad1eb97ef36">canonical</a> = buf_ptr;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;   buf_ptr += strlen(canonical) + 1;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;   memcpy(buf_ptr, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a>, answer_size); <span class="comment">/* SAFE */</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;   query-&gt;<a class="code" href="../../dd/daa/structast__dns__query.html#a739d372feb17d2aa4aefab56762623e4">result</a>-&gt;<a class="code" href="../../d5/d8d/structast__dns__result.html#acf478081be3b257185e81c8a92235209">answer</a> = buf_ptr;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;   query-&gt;<a class="code" href="../../dd/daa/structast__dns__query.html#a739d372feb17d2aa4aefab56762623e4">result</a>-&gt;<a class="code" href="../../d5/d8d/structast__dns__result.html#a60e7f19e0a67dbea7e21c74f1a225fef">answer_size</a> = answer_size;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;}</div><div class="ttc" id="structast__dns__result_html_ae5dc230a4eda6efe08aa6844505a3664"><div class="ttname"><a href="../../d5/d8d/structast__dns__result.html#ae5dc230a4eda6efe08aa6844505a3664">ast_dns_result::rcode</a></div><div class="ttdeci">unsigned int rcode</div><div class="ttdoc">Optional rcode, set if an error occurred. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00123">dns_internal.h:123</a></div></div>
<div class="ttc" id="structast__dns__result_html_abba77e678a34722d786f3faa53262f75"><div class="ttname"><a href="../../d5/d8d/structast__dns__result.html#abba77e678a34722d786f3faa53262f75">ast_dns_result::secure</a></div><div class="ttdeci">unsigned int secure</div><div class="ttdoc">Whether the result is secure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00119">dns_internal.h:119</a></div></div>
<div class="ttc" id="structast__dns__result_html_a6022a9b552fa30c527144ad1eb97ef36"><div class="ttname"><a href="../../d5/d8d/structast__dns__result.html#a6022a9b552fa30c527144ad1eb97ef36">ast_dns_result::canonical</a></div><div class="ttdeci">const char * canonical</div><div class="ttdoc">The canonical name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00127">dns_internal.h:127</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="dns__core_8c_html_a9d8517652042a392b47003f26c9baeb5"><div class="ttname"><a href="../../dc/d00/dns__core_8c.html#a9d8517652042a392b47003f26c9baeb5">ast_dns_result_free</a></div><div class="ttdeci">void ast_dns_result_free(struct ast_dns_result *result)</div><div class="ttdoc">Free the DNS result information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00130">dns_core.c:130</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_ab8dde573cc3974acd626c5626fae14b4"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#ab8dde573cc3974acd626c5626fae14b4">answer</a></div><div class="ttdeci">static int answer(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l00682">chan_pjsip.c:682</a></div></div>
<div class="ttc" id="structast__dns__query_html_a739d372feb17d2aa4aefab56762623e4"><div class="ttname"><a href="../../dd/daa/structast__dns__query.html#a739d372feb17d2aa4aefab56762623e4">ast_dns_query::result</a></div><div class="ttdeci">struct ast_dns_result * result</div><div class="ttdoc">Result of the DNS query. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00147">dns_internal.h:147</a></div></div>
<div class="ttc" id="structast__dns__result_html_a103a957b017f6b717767bba130a02694"><div class="ttname"><a href="../../d5/d8d/structast__dns__result.html#a103a957b017f6b717767bba130a02694">ast_dns_result::buf</a></div><div class="ttdeci">char buf[0]</div><div class="ttdoc">Buffer for dynamic data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00133">dns_internal.h:133</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structast__dns__result_html_a9daf07459ff1c029a1a79ed17f96cc69"><div class="ttname"><a href="../../d5/d8d/structast__dns__result.html#a9daf07459ff1c029a1a79ed17f96cc69">ast_dns_result::bogus</a></div><div class="ttdeci">unsigned int bogus</div><div class="ttdoc">Whether the result is bogus. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00121">dns_internal.h:121</a></div></div>
<div class="ttc" id="structast__dns__result_html_a60e7f19e0a67dbea7e21c74f1a225fef"><div class="ttname"><a href="../../d5/d8d/structast__dns__result.html#a60e7f19e0a67dbea7e21c74f1a225fef">ast_dns_result::answer_size</a></div><div class="ttdeci">size_t answer_size</div><div class="ttdoc">The size of the raw DNS answer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00131">dns_internal.h:131</a></div></div>
<div class="ttc" id="structast__dns__result_html_acf478081be3b257185e81c8a92235209"><div class="ttname"><a href="../../d5/d8d/structast__dns__result.html#acf478081be3b257185e81c8a92235209">ast_dns_result::answer</a></div><div class="ttdeci">const char * answer</div><div class="ttdoc">The raw DNS answer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d07/dns__internal_8h_source.html#l00129">dns_internal.h:129</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aef7d827099f07e77891ab28255079399"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef7d827099f07e77891ab28255079399">&#9670;&nbsp;</a></span>ast_dns_resolver_unregister()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_dns_resolver_unregister </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../de/d6f/structast__dns__resolver.html">ast_dns_resolver</a> *&#160;</td>
          <td class="paramname"><em>resolver</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregister a DNS resolver. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">resolver</td><td>A DNS resolver implementation </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dc/d00/dns__core_8c_source.html#l00680">680</a> of file <a class="el" href="../../dc/d00/dns__core_8c_source.html">dns_core.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00569">AST_RWLIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00544">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00616">AST_RWLIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, and <a class="el" href="../../d9/da7/dns__resolver_8h_source.html#l00034">ast_dns_resolver::name</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d14/test__dns_8c_source.html#l00047">AST_TEST_DEFINE()</a>, <a class="el" href="../../df/d3a/dns__system__resolver_8c_source.html#l00120">dns_system_resolver_destroy()</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00452">invalid_record_test()</a>, <a class="el" href="../../da/d22/test__dns__srv_8c_source.html#l00125">nominal_test()</a>, <a class="el" href="../../d4/db3/test__dns__naptr_8c_source.html#l00275">off_nominal_test()</a>, and <a class="el" href="../../d3/d10/test__dns__query__set_8c_source.html#l00181">query_set_test()</a>.</p>
<div class="fragment"><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;{</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d6f/structast__dns__resolver.html">ast_dns_resolver</a> *iter;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;   <span class="keywordflow">if</span> (!resolver) {</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;   }</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../dd/da1/structresolvers.html">resolvers</a>);</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../dd/da1/structresolvers.html">resolvers</a>, iter, next) {</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      <span class="keywordflow">if</span> (resolver == iter) {</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a>(next);</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;      }</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;   }</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../dd/da1/structresolvers.html">resolvers</a>);</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;Unregistered DNS resolver &#39;%s&#39;\n&quot;</span>, resolver-&gt;<a class="code" href="../../de/d6f/structast__dns__resolver.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structast__dns__resolver_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../de/d6f/structast__dns__resolver.html#a8f8f80d37794cde9472343e4487ba3eb">ast_dns_resolver::name</a></div><div class="ttdeci">const char * name</div><div class="ttdoc">The name of the resolver implementation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da7/dns__resolver_8h_source.html#l00034">dns_resolver.h:34</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a02212548652c9eb0f3db38dc4e4bd285"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE_CURRENT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00569">linkedlists.h:569</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a21be6da4b2146b04b4868c2be5cae750"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00544">linkedlists.h:544</a></div></div>
<div class="ttc" id="structast__dns__resolver_html"><div class="ttname"><a href="../../de/d6f/structast__dns__resolver.html">ast_dns_resolver</a></div><div class="ttdoc">DNS resolver implementation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/da7/dns__resolver_8h_source.html#l00032">dns_resolver.h:32</a></div></div>
<div class="ttc" id="structresolvers_html"><div class="ttname"><a href="../../dd/da1/structresolvers.html">resolvers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d00/dns__core_8c_source.html#l00048">dns_core.c:48</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6bf0e81cb6ef01532ddebaba68f6de28"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_END</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00616">linkedlists.h:616</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:45:48 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
