<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: test_message.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_59425e443f801f1f2fd8bbe4959a3ccf.html">tests</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">test_message.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Test module for out-of-call text message module.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &lt;regex.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/ddc/test_8h_source.html">asterisk/test.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d0d/message_8h_source.html">asterisk/message.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/de0/pbx_8h_source.html">asterisk/pbx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d45/manager_8h_source.html">asterisk/manager.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/d68/vector_8h_source.html">asterisk/vector.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for test_message.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/db6/test__message_8c__incl.png" border="0" usemap="#test__message_8c" alt=""/></div>
<map name="test__message_8c" id="test__message_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="241,453,325,480"/>
<area shape="rect" id="node23" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="1498,80,1634,107"/>
<area shape="rect" id="node31" href="../../d6/d68/vector_8h.html" title="Vector container support. " alt="" coords="545,453,672,480"/>
<area shape="rect" id="node35" href="../../d2/ddc/test_8h.html" title="Test Framework API. " alt="" coords="495,229,608,256"/>
<area shape="rect" id="node37" href="../../d2/d0d/message_8h.html" title="Out&#45;of&#45;call text message support. " alt="" coords="734,80,881,107"/>
<area shape="rect" id="node38" href="../../db/de0/pbx_8h.html" title="Core PBX routines and definitions. " alt="" coords="1065,80,1176,107"/>
<area shape="rect" id="node50" href="../../db/d45/manager_8h.html" title="The AMI &#45; Asterisk Manager Interface &#45; is a TCP protocol created to manage Asterisk with third&#45;party ..." alt="" coords="684,229,829,256"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="591,752,746,779"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="511,528,648,555"/>
<area shape="rect" id="node21" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="216,528,351,555"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="595,827,742,853"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="1191,677,1333,704"/>
<area shape="rect" id="node24" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1551,304,1666,331"/>
<area shape="rect" id="node25" href="../../d9/d94/network_8h.html" title="Wrapper for network related headers, masking differences between various operating systems..." alt="" coords="1121,379,1259,405"/>
<area shape="rect" id="node26" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="1449,677,1512,704"/>
<area shape="rect" id="node27" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1336,603,1449,629"/>
<area shape="rect" id="node28" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="1588,677,1715,704"/>
<area shape="rect" id="node29" href="../../d5/deb/localtime_8h.html" title="Custom localtime functions for multiple timezones. " alt="" coords="1435,379,1582,405"/>
<area shape="rect" id="node30" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="774,379,931,405"/>
<area shape="rect" id="node32" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="619,379,750,405"/>
<area shape="rect" id="node33" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="860,453,995,480"/>
<area shape="rect" id="node34" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="1115,528,1265,555"/>
<area shape="rect" id="node36" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="518,304,619,331"/>
<area shape="rect" id="node39" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1209,155,1347,181"/>
<area shape="rect" id="node42" href="../../d0/d0a/format_8h.html" title="Media Format API. " alt="" coords="1391,304,1522,331"/>
<area shape="rect" id="node43" href="../../d9/de7/chanvars_8h.html" title="Channel Variables. " alt="" coords="1006,229,1153,256"/>
<area shape="rect" id="node45" href="../../d7/d00/sched_8h.html" title="Scheduler Routines (derived from cheops) " alt="" coords="1007,155,1133,181"/>
<area shape="rect" id="node46" href="../../da/da2/devicestate_8h.html" title="Device state management. " alt="" coords="1714,155,1877,181"/>
<area shape="rect" id="node47" href="../../d6/dd7/presencestate_8h.html" title="Presence state management. " alt="" coords="1372,155,1552,181"/>
<area shape="rect" id="node48" href="../../d6/da0/hashtab_8h.html" title="Generic (perhaps overly so) hashtable implementation Hash Table support in Asterisk. " alt="" coords="696,453,836,480"/>
<area shape="rect" id="node49" href="../../d1/d99/xmldoc_8h.html" title="Asterisk XML Documentation API. " alt="" coords="695,304,829,331"/>
<area shape="rect" id="node40" href="../../dc/d4d/alertpipe_8h.html" title="asterisk/alertpipe.h" alt="" coords="1513,229,1657,256"/>
<area shape="rect" id="node41" href="../../dc/d14/abstract__jb_8h.html" title="Common implementation&#45;independent jitterbuffer stuff. " alt="" coords="1329,229,1488,256"/>
<area shape="rect" id="node44" href="../../d9/db6/datastore_8h.html" title="Asterisk datastore objects. " alt="" coords="1057,304,1208,331"/>
</map>
</div>
</div>
<p><a href="../../d9/d7a/test__message_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aa011e5dd0a1f894f4cdc4276019643f9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#aa011e5dd0a1f894f4cdc4276019643f9">DEFAULT_EXPECTED_EVENTS</a>&#160;&#160;&#160;4</td></tr>
<tr class="memdesc:aa011e5dd0a1f894f4cdc4276019643f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of user events we should get in a dialplan test.  <a href="#aa011e5dd0a1f894f4cdc4276019643f9">More...</a><br /></td></tr>
<tr class="separator:aa011e5dd0a1f894f4cdc4276019643f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ce148361905570873a8dda57171564c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#a4ce148361905570873a8dda57171564c">FREE_VARIABLE_VECTOR</a>(vector)</td></tr>
<tr class="separator:a4ce148361905570873a8dda57171564c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add35ea2349b86888eef95d404e6faebf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#add35ea2349b86888eef95d404e6faebf">TEST_CATEGORY</a>&#160;&#160;&#160;&quot;/main/<a class="el" href="../../d8/d9e/structmessage.html">message</a>/&quot;</td></tr>
<tr class="separator:add35ea2349b86888eef95d404e6faebf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8bcb9d3707a8934e7e925895847b0f6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#ab8bcb9d3707a8934e7e925895847b0f6">TEST_CONTEXT</a>&#160;&#160;&#160;&quot;__TEST_MESSAGE_CONTEXT__&quot;</td></tr>
<tr class="separator:ab8bcb9d3707a8934e7e925895847b0f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fcdae79eb8b5dba56f672c597d577ae"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#a1fcdae79eb8b5dba56f672c597d577ae">TEST_EXTENSION</a>&#160;&#160;&#160;&quot;test_message_extension&quot;</td></tr>
<tr class="separator:a1fcdae79eb8b5dba56f672c597d577ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae421ffca876f0e6028ce913872bfb785"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#ae421ffca876f0e6028ce913872bfb785">ast_msg_safe_destroy</a> (void *obj)</td></tr>
<tr class="separator:ae421ffca876f0e6028ce913872bfb785"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19d53f9d0f06c9ff1032d484c88a1ce6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#a19d53f9d0f06c9ff1032d484c88a1ce6">AST_TEST_DEFINE</a> (test_message_msg_tech_registration)</td></tr>
<tr class="separator:a19d53f9d0f06c9ff1032d484c88a1ce6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04cc362f3715de45f1ce783781340739"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#a04cc362f3715de45f1ce783781340739">AST_TEST_DEFINE</a> (test_message_msg_handler_registration)</td></tr>
<tr class="separator:a04cc362f3715de45f1ce783781340739"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab99ac94be4bea52079dc713846b4b735"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#ab99ac94be4bea52079dc713846b4b735">AST_TEST_DEFINE</a> (test_message_manipulation)</td></tr>
<tr class="separator:ab99ac94be4bea52079dc713846b4b735"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c85cf1228f1d053319cee716049f39c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#a1c85cf1228f1d053319cee716049f39c">AST_TEST_DEFINE</a> (test_message_queue_dialplan_nominal)</td></tr>
<tr class="separator:a1c85cf1228f1d053319cee716049f39c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add0d01c35ee72be88a39e15d7e27bed7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#add0d01c35ee72be88a39e15d7e27bed7">AST_TEST_DEFINE</a> (test_message_queue_handler_nominal)</td></tr>
<tr class="separator:add0d01c35ee72be88a39e15d7e27bed7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a610decb220f6147a87d8bc6ef6234eeb"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#a610decb220f6147a87d8bc6ef6234eeb">AST_TEST_DEFINE</a> (test_message_queue_both_nominal)</td></tr>
<tr class="separator:a610decb220f6147a87d8bc6ef6234eeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef2bf91712288a03a3b89cec5ac0bf91"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#aef2bf91712288a03a3b89cec5ac0bf91">AST_TEST_DEFINE</a> (test_message_has_destination_dialplan)</td></tr>
<tr class="separator:aef2bf91712288a03a3b89cec5ac0bf91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0260fb2a3a02635d15b498dffd31b23f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#a0260fb2a3a02635d15b498dffd31b23f">AST_TEST_DEFINE</a> (test_message_has_destination_handler)</td></tr>
<tr class="separator:a0260fb2a3a02635d15b498dffd31b23f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a238dbcb0f953849f45661be55a451049"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#a238dbcb0f953849f45661be55a451049">AST_TEST_DEFINE</a> (test_message_msg_send)</td></tr>
<tr class="separator:a238dbcb0f953849f45661be55a451049"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51b760e9be436f1e6147904d60b6c708"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#a51b760e9be436f1e6147904d60b6c708">AST_VECTOR</a> (var_vector, struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *)</td></tr>
<tr class="memdesc:a51b760e9be436f1e6147904d60b6c708"><td class="mdescLeft">&#160;</td><td class="mdescRight">The expected user event fields.  <a href="#a51b760e9be436f1e6147904d60b6c708">More...</a><br /></td></tr>
<tr class="separator:a51b760e9be436f1e6147904d60b6c708"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3180f8c09904ea596ce9199bc08129c9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#a3180f8c09904ea596ce9199bc08129c9">create_test_dialplan</a> (void)</td></tr>
<tr class="separator:a3180f8c09904ea596ce9199bc08129c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76a8c4590f94ab1e2a89fb0e7a241a33"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#a76a8c4590f94ab1e2a89fb0e7a241a33">handler_wait_for_message</a> (struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="el" href="../../d8/d89/structtest.html">test</a>)</td></tr>
<tr class="memdesc:a76a8c4590f94ab1e2a89fb0e7a241a33"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for the <a class="el" href="../../d9/d7a/test__message_8c.html#a17ecaf929e68e60be317110c89a6b60b">test_msg_handler</a> to receive the message.  <a href="#a76a8c4590f94ab1e2a89fb0e7a241a33">More...</a><br /></td></tr>
<tr class="separator:a76a8c4590f94ab1e2a89fb0e7a241a33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3b9a35577ec3254d74389c44112a914"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#ad3b9a35577ec3254d74389c44112a914">test_cleanup_cb</a> (struct <a class="el" href="../../dc/d62/structast__test__info.html">ast_test_info</a> *info, struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="el" href="../../d8/d89/structtest.html">test</a>)</td></tr>
<tr class="separator:ad3b9a35577ec3254d74389c44112a914"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74f59d77cd5fb076d3a3628bc1310b60"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#a74f59d77cd5fb076d3a3628bc1310b60">test_init_cb</a> (struct <a class="el" href="../../dc/d62/structast__test__info.html">ast_test_info</a> *info, struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="el" href="../../d8/d89/structtest.html">test</a>)</td></tr>
<tr class="separator:a74f59d77cd5fb076d3a3628bc1310b60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4fdf3c08bf6a6685e5f6cd49b9e71d8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#aa4fdf3c08bf6a6685e5f6cd49b9e71d8">test_msg_handle_msg_cb</a> (struct <a class="el" href="../../df/da1/structast__msg.html">ast_msg</a> *msg)</td></tr>
<tr class="separator:aa4fdf3c08bf6a6685e5f6cd49b9e71d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a45aa00431eedc892d920da9c783da6"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#a8a45aa00431eedc892d920da9c783da6">test_msg_has_destination_cb</a> (const struct <a class="el" href="../../df/da1/structast__msg.html">ast_msg</a> *msg)</td></tr>
<tr class="separator:a8a45aa00431eedc892d920da9c783da6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9248e8cde32a0570a47fe477384a3680"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#a9248e8cde32a0570a47fe477384a3680">test_msg_send</a> (const struct <a class="el" href="../../df/da1/structast__msg.html">ast_msg</a> *msg, const char *to, const char *from)</td></tr>
<tr class="separator:a9248e8cde32a0570a47fe477384a3680"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c0313d8a73d2c0fe4ce104ba2bb6ab9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#a3c0313d8a73d2c0fe4ce104ba2bb6ab9">user_event_hook_cb</a> (int category, const char *<a class="el" href="../../df/d7d/structevent.html">event</a>, char *body)</td></tr>
<tr class="separator:a3c0313d8a73d2c0fe4ce104ba2bb6ab9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c0ef89c62e441edf745534432bbde29"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#a6c0ef89c62e441edf745534432bbde29">user_event_wait_for_events</a> (struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="el" href="../../d8/d89/structtest.html">test</a>, int expected_events)</td></tr>
<tr class="memdesc:a6c0ef89c62e441edf745534432bbde29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for the expected number of user events to be received.  <a href="#a6c0ef89c62e441edf745534432bbde29">More...</a><br /></td></tr>
<tr class="separator:a6c0ef89c62e441edf745534432bbde29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2157cd1e39b97bcd72a04b7fcc0bebdf"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#a2157cd1e39b97bcd72a04b7fcc0bebdf">verify_bad_headers</a> (struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="el" href="../../d8/d89/structtest.html">test</a>)</td></tr>
<tr class="separator:a2157cd1e39b97bcd72a04b7fcc0bebdf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea12b1ed0b446b50c12ed1e02ad4ff49"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#aea12b1ed0b446b50c12ed1e02ad4ff49">verify_user_event_fields</a> (int user_event, const char *<a class="el" href="../../d5/d65/structheader.html">header</a>, const char *<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>)</td></tr>
<tr class="memdesc:aea12b1ed0b446b50c12ed1e02ad4ff49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verifies a user event header/value pair.  <a href="#aea12b1ed0b446b50c12ed1e02ad4ff49">More...</a><br /></td></tr>
<tr class="separator:aea12b1ed0b446b50c12ed1e02ad4ff49"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Out-of-<a class="el" href="../../d0/d29/chan__pjsip_8c.html#acc941e909d1ca6a0997028d9562d78da">call</a> <a class="el" href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a> <a class="el" href="../../d8/d9e/structmessage.html">message</a> support&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c.html#a6e79b87e069c15a5fb21826e5eed0971">AST_BUILDOPT_SUM</a>, .load = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>, .unload = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>, .load_pri = <a class="el" href="../../d5/d16/module_8h.html#aa4f734041ffd9d75b07cefb0291e1e58a1d1eb207e01a2d3bf6aa6ba271c27dee">AST_MODPRI_DEFAULT</a>, .support_level = <a class="el" href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a634484c0074e7b6b630756fab09e2c15">AST_MODULE_SUPPORT_CORE</a>, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b775e30cf6ebe9c05b1d3e099b5af93"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#a7b775e30cf6ebe9c05b1d3e099b5af93">expected_user_events</a></td></tr>
<tr class="memdesc:a7b775e30cf6ebe9c05b1d3e099b5af93"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of user events we expect for this test.  <a href="#a7b775e30cf6ebe9c05b1d3e099b5af93">More...</a><br /></td></tr>
<tr class="separator:a7b775e30cf6ebe9c05b1d3e099b5af93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78566377f601a14bc2ef3e278e11677c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#ab134d98cdfe7de0f7a72b377c0765dc7">ast_cond_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#a78566377f601a14bc2ef3e278e11677c">handler_cond</a></td></tr>
<tr class="memdesc:a78566377f601a14bc2ef3e278e11677c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Condition wait variable for <a class="el" href="../../d9/d7a/test__message_8c.html#a17ecaf929e68e60be317110c89a6b60b">test_msg_handler</a> receiving message.  <a href="#a78566377f601a14bc2ef3e278e11677c">More...</a><br /></td></tr>
<tr class="separator:a78566377f601a14bc2ef3e278e11677c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ac03d5630a131e467bea3c28e83fa63"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#a8ac03d5630a131e467bea3c28e83fa63">handler_lock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td></tr>
<tr class="memdesc:a8ac03d5630a131e467bea3c28e83fa63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mutex for <code>handler_cond</code>.  <a href="#a8ac03d5630a131e467bea3c28e83fa63">More...</a><br /></td></tr>
<tr class="separator:a8ac03d5630a131e467bea3c28e83fa63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a374730095a6363599d447f160fc419b5"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#a374730095a6363599d447f160fc419b5">handler_received_message</a></td></tr>
<tr class="memdesc:a374730095a6363599d447f160fc419b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Predicate for the test_message_handler receiving a message.  <a href="#a374730095a6363599d447f160fc419b5">More...</a><br /></td></tr>
<tr class="separator:a374730095a6363599d447f160fc419b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7fe5722b5eafa01505c5f53b567e7a0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#ae7fe5722b5eafa01505c5f53b567e7a0">message_received</a></td></tr>
<tr class="separator:ae7fe5722b5eafa01505c5f53b567e7a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab82a1e6cd9b45660eccf7d513e3e0bb4"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#ab82a1e6cd9b45660eccf7d513e3e0bb4">received_user_events</a></td></tr>
<tr class="memdesc:ab82a1e6cd9b45660eccf7d513e3e0bb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The current number of received user events.  <a href="#ab82a1e6cd9b45660eccf7d513e3e0bb4">More...</a><br /></td></tr>
<tr class="separator:ab82a1e6cd9b45660eccf7d513e3e0bb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17ecaf929e68e60be317110c89a6b60b"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d5/d80/structast__msg__handler.html">ast_msg_handler</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#a17ecaf929e68e60be317110c89a6b60b">test_msg_handler</a></td></tr>
<tr class="memdesc:a17ecaf929e68e60be317110c89a6b60b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Our test message handler.  <a href="#a17ecaf929e68e60be317110c89a6b60b">More...</a><br /></td></tr>
<tr class="separator:a17ecaf929e68e60be317110c89a6b60b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d709c3b9390852582b64e2a370bf913"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#ab134d98cdfe7de0f7a72b377c0765dc7">ast_cond_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#a2d709c3b9390852582b64e2a370bf913">user_event_cond</a></td></tr>
<tr class="memdesc:a2d709c3b9390852582b64e2a370bf913"><td class="mdescLeft">&#160;</td><td class="mdescRight">Condition wait variable for all dialplan user events being received.  <a href="#a2d709c3b9390852582b64e2a370bf913">More...</a><br /></td></tr>
<tr class="separator:a2d709c3b9390852582b64e2a370bf913"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ebeac13b2a4916c6a0ff2f87693a530"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d0/d10/structmanager__custom__hook.html">manager_custom_hook</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#a5ebeac13b2a4916c6a0ff2f87693a530">user_event_hook</a></td></tr>
<tr class="memdesc:a5ebeac13b2a4916c6a0ff2f87693a530"><td class="mdescLeft">&#160;</td><td class="mdescRight">AMI event hook that verifies whether or not we've gotten our user events.  <a href="#a5ebeac13b2a4916c6a0ff2f87693a530">More...</a><br /></td></tr>
<tr class="separator:a5ebeac13b2a4916c6a0ff2f87693a530"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39a4aee94bdfb8f87bd4634af516aad8"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d7a/test__message_8c.html#a39a4aee94bdfb8f87bd4634af516aad8">user_event_lock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td></tr>
<tr class="memdesc:a39a4aee94bdfb8f87bd4634af516aad8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mutex for <code>user_event_cond</code>.  <a href="#a39a4aee94bdfb8f87bd4634af516aad8">More...</a><br /></td></tr>
<tr class="separator:a39a4aee94bdfb8f87bd4634af516aad8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Test module for out-of-call text message module. </p>
<dl class="section author"><dt>Author</dt><dd><pre class="fragment">Matt Jordan &lt;mjordan@digium.com&gt; </pre> </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aa011e5dd0a1f894f4cdc4276019643f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa011e5dd0a1f894f4cdc4276019643f9">&#9670;&nbsp;</a></span>DEFAULT_EXPECTED_EVENTS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEFAULT_EXPECTED_EVENTS&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The number of user events we should get in a dialplan test. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00050">50</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00465">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00775">test_init_cb()</a>.</p>

</div>
</div>
<a id="a4ce148361905570873a8dda57171564c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ce148361905570873a8dda57171564c">&#9670;&nbsp;</a></span>FREE_VARIABLE_VECTOR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FREE_VARIABLE_VECTOR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">vector</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00787">787</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00801">test_cleanup_cb()</a>.</p>

</div>
</div>
<a id="add35ea2349b86888eef95d404e6faebf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add35ea2349b86888eef95d404e6faebf">&#9670;&nbsp;</a></span>TEST_CATEGORY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TEST_CATEGORY&#160;&#160;&#160;&quot;/main/<a class="el" href="../../d8/d9e/structmessage.html">message</a>/&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00044">44</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00299">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00860">load_module()</a>.</p>

</div>
</div>
<a id="ab8bcb9d3707a8934e7e925895847b0f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8bcb9d3707a8934e7e925895847b0f6">&#9670;&nbsp;</a></span>TEST_CONTEXT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TEST_CONTEXT&#160;&#160;&#160;&quot;__TEST_MESSAGE_CONTEXT__&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00046">46</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l14480">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00828">create_test_dialplan()</a>.</p>

</div>
</div>
<a id="a1fcdae79eb8b5dba56f672c597d577ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fcdae79eb8b5dba56f672c597d577ae">&#9670;&nbsp;</a></span>TEST_EXTENSION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TEST_EXTENSION&#160;&#160;&#160;&quot;test_message_extension&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00047">47</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l14480">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00828">create_test_dialplan()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00881">881</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00881">881</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00881">881</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

</div>
</div>
<a id="ae421ffca876f0e6028ce913872bfb785"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae421ffca876f0e6028ce913872bfb785">&#9670;&nbsp;</a></span>ast_msg_safe_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void ast_msg_safe_destroy </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00365">365</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d6d/message_8c_source.html#l00448">ast_msg_destroy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00374">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;{</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *msg = obj;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;   <span class="keywordflow">if</span> (msg) {</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      <a class="code" href="../../d2/d0d/message_8h.html#a13b928949f293c3b6b9ba3ebe8d64075">ast_msg_destroy</a>(msg);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;   }</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;}</div><div class="ttc" id="structast__msg_html"><div class="ttname"><a href="../../df/da1/structast__msg.html">ast_msg</a></div><div class="ttdoc">A message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00233">message.c:233</a></div></div>
<div class="ttc" id="message_8h_html_a13b928949f293c3b6b9ba3ebe8d64075"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a13b928949f293c3b6b9ba3ebe8d64075">ast_msg_destroy</a></div><div class="ttdeci">struct ast_msg * ast_msg_destroy(struct ast_msg *msg)</div><div class="ttdoc">Destroy an ast_msg. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00448">message.c:448</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a19d53f9d0f06c9ff1032d484c88a1ce6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19d53f9d0f06c9ff1032d484c88a1ce6">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[1/9]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">test_message_msg_tech_registration&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00299">299</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d6d/message_8c_source.html#l01569">ast_msg_tech_register()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l01610">ast_msg_tech_unregister()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00044">TEST_CATEGORY</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;{</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;   <span class="keywordtype">int</span> reg_result;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../d9/d7a/test__message_8c.html#add35ea2349b86888eef95d404e6faebf">TEST_CATEGORY</a>;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test register/unregister of a message tech&quot;</span>;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;         <span class="stringliteral">&quot;Test that:\n&quot;</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;         <span class="stringliteral">&quot;\tA message technology can be registered once only\n&quot;</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;         <span class="stringliteral">&quot;\tA registered message technology can be unregistered once only&quot;</span>;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;   }</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   reg_result = <a class="code" href="../../d2/d0d/message_8h.html#a98ae66acbd6268c5010acf52be7e40a4">ast_msg_tech_register</a>(&amp;test_msg_tech);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, reg_result == 0);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   reg_result = <a class="code" href="../../d2/d0d/message_8h.html#a98ae66acbd6268c5010acf52be7e40a4">ast_msg_tech_register</a>(&amp;test_msg_tech);</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, reg_result == -1);</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;   reg_result = <a class="code" href="../../d2/d0d/message_8h.html#a8a1ffcfecf1ffbc22c526796cdf954a7">ast_msg_tech_unregister</a>(&amp;test_msg_tech);</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, reg_result == 0);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;   reg_result = <a class="code" href="../../d2/d0d/message_8h.html#a8a1ffcfecf1ffbc22c526796cdf954a7">ast_msg_tech_unregister</a>(&amp;test_msg_tech);</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, reg_result == -1);</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;}</div><div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="message_8h_html_a98ae66acbd6268c5010acf52be7e40a4"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a98ae66acbd6268c5010acf52be7e40a4">ast_msg_tech_register</a></div><div class="ttdeci">int ast_msg_tech_register(const struct ast_msg_tech *tech)</div><div class="ttdoc">Register a message technology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01569">message.c:1569</a></div></div>
<div class="ttc" id="test__message_8c_html_add35ea2349b86888eef95d404e6faebf"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#add35ea2349b86888eef95d404e6faebf">TEST_CATEGORY</a></div><div class="ttdeci">#define TEST_CATEGORY</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00044">test_message.c:44</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="message_8h_html_a8a1ffcfecf1ffbc22c526796cdf954a7"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a8a1ffcfecf1ffbc22c526796cdf954a7">ast_msg_tech_unregister</a></div><div class="ttdeci">int ast_msg_tech_unregister(const struct ast_msg_tech *tech)</div><div class="ttdoc">Unregister a message technology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01610">message.c:1610</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a04cc362f3715de45f1ce783781340739"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04cc362f3715de45f1ce783781340739">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[2/9]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">test_message_msg_handler_registration&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00332">332</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d6d/message_8c_source.html#l01629">ast_msg_handler_register()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l01671">ast_msg_handler_unregister()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00044">TEST_CATEGORY</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;{</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;   <span class="keywordtype">int</span> reg_result;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../d9/d7a/test__message_8c.html#add35ea2349b86888eef95d404e6faebf">TEST_CATEGORY</a>;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test register/unregister of a message handler&quot;</span>;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;         <span class="stringliteral">&quot;Test that:\n&quot;</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;         <span class="stringliteral">&quot;\tA message handler can be registered once only\n&quot;</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;         <span class="stringliteral">&quot;\tA registered message handler can be unregistered once only&quot;</span>;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;   }</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;   reg_result = <a class="code" href="../../d2/d0d/message_8h.html#a9b4a41f815fa2f37ed29ac32b3d5d3a3">ast_msg_handler_register</a>(&amp;<a class="code" href="../../d9/d7a/test__message_8c.html#a17ecaf929e68e60be317110c89a6b60b">test_msg_handler</a>);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, reg_result == 0);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;   reg_result = <a class="code" href="../../d2/d0d/message_8h.html#a9b4a41f815fa2f37ed29ac32b3d5d3a3">ast_msg_handler_register</a>(&amp;<a class="code" href="../../d9/d7a/test__message_8c.html#a17ecaf929e68e60be317110c89a6b60b">test_msg_handler</a>);</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, reg_result == -1);</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;   reg_result = <a class="code" href="../../d2/d0d/message_8h.html#a35344e60cbd464b87c57fc74d072e255">ast_msg_handler_unregister</a>(&amp;<a class="code" href="../../d9/d7a/test__message_8c.html#a17ecaf929e68e60be317110c89a6b60b">test_msg_handler</a>);</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, reg_result == 0);</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;   reg_result = <a class="code" href="../../d2/d0d/message_8h.html#a35344e60cbd464b87c57fc74d072e255">ast_msg_handler_unregister</a>(&amp;<a class="code" href="../../d9/d7a/test__message_8c.html#a17ecaf929e68e60be317110c89a6b60b">test_msg_handler</a>);</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, reg_result == -1);</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;}</div><div class="ttc" id="message_8h_html_a35344e60cbd464b87c57fc74d072e255"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a35344e60cbd464b87c57fc74d072e255">ast_msg_handler_unregister</a></div><div class="ttdeci">int ast_msg_handler_unregister(const struct ast_msg_handler *handler)</div><div class="ttdoc">Unregister a ast_msg_handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01671">message.c:1671</a></div></div>
<div class="ttc" id="message_8h_html_a9b4a41f815fa2f37ed29ac32b3d5d3a3"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a9b4a41f815fa2f37ed29ac32b3d5d3a3">ast_msg_handler_register</a></div><div class="ttdeci">int ast_msg_handler_register(const struct ast_msg_handler *handler)</div><div class="ttdoc">Register a ast_msg_handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01629">message.c:1629</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="test__message_8c_html_add35ea2349b86888eef95d404e6faebf"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#add35ea2349b86888eef95d404e6faebf">TEST_CATEGORY</a></div><div class="ttdeci">#define TEST_CATEGORY</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00044">test_message.c:44</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="test__message_8c_html_a17ecaf929e68e60be317110c89a6b60b"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a17ecaf929e68e60be317110c89a6b60b">test_msg_handler</a></div><div class="ttdeci">static struct ast_msg_handler test_msg_handler</div><div class="ttdoc">Our test message handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00090">test_message.c:90</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab99ac94be4bea52079dc713846b4b735"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab99ac94be4bea52079dc713846b4b735">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[3/9]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">test_message_manipulation&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00374">374</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d6d/message_8c_source.html#l00418">ast_msg_alloc()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00531">ast_msg_get_body()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00551">ast_msg_get_endpoint()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00536">ast_msg_get_from()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00546">ast_msg_get_tech()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00541">ast_msg_get_to()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00620">ast_msg_get_var()</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00365">ast_msg_safe_destroy()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00476">ast_msg_set_body()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00520">ast_msg_set_endpoint()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00465">ast_msg_set_from()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00509">ast_msg_set_tech()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00454">ast_msg_set_to()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00615">ast_msg_set_var()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00610">ast_msg_set_var_outbound()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00706">ast_msg_var_iterator_destroy()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00644">ast_msg_var_iterator_init()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00689">ast_msg_var_iterator_next()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00700">ast_msg_var_unref_current()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00044">TEST_CATEGORY</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;{</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *, msg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d9/d7a/test__message_8c.html#ae421ffca876f0e6028ce913872bfb785">ast_msg_safe_destroy</a>);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d6/d23/structast__msg__var__iterator.html">ast_msg_var_iterator</a> *, it_vars, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d2/d0d/message_8h.html#a4303d30986de10390f263dc640d41a99">ast_msg_var_iterator_destroy</a>);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *actual;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *out_name;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *out_value;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../d9/d7a/test__message_8c.html#add35ea2349b86888eef95d404e6faebf">TEST_CATEGORY</a>;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test manipulating properties of a message&quot;</span>;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;         <span class="stringliteral">&quot;This test covers the following:\n&quot;</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;         <span class="stringliteral">&quot;\tSetting/getting the body\n&quot;</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;         <span class="stringliteral">&quot;\tSetting/getting inbound/outbound variables\n&quot;</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;         <span class="stringliteral">&quot;\tIterating over variables&quot;</span>;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;   }</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;   msg = <a class="code" href="../../d2/d0d/message_8h.html#a0e4685c7cf1d71204087b992110e6357">ast_msg_alloc</a>();</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, msg != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;   <span class="comment">/* Test setting/getting to */</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;   result = <a class="code" href="../../d2/d0d/message_8h.html#acf4073638cf23022399e3666c804e178">ast_msg_set_to</a>(msg, <span class="stringliteral">&quot;testmsg:%s&quot;</span>, <span class="stringliteral">&quot;foo&quot;</span>);</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, result == 0);</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;   actual = <a class="code" href="../../d2/d0d/message_8h.html#a6ddbc20e42c0631602984bc83506aaf2">ast_msg_get_to</a>(msg);</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !strcmp(actual, <span class="stringliteral">&quot;testmsg:foo&quot;</span>));</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;   <span class="comment">/* Test setting/getting from */</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;   result = <a class="code" href="../../d2/d0d/message_8h.html#a02a688837f4e91ea078c0b1b48017ef8">ast_msg_set_from</a>(msg, <span class="stringliteral">&quot;testmsg:%s&quot;</span>, <span class="stringliteral">&quot;bar&quot;</span>);</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, result == 0);</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;   actual = <a class="code" href="../../d2/d0d/message_8h.html#a393525170186b56f9e6bbcebb9968139">ast_msg_get_from</a>(msg);</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !strcmp(actual, <span class="stringliteral">&quot;testmsg:bar&quot;</span>));</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;   <span class="comment">/* Test setting/getting body */</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;   result = <a class="code" href="../../d2/d0d/message_8h.html#aa21f081993590c1410b287d717a92282">ast_msg_set_body</a>(msg, <span class="stringliteral">&quot;BodyTest: %s&quot;</span>, <span class="stringliteral">&quot;foo&quot;</span>);</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, result == 0);</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;   actual = <a class="code" href="../../d2/d0d/message_8h.html#abd98509b6e22ab33822ff3c7a2e35756">ast_msg_get_body</a>(msg);</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !strcmp(actual, <span class="stringliteral">&quot;BodyTest: foo&quot;</span>));</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;   <span class="comment">/* Test setting/getting technology */</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;   result = <a class="code" href="../../d2/d0d/message_8h.html#a757a64be14a9fc2b47a37f5ce9e742d5">ast_msg_set_tech</a>(msg, <span class="stringliteral">&quot;%s&quot;</span>, <span class="stringliteral">&quot;my_tech&quot;</span>);</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, result == 0);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;   actual = <a class="code" href="../../d2/d0d/message_8h.html#ac9a8163468646664e14338f6a34c6441">ast_msg_get_tech</a>(msg);</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !strcmp(actual, <span class="stringliteral">&quot;my_tech&quot;</span>));</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;   <span class="comment">/* Test setting/getting endpoint */</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;   result = <a class="code" href="../../d2/d0d/message_8h.html#a53573a834e1a26d67c26ba58a9ad8274">ast_msg_set_endpoint</a>(msg, <span class="stringliteral">&quot;%s&quot;</span>, <span class="stringliteral">&quot;terminus&quot;</span>);</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, result == 0);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;   actual = <a class="code" href="../../d2/d0d/message_8h.html#a7e523b0180c095ebef1c7e7c754fee85">ast_msg_get_endpoint</a>(msg);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !strcmp(actual, <span class="stringliteral">&quot;terminus&quot;</span>));</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;   <span class="comment">/* Test setting/getting non-outbound variable */</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;   result = <a class="code" href="../../d2/d0d/message_8h.html#a926dc659d6f9d88782e9d0e463ba8c47">ast_msg_set_var</a>(msg, <span class="stringliteral">&quot;foo&quot;</span>, <span class="stringliteral">&quot;bar&quot;</span>);</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, result == 0);</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;   actual = <a class="code" href="../../d2/d0d/message_8h.html#a5e9d57452f36f2c594799b35d916c27b">ast_msg_get_var</a>(msg, <span class="stringliteral">&quot;foo&quot;</span>);</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !strcmp(actual, <span class="stringliteral">&quot;bar&quot;</span>));</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;   <span class="comment">/* Test updating existing variable */</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;   result = <a class="code" href="../../d2/d0d/message_8h.html#a926dc659d6f9d88782e9d0e463ba8c47">ast_msg_set_var</a>(msg, <span class="stringliteral">&quot;foo&quot;</span>, <span class="stringliteral">&quot;new_bar&quot;</span>);</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, result == 0);</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;   actual = <a class="code" href="../../d2/d0d/message_8h.html#a5e9d57452f36f2c594799b35d916c27b">ast_msg_get_var</a>(msg, <span class="stringliteral">&quot;foo&quot;</span>);</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !strcmp(actual, <span class="stringliteral">&quot;new_bar&quot;</span>));</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;   <span class="comment">/* Verify a non-outbound variable is not iterable */</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;   it_vars = <a class="code" href="../../d2/d0d/message_8h.html#a2903b6879e5710a6226825c1a0b84bd7">ast_msg_var_iterator_init</a>(msg);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, it_vars != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d2/d0d/message_8h.html#a6060c18710de4d3cc8bdc87152234450">ast_msg_var_iterator_next</a>(msg, it_vars, &amp;out_name, &amp;out_value) == 0);</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#a4303d30986de10390f263dc640d41a99">ast_msg_var_iterator_destroy</a>(it_vars);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;   <span class="comment">/* Test updating an existing variable as an outbound variable */</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;   result = <a class="code" href="../../d2/d0d/message_8h.html#ad5ca4649880cd7535b381354a6d7b042">ast_msg_set_var_outbound</a>(msg, <span class="stringliteral">&quot;foo&quot;</span>, <span class="stringliteral">&quot;outbound_bar&quot;</span>);</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, result == 0);</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;   it_vars = <a class="code" href="../../d2/d0d/message_8h.html#a2903b6879e5710a6226825c1a0b84bd7">ast_msg_var_iterator_init</a>(msg);</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, it_vars != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;   result = <a class="code" href="../../d2/d0d/message_8h.html#a6060c18710de4d3cc8bdc87152234450">ast_msg_var_iterator_next</a>(msg, it_vars, &amp;out_name, &amp;out_value);</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, result == 1);</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !strcmp(out_name, <span class="stringliteral">&quot;foo&quot;</span>));</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !strcmp(out_value, <span class="stringliteral">&quot;outbound_bar&quot;</span>));</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#ad11b71dc312056abfcd80727fba68fa6">ast_msg_var_unref_current</a>(it_vars);</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;   result = <a class="code" href="../../d2/d0d/message_8h.html#a6060c18710de4d3cc8bdc87152234450">ast_msg_var_iterator_next</a>(msg, it_vars, &amp;out_name, &amp;out_value);</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, result == 0);</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;}</div><div class="ttc" id="message_8h_html_a757a64be14a9fc2b47a37f5ce9e742d5"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a757a64be14a9fc2b47a37f5ce9e742d5">ast_msg_set_tech</a></div><div class="ttdeci">int ast_msg_set_tech(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the technology associated with this message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00509">message.c:509</a></div></div>
<div class="ttc" id="message_8h_html_a5e9d57452f36f2c594799b35d916c27b"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a5e9d57452f36f2c594799b35d916c27b">ast_msg_get_var</a></div><div class="ttdeci">const char * ast_msg_get_var(struct ast_msg *msg, const char *name)</div><div class="ttdoc">Get the specified variable on the message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00620">message.c:620</a></div></div>
<div class="ttc" id="message_8h_html_ac9a8163468646664e14338f6a34c6441"><div class="ttname"><a href="../../d2/d0d/message_8h.html#ac9a8163468646664e14338f6a34c6441">ast_msg_get_tech</a></div><div class="ttdeci">const char * ast_msg_get_tech(const struct ast_msg *msg)</div><div class="ttdoc">Retrieve the technology associated with this message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00546">message.c:546</a></div></div>
<div class="ttc" id="message_8h_html_a7e523b0180c095ebef1c7e7c754fee85"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a7e523b0180c095ebef1c7e7c754fee85">ast_msg_get_endpoint</a></div><div class="ttdeci">const char * ast_msg_get_endpoint(const struct ast_msg *msg)</div><div class="ttdoc">Retrieve the endpoint associated with this message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00551">message.c:551</a></div></div>
<div class="ttc" id="message_8h_html_aa21f081993590c1410b287d717a92282"><div class="ttname"><a href="../../d2/d0d/message_8h.html#aa21f081993590c1410b287d717a92282">ast_msg_set_body</a></div><div class="ttdeci">int ast_msg_set_body(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the &amp;#39;body&amp;#39; text of a message (in UTF-8) </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00476">message.c:476</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="message_8h_html_a0e4685c7cf1d71204087b992110e6357"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a0e4685c7cf1d71204087b992110e6357">ast_msg_alloc</a></div><div class="ttdeci">struct ast_msg * ast_msg_alloc(void)</div><div class="ttdoc">Allocate a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00418">message.c:418</a></div></div>
<div class="ttc" id="message_8h_html_a6060c18710de4d3cc8bdc87152234450"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a6060c18710de4d3cc8bdc87152234450">ast_msg_var_iterator_next</a></div><div class="ttdeci">int ast_msg_var_iterator_next(const struct ast_msg *msg, struct ast_msg_var_iterator *iter, const char **name, const char **value)</div><div class="ttdoc">Get the next variable name and value that is set for sending outbound. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00689">message.c:689</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test__message_8c_html_add35ea2349b86888eef95d404e6faebf"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#add35ea2349b86888eef95d404e6faebf">TEST_CATEGORY</a></div><div class="ttdeci">#define TEST_CATEGORY</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00044">test_message.c:44</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="message_8h_html_abd98509b6e22ab33822ff3c7a2e35756"><div class="ttname"><a href="../../d2/d0d/message_8h.html#abd98509b6e22ab33822ff3c7a2e35756">ast_msg_get_body</a></div><div class="ttdeci">const char * ast_msg_get_body(const struct ast_msg *msg)</div><div class="ttdoc">Get the body of a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00531">message.c:531</a></div></div>
<div class="ttc" id="message_8h_html_a4303d30986de10390f263dc640d41a99"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a4303d30986de10390f263dc640d41a99">ast_msg_var_iterator_destroy</a></div><div class="ttdeci">void ast_msg_var_iterator_destroy(struct ast_msg_var_iterator *iter)</div><div class="ttdoc">Destroy a message variable iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00706">message.c:706</a></div></div>
<div class="ttc" id="message_8h_html_acf4073638cf23022399e3666c804e178"><div class="ttname"><a href="../../d2/d0d/message_8h.html#acf4073638cf23022399e3666c804e178">ast_msg_set_to</a></div><div class="ttdeci">int ast_msg_set_to(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the &amp;#39;to&amp;#39; URI of a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00454">message.c:454</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="message_8h_html_a6ddbc20e42c0631602984bc83506aaf2"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a6ddbc20e42c0631602984bc83506aaf2">ast_msg_get_to</a></div><div class="ttdeci">const char * ast_msg_get_to(const struct ast_msg *msg)</div><div class="ttdoc">Retrieve the destination of this message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00541">message.c:541</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="message_8h_html_ad11b71dc312056abfcd80727fba68fa6"><div class="ttname"><a href="../../d2/d0d/message_8h.html#ad11b71dc312056abfcd80727fba68fa6">ast_msg_var_unref_current</a></div><div class="ttdeci">void ast_msg_var_unref_current(struct ast_msg_var_iterator *iter)</div><div class="ttdoc">Unref a message var from inside an iterator loop. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00700">message.c:700</a></div></div>
<div class="ttc" id="message_8h_html_a926dc659d6f9d88782e9d0e463ba8c47"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a926dc659d6f9d88782e9d0e463ba8c47">ast_msg_set_var</a></div><div class="ttdeci">int ast_msg_set_var(struct ast_msg *msg, const char *name, const char *value)</div><div class="ttdoc">Set a variable on the message going to the dialplan. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00615">message.c:615</a></div></div>
<div class="ttc" id="message_8h_html_a393525170186b56f9e6bbcebb9968139"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a393525170186b56f9e6bbcebb9968139">ast_msg_get_from</a></div><div class="ttdeci">const char * ast_msg_get_from(const struct ast_msg *msg)</div><div class="ttdoc">Retrieve the source of this message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00536">message.c:536</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="message_8h_html_a02a688837f4e91ea078c0b1b48017ef8"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a02a688837f4e91ea078c0b1b48017ef8">ast_msg_set_from</a></div><div class="ttdeci">int ast_msg_set_from(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the &amp;#39;from&amp;#39; URI of a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00465">message.c:465</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="message_8h_html_a53573a834e1a26d67c26ba58a9ad8274"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a53573a834e1a26d67c26ba58a9ad8274">ast_msg_set_endpoint</a></div><div class="ttdeci">int ast_msg_set_endpoint(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the technology&amp;#39;s endpoint associated with this message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00520">message.c:520</a></div></div>
<div class="ttc" id="message_8h_html_ad5ca4649880cd7535b381354a6d7b042"><div class="ttname"><a href="../../d2/d0d/message_8h.html#ad5ca4649880cd7535b381354a6d7b042">ast_msg_set_var_outbound</a></div><div class="ttdeci">int ast_msg_set_var_outbound(struct ast_msg *msg, const char *name, const char *value)</div><div class="ttdoc">Set a variable on the message being sent to a message tech directly. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00610">message.c:610</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="structast__msg__var__iterator_html"><div class="ttname"><a href="../../d6/d23/structast__msg__var__iterator.html">ast_msg_var_iterator</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00639">message.c:639</a></div></div>
<div class="ttc" id="structast__msg_html"><div class="ttname"><a href="../../df/da1/structast__msg.html">ast_msg</a></div><div class="ttdoc">A message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00233">message.c:233</a></div></div>
<div class="ttc" id="test__message_8c_html_ae421ffca876f0e6028ce913872bfb785"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#ae421ffca876f0e6028ce913872bfb785">ast_msg_safe_destroy</a></div><div class="ttdeci">static void ast_msg_safe_destroy(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00365">test_message.c:365</a></div></div>
<div class="ttc" id="message_8h_html_a2903b6879e5710a6226825c1a0b84bd7"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a2903b6879e5710a6226825c1a0b84bd7">ast_msg_var_iterator_init</a></div><div class="ttdeci">struct ast_msg_var_iterator * ast_msg_var_iterator_init(const struct ast_msg *msg)</div><div class="ttdoc">Create a new message variable iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00644">message.c:644</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1c85cf1228f1d053319cee716049f39c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c85cf1228f1d053319cee716049f39c">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[4/9]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">test_message_queue_dialplan_nominal&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00465">465</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d6d/message_8c_source.html#l00418">ast_msg_alloc()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00958">ast_msg_queue()</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00365">ast_msg_safe_destroy()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00476">ast_msg_set_body()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00487">ast_msg_set_context()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00498">ast_msg_set_exten()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00465">ast_msg_set_from()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00454">ast_msg_set_to()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00610">ast_msg_set_var_outbound()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00949">ast_variable_list_append</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">ast_variable_new</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00284">AST_VECTOR_REPLACE</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00050">DEFAULT_EXPECTED_EVENTS</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00044">TEST_CATEGORY</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00046">TEST_CONTEXT</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00047">TEST_EXTENSION</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00251">user_event_wait_for_events()</a>, and <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00274">verify_bad_headers()</a>.</p>
<div class="fragment"><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;{</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *, msg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d9/d7a/test__message_8c.html#ae421ffca876f0e6028ce913872bfb785">ast_msg_safe_destroy</a>);</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *expected;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *expected_response = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../d9/d7a/test__message_8c.html#add35ea2349b86888eef95d404e6faebf">TEST_CATEGORY</a>;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test enqueueing messages to the dialplan&quot;</span>;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;         <span class="stringliteral">&quot;Test that a message enqueued for the dialplan is\n&quot;</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;         <span class="stringliteral">&quot;passed to that particular extension&quot;</span>;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;   }</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;   msg = <a class="code" href="../../d2/d0d/message_8h.html#a0e4685c7cf1d71204087b992110e6357">ast_msg_alloc</a>();</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, msg != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;   expected = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(<span class="stringliteral">&quot;Verify&quot;</span>,<span class="stringliteral">&quot;^To$&quot;</span>, __FILE__);</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a7af2e88e6e3812ec80facb1b41df43de">ast_variable_list_append</a>(&amp;expected_response, expected);</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;   expected = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(<span class="stringliteral">&quot;Value&quot;</span>,<span class="stringliteral">&quot;^foo$&quot;</span>, __FILE__);</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a7af2e88e6e3812ec80facb1b41df43de">ast_variable_list_append</a>(&amp;expected_response, expected);</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(&amp;expected_user_event_fields, 0, expected_response);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;   expected_response = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;   expected = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(<span class="stringliteral">&quot;Verify&quot;</span>, <span class="stringliteral">&quot;^From$&quot;</span>, __FILE__);</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a7af2e88e6e3812ec80facb1b41df43de">ast_variable_list_append</a>(&amp;expected_response, expected);</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;   expected = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(<span class="stringliteral">&quot;Value&quot;</span>,<span class="stringliteral">&quot;^bar$&quot;</span>, __FILE__);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a7af2e88e6e3812ec80facb1b41df43de">ast_variable_list_append</a>(&amp;expected_response, expected);</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(&amp;expected_user_event_fields, 1, expected_response);</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;   expected_response = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;   expected = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(<span class="stringliteral">&quot;Verify&quot;</span>, <span class="stringliteral">&quot;^Body$&quot;</span>, __FILE__);</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a7af2e88e6e3812ec80facb1b41df43de">ast_variable_list_append</a>(&amp;expected_response, expected);</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;   expected = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(<span class="stringliteral">&quot;Value&quot;</span>, <span class="stringliteral">&quot;^a body$&quot;</span>, __FILE__);</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a7af2e88e6e3812ec80facb1b41df43de">ast_variable_list_append</a>(&amp;expected_response, expected);</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(&amp;expected_user_event_fields, 2, expected_response);</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;   expected_response = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;   expected = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(<span class="stringliteral">&quot;Verify&quot;</span>, <span class="stringliteral">&quot;^Custom$&quot;</span>, __FILE__);</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a7af2e88e6e3812ec80facb1b41df43de">ast_variable_list_append</a>(&amp;expected_response, expected);</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;   expected = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(<span class="stringliteral">&quot;Value&quot;</span>, <span class="stringliteral">&quot;^field$&quot;</span>, __FILE__);</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a7af2e88e6e3812ec80facb1b41df43de">ast_variable_list_append</a>(&amp;expected_response, expected);</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(&amp;expected_user_event_fields, 3, expected_response);</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#acf4073638cf23022399e3666c804e178">ast_msg_set_to</a>(msg, <span class="stringliteral">&quot;foo&quot;</span>);</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#a02a688837f4e91ea078c0b1b48017ef8">ast_msg_set_from</a>(msg, <span class="stringliteral">&quot;bar&quot;</span>);</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#aa21f081993590c1410b287d717a92282">ast_msg_set_body</a>(msg, <span class="stringliteral">&quot;a body&quot;</span>);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#ad5ca4649880cd7535b381354a6d7b042">ast_msg_set_var_outbound</a>(msg, <span class="stringliteral">&quot;custom_data&quot;</span>, <span class="stringliteral">&quot;field&quot;</span>);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#a9e2045ad672c0afd5fb2616fec6bc666">ast_msg_set_context</a>(msg, <a class="code" href="../../d9/d7a/test__message_8c.html#ab8bcb9d3707a8934e7e925895847b0f6">TEST_CONTEXT</a>);</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#a71dd7465491023d1d7fd467f2920f2b8">ast_msg_set_exten</a>(msg, <a class="code" href="../../d9/d7a/test__message_8c.html#a1fcdae79eb8b5dba56f672c597d577ae">TEST_EXTENSION</a>);</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#adcb3fd70677c50be8626deec545a42c1">ast_msg_queue</a>(msg);</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;   msg = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d7a/test__message_8c.html#a6c0ef89c62e441edf745534432bbde29">user_event_wait_for_events</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d9/d7a/test__message_8c.html#aa011e5dd0a1f894f4cdc4276019643f9">DEFAULT_EXPECTED_EVENTS</a>)) {</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to received %d expected user events\n&quot;</span>, <a class="code" href="../../d9/d7a/test__message_8c.html#aa011e5dd0a1f894f4cdc4276019643f9">DEFAULT_EXPECTED_EVENTS</a>);</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;   }</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d7a/test__message_8c.html#a2157cd1e39b97bcd72a04b7fcc0bebdf">verify_bad_headers</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>)) {</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;   }</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;}</div><div class="ttc" id="test__message_8c_html_a1fcdae79eb8b5dba56f672c597d577ae"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a1fcdae79eb8b5dba56f672c597d577ae">TEST_EXTENSION</a></div><div class="ttdeci">#define TEST_EXTENSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00047">test_message.c:47</a></div></div>
<div class="ttc" id="message_8h_html_a9e2045ad672c0afd5fb2616fec6bc666"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a9e2045ad672c0afd5fb2616fec6bc666">ast_msg_set_context</a></div><div class="ttdeci">int ast_msg_set_context(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the dialplan context for this message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00487">message.c:487</a></div></div>
<div class="ttc" id="message_8h_html_aa21f081993590c1410b287d717a92282"><div class="ttname"><a href="../../d2/d0d/message_8h.html#aa21f081993590c1410b287d717a92282">ast_msg_set_body</a></div><div class="ttdeci">int ast_msg_set_body(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the &amp;#39;body&amp;#39; text of a message (in UTF-8) </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00476">message.c:476</a></div></div>
<div class="ttc" id="test__message_8c_html_a2157cd1e39b97bcd72a04b7fcc0bebdf"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a2157cd1e39b97bcd72a04b7fcc0bebdf">verify_bad_headers</a></div><div class="ttdeci">static int verify_bad_headers(struct ast_test *test)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00274">test_message.c:274</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="message_8h_html_a0e4685c7cf1d71204087b992110e6357"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a0e4685c7cf1d71204087b992110e6357">ast_msg_alloc</a></div><div class="ttdeci">struct ast_msg * ast_msg_alloc(void)</div><div class="ttdoc">Allocate a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00418">message.c:418</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test__message_8c_html_add35ea2349b86888eef95d404e6faebf"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#add35ea2349b86888eef95d404e6faebf">TEST_CATEGORY</a></div><div class="ttdeci">#define TEST_CATEGORY</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00044">test_message.c:44</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="message_8h_html_acf4073638cf23022399e3666c804e178"><div class="ttname"><a href="../../d2/d0d/message_8h.html#acf4073638cf23022399e3666c804e178">ast_msg_set_to</a></div><div class="ttdeci">int ast_msg_set_to(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the &amp;#39;to&amp;#39; URI of a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00454">message.c:454</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="test__message_8c_html_ab8bcb9d3707a8934e7e925895847b0f6"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#ab8bcb9d3707a8934e7e925895847b0f6">TEST_CONTEXT</a></div><div class="ttdeci">#define TEST_CONTEXT</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00046">test_message.c:46</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a66581086d34dfe7ea86b0644bacef239"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a></div><div class="ttdeci">#define ast_variable_new(name, value, filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">include/asterisk/config.h:914</a></div></div>
<div class="ttc" id="message_8h_html_adcb3fd70677c50be8626deec545a42c1"><div class="ttname"><a href="../../d2/d0d/message_8h.html#adcb3fd70677c50be8626deec545a42c1">ast_msg_queue</a></div><div class="ttdeci">int ast_msg_queue(struct ast_msg *msg)</div><div class="ttdoc">Queue a message for routing through the dialplan. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00958">message.c:958</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="message_8h_html_a71dd7465491023d1d7fd467f2920f2b8"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a71dd7465491023d1d7fd467f2920f2b8">ast_msg_set_exten</a></div><div class="ttdeci">int ast_msg_set_exten(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the dialplan extension for this message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00498">message.c:498</a></div></div>
<div class="ttc" id="test__message_8c_html_aa011e5dd0a1f894f4cdc4276019643f9"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#aa011e5dd0a1f894f4cdc4276019643f9">DEFAULT_EXPECTED_EVENTS</a></div><div class="ttdeci">#define DEFAULT_EXPECTED_EVENTS</div><div class="ttdoc">The number of user events we should get in a dialplan test. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00050">test_message.c:50</a></div></div>
<div class="ttc" id="message_8h_html_a02a688837f4e91ea078c0b1b48017ef8"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a02a688837f4e91ea078c0b1b48017ef8">ast_msg_set_from</a></div><div class="ttdeci">int ast_msg_set_from(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the &amp;#39;from&amp;#39; URI of a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00465">message.c:465</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="message_8h_html_ad5ca4649880cd7535b381354a6d7b042"><div class="ttname"><a href="../../d2/d0d/message_8h.html#ad5ca4649880cd7535b381354a6d7b042">ast_msg_set_var_outbound</a></div><div class="ttdeci">int ast_msg_set_var_outbound(struct ast_msg *msg, const char *name, const char *value)</div><div class="ttdoc">Set a variable on the message being sent to a message tech directly. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00610">message.c:610</a></div></div>
<div class="ttc" id="vector_8h_html_a0ae01511d65b3fa02bb10165a28f9581"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a></div><div class="ttdeci">#define AST_VECTOR_REPLACE(vec, idx, elem)</div><div class="ttdoc">Replace an element at a specific position in a vector, growing the vector if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00284">vector.h:284</a></div></div>
<div class="ttc" id="structast__msg_html"><div class="ttname"><a href="../../df/da1/structast__msg.html">ast_msg</a></div><div class="ttdoc">A message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00233">message.c:233</a></div></div>
<div class="ttc" id="test__message_8c_html_a6c0ef89c62e441edf745534432bbde29"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a6c0ef89c62e441edf745534432bbde29">user_event_wait_for_events</a></div><div class="ttdeci">static int user_event_wait_for_events(struct ast_test *test, int expected_events)</div><div class="ttdoc">Wait for the expected number of user events to be received. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00251">test_message.c:251</a></div></div>
<div class="ttc" id="test__message_8c_html_ae421ffca876f0e6028ce913872bfb785"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#ae421ffca876f0e6028ce913872bfb785">ast_msg_safe_destroy</a></div><div class="ttdeci">static void ast_msg_safe_destroy(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00365">test_message.c:365</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a7af2e88e6e3812ec80facb1b41df43de"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a7af2e88e6e3812ec80facb1b41df43de">ast_variable_list_append</a></div><div class="ttdeci">#define ast_variable_list_append(head, new_var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00949">include/asterisk/config.h:949</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="add0d01c35ee72be88a39e15d7e27bed7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add0d01c35ee72be88a39e15d7e27bed7">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[5/9]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">test_message_queue_handler_nominal&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00537">537</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d6d/message_8c_source.html#l00418">ast_msg_alloc()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l01629">ast_msg_handler_register()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l01671">ast_msg_handler_unregister()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00958">ast_msg_queue()</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00365">ast_msg_safe_destroy()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00476">ast_msg_set_body()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00465">ast_msg_set_from()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00454">ast_msg_set_to()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00230">handler_wait_for_message()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00044">TEST_CATEGORY</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;{</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *, msg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d9/d7a/test__message_8c.html#ae421ffca876f0e6028ce913872bfb785">ast_msg_safe_destroy</a>);</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../d9/d7a/test__message_8c.html#add35ea2349b86888eef95d404e6faebf">TEST_CATEGORY</a>;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test enqueueing messages to a handler&quot;</span>;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;         <span class="stringliteral">&quot;Test that a message enqueued can be handled by a\n&quot;</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;         <span class="stringliteral">&quot;non-dialplan handler&quot;</span>;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;   }</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;   msg = <a class="code" href="../../d2/d0d/message_8h.html#a0e4685c7cf1d71204087b992110e6357">ast_msg_alloc</a>();</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, msg != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;   result = <a class="code" href="../../d2/d0d/message_8h.html#a9b4a41f815fa2f37ed29ac32b3d5d3a3">ast_msg_handler_register</a>(&amp;<a class="code" href="../../d9/d7a/test__message_8c.html#a17ecaf929e68e60be317110c89a6b60b">test_msg_handler</a>);</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, result == 0);</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#acf4073638cf23022399e3666c804e178">ast_msg_set_to</a>(msg, <span class="stringliteral">&quot;foo&quot;</span>);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#a02a688837f4e91ea078c0b1b48017ef8">ast_msg_set_from</a>(msg, <span class="stringliteral">&quot;bar&quot;</span>);</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#aa21f081993590c1410b287d717a92282">ast_msg_set_body</a>(msg, <span class="stringliteral">&quot;a body&quot;</span>);</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#adcb3fd70677c50be8626deec545a42c1">ast_msg_queue</a>(msg);</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;   msg = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;   <span class="comment">/* This will automatically fail the test if we don&#39;t get the message */</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;   <a class="code" href="../../d9/d7a/test__message_8c.html#a76a8c4590f94ab1e2a89fb0e7a241a33">handler_wait_for_message</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;   result = <a class="code" href="../../d2/d0d/message_8h.html#a35344e60cbd464b87c57fc74d072e255">ast_msg_handler_unregister</a>(&amp;<a class="code" href="../../d9/d7a/test__message_8c.html#a17ecaf929e68e60be317110c89a6b60b">test_msg_handler</a>);</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, result == 0);</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;}</div><div class="ttc" id="message_8h_html_a35344e60cbd464b87c57fc74d072e255"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a35344e60cbd464b87c57fc74d072e255">ast_msg_handler_unregister</a></div><div class="ttdeci">int ast_msg_handler_unregister(const struct ast_msg_handler *handler)</div><div class="ttdoc">Unregister a ast_msg_handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01671">message.c:1671</a></div></div>
<div class="ttc" id="message_8h_html_aa21f081993590c1410b287d717a92282"><div class="ttname"><a href="../../d2/d0d/message_8h.html#aa21f081993590c1410b287d717a92282">ast_msg_set_body</a></div><div class="ttdeci">int ast_msg_set_body(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the &amp;#39;body&amp;#39; text of a message (in UTF-8) </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00476">message.c:476</a></div></div>
<div class="ttc" id="message_8h_html_a9b4a41f815fa2f37ed29ac32b3d5d3a3"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a9b4a41f815fa2f37ed29ac32b3d5d3a3">ast_msg_handler_register</a></div><div class="ttdeci">int ast_msg_handler_register(const struct ast_msg_handler *handler)</div><div class="ttdoc">Register a ast_msg_handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01629">message.c:1629</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="message_8h_html_a0e4685c7cf1d71204087b992110e6357"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a0e4685c7cf1d71204087b992110e6357">ast_msg_alloc</a></div><div class="ttdeci">struct ast_msg * ast_msg_alloc(void)</div><div class="ttdoc">Allocate a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00418">message.c:418</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test__message_8c_html_add35ea2349b86888eef95d404e6faebf"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#add35ea2349b86888eef95d404e6faebf">TEST_CATEGORY</a></div><div class="ttdeci">#define TEST_CATEGORY</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00044">test_message.c:44</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="message_8h_html_acf4073638cf23022399e3666c804e178"><div class="ttname"><a href="../../d2/d0d/message_8h.html#acf4073638cf23022399e3666c804e178">ast_msg_set_to</a></div><div class="ttdeci">int ast_msg_set_to(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the &amp;#39;to&amp;#39; URI of a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00454">message.c:454</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="message_8h_html_adcb3fd70677c50be8626deec545a42c1"><div class="ttname"><a href="../../d2/d0d/message_8h.html#adcb3fd70677c50be8626deec545a42c1">ast_msg_queue</a></div><div class="ttdeci">int ast_msg_queue(struct ast_msg *msg)</div><div class="ttdoc">Queue a message for routing through the dialplan. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00958">message.c:958</a></div></div>
<div class="ttc" id="test__message_8c_html_a17ecaf929e68e60be317110c89a6b60b"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a17ecaf929e68e60be317110c89a6b60b">test_msg_handler</a></div><div class="ttdeci">static struct ast_msg_handler test_msg_handler</div><div class="ttdoc">Our test message handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00090">test_message.c:90</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="test__message_8c_html_a76a8c4590f94ab1e2a89fb0e7a241a33"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a76a8c4590f94ab1e2a89fb0e7a241a33">handler_wait_for_message</a></div><div class="ttdeci">static int handler_wait_for_message(struct ast_test *test)</div><div class="ttdoc">Wait for the test_msg_handler to receive the message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00230">test_message.c:230</a></div></div>
<div class="ttc" id="message_8h_html_a02a688837f4e91ea078c0b1b48017ef8"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a02a688837f4e91ea078c0b1b48017ef8">ast_msg_set_from</a></div><div class="ttdeci">int ast_msg_set_from(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the &amp;#39;from&amp;#39; URI of a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00465">message.c:465</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="structast__msg_html"><div class="ttname"><a href="../../df/da1/structast__msg.html">ast_msg</a></div><div class="ttdoc">A message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00233">message.c:233</a></div></div>
<div class="ttc" id="test__message_8c_html_ae421ffca876f0e6028ce913872bfb785"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#ae421ffca876f0e6028ce913872bfb785">ast_msg_safe_destroy</a></div><div class="ttdeci">static void ast_msg_safe_destroy(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00365">test_message.c:365</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a610decb220f6147a87d8bc6ef6234eeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a610decb220f6147a87d8bc6ef6234eeb">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[6/9]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">test_message_queue_both_nominal&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00577">577</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d6d/message_8c_source.html#l00418">ast_msg_alloc()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l01629">ast_msg_handler_register()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l01671">ast_msg_handler_unregister()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00958">ast_msg_queue()</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00365">ast_msg_safe_destroy()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00476">ast_msg_set_body()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00487">ast_msg_set_context()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00498">ast_msg_set_exten()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00465">ast_msg_set_from()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00454">ast_msg_set_to()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d8/db9/test_8c_source.html#l00262">ast_test_set_result()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00949">ast_variable_list_append</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">ast_variable_new</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00284">AST_VECTOR_REPLACE</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00050">DEFAULT_EXPECTED_EVENTS</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00230">handler_wait_for_message()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00044">TEST_CATEGORY</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00046">TEST_CONTEXT</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00047">TEST_EXTENSION</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00251">user_event_wait_for_events()</a>, and <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00274">verify_bad_headers()</a>.</p>
<div class="fragment"><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;{</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *, msg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d9/d7a/test__message_8c.html#ae421ffca876f0e6028ce913872bfb785">ast_msg_safe_destroy</a>);</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *expected;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *expected_response = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../d9/d7a/test__message_8c.html#add35ea2349b86888eef95d404e6faebf">TEST_CATEGORY</a>;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test enqueueing messages to a dialplan and custom handler&quot;</span>;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;         <span class="stringliteral">&quot;Test that a message enqueued is passed to all\n&quot;</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;         <span class="stringliteral">&quot;handlers that can process it, dialplan as well as\n&quot;</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;         <span class="stringliteral">&quot;a custom handler&quot;</span>;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;   }</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;   msg = <a class="code" href="../../d2/d0d/message_8h.html#a0e4685c7cf1d71204087b992110e6357">ast_msg_alloc</a>();</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, msg != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;   result = <a class="code" href="../../d2/d0d/message_8h.html#a9b4a41f815fa2f37ed29ac32b3d5d3a3">ast_msg_handler_register</a>(&amp;<a class="code" href="../../d9/d7a/test__message_8c.html#a17ecaf929e68e60be317110c89a6b60b">test_msg_handler</a>);</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, result == 0);</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;   expected = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(<span class="stringliteral">&quot;Verify&quot;</span>,<span class="stringliteral">&quot;^To$&quot;</span>, __FILE__);</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a7af2e88e6e3812ec80facb1b41df43de">ast_variable_list_append</a>(&amp;expected_response, expected);</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;   expected = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(<span class="stringliteral">&quot;Value&quot;</span>,<span class="stringliteral">&quot;^foo$&quot;</span>, __FILE__);</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a7af2e88e6e3812ec80facb1b41df43de">ast_variable_list_append</a>(&amp;expected_response, expected);</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(&amp;expected_user_event_fields, 0, expected_response);</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;   expected_response = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;   expected = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(<span class="stringliteral">&quot;Verify&quot;</span>, <span class="stringliteral">&quot;^From$&quot;</span>, __FILE__);</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a7af2e88e6e3812ec80facb1b41df43de">ast_variable_list_append</a>(&amp;expected_response, expected);</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;   expected = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(<span class="stringliteral">&quot;Value&quot;</span>,<span class="stringliteral">&quot;^bar$&quot;</span>, __FILE__);</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a7af2e88e6e3812ec80facb1b41df43de">ast_variable_list_append</a>(&amp;expected_response, expected);</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(&amp;expected_user_event_fields, 1, expected_response);</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;   expected_response = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;   expected = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(<span class="stringliteral">&quot;Verify&quot;</span>, <span class="stringliteral">&quot;^Body$&quot;</span>, __FILE__);</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a7af2e88e6e3812ec80facb1b41df43de">ast_variable_list_append</a>(&amp;expected_response, expected);</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;   expected = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(<span class="stringliteral">&quot;Value&quot;</span>, <span class="stringliteral">&quot;^a body$&quot;</span>, __FILE__);</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a7af2e88e6e3812ec80facb1b41df43de">ast_variable_list_append</a>(&amp;expected_response, expected);</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(&amp;expected_user_event_fields, 2, expected_response);</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#acf4073638cf23022399e3666c804e178">ast_msg_set_to</a>(msg, <span class="stringliteral">&quot;foo&quot;</span>);</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#a02a688837f4e91ea078c0b1b48017ef8">ast_msg_set_from</a>(msg, <span class="stringliteral">&quot;bar&quot;</span>);</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#aa21f081993590c1410b287d717a92282">ast_msg_set_body</a>(msg, <span class="stringliteral">&quot;a body&quot;</span>);</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#a9e2045ad672c0afd5fb2616fec6bc666">ast_msg_set_context</a>(msg, <a class="code" href="../../d9/d7a/test__message_8c.html#ab8bcb9d3707a8934e7e925895847b0f6">TEST_CONTEXT</a>);</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#a71dd7465491023d1d7fd467f2920f2b8">ast_msg_set_exten</a>(msg, <a class="code" href="../../d9/d7a/test__message_8c.html#a1fcdae79eb8b5dba56f672c597d577ae">TEST_EXTENSION</a>);</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#adcb3fd70677c50be8626deec545a42c1">ast_msg_queue</a>(msg);</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;   msg = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d7a/test__message_8c.html#a6c0ef89c62e441edf745534432bbde29">user_event_wait_for_events</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d9/d7a/test__message_8c.html#aa011e5dd0a1f894f4cdc4276019643f9">DEFAULT_EXPECTED_EVENTS</a>)) {</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to received %d expected user events\n&quot;</span>, <a class="code" href="../../d9/d7a/test__message_8c.html#aa011e5dd0a1f894f4cdc4276019643f9">DEFAULT_EXPECTED_EVENTS</a>);</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;      <a class="code" href="../../d8/db9/test_8c.html#a8f04d5dd30d1d1cbe253ca28026d18c3">ast_test_set_result</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;   }</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;   <span class="comment">/* This will automatically fail the test if we don&#39;t get the message */</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;   <a class="code" href="../../d9/d7a/test__message_8c.html#a76a8c4590f94ab1e2a89fb0e7a241a33">handler_wait_for_message</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>);</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;   result = <a class="code" href="../../d2/d0d/message_8h.html#a35344e60cbd464b87c57fc74d072e255">ast_msg_handler_unregister</a>(&amp;<a class="code" href="../../d9/d7a/test__message_8c.html#a17ecaf929e68e60be317110c89a6b60b">test_msg_handler</a>);</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, result == 0);</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d7a/test__message_8c.html#a2157cd1e39b97bcd72a04b7fcc0bebdf">verify_bad_headers</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>)) {</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;   }</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;}</div><div class="ttc" id="message_8h_html_a35344e60cbd464b87c57fc74d072e255"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a35344e60cbd464b87c57fc74d072e255">ast_msg_handler_unregister</a></div><div class="ttdeci">int ast_msg_handler_unregister(const struct ast_msg_handler *handler)</div><div class="ttdoc">Unregister a ast_msg_handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01671">message.c:1671</a></div></div>
<div class="ttc" id="test__message_8c_html_a1fcdae79eb8b5dba56f672c597d577ae"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a1fcdae79eb8b5dba56f672c597d577ae">TEST_EXTENSION</a></div><div class="ttdeci">#define TEST_EXTENSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00047">test_message.c:47</a></div></div>
<div class="ttc" id="message_8h_html_a9e2045ad672c0afd5fb2616fec6bc666"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a9e2045ad672c0afd5fb2616fec6bc666">ast_msg_set_context</a></div><div class="ttdeci">int ast_msg_set_context(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the dialplan context for this message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00487">message.c:487</a></div></div>
<div class="ttc" id="message_8h_html_aa21f081993590c1410b287d717a92282"><div class="ttname"><a href="../../d2/d0d/message_8h.html#aa21f081993590c1410b287d717a92282">ast_msg_set_body</a></div><div class="ttdeci">int ast_msg_set_body(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the &amp;#39;body&amp;#39; text of a message (in UTF-8) </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00476">message.c:476</a></div></div>
<div class="ttc" id="test__message_8c_html_a2157cd1e39b97bcd72a04b7fcc0bebdf"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a2157cd1e39b97bcd72a04b7fcc0bebdf">verify_bad_headers</a></div><div class="ttdeci">static int verify_bad_headers(struct ast_test *test)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00274">test_message.c:274</a></div></div>
<div class="ttc" id="message_8h_html_a9b4a41f815fa2f37ed29ac32b3d5d3a3"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a9b4a41f815fa2f37ed29ac32b3d5d3a3">ast_msg_handler_register</a></div><div class="ttdeci">int ast_msg_handler_register(const struct ast_msg_handler *handler)</div><div class="ttdoc">Register a ast_msg_handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01629">message.c:1629</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="message_8h_html_a0e4685c7cf1d71204087b992110e6357"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a0e4685c7cf1d71204087b992110e6357">ast_msg_alloc</a></div><div class="ttdeci">struct ast_msg * ast_msg_alloc(void)</div><div class="ttdoc">Allocate a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00418">message.c:418</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test__message_8c_html_add35ea2349b86888eef95d404e6faebf"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#add35ea2349b86888eef95d404e6faebf">TEST_CATEGORY</a></div><div class="ttdeci">#define TEST_CATEGORY</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00044">test_message.c:44</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="message_8h_html_acf4073638cf23022399e3666c804e178"><div class="ttname"><a href="../../d2/d0d/message_8h.html#acf4073638cf23022399e3666c804e178">ast_msg_set_to</a></div><div class="ttdeci">int ast_msg_set_to(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the &amp;#39;to&amp;#39; URI of a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00454">message.c:454</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="test__message_8c_html_ab8bcb9d3707a8934e7e925895847b0f6"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#ab8bcb9d3707a8934e7e925895847b0f6">TEST_CONTEXT</a></div><div class="ttdeci">#define TEST_CONTEXT</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00046">test_message.c:46</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a66581086d34dfe7ea86b0644bacef239"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a></div><div class="ttdeci">#define ast_variable_new(name, value, filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">include/asterisk/config.h:914</a></div></div>
<div class="ttc" id="message_8h_html_adcb3fd70677c50be8626deec545a42c1"><div class="ttname"><a href="../../d2/d0d/message_8h.html#adcb3fd70677c50be8626deec545a42c1">ast_msg_queue</a></div><div class="ttdeci">int ast_msg_queue(struct ast_msg *msg)</div><div class="ttdoc">Queue a message for routing through the dialplan. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00958">message.c:958</a></div></div>
<div class="ttc" id="test__message_8c_html_a17ecaf929e68e60be317110c89a6b60b"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a17ecaf929e68e60be317110c89a6b60b">test_msg_handler</a></div><div class="ttdeci">static struct ast_msg_handler test_msg_handler</div><div class="ttdoc">Our test message handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00090">test_message.c:90</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="test_8c_html_a8f04d5dd30d1d1cbe253ca28026d18c3"><div class="ttname"><a href="../../d8/db9/test_8c.html#a8f04d5dd30d1d1cbe253ca28026d18c3">ast_test_set_result</a></div><div class="ttdeci">void ast_test_set_result(struct ast_test *test, enum ast_test_result_state state)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/db9/test_8c_source.html#l00262">test.c:262</a></div></div>
<div class="ttc" id="test__message_8c_html_a76a8c4590f94ab1e2a89fb0e7a241a33"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a76a8c4590f94ab1e2a89fb0e7a241a33">handler_wait_for_message</a></div><div class="ttdeci">static int handler_wait_for_message(struct ast_test *test)</div><div class="ttdoc">Wait for the test_msg_handler to receive the message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00230">test_message.c:230</a></div></div>
<div class="ttc" id="message_8h_html_a71dd7465491023d1d7fd467f2920f2b8"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a71dd7465491023d1d7fd467f2920f2b8">ast_msg_set_exten</a></div><div class="ttdeci">int ast_msg_set_exten(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the dialplan extension for this message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00498">message.c:498</a></div></div>
<div class="ttc" id="test__message_8c_html_aa011e5dd0a1f894f4cdc4276019643f9"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#aa011e5dd0a1f894f4cdc4276019643f9">DEFAULT_EXPECTED_EVENTS</a></div><div class="ttdeci">#define DEFAULT_EXPECTED_EVENTS</div><div class="ttdoc">The number of user events we should get in a dialplan test. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00050">test_message.c:50</a></div></div>
<div class="ttc" id="message_8h_html_a02a688837f4e91ea078c0b1b48017ef8"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a02a688837f4e91ea078c0b1b48017ef8">ast_msg_set_from</a></div><div class="ttdeci">int ast_msg_set_from(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the &amp;#39;from&amp;#39; URI of a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00465">message.c:465</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="vector_8h_html_a0ae01511d65b3fa02bb10165a28f9581"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a></div><div class="ttdeci">#define AST_VECTOR_REPLACE(vec, idx, elem)</div><div class="ttdoc">Replace an element at a specific position in a vector, growing the vector if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00284">vector.h:284</a></div></div>
<div class="ttc" id="structast__msg_html"><div class="ttname"><a href="../../df/da1/structast__msg.html">ast_msg</a></div><div class="ttdoc">A message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00233">message.c:233</a></div></div>
<div class="ttc" id="test__message_8c_html_a6c0ef89c62e441edf745534432bbde29"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a6c0ef89c62e441edf745534432bbde29">user_event_wait_for_events</a></div><div class="ttdeci">static int user_event_wait_for_events(struct ast_test *test, int expected_events)</div><div class="ttdoc">Wait for the expected number of user events to be received. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00251">test_message.c:251</a></div></div>
<div class="ttc" id="test__message_8c_html_ae421ffca876f0e6028ce913872bfb785"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#ae421ffca876f0e6028ce913872bfb785">ast_msg_safe_destroy</a></div><div class="ttdeci">static void ast_msg_safe_destroy(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00365">test_message.c:365</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a7af2e88e6e3812ec80facb1b41df43de"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a7af2e88e6e3812ec80facb1b41df43de">ast_variable_list_append</a></div><div class="ttdeci">#define ast_variable_list_append(head, new_var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00949">include/asterisk/config.h:949</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aef2bf91712288a03a3b89cec5ac0bf91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef2bf91712288a03a3b89cec5ac0bf91">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[7/9]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">test_message_has_destination_dialplan&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00652">652</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d6d/message_8c_source.html#l00418">ast_msg_alloc()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00937">ast_msg_has_destination()</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00365">ast_msg_safe_destroy()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00487">ast_msg_set_context()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00498">ast_msg_set_exten()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00044">TEST_CATEGORY</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00046">TEST_CONTEXT</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00047">TEST_EXTENSION</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;{</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *, msg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d9/d7a/test__message_8c.html#ae421ffca876f0e6028ce913872bfb785">ast_msg_safe_destroy</a>);</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../d9/d7a/test__message_8c.html#add35ea2349b86888eef95d404e6faebf">TEST_CATEGORY</a>;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test checking for a dialplan destination&quot;</span>;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;         <span class="stringliteral">&quot;Test that a message&#39;s destination is verified via the\n&quot;</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;         <span class="stringliteral">&quot;dialplan&quot;</span>;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;   }</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;   msg = <a class="code" href="../../d2/d0d/message_8h.html#a0e4685c7cf1d71204087b992110e6357">ast_msg_alloc</a>();</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, msg != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#a9e2045ad672c0afd5fb2616fec6bc666">ast_msg_set_context</a>(msg, <a class="code" href="../../d9/d7a/test__message_8c.html#ab8bcb9d3707a8934e7e925895847b0f6">TEST_CONTEXT</a>);</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#a71dd7465491023d1d7fd467f2920f2b8">ast_msg_set_exten</a>(msg, <a class="code" href="../../d9/d7a/test__message_8c.html#a1fcdae79eb8b5dba56f672c597d577ae">TEST_EXTENSION</a>);</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d2/d0d/message_8h.html#a76b4f941b1f576c4373ff2251aeb919d">ast_msg_has_destination</a>(msg) == 1);</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#a9e2045ad672c0afd5fb2616fec6bc666">ast_msg_set_context</a>(msg, <span class="stringliteral">&quot;__I_SHOULD_NOT_EXIST_PLZ__&quot;</span>);</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d2/d0d/message_8h.html#a76b4f941b1f576c4373ff2251aeb919d">ast_msg_has_destination</a>(msg) == 0);</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#a9e2045ad672c0afd5fb2616fec6bc666">ast_msg_set_context</a>(msg, <a class="code" href="../../d9/d7a/test__message_8c.html#ab8bcb9d3707a8934e7e925895847b0f6">TEST_CONTEXT</a>);</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#a71dd7465491023d1d7fd467f2920f2b8">ast_msg_set_exten</a>(msg, <span class="stringliteral">&quot;__I_SHOULD_NOT_EXIST_PLZ__&quot;</span>);</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d2/d0d/message_8h.html#a76b4f941b1f576c4373ff2251aeb919d">ast_msg_has_destination</a>(msg) == 0);</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#a71dd7465491023d1d7fd467f2920f2b8">ast_msg_set_exten</a>(msg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d2/d0d/message_8h.html#a76b4f941b1f576c4373ff2251aeb919d">ast_msg_has_destination</a>(msg) == 0);</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#a9e2045ad672c0afd5fb2616fec6bc666">ast_msg_set_context</a>(msg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#a71dd7465491023d1d7fd467f2920f2b8">ast_msg_set_exten</a>(msg, <a class="code" href="../../d9/d7a/test__message_8c.html#a1fcdae79eb8b5dba56f672c597d577ae">TEST_EXTENSION</a>);</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d2/d0d/message_8h.html#a76b4f941b1f576c4373ff2251aeb919d">ast_msg_has_destination</a>(msg) == 0);</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;}</div><div class="ttc" id="test__message_8c_html_a1fcdae79eb8b5dba56f672c597d577ae"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a1fcdae79eb8b5dba56f672c597d577ae">TEST_EXTENSION</a></div><div class="ttdeci">#define TEST_EXTENSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00047">test_message.c:47</a></div></div>
<div class="ttc" id="message_8h_html_a9e2045ad672c0afd5fb2616fec6bc666"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a9e2045ad672c0afd5fb2616fec6bc666">ast_msg_set_context</a></div><div class="ttdeci">int ast_msg_set_context(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the dialplan context for this message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00487">message.c:487</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="message_8h_html_a0e4685c7cf1d71204087b992110e6357"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a0e4685c7cf1d71204087b992110e6357">ast_msg_alloc</a></div><div class="ttdeci">struct ast_msg * ast_msg_alloc(void)</div><div class="ttdoc">Allocate a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00418">message.c:418</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test__message_8c_html_add35ea2349b86888eef95d404e6faebf"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#add35ea2349b86888eef95d404e6faebf">TEST_CATEGORY</a></div><div class="ttdeci">#define TEST_CATEGORY</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00044">test_message.c:44</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="test__message_8c_html_ab8bcb9d3707a8934e7e925895847b0f6"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#ab8bcb9d3707a8934e7e925895847b0f6">TEST_CONTEXT</a></div><div class="ttdeci">#define TEST_CONTEXT</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00046">test_message.c:46</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="message_8h_html_a71dd7465491023d1d7fd467f2920f2b8"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a71dd7465491023d1d7fd467f2920f2b8">ast_msg_set_exten</a></div><div class="ttdeci">int ast_msg_set_exten(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the dialplan extension for this message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00498">message.c:498</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="message_8h_html_a76b4f941b1f576c4373ff2251aeb919d"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a76b4f941b1f576c4373ff2251aeb919d">ast_msg_has_destination</a></div><div class="ttdeci">int ast_msg_has_destination(const struct ast_msg *msg)</div><div class="ttdoc">Determine if a particular message has a destination via some handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00937">message.c:937</a></div></div>
<div class="ttc" id="structast__msg_html"><div class="ttname"><a href="../../df/da1/structast__msg.html">ast_msg</a></div><div class="ttdoc">A message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00233">message.c:233</a></div></div>
<div class="ttc" id="test__message_8c_html_ae421ffca876f0e6028ce913872bfb785"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#ae421ffca876f0e6028ce913872bfb785">ast_msg_safe_destroy</a></div><div class="ttdeci">static void ast_msg_safe_destroy(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00365">test_message.c:365</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0260fb2a3a02635d15b498dffd31b23f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0260fb2a3a02635d15b498dffd31b23f">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[8/9]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">test_message_has_destination_handler&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00693">693</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d6d/message_8c_source.html#l00418">ast_msg_alloc()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l01629">ast_msg_handler_register()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l01671">ast_msg_handler_unregister()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00937">ast_msg_has_destination()</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00365">ast_msg_safe_destroy()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00487">ast_msg_set_context()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00498">ast_msg_set_exten()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00454">ast_msg_set_to()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00044">TEST_CATEGORY</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00046">TEST_CONTEXT</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;{</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *, msg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d9/d7a/test__message_8c.html#ae421ffca876f0e6028ce913872bfb785">ast_msg_safe_destroy</a>);</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../d9/d7a/test__message_8c.html#add35ea2349b86888eef95d404e6faebf">TEST_CATEGORY</a>;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test checking for a handler destination&quot;</span>;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;         <span class="stringliteral">&quot;Test that a message&#39;s destination is verified via a\n&quot;</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;         <span class="stringliteral">&quot;handler&quot;</span>;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;   }</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;   result = <a class="code" href="../../d2/d0d/message_8h.html#a9b4a41f815fa2f37ed29ac32b3d5d3a3">ast_msg_handler_register</a>(&amp;<a class="code" href="../../d9/d7a/test__message_8c.html#a17ecaf929e68e60be317110c89a6b60b">test_msg_handler</a>);</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, result == 0);</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;   msg = <a class="code" href="../../d2/d0d/message_8h.html#a0e4685c7cf1d71204087b992110e6357">ast_msg_alloc</a>();</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, msg != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#acf4073638cf23022399e3666c804e178">ast_msg_set_to</a>(msg, <span class="stringliteral">&quot;foo&quot;</span>);</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#a9e2045ad672c0afd5fb2616fec6bc666">ast_msg_set_context</a>(msg, <a class="code" href="../../d9/d7a/test__message_8c.html#ab8bcb9d3707a8934e7e925895847b0f6">TEST_CONTEXT</a>);</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#a71dd7465491023d1d7fd467f2920f2b8">ast_msg_set_exten</a>(msg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d2/d0d/message_8h.html#a76b4f941b1f576c4373ff2251aeb919d">ast_msg_has_destination</a>(msg) == 1);</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#a9e2045ad672c0afd5fb2616fec6bc666">ast_msg_set_context</a>(msg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d2/d0d/message_8h.html#a76b4f941b1f576c4373ff2251aeb919d">ast_msg_has_destination</a>(msg) == 1);</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#acf4073638cf23022399e3666c804e178">ast_msg_set_to</a>(msg, <span class="stringliteral">&quot;__I_SHOULD_NOT_EXIST_PLZ__&quot;</span>);</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d2/d0d/message_8h.html#a76b4f941b1f576c4373ff2251aeb919d">ast_msg_has_destination</a>(msg) == 0);</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;   result = <a class="code" href="../../d2/d0d/message_8h.html#a35344e60cbd464b87c57fc74d072e255">ast_msg_handler_unregister</a>(&amp;<a class="code" href="../../d9/d7a/test__message_8c.html#a17ecaf929e68e60be317110c89a6b60b">test_msg_handler</a>);</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, result == 0);</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;}</div><div class="ttc" id="message_8h_html_a35344e60cbd464b87c57fc74d072e255"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a35344e60cbd464b87c57fc74d072e255">ast_msg_handler_unregister</a></div><div class="ttdeci">int ast_msg_handler_unregister(const struct ast_msg_handler *handler)</div><div class="ttdoc">Unregister a ast_msg_handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01671">message.c:1671</a></div></div>
<div class="ttc" id="message_8h_html_a9e2045ad672c0afd5fb2616fec6bc666"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a9e2045ad672c0afd5fb2616fec6bc666">ast_msg_set_context</a></div><div class="ttdeci">int ast_msg_set_context(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the dialplan context for this message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00487">message.c:487</a></div></div>
<div class="ttc" id="message_8h_html_a9b4a41f815fa2f37ed29ac32b3d5d3a3"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a9b4a41f815fa2f37ed29ac32b3d5d3a3">ast_msg_handler_register</a></div><div class="ttdeci">int ast_msg_handler_register(const struct ast_msg_handler *handler)</div><div class="ttdoc">Register a ast_msg_handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01629">message.c:1629</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="message_8h_html_a0e4685c7cf1d71204087b992110e6357"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a0e4685c7cf1d71204087b992110e6357">ast_msg_alloc</a></div><div class="ttdeci">struct ast_msg * ast_msg_alloc(void)</div><div class="ttdoc">Allocate a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00418">message.c:418</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test__message_8c_html_add35ea2349b86888eef95d404e6faebf"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#add35ea2349b86888eef95d404e6faebf">TEST_CATEGORY</a></div><div class="ttdeci">#define TEST_CATEGORY</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00044">test_message.c:44</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="message_8h_html_acf4073638cf23022399e3666c804e178"><div class="ttname"><a href="../../d2/d0d/message_8h.html#acf4073638cf23022399e3666c804e178">ast_msg_set_to</a></div><div class="ttdeci">int ast_msg_set_to(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the &amp;#39;to&amp;#39; URI of a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00454">message.c:454</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="test__message_8c_html_ab8bcb9d3707a8934e7e925895847b0f6"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#ab8bcb9d3707a8934e7e925895847b0f6">TEST_CONTEXT</a></div><div class="ttdeci">#define TEST_CONTEXT</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00046">test_message.c:46</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="test__message_8c_html_a17ecaf929e68e60be317110c89a6b60b"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a17ecaf929e68e60be317110c89a6b60b">test_msg_handler</a></div><div class="ttdeci">static struct ast_msg_handler test_msg_handler</div><div class="ttdoc">Our test message handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00090">test_message.c:90</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="message_8h_html_a71dd7465491023d1d7fd467f2920f2b8"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a71dd7465491023d1d7fd467f2920f2b8">ast_msg_set_exten</a></div><div class="ttdeci">int ast_msg_set_exten(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the dialplan extension for this message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00498">message.c:498</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="message_8h_html_a76b4f941b1f576c4373ff2251aeb919d"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a76b4f941b1f576c4373ff2251aeb919d">ast_msg_has_destination</a></div><div class="ttdeci">int ast_msg_has_destination(const struct ast_msg *msg)</div><div class="ttdoc">Determine if a particular message has a destination via some handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00937">message.c:937</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="structast__msg_html"><div class="ttname"><a href="../../df/da1/structast__msg.html">ast_msg</a></div><div class="ttdoc">A message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00233">message.c:233</a></div></div>
<div class="ttc" id="test__message_8c_html_ae421ffca876f0e6028ce913872bfb785"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#ae421ffca876f0e6028ce913872bfb785">ast_msg_safe_destroy</a></div><div class="ttdeci">static void ast_msg_safe_destroy(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00365">test_message.c:365</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a238dbcb0f953849f45661be55a451049"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a238dbcb0f953849f45661be55a451049">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[9/9]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">test_message_msg_send&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00734">734</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d6d/message_8c_source.html#l00418">ast_msg_alloc()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l01629">ast_msg_handler_register()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l01671">ast_msg_handler_unregister()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00937">ast_msg_has_destination()</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00365">ast_msg_safe_destroy()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l01369">ast_msg_send()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00487">ast_msg_set_context()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00498">ast_msg_set_exten()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l00454">ast_msg_set_to()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l01569">ast_msg_tech_register()</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l01610">ast_msg_tech_unregister()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d8/db9/test_8c_source.html#l00262">ast_test_set_result()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00044">TEST_CATEGORY</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00046">TEST_CONTEXT</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;{</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/da1/structast__msg.html">ast_msg</a> *, msg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d9/d7a/test__message_8c.html#ae421ffca876f0e6028ce913872bfb785">ast_msg_safe_destroy</a>);</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../d9/d7a/test__message_8c.html#add35ea2349b86888eef95d404e6faebf">TEST_CATEGORY</a>;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test message routing&quot;</span>;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;         <span class="stringliteral">&quot;Test that a message can be routed if it has\n&quot;</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;         <span class="stringliteral">&quot;a valid handler&quot;</span>;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;   }</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d2/d0d/message_8h.html#a98ae66acbd6268c5010acf52be7e40a4">ast_msg_tech_register</a>(&amp;test_msg_tech) == 0);</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d2/d0d/message_8h.html#a9b4a41f815fa2f37ed29ac32b3d5d3a3">ast_msg_handler_register</a>(&amp;<a class="code" href="../../d9/d7a/test__message_8c.html#a17ecaf929e68e60be317110c89a6b60b">test_msg_handler</a>) == 0);</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;   msg = <a class="code" href="../../d2/d0d/message_8h.html#a0e4685c7cf1d71204087b992110e6357">ast_msg_alloc</a>();</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, msg != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#acf4073638cf23022399e3666c804e178">ast_msg_set_to</a>(msg, <span class="stringliteral">&quot;foo&quot;</span>);</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#a9e2045ad672c0afd5fb2616fec6bc666">ast_msg_set_context</a>(msg, <a class="code" href="../../d9/d7a/test__message_8c.html#ab8bcb9d3707a8934e7e925895847b0f6">TEST_CONTEXT</a>);</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;   <a class="code" href="../../d2/d0d/message_8h.html#a71dd7465491023d1d7fd467f2920f2b8">ast_msg_set_exten</a>(msg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d2/d0d/message_8h.html#a76b4f941b1f576c4373ff2251aeb919d">ast_msg_has_destination</a>(msg) == 1);</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d0d/message_8h.html#a156e69ed5bb6764a00bece684013d3cb">ast_msg_send</a>(msg, <span class="stringliteral">&quot;testmsg:foo&quot;</span>, <span class="stringliteral">&quot;blah&quot;</span>)) {</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      msg = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to send message\n&quot;</span>);</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      <a class="code" href="../../d8/db9/test_8c.html#a8f04d5dd30d1d1cbe253ca28026d18c3">ast_test_set_result</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>);</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;   }</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d2/d0d/message_8h.html#a35344e60cbd464b87c57fc74d072e255">ast_msg_handler_unregister</a>(&amp;<a class="code" href="../../d9/d7a/test__message_8c.html#a17ecaf929e68e60be317110c89a6b60b">test_msg_handler</a>) == 0);</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, <a class="code" href="../../d2/d0d/message_8h.html#a8a1ffcfecf1ffbc22c526796cdf954a7">ast_msg_tech_unregister</a>(&amp;test_msg_tech) == 0);</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;}</div><div class="ttc" id="message_8h_html_a35344e60cbd464b87c57fc74d072e255"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a35344e60cbd464b87c57fc74d072e255">ast_msg_handler_unregister</a></div><div class="ttdeci">int ast_msg_handler_unregister(const struct ast_msg_handler *handler)</div><div class="ttdoc">Unregister a ast_msg_handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01671">message.c:1671</a></div></div>
<div class="ttc" id="message_8h_html_a9e2045ad672c0afd5fb2616fec6bc666"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a9e2045ad672c0afd5fb2616fec6bc666">ast_msg_set_context</a></div><div class="ttdeci">int ast_msg_set_context(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the dialplan context for this message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00487">message.c:487</a></div></div>
<div class="ttc" id="message_8h_html_a9b4a41f815fa2f37ed29ac32b3d5d3a3"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a9b4a41f815fa2f37ed29ac32b3d5d3a3">ast_msg_handler_register</a></div><div class="ttdeci">int ast_msg_handler_register(const struct ast_msg_handler *handler)</div><div class="ttdoc">Register a ast_msg_handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01629">message.c:1629</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="message_8h_html_a0e4685c7cf1d71204087b992110e6357"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a0e4685c7cf1d71204087b992110e6357">ast_msg_alloc</a></div><div class="ttdeci">struct ast_msg * ast_msg_alloc(void)</div><div class="ttdoc">Allocate a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00418">message.c:418</a></div></div>
<div class="ttc" id="message_8h_html_a98ae66acbd6268c5010acf52be7e40a4"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a98ae66acbd6268c5010acf52be7e40a4">ast_msg_tech_register</a></div><div class="ttdeci">int ast_msg_tech_register(const struct ast_msg_tech *tech)</div><div class="ttdoc">Register a message technology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01569">message.c:1569</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test__message_8c_html_add35ea2349b86888eef95d404e6faebf"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#add35ea2349b86888eef95d404e6faebf">TEST_CATEGORY</a></div><div class="ttdeci">#define TEST_CATEGORY</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00044">test_message.c:44</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="message_8h_html_acf4073638cf23022399e3666c804e178"><div class="ttname"><a href="../../d2/d0d/message_8h.html#acf4073638cf23022399e3666c804e178">ast_msg_set_to</a></div><div class="ttdeci">int ast_msg_set_to(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the &amp;#39;to&amp;#39; URI of a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00454">message.c:454</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="message_8h_html_a156e69ed5bb6764a00bece684013d3cb"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a156e69ed5bb6764a00bece684013d3cb">ast_msg_send</a></div><div class="ttdeci">int ast_msg_send(struct ast_msg *msg, const char *to, const char *from)</div><div class="ttdoc">Send a msg directly to an endpoint. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01369">message.c:1369</a></div></div>
<div class="ttc" id="test__message_8c_html_ab8bcb9d3707a8934e7e925895847b0f6"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#ab8bcb9d3707a8934e7e925895847b0f6">TEST_CONTEXT</a></div><div class="ttdeci">#define TEST_CONTEXT</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00046">test_message.c:46</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="message_8h_html_a8a1ffcfecf1ffbc22c526796cdf954a7"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a8a1ffcfecf1ffbc22c526796cdf954a7">ast_msg_tech_unregister</a></div><div class="ttdeci">int ast_msg_tech_unregister(const struct ast_msg_tech *tech)</div><div class="ttdoc">Unregister a message technology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01610">message.c:1610</a></div></div>
<div class="ttc" id="test__message_8c_html_a17ecaf929e68e60be317110c89a6b60b"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a17ecaf929e68e60be317110c89a6b60b">test_msg_handler</a></div><div class="ttdeci">static struct ast_msg_handler test_msg_handler</div><div class="ttdoc">Our test message handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00090">test_message.c:90</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="test_8c_html_a8f04d5dd30d1d1cbe253ca28026d18c3"><div class="ttname"><a href="../../d8/db9/test_8c.html#a8f04d5dd30d1d1cbe253ca28026d18c3">ast_test_set_result</a></div><div class="ttdeci">void ast_test_set_result(struct ast_test *test, enum ast_test_result_state state)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/db9/test_8c_source.html#l00262">test.c:262</a></div></div>
<div class="ttc" id="message_8h_html_a71dd7465491023d1d7fd467f2920f2b8"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a71dd7465491023d1d7fd467f2920f2b8">ast_msg_set_exten</a></div><div class="ttdeci">int ast_msg_set_exten(struct ast_msg *msg, const char *fmt,...)</div><div class="ttdoc">Set the dialplan extension for this message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00498">message.c:498</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="message_8h_html_a76b4f941b1f576c4373ff2251aeb919d"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a76b4f941b1f576c4373ff2251aeb919d">ast_msg_has_destination</a></div><div class="ttdeci">int ast_msg_has_destination(const struct ast_msg *msg)</div><div class="ttdoc">Determine if a particular message has a destination via some handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00937">message.c:937</a></div></div>
<div class="ttc" id="structast__msg_html"><div class="ttname"><a href="../../df/da1/structast__msg.html">ast_msg</a></div><div class="ttdoc">A message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00233">message.c:233</a></div></div>
<div class="ttc" id="test__message_8c_html_ae421ffca876f0e6028ce913872bfb785"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#ae421ffca876f0e6028ce913872bfb785">ast_msg_safe_destroy</a></div><div class="ttdeci">static void ast_msg_safe_destroy(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00365">test_message.c:365</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a51b760e9be436f1e6147904d60b6c708"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51b760e9be436f1e6147904d60b6c708">&#9670;&nbsp;</a></span>AST_VECTOR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_VECTOR </td>
          <td>(</td>
          <td class="paramtype">var_vector&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d02/structast__variable.html">ast_variable</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The expected user event fields. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00074">74</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                                           {</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;   .name = <span class="stringliteral">&quot;testmsg&quot;</span>,</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;   .msg_send = <a class="code" href="../../d9/d7a/test__message_8c.html#a9248e8cde32a0570a47fe477384a3680">test_msg_send</a>,</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;};</div><div class="ttc" id="test__message_8c_html_a9248e8cde32a0570a47fe477384a3680"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a9248e8cde32a0570a47fe477384a3680">test_msg_send</a></div><div class="ttdeci">static int test_msg_send(const struct ast_msg *msg, const char *to, const char *from)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00170">test_message.c:170</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3180f8c09904ea596ce9199bc08129c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3180f8c09904ea596ce9199bc08129c9">&#9670;&nbsp;</a></span>create_test_dialplan()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int create_test_dialplan </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00828">828</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d94/pbx_8c_source.html#l06970">ast_add_extension()</a>, <a class="el" href="../../db/d94/pbx_8c_source.html#l06198">ast_context_find_or_create()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01934">ast_manager_register_hook()</a>, <a class="el" href="../../d9/daa/app__audiosocket_8c_source.html#l00045">AST_MODULE</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00046">TEST_CONTEXT</a>, and <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00047">TEST_EXTENSION</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00860">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;{</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../db/de0/pbx_8h.html#a8a07400b41b3302edf8aef9f53644698">ast_context_find_or_create</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d9/d7a/test__message_8c.html#ab8bcb9d3707a8934e7e925895847b0f6">TEST_CONTEXT</a>, <a class="code" href="../../d9/daa/app__audiosocket_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>)) {</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;   }</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;   res |= <a class="code" href="../../db/de0/pbx_8h.html#a07176e8d314eb68b3b50279fafa11390">ast_add_extension</a>(<a class="code" href="../../d9/d7a/test__message_8c.html#ab8bcb9d3707a8934e7e925895847b0f6">TEST_CONTEXT</a>, 0, <a class="code" href="../../d9/d7a/test__message_8c.html#a1fcdae79eb8b5dba56f672c597d577ae">TEST_EXTENSION</a>, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;                            <span class="stringliteral">&quot;UserEvent&quot;</span>, <span class="stringliteral">&quot;TestMessageUnitTest,Verify:To,Value:${MESSAGE(to)}&quot;</span>,</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;                            <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d9/daa/app__audiosocket_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>);</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;   res |= <a class="code" href="../../db/de0/pbx_8h.html#a07176e8d314eb68b3b50279fafa11390">ast_add_extension</a>(<a class="code" href="../../d9/d7a/test__message_8c.html#ab8bcb9d3707a8934e7e925895847b0f6">TEST_CONTEXT</a>, 0, <a class="code" href="../../d9/d7a/test__message_8c.html#a1fcdae79eb8b5dba56f672c597d577ae">TEST_EXTENSION</a>, 2, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;                            <span class="stringliteral">&quot;UserEvent&quot;</span>, <span class="stringliteral">&quot;TestMessageUnitTest,Verify:From,Value:${MESSAGE(from)}&quot;</span>,</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;                            <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d9/daa/app__audiosocket_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>);</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;   res |= <a class="code" href="../../db/de0/pbx_8h.html#a07176e8d314eb68b3b50279fafa11390">ast_add_extension</a>(<a class="code" href="../../d9/d7a/test__message_8c.html#ab8bcb9d3707a8934e7e925895847b0f6">TEST_CONTEXT</a>, 0, <a class="code" href="../../d9/d7a/test__message_8c.html#a1fcdae79eb8b5dba56f672c597d577ae">TEST_EXTENSION</a>, 3, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;                            <span class="stringliteral">&quot;UserEvent&quot;</span>, <span class="stringliteral">&quot;TestMessageUnitTest,Verify:Body,Value:${MESSAGE(body)}&quot;</span>,</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;                            <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d9/daa/app__audiosocket_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>);</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;   res |= <a class="code" href="../../db/de0/pbx_8h.html#a07176e8d314eb68b3b50279fafa11390">ast_add_extension</a>(<a class="code" href="../../d9/d7a/test__message_8c.html#ab8bcb9d3707a8934e7e925895847b0f6">TEST_CONTEXT</a>, 0, <a class="code" href="../../d9/d7a/test__message_8c.html#a1fcdae79eb8b5dba56f672c597d577ae">TEST_EXTENSION</a>, 4, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;                            <span class="stringliteral">&quot;UserEvent&quot;</span>, <span class="stringliteral">&quot;TestMessageUnitTest,Verify:Custom,Value:${MESSAGE_DATA(custom_data)}&quot;</span>,</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;                            <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d9/daa/app__audiosocket_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>);</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;   res |= <a class="code" href="../../db/de0/pbx_8h.html#a07176e8d314eb68b3b50279fafa11390">ast_add_extension</a>(<a class="code" href="../../d9/d7a/test__message_8c.html#ab8bcb9d3707a8934e7e925895847b0f6">TEST_CONTEXT</a>, 0, <a class="code" href="../../d9/d7a/test__message_8c.html#a1fcdae79eb8b5dba56f672c597d577ae">TEST_EXTENSION</a>, 5, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                            <span class="stringliteral">&quot;Set&quot;</span>, <span class="stringliteral">&quot;MESSAGE_DATA(custom_data)=${MESSAGE_DATA(custom_data)}&quot;</span>,</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;                            <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d9/daa/app__audiosocket_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>);</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;   res |= <a class="code" href="../../db/de0/pbx_8h.html#a07176e8d314eb68b3b50279fafa11390">ast_add_extension</a>(<a class="code" href="../../d9/d7a/test__message_8c.html#ab8bcb9d3707a8934e7e925895847b0f6">TEST_CONTEXT</a>, 0, <a class="code" href="../../d9/d7a/test__message_8c.html#a1fcdae79eb8b5dba56f672c597d577ae">TEST_EXTENSION</a>, 6, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;                            <span class="stringliteral">&quot;MessageSend&quot;</span>, <span class="stringliteral">&quot;testmsg:${MESSAGE(from)},testmsg:${MESSAGE(to)}&quot;</span>,</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                            <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d9/daa/app__audiosocket_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>);</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga9b312f4df19fa79a2185f41ff533516b">ast_manager_register_hook</a>(&amp;<a class="code" href="../../d9/d7a/test__message_8c.html#a5ebeac13b2a4916c6a0ff2f87693a530">user_event_hook</a>);</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;}</div><div class="ttc" id="test__message_8c_html_a1fcdae79eb8b5dba56f672c597d577ae"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a1fcdae79eb8b5dba56f672c597d577ae">TEST_EXTENSION</a></div><div class="ttdeci">#define TEST_EXTENSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00047">test_message.c:47</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga9b312f4df19fa79a2185f41ff533516b"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga9b312f4df19fa79a2185f41ff533516b">ast_manager_register_hook</a></div><div class="ttdeci">void ast_manager_register_hook(struct manager_custom_hook *hook)</div><div class="ttdoc">Add a custom hook to be called when an event is fired. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01934">manager.c:1934</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test__message_8c_html_ab8bcb9d3707a8934e7e925895847b0f6"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#ab8bcb9d3707a8934e7e925895847b0f6">TEST_CONTEXT</a></div><div class="ttdeci">#define TEST_CONTEXT</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00046">test_message.c:46</a></div></div>
<div class="ttc" id="pbx_8h_html_a07176e8d314eb68b3b50279fafa11390"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a07176e8d314eb68b3b50279fafa11390">ast_add_extension</a></div><div class="ttdeci">int ast_add_extension(const char *context, int replace, const char *extension, int priority, const char *label, const char *callerid, const char *application, void *data, void(*datad)(void *), const char *registrar)</div><div class="ttdoc">Add and extension to an extension context. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l06970">pbx.c:6970</a></div></div>
<div class="ttc" id="app__audiosocket_8c_html_aec23fc5034c3bb08140fc021f4955877"><div class="ttname"><a href="../../d9/daa/app__audiosocket_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a></div><div class="ttdeci">#define AST_MODULE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/daa/app__audiosocket_8c_source.html#l00045">app_audiosocket.c:45</a></div></div>
<div class="ttc" id="pbx_8h_html_a8a07400b41b3302edf8aef9f53644698"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a8a07400b41b3302edf8aef9f53644698">ast_context_find_or_create</a></div><div class="ttdeci">struct ast_context * ast_context_find_or_create(struct ast_context **extcontexts, struct ast_hashtab *exttable, const char *name, const char *registrar)</div><div class="ttdoc">Register a new context or find an existing one. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l06198">pbx.c:6198</a></div></div>
<div class="ttc" id="test__message_8c_html_a5ebeac13b2a4916c6a0ff2f87693a530"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a5ebeac13b2a4916c6a0ff2f87693a530">user_event_hook</a></div><div class="ttdeci">static struct manager_custom_hook user_event_hook</div><div class="ttdoc">AMI event hook that verifies whether or not we&amp;#39;ve gotten our user events. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00099">test_message.c:99</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a76a8c4590f94ab1e2a89fb0e7a241a33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76a8c4590f94ab1e2a89fb0e7a241a33">&#9670;&nbsp;</a></span>handler_wait_for_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int handler_wait_for_message </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *&#160;</td>
          <td class="paramname"><em>test</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wait for the <a class="el" href="../../d9/d7a/test__message_8c.html#a17ecaf929e68e60be317110c89a6b60b">test_msg_handler</a> to receive the message. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00230">230</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00204">ast_cond_timedwait</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d8/db9/test_8c_source.html#l00262">ast_test_set_result()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00226">ast_tv()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02283">ast_tvadd()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00999">error()</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00068">handler_cond</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00071">handler_lock</a>, and <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00059">handler_received_message</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00537">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;{</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a> = 0;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;   <span class="keyword">struct </span>timeval wait = <a class="code" href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), <a class="code" href="../../de/df7/time_8h.html#aebf04439f206cc509472ce4b6da48a5a">ast_tv</a>(5 <span class="comment">/* seconds */</span>, 0));</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;   <span class="keyword">struct </span>timespec wait_time = { .tv_sec = wait.tv_sec, .tv_nsec = wait.tv_usec * 1000 };</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d9/d7a/test__message_8c.html#a8ac03d5630a131e467bea3c28e83fa63">handler_lock</a>);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;   <span class="keywordflow">while</span> (!<a class="code" href="../../d9/d7a/test__message_8c.html#a374730095a6363599d447f160fc419b5">handler_received_message</a>) {</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      error = <a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;<a class="code" href="../../d9/d7a/test__message_8c.html#a78566377f601a14bc2ef3e278e11677c">handler_cond</a>, &amp;<a class="code" href="../../d9/d7a/test__message_8c.html#a8ac03d5630a131e467bea3c28e83fa63">handler_lock</a>, &amp;wait_time);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <span class="keywordflow">if</span> (error == ETIMEDOUT) {</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Test timed out while waiting for handler to get message\n&quot;</span>);</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;         <a class="code" href="../../d8/db9/test_8c.html#a8f04d5dd30d1d1cbe253ca28026d18c3">ast_test_set_result</a>(test, <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>);</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;      }</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;   }</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d9/d7a/test__message_8c.html#a8ac03d5630a131e467bea3c28e83fa63">handler_lock</a>);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;   <span class="keywordflow">return</span> (error != ETIMEDOUT);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;}</div><div class="ttc" id="test__message_8c_html_a374730095a6363599d447f160fc419b5"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a374730095a6363599d447f160fc419b5">handler_received_message</a></div><div class="ttdeci">static int handler_received_message</div><div class="ttdoc">Predicate for the test_message_handler receiving a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00059">test_message.c:59</a></div></div>
<div class="ttc" id="test__message_8c_html_a8ac03d5630a131e467bea3c28e83fa63"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a8ac03d5630a131e467bea3c28e83fa63">handler_lock</a></div><div class="ttdeci">static ast_mutex_t handler_lock</div><div class="ttdoc">Mutex for handler_cond. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00071">test_message.c:71</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="time_8h_html_a97e1bb8fbd7a103212789e87e7ed6073"><div class="ttname"><a href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a></div><div class="ttdeci">struct timeval ast_tvadd(struct timeval a, struct timeval b)</div><div class="ttdoc">Returns the sum of two timevals a + b. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02283">extconf.c:2283</a></div></div>
<div class="ttc" id="test__message_8c_html_a78566377f601a14bc2ef3e278e11677c"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a78566377f601a14bc2ef3e278e11677c">handler_cond</a></div><div class="ttdeci">static ast_cond_t handler_cond</div><div class="ttdoc">Condition wait variable for test_msg_handler receiving message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00068">test_message.c:68</a></div></div>
<div class="ttc" id="test_8c_html_a8f04d5dd30d1d1cbe253ca28026d18c3"><div class="ttname"><a href="../../d8/db9/test_8c.html#a8f04d5dd30d1d1cbe253ca28026d18c3">ast_test_set_result</a></div><div class="ttdeci">void ast_test_set_result(struct ast_test *test, enum ast_test_result_state state)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/db9/test_8c_source.html#l00262">test.c:262</a></div></div>
<div class="ttc" id="time_8h_html_aebf04439f206cc509472ce4b6da48a5a"><div class="ttname"><a href="../../de/df7/time_8h.html#aebf04439f206cc509472ce4b6da48a5a">ast_tv</a></div><div class="ttdeci">struct timeval ast_tv(ast_time_t sec, ast_suseconds_t usec)</div><div class="ttdoc">Returns a timeval from sec, usec. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00226">time.h:226</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a4a9391ee88e57361b613c4c2fd2bf4aa"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a></div><div class="ttdeci">int error(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00999">utils/frame.c:999</a></div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00860">860</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00127">AST_TEST_REGISTER</a>, <a class="el" href="../../d8/db9/test_8c_source.html#l00177">ast_test_register_cleanup()</a>, <a class="el" href="../../d8/db9/test_8c_source.html#l00160">ast_test_register_init()</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00828">create_test_dialplan()</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00044">TEST_CATEGORY</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00801">test_cleanup_cb()</a>, and <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00775">test_init_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;{</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(test_message_msg_tech_registration);</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(test_message_msg_handler_registration);</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(test_message_manipulation);</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(test_message_queue_dialplan_nominal);</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(test_message_queue_handler_nominal);</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(test_message_queue_both_nominal);</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(test_message_has_destination_dialplan);</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(test_message_has_destination_handler);</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(test_message_msg_send);</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;   <a class="code" href="../../d9/d7a/test__message_8c.html#a3180f8c09904ea596ce9199bc08129c9">create_test_dialplan</a>();</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a4e75c29c042ce5aa6c80cff24fa7f078">ast_test_register_init</a>(<a class="code" href="../../d9/d7a/test__message_8c.html#add35ea2349b86888eef95d404e6faebf">TEST_CATEGORY</a>, <a class="code" href="../../d9/d7a/test__message_8c.html#a74f59d77cd5fb076d3a3628bc1310b60">test_init_cb</a>);</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#af12ce196f7d1a605f046ed778049c2e0">ast_test_register_cleanup</a>(<a class="code" href="../../d9/d7a/test__message_8c.html#add35ea2349b86888eef95d404e6faebf">TEST_CATEGORY</a>, <a class="code" href="../../d9/d7a/test__message_8c.html#ad3b9a35577ec3254d74389c44112a914">test_cleanup_cb</a>);</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;}</div><div class="ttc" id="test__message_8c_html_ad3b9a35577ec3254d74389c44112a914"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#ad3b9a35577ec3254d74389c44112a914">test_cleanup_cb</a></div><div class="ttdeci">static int test_cleanup_cb(struct ast_test_info *info, struct ast_test *test)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00801">test_message.c:801</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="test_8c_html_a4e75c29c042ce5aa6c80cff24fa7f078"><div class="ttname"><a href="../../d8/db9/test_8c.html#a4e75c29c042ce5aa6c80cff24fa7f078">ast_test_register_init</a></div><div class="ttdeci">int ast_test_register_init(const char *category, ast_test_init_cb_t *cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/db9/test_8c_source.html#l00160">test.c:160</a></div></div>
<div class="ttc" id="test_8h_html_a34f64a69c09d98ceb693b077efd7ef97"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a></div><div class="ttdeci">#define AST_TEST_REGISTER(cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00127">test.h:127</a></div></div>
<div class="ttc" id="test__message_8c_html_add35ea2349b86888eef95d404e6faebf"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#add35ea2349b86888eef95d404e6faebf">TEST_CATEGORY</a></div><div class="ttdeci">#define TEST_CATEGORY</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00044">test_message.c:44</a></div></div>
<div class="ttc" id="test_8c_html_af12ce196f7d1a605f046ed778049c2e0"><div class="ttname"><a href="../../d8/db9/test_8c.html#af12ce196f7d1a605f046ed778049c2e0">ast_test_register_cleanup</a></div><div class="ttdeci">int ast_test_register_cleanup(const char *category, ast_test_cleanup_cb_t *cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/db9/test_8c_source.html#l00177">test.c:177</a></div></div>
<div class="ttc" id="test__message_8c_html_a74f59d77cd5fb076d3a3628bc1310b60"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a74f59d77cd5fb076d3a3628bc1310b60">test_init_cb</a></div><div class="ttdeci">static int test_init_cb(struct ast_test_info *info, struct ast_test *test)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00775">test_message.c:775</a></div></div>
<div class="ttc" id="test__message_8c_html_a3180f8c09904ea596ce9199bc08129c9"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a3180f8c09904ea596ce9199bc08129c9">create_test_dialplan</a></div><div class="ttdeci">static int create_test_dialplan(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00828">test_message.c:828</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad3b9a35577ec3254d74389c44112a914"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3b9a35577ec3254d74389c44112a914">&#9670;&nbsp;</a></span>test_cleanup_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int test_cleanup_cb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/d62/structast__test__info.html">ast_test_info</a> *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *&#160;</td>
          <td class="paramname"><em>test</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00801">801</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00787">FREE_VARIABLE_VECTOR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00860">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;{</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;   <a class="code" href="../../d9/d7a/test__message_8c.html#a4ce148361905570873a8dda57171564c">FREE_VARIABLE_VECTOR</a>(expected_user_event_fields);</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;   <a class="code" href="../../d9/d7a/test__message_8c.html#a4ce148361905570873a8dda57171564c">FREE_VARIABLE_VECTOR</a>(bad_headers);</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;}</div><div class="ttc" id="test__message_8c_html_a4ce148361905570873a8dda57171564c"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a4ce148361905570873a8dda57171564c">FREE_VARIABLE_VECTOR</a></div><div class="ttdeci">#define FREE_VARIABLE_VECTOR(vector)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00787">test_message.c:787</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a74f59d77cd5fb076d3a3628bc1310b60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74f59d77cd5fb076d3a3628bc1310b60">&#9670;&nbsp;</a></span>test_init_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int test_init_cb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/d62/structast__test__info.html">ast_test_info</a> *&#160;</td>
          <td class="paramname"><em>info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *&#160;</td>
          <td class="paramname"><em>test</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00775">775</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d68/vector_8h_source.html#l00113">AST_VECTOR_INIT</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00050">DEFAULT_EXPECTED_EVENTS</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00059">handler_received_message</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00168">message_received</a>, and <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00053">received_user_events</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00860">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;{</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;   <a class="code" href="../../d9/d7a/test__message_8c.html#ab82a1e6cd9b45660eccf7d513e3e0bb4">received_user_events</a> = 0;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;   <a class="code" href="../../d9/d7a/test__message_8c.html#a374730095a6363599d447f160fc419b5">handler_received_message</a> = 0;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;   <a class="code" href="../../d9/d7a/test__message_8c.html#ae7fe5722b5eafa01505c5f53b567e7a0">message_received</a> = 0;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a>(&amp;expected_user_event_fields, <a class="code" href="../../d9/d7a/test__message_8c.html#aa011e5dd0a1f894f4cdc4276019643f9">DEFAULT_EXPECTED_EVENTS</a>);</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a>(&amp;bad_headers, <a class="code" href="../../d9/d7a/test__message_8c.html#aa011e5dd0a1f894f4cdc4276019643f9">DEFAULT_EXPECTED_EVENTS</a>);</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;}</div><div class="ttc" id="test__message_8c_html_a374730095a6363599d447f160fc419b5"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a374730095a6363599d447f160fc419b5">handler_received_message</a></div><div class="ttdeci">static int handler_received_message</div><div class="ttdoc">Predicate for the test_message_handler receiving a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00059">test_message.c:59</a></div></div>
<div class="ttc" id="test__message_8c_html_ae7fe5722b5eafa01505c5f53b567e7a0"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#ae7fe5722b5eafa01505c5f53b567e7a0">message_received</a></div><div class="ttdeci">static int message_received</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00168">test_message.c:168</a></div></div>
<div class="ttc" id="vector_8h_html_ad9d555fa89da1bfc691181993499f785"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a></div><div class="ttdeci">#define AST_VECTOR_INIT(vec, size)</div><div class="ttdoc">Initialize a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00113">vector.h:113</a></div></div>
<div class="ttc" id="test__message_8c_html_ab82a1e6cd9b45660eccf7d513e3e0bb4"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#ab82a1e6cd9b45660eccf7d513e3e0bb4">received_user_events</a></div><div class="ttdeci">static int received_user_events</div><div class="ttdoc">The current number of received user events. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00053">test_message.c:53</a></div></div>
<div class="ttc" id="test__message_8c_html_aa011e5dd0a1f894f4cdc4276019643f9"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#aa011e5dd0a1f894f4cdc4276019643f9">DEFAULT_EXPECTED_EVENTS</a></div><div class="ttdeci">#define DEFAULT_EXPECTED_EVENTS</div><div class="ttdoc">The number of user events we should get in a dialplan test. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00050">test_message.c:50</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa4fdf3c08bf6a6685e5f6cd49b9e71d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4fdf3c08bf6a6685e5f6cd49b9e71d8">&#9670;&nbsp;</a></span>test_msg_handle_msg_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int test_msg_handle_msg_cb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/da1/structast__msg.html">ast_msg</a> *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00177">177</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00068">handler_cond</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00071">handler_lock</a>, and <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00059">handler_received_message</a>.</p>
<div class="fragment"><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;{</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d9/d7a/test__message_8c.html#a8ac03d5630a131e467bea3c28e83fa63">handler_lock</a>);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;   <a class="code" href="../../d9/d7a/test__message_8c.html#a374730095a6363599d447f160fc419b5">handler_received_message</a> = 1;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;<a class="code" href="../../d9/d7a/test__message_8c.html#a78566377f601a14bc2ef3e278e11677c">handler_cond</a>);</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d9/d7a/test__message_8c.html#a8ac03d5630a131e467bea3c28e83fa63">handler_lock</a>);</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;}</div><div class="ttc" id="test__message_8c_html_a374730095a6363599d447f160fc419b5"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a374730095a6363599d447f160fc419b5">handler_received_message</a></div><div class="ttdeci">static int handler_received_message</div><div class="ttdoc">Predicate for the test_message_handler receiving a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00059">test_message.c:59</a></div></div>
<div class="ttc" id="test__message_8c_html_a8ac03d5630a131e467bea3c28e83fa63"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a8ac03d5630a131e467bea3c28e83fa63">handler_lock</a></div><div class="ttdeci">static ast_mutex_t handler_lock</div><div class="ttdoc">Mutex for handler_cond. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00071">test_message.c:71</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="test__message_8c_html_a78566377f601a14bc2ef3e278e11677c"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a78566377f601a14bc2ef3e278e11677c">handler_cond</a></div><div class="ttdeci">static ast_cond_t handler_cond</div><div class="ttdoc">Condition wait variable for test_msg_handler receiving message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00068">test_message.c:68</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8a45aa00431eedc892d920da9c783da6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a45aa00431eedc892d920da9c783da6">&#9670;&nbsp;</a></span>test_msg_has_destination_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int test_msg_has_destination_cb </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../df/da1/structast__msg.html">ast_msg</a> *&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00187">187</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d6d/message_8c_source.html#l00541">ast_msg_get_to()</a>, and <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>.</p>
<div class="fragment"><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;{</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;   <span class="comment">/* We only care about one destination: foo! */</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d2/d0d/message_8h.html#a6ddbc20e42c0631602984bc83506aaf2">ast_msg_get_to</a>(msg))) {</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;   }</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;   <span class="keywordflow">return</span> (!strcmp(<a class="code" href="../../d2/d0d/message_8h.html#a6ddbc20e42c0631602984bc83506aaf2">ast_msg_get_to</a>(msg), <span class="stringliteral">&quot;foo&quot;</span>) ? 1 : 0);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;}</div><div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="message_8h_html_a6ddbc20e42c0631602984bc83506aaf2"><div class="ttname"><a href="../../d2/d0d/message_8h.html#a6ddbc20e42c0631602984bc83506aaf2">ast_msg_get_to</a></div><div class="ttdeci">const char * ast_msg_get_to(const struct ast_msg *msg)</div><div class="ttdoc">Retrieve the destination of this message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l00541">message.c:541</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9248e8cde32a0570a47fe477384a3680"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9248e8cde32a0570a47fe477384a3680">&#9670;&nbsp;</a></span>test_msg_send()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int test_msg_send </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../df/da1/structast__msg.html">ast_msg</a> *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>from</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00170">170</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00168">message_received</a>.</p>
<div class="fragment"><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;{</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;   <a class="code" href="../../d9/d7a/test__message_8c.html#ae7fe5722b5eafa01505c5f53b567e7a0">message_received</a> = 1;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;}</div><div class="ttc" id="test__message_8c_html_ae7fe5722b5eafa01505c5f53b567e7a0"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#ae7fe5722b5eafa01505c5f53b567e7a0">message_received</a></div><div class="ttdeci">static int message_received</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00168">test_message.c:168</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00809">809</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dcc/conf2ael_8c_source.html#l00625">ast_context_destroy()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l01942">ast_manager_unregister_hook()</a>, <a class="el" href="../../d9/daa/app__audiosocket_8c_source.html#l00045">AST_MODULE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00128">AST_TEST_UNREGISTER</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>
<div class="fragment"><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;{</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(test_message_msg_tech_registration);</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(test_message_msg_handler_registration);</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(test_message_manipulation);</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(test_message_queue_dialplan_nominal);</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(test_message_queue_handler_nominal);</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(test_message_queue_both_nominal);</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(test_message_has_destination_dialplan);</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(test_message_has_destination_handler);</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(test_message_msg_send);</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a9546b830c22c693a2baed08e48569401">ast_context_destroy</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d9/daa/app__audiosocket_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>);</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga9592be65e0f9c99b7952a5841888757f">ast_manager_unregister_hook</a>(&amp;<a class="code" href="../../d9/d7a/test__message_8c.html#a5ebeac13b2a4916c6a0ff2f87693a530">user_event_hook</a>);</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_ga9592be65e0f9c99b7952a5841888757f"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga9592be65e0f9c99b7952a5841888757f">ast_manager_unregister_hook</a></div><div class="ttdeci">void ast_manager_unregister_hook(struct manager_custom_hook *hook)</div><div class="ttdoc">Delete a custom hook to be called when an event is fired. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01942">manager.c:1942</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a79bc64a935b14b1b181156e5ada58ead"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a></div><div class="ttdeci">#define AST_TEST_UNREGISTER(cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00128">test.h:128</a></div></div>
<div class="ttc" id="app__audiosocket_8c_html_aec23fc5034c3bb08140fc021f4955877"><div class="ttname"><a href="../../d9/daa/app__audiosocket_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a></div><div class="ttdeci">#define AST_MODULE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/daa/app__audiosocket_8c_source.html#l00045">app_audiosocket.c:45</a></div></div>
<div class="ttc" id="pbx_8h_html_a9546b830c22c693a2baed08e48569401"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a9546b830c22c693a2baed08e48569401">ast_context_destroy</a></div><div class="ttdeci">void ast_context_destroy(struct ast_context *con, const char *registrar)</div><div class="ttdoc">Destroy a context (matches the specified context or ANY context if NULL) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcc/conf2ael_8c_source.html#l00625">conf2ael.c:625</a></div></div>
<div class="ttc" id="test__message_8c_html_a5ebeac13b2a4916c6a0ff2f87693a530"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a5ebeac13b2a4916c6a0ff2f87693a530">user_event_hook</a></div><div class="ttdeci">static struct manager_custom_hook user_event_hook</div><div class="ttdoc">AMI event hook that verifies whether or not we&amp;#39;ve gotten our user events. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00099">test_message.c:99</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3c0313d8a73d2c0fe4ce104ba2bb6ab9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c0313d8a73d2c0fe4ce104ba2bb6ab9">&#9670;&nbsp;</a></span>user_event_hook_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int user_event_hook_cb </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>category</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>body</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00196">196</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00157">ast_skip_blanks()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00182">ast_trim_blanks()</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00056">expected_user_events</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">parse()</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00053">received_user_events</a>, <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep()</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00062">user_event_cond</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00065">user_event_lock</a>, <a class="el" href="../../d4/d2f/syslog_8c_source.html#l00037">value</a>, and <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00114">verify_user_event_fields()</a>.</p>
<div class="fragment"><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;{</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a>;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;   <span class="keywordtype">char</span> *kvp;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;   <span class="keywordflow">if</span> (strcmp(<a class="code" href="../../df/d7d/structevent.html">event</a>, <span class="stringliteral">&quot;UserEvent&quot;</span>)) {</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;   }</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;   parse = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(body);</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;   <span class="keywordflow">while</span> ((kvp = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;parse, <span class="stringliteral">&quot;\r\n&quot;</span>))) {</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      <span class="keywordtype">char</span> *key, *<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      kvp = <a class="code" href="../../d6/d90/strings_8h.html#abe38193be148775f7559f8fff6e0c17e">ast_trim_blanks</a>(kvp);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(kvp)) {</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      }</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      key = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;kvp, <span class="stringliteral">&quot;:&quot;</span>);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      value = <a class="code" href="../../d6/d90/strings_8h.html#af5693da955fa3bc73bc49c47b601fc7a">ast_skip_blanks</a>(kvp);</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      <a class="code" href="../../d9/d7a/test__message_8c.html#aea12b1ed0b446b50c12ed1e02ad4ff49">verify_user_event_fields</a>(<a class="code" href="../../d9/d7a/test__message_8c.html#ab82a1e6cd9b45660eccf7d513e3e0bb4">received_user_events</a>, key, value);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;   }</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;   <a class="code" href="../../d9/d7a/test__message_8c.html#ab82a1e6cd9b45660eccf7d513e3e0bb4">received_user_events</a>++;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d9/d7a/test__message_8c.html#a39a4aee94bdfb8f87bd4634af516aad8">user_event_lock</a>);</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d7a/test__message_8c.html#ab82a1e6cd9b45660eccf7d513e3e0bb4">received_user_events</a> == <a class="code" href="../../d9/d7a/test__message_8c.html#a7b775e30cf6ebe9c05b1d3e099b5af93">expected_user_events</a>) {</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;<a class="code" href="../../d9/d7a/test__message_8c.html#a2d709c3b9390852582b64e2a370bf913">user_event_cond</a>);</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;   }</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d9/d7a/test__message_8c.html#a39a4aee94bdfb8f87bd4634af516aad8">user_event_lock</a>);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;}</div><div class="ttc" id="test__message_8c_html_a2d709c3b9390852582b64e2a370bf913"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a2d709c3b9390852582b64e2a370bf913">user_event_cond</a></div><div class="ttdeci">static ast_cond_t user_event_cond</div><div class="ttdoc">Condition wait variable for all dialplan user events being received. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00062">test_message.c:62</a></div></div>
<div class="ttc" id="test__message_8c_html_aea12b1ed0b446b50c12ed1e02ad4ff49"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#aea12b1ed0b446b50c12ed1e02ad4ff49">verify_user_event_fields</a></div><div class="ttdeci">static int verify_user_event_fields(int user_event, const char *header, const char *value)</div><div class="ttdoc">Verifies a user event header/value pair. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00114">test_message.c:114</a></div></div>
<div class="ttc" id="structevent_html"><div class="ttname"><a href="../../df/d7d/structevent.html">event</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/astman_8c_source.html#l00222">astman.c:222</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="test__message_8c_html_a7b775e30cf6ebe9c05b1d3e099b5af93"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a7b775e30cf6ebe9c05b1d3e099b5af93">expected_user_events</a></div><div class="ttdeci">static int expected_user_events</div><div class="ttdoc">The number of user events we expect for this test. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00056">test_message.c:56</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="test__message_8c_html_ab82a1e6cd9b45660eccf7d513e3e0bb4"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#ab82a1e6cd9b45660eccf7d513e3e0bb4">received_user_events</a></div><div class="ttdeci">static int received_user_events</div><div class="ttdoc">The current number of received user events. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00053">test_message.c:53</a></div></div>
<div class="ttc" id="strings_8h_html_af5693da955fa3bc73bc49c47b601fc7a"><div class="ttname"><a href="../../d6/d90/strings_8h.html#af5693da955fa3bc73bc49c47b601fc7a">ast_skip_blanks</a></div><div class="ttdeci">char * ast_skip_blanks(const char *str)</div><div class="ttdoc">Gets a pointer to the first non-whitespace character in a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00157">strings.h:157</a></div></div>
<div class="ttc" id="strings_8h_html_abe38193be148775f7559f8fff6e0c17e"><div class="ttname"><a href="../../d6/d90/strings_8h.html#abe38193be148775f7559f8fff6e0c17e">ast_trim_blanks</a></div><div class="ttdeci">char * ast_trim_blanks(char *str)</div><div class="ttdoc">Trims trailing whitespace characters from a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00182">strings.h:182</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2e006acff60d9b3d65d7d60f975d6747"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a></div><div class="ttdeci">static void parse(struct mgcp_request *req)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">chan_mgcp.c:1872</a></div></div>
<div class="ttc" id="test__message_8c_html_a39a4aee94bdfb8f87bd4634af516aad8"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a39a4aee94bdfb8f87bd4634af516aad8">user_event_lock</a></div><div class="ttdeci">static ast_mutex_t user_event_lock</div><div class="ttdoc">Mutex for user_event_cond. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00065">test_message.c:65</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6c0ef89c62e441edf745534432bbde29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c0ef89c62e441edf745534432bbde29">&#9670;&nbsp;</a></span>user_event_wait_for_events()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int user_event_wait_for_events </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *&#160;</td>
          <td class="paramname"><em>test</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>expected_events</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wait for the expected number of user events to be received. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00251">251</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00204">ast_cond_timedwait</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d8/db9/test_8c_source.html#l00262">ast_test_set_result()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00226">ast_tv()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02283">ast_tvadd()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00999">error()</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00056">expected_user_events</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00053">received_user_events</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00062">user_event_cond</a>, and <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00065">user_event_lock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00465">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;{</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;   <span class="keyword">struct </span>timeval wait = <a class="code" href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), <a class="code" href="../../de/df7/time_8h.html#aebf04439f206cc509472ce4b6da48a5a">ast_tv</a>(5 <span class="comment">/* seconds */</span>, 0));</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;   <span class="keyword">struct </span>timespec wait_time = { .tv_sec = wait.tv_sec, .tv_nsec = wait.tv_usec * 1000 };</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;   <a class="code" href="../../d9/d7a/test__message_8c.html#a7b775e30cf6ebe9c05b1d3e099b5af93">expected_user_events</a> = expected_events;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../d9/d7a/test__message_8c.html#a39a4aee94bdfb8f87bd4634af516aad8">user_event_lock</a>);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;   <span class="keywordflow">while</span> (<a class="code" href="../../d9/d7a/test__message_8c.html#ab82a1e6cd9b45660eccf7d513e3e0bb4">received_user_events</a> != <a class="code" href="../../d9/d7a/test__message_8c.html#a7b775e30cf6ebe9c05b1d3e099b5af93">expected_user_events</a>) {</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      error = <a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;<a class="code" href="../../d9/d7a/test__message_8c.html#a2d709c3b9390852582b64e2a370bf913">user_event_cond</a>, &amp;<a class="code" href="../../d9/d7a/test__message_8c.html#a39a4aee94bdfb8f87bd4634af516aad8">user_event_lock</a>, &amp;wait_time);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <span class="keywordflow">if</span> (error == ETIMEDOUT) {</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Test timed out while waiting for %d expected user events\n&quot;</span>, expected_events);</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;         <a class="code" href="../../d8/db9/test_8c.html#a8f04d5dd30d1d1cbe253ca28026d18c3">ast_test_set_result</a>(test, <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      }</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;   }</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../d9/d7a/test__message_8c.html#a39a4aee94bdfb8f87bd4634af516aad8">user_event_lock</a>);</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Received %d of %d user events\n&quot;</span>, <a class="code" href="../../d9/d7a/test__message_8c.html#ab82a1e6cd9b45660eccf7d513e3e0bb4">received_user_events</a>, expected_events);</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;   <span class="keywordflow">return</span> !(<a class="code" href="../../d9/d7a/test__message_8c.html#ab82a1e6cd9b45660eccf7d513e3e0bb4">received_user_events</a> == expected_events);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;}</div><div class="ttc" id="test__message_8c_html_a2d709c3b9390852582b64e2a370bf913"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a2d709c3b9390852582b64e2a370bf913">user_event_cond</a></div><div class="ttdeci">static ast_cond_t user_event_cond</div><div class="ttdoc">Condition wait variable for all dialplan user events being received. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00062">test_message.c:62</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="test__message_8c_html_a7b775e30cf6ebe9c05b1d3e099b5af93"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a7b775e30cf6ebe9c05b1d3e099b5af93">expected_user_events</a></div><div class="ttdeci">static int expected_user_events</div><div class="ttdoc">The number of user events we expect for this test. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00056">test_message.c:56</a></div></div>
<div class="ttc" id="test__message_8c_html_ab82a1e6cd9b45660eccf7d513e3e0bb4"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#ab82a1e6cd9b45660eccf7d513e3e0bb4">received_user_events</a></div><div class="ttdeci">static int received_user_events</div><div class="ttdoc">The current number of received user events. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00053">test_message.c:53</a></div></div>
<div class="ttc" id="time_8h_html_a97e1bb8fbd7a103212789e87e7ed6073"><div class="ttname"><a href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a></div><div class="ttdeci">struct timeval ast_tvadd(struct timeval a, struct timeval b)</div><div class="ttdoc">Returns the sum of two timevals a + b. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02283">extconf.c:2283</a></div></div>
<div class="ttc" id="test_8c_html_a8f04d5dd30d1d1cbe253ca28026d18c3"><div class="ttname"><a href="../../d8/db9/test_8c.html#a8f04d5dd30d1d1cbe253ca28026d18c3">ast_test_set_result</a></div><div class="ttdeci">void ast_test_set_result(struct ast_test *test, enum ast_test_result_state state)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/db9/test_8c_source.html#l00262">test.c:262</a></div></div>
<div class="ttc" id="test__message_8c_html_a39a4aee94bdfb8f87bd4634af516aad8"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a39a4aee94bdfb8f87bd4634af516aad8">user_event_lock</a></div><div class="ttdeci">static ast_mutex_t user_event_lock</div><div class="ttdoc">Mutex for user_event_cond. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00065">test_message.c:65</a></div></div>
<div class="ttc" id="time_8h_html_aebf04439f206cc509472ce4b6da48a5a"><div class="ttname"><a href="../../de/df7/time_8h.html#aebf04439f206cc509472ce4b6da48a5a">ast_tv</a></div><div class="ttdeci">struct timeval ast_tv(ast_time_t sec, ast_suseconds_t usec)</div><div class="ttdoc">Returns a timeval from sec, usec. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00226">time.h:226</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a4a9391ee88e57361b613c4c2fd2bf4aa"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a></div><div class="ttdeci">int error(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00999">utils/frame.c:999</a></div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2157cd1e39b97bcd72a04b7fcc0bebdf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2157cd1e39b97bcd72a04b7fcc0bebdf">&#9670;&nbsp;</a></span>verify_bad_headers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int verify_bad_headers </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *&#160;</td>
          <td class="paramname"><em>test</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00274">274</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d8/db9/test_8c_source.html#l00262">ast_test_set_result()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00465">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;{</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;bad_headers); i++) {</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *headers;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *current;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      headers = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;bad_headers, i);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;      <span class="keywordflow">if</span> (!headers) {</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;      }</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      res = -1;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      <span class="keywordflow">for</span> (current = headers; current; current = current-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Expected UserEvent %d: Failed to match %s: %s\n&quot;</span>,</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            i, current-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, current-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;         <a class="code" href="../../d8/db9/test_8c.html#a8f04d5dd30d1d1cbe253ca28026d18c3">ast_test_set_result</a>(test, <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>);</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      }</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;   }</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;}</div><div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="test_8c_html_a8f04d5dd30d1d1cbe253ca28026d18c3"><div class="ttname"><a href="../../d8/db9/test_8c.html#a8f04d5dd30d1d1cbe253ca28026d18c3">ast_test_set_result</a></div><div class="ttdeci">void ast_test_set_result(struct ast_test *test, enum ast_test_result_state state)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/db9/test_8c_source.html#l00262">test.c:262</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aea12b1ed0b446b50c12ed1e02ad4ff49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea12b1ed0b446b50c12ed1e02ad4ff49">&#9670;&nbsp;</a></span>verify_user_event_fields()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int verify_user_event_fields </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>user_event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Verifies a user event header/value pair. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">user_event</td><td>which user event to check </td></tr>
    <tr><td class="paramname">header</td><td>The header to verify </td></tr>
    <tr><td class="paramname">value</td><td>The value read from the event</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>on error or evaluation failure </td></tr>
    <tr><td class="paramname">0</td><td>if match not needed or success </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00114">114</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00949">ast_variable_list_append</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">ast_variable_new</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00284">AST_VECTOR_REPLACE</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00999">error()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">ast_variable::name</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">ast_variable::next</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">ast_variable::value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00196">user_event_hook_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;{</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *current;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *expected;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;   regex_t regexbuf;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;   <span class="keywordflow">if</span> (user_event &gt;= <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;expected_user_event_fields)) {</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;   }</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;   expected = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;expected_user_event_fields, user_event);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;   <span class="keywordflow">if</span> (!expected) {</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;   }</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;   <span class="keywordflow">for</span> (current = expected; current; current = current-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *bad_header;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      <span class="keywordflow">if</span> (strcmp(current-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <a class="code" href="../../d5/d65/structheader.html">header</a>)) {</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;      }</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      error = regcomp(&amp;regexbuf, current-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, REG_EXTENDED | REG_NOSUB);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      <span class="keywordflow">if</span> (error) {</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;         <span class="keywordtype">char</span> error_buf[128];</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;         regerror(error, &amp;regexbuf, error_buf, <span class="keyword">sizeof</span>(error_buf));</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to compile regex &#39;%s&#39; for header check &#39;%s&#39;: %s\n&quot;</span>,</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            current-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, current-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, error_buf);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;      }</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <span class="keywordflow">if</span> (!regexec(&amp;regexbuf, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0)) {</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;         regfree(&amp;regexbuf);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;      }</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      bad_header = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a>(<a class="code" href="../../d5/d65/structheader.html">header</a>, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>, __FILE__);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      <span class="keywordflow">if</span> (bad_header) {</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *bad_headers_head = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;         <span class="keywordflow">if</span> (user_event &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;bad_headers)) {</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            bad_headers_head = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;bad_headers, user_event);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;         }</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;         <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a7af2e88e6e3812ec80facb1b41df43de">ast_variable_list_append</a>(&amp;bad_headers_head, bad_header);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;         <a class="code" href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a>(&amp;bad_headers, user_event, bad_headers_head);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      }</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      regfree(&amp;regexbuf);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;   }</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;}</div><div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a66581086d34dfe7ea86b0644bacef239"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a66581086d34dfe7ea86b0644bacef239">ast_variable_new</a></div><div class="ttdeci">#define ast_variable_new(name, value, filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00914">include/asterisk/config.h:914</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structheader_html"><div class="ttname"><a href="../../d5/d65/structheader.html">header</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d73/pjsip__global__headers_8c_source.html#l00047">pjsip_global_headers.c:47</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="vector_8h_html_a0ae01511d65b3fa02bb10165a28f9581"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a0ae01511d65b3fa02bb10165a28f9581">AST_VECTOR_REPLACE</a></div><div class="ttdeci">#define AST_VECTOR_REPLACE(vec, idx, elem)</div><div class="ttdoc">Replace an element at a specific position in a vector, growing the vector if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00284">vector.h:284</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a4a9391ee88e57361b613c4c2fd2bf4aa"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a></div><div class="ttdeci">int error(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00999">utils/frame.c:999</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a7af2e88e6e3812ec80facb1b41df43de"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a7af2e88e6e3812ec80facb1b41df43de">ast_variable_list_append</a></div><div class="ttdeci">#define ast_variable_list_append(head, new_var)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00949">include/asterisk/config.h:949</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Out-of-<a class="el" href="../../d0/d29/chan__pjsip_8c.html#acc941e909d1ca6a0997028d9562d78da">call</a> <a class="el" href="../../da/dfb/app__queue_8c.html#a5633b1433389cec21ade3811bbe9ca5b">text</a> <a class="el" href="../../d8/d9e/structmessage.html">message</a> support&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c.html#a6e79b87e069c15a5fb21826e5eed0971">AST_BUILDOPT_SUM</a>, .load = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>, .unload = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>, .load_pri = <a class="el" href="../../d5/d16/module_8h.html#aa4f734041ffd9d75b07cefb0291e1e58a1d1eb207e01a2d3bf6aa6ba271c27dee">AST_MODPRI_DEFAULT</a>, .support_level = <a class="el" href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a634484c0074e7b6b630756fab09e2c15">AST_MODULE_SUPPORT_CORE</a>, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00881">881</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00881">881</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

</div>
</div>
<a id="a7b775e30cf6ebe9c05b1d3e099b5af93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b775e30cf6ebe9c05b1d3e099b5af93">&#9670;&nbsp;</a></span>expected_user_events</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int expected_user_events</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The number of user events we expect for this test. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00056">56</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00196">user_event_hook_cb()</a>, and <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00251">user_event_wait_for_events()</a>.</p>

</div>
</div>
<a id="a78566377f601a14bc2ef3e278e11677c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78566377f601a14bc2ef3e278e11677c">&#9670;&nbsp;</a></span>handler_cond</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#ab134d98cdfe7de0f7a72b377c0765dc7">ast_cond_t</a> handler_cond</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Condition wait variable for <a class="el" href="../../d9/d7a/test__message_8c.html#a17ecaf929e68e60be317110c89a6b60b">test_msg_handler</a> receiving message. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00068">68</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00230">handler_wait_for_message()</a>, and <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00177">test_msg_handle_msg_cb()</a>.</p>

</div>
</div>
<a id="a8ac03d5630a131e467bea3c28e83fa63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ac03d5630a131e467bea3c28e83fa63">&#9670;&nbsp;</a></span>handler_lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a> handler_lock = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mutex for <code>handler_cond</code>. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00071">71</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00230">handler_wait_for_message()</a>, and <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00177">test_msg_handle_msg_cb()</a>.</p>

</div>
</div>
<a id="a374730095a6363599d447f160fc419b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a374730095a6363599d447f160fc419b5">&#9670;&nbsp;</a></span>handler_received_message</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int handler_received_message</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Predicate for the test_message_handler receiving a message. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00059">59</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00230">handler_wait_for_message()</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00775">test_init_cb()</a>, and <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00177">test_msg_handle_msg_cb()</a>.</p>

</div>
</div>
<a id="ae7fe5722b5eafa01505c5f53b567e7a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7fe5722b5eafa01505c5f53b567e7a0">&#9670;&nbsp;</a></span>message_received</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int message_received</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00168">168</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00775">test_init_cb()</a>, and <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00170">test_msg_send()</a>.</p>

</div>
</div>
<a id="ab82a1e6cd9b45660eccf7d513e3e0bb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab82a1e6cd9b45660eccf7d513e3e0bb4">&#9670;&nbsp;</a></span>received_user_events</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int received_user_events</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The current number of received user events. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00053">53</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00775">test_init_cb()</a>, <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00196">user_event_hook_cb()</a>, and <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00251">user_event_wait_for_events()</a>.</p>

</div>
</div>
<a id="a17ecaf929e68e60be317110c89a6b60b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17ecaf929e68e60be317110c89a6b60b">&#9670;&nbsp;</a></span>test_msg_handler</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d5/d80/structast__msg__handler.html">ast_msg_handler</a> test_msg_handler</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .name = <span class="stringliteral">&quot;testmsg&quot;</span>,</div><div class="line">   .handle_msg = <a class="code" href="../../d9/d7a/test__message_8c.html#aa4fdf3c08bf6a6685e5f6cd49b9e71d8">test_msg_handle_msg_cb</a>,</div><div class="line">   .has_destination = <a class="code" href="../../d9/d7a/test__message_8c.html#a8a45aa00431eedc892d920da9c783da6">test_msg_has_destination_cb</a>,</div><div class="line">}</div><div class="ttc" id="test__message_8c_html_aa4fdf3c08bf6a6685e5f6cd49b9e71d8"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#aa4fdf3c08bf6a6685e5f6cd49b9e71d8">test_msg_handle_msg_cb</a></div><div class="ttdeci">static int test_msg_handle_msg_cb(struct ast_msg *msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00177">test_message.c:177</a></div></div>
<div class="ttc" id="test__message_8c_html_a8a45aa00431eedc892d920da9c783da6"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a8a45aa00431eedc892d920da9c783da6">test_msg_has_destination_cb</a></div><div class="ttdeci">static int test_msg_has_destination_cb(const struct ast_msg *msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00187">test_message.c:187</a></div></div>
</div><!-- fragment -->
<p>Our test message handler. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00090">90</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

</div>
</div>
<a id="a2d709c3b9390852582b64e2a370bf913"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d709c3b9390852582b64e2a370bf913">&#9670;&nbsp;</a></span>user_event_cond</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#ab134d98cdfe7de0f7a72b377c0765dc7">ast_cond_t</a> user_event_cond</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Condition wait variable for all dialplan user events being received. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00062">62</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00196">user_event_hook_cb()</a>, and <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00251">user_event_wait_for_events()</a>.</p>

</div>
</div>
<a id="a5ebeac13b2a4916c6a0ff2f87693a530"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ebeac13b2a4916c6a0ff2f87693a530">&#9670;&nbsp;</a></span>user_event_hook</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d0/d10/structmanager__custom__hook.html">manager_custom_hook</a> user_event_hook</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .file = <a class="code" href="../../d9/daa/app__audiosocket_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>,</div><div class="line">   .helper = <a class="code" href="../../d9/d7a/test__message_8c.html#a3c0313d8a73d2c0fe4ce104ba2bb6ab9">user_event_hook_cb</a>,</div><div class="line">}</div><div class="ttc" id="test__message_8c_html_a3c0313d8a73d2c0fe4ce104ba2bb6ab9"><div class="ttname"><a href="../../d9/d7a/test__message_8c.html#a3c0313d8a73d2c0fe4ce104ba2bb6ab9">user_event_hook_cb</a></div><div class="ttdeci">static int user_event_hook_cb(int category, const char *event, char *body)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7a/test__message_8c_source.html#l00196">test_message.c:196</a></div></div>
<div class="ttc" id="app__audiosocket_8c_html_aec23fc5034c3bb08140fc021f4955877"><div class="ttname"><a href="../../d9/daa/app__audiosocket_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a></div><div class="ttdeci">#define AST_MODULE</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/daa/app__audiosocket_8c_source.html#l00045">app_audiosocket.c:45</a></div></div>
</div><!-- fragment -->
<p>AMI event hook that verifies whether or not we've gotten our user events. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00099">99</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

</div>
</div>
<a id="a39a4aee94bdfb8f87bd4634af516aad8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39a4aee94bdfb8f87bd4634af516aad8">&#9670;&nbsp;</a></span>user_event_lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a> user_event_lock = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mutex for <code>user_event_cond</code>. </p>

<p class="definition">Definition at line <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00065">65</a> of file <a class="el" href="../../d9/d7a/test__message_8c_source.html">test_message.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00196">user_event_hook_cb()</a>, and <a class="el" href="../../d9/d7a/test__message_8c_source.html#l00251">user_event_wait_for_events()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:56 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
